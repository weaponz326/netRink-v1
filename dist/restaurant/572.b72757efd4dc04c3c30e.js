"use strict";(self.webpackChunkang_fire=self.webpackChunkang_fire||[]).push([[572],{756:(_,f,r)=>{r.d(f,{Bt:()=>c.Bt});var c=r(9665)},4572:(_,f,r)=>{r.r(f),r.d(f,{TablesPageModule:()=>se});var c=r(6274),b=r(8718),e=r(2741),u=r(8088),T=r(7632);let i=(()=>{class l{constructor(){this.navLinks=[{text:"All Tables",url:"/home/tables/all-tables",icon:"bi bi-list-ul"}]}ngOnInit(){}}return l.\u0275fac=function(t){return new(t||l)},l.\u0275cmp=e.\u0275\u0275defineComponent({type:l,selectors:[["app-tables-page"]],decls:6,vars:4,consts:[[3,"navBrand","source"],["id","wrapper"],[3,"navLinks","heading"],["id","content-wrapper",1,"d-flex","flex-column"],["id","content"]],template:function(t,n){1&t&&(e.\u0275\u0275element(0,"app-main-navbar",0),e.\u0275\u0275elementStart(1,"div",1),e.\u0275\u0275element(2,"app-module-sidenav",2),e.\u0275\u0275elementStart(3,"div",3),e.\u0275\u0275elementStart(4,"div",4),e.\u0275\u0275element(5,"router-outlet"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275property("navBrand","nR Restaurant")("source","Restaurant"),e.\u0275\u0275advance(2),e.\u0275\u0275property("navLinks",n.navLinks)("heading","Tables"))},directives:[u.D,T.m,b.lC],styles:[""]}),l})();var m=r(1580),p=r(5239),g=r(8972);const x=["connectionToastComponentReference"];let R=(()=>{class l{constructor(t){this.tablesApi=t,this.navHeading=[{text:"Dashboard",url:"/home/tables/dashboard"}],this.allTablesCount=0}ngOnInit(){}ngAfterViewInit(){this.getAllAccountTable()}getAllAccountTable(){this.tablesApi.getAllAccountTable().then(t=>{console.log(t),this.allTablesCount=t.docs.length},t=>{console.log(t),this.connectionToast.openToast()})}}return l.\u0275fac=function(t){return new(t||l)(e.\u0275\u0275directiveInject(p.j))},l.\u0275cmp=e.\u0275\u0275defineComponent({type:l,selectors:[["app-dashboard"]],viewQuery:function(t,n){if(1&t&&e.\u0275\u0275viewQuery(x,5,m.Y),2&t){let a;e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(n.connectionToast=a.first)}},decls:14,vars:2,consts:[[3,"headings"],[1,"container"],[1,"row"],[1,"col-md-3","mb-4"],[1,"card","border-left-secondary","shadow","h-100","py-2"],[1,"card-body"],[1,"row","no-gutters","align-items-center"],[1,"col","mr-2"],[1,"text-xs","font-weight-bold","text-uppercase","mb-1"],[1,"h5","mb-0","font-weight-bold","text-gray-800"],["connectionToastComponentReference",""]],template:function(t,n){1&t&&(e.\u0275\u0275element(0,"app-module-topnav",0),e.\u0275\u0275elementStart(1,"div",1),e.\u0275\u0275elementStart(2,"div",2),e.\u0275\u0275elementStart(3,"div",3),e.\u0275\u0275elementStart(4,"div",4),e.\u0275\u0275elementStart(5,"div",5),e.\u0275\u0275elementStart(6,"div",6),e.\u0275\u0275elementStart(7,"div",7),e.\u0275\u0275elementStart(8,"div",8),e.\u0275\u0275text(9,"No. of Tables"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"div",9),e.\u0275\u0275text(11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(12,"app-connection-toast",null,10)),2&t&&(e.\u0275\u0275property("headings",n.navHeading),e.\u0275\u0275advance(11),e.\u0275\u0275textInterpolate(n.allTablesCount))},directives:[g.H,m.Y],styles:[""]}),l})();var I=r(756),s=r(3324);let v=(()=>{class l{constructor(){this.tableForm=new s.cw({})}ngOnInit(){this.initTableForm()}initTableForm(){this.tableForm=new s.cw({tableNumber:new s.NI(""),tableType:new s.NI(""),capacity:new s.NI(""),location:new s.NI(""),tableStatus:new s.NI("")})}}return l.\u0275fac=function(t){return new(t||l)},l.\u0275cmp=e.\u0275\u0275defineComponent({type:l,selectors:[["app-table-form"]],decls:42,vars:1,consts:[[1,"page-form",3,"formGroup"],[1,"row","page-form"],[1,"col-md-12"],[1,"row","mb-1"],[1,"col-md-4"],[1,"float-md-end","float-sm-start","mt-1"],[1,"col-md-8"],["formControlName","tableNumber",1,"form-control","form-control-sm","w-100"],["formControlName","tableType",1,"form-control","form-control-sm","w-100"],["type","number","min","0","formControlName","capacity",1,"form-control","form-control-sm","w-100"],["formControlName","location",1,"form-control","form-control-sm","w-100"],["formControlName","tableStatus",1,"form-control","form-control-sm","w-100"]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"form",0),e.\u0275\u0275elementStart(1,"div",1),e.\u0275\u0275elementStart(2,"div",2),e.\u0275\u0275elementStart(3,"h4"),e.\u0275\u0275text(4,"Table Details"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"div",2),e.\u0275\u0275elementStart(6,"div",3),e.\u0275\u0275elementStart(7,"div",4),e.\u0275\u0275elementStart(8,"label",5),e.\u0275\u0275text(9,"Table No. :"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"div",6),e.\u0275\u0275element(11,"input",7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"div",3),e.\u0275\u0275elementStart(13,"div",4),e.\u0275\u0275elementStart(14,"label",5),e.\u0275\u0275text(15,"Table Type :"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"div",6),e.\u0275\u0275element(17,"input",8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"div",3),e.\u0275\u0275elementStart(19,"div",4),e.\u0275\u0275elementStart(20,"label",5),e.\u0275\u0275text(21,"Capacity :"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(22,"div",6),e.\u0275\u0275element(23,"input",9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(24,"div",3),e.\u0275\u0275elementStart(25,"div",4),e.\u0275\u0275elementStart(26,"label",5),e.\u0275\u0275text(27,"Location :"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(28,"div",6),e.\u0275\u0275element(29,"input",10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(30,"div",3),e.\u0275\u0275elementStart(31,"div",4),e.\u0275\u0275elementStart(32,"label",5),e.\u0275\u0275text(33,"Table Status :"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(34,"div",6),e.\u0275\u0275elementStart(35,"select",11),e.\u0275\u0275elementStart(36,"option"),e.\u0275\u0275text(37,"Occupied"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(38,"option"),e.\u0275\u0275text(39,"Vacant"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(40,"option"),e.\u0275\u0275text(41,"Need Cleaning"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()),2&t&&e.\u0275\u0275property("formGroup",n.tableForm)},directives:[s._Y,s.JL,s.sg,s.Fj,s.JJ,s.u,s.qQ,s.wV,s.EJ,s.YN,s.Kr],styles:[""]}),l})();const P=["tableFormComponentReference"],k=["addButtonElementReference"],D=["dismissButtonElementReference"],N=["connectionToastComponentReference"];let E=(()=>{class l{constructor(t,n){this.router=t,this.tablesApi=n,this.saveTableEvent=new e.EventEmitter,this.isTableSaving=!1}ngOnInit(){}openModal(){this.addButton.nativeElement.click()}saveTable(){let t={created_at:(0,I.Bt)(),account:localStorage.getItem("restaurant_id"),table_number:this.tableForm.tableForm.controls.tableNumber.value,table_type:this.tableForm.tableForm.controls.tableType.value,capacity:this.tableForm.tableForm.controls.capacity.value,location:this.tableForm.tableForm.controls.location.value,table_status:this.tableForm.tableForm.controls.tableStatus.value};this.saveTableEvent.emit(t)}resetForm(){this.tableForm.tableForm.controls.tableNumber.setValue(""),this.tableForm.tableForm.controls.tableType.setValue(""),this.tableForm.tableForm.controls.capacity.setValue(""),this.tableForm.tableForm.controls.location.setValue(""),this.tableForm.tableForm.controls.tableStatus.setValue("")}}return l.\u0275fac=function(t){return new(t||l)(e.\u0275\u0275directiveInject(b.F0),e.\u0275\u0275directiveInject(p.j))},l.\u0275cmp=e.\u0275\u0275defineComponent({type:l,selectors:[["app-add-table"]],viewQuery:function(t,n){if(1&t&&(e.\u0275\u0275viewQuery(P,5,v),e.\u0275\u0275viewQuery(k,5,e.ElementRef),e.\u0275\u0275viewQuery(D,5,e.ElementRef),e.\u0275\u0275viewQuery(N,5,m.Y)),2&t){let a;e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(n.tableForm=a.first),e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(n.addButton=a.first),e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(n.dismissButton=a.first),e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(n.connectionToast=a.first)}},outputs:{saveTableEvent:"saveTableEvent"},decls:19,vars:2,consts:[["data-bs-toggle","modal","data-bs-target","#addTableModal",3,"hidden"],["addButtonElementReference",""],["id","addTableModal","tabindex","-1","aria-labelledby","addTableModalLabel","aria-hidden","true",1,"modal","fade","form-modal"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header","bg-light"],["id","addTableModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],["dismissButtonElementReference",""],[1,"modal-body"],["tableFormComponentReference",""],[1,"modal-footer"],[1,"btn","btn-sm","btn-secondary","modal-form-btn",3,"disabled","click"],["data-bs-dismiss","modal",1,"btn","btn-sm","btn-secondary","modal-form-btn"]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"button",0,1),e.\u0275\u0275text(2," Launch demo modal\n"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",2),e.\u0275\u0275elementStart(4,"div",3),e.\u0275\u0275elementStart(5,"div",4),e.\u0275\u0275elementStart(6,"div",5),e.\u0275\u0275elementStart(7,"span",6),e.\u0275\u0275text(8,"Add New Table"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(9,"button",7,8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"div",9),e.\u0275\u0275element(12,"app-table-form",null,10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"div",11),e.\u0275\u0275elementStart(15,"button",12),e.\u0275\u0275listener("click",function(){return n.saveTable()}),e.\u0275\u0275text(16,"Save"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"button",13),e.\u0275\u0275text(18,"Cancel"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275property("hidden",!0),e.\u0275\u0275advance(15),e.\u0275\u0275property("disabled",n.isTableSaving))},directives:[v],styles:[""]}),l})();var V=r(1921),M=r(6424);let y=(()=>{class l{constructor(t,n){this.pdfPrint=t,this.tablesApi=n}printAllTables(){var t=this;return(0,V.Z)(function*(){const n=yield t.tablesApi.getAllAccountTable();var a=[["Table No.","Table Type","Table Status"]];for(let de of n.docs){var d=[];let h=de.data();d.push(h.table_number),d.push(h.table_type),d.push(h.table_status),a.push(d)}t.pdfPrint.openPdf([{layout:"lightHorizontalLines",table:{headerRows:1,widths:["30%","35%","35%"],body:a}}])})()}}return l.\u0275fac=function(t){return new(t||l)(e.\u0275\u0275inject(M.n),e.\u0275\u0275inject(p.j))},l.\u0275prov=e.\u0275\u0275defineInjectable({token:l,factory:l.\u0275fac,providedIn:"root"}),l})();const Q=["editButtonElementReference"],B=["dismissButtonElementReference"],j=["tableFormComponentReference"],G=["connectionToastComponentReference"];let S=(()=>{class l{constructor(t,n,a){this.router=t,this.tablesApi=n,this.tablesPrint=a,this.saveTableEvent=new e.EventEmitter,this.deleteTableEvent=new e.EventEmitter,this.isTableSaving=!1,this.isTableDeleting=!1}ngOnInit(){}openModal(t){this.tableData=t,this.tableForm.tableForm.controls.tableNumber.setValue(t.data().table_number),this.tableForm.tableForm.controls.tableType.setValue(t.data().table_type),this.tableForm.tableForm.controls.capacity.setValue(t.data().capacity),this.tableForm.tableForm.controls.location.setValue(t.data().location),this.tableForm.tableForm.controls.tableStatus.setValue(t.data().table_status),this.editButton.nativeElement.click()}saveTable(){this.saveTableEvent.emit({id:this.tableData.id,data:{table_number:this.tableForm.tableForm.controls.tableNumber.value,table_type:this.tableForm.tableForm.controls.tableType.value,capacity:this.tableForm.tableForm.controls.capacity.value,location:this.tableForm.tableForm.controls.location.value,table_status:this.tableForm.tableForm.controls.tableStatus.value}})}deleteTable(){this.deleteTableEvent.emit(this.tableData.id)}}return l.\u0275fac=function(t){return new(t||l)(e.\u0275\u0275directiveInject(b.F0),e.\u0275\u0275directiveInject(p.j),e.\u0275\u0275directiveInject(y))},l.\u0275cmp=e.\u0275\u0275defineComponent({type:l,selectors:[["app-view-table"]],viewQuery:function(t,n){if(1&t&&(e.\u0275\u0275viewQuery(Q,5,e.ElementRef),e.\u0275\u0275viewQuery(B,5,e.ElementRef),e.\u0275\u0275viewQuery(j,5,v),e.\u0275\u0275viewQuery(G,5,m.Y)),2&t){let a;e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(n.editButton=a.first),e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(n.dismissButton=a.first),e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(n.tableForm=a.first),e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(n.connectionToast=a.first)}},outputs:{saveTableEvent:"saveTableEvent",deleteTableEvent:"deleteTableEvent"},decls:21,vars:3,consts:[["data-bs-toggle","modal","data-bs-target","#editTableModal",3,"hidden"],["editButtonElementReference",""],["id","editTableModal","tabindex","-1","aria-labelledby","editTableModalLabel","aria-hidden","true",1,"modal","fade","form-modal"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header","bg-light"],["id","editTableModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],["dismissButtonElementReference",""],[1,"modal-body"],["tableFormComponentReference",""],[1,"modal-footer"],[1,"btn","btn-sm","btn-secondary","modal-form-btn",3,"disabled","click"],["data-bs-dismiss","modal",1,"btn","btn-sm","btn-secondary","modal-form-btn"]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"button",0,1),e.\u0275\u0275text(2," Launch demo modal\n"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",2),e.\u0275\u0275elementStart(4,"div",3),e.\u0275\u0275elementStart(5,"div",4),e.\u0275\u0275elementStart(6,"div",5),e.\u0275\u0275elementStart(7,"span",6),e.\u0275\u0275text(8,"View Table"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(9,"button",7,8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"div",9),e.\u0275\u0275element(12,"app-table-form",null,10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"div",11),e.\u0275\u0275elementStart(15,"button",12),e.\u0275\u0275listener("click",function(){return n.saveTable()}),e.\u0275\u0275text(16,"Save"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"button",12),e.\u0275\u0275listener("click",function(){return n.deleteTable()}),e.\u0275\u0275text(18,"Delete"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"button",13),e.\u0275\u0275text(20,"Cancel"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275property("hidden",!0),e.\u0275\u0275advance(15),e.\u0275\u0275property("disabled",n.isTableSaving),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",n.isTableDeleting))},directives:[v],styles:[""]}),l})();var C=r(8622);const L=["addTableComponentReference"],O=["viewTableComponentReference"],z=["connectionToastComponentReference"],Y=["deleteModalComponentReference"];function H(l,o){if(1&l){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",37),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("table_number","desc")}),e.\u0275\u0275elementEnd()}}function J(l,o){if(1&l){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",38),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("table_number","asc")}),e.\u0275\u0275elementEnd()}}function K(l,o){if(1&l){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",39),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("table_number","desc")}),e.\u0275\u0275elementEnd()}}function U(l,o){if(1&l){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",37),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("table_type","desc")}),e.\u0275\u0275elementEnd()}}function W(l,o){if(1&l){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",38),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("table_type","asc")}),e.\u0275\u0275elementEnd()}}function $(l,o){if(1&l){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",39),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("table_type","desc")}),e.\u0275\u0275elementEnd()}}function X(l,o){if(1&l){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",37),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("table_status","desc")}),e.\u0275\u0275elementEnd()}}function Z(l,o){if(1&l){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",38),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("table_status","asc")}),e.\u0275\u0275elementEnd()}}function q(l,o){if(1&l){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",39),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("table_status","desc")}),e.\u0275\u0275elementEnd()}}function ee(l,o){if(1&l){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"tr",40),e.\u0275\u0275listener("dblclick",function(){const d=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275nextContext().viewTable.openModal(d)}),e.\u0275\u0275elementStart(1,"td"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"td"),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"td"),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()}if(2&l){const t=o.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null==t?null:t.data().table_number),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null==t?null:t.data().table_type),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null==t?null:t.data().table_status)}}function te(l,o){1&l&&(e.\u0275\u0275elementStart(0,"tr",41),e.\u0275\u0275elementStart(1,"td",20),e.\u0275\u0275elementStart(2,"div",42),e.\u0275\u0275elementStart(3,"span",43),e.\u0275\u0275text(4,"Loading..."),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd())}function ne(l,o){1&l&&(e.\u0275\u0275elementStart(0,"tr",41),e.\u0275\u0275elementStart(1,"td",20),e.\u0275\u0275elementStart(2,"p",44),e.\u0275\u0275text(3,"No data available"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd())}let w=(()=>{class l{constructor(t,n,a){this.router=t,this.tablesApi=n,this.tablesPrint=a,this.navHeading=[{text:"All Tables",url:"/home/tables/all-tables"}],this.tablesGridData=[],this.isFetchingGridData=!1,this.isDataAvailable=!0,this.firstInResponse=[],this.lastInResponse=[],this.nextStartAfter=[],this.prevStartAt=[],this.pageNumber=0,this.disableNext=!0,this.disablePrev=!0,this.sortParams={field:"created_at",direction:"desc"}}ngOnInit(){this.getAccountTable()}getAccountTable(){this.isFetchingGridData=!0,this.tablesApi.getAccountTable(this.sortParams,20).then(t=>{console.log(t),this.tablesGridData=t.docs,this.isFetchingGridData=!1,this.prevStartAt=this.firstInResponse,this.nextStartAfter=t.docs[t.docs.length-1],this.firstInResponse=t.docs[0],this.pageNumber=1,this.isDataAvailable=!!t.docs.length,!t.docs.length||t.docs.length<20?(this.disableNext=!0,this.disablePrev=!0):(this.disableNext=!1,this.disablePrev=!0)},t=>{console.log(t),this.isFetchingGridData=!1,this.connectionToast.openToast()})}nextPage(t){t.preventDefault(),this.isFetchingGridData=!0,this.tablesApi.getAccountTableNext(this.sortParams,20,this.nextStartAfter).then(n=>{console.log(n),this.tablesGridData=n.docs,this.isFetchingGridData=!1,this.prevStartAt=this.firstInResponse,this.nextStartAfter=n.docs[n.docs.length-1],this.firstInResponse=n.docs[0],this.pageNumber++,n.docs.length<20&&(this.disableNext=!0,this.disablePrev=!1)},n=>{console.log(n),this.isFetchingGridData=!1,this.connectionToast.openToast()})}previousPage(t){t.preventDefault(),this.isFetchingGridData=!0,this.tablesApi.getAccountTablePrev(this.sortParams,20,this.prevStartAt).then(n=>{console.log(n),this.tablesGridData=n.docs,this.isFetchingGridData=!1,n.docs.length||(this.isDataAvailable=!1),this.prevStartAt=this.firstInResponse,this.nextStartAfter=n.docs[n.docs.length-1],this.firstInResponse=n.docs[0],this.pageNumber--,1==this.pageNumber&&(this.disableNext=!1,this.disablePrev=!0)},n=>{console.log(n),this.isFetchingGridData=!1,this.connectionToast.openToast()})}sortTable(t,n){this.sortParams.field=t,this.sortParams.direction=n,this.getAccountTable()}createTable(t){console.log("u are saving a new table"),console.log(t),this.addTable.isTableSaving=!0,this.tablesApi.createTable(t).then(n=>{console.log(n),this.addTable.isTableSaving=!1,this.addTable.resetForm(),this.addTable.dismissButton.nativeElement.click(),this.isDataAvailable=!1,this.getAccountTable()},n=>{console.log(n),this.addTable.isTableSaving=!1,this.connectionToast.openToast()})}updateTable(t){console.log("u are updating a table"),console.log(t),this.viewTable.isTableSaving=!0,this.tablesApi.updateTable(t.id,t.data).then(n=>{console.log(n),this.viewTable.dismissButton.nativeElement.click(),this.viewTable.isTableSaving=!1,this.getAccountTable()},n=>{console.log(n),this.viewTable.isTableSaving=!1,this.connectionToast.openToast()})}confirmDelete(t){this.deleteId=t,this.deleteModal.openModal()}deleteTable(){this.viewTable.isTableDeleting=!0,this.tablesApi.deleteTable(this.deleteId).then(t=>{console.log(t),this.viewTable.isTableDeleting=!1,this.viewTable.editButton.nativeElement.click(),this.getAccountTable()},t=>{console.log(t),this.viewTable.isTableDeleting=!1,this.connectionToast.openToast()})}onPrint(){console.log("lets start printing..."),this.tablesPrint.printAllTables()}}return l.\u0275fac=function(t){return new(t||l)(e.\u0275\u0275directiveInject(b.F0),e.\u0275\u0275directiveInject(p.j),e.\u0275\u0275directiveInject(y))},l.\u0275cmp=e.\u0275\u0275defineComponent({type:l,selectors:[["app-all-tables"]],viewQuery:function(t,n){if(1&t&&(e.\u0275\u0275viewQuery(L,5,E),e.\u0275\u0275viewQuery(O,5,S),e.\u0275\u0275viewQuery(z,5,m.Y),e.\u0275\u0275viewQuery(Y,5,C.z)),2&t){let a;e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(n.addTable=a.first),e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(n.viewTable=a.first),e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(n.connectionToast=a.first),e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(n.deleteModal=a.first)}},decls:55,vars:18,consts:[[3,"headings","showPrint","print"],[1,"container"],[1,"row"],[1,"col-md-7"],[1,"row","mb-3"],[1,"col-md-12"],[1,"btn","btn-secondary","page-add-btn",3,"click"],[1,"btn","btn-light","border","float-end","page-refresh-btn",3,"disabled","click"],[1,"bi","bi-arrow-clockwise"],[1,"overflow-auto"],[1,"table","table-bordered","table-sm","w-100","page-table"],[1,"bg-light"],["width","30%",1,"min-width-2"],["class","bi bi-filter float-end list-pointer",3,"click",4,"ngIf"],["class","bi bi-sort-down float-end list-pointer",3,"click",4,"ngIf"],["class","bi bi-sort-up float-end list-pointer",3,"click",4,"ngIf"],["width","35%",1,"min-width-3"],["width","35%",1,"min-width-2"],["class","table-pointer",3,"dblclick",4,"ngFor","ngForOf"],["class","text-center",4,"ngIf"],["colspan","3"],["aria-label","Page navigation",1,"nav-light","float-end"],[1,"pagination","pagination-sm","mb-0","justify-content-end"],[1,"page-item",3,"ngClass"],["href","#","aria-label","First",1,"page-link",3,"click"],[1,"bi","bi-caret-left-fill"],[1,"page-item"],["href","#","aria-label","Current",1,"page-link",3,"click"],["href","#","aria-label","Last",1,"page-link",3,"click"],[1,"bi","bi-caret-right-fill"],[3,"saveTableEvent"],["addTableComponentReference",""],[3,"saveTableEvent","deleteTableEvent"],["viewTableComponentReference",""],["connectionToastComponentReference",""],[3,"confirmEvent"],["deleteModalComponentReference",""],[1,"bi","bi-filter","float-end","list-pointer",3,"click"],[1,"bi","bi-sort-down","float-end","list-pointer",3,"click"],[1,"bi","bi-sort-up","float-end","list-pointer",3,"click"],[1,"table-pointer",3,"dblclick"],[1,"text-center"],["role","status",1,"spinner-grow","spinner-grow-sm","m-2"],[1,"visually-hidden"],[1,"m-4"]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"app-module-topnav",0),e.\u0275\u0275listener("print",function(){return n.onPrint()}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(1,"div",1),e.\u0275\u0275elementStart(2,"div",2),e.\u0275\u0275elementStart(3,"div",3),e.\u0275\u0275elementStart(4,"div",4),e.\u0275\u0275elementStart(5,"div",5),e.\u0275\u0275elementStart(6,"button",6),e.\u0275\u0275listener("click",function(){return n.addTable.openModal()}),e.\u0275\u0275text(7,"Add New Table"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"button",7),e.\u0275\u0275listener("click",function(){return n.getAccountTable()}),e.\u0275\u0275element(9,"i",8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"div",9),e.\u0275\u0275elementStart(11,"table",10),e.\u0275\u0275elementStart(12,"thead"),e.\u0275\u0275elementStart(13,"tr",11),e.\u0275\u0275elementStart(14,"th",12),e.\u0275\u0275text(15," Table No. "),e.\u0275\u0275template(16,H,1,0,"i",13),e.\u0275\u0275template(17,J,1,0,"i",14),e.\u0275\u0275template(18,K,1,0,"i",15),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"th",16),e.\u0275\u0275text(20," Table Type "),e.\u0275\u0275template(21,U,1,0,"i",13),e.\u0275\u0275template(22,W,1,0,"i",14),e.\u0275\u0275template(23,$,1,0,"i",15),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(24,"th",17),e.\u0275\u0275text(25," Table Status "),e.\u0275\u0275template(26,X,1,0,"i",13),e.\u0275\u0275template(27,Z,1,0,"i",14),e.\u0275\u0275template(28,q,1,0,"i",15),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(29,"tbody"),e.\u0275\u0275template(30,ee,7,3,"tr",18),e.\u0275\u0275template(31,te,5,0,"tr",19),e.\u0275\u0275template(32,ne,4,0,"tr",19),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(33,"tfoot"),e.\u0275\u0275elementStart(34,"tr",11),e.\u0275\u0275elementStart(35,"td",20),e.\u0275\u0275elementStart(36,"nav",21),e.\u0275\u0275elementStart(37,"ul",22),e.\u0275\u0275elementStart(38,"li",23),e.\u0275\u0275elementStart(39,"a",24),e.\u0275\u0275listener("click",function(d){return n.previousPage(d)}),e.\u0275\u0275element(40,"i",25),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(41,"li",26),e.\u0275\u0275elementStart(42,"a",27),e.\u0275\u0275listener("click",function(d){return d.preventDefault()}),e.\u0275\u0275text(43),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(44,"li",23),e.\u0275\u0275elementStart(45,"a",28),e.\u0275\u0275listener("click",function(d){return n.nextPage(d)}),e.\u0275\u0275element(46,"i",29),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(47,"app-add-table",30,31),e.\u0275\u0275listener("saveTableEvent",function(d){return n.createTable(d)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(49,"app-view-table",32,33),e.\u0275\u0275listener("saveTableEvent",function(d){return n.updateTable(d)})("deleteTableEvent",function(d){return n.confirmDelete(d)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(51,"app-connection-toast",null,34),e.\u0275\u0275elementStart(53,"app-delete-modal",35,36),e.\u0275\u0275listener("confirmEvent",function(){return n.deleteTable()}),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275property("headings",n.navHeading)("showPrint",!0),e.\u0275\u0275advance(8),e.\u0275\u0275property("disabled",n.isFetchingGridData),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf","table_number"!=n.sortParams.field),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","table_number"==n.sortParams.field&&"desc"==n.sortParams.direction),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","table_number"==n.sortParams.field&&"asc"==n.sortParams.direction),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf","table_type"!=n.sortParams.field),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","table_type"==n.sortParams.field&&"desc"==n.sortParams.direction),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","table_type"==n.sortParams.field&&"asc"==n.sortParams.direction),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf","table_status"!=n.sortParams.field),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","table_status"==n.sortParams.field&&"desc"==n.sortParams.direction),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","table_status"==n.sortParams.field&&"asc"==n.sortParams.direction),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",n.tablesGridData),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.isFetchingGridData),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!n.isDataAvailable&&!n.isFetchingGridData),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngClass",n.disablePrev?"disabled":""),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate1(" ",n.pageNumber," "),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",n.disableNext?"disabled":""))},directives:[g.H,c.O5,c.sg,c.mk,E,S,m.Y,C.z],styles:[""]}),l})();const le=[{path:"",component:i,children:[{path:"",component:w},{path:"dashboard",component:R},{path:"all-tables",component:w}]}];let ae=(()=>{class l{}return l.\u0275fac=function(t){return new(t||l)},l.\u0275mod=e.\u0275\u0275defineNgModule({type:l}),l.\u0275inj=e.\u0275\u0275defineInjector({imports:[[b.Bz.forChild(le)],b.Bz]}),l})();var oe=r(7264),A=r(5018),ie=r(6508);let re=(()=>{class l{}return l.\u0275fac=function(t){return new(t||l)},l.\u0275mod=e.\u0275\u0275defineNgModule({type:l}),l.\u0275inj=e.\u0275\u0275defineInjector({imports:[[c.ez,b.Bz,s.u5,s.UX,ie.m9,A.p]]}),l})(),se=(()=>{class l{}return l.\u0275fac=function(t){return new(t||l)},l.\u0275mod=e.\u0275\u0275defineNgModule({type:l}),l.\u0275inj=e.\u0275\u0275defineInjector({imports:[[c.ez,ae,oe.M,A.p,re]]}),l})()},5239:(_,f,r)=>{r.d(f,{j:()=>e});var c=r(2741),b=r(9805);let e=(()=>{class u{constructor(i){this.afs=i,this.tableRef=this.afs.collection("restaurant/module_tables/restaurant_table")}createTable(i){return this.tableRef.add(i)}getTable(i){return this.tableRef.doc(i).ref.get()}updateTable(i,m){return console.log(i),console.log(m),this.tableRef.doc(i).update(m)}deleteTable(i){return this.tableRef.doc(i).delete()}getAccountTable(i,m){return this.tableRef.ref.where("account","==",localStorage.getItem("restaurant_id")).orderBy(null==i?void 0:i.field,null==i?void 0:i.direction).limit(m).get()}getAccountTableNext(i,m,p){return this.tableRef.ref.where("account","==",localStorage.getItem("restaurant_id")).orderBy(null==i?void 0:i.field,null==i?void 0:i.direction).startAfter(p).limit(m).get()}getAccountTablePrev(i,m,p){return this.tableRef.ref.where("account","==",localStorage.getItem("restaurant_id")).orderBy(null==i?void 0:i.field,null==i?void 0:i.direction).startAt(p).limit(m).get()}getAllAccountTable(){return this.tableRef.ref.where("account","==",localStorage.getItem("restaurant_id")).orderBy("created_at","desc").get()}}return u.\u0275fac=function(i){return new(i||u)(c.\u0275\u0275inject(b.ST))},u.\u0275prov=c.\u0275\u0275defineInjectable({token:u,factory:u.\u0275fac,providedIn:"root"}),u})()}}]);