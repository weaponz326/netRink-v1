"use strict";(self.webpackChunkang_fire=self.webpackChunkang_fire||[]).push([[981],{1592:(S,u,o)=>{o.d(u,{c:()=>A});var e=o(2741),_=o(1580),m=o(687),f=o(6274);const s=["openButtonElementReference"],h=["closeButtonElementReference"],t=["connectionToastComponentReference"];function i(a,c){if(1&a){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",31),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(n),e.\u0275\u0275nextContext().sortTable("staff_code","desc")}),e.\u0275\u0275elementEnd()}}function d(a,c){if(1&a){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",32),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(n),e.\u0275\u0275nextContext().sortTable("staff_code","asc")}),e.\u0275\u0275elementEnd()}}function g(a,c){if(1&a){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",33),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(n),e.\u0275\u0275nextContext().sortTable("staff_code","desc")}),e.\u0275\u0275elementEnd()}}function v(a,c){if(1&a){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",31),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(n),e.\u0275\u0275nextContext().sortTable("staff_name","desc")}),e.\u0275\u0275elementEnd()}}function b(a,c){if(1&a){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",32),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(n),e.\u0275\u0275nextContext().sortTable("staff_name","asc")}),e.\u0275\u0275elementEnd()}}function E(a,c){if(1&a){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",33),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(n),e.\u0275\u0275nextContext().sortTable("staff_name","desc")}),e.\u0275\u0275elementEnd()}}function R(a,c){if(1&a){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",31),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(n),e.\u0275\u0275nextContext().sortTable("job","desc")}),e.\u0275\u0275elementEnd()}}function C(a,c){if(1&a){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",32),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(n),e.\u0275\u0275nextContext().sortTable("job","asc")}),e.\u0275\u0275elementEnd()}}function I(a,c){if(1&a){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",33),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(n),e.\u0275\u0275nextContext().sortTable("job","desc")}),e.\u0275\u0275elementEnd()}}function P(a,c){if(1&a){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"tr",34),e.\u0275\u0275listener("dblclick",function(){const p=e.\u0275\u0275restoreView(n).$implicit;return e.\u0275\u0275nextContext().selectRow(p)}),e.\u0275\u0275elementStart(1,"td"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"td"),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"td"),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()}if(2&a){const n=c.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null==n?null:n.data().staff_code),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate2("",null==n?null:n.data().first_name," ",null==n?null:n.data().last_name,""),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null==n?null:n.data().job)}}function x(a,c){1&a&&(e.\u0275\u0275elementStart(0,"tr",35),e.\u0275\u0275elementStart(1,"td",19),e.\u0275\u0275elementStart(2,"div",36),e.\u0275\u0275elementStart(3,"span",37),e.\u0275\u0275text(4,"Loading..."),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd())}function T(a,c){1&a&&(e.\u0275\u0275elementStart(0,"tr",35),e.\u0275\u0275elementStart(1,"td",19),e.\u0275\u0275elementStart(2,"p",38),e.\u0275\u0275text(3,"No data available"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd())}let A=(()=>{class a{constructor(n){this.staffApi=n,this.rowSelected=new e.EventEmitter,this.staffGridData=[],this.isFetchingGridData=!1,this.isDataAvailable=!0,this.firstInResponse=[],this.lastInResponse=[],this.nextStartAfter=[],this.prevStartAt=[],this.pageNumber=0,this.disableNext=!0,this.disablePrev=!0,this.sortParams={field:"created_at",direction:"desc"}}ngOnInit(){}openModal(){this.staffGridData=[],this.getAccountStaff(),this.openButton.nativeElement.click()}getAccountStaff(){this.isFetchingGridData=!0,this.staffApi.getAccountStaff(this.sortParams,15).then(n=>{console.log(n),this.staffGridData=n.docs,this.isFetchingGridData=!1,this.prevStartAt=this.firstInResponse,this.nextStartAfter=n.docs[n.docs.length-1],this.firstInResponse=n.docs[0],this.pageNumber=1,n.docs.length||(this.isDataAvailable=!1),!n.docs.length||n.docs.length<15?(this.disableNext=!0,this.disablePrev=!0):(this.disableNext=!1,this.disablePrev=!0)},n=>{console.log(n),this.isFetchingGridData=!1,this.connectionToast.openToast()})}nextPage(n){n.preventDefault(),this.isFetchingGridData=!0,this.staffApi.getAccountStaffNext(this.sortParams,15,this.nextStartAfter).then(r=>{console.log(r),this.staffGridData=r.docs,this.isFetchingGridData=!1,this.prevStartAt=this.firstInResponse,this.nextStartAfter=r.docs[r.docs.length-1],this.firstInResponse=r.docs[0],this.pageNumber++,r.docs.length<15&&(this.disableNext=!0,this.disablePrev=!1)},r=>{console.log(r),this.isFetchingGridData=!1,this.connectionToast.openToast()})}previousPage(n){n.preventDefault(),this.isFetchingGridData=!0,this.staffApi.getAccountStaffPrev(this.sortParams,15,this.prevStartAt).then(r=>{console.log(r),this.staffGridData=r.docs,this.isFetchingGridData=!1,r.docs.length||(this.isDataAvailable=!1),this.prevStartAt=this.firstInResponse,this.nextStartAfter=r.docs[r.docs.length-1],this.firstInResponse=r.docs[0],this.pageNumber--,1==this.pageNumber&&(this.disableNext=!1,this.disablePrev=!0)},r=>{console.log(r),this.isFetchingGridData=!1,this.connectionToast.openToast()})}sortTable(n,r){this.sortParams.field=n,this.sortParams.direction=r,this.getAccountStaff()}selectRow(n){this.rowSelected.emit(n),this.closeButton.nativeElement.click(),console.log(n)}}return a.\u0275fac=function(n){return new(n||a)(e.\u0275\u0275directiveInject(m.e))},a.\u0275cmp=e.\u0275\u0275defineComponent({type:a,selectors:[["app-select-staff"]],viewQuery:function(n,r){if(1&n&&(e.\u0275\u0275viewQuery(s,5,e.ElementRef),e.\u0275\u0275viewQuery(h,5,e.ElementRef),e.\u0275\u0275viewQuery(t,5,_.Y)),2&n){let l;e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(r.openButton=l.first),e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(r.closeButton=l.first),e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(r.connectionToast=l.first)}},outputs:{rowSelected:"rowSelected"},decls:52,vars:17,consts:[["data-bs-toggle","modal","data-bs-target","#selectStaffModal",3,"hidden"],["openButtonElementReference",""],["id","selectStaffModal","tabindex","-1","aria-labelledby","selectStaffModalLabel","aria-hidden","true",1,"modal","fade","select-table-modal"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header","bg-light"],["id","selectStaffModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body","overflow-auto"],[1,"table","table-bordered","table-sm","w-100","page-table"],[1,"bg-light"],["width","20%",1,"min-width-2"],["class","bi bi-filter float-end list-pointer",3,"click",4,"ngIf"],["class","bi bi-sort-down float-end list-pointer",3,"click",4,"ngIf"],["class","bi bi-sort-up float-end list-pointer",3,"click",4,"ngIf"],["width","50%",1,"min-width-4"],["width","30%",1,"min-width-3"],["class","table-pointer",3,"dblclick",4,"ngFor","ngForOf"],["class","text-center",4,"ngIf"],["colspan","4"],["aria-label","Page navigation",1,"nav-light","float-end"],[1,"pagination","pagination-sm","mb-0","justify-content-end"],[1,"page-item",3,"ngClass"],["href","#","aria-label","First",1,"page-link",3,"click"],[1,"bi","bi-caret-left-fill"],[1,"page-item"],["href","#","aria-label","Current",1,"page-link",3,"click"],["href","#","aria-label","Last",1,"page-link",3,"click"],[1,"bi","bi-caret-right-fill"],["closeButtonElementReference",""],["connectionToastComponentReference",""],[1,"bi","bi-filter","float-end","list-pointer",3,"click"],[1,"bi","bi-sort-down","float-end","list-pointer",3,"click"],[1,"bi","bi-sort-up","float-end","list-pointer",3,"click"],[1,"table-pointer",3,"dblclick"],[1,"text-center"],["role","status",1,"spinner-grow","m-4"],[1,"visually-hidden"],[1,"m-4"]],template:function(n,r){1&n&&(e.\u0275\u0275elementStart(0,"button",0,1),e.\u0275\u0275text(2," Launch demo modal\n"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",2),e.\u0275\u0275elementStart(4,"div",3),e.\u0275\u0275elementStart(5,"div",4),e.\u0275\u0275elementStart(6,"div",5),e.\u0275\u0275elementStart(7,"span",6),e.\u0275\u0275text(8,"Select Restaurant Staff"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(9,"button",7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"div",8),e.\u0275\u0275elementStart(11,"table",9),e.\u0275\u0275elementStart(12,"thead"),e.\u0275\u0275elementStart(13,"tr",10),e.\u0275\u0275elementStart(14,"th",11),e.\u0275\u0275text(15," Staff ID "),e.\u0275\u0275template(16,i,1,0,"i",12),e.\u0275\u0275template(17,d,1,0,"i",13),e.\u0275\u0275template(18,g,1,0,"i",14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"th",15),e.\u0275\u0275text(20," Staff Name "),e.\u0275\u0275template(21,v,1,0,"i",12),e.\u0275\u0275template(22,b,1,0,"i",13),e.\u0275\u0275template(23,E,1,0,"i",14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(24,"th",16),e.\u0275\u0275text(25," Job "),e.\u0275\u0275template(26,R,1,0,"i",12),e.\u0275\u0275template(27,C,1,0,"i",13),e.\u0275\u0275template(28,I,1,0,"i",14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(29,"tbody"),e.\u0275\u0275template(30,P,7,4,"tr",17),e.\u0275\u0275template(31,x,5,0,"tr",18),e.\u0275\u0275template(32,T,4,0,"tr",18),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(33,"tfoot"),e.\u0275\u0275elementStart(34,"tr",10),e.\u0275\u0275elementStart(35,"td",19),e.\u0275\u0275elementStart(36,"nav",20),e.\u0275\u0275elementStart(37,"ul",21),e.\u0275\u0275elementStart(38,"li",22),e.\u0275\u0275elementStart(39,"a",23),e.\u0275\u0275listener("click",function(p){return r.previousPage(p)}),e.\u0275\u0275element(40,"i",24),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(41,"li",25),e.\u0275\u0275elementStart(42,"a",26),e.\u0275\u0275listener("click",function(p){return p.preventDefault()}),e.\u0275\u0275text(43),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(44,"li",22),e.\u0275\u0275elementStart(45,"a",27),e.\u0275\u0275listener("click",function(p){return r.nextPage(p)}),e.\u0275\u0275element(46,"i",28),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(47,"button",0,29),e.\u0275\u0275text(49," Launch demo modal "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(50,"app-connection-toast",null,30)),2&n&&(e.\u0275\u0275property("hidden",!0),e.\u0275\u0275advance(16),e.\u0275\u0275property("ngIf","staff_code"!=r.sortParams.field),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","staff_code"==r.sortParams.field&&"desc"==r.sortParams.direction),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","staff_code"==r.sortParams.field&&"asc"==r.sortParams.direction),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf","staff_name"!=r.sortParams.field),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","staff_name"==r.sortParams.field&&"desc"==r.sortParams.direction),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","staff_name"==r.sortParams.field&&"asc"==r.sortParams.direction),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf","job"!=r.sortParams.field),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","job"==r.sortParams.field&&"desc"==r.sortParams.direction),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","job"==r.sortParams.field&&"asc"==r.sortParams.direction),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",r.staffGridData),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",r.isFetchingGridData),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!r.isDataAvailable&&!r.isFetchingGridData),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngClass",r.disablePrev?"disabled":""),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate1(" ",r.pageNumber," "),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",r.disableNext?"disabled":""),e.\u0275\u0275advance(3),e.\u0275\u0275property("hidden",!0))},directives:[f.O5,f.sg,f.mk,_.Y],styles:[""]}),a})()},2452:(S,u,o)=>{o.d(u,{d:()=>f});var e=o(6274),_=o(5018),m=o(2741);let f=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=m.\u0275\u0275defineNgModule({type:s}),s.\u0275inj=m.\u0275\u0275defineInjector({imports:[[e.ez,_.p]]}),s})()},970:(S,u,o)=>{o.d(u,{P:()=>f});var e=o(2741),_=o(9805),m=o(1887);let f=(()=>{class s{constructor(t,i){this.afs=t,this.http=i,this.rosterRef=this.afs.collection("restaurant/module_roster/restaurant_roster"),this.shiftRef=this.afs.collection("restaurant/module_roster/restaurant_roster_shift"),this.batchRef=this.afs.collection("restaurant/module_roster/restaurant_roster_batch"),this.personnelRef=this.afs.collection("restaurant/module_roster/restaurant_roster_personnel"),this.sheetRef=this.afs.collection("restaurant/module_roster/restaurant_roster_sheet")}createRoster(t){return this.rosterRef.add(t)}getRoster(){return this.rosterRef.doc(String(sessionStorage.getItem("restaurant_roster_id"))).ref.get()}updateRoster(t){return this.rosterRef.doc(String(sessionStorage.getItem("restaurant_roster_id"))).update(t)}deleteRoster(){return this.rosterRef.doc(String(sessionStorage.getItem("restaurant_roster_id"))).delete()}getAccountRoster(t,i){return this.rosterRef.ref.where("account","==",localStorage.getItem("restaurant_id")).orderBy(null==t?void 0:t.field,null==t?void 0:t.direction).limit(i).get()}getAccountRosterNext(t,i,d){return this.rosterRef.ref.where("account","==",localStorage.getItem("restaurant_id")).orderBy(null==t?void 0:t.field,null==t?void 0:t.direction).startAfter(d).limit(i).get()}getAccountRosterPrev(t,i,d){return this.rosterRef.ref.where("account","==",localStorage.getItem("restaurant_id")).orderBy(null==t?void 0:t.field,null==t?void 0:t.direction).startAt(d).limit(i).get()}getAllAccountRoster(){return this.rosterRef.ref.where("account","==",localStorage.getItem("restaurant_id")).orderBy("created_at","desc").get()}createShift(t){return this.shiftRef.add(t)}getShift(t){return this.shiftRef.doc(t).ref.get()}updateShift(t,i){return this.shiftRef.doc(t).update(i)}deleteShift(t){return this.shiftRef.doc(t).delete()}getRosterShift(){return this.shiftRef.ref.where("roster","==",sessionStorage.getItem("restaurant_roster_id")).orderBy("created_at","desc").get()}createBatch(t){return this.batchRef.add(t)}getBatch(t){return this.batchRef.doc(t).ref.get()}updateBatch(t,i){return this.batchRef.doc(t).update(i)}deleteBatch(t){return this.batchRef.doc(t).delete()}getRosterBatch(){return this.batchRef.ref.where("roster","==",sessionStorage.getItem("restaurant_roster_id")).orderBy("created_at","desc").get()}createPersonnel(t){return this.personnelRef.add(t)}getPersonnel(t){return this.personnelRef.doc(t).ref.get()}updatePersonnel(t,i){return this.personnelRef.doc(t).update(i)}deletePersonnel(t){return this.personnelRef.doc(t).delete()}getRosterPersonnel(){return this.personnelRef.ref.where("roster","==",sessionStorage.getItem("restaurant_roster_id")).orderBy("created_at","desc").get()}createSheet(t,i){return this.sheetRef.doc(t).set(i)}getSheet(){return this.sheetRef.doc(String(sessionStorage.getItem("restaurant_roster_id"))).ref.get()}updateSheet(t){return this.sheetRef.doc(String(sessionStorage.getItem("restaurant_roster_id"))).update(t)}deleteSheet(){return this.sheetRef.doc(String(sessionStorage.getItem("restaurant_roster_id"))).delete()}getRosterSheet(){return this.sheetRef.ref.where("roster","==",sessionStorage.getItem("restaurant_roster_id")).orderBy("created_at","desc").get()}}return s.\u0275fac=function(t){return new(t||s)(e.\u0275\u0275inject(_.ST),e.\u0275\u0275inject(m.eN))},s.\u0275prov=e.\u0275\u0275defineInjectable({token:s,factory:s.\u0275fac,providedIn:"root"}),s})()},687:(S,u,o)=>{o.d(u,{e:()=>f});var e=o(2741),_=o(9805),m=o(4477);let f=(()=>{class s{constructor(t,i){this.afs=t,this.storage=i,this.staffRef=this.afs.collection("restaurant/module_staff/restaurant_staff"),this.storagePath="/restaurant/"+localStorage.getItem("restaurant_id"),this.storageRef=this.storage.ref(this.storagePath)}createStaff(t){return this.staffRef.add(t)}getStaff(){return this.staffRef.doc(String(sessionStorage.getItem("restaurant_staff_id"))).ref.get()}updateStaff(t){return this.staffRef.doc(String(sessionStorage.getItem("restaurant_staff_id"))).update(t)}deleteStaff(){return this.staffRef.doc(String(sessionStorage.getItem("restaurant_staff_id"))).delete()}getAccountStaff(t,i){return this.staffRef.ref.where("account","==",localStorage.getItem("restaurant_id")).orderBy(null==t?void 0:t.field,null==t?void 0:t.direction).limit(i).get()}getAccountStaffNext(t,i,d){return this.staffRef.ref.where("account","==",localStorage.getItem("restaurant_id")).orderBy(null==t?void 0:t.field,null==t?void 0:t.direction).startAfter(d).limit(i).get()}getAccountStaffPrev(t,i,d){return this.staffRef.ref.where("account","==",localStorage.getItem("restaurant_id")).orderBy(null==t?void 0:t.field,null==t?void 0:t.direction).startAt(d).limit(i).get()}getAllAccountStaff(){return this.staffRef.ref.where("account","==",localStorage.getItem("restaurant_id")).orderBy("created_at","desc").get()}}return s.\u0275fac=function(t){return new(t||s)(e.\u0275\u0275inject(_.ST),e.\u0275\u0275inject(m.Q1))},s.\u0275prov=e.\u0275\u0275defineInjectable({token:s,factory:s.\u0275fac,providedIn:"root"}),s})()}}]);