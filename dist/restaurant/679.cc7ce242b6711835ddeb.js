"use strict";(self.webpackChunkang_fire=self.webpackChunkang_fire||[]).push([[679],{8679:(I,y,a)=>{a.r(y),a.d(y,{DeliveriesPageModule:()=>se});var m=a(6274),c=a(8718),e=a(2741),p=a(8088),D=a(7632);let o=(()=>{class i{constructor(){this.navLinks=[{text:"All Deliveries",url:"/home/deliveries/all-deliveries",icon:"bi bi-list-ul"}]}ngOnInit(){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.\u0275\u0275defineComponent({type:i,selectors:[["app-deliveries-page"]],decls:6,vars:4,consts:[[3,"navBrand","source"],["id","wrapper"],[3,"navLinks","heading"],["id","content-wrapper",1,"d-flex","flex-column"],["id","content"]],template:function(t,n){1&t&&(e.\u0275\u0275element(0,"app-main-navbar",0),e.\u0275\u0275elementStart(1,"div",1),e.\u0275\u0275element(2,"app-module-sidenav",2),e.\u0275\u0275elementStart(3,"div",3),e.\u0275\u0275elementStart(4,"div",4),e.\u0275\u0275element(5,"router-outlet"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275property("navBrand","nR Restaurant")("source","Restaurant"),e.\u0275\u0275advance(2),e.\u0275\u0275property("navLinks",n.navLinks)("heading","Deliveries"))},directives:[p.D,D.m,c.lC],styles:[""]}),i})();var v=a(8361),u=a.n(v),f=a(1580),g=a(9416),S=a(8972),b=a(6508);const P=["connectionToastComponentReference"];let E=(()=>{class i{constructor(t){this.deliveriesApi=t,this.navHeading=[{text:"Dashboard",url:"/home/deliveries/dashboard"}],this.weekDeliveriesCount=0,this.deliveriesLineChartData=[{data:[0],label:"Menu Groups"}],this.deliveriesLineChartLabels=[""],this.chartOptions={},this.today=u()()}ngOnInit(){this.initChart(),this.getWeekDelivery()}initChart(){this.chartOptions={responsive:!0,scales:{yAxes:[{min:0,ticks:{stepSize:1,beginAtZero:!0}}]}}}getWeekDelivery(){this.deliveriesApi.getWeekDelivery(u()(this.today).add(-1,"months").toDate(),this.today.toDate()).then(t=>{console.log(t),this.weekDeliveriesData=t.docs,this.weekDeliveriesCount=t.docs.length,this.setDeliveryChartData()},t=>{console.log(t),this.connectionToast.openToast()})}setDeliveryChartData(){this.deliveriesLineChartLabels=[];for(let r=7;r>0;r--){var t=u()(this.today).add(-r,"days");this.deliveriesLineChartLabels.push(t.toDate().toISOString().slice(0,10))}console.log(this.deliveriesLineChartLabels);let n=[];for(let r=7;r>0;r--)n.push(0);console.log(n),this.weekDeliveriesData.forEach(r=>{var s=r.data().created_at.toDate().toISOString().slice(0,10);for(let _=7;_>0;_--)this.deliveriesLineChartLabels[_]==s&&n[_]++}),console.log(n),this.deliveriesLineChartData=[{data:n,label:"Deliveries"}]}}return i.\u0275fac=function(t){return new(t||i)(e.\u0275\u0275directiveInject(g.g))},i.\u0275cmp=e.\u0275\u0275defineComponent({type:i,selectors:[["app-dashboard"]],viewQuery:function(t,n){if(1&t&&e.\u0275\u0275viewQuery(P,5,f.Y),2&t){let r;e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(n.connectionToast=r.first)}},decls:23,vars:7,consts:[[3,"headings"],[1,"container"],[1,"row"],[1,"col-md-3","mb-4"],[1,"card","border-left-secondary","shadow","h-100","py-2"],[1,"card-body"],[1,"row","no-gutters","align-items-center"],[1,"col","mr-2"],[1,"text-xs","font-weight-bold","text-uppercase","mb-1"],[1,"h5","mb-0","font-weight-bold","text-gray-800"],[1,"col-md-8"],[1,"card","shadow","mb-4"],[1,"card-header","py-3","d-flex","flex-row","align-items-center","justify-content-between"],[1,"m-0","font-weight-bold"],[1,"chart-area"],["baseChart","",3,"datasets","labels","options","legend","chartType"],["connectionToastComponentReference",""]],template:function(t,n){1&t&&(e.\u0275\u0275element(0,"app-module-topnav",0),e.\u0275\u0275elementStart(1,"div",1),e.\u0275\u0275elementStart(2,"div",2),e.\u0275\u0275elementStart(3,"div",3),e.\u0275\u0275elementStart(4,"div",4),e.\u0275\u0275elementStart(5,"div",5),e.\u0275\u0275elementStart(6,"div",6),e.\u0275\u0275elementStart(7,"div",7),e.\u0275\u0275elementStart(8,"div",8),e.\u0275\u0275text(9,"Deliveries this Week"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"div",9),e.\u0275\u0275text(11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"div",2),e.\u0275\u0275elementStart(13,"div",10),e.\u0275\u0275elementStart(14,"div",11),e.\u0275\u0275elementStart(15,"div",12),e.\u0275\u0275elementStart(16,"h6",13),e.\u0275\u0275text(17,"Total Deliveries by Day"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"div",5),e.\u0275\u0275elementStart(19,"div",14),e.\u0275\u0275element(20,"canvas",15),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(21,"app-connection-toast",null,16)),2&t&&(e.\u0275\u0275property("headings",n.navHeading),e.\u0275\u0275advance(11),e.\u0275\u0275textInterpolate(n.weekDeliveriesCount),e.\u0275\u0275advance(9),e.\u0275\u0275property("datasets",n.deliveriesLineChartData)("labels",n.deliveriesLineChartLabels)("options",n.chartOptions)("legend",!0)("chartType","line"))},directives:[S.H,b.jh,f.Y],styles:[""]}),i})();var C=a(8622),w=a(1921),F=a(6424);let x=(()=>{class i{constructor(t,n){this.pdfPrint=t,this.deliveriesApi=n}printAllDeliveries(){var t=this;return(0,w.Z)(function*(){const n=yield t.deliveriesApi.getAllAccountDelivery();var r=[["Order ID","Customer Name","Delivery Location","Date Delivered","Delivery Status"]];for(let de of n.docs){var s=[];let h=de.data();s.push(h.order.order_code),s.push(h.order.customer.customer_name),s.push(h.delivery_location),s.push(h.date_delivered),s.push(h.delivery_status),r.push(s)}t.pdfPrint.openPdf([{layout:"lightHorizontalLines",table:{headerRows:1,widths:["15%","20%","30%","20%","15%"],body:r}}])})()}printViewDelivery(){var t=this;return(0,w.Z)(function*(){let r=(yield t.deliveriesApi.getDelivery()).data();t.pdfPrint.openPdf([{columns:[[{text:"Order ID: "+r.order.order_code},{text:"Order Date: "+r.order.order_date},{text:"Customer Name: "+r.order.customer.customer_name},{text:"Delivery Location: "+r.delivery_location},{text:"Date Delivered: "+r.date_delivered},{text:"Delivery Status: "+r.delivery_status}],[]]}])})()}}return i.\u0275fac=function(t){return new(t||i)(e.\u0275\u0275inject(F.n),e.\u0275\u0275inject(g.g))},i.\u0275prov=e.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const k=["connectionToastComponentReference"],V=["deleteModalComponentReference"];function R(i,l){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",29),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("order_code","desc")}),e.\u0275\u0275elementEnd()}}function L(i,l){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",30),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("order_code","asc")}),e.\u0275\u0275elementEnd()}}function N(i,l){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",31),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("order_code","desc")}),e.\u0275\u0275elementEnd()}}function G(i,l){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",29),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("order_date","desc")}),e.\u0275\u0275elementEnd()}}function O(i,l){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",30),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("order_date","asc")}),e.\u0275\u0275elementEnd()}}function M(i,l){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",31),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("order_date","desc")}),e.\u0275\u0275elementEnd()}}function j(i,l){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",29),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("delivery_location","desc")}),e.\u0275\u0275elementEnd()}}function Q(i,l){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",30),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("delivery_location","asc")}),e.\u0275\u0275elementEnd()}}function B(i,l){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",31),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("delivery_location","desc")}),e.\u0275\u0275elementEnd()}}function H(i,l){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",29),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("date_delivered","desc")}),e.\u0275\u0275elementEnd()}}function z(i,l){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",30),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("date_delivered","asc")}),e.\u0275\u0275elementEnd()}}function U(i,l){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",31),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("date_delivered","desc")}),e.\u0275\u0275elementEnd()}}function W(i,l){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",29),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("delivery_status","desc")}),e.\u0275\u0275elementEnd()}}function Y(i,l){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",30),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("delivery_status","asc")}),e.\u0275\u0275elementEnd()}}function J(i,l){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",31),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("delivery_status","desc")}),e.\u0275\u0275elementEnd()}}function Z(i,l){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"tr",32),e.\u0275\u0275listener("dblclick",function(){const s=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275nextContext().viewDelivery(s.id)}),e.\u0275\u0275elementStart(1,"td"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"td"),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"td"),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"td"),e.\u0275\u0275text(8),e.\u0275\u0275pipe(9,"date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"td"),e.\u0275\u0275text(11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()}if(2&i){const t=l.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null==t?null:t.data().order.order_code),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null==t?null:t.data().order.order_date),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null==t?null:t.data().delivery_location),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(9,5,null==t?null:t.data().date_delivered)),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(null==t?null:t.data().delivery_status)}}function K(i,l){1&i&&(e.\u0275\u0275elementStart(0,"tr",33),e.\u0275\u0275elementStart(1,"td",18),e.\u0275\u0275elementStart(2,"div",34),e.\u0275\u0275elementStart(3,"span",35),e.\u0275\u0275text(4,"Loading..."),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd())}function $(i,l){1&i&&(e.\u0275\u0275elementStart(0,"tr",33),e.\u0275\u0275elementStart(1,"td",18),e.\u0275\u0275elementStart(2,"p",36),e.\u0275\u0275text(3,"No data available"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd())}let X=(()=>{class i{constructor(t,n,r){this.router=t,this.deliveriesApi=n,this.deliveriesPrint=r,this.navHeading=[{text:"All Deliveries",url:"/home/deliveries/all-deliveries"}],this.deliveriesGridData=[],this.isFetchingGridData=!1,this.isDataAvailable=!0,this.firstInResponse=[],this.lastInResponse=[],this.nextStartAfter=[],this.prevStartAt=[],this.pageNumber=0,this.disableNext=!0,this.disablePrev=!0,this.sortParams={field:"created_at",direction:"desc"}}ngOnInit(){this.getAccountDelivery()}getAccountDelivery(){this.isFetchingGridData=!0,this.deliveriesApi.getAccountDelivery(this.sortParams,20).then(t=>{console.log(t),this.deliveriesGridData=t.docs,this.isFetchingGridData=!1,this.prevStartAt=this.firstInResponse,this.nextStartAfter=t.docs[t.docs.length-1],this.firstInResponse=t.docs[0],this.pageNumber=1,this.isDataAvailable=!!t.docs.length,!t.docs.length||t.docs.length<20?(this.disableNext=!0,this.disablePrev=!0):(this.disableNext=!1,this.disablePrev=!0)},t=>{console.log(t),this.isFetchingGridData=!1,this.connectionToast.openToast()})}nextPage(t){t.preventDefault(),this.isFetchingGridData=!0,this.deliveriesApi.getAccountDeliveryNext(this.sortParams,20,this.nextStartAfter).then(n=>{console.log(n),this.deliveriesGridData=n.docs,this.isFetchingGridData=!1,this.prevStartAt=this.firstInResponse,this.nextStartAfter=n.docs[n.docs.length-1],this.firstInResponse=n.docs[0],this.pageNumber++,n.docs.length<20&&(this.disableNext=!0,this.disablePrev=!1)},n=>{console.log(n),this.isFetchingGridData=!1,this.connectionToast.openToast()})}previousPage(t){t.preventDefault(),this.isFetchingGridData=!0,this.deliveriesApi.getAccountDeliveryPrev(this.sortParams,20,this.prevStartAt).then(n=>{console.log(n),this.deliveriesGridData=n.docs,this.isFetchingGridData=!1,n.docs.length||(this.isDataAvailable=!1),this.prevStartAt=this.firstInResponse,this.nextStartAfter=n.docs[n.docs.length-1],this.firstInResponse=n.docs[0],this.pageNumber--,1==this.pageNumber&&(this.disableNext=!1,this.disablePrev=!0)},n=>{console.log(n),this.isFetchingGridData=!1,this.connectionToast.openToast()})}sortTable(t,n){this.sortParams.field=t,this.sortParams.direction=n,this.getAccountDelivery()}viewDelivery(t){console.log(t),sessionStorage.setItem("restaurant_delivery_id",t),this.router.navigateByUrl("/home/deliveries/view-delivery")}onPrint(){console.log("lets start printing..."),this.deliveriesPrint.printAllDeliveries()}}return i.\u0275fac=function(t){return new(t||i)(e.\u0275\u0275directiveInject(c.F0),e.\u0275\u0275directiveInject(g.g),e.\u0275\u0275directiveInject(x))},i.\u0275cmp=e.\u0275\u0275defineComponent({type:i,selectors:[["app-all-deliveries"]],viewQuery:function(t,n){if(1&t&&(e.\u0275\u0275viewQuery(k,5,f.Y),e.\u0275\u0275viewQuery(V,5,C.z)),2&t){let r;e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(n.connectionToast=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(n.deleteModal=r.first)}},decls:57,vars:24,consts:[[3,"headings","showPrint","print"],[1,"container"],[1,"row"],[1,"col-md-12"],[1,"row","mb-3"],[1,"btn","btn-light","border","float-end","page-refresh-btn",3,"disabled","click"],[1,"bi","bi-arrow-clockwise"],[1,"overflow-auto"],[1,"table","table-bordered","table-sm","w-100","page-table"],[1,"bg-light"],["width","15%",1,"min-width-2"],["class","bi bi-filter float-end list-pointer",3,"click",4,"ngIf"],["class","bi bi-sort-down float-end list-pointer",3,"click",4,"ngIf"],["class","bi bi-sort-up float-end list-pointer",3,"click",4,"ngIf"],["width","20%",1,"min-width-3"],["width","30%",1,"min-width-4"],["class","table-pointer",3,"dblclick",4,"ngFor","ngForOf"],["class","text-center",4,"ngIf"],["colspan","6"],["aria-label","Page navigation",1,"nav-light","float-end"],[1,"pagination","pagination-sm","mb-0","justify-content-end"],[1,"page-item",3,"ngClass"],["href","#","aria-label","First",1,"page-link",3,"click"],[1,"bi","bi-caret-left-fill"],[1,"page-item"],["href","#","aria-label","Current",1,"page-link",3,"click"],["href","#","aria-label","Last",1,"page-link",3,"click"],[1,"bi","bi-caret-right-fill"],["connectionToastComponentReference",""],[1,"bi","bi-filter","float-end","list-pointer",3,"click"],[1,"bi","bi-sort-down","float-end","list-pointer",3,"click"],[1,"bi","bi-sort-up","float-end","list-pointer",3,"click"],[1,"table-pointer",3,"dblclick"],[1,"text-center"],["role","status",1,"spinner-grow","m-4"],[1,"visually-hidden"],[1,"m-4"]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"app-module-topnav",0),e.\u0275\u0275listener("print",function(){return n.onPrint()}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(1,"div",1),e.\u0275\u0275elementStart(2,"div",2),e.\u0275\u0275elementStart(3,"div",3),e.\u0275\u0275elementStart(4,"div",4),e.\u0275\u0275elementStart(5,"div",3),e.\u0275\u0275elementStart(6,"button",5),e.\u0275\u0275listener("click",function(){return n.getAccountDelivery()}),e.\u0275\u0275element(7,"i",6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"div",7),e.\u0275\u0275elementStart(9,"table",8),e.\u0275\u0275elementStart(10,"thead"),e.\u0275\u0275elementStart(11,"tr",9),e.\u0275\u0275elementStart(12,"th",10),e.\u0275\u0275text(13," Order ID "),e.\u0275\u0275template(14,R,1,0,"i",11),e.\u0275\u0275template(15,L,1,0,"i",12),e.\u0275\u0275template(16,N,1,0,"i",13),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"th",14),e.\u0275\u0275text(18," Order Date "),e.\u0275\u0275template(19,G,1,0,"i",11),e.\u0275\u0275template(20,O,1,0,"i",12),e.\u0275\u0275template(21,M,1,0,"i",13),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(22,"th",15),e.\u0275\u0275text(23," Delivery Location "),e.\u0275\u0275template(24,j,1,0,"i",11),e.\u0275\u0275template(25,Q,1,0,"i",12),e.\u0275\u0275template(26,B,1,0,"i",13),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(27,"th",14),e.\u0275\u0275text(28," Date Delivered "),e.\u0275\u0275template(29,H,1,0,"i",11),e.\u0275\u0275template(30,z,1,0,"i",12),e.\u0275\u0275template(31,U,1,0,"i",13),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(32,"th",10),e.\u0275\u0275text(33," Delivery Status "),e.\u0275\u0275template(34,W,1,0,"i",11),e.\u0275\u0275template(35,Y,1,0,"i",12),e.\u0275\u0275template(36,J,1,0,"i",13),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(37,"tbody"),e.\u0275\u0275template(38,Z,12,7,"tr",16),e.\u0275\u0275template(39,K,5,0,"tr",17),e.\u0275\u0275template(40,$,4,0,"tr",17),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(41,"tfoot"),e.\u0275\u0275elementStart(42,"tr",9),e.\u0275\u0275elementStart(43,"td",18),e.\u0275\u0275elementStart(44,"nav",19),e.\u0275\u0275elementStart(45,"ul",20),e.\u0275\u0275elementStart(46,"li",21),e.\u0275\u0275elementStart(47,"a",22),e.\u0275\u0275listener("click",function(s){return n.previousPage(s)}),e.\u0275\u0275element(48,"i",23),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(49,"li",24),e.\u0275\u0275elementStart(50,"a",25),e.\u0275\u0275listener("click",function(s){return s.preventDefault()}),e.\u0275\u0275text(51),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(52,"li",21),e.\u0275\u0275elementStart(53,"a",26),e.\u0275\u0275listener("click",function(s){return n.nextPage(s)}),e.\u0275\u0275element(54,"i",27),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(55,"app-connection-toast",null,28)),2&t&&(e.\u0275\u0275property("headings",n.navHeading)("showPrint",!0),e.\u0275\u0275advance(6),e.\u0275\u0275property("disabled",n.isFetchingGridData),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf","order_code"!=n.sortParams.field),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","order_code"==n.sortParams.field&&"desc"==n.sortParams.direction),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","order_code"==n.sortParams.field&&"asc"==n.sortParams.direction),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf","order_date"!=n.sortParams.field),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","order_date"==n.sortParams.field&&"desc"==n.sortParams.direction),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","order_date"==n.sortParams.field&&"asc"==n.sortParams.direction),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf","delivery_location"!=n.sortParams.field),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","delivery_location"==n.sortParams.field&&"desc"==n.sortParams.direction),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","delivery_location"==n.sortParams.field&&"asc"==n.sortParams.direction),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf","date_delivered"!=n.sortParams.field),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","date_delivered"==n.sortParams.field&&"desc"==n.sortParams.direction),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","date_delivered"==n.sortParams.field&&"asc"==n.sortParams.direction),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf","delivery_status"!=n.sortParams.field),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","delivery_status"==n.sortParams.field&&"desc"==n.sortParams.direction),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","delivery_status"==n.sortParams.field&&"asc"==n.sortParams.direction),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",n.deliveriesGridData),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.isFetchingGridData),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!n.isDataAvailable&&!n.isFetchingGridData),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngClass",n.disablePrev?"disabled":""),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate1(" ",n.pageNumber," "),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",n.disableNext?"disabled":""))},directives:[S.H,m.O5,m.sg,m.mk,f.Y],pipes:[m.uU],styles:[""]}),i})();var d=a(3324);let A=(()=>{class i{constructor(t){this.router=t,this.deliveryForm=new d.cw({})}ngOnInit(){this.initItemForm()}initItemForm(){this.deliveryForm=new d.cw({orderCode:new d.NI({value:"",disabled:!0}),orderDate:new d.NI({value:"",disabled:!0}),customerName:new d.NI({value:"",disabled:!0}),dateDelivered:new d.NI(""),deliveryLocation:new d.NI(""),deliveryStatus:new d.NI("")})}gotoOrder(){sessionStorage.setItem("restaurant_order_id",this.orderId),this.router.navigateByUrl("/home/orders/view-order")}}return i.\u0275fac=function(t){return new(t||i)(e.\u0275\u0275directiveInject(c.F0))},i.\u0275cmp=e.\u0275\u0275defineComponent({type:i,selectors:[["app-delivery-form"]],decls:40,vars:1,consts:[[1,"page-form",3,"formGroup"],[1,"row","mb-1"],[1,"col-md-4"],[1,"float-md-end","float-sm-start","mt-1"],[1,"col-md-8"],[1,"input-group","input-group-sm","w-100"],["formControlName","orderCode",1,"form-control"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"bi","bi-eye"],["type","datetime-local","formControlName","orderDate",1,"form-control","form-control-sm","w-100"],["formControlName","customerName",1,"form-control","form-control-sm","w-100"],["formControlName","deliveryLocation",1,"form-control","form-control-sm","w-100"],["type","datetime-local","formControlName","dateDelivered",1,"form-control","form-control-sm","w-100"],["formControlName","deliveryStatus",1,"form-control","form-control-sm","w-100"]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"form",0),e.\u0275\u0275elementStart(1,"div",1),e.\u0275\u0275elementStart(2,"div",2),e.\u0275\u0275elementStart(3,"label",3),e.\u0275\u0275text(4,"Order ID :"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"div",4),e.\u0275\u0275elementStart(6,"div",5),e.\u0275\u0275element(7,"input",6),e.\u0275\u0275elementStart(8,"button",7),e.\u0275\u0275listener("click",function(){return n.gotoOrder()}),e.\u0275\u0275element(9,"i",8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"div",1),e.\u0275\u0275elementStart(11,"div",2),e.\u0275\u0275elementStart(12,"label",3),e.\u0275\u0275text(13,"Order Date :"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"div",4),e.\u0275\u0275element(15,"input",9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"div",1),e.\u0275\u0275elementStart(17,"div",2),e.\u0275\u0275elementStart(18,"label",3),e.\u0275\u0275text(19,"Customer Name :"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"div",4),e.\u0275\u0275element(21,"input",10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(22,"div",1),e.\u0275\u0275elementStart(23,"div",2),e.\u0275\u0275elementStart(24,"label",3),e.\u0275\u0275text(25,"Delivery Location :"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(26,"div",4),e.\u0275\u0275element(27,"input",11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(28,"div",1),e.\u0275\u0275elementStart(29,"div",2),e.\u0275\u0275elementStart(30,"label",3),e.\u0275\u0275text(31,"Date Delivered :"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(32,"div",4),e.\u0275\u0275element(33,"input",12),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(34,"div",1),e.\u0275\u0275elementStart(35,"div",2),e.\u0275\u0275elementStart(36,"label",3),e.\u0275\u0275text(37,"Delivery Status :"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(38,"div",4),e.\u0275\u0275element(39,"input",13),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()),2&t&&e.\u0275\u0275property("formGroup",n.deliveryForm)},directives:[d._Y,d.JL,d.sg,d.Fj,d.JJ,d.u],styles:[""]}),i})();const q=["deliveryFormComponentReference"],ee=["connectionToastComponentReference"],te=["deleteModalComponentReference"];function ne(i,l){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",2),e.\u0275\u0275elementStart(1,"div",9),e.\u0275\u0275elementStart(2,"button",10),e.\u0275\u0275text(3,"Cancel"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"button",11),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().confirmDelete()}),e.\u0275\u0275text(5,"Delete"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"button",12),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().updateDelivery()}),e.\u0275\u0275text(7,"Save"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()}if(2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(4),e.\u0275\u0275property("disabled",t.isDeliveryDeleting),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",t.isDeliverySaving)}}function ie(i,l){1&i&&(e.\u0275\u0275elementStart(0,"div",2),e.\u0275\u0275elementStart(1,"div",9),e.\u0275\u0275elementStart(2,"button",13),e.\u0275\u0275elementStart(3,"div",14),e.\u0275\u0275elementStart(4,"span",15),e.\u0275\u0275text(5,"Loading..."),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd())}const re=[{path:"",component:o,children:[{path:"",component:E},{path:"dashboard",component:E},{path:"all-deliveries",component:X},{path:"view-delivery",component:(()=>{class i{constructor(t,n,r){this.router=t,this.deliveriesApi=n,this.deliveriesPrint=r,this.navHeading=[{text:"View Delivery",url:"/home/deliveries/view-delivery"}],this.isDeliveryLoading=!1,this.isDeliverySaving=!1,this.isDeliveryDeleting=!1}ngOnInit(){this.getDelivery()}getDelivery(){this.isDeliveryLoading=!0,this.deliveriesApi.getDelivery().then(t=>{console.log(t),this.deliveryData=t,this.isDeliveryLoading=!1,this.deliveryForm.deliveryForm.controls.orderCode.setValue(this.deliveryData.data().order.order_code),this.deliveryForm.deliveryForm.controls.orderDate.setValue(this.deliveryData.data().order.order_date),this.deliveryForm.deliveryForm.controls.customerName.setValue(this.deliveryData.data().order.customer.customer_name),this.deliveryForm.deliveryForm.controls.dateDelivered.setValue(this.deliveryData.data().date_delivered),this.deliveryForm.deliveryForm.controls.deliveryLocation.setValue(this.deliveryData.data().delivery_location),this.deliveryForm.deliveryForm.controls.deliveryStatus.setValue(this.deliveryData.data().delivery_status),this.deliveryForm.orderId=this.deliveryData.id},t=>{console.log(t),this.isDeliveryLoading=!1,this.connectionToast.openToast()})}updateDelivery(){console.log("u are saving a new delivery");let t={delivery_code:this.deliveryForm.deliveryForm.controls.deliveryCode.value,date_delivered:this.deliveryForm.deliveryForm.controls.dateDelivered.value,delivery_location:this.deliveryForm.deliveryForm.controls.deliveryLocation.value,delivery_status:this.deliveryForm.deliveryForm.controls.deliveryStatus.value,order:{id:this.deliveryData.data().order.id,order_code:this.deliveryData.data().order.order_code,order_date:this.deliveryData.data().order.order_date,customer:{id:this.deliveryData.data().order.customer.id,customer_name:this.deliveryForm.deliveryForm.controls.customerName.value}}};console.log(t),this.isDeliverySaving=!0,this.deliveriesApi.updateDelivery(t).then(n=>{console.log(n),this.isDeliverySaving=!1},n=>{console.log(n),this.isDeliverySaving=!1,this.connectionToast.openToast()})}confirmDelete(){this.deleteModal.openModal()}deleteDelivery(){this.isDeliveryDeleting=!0,this.deliveriesApi.deleteDelivery().then(t=>{console.log(t),this.router.navigateByUrl("/home/deliveries/all-deliveries")},t=>{console.log(t),this.connectionToast.openToast()})}onPrint(){console.log("lets start printing..."),this.deliveriesPrint.printViewDelivery()}}return i.\u0275fac=function(t){return new(t||i)(e.\u0275\u0275directiveInject(c.F0),e.\u0275\u0275directiveInject(g.g),e.\u0275\u0275directiveInject(x))},i.\u0275cmp=e.\u0275\u0275defineComponent({type:i,selectors:[["app-view-delivery"]],viewQuery:function(t,n){if(1&t&&(e.\u0275\u0275viewQuery(q,5,A),e.\u0275\u0275viewQuery(ee,5,f.Y),e.\u0275\u0275viewQuery(te,5,C.z)),2&t){let r;e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(n.deliveryForm=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(n.connectionToast=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(n.deleteModal=r.first)}},decls:13,vars:3,consts:[[3,"headings"],[1,"container"],[1,"row","page-form"],[1,"col-md-6"],["deliveryFormComponentReference",""],["class","row page-form",4,"ngIf"],["connectionToastComponentReference",""],[3,"confirmEvent"],["deleteModalComponentReference",""],[1,"col-md-12"],["type","button","routerLink","/home/deliveries/all-deliveries",1,"btn","btn-secondary","btn-sm","float-end","ms-1","page-form-btn"],["type","button",1,"btn","btn-secondary","btn-sm","float-end","ms-1","page-form-btn",3,"disabled","click"],[1,"btn","btn-secondary","btn-sm","float-end","ms-1","page-form-btn",3,"disabled","click"],["type","button",1,"btn","btn-sm","float-end","ms-1","btn-light","page-form-btn"],["role","status",1,"spinner-grow","spinner-grow-sm"],[1,"visually-hidden"]],template:function(t,n){1&t&&(e.\u0275\u0275element(0,"app-module-topnav",0),e.\u0275\u0275elementStart(1,"div",1),e.\u0275\u0275elementStart(2,"div",2),e.\u0275\u0275elementStart(3,"div",3),e.\u0275\u0275element(4,"app-delivery-form",null,4),e.\u0275\u0275element(6,"hr"),e.\u0275\u0275template(7,ne,8,2,"div",5),e.\u0275\u0275template(8,ie,6,0,"div",5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(9,"app-connection-toast",null,6),e.\u0275\u0275elementStart(11,"app-delete-modal",7,8),e.\u0275\u0275listener("confirmEvent",function(){return n.deleteDelivery()}),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275property("headings",n.navHeading),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngIf",!n.isDeliveryLoading),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.isDeliveryLoading))},directives:[S.H,A,m.O5,f.Y,C.z,c.rH],styles:[""]}),i})(),canActivate:[(()=>{class i{constructor(t){this.router=t}canActivate(t){return!!sessionStorage.getItem("restaurant_delivery_id")||(this.router.navigateByUrl("/home/deliveries"),!1)}}return i.\u0275fac=function(t){return new(t||i)(e.\u0275\u0275inject(c.F0))},i.\u0275prov=e.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"}),i})()]}]}];let le=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.\u0275\u0275defineNgModule({type:i}),i.\u0275inj=e.\u0275\u0275defineInjector({imports:[[c.Bz.forChild(re)],c.Bz]}),i})();var oe=a(7264),T=a(5018);let ae=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.\u0275\u0275defineNgModule({type:i}),i.\u0275inj=e.\u0275\u0275defineInjector({imports:[[m.ez,c.Bz,d.u5,d.UX,b.m9,T.p]]}),i})(),se=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.\u0275\u0275defineNgModule({type:i}),i.\u0275inj=e.\u0275\u0275defineInjector({imports:[[m.ez,le,oe.M,T.p,ae]]}),i})()},9416:(I,y,a)=>{a.d(y,{g:()=>e});var m=a(2741),c=a(9805);let e=(()=>{class p{constructor(o){this.afs=o,this.deliveryRef=this.afs.collection("restaurant/module_deliveries/restaurant_delivery")}createDelivery(o){return this.deliveryRef.doc(String(sessionStorage.getItem("restaurant_order_id"))).set(o)}getDelivery(){return this.deliveryRef.doc(String(sessionStorage.getItem("restaurant_delivery_id"))).ref.get()}updateDelivery(o){return this.deliveryRef.doc(String(sessionStorage.getItem("restaurant_delivery_id"))).update(o)}deleteDelivery(){return this.deliveryRef.doc(String(sessionStorage.getItem("restaurant_delivery_id"))).delete()}getAccountDelivery(o,v){return this.deliveryRef.ref.where("account","==",localStorage.getItem("restaurant_id")).orderBy(null==o?void 0:o.field,null==o?void 0:o.direction).limit(v).get()}getAccountDeliveryNext(o,v,u){return this.deliveryRef.ref.where("account","==",localStorage.getItem("restaurant_id")).orderBy(null==o?void 0:o.field,null==o?void 0:o.direction).startAfter(u).limit(v).get()}getAccountDeliveryPrev(o,v,u){return this.deliveryRef.ref.where("account","==",localStorage.getItem("restaurant_id")).orderBy(null==o?void 0:o.field,null==o?void 0:o.direction).startAt(u).limit(v).get()}getAllAccountDelivery(){return this.deliveryRef.ref.where("account","==",localStorage.getItem("restaurant_id")).orderBy("created_at","desc").get()}getWeekDelivery(o,v){return this.deliveryRef.ref.where("account","==",localStorage.getItem("restaurant_id")).where("created_at","<",o).where("created_at",">",v).get()}}return p.\u0275fac=function(o){return new(o||p)(m.\u0275\u0275inject(c.ST))},p.\u0275prov=m.\u0275\u0275defineInjectable({token:p,factory:p.\u0275fac,providedIn:"root"}),p})()}}]);