(self.webpackChunkang_fire=self.webpackChunkang_fire||[]).push([[997],{8506:_e=>{function fe(H,he,ge,I,se,e,t){try{var n=H[e](t),a=n.value}catch(i){return void ge(i)}n.done?he(a):Promise.resolve(a).then(I,se)}_e.exports=function(H){return function(){var he=this,ge=arguments;return new Promise(function(I,se){var e=H.apply(he,ge);function t(a){fe(e,I,se,t,n,"next",a)}function n(a){fe(e,I,se,t,n,"throw",a)}t(void 0)})}},_e.exports.default=_e.exports,_e.exports.__esModule=!0},756:(_e,fe,ue)=>{"use strict";ue.d(fe,{Bt:()=>H.Bt});var H=ue(9665)},4114:(_e,fe,ue)=>{"use strict";ue.d(fe,{Mw:()=>t,zE:()=>n,TS:()=>e});var H=ue(2741),I=(ue(5978),ue(1855));window.Smart?window.Smart.RenderMode="manual":window.Smart={RenderMode:"manual"};class se{constructor(i){this.onCreate=new H.EventEmitter,this.onReady=new H.EventEmitter,this.onAttach=new H.EventEmitter,this.onDetach=new H.EventEmitter;const o=this;this.nativeElement=i.nativeElement,o.nativeElement.onAttached=()=>{o.onAttach.emit(o.nativeElement)},o.nativeElement.onDetached=()=>{o.onDetach.emit(o.nativeElement)}}addEventListener(i,o,r=!1){this.nativeElement.addEventListener(i,o,r)}removeEventListener(i,o,r=!1){this.nativeElement.removeEventListener(i,o,r)}dispatchEvent(i){return this.nativeElement.dispatchEvent(i)}blur(){this.nativeElement.blur()}click(){this.nativeElement.click()}focus(i){this.nativeElement.focus(i)}get locale(){return this.nativeElement?this.nativeElement.locale:void 0}set locale(i){this.nativeElement&&(this.nativeElement.locale=i)}get localizeFormatFunction(){return this.nativeElement?this.nativeElement.localizeFormatFunction:void 0}set localizeFormatFunction(i){this.nativeElement&&(this.nativeElement.localizeFormatFunction=i)}get messages(){return this.nativeElement?this.nativeElement.messages:void 0}set messages(i){this.nativeElement&&(this.nativeElement.messages=i)}get rightToLeft(){return this.nativeElement?this.nativeElement.rightToLeft:void 0}set rightToLeft(i){this.nativeElement&&(this.nativeElement.rightToLeft=i)}get theme(){return this.nativeElement?this.nativeElement.theme:void 0}set theme(i){this.nativeElement&&(this.nativeElement.theme=i)}}se.\u0275fac=function(i){H.\u0275\u0275invalidFactory()},se.\u0275dir=H.\u0275\u0275defineDirective({type:se,inputs:{locale:"locale",localizeFormatFunction:"localizeFormatFunction",messages:"messages",rightToLeft:"rightToLeft",theme:"theme"},outputs:{onCreate:"onCreate",onReady:"onReady",onAttach:"onAttach",onDetach:"onDetach"}}),(0,I.gn)([(0,H.Output)()],se.prototype,"onCreate",void 0),(0,I.gn)([(0,H.Output)()],se.prototype,"onReady",void 0),(0,I.gn)([(0,H.Output)()],se.prototype,"onAttach",void 0),(0,I.gn)([(0,H.Output)()],se.prototype,"onDetach",void 0),(0,I.gn)([(0,H.Input)()],se.prototype,"locale",null),(0,I.gn)([(0,H.Input)()],se.prototype,"localizeFormatFunction",null),(0,I.gn)([(0,H.Input)()],se.prototype,"messages",null),(0,I.gn)([(0,H.Input)()],se.prototype,"rightToLeft",null),(0,I.gn)([(0,H.Input)()],se.prototype,"theme",null);const e=window.Smart;let t=class extends se{constructor(i){super(i),this.eventHandlers=[],this.onBeginEdit=new H.EventEmitter,this.onBatchChange=new H.EventEmitter,this.onBatchCancel=new H.EventEmitter,this.onChange=new H.EventEmitter,this.onColumnClick=new H.EventEmitter,this.onColumnDoubleClick=new H.EventEmitter,this.onColumnResize=new H.EventEmitter,this.onColumnDragStart=new H.EventEmitter,this.onColumnDragging=new H.EventEmitter,this.onColumnDragEnd=new H.EventEmitter,this.onColumnReorder=new H.EventEmitter,this.onRowDragStart=new H.EventEmitter,this.onRowDragging=new H.EventEmitter,this.onRowDragEnd=new H.EventEmitter,this.onRowReorder=new H.EventEmitter,this.onRowExpand=new H.EventEmitter,this.onRowCollapse=new H.EventEmitter,this.onRowClick=new H.EventEmitter,this.onRowDoubleClick=new H.EventEmitter,this.onRowResize=new H.EventEmitter,this.onCellClick=new H.EventEmitter,this.onCellDoubleClick=new H.EventEmitter,this.onEndEdit=new H.EventEmitter,this.onFilter=new H.EventEmitter,this.onOpenColumnDialog=new H.EventEmitter,this.onCloseColumnDialog=new H.EventEmitter,this.onResize=new H.EventEmitter,this.onRowTap=new H.EventEmitter,this.onCellTap=new H.EventEmitter,this.onPage=new H.EventEmitter,this.onSort=new H.EventEmitter,this.onScrollBottomReached=new H.EventEmitter,this.onScrollTopReached=new H.EventEmitter,this.nativeElement=i.nativeElement}createComponent(i={}){this.nativeElement=document.createElement("smart-grid");for(let o in i)this.nativeElement[o]=i[o];return this.nativeElement}get appearance(){return this.nativeElement?this.nativeElement.appearance:void 0}set appearance(i){this.nativeElement&&(this.nativeElement.appearance=i)}get behavior(){return this.nativeElement?this.nativeElement.behavior:void 0}set behavior(i){this.nativeElement&&(this.nativeElement.behavior=i)}get layout(){return this.nativeElement?this.nativeElement.layout:void 0}set layout(i){this.nativeElement&&(this.nativeElement.layout=i)}get locale(){return this.nativeElement?this.nativeElement.locale:void 0}set locale(i){this.nativeElement&&(this.nativeElement.locale=i)}get clipboard(){return this.nativeElement?this.nativeElement.clipboard:void 0}set clipboard(i){this.nativeElement&&(this.nativeElement.clipboard=i)}get columns(){return this.nativeElement?this.nativeElement.columns:void 0}set columns(i){this.nativeElement&&(this.nativeElement.columns=i)}get columnMenu(){return this.nativeElement?this.nativeElement.columnMenu:void 0}set columnMenu(i){this.nativeElement&&(this.nativeElement.columnMenu=i)}get columnGroups(){return this.nativeElement?this.nativeElement.columnGroups:void 0}set columnGroups(i){this.nativeElement&&(this.nativeElement.columnGroups=i)}get conditionalFormatting(){return this.nativeElement?this.nativeElement.conditionalFormatting:void 0}set conditionalFormatting(i){this.nativeElement&&(this.nativeElement.conditionalFormatting=i)}get charting(){return this.nativeElement?this.nativeElement.charting:void 0}set charting(i){this.nativeElement&&(this.nativeElement.charting=i)}get checkBoxes(){return this.nativeElement?this.nativeElement.checkBoxes:void 0}set checkBoxes(i){this.nativeElement&&(this.nativeElement.checkBoxes=i)}get dataExport(){return this.nativeElement?this.nativeElement.dataExport:void 0}set dataExport(i){this.nativeElement&&(this.nativeElement.dataExport=i)}get dataSource(){return this.nativeElement?this.nativeElement.dataSource:void 0}set dataSource(i){this.nativeElement&&(this.nativeElement.dataSource=i)}get dataSourceSettings(){return this.nativeElement?this.nativeElement.dataSourceSettings:void 0}set dataSourceSettings(i){this.nativeElement&&(this.nativeElement.dataSourceSettings=i)}get editing(){return this.nativeElement?this.nativeElement.editing:void 0}set editing(i){this.nativeElement&&(this.nativeElement.editing=i)}get filtering(){return this.nativeElement?this.nativeElement.filtering:void 0}set filtering(i){this.nativeElement&&(this.nativeElement.filtering=i)}get grouping(){return this.nativeElement?this.nativeElement.grouping:void 0}set grouping(i){this.nativeElement&&(this.nativeElement.grouping=i)}get messages(){return this.nativeElement?this.nativeElement.messages:void 0}set messages(i){this.nativeElement&&(this.nativeElement.messages=i)}get onCellValue(){return this.nativeElement?this.nativeElement.onCellValue:void 0}set onCellValue(i){this.nativeElement&&(this.nativeElement.onCellValue=i)}get onCellUpdate(){return this.nativeElement?this.nativeElement.onCellUpdate:void 0}set onCellUpdate(i){this.nativeElement&&(this.nativeElement.onCellUpdate=i)}get onCellRender(){return this.nativeElement?this.nativeElement.onCellRender:void 0}set onCellRender(i){this.nativeElement&&(this.nativeElement.onCellRender=i)}get onBeforeInit(){return this.nativeElement?this.nativeElement.onBeforeInit:void 0}set onBeforeInit(i){this.nativeElement&&(this.nativeElement.onBeforeInit=i)}get onInit(){return this.nativeElement?this.nativeElement.onInit:void 0}set onInit(i){this.nativeElement&&(this.nativeElement.onInit=i)}get onAfterInit(){return this.nativeElement?this.nativeElement.onAfterInit:void 0}set onAfterInit(i){this.nativeElement&&(this.nativeElement.onAfterInit=i)}get onChartInit(){return this.nativeElement?this.nativeElement.onChartInit:void 0}set onChartInit(i){this.nativeElement&&(this.nativeElement.onChartInit=i)}get onRender(){return this.nativeElement?this.nativeElement.onRender:void 0}set onRender(i){this.nativeElement&&(this.nativeElement.onRender=i)}get onKey(){return this.nativeElement?this.nativeElement.onKey:void 0}set onKey(i){this.nativeElement&&(this.nativeElement.onKey=i)}get onRowInit(){return this.nativeElement?this.nativeElement.onRowInit:void 0}set onRowInit(i){this.nativeElement&&(this.nativeElement.onRowInit=i)}get onRowDetailInit(){return this.nativeElement?this.nativeElement.onRowDetailInit:void 0}set onRowDetailInit(i){this.nativeElement&&(this.nativeElement.onRowDetailInit=i)}get onRowDetailUpdated(){return this.nativeElement?this.nativeElement.onRowDetailUpdated:void 0}set onRowDetailUpdated(i){this.nativeElement&&(this.nativeElement.onRowDetailUpdated=i)}get onRowInserted(){return this.nativeElement?this.nativeElement.onRowInserted:void 0}set onRowInserted(i){this.nativeElement&&(this.nativeElement.onRowInserted=i)}get onRowRemoved(){return this.nativeElement?this.nativeElement.onRowRemoved:void 0}set onRowRemoved(i){this.nativeElement&&(this.nativeElement.onRowRemoved=i)}get onRowUpdate(){return this.nativeElement?this.nativeElement.onRowUpdate:void 0}set onRowUpdate(i){this.nativeElement&&(this.nativeElement.onRowUpdate=i)}get onRowUpdated(){return this.nativeElement?this.nativeElement.onRowUpdated:void 0}set onRowUpdated(i){this.nativeElement&&(this.nativeElement.onRowUpdated=i)}get onColumnInit(){return this.nativeElement?this.nativeElement.onColumnInit:void 0}set onColumnInit(i){this.nativeElement&&(this.nativeElement.onColumnInit=i)}get onColumnInserted(){return this.nativeElement?this.nativeElement.onColumnInserted:void 0}set onColumnInserted(i){this.nativeElement&&(this.nativeElement.onColumnInserted=i)}get onColumnRemoved(){return this.nativeElement?this.nativeElement.onColumnRemoved:void 0}set onColumnRemoved(i){this.nativeElement&&(this.nativeElement.onColumnRemoved=i)}get onColumnUpdated(){return this.nativeElement?this.nativeElement.onColumnUpdated:void 0}set onColumnUpdated(i){this.nativeElement&&(this.nativeElement.onColumnUpdated=i)}get onCommand(){return this.nativeElement?this.nativeElement.onCommand:void 0}set onCommand(i){this.nativeElement&&(this.nativeElement.onCommand=i)}get paging(){return this.nativeElement?this.nativeElement.paging:void 0}set paging(i){this.nativeElement&&(this.nativeElement.paging=i)}get pager(){return this.nativeElement?this.nativeElement.pager:void 0}set pager(i){this.nativeElement&&(this.nativeElement.pager=i)}get rowDetail(){return this.nativeElement?this.nativeElement.rowDetail:void 0}set rowDetail(i){this.nativeElement&&(this.nativeElement.rowDetail=i)}get scrolling(){return this.nativeElement?this.nativeElement.scrolling:void 0}set scrolling(i){this.nativeElement&&(this.nativeElement.scrolling=i)}get columnHeader(){return this.nativeElement?this.nativeElement.columnHeader:void 0}set columnHeader(i){this.nativeElement&&(this.nativeElement.columnHeader=i)}get summaryRow(){return this.nativeElement?this.nativeElement.summaryRow:void 0}set summaryRow(i){this.nativeElement&&(this.nativeElement.summaryRow=i)}get groupHeader(){return this.nativeElement?this.nativeElement.groupHeader:void 0}set groupHeader(i){this.nativeElement&&(this.nativeElement.groupHeader=i)}get header(){return this.nativeElement?this.nativeElement.header:void 0}set header(i){this.nativeElement&&(this.nativeElement.header=i)}get footer(){return this.nativeElement?this.nativeElement.footer:void 0}set footer(i){this.nativeElement&&(this.nativeElement.footer=i)}get rightToLeft(){return this.nativeElement?this.nativeElement.rightToLeft:void 0}set rightToLeft(i){this.nativeElement&&(this.nativeElement.rightToLeft=i)}get rows(){return this.nativeElement?this.nativeElement.rows:void 0}set rows(i){this.nativeElement&&(this.nativeElement.rows=i)}get selection(){return this.nativeElement?this.nativeElement.selection:void 0}set selection(i){this.nativeElement&&(this.nativeElement.selection=i)}get sorting(){return this.nativeElement?this.nativeElement.sorting:void 0}set sorting(i){this.nativeElement&&(this.nativeElement.sorting=i)}addRow(i,o,r){this.nativeElement.isRendered?this.nativeElement.addRow(i,o,r):this.nativeElement.whenRendered(()=>{this.nativeElement.addRow(i,o,r)})}addNewRow(i){return(0,I.mG)(this,void 0,void 0,function*(){return yield(()=>new Promise(l=>{this.nativeElement.whenRendered(()=>{const s=this.nativeElement.addNewRow(i);l(s)})}))()})}addUnboundRow(i,o){return(0,I.mG)(this,void 0,void 0,function*(){return yield(()=>new Promise(s=>{this.nativeElement.whenRendered(()=>{const c=this.nativeElement.addUnboundRow(i,o);s(c)})}))()})}addFilter(i,o,r){this.nativeElement.isRendered?this.nativeElement.addFilter(i,o,r):this.nativeElement.whenRendered(()=>{this.nativeElement.addFilter(i,o,r)})}addGroup(i){this.nativeElement.isRendered?this.nativeElement.addGroup(i):this.nativeElement.whenRendered(()=>{this.nativeElement.addGroup(i)})}autoSizeRows(){this.nativeElement.isRendered?this.nativeElement.autoSizeRows():this.nativeElement.whenRendered(()=>{this.nativeElement.autoSizeRows()})}autoSizeColumns(){this.nativeElement.isRendered?this.nativeElement.autoSizeColumns():this.nativeElement.whenRendered(()=>{this.nativeElement.autoSizeColumns()})}areAllRowsSelected(){return(0,I.mG)(this,void 0,void 0,function*(){return yield(()=>new Promise(r=>{this.nativeElement.whenRendered(()=>{const l=this.nativeElement.areAllRowsSelected();r(l)})}))()})}beginUpdate(){this.nativeElement.isRendered?this.nativeElement.beginUpdate():this.nativeElement.whenRendered(()=>{this.nativeElement.beginUpdate()})}beginEdit(i,o){this.nativeElement.isRendered?this.nativeElement.beginEdit(i,o):this.nativeElement.whenRendered(()=>{this.nativeElement.beginEdit(i,o)})}clearFilter(){this.nativeElement.isRendered?this.nativeElement.clearFilter():this.nativeElement.whenRendered(()=>{this.nativeElement.clearFilter()})}clearGroups(){this.nativeElement.isRendered?this.nativeElement.clearGroups():this.nativeElement.whenRendered(()=>{this.nativeElement.clearGroups()})}clearSelection(){this.nativeElement.isRendered?this.nativeElement.clearSelection():this.nativeElement.whenRendered(()=>{this.nativeElement.clearSelection()})}cancelEdit(){this.nativeElement.isRendered?this.nativeElement.cancelEdit():this.nativeElement.whenRendered(()=>{this.nativeElement.cancelEdit()})}checkRow(i){this.nativeElement.isRendered?this.nativeElement.checkRow(i):this.nativeElement.whenRendered(()=>{this.nativeElement.checkRow(i)})}checkAllRows(){this.nativeElement.isRendered?this.nativeElement.checkAllRows():this.nativeElement.whenRendered(()=>{this.nativeElement.checkAllRows()})}clearRows(){this.nativeElement.isRendered?this.nativeElement.clearRows():this.nativeElement.whenRendered(()=>{this.nativeElement.clearRows()})}closeMenu(){this.nativeElement.isRendered?this.nativeElement.closeMenu():this.nativeElement.whenRendered(()=>{this.nativeElement.closeMenu()})}collapseRow(i){this.nativeElement.isRendered?this.nativeElement.collapseRow(i):this.nativeElement.whenRendered(()=>{this.nativeElement.collapseRow(i)})}collapseAllRows(){this.nativeElement.isRendered?this.nativeElement.collapseAllRows():this.nativeElement.whenRendered(()=>{this.nativeElement.collapseAllRows()})}createChart(i,o){this.nativeElement.isRendered?this.nativeElement.createChart(i,o):this.nativeElement.whenRendered(()=>{this.nativeElement.createChart(i,o)})}deleteRow(i,o){this.nativeElement.isRendered?this.nativeElement.deleteRow(i,o):this.nativeElement.whenRendered(()=>{this.nativeElement.deleteRow(i,o)})}ensureVisible(i,o){return(0,I.mG)(this,void 0,void 0,function*(){return yield(()=>new Promise(s=>{this.nativeElement.whenRendered(()=>{const c=this.nativeElement.ensureVisible(i,o);s(c)})}))()})}endEdit(){this.nativeElement.isRendered?this.nativeElement.endEdit():this.nativeElement.whenRendered(()=>{this.nativeElement.endEdit()})}endUpdate(i){this.nativeElement.isRendered?this.nativeElement.endUpdate(i):this.nativeElement.whenRendered(()=>{this.nativeElement.endUpdate(i)})}expandRow(i){this.nativeElement.isRendered?this.nativeElement.expandRow(i):this.nativeElement.whenRendered(()=>{this.nativeElement.expandRow(i)})}expandAllRows(){this.nativeElement.isRendered?this.nativeElement.expandAllRows():this.nativeElement.whenRendered(()=>{this.nativeElement.expandAllRows()})}exportData(i){this.nativeElement.isRendered?this.nativeElement.exportData(i):this.nativeElement.whenRendered(()=>{this.nativeElement.exportData(i)})}goToPage(i){this.nativeElement.isRendered?this.nativeElement.goToPage(i):this.nativeElement.whenRendered(()=>{this.nativeElement.goToPage(i)})}nextPage(){this.nativeElement.isRendered?this.nativeElement.nextPage():this.nativeElement.whenRendered(()=>{this.nativeElement.nextPage()})}prevPage(){this.nativeElement.isRendered?this.nativeElement.prevPage():this.nativeElement.whenRendered(()=>{this.nativeElement.prevPage()})}firstPage(){this.nativeElement.isRendered?this.nativeElement.firstPage():this.nativeElement.whenRendered(()=>{this.nativeElement.firstPage()})}lastPage(){this.nativeElement.isRendered?this.nativeElement.lastPage():this.nativeElement.whenRendered(()=>{this.nativeElement.lastPage()})}getVerticalScrollMax(){return(0,I.mG)(this,void 0,void 0,function*(){return yield(()=>new Promise(r=>{this.nativeElement.whenRendered(()=>{const l=this.nativeElement.getVerticalScrollMax();r(l)})}))()})}getVerticalScrollValue(){return(0,I.mG)(this,void 0,void 0,function*(){return yield(()=>new Promise(r=>{this.nativeElement.whenRendered(()=>{const l=this.nativeElement.getVerticalScrollValue();r(l)})}))()})}getHorizontalScrollMax(){return(0,I.mG)(this,void 0,void 0,function*(){return yield(()=>new Promise(r=>{this.nativeElement.whenRendered(()=>{const l=this.nativeElement.getHorizontalScrollMax();r(l)})}))()})}getHorizontalScrollValue(){return(0,I.mG)(this,void 0,void 0,function*(){return yield(()=>new Promise(r=>{this.nativeElement.whenRendered(()=>{const l=this.nativeElement.getHorizontalScrollValue();r(l)})}))()})}getColumns(){return(0,I.mG)(this,void 0,void 0,function*(){return yield(()=>new Promise(r=>{this.nativeElement.whenRendered(()=>{const l=this.nativeElement.getColumns();r(l)})}))()})}getGroups(){return(0,I.mG)(this,void 0,void 0,function*(){return yield(()=>new Promise(r=>{this.nativeElement.whenRendered(()=>{const l=this.nativeElement.getGroups();r(l)})}))()})}getSortedColumns(){return(0,I.mG)(this,void 0,void 0,function*(){return yield(()=>new Promise(r=>{this.nativeElement.whenRendered(()=>{const l=this.nativeElement.getSortedColumns();r(l)})}))()})}getSelection(){return(0,I.mG)(this,void 0,void 0,function*(){return yield(()=>new Promise(r=>{this.nativeElement.whenRendered(()=>{const l=this.nativeElement.getSelection();r(l)})}))()})}getSelectedRows(){return(0,I.mG)(this,void 0,void 0,function*(){return yield(()=>new Promise(r=>{this.nativeElement.whenRendered(()=>{const l=this.nativeElement.getSelectedRows();r(l)})}))()})}getSelectedCells(){return(0,I.mG)(this,void 0,void 0,function*(){return yield(()=>new Promise(r=>{this.nativeElement.whenRendered(()=>{const l=this.nativeElement.getSelectedCells();r(l)})}))()})}getFilteredColumns(){return(0,I.mG)(this,void 0,void 0,function*(){return yield(()=>new Promise(r=>{this.nativeElement.whenRendered(()=>{const l=this.nativeElement.getFilteredColumns();r(l)})}))()})}getVisibleRows(){return(0,I.mG)(this,void 0,void 0,function*(){return yield(()=>new Promise(r=>{this.nativeElement.whenRendered(()=>{const l=this.nativeElement.getVisibleRows();r(l)})}))()})}getViewRows(){return(0,I.mG)(this,void 0,void 0,function*(){return yield(()=>new Promise(r=>{this.nativeElement.whenRendered(()=>{const l=this.nativeElement.getViewRows();r(l)})}))()})}getState(){return(0,I.mG)(this,void 0,void 0,function*(){return yield(()=>new Promise(r=>{this.nativeElement.whenRendered(()=>{const l=this.nativeElement.getState();r(l)})}))()})}getBatchEditChanges(){return(0,I.mG)(this,void 0,void 0,function*(){return yield(()=>new Promise(r=>{this.nativeElement.whenRendered(()=>{const l=this.nativeElement.getBatchEditChanges();r(l)})}))()})}getCellValue(i,o){return(0,I.mG)(this,void 0,void 0,function*(){return yield(()=>new Promise(s=>{this.nativeElement.whenRendered(()=>{const c=this.nativeElement.getCellValue(i,o);s(c)})}))()})}getColumnProperty(i,o){return(0,I.mG)(this,void 0,void 0,function*(){return yield(()=>new Promise(s=>{this.nativeElement.whenRendered(()=>{const c=this.nativeElement.getColumnProperty(i,o);s(c)})}))()})}getRowProperty(i,o){return(0,I.mG)(this,void 0,void 0,function*(){return yield(()=>new Promise(s=>{this.nativeElement.whenRendered(()=>{const c=this.nativeElement.getRowProperty(i,o);s(c)})}))()})}getRowData(i){return(0,I.mG)(this,void 0,void 0,function*(){return yield(()=>new Promise(l=>{this.nativeElement.whenRendered(()=>{const s=this.nativeElement.getRowData(i);l(s)})}))()})}getRowId(i){return(0,I.mG)(this,void 0,void 0,function*(){return yield(()=>new Promise(l=>{this.nativeElement.whenRendered(()=>{const s=this.nativeElement.getRowId(i);l(s)})}))()})}hasMenu(){return(0,I.mG)(this,void 0,void 0,function*(){return yield(()=>new Promise(r=>{this.nativeElement.whenRendered(()=>{const l=this.nativeElement.hasMenu();r(l)})}))()})}hasSelectedRows(){return(0,I.mG)(this,void 0,void 0,function*(){return yield(()=>new Promise(r=>{this.nativeElement.whenRendered(()=>{const l=this.nativeElement.hasSelectedRows();r(l)})}))()})}hideDetail(i){this.nativeElement.isRendered?this.nativeElement.hideDetail(i):this.nativeElement.whenRendered(()=>{this.nativeElement.hideDetail(i)})}highlightColumn(i){this.nativeElement.isRendered?this.nativeElement.highlightColumn(i):this.nativeElement.whenRendered(()=>{this.nativeElement.highlightColumn(i)})}highlightCell(i,o,r){this.nativeElement.isRendered?this.nativeElement.highlightCell(i,o,r):this.nativeElement.whenRendered(()=>{this.nativeElement.highlightCell(i,o,r)})}highlightRow(i,o){this.nativeElement.isRendered?this.nativeElement.highlightRow(i,o):this.nativeElement.whenRendered(()=>{this.nativeElement.highlightRow(i,o)})}openMenu(i){this.nativeElement.isRendered?this.nativeElement.openMenu(i):this.nativeElement.whenRendered(()=>{this.nativeElement.openMenu(i)})}print(){this.nativeElement.isRendered?this.nativeElement.print():this.nativeElement.whenRendered(()=>{this.nativeElement.print()})}refresh(){this.nativeElement.isRendered?this.nativeElement.refresh():this.nativeElement.whenRendered(()=>{this.nativeElement.refresh()})}refreshView(){this.nativeElement.isRendered?this.nativeElement.refreshView():this.nativeElement.whenRendered(()=>{this.nativeElement.refreshView()})}removeFilter(i,o){this.nativeElement.isRendered?this.nativeElement.removeFilter(i,o):this.nativeElement.whenRendered(()=>{this.nativeElement.removeFilter(i,o)})}removeGroup(i){this.nativeElement.isRendered?this.nativeElement.removeGroup(i):this.nativeElement.whenRendered(()=>{this.nativeElement.removeGroup(i)})}revertBatchEdit(){this.nativeElement.isRendered?this.nativeElement.revertBatchEdit():this.nativeElement.whenRendered(()=>{this.nativeElement.revertBatchEdit()})}reorderColumns(i,o,r){this.nativeElement.isRendered?this.nativeElement.reorderColumns(i,o,r):this.nativeElement.whenRendered(()=>{this.nativeElement.reorderColumns(i,o,r)})}swapColumns(i,o){this.nativeElement.isRendered?this.nativeElement.swapColumns(i,o):this.nativeElement.whenRendered(()=>{this.nativeElement.swapColumns(i,o)})}saveBatchEdit(){this.nativeElement.isRendered?this.nativeElement.saveBatchEdit():this.nativeElement.whenRendered(()=>{this.nativeElement.saveBatchEdit()})}select(i,o){this.nativeElement.isRendered?this.nativeElement.select(i,o):this.nativeElement.whenRendered(()=>{this.nativeElement.select(i,o)})}selectRange(i,o,r,l){this.nativeElement.isRendered?this.nativeElement.selectRange(i,o,r,l):this.nativeElement.whenRendered(()=>{this.nativeElement.selectRange(i,o,r,l)})}selectRowsRange(i,o){this.nativeElement.isRendered?this.nativeElement.selectRowsRange(i,o):this.nativeElement.whenRendered(()=>{this.nativeElement.selectRowsRange(i,o)})}selectRows(i){this.nativeElement.isRendered?this.nativeElement.selectRows(i):this.nativeElement.whenRendered(()=>{this.nativeElement.selectRows(i)})}selectAllRows(){this.nativeElement.isRendered?this.nativeElement.selectAllRows():this.nativeElement.whenRendered(()=>{this.nativeElement.selectAllRows()})}selectRowsByIndex(i){this.nativeElement.isRendered?this.nativeElement.selectRowsByIndex(i):this.nativeElement.whenRendered(()=>{this.nativeElement.selectRowsByIndex(i)})}setCellValue(i,o,r){this.nativeElement.isRendered?this.nativeElement.setCellValue(i,o,r):this.nativeElement.whenRendered(()=>{this.nativeElement.setCellValue(i,o,r)})}setColumnProperty(i,o,r){this.nativeElement.isRendered?this.nativeElement.setColumnProperty(i,o,r):this.nativeElement.whenRendered(()=>{this.nativeElement.setColumnProperty(i,o,r)})}setRowProperty(i,o,r){this.nativeElement.isRendered?this.nativeElement.setRowProperty(i,o,r):this.nativeElement.whenRendered(()=>{this.nativeElement.setRowProperty(i,o,r)})}setVerticalScrollValue(i){this.nativeElement.isRendered?this.nativeElement.setVerticalScrollValue(i):this.nativeElement.whenRendered(()=>{this.nativeElement.setVerticalScrollValue(i)})}setHorizontalScrollValue(i){this.nativeElement.isRendered?this.nativeElement.setHorizontalScrollValue(i):this.nativeElement.whenRendered(()=>{this.nativeElement.setHorizontalScrollValue(i)})}showDetail(i){this.nativeElement.isRendered?this.nativeElement.showDetail(i):this.nativeElement.whenRendered(()=>{this.nativeElement.showDetail(i)})}updateRow(i,o,r){this.nativeElement.isRendered?this.nativeElement.updateRow(i,o,r):this.nativeElement.whenRendered(()=>{this.nativeElement.updateRow(i,o,r)})}unselect(i,o){this.nativeElement.isRendered?this.nativeElement.unselect(i,o):this.nativeElement.whenRendered(()=>{this.nativeElement.unselect(i,o)})}uncheckRow(i){this.nativeElement.isRendered?this.nativeElement.uncheckRow(i):this.nativeElement.whenRendered(()=>{this.nativeElement.uncheckRow(i)})}uncheckAllRows(){this.nativeElement.isRendered?this.nativeElement.uncheckAllRows():this.nativeElement.whenRendered(()=>{this.nativeElement.uncheckAllRows()})}toggleRow(i){this.nativeElement.isRendered?this.nativeElement.toggleRow(i):this.nativeElement.whenRendered(()=>{this.nativeElement.toggleRow(i)})}get isRendered(){return!!this.nativeElement&&this.nativeElement.isRendered}ngOnInit(){}ngAfterViewInit(){const i=this;i.onCreate.emit(i.nativeElement),e.Render(),this.nativeElement.classList.add("smart-angular"),this.nativeElement.whenRendered(()=>{i.onReady.emit(i.nativeElement)}),this.listen()}ngOnDestroy(){this.unlisten()}ngOnChanges(i){if(this.nativeElement&&this.nativeElement.isRendered)for(const o in i)i.hasOwnProperty(o)&&(this.nativeElement[o]=i[o].currentValue)}listen(){const i=this;i.eventHandlers.beginEditHandler=o=>{i.onBeginEdit.emit(o)},i.nativeElement.addEventListener("beginEdit",i.eventHandlers.beginEditHandler),i.eventHandlers.batchChangeHandler=o=>{i.onBatchChange.emit(o)},i.nativeElement.addEventListener("batchChange",i.eventHandlers.batchChangeHandler),i.eventHandlers.batchCancelHandler=o=>{i.onBatchCancel.emit(o)},i.nativeElement.addEventListener("batchCancel",i.eventHandlers.batchCancelHandler),i.eventHandlers.changeHandler=o=>{i.onChange.emit(o)},i.nativeElement.addEventListener("change",i.eventHandlers.changeHandler),i.eventHandlers.columnClickHandler=o=>{i.onColumnClick.emit(o)},i.nativeElement.addEventListener("columnClick",i.eventHandlers.columnClickHandler),i.eventHandlers.columnDoubleClickHandler=o=>{i.onColumnDoubleClick.emit(o)},i.nativeElement.addEventListener("columnDoubleClick",i.eventHandlers.columnDoubleClickHandler),i.eventHandlers.columnResizeHandler=o=>{i.onColumnResize.emit(o)},i.nativeElement.addEventListener("columnResize",i.eventHandlers.columnResizeHandler),i.eventHandlers.columnDragStartHandler=o=>{i.onColumnDragStart.emit(o)},i.nativeElement.addEventListener("columnDragStart",i.eventHandlers.columnDragStartHandler),i.eventHandlers.columnDraggingHandler=o=>{i.onColumnDragging.emit(o)},i.nativeElement.addEventListener("columnDragging",i.eventHandlers.columnDraggingHandler),i.eventHandlers.columnDragEndHandler=o=>{i.onColumnDragEnd.emit(o)},i.nativeElement.addEventListener("columnDragEnd",i.eventHandlers.columnDragEndHandler),i.eventHandlers.columnReorderHandler=o=>{i.onColumnReorder.emit(o)},i.nativeElement.addEventListener("columnReorder",i.eventHandlers.columnReorderHandler),i.eventHandlers.rowDragStartHandler=o=>{i.onRowDragStart.emit(o)},i.nativeElement.addEventListener("rowDragStart",i.eventHandlers.rowDragStartHandler),i.eventHandlers.rowDraggingHandler=o=>{i.onRowDragging.emit(o)},i.nativeElement.addEventListener("rowDragging",i.eventHandlers.rowDraggingHandler),i.eventHandlers.rowDragEndHandler=o=>{i.onRowDragEnd.emit(o)},i.nativeElement.addEventListener("rowDragEnd",i.eventHandlers.rowDragEndHandler),i.eventHandlers.rowReorderHandler=o=>{i.onRowReorder.emit(o)},i.nativeElement.addEventListener("rowReorder",i.eventHandlers.rowReorderHandler),i.eventHandlers.rowExpandHandler=o=>{i.onRowExpand.emit(o)},i.nativeElement.addEventListener("rowExpand",i.eventHandlers.rowExpandHandler),i.eventHandlers.rowCollapseHandler=o=>{i.onRowCollapse.emit(o)},i.nativeElement.addEventListener("rowCollapse",i.eventHandlers.rowCollapseHandler),i.eventHandlers.rowClickHandler=o=>{i.onRowClick.emit(o)},i.nativeElement.addEventListener("rowClick",i.eventHandlers.rowClickHandler),i.eventHandlers.rowDoubleClickHandler=o=>{i.onRowDoubleClick.emit(o)},i.nativeElement.addEventListener("rowDoubleClick",i.eventHandlers.rowDoubleClickHandler),i.eventHandlers.rowResizeHandler=o=>{i.onRowResize.emit(o)},i.nativeElement.addEventListener("rowResize",i.eventHandlers.rowResizeHandler),i.eventHandlers.cellClickHandler=o=>{i.onCellClick.emit(o)},i.nativeElement.addEventListener("cellClick",i.eventHandlers.cellClickHandler),i.eventHandlers.cellDoubleClickHandler=o=>{i.onCellDoubleClick.emit(o)},i.nativeElement.addEventListener("cellDoubleClick",i.eventHandlers.cellDoubleClickHandler),i.eventHandlers.endEditHandler=o=>{i.onEndEdit.emit(o)},i.nativeElement.addEventListener("endEdit",i.eventHandlers.endEditHandler),i.eventHandlers.filterHandler=o=>{i.onFilter.emit(o)},i.nativeElement.addEventListener("filter",i.eventHandlers.filterHandler),i.eventHandlers.openColumnDialogHandler=o=>{i.onOpenColumnDialog.emit(o)},i.nativeElement.addEventListener("openColumnDialog",i.eventHandlers.openColumnDialogHandler),i.eventHandlers.closeColumnDialogHandler=o=>{i.onCloseColumnDialog.emit(o)},i.nativeElement.addEventListener("closeColumnDialog",i.eventHandlers.closeColumnDialogHandler),i.eventHandlers.resizeHandler=o=>{i.onResize.emit(o)},i.nativeElement.addEventListener("resize",i.eventHandlers.resizeHandler),i.eventHandlers.rowTapHandler=o=>{i.onRowTap.emit(o)},i.nativeElement.addEventListener("rowTap",i.eventHandlers.rowTapHandler),i.eventHandlers.cellTapHandler=o=>{i.onCellTap.emit(o)},i.nativeElement.addEventListener("cellTap",i.eventHandlers.cellTapHandler),i.eventHandlers.pageHandler=o=>{i.onPage.emit(o)},i.nativeElement.addEventListener("page",i.eventHandlers.pageHandler),i.eventHandlers.sortHandler=o=>{i.onSort.emit(o)},i.nativeElement.addEventListener("sort",i.eventHandlers.sortHandler),i.eventHandlers.scrollBottomReachedHandler=o=>{i.onScrollBottomReached.emit(o)},i.nativeElement.addEventListener("scrollBottomReached",i.eventHandlers.scrollBottomReachedHandler),i.eventHandlers.scrollTopReachedHandler=o=>{i.onScrollTopReached.emit(o)},i.nativeElement.addEventListener("scrollTopReached",i.eventHandlers.scrollTopReachedHandler)}unlisten(){const i=this;i.eventHandlers.beginEditHandler&&i.nativeElement.removeEventListener("beginEdit",i.eventHandlers.beginEditHandler),i.eventHandlers.batchChangeHandler&&i.nativeElement.removeEventListener("batchChange",i.eventHandlers.batchChangeHandler),i.eventHandlers.batchCancelHandler&&i.nativeElement.removeEventListener("batchCancel",i.eventHandlers.batchCancelHandler),i.eventHandlers.changeHandler&&i.nativeElement.removeEventListener("change",i.eventHandlers.changeHandler),i.eventHandlers.columnClickHandler&&i.nativeElement.removeEventListener("columnClick",i.eventHandlers.columnClickHandler),i.eventHandlers.columnDoubleClickHandler&&i.nativeElement.removeEventListener("columnDoubleClick",i.eventHandlers.columnDoubleClickHandler),i.eventHandlers.columnResizeHandler&&i.nativeElement.removeEventListener("columnResize",i.eventHandlers.columnResizeHandler),i.eventHandlers.columnDragStartHandler&&i.nativeElement.removeEventListener("columnDragStart",i.eventHandlers.columnDragStartHandler),i.eventHandlers.columnDraggingHandler&&i.nativeElement.removeEventListener("columnDragging",i.eventHandlers.columnDraggingHandler),i.eventHandlers.columnDragEndHandler&&i.nativeElement.removeEventListener("columnDragEnd",i.eventHandlers.columnDragEndHandler),i.eventHandlers.columnReorderHandler&&i.nativeElement.removeEventListener("columnReorder",i.eventHandlers.columnReorderHandler),i.eventHandlers.rowDragStartHandler&&i.nativeElement.removeEventListener("rowDragStart",i.eventHandlers.rowDragStartHandler),i.eventHandlers.rowDraggingHandler&&i.nativeElement.removeEventListener("rowDragging",i.eventHandlers.rowDraggingHandler),i.eventHandlers.rowDragEndHandler&&i.nativeElement.removeEventListener("rowDragEnd",i.eventHandlers.rowDragEndHandler),i.eventHandlers.rowReorderHandler&&i.nativeElement.removeEventListener("rowReorder",i.eventHandlers.rowReorderHandler),i.eventHandlers.rowExpandHandler&&i.nativeElement.removeEventListener("rowExpand",i.eventHandlers.rowExpandHandler),i.eventHandlers.rowCollapseHandler&&i.nativeElement.removeEventListener("rowCollapse",i.eventHandlers.rowCollapseHandler),i.eventHandlers.rowClickHandler&&i.nativeElement.removeEventListener("rowClick",i.eventHandlers.rowClickHandler),i.eventHandlers.rowDoubleClickHandler&&i.nativeElement.removeEventListener("rowDoubleClick",i.eventHandlers.rowDoubleClickHandler),i.eventHandlers.rowResizeHandler&&i.nativeElement.removeEventListener("rowResize",i.eventHandlers.rowResizeHandler),i.eventHandlers.cellClickHandler&&i.nativeElement.removeEventListener("cellClick",i.eventHandlers.cellClickHandler),i.eventHandlers.cellDoubleClickHandler&&i.nativeElement.removeEventListener("cellDoubleClick",i.eventHandlers.cellDoubleClickHandler),i.eventHandlers.endEditHandler&&i.nativeElement.removeEventListener("endEdit",i.eventHandlers.endEditHandler),i.eventHandlers.filterHandler&&(i.nativeElement.onfilterHandler=null),i.eventHandlers.openColumnDialogHandler&&i.nativeElement.removeEventListener("openColumnDialog",i.eventHandlers.openColumnDialogHandler),i.eventHandlers.closeColumnDialogHandler&&i.nativeElement.removeEventListener("closeColumnDialog",i.eventHandlers.closeColumnDialogHandler),i.eventHandlers.resizeHandler&&i.nativeElement.removeEventListener("resize",i.eventHandlers.resizeHandler),i.eventHandlers.rowTapHandler&&i.nativeElement.removeEventListener("rowTap",i.eventHandlers.rowTapHandler),i.eventHandlers.cellTapHandler&&i.nativeElement.removeEventListener("cellTap",i.eventHandlers.cellTapHandler),i.eventHandlers.pageHandler&&i.nativeElement.removeEventListener("page",i.eventHandlers.pageHandler),i.eventHandlers.sortHandler&&i.nativeElement.removeEventListener("sort",i.eventHandlers.sortHandler),i.eventHandlers.scrollBottomReachedHandler&&i.nativeElement.removeEventListener("scrollBottomReached",i.eventHandlers.scrollBottomReachedHandler),i.eventHandlers.scrollTopReachedHandler&&i.nativeElement.removeEventListener("scrollTopReached",i.eventHandlers.scrollTopReachedHandler)}};t.\u0275fac=function(i){return new(i||t)(H.\u0275\u0275directiveInject(H.ElementRef))},t.\u0275dir=H.\u0275\u0275defineDirective({type:t,selectors:[["smart-grid"],["","smart-grid",""]],inputs:{appearance:"appearance",behavior:"behavior",layout:"layout",locale:"locale",clipboard:"clipboard",columns:"columns",columnMenu:"columnMenu",columnGroups:"columnGroups",conditionalFormatting:"conditionalFormatting",charting:"charting",checkBoxes:"checkBoxes",dataExport:"dataExport",dataSource:"dataSource",dataSourceSettings:"dataSourceSettings",editing:"editing",filtering:"filtering",grouping:"grouping",messages:"messages",onCellValue:"onCellValue",onCellUpdate:"onCellUpdate",onCellRender:"onCellRender",onBeforeInit:"onBeforeInit",onInit:"onInit",onAfterInit:"onAfterInit",onChartInit:"onChartInit",onRender:"onRender",onKey:"onKey",onRowInit:"onRowInit",onRowDetailInit:"onRowDetailInit",onRowDetailUpdated:"onRowDetailUpdated",onRowInserted:"onRowInserted",onRowRemoved:"onRowRemoved",onRowUpdate:"onRowUpdate",onRowUpdated:"onRowUpdated",onColumnInit:"onColumnInit",onColumnInserted:"onColumnInserted",onColumnRemoved:"onColumnRemoved",onColumnUpdated:"onColumnUpdated",onCommand:"onCommand",paging:"paging",pager:"pager",rowDetail:"rowDetail",scrolling:"scrolling",columnHeader:"columnHeader",summaryRow:"summaryRow",groupHeader:"groupHeader",header:"header",footer:"footer",rightToLeft:"rightToLeft",rows:"rows",selection:"selection",sorting:"sorting"},outputs:{onBeginEdit:"onBeginEdit",onBatchChange:"onBatchChange",onBatchCancel:"onBatchCancel",onChange:"onChange",onColumnClick:"onColumnClick",onColumnDoubleClick:"onColumnDoubleClick",onColumnResize:"onColumnResize",onColumnDragStart:"onColumnDragStart",onColumnDragging:"onColumnDragging",onColumnDragEnd:"onColumnDragEnd",onColumnReorder:"onColumnReorder",onRowDragStart:"onRowDragStart",onRowDragging:"onRowDragging",onRowDragEnd:"onRowDragEnd",onRowReorder:"onRowReorder",onRowExpand:"onRowExpand",onRowCollapse:"onRowCollapse",onRowClick:"onRowClick",onRowDoubleClick:"onRowDoubleClick",onRowResize:"onRowResize",onCellClick:"onCellClick",onCellDoubleClick:"onCellDoubleClick",onEndEdit:"onEndEdit",onFilter:"onFilter",onOpenColumnDialog:"onOpenColumnDialog",onCloseColumnDialog:"onCloseColumnDialog",onResize:"onResize",onRowTap:"onRowTap",onCellTap:"onCellTap",onPage:"onPage",onSort:"onSort",onScrollBottomReached:"onScrollBottomReached",onScrollTopReached:"onScrollTopReached"},features:[H.\u0275\u0275InheritDefinitionFeature,H.\u0275\u0275NgOnChangesFeature]}),t.ctorParameters=()=>[{type:H.ElementRef}],(0,I.gn)([(0,H.Input)()],t.prototype,"appearance",null),(0,I.gn)([(0,H.Input)()],t.prototype,"behavior",null),(0,I.gn)([(0,H.Input)()],t.prototype,"layout",null),(0,I.gn)([(0,H.Input)()],t.prototype,"locale",null),(0,I.gn)([(0,H.Input)()],t.prototype,"clipboard",null),(0,I.gn)([(0,H.Input)()],t.prototype,"columns",null),(0,I.gn)([(0,H.Input)()],t.prototype,"columnMenu",null),(0,I.gn)([(0,H.Input)()],t.prototype,"columnGroups",null),(0,I.gn)([(0,H.Input)()],t.prototype,"conditionalFormatting",null),(0,I.gn)([(0,H.Input)()],t.prototype,"charting",null),(0,I.gn)([(0,H.Input)()],t.prototype,"checkBoxes",null),(0,I.gn)([(0,H.Input)()],t.prototype,"dataExport",null),(0,I.gn)([(0,H.Input)()],t.prototype,"dataSource",null),(0,I.gn)([(0,H.Input)()],t.prototype,"dataSourceSettings",null),(0,I.gn)([(0,H.Input)()],t.prototype,"editing",null),(0,I.gn)([(0,H.Input)()],t.prototype,"filtering",null),(0,I.gn)([(0,H.Input)()],t.prototype,"grouping",null),(0,I.gn)([(0,H.Input)()],t.prototype,"messages",null),(0,I.gn)([(0,H.Input)()],t.prototype,"onCellValue",null),(0,I.gn)([(0,H.Input)()],t.prototype,"onCellUpdate",null),(0,I.gn)([(0,H.Input)()],t.prototype,"onCellRender",null),(0,I.gn)([(0,H.Input)()],t.prototype,"onBeforeInit",null),(0,I.gn)([(0,H.Input)()],t.prototype,"onInit",null),(0,I.gn)([(0,H.Input)()],t.prototype,"onAfterInit",null),(0,I.gn)([(0,H.Input)()],t.prototype,"onChartInit",null),(0,I.gn)([(0,H.Input)()],t.prototype,"onRender",null),(0,I.gn)([(0,H.Input)()],t.prototype,"onKey",null),(0,I.gn)([(0,H.Input)()],t.prototype,"onRowInit",null),(0,I.gn)([(0,H.Input)()],t.prototype,"onRowDetailInit",null),(0,I.gn)([(0,H.Input)()],t.prototype,"onRowDetailUpdated",null),(0,I.gn)([(0,H.Input)()],t.prototype,"onRowInserted",null),(0,I.gn)([(0,H.Input)()],t.prototype,"onRowRemoved",null),(0,I.gn)([(0,H.Input)()],t.prototype,"onRowUpdate",null),(0,I.gn)([(0,H.Input)()],t.prototype,"onRowUpdated",null),(0,I.gn)([(0,H.Input)()],t.prototype,"onColumnInit",null),(0,I.gn)([(0,H.Input)()],t.prototype,"onColumnInserted",null),(0,I.gn)([(0,H.Input)()],t.prototype,"onColumnRemoved",null),(0,I.gn)([(0,H.Input)()],t.prototype,"onColumnUpdated",null),(0,I.gn)([(0,H.Input)()],t.prototype,"onCommand",null),(0,I.gn)([(0,H.Input)()],t.prototype,"paging",null),(0,I.gn)([(0,H.Input)()],t.prototype,"pager",null),(0,I.gn)([(0,H.Input)()],t.prototype,"rowDetail",null),(0,I.gn)([(0,H.Input)()],t.prototype,"scrolling",null),(0,I.gn)([(0,H.Input)()],t.prototype,"columnHeader",null),(0,I.gn)([(0,H.Input)()],t.prototype,"summaryRow",null),(0,I.gn)([(0,H.Input)()],t.prototype,"groupHeader",null),(0,I.gn)([(0,H.Input)()],t.prototype,"header",null),(0,I.gn)([(0,H.Input)()],t.prototype,"footer",null),(0,I.gn)([(0,H.Input)()],t.prototype,"rightToLeft",null),(0,I.gn)([(0,H.Input)()],t.prototype,"rows",null),(0,I.gn)([(0,H.Input)()],t.prototype,"selection",null),(0,I.gn)([(0,H.Input)()],t.prototype,"sorting",null),(0,I.gn)([(0,H.Output)()],t.prototype,"onBeginEdit",void 0),(0,I.gn)([(0,H.Output)()],t.prototype,"onBatchChange",void 0),(0,I.gn)([(0,H.Output)()],t.prototype,"onBatchCancel",void 0),(0,I.gn)([(0,H.Output)()],t.prototype,"onChange",void 0),(0,I.gn)([(0,H.Output)()],t.prototype,"onColumnClick",void 0),(0,I.gn)([(0,H.Output)()],t.prototype,"onColumnDoubleClick",void 0),(0,I.gn)([(0,H.Output)()],t.prototype,"onColumnResize",void 0),(0,I.gn)([(0,H.Output)()],t.prototype,"onColumnDragStart",void 0),(0,I.gn)([(0,H.Output)()],t.prototype,"onColumnDragging",void 0),(0,I.gn)([(0,H.Output)()],t.prototype,"onColumnDragEnd",void 0),(0,I.gn)([(0,H.Output)()],t.prototype,"onColumnReorder",void 0),(0,I.gn)([(0,H.Output)()],t.prototype,"onRowDragStart",void 0),(0,I.gn)([(0,H.Output)()],t.prototype,"onRowDragging",void 0),(0,I.gn)([(0,H.Output)()],t.prototype,"onRowDragEnd",void 0),(0,I.gn)([(0,H.Output)()],t.prototype,"onRowReorder",void 0),(0,I.gn)([(0,H.Output)()],t.prototype,"onRowExpand",void 0),(0,I.gn)([(0,H.Output)()],t.prototype,"onRowCollapse",void 0),(0,I.gn)([(0,H.Output)()],t.prototype,"onRowClick",void 0),(0,I.gn)([(0,H.Output)()],t.prototype,"onRowDoubleClick",void 0),(0,I.gn)([(0,H.Output)()],t.prototype,"onRowResize",void 0),(0,I.gn)([(0,H.Output)()],t.prototype,"onCellClick",void 0),(0,I.gn)([(0,H.Output)()],t.prototype,"onCellDoubleClick",void 0),(0,I.gn)([(0,H.Output)()],t.prototype,"onEndEdit",void 0),(0,I.gn)([(0,H.Output)()],t.prototype,"onFilter",void 0),(0,I.gn)([(0,H.Output)()],t.prototype,"onOpenColumnDialog",void 0),(0,I.gn)([(0,H.Output)()],t.prototype,"onCloseColumnDialog",void 0),(0,I.gn)([(0,H.Output)()],t.prototype,"onResize",void 0),(0,I.gn)([(0,H.Output)()],t.prototype,"onRowTap",void 0),(0,I.gn)([(0,H.Output)()],t.prototype,"onCellTap",void 0),(0,I.gn)([(0,H.Output)()],t.prototype,"onPage",void 0),(0,I.gn)([(0,H.Output)()],t.prototype,"onSort",void 0),(0,I.gn)([(0,H.Output)()],t.prototype,"onScrollBottomReached",void 0),(0,I.gn)([(0,H.Output)()],t.prototype,"onScrollTopReached",void 0);let n=class{};n.\u0275fac=function(i){return new(i||n)},n.\u0275mod=H.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=H.\u0275\u0275defineInjector({})},5136:(_e,fe,ue)=>{"use strict";ue.d(fe,{Kt:()=>t,y$:()=>n});var H=ue(2741),I=(ue(38),ue(1855));window.Smart?window.Smart.RenderMode="manual":window.Smart={RenderMode:"manual"};class se{constructor(i){this.onCreate=new H.EventEmitter,this.onReady=new H.EventEmitter,this.onAttach=new H.EventEmitter,this.onDetach=new H.EventEmitter;const o=this;this.nativeElement=i.nativeElement,o.nativeElement.onAttached=()=>{o.onAttach.emit(o.nativeElement)},o.nativeElement.onDetached=()=>{o.onDetach.emit(o.nativeElement)}}addEventListener(i,o,r=!1){this.nativeElement.addEventListener(i,o,r)}removeEventListener(i,o,r=!1){this.nativeElement.removeEventListener(i,o,r)}dispatchEvent(i){return this.nativeElement.dispatchEvent(i)}blur(){this.nativeElement.blur()}click(){this.nativeElement.click()}focus(i){this.nativeElement.focus(i)}get locale(){return this.nativeElement?this.nativeElement.locale:void 0}set locale(i){this.nativeElement&&(this.nativeElement.locale=i)}get localizeFormatFunction(){return this.nativeElement?this.nativeElement.localizeFormatFunction:void 0}set localizeFormatFunction(i){this.nativeElement&&(this.nativeElement.localizeFormatFunction=i)}get messages(){return this.nativeElement?this.nativeElement.messages:void 0}set messages(i){this.nativeElement&&(this.nativeElement.messages=i)}get rightToLeft(){return this.nativeElement?this.nativeElement.rightToLeft:void 0}set rightToLeft(i){this.nativeElement&&(this.nativeElement.rightToLeft=i)}get theme(){return this.nativeElement?this.nativeElement.theme:void 0}set theme(i){this.nativeElement&&(this.nativeElement.theme=i)}}se.\u0275fac=function(i){H.\u0275\u0275invalidFactory()},se.\u0275dir=H.\u0275\u0275defineDirective({type:se,inputs:{locale:"locale",localizeFormatFunction:"localizeFormatFunction",messages:"messages",rightToLeft:"rightToLeft",theme:"theme"},outputs:{onCreate:"onCreate",onReady:"onReady",onAttach:"onAttach",onDetach:"onDetach"}}),(0,I.gn)([(0,H.Output)()],se.prototype,"onCreate",void 0),(0,I.gn)([(0,H.Output)()],se.prototype,"onReady",void 0),(0,I.gn)([(0,H.Output)()],se.prototype,"onAttach",void 0),(0,I.gn)([(0,H.Output)()],se.prototype,"onDetach",void 0),(0,I.gn)([(0,H.Input)()],se.prototype,"locale",null),(0,I.gn)([(0,H.Input)()],se.prototype,"localizeFormatFunction",null),(0,I.gn)([(0,H.Input)()],se.prototype,"messages",null),(0,I.gn)([(0,H.Input)()],se.prototype,"rightToLeft",null),(0,I.gn)([(0,H.Input)()],se.prototype,"theme",null);const e=window.Smart;let t=class extends se{constructor(i){super(i),this.eventHandlers=[],this.onOpening=new H.EventEmitter,this.onOpen=new H.EventEmitter,this.onClosing=new H.EventEmitter,this.onClose=new H.EventEmitter,this.onCollapse=new H.EventEmitter,this.onDragEnd=new H.EventEmitter,this.onDragStart=new H.EventEmitter,this.onExpand=new H.EventEmitter,this.onMaximize=new H.EventEmitter,this.onMinimize=new H.EventEmitter,this.onResizeEnd=new H.EventEmitter,this.onResizeStart=new H.EventEmitter,this.onRestore=new H.EventEmitter,this.nativeElement=i.nativeElement}createComponent(i={}){this.nativeElement=document.createElement("smart-window");for(let o in i)this.nativeElement[o]=i[o];return this.nativeElement}get addNewTab(){return this.nativeElement?this.nativeElement.addNewTab:void 0}set addNewTab(i){this.nativeElement&&(this.nativeElement.addNewTab=i)}get animation(){return this.nativeElement?this.nativeElement.animation:void 0}set animation(i){this.nativeElement&&(this.nativeElement.animation=i)}get autoCapitalize(){return this.nativeElement?this.nativeElement.autoCapitalize:void 0}set autoCapitalize(i){this.nativeElement&&(this.nativeElement.autoCapitalize=i)}get autoExpand(){return this.nativeElement?this.nativeElement.autoExpand:void 0}set autoExpand(i){this.nativeElement&&(this.nativeElement.autoExpand=i)}get cancelLabel(){return this.nativeElement?this.nativeElement.cancelLabel:void 0}set cancelLabel(i){this.nativeElement&&(this.nativeElement.cancelLabel=i)}get completeLabel(){return this.nativeElement?this.nativeElement.completeLabel:void 0}set completeLabel(i){this.nativeElement&&(this.nativeElement.completeLabel=i)}get confirmLabel(){return this.nativeElement?this.nativeElement.confirmLabel:void 0}set confirmLabel(i){this.nativeElement&&(this.nativeElement.confirmLabel=i)}get collapsed(){return this.nativeElement?this.nativeElement.collapsed:void 0}set collapsed(i){this.nativeElement&&(this.nativeElement.collapsed=i)}get closeOnMaskClick(){return this.nativeElement?this.nativeElement.closeOnMaskClick:void 0}set closeOnMaskClick(i){this.nativeElement&&(this.nativeElement.closeOnMaskClick=i)}get dataSource(){return this.nativeElement?this.nativeElement.dataSource:void 0}set dataSource(i){this.nativeElement&&(this.nativeElement.dataSource=i)}get disabled(){return this.nativeElement?this.nativeElement.disabled:void 0}set disabled(i){this.nativeElement&&(this.nativeElement.disabled=i)}get disableSnap(){return this.nativeElement?this.nativeElement.disableSnap:void 0}set disableSnap(i){this.nativeElement&&(this.nativeElement.disableSnap=i)}get displayMode(){return this.nativeElement?this.nativeElement.displayMode:void 0}set displayMode(i){this.nativeElement&&(this.nativeElement.displayMode=i)}get dropPosition(){return this.nativeElement?this.nativeElement.dropPosition:void 0}set dropPosition(i){this.nativeElement&&(this.nativeElement.dropPosition=i)}get formatFunction(){return this.nativeElement?this.nativeElement.formatFunction:void 0}set formatFunction(i){this.nativeElement&&(this.nativeElement.formatFunction=i)}get footerPosition(){return this.nativeElement?this.nativeElement.footerPosition:void 0}set footerPosition(i){this.nativeElement&&(this.nativeElement.footerPosition=i)}get footerTemplate(){return this.nativeElement?this.nativeElement.footerTemplate:void 0}set footerTemplate(i){this.nativeElement&&(this.nativeElement.footerTemplate=i)}get headerButtons(){return this.nativeElement?this.nativeElement.headerButtons:void 0}set headerButtons(i){this.nativeElement&&(this.nativeElement.headerButtons=i)}get headerTemplate(){return this.nativeElement?this.nativeElement.headerTemplate:void 0}set headerTemplate(i){this.nativeElement&&(this.nativeElement.headerTemplate=i)}get headerPosition(){return this.nativeElement?this.nativeElement.headerPosition:void 0}set headerPosition(i){this.nativeElement&&(this.nativeElement.headerPosition=i)}get hint(){return this.nativeElement?this.nativeElement.hint:void 0}set hint(i){this.nativeElement&&(this.nativeElement.hint=i)}get indeterminate(){return this.nativeElement?this.nativeElement.indeterminate:void 0}set indeterminate(i){this.nativeElement&&(this.nativeElement.indeterminate=i)}get inverted(){return this.nativeElement?this.nativeElement.inverted:void 0}set inverted(i){this.nativeElement&&(this.nativeElement.inverted=i)}get label(){return this.nativeElement?this.nativeElement.label:void 0}set label(i){this.nativeElement&&(this.nativeElement.label=i)}get liveResize(){return this.nativeElement?this.nativeElement.liveResize:void 0}set liveResize(i){this.nativeElement&&(this.nativeElement.liveResize=i)}get layout(){return this.nativeElement?this.nativeElement.layout:void 0}set layout(i){this.nativeElement&&(this.nativeElement.layout=i)}get locale(){return this.nativeElement?this.nativeElement.locale:void 0}set locale(i){this.nativeElement&&(this.nativeElement.locale=i)}get locked(){return this.nativeElement?this.nativeElement.locked:void 0}set locked(i){this.nativeElement&&(this.nativeElement.locked=i)}get localizeFormatFunction(){return this.nativeElement?this.nativeElement.localizeFormatFunction:void 0}set localizeFormatFunction(i){this.nativeElement&&(this.nativeElement.localizeFormatFunction=i)}get maximized(){return this.nativeElement?this.nativeElement.maximized:void 0}set maximized(i){this.nativeElement&&(this.nativeElement.maximized=i)}get messages(){return this.nativeElement?this.nativeElement.messages:void 0}set messages(i){this.nativeElement&&(this.nativeElement.messages=i)}get modal(){return this.nativeElement?this.nativeElement.modal:void 0}set modal(i){this.nativeElement&&(this.nativeElement.modal=i)}get max(){return this.nativeElement?this.nativeElement.max:void 0}set max(i){this.nativeElement&&(this.nativeElement.max=i)}get min(){return this.nativeElement?this.nativeElement.min:void 0}set min(i){this.nativeElement&&(this.nativeElement.min=i)}get minimized(){return this.nativeElement?this.nativeElement.minimized:void 0}set minimized(i){this.nativeElement&&(this.nativeElement.minimized=i)}get maxLength(){return this.nativeElement?this.nativeElement.maxLength:void 0}set maxLength(i){this.nativeElement&&(this.nativeElement.maxLength=i)}get minLength(){return this.nativeElement?this.nativeElement.minLength:void 0}set minLength(i){this.nativeElement&&(this.nativeElement.minLength=i)}get opened(){return this.nativeElement?this.nativeElement.opened:void 0}set opened(i){this.nativeElement&&(this.nativeElement.opened=i)}get pinned(){return this.nativeElement?this.nativeElement.pinned:void 0}set pinned(i){this.nativeElement&&(this.nativeElement.pinned=i)}get placeholder(){return this.nativeElement?this.nativeElement.placeholder:void 0}set placeholder(i){this.nativeElement&&(this.nativeElement.placeholder=i)}get promptLabel(){return this.nativeElement?this.nativeElement.promptLabel:void 0}set promptLabel(i){this.nativeElement&&(this.nativeElement.promptLabel=i)}get readonly(){return this.nativeElement?this.nativeElement.readonly:void 0}set readonly(i){this.nativeElement&&(this.nativeElement.readonly=i)}get resizeIndicator(){return this.nativeElement?this.nativeElement.resizeIndicator:void 0}set resizeIndicator(i){this.nativeElement&&(this.nativeElement.resizeIndicator=i)}get resizeMode(){return this.nativeElement?this.nativeElement.resizeMode:void 0}set resizeMode(i){this.nativeElement&&(this.nativeElement.resizeMode=i)}get rightToLeft(){return this.nativeElement?this.nativeElement.rightToLeft:void 0}set rightToLeft(i){this.nativeElement&&(this.nativeElement.rightToLeft=i)}get required(){return this.nativeElement?this.nativeElement.required:void 0}set required(i){this.nativeElement&&(this.nativeElement.required=i)}get requiredMessage(){return this.nativeElement?this.nativeElement.requiredMessage:void 0}set requiredMessage(i){this.nativeElement&&(this.nativeElement.requiredMessage=i)}get selectAllOnFocus(){return this.nativeElement?this.nativeElement.selectAllOnFocus:void 0}set selectAllOnFocus(i){this.nativeElement&&(this.nativeElement.selectAllOnFocus=i)}get selectedIndex(){return this.nativeElement?this.nativeElement.selectedIndex:void 0}set selectedIndex(i){this.nativeElement&&(this.nativeElement.selectedIndex=i)}get selectionMode(){return this.nativeElement?this.nativeElement.selectionMode:void 0}set selectionMode(i){this.nativeElement&&(this.nativeElement.selectionMode=i)}get selectionEnd(){return this.nativeElement?this.nativeElement.selectionEnd:void 0}set selectionEnd(i){this.nativeElement&&(this.nativeElement.selectionEnd=i)}get selectionStart(){return this.nativeElement?this.nativeElement.selectionStart:void 0}set selectionStart(i){this.nativeElement&&(this.nativeElement.selectionStart=i)}get showProgressValue(){return this.nativeElement?this.nativeElement.showProgressValue:void 0}set showProgressValue(i){this.nativeElement&&(this.nativeElement.showProgressValue=i)}get siblings(){return this.nativeElement?this.nativeElement.siblings:void 0}set siblings(i){this.nativeElement&&(this.nativeElement.siblings=i)}get size(){return this.nativeElement?this.nativeElement.size:void 0}set size(i){this.nativeElement&&(this.nativeElement.size=i)}get spellCheck(){return this.nativeElement?this.nativeElement.spellCheck:void 0}set spellCheck(i){this.nativeElement&&(this.nativeElement.spellCheck=i)}get tabCloseButtons(){return this.nativeElement?this.nativeElement.tabCloseButtons:void 0}set tabCloseButtons(i){this.nativeElement&&(this.nativeElement.tabCloseButtons=i)}get tabCloseButtonMode(){return this.nativeElement?this.nativeElement.tabCloseButtonMode:void 0}set tabCloseButtonMode(i){this.nativeElement&&(this.nativeElement.tabCloseButtonMode=i)}get tabOverflow(){return this.nativeElement?this.nativeElement.tabOverflow:void 0}set tabOverflow(i){this.nativeElement&&(this.nativeElement.tabOverflow=i)}get tabPosition(){return this.nativeElement?this.nativeElement.tabPosition:void 0}set tabPosition(i){this.nativeElement&&(this.nativeElement.tabPosition=i)}get tabScrollButtonsPosition(){return this.nativeElement?this.nativeElement.tabScrollButtonsPosition:void 0}set tabScrollButtonsPosition(i){this.nativeElement&&(this.nativeElement.tabScrollButtonsPosition=i)}get tabTextOrientation(){return this.nativeElement?this.nativeElement.tabTextOrientation:void 0}set tabTextOrientation(i){this.nativeElement&&(this.nativeElement.tabTextOrientation=i)}get theme(){return this.nativeElement?this.nativeElement.theme:void 0}set theme(i){this.nativeElement&&(this.nativeElement.theme=i)}get unfocusable(){return this.nativeElement?this.nativeElement.unfocusable:void 0}set unfocusable(i){this.nativeElement&&(this.nativeElement.unfocusable=i)}get value(){return this.nativeElement?this.nativeElement.value:void 0}set value(i){this.nativeElement&&(this.nativeElement.value=i)}get windowParent(){return this.nativeElement?this.nativeElement.windowParent:void 0}set windowParent(i){this.nativeElement&&(this.nativeElement.windowParent=i)}get wrap(){return this.nativeElement?this.nativeElement.wrap:void 0}set wrap(i){this.nativeElement&&(this.nativeElement.wrap=i)}appendChild(i){return(0,I.mG)(this,void 0,void 0,function*(){return yield(()=>new Promise(l=>{this.nativeElement.whenRendered(()=>{const s=this.nativeElement.appendChild(i);l(s)})}))()})}bringToFront(){this.nativeElement.isRendered?this.nativeElement.bringToFront():this.nativeElement.whenRendered(()=>{this.nativeElement.bringToFront()})}clear(){this.nativeElement.isRendered?this.nativeElement.clear():this.nativeElement.whenRendered(()=>{this.nativeElement.clear()})}close(){this.nativeElement.isRendered?this.nativeElement.close():this.nativeElement.whenRendered(()=>{this.nativeElement.close()})}collapse(){return(0,I.mG)(this,void 0,void 0,function*(){return yield(()=>new Promise(r=>{this.nativeElement.whenRendered(()=>{const l=this.nativeElement.collapse();r(l)})}))()})}ensureVisible(i){this.nativeElement.isRendered?this.nativeElement.ensureVisible(i):this.nativeElement.whenRendered(()=>{this.nativeElement.ensureVisible(i)})}expand(){return(0,I.mG)(this,void 0,void 0,function*(){return yield(()=>new Promise(r=>{this.nativeElement.whenRendered(()=>{const l=this.nativeElement.expand();r(l)})}))()})}insert(i,o){this.nativeElement.isRendered?this.nativeElement.insert(i,o):this.nativeElement.whenRendered(()=>{this.nativeElement.insert(i,o)})}insertBefore(i,o){return(0,I.mG)(this,void 0,void 0,function*(){return yield(()=>new Promise(s=>{this.nativeElement.whenRendered(()=>{const c=this.nativeElement.insertBefore(i,o);s(c)})}))()})}removeAt(i){this.nativeElement.isRendered?this.nativeElement.removeAt(i):this.nativeElement.whenRendered(()=>{this.nativeElement.removeAt(i)})}removeChild(i){return(0,I.mG)(this,void 0,void 0,function*(){return yield(()=>new Promise(l=>{this.nativeElement.whenRendered(()=>{const s=this.nativeElement.removeChild(i);l(s)})}))()})}maximize(){this.nativeElement.isRendered?this.nativeElement.maximize():this.nativeElement.whenRendered(()=>{this.nativeElement.maximize()})}minimize(){this.nativeElement.isRendered?this.nativeElement.minimize():this.nativeElement.whenRendered(()=>{this.nativeElement.minimize()})}open(){this.nativeElement.isRendered?this.nativeElement.open():this.nativeElement.whenRendered(()=>{this.nativeElement.open()})}pin(){this.nativeElement.isRendered?this.nativeElement.pin():this.nativeElement.whenRendered(()=>{this.nativeElement.pin()})}restore(){this.nativeElement.isRendered?this.nativeElement.restore():this.nativeElement.whenRendered(()=>{this.nativeElement.restore()})}select(i){this.nativeElement.isRendered?this.nativeElement.select(i):this.nativeElement.whenRendered(()=>{this.nativeElement.select(i)})}unpin(){this.nativeElement.isRendered?this.nativeElement.unpin():this.nativeElement.whenRendered(()=>{this.nativeElement.unpin()})}update(i,o,r){this.nativeElement.isRendered?this.nativeElement.update(i,o,r):this.nativeElement.whenRendered(()=>{this.nativeElement.update(i,o,r)})}get isRendered(){return!!this.nativeElement&&this.nativeElement.isRendered}ngOnInit(){}ngAfterViewInit(){const i=this;i.onCreate.emit(i.nativeElement),e.Render(),this.nativeElement.classList.add("smart-angular"),this.nativeElement.whenRendered(()=>{i.onReady.emit(i.nativeElement)}),this.listen()}ngOnDestroy(){this.unlisten()}ngOnChanges(i){if(this.nativeElement&&this.nativeElement.isRendered)for(const o in i)i.hasOwnProperty(o)&&(this.nativeElement[o]=i[o].currentValue)}listen(){const i=this;i.eventHandlers.openingHandler=o=>{i.onOpening.emit(o)},i.nativeElement.addEventListener("opening",i.eventHandlers.openingHandler),i.eventHandlers.openHandler=o=>{i.onOpen.emit(o)},i.nativeElement.addEventListener("open",i.eventHandlers.openHandler),i.eventHandlers.closingHandler=o=>{i.onClosing.emit(o)},i.nativeElement.addEventListener("closing",i.eventHandlers.closingHandler),i.eventHandlers.closeHandler=o=>{i.onClose.emit(o)},i.nativeElement.addEventListener("close",i.eventHandlers.closeHandler),i.eventHandlers.collapseHandler=o=>{i.onCollapse.emit(o)},i.nativeElement.addEventListener("collapse",i.eventHandlers.collapseHandler),i.eventHandlers.dragEndHandler=o=>{i.onDragEnd.emit(o)},i.nativeElement.addEventListener("dragEnd",i.eventHandlers.dragEndHandler),i.eventHandlers.dragStartHandler=o=>{i.onDragStart.emit(o)},i.nativeElement.addEventListener("dragStart",i.eventHandlers.dragStartHandler),i.eventHandlers.expandHandler=o=>{i.onExpand.emit(o)},i.nativeElement.addEventListener("expand",i.eventHandlers.expandHandler),i.eventHandlers.maximizeHandler=o=>{i.onMaximize.emit(o)},i.nativeElement.addEventListener("maximize",i.eventHandlers.maximizeHandler),i.eventHandlers.minimizeHandler=o=>{i.onMinimize.emit(o)},i.nativeElement.addEventListener("minimize",i.eventHandlers.minimizeHandler),i.eventHandlers.resizeEndHandler=o=>{i.onResizeEnd.emit(o)},i.nativeElement.addEventListener("resizeEnd",i.eventHandlers.resizeEndHandler),i.eventHandlers.resizeStartHandler=o=>{i.onResizeStart.emit(o)},i.nativeElement.addEventListener("resizeStart",i.eventHandlers.resizeStartHandler),i.eventHandlers.restoreHandler=o=>{i.onRestore.emit(o)},i.nativeElement.addEventListener("restore",i.eventHandlers.restoreHandler)}unlisten(){const i=this;i.eventHandlers.openingHandler&&i.nativeElement.removeEventListener("opening",i.eventHandlers.openingHandler),i.eventHandlers.openHandler&&i.nativeElement.removeEventListener("open",i.eventHandlers.openHandler),i.eventHandlers.closingHandler&&i.nativeElement.removeEventListener("closing",i.eventHandlers.closingHandler),i.eventHandlers.closeHandler&&i.nativeElement.removeEventListener("close",i.eventHandlers.closeHandler),i.eventHandlers.collapseHandler&&i.nativeElement.removeEventListener("collapse",i.eventHandlers.collapseHandler),i.eventHandlers.dragEndHandler&&i.nativeElement.removeEventListener("dragEnd",i.eventHandlers.dragEndHandler),i.eventHandlers.dragStartHandler&&i.nativeElement.removeEventListener("dragStart",i.eventHandlers.dragStartHandler),i.eventHandlers.expandHandler&&i.nativeElement.removeEventListener("expand",i.eventHandlers.expandHandler),i.eventHandlers.maximizeHandler&&i.nativeElement.removeEventListener("maximize",i.eventHandlers.maximizeHandler),i.eventHandlers.minimizeHandler&&i.nativeElement.removeEventListener("minimize",i.eventHandlers.minimizeHandler),i.eventHandlers.resizeEndHandler&&i.nativeElement.removeEventListener("resizeEnd",i.eventHandlers.resizeEndHandler),i.eventHandlers.resizeStartHandler&&i.nativeElement.removeEventListener("resizeStart",i.eventHandlers.resizeStartHandler),i.eventHandlers.restoreHandler&&i.nativeElement.removeEventListener("restore",i.eventHandlers.restoreHandler)}};t.\u0275fac=function(i){return new(i||t)(H.\u0275\u0275directiveInject(H.ElementRef))},t.\u0275dir=H.\u0275\u0275defineDirective({type:t,selectors:[["smart-window"],["","smart-window",""],["smart-tabs-window"],["smart-prompt-window"],["smart-multilineprompt-window"],["smart-dialog-window"],["smart-alert-window"],["smart-progress-window"],["smart-wait-window"]],inputs:{addNewTab:"addNewTab",animation:"animation",autoCapitalize:"autoCapitalize",autoExpand:"autoExpand",cancelLabel:"cancelLabel",completeLabel:"completeLabel",confirmLabel:"confirmLabel",collapsed:"collapsed",closeOnMaskClick:"closeOnMaskClick",dataSource:"dataSource",disabled:"disabled",disableSnap:"disableSnap",displayMode:"displayMode",dropPosition:"dropPosition",formatFunction:"formatFunction",footerPosition:"footerPosition",footerTemplate:"footerTemplate",headerButtons:"headerButtons",headerTemplate:"headerTemplate",headerPosition:"headerPosition",hint:"hint",indeterminate:"indeterminate",inverted:"inverted",label:"label",liveResize:"liveResize",layout:"layout",locale:"locale",locked:"locked",localizeFormatFunction:"localizeFormatFunction",maximized:"maximized",messages:"messages",modal:"modal",max:"max",min:"min",minimized:"minimized",maxLength:"maxLength",minLength:"minLength",opened:"opened",pinned:"pinned",placeholder:"placeholder",promptLabel:"promptLabel",readonly:"readonly",resizeIndicator:"resizeIndicator",resizeMode:"resizeMode",rightToLeft:"rightToLeft",required:"required",requiredMessage:"requiredMessage",selectAllOnFocus:"selectAllOnFocus",selectedIndex:"selectedIndex",selectionMode:"selectionMode",selectionEnd:"selectionEnd",selectionStart:"selectionStart",showProgressValue:"showProgressValue",siblings:"siblings",size:"size",spellCheck:"spellCheck",tabCloseButtons:"tabCloseButtons",tabCloseButtonMode:"tabCloseButtonMode",tabOverflow:"tabOverflow",tabPosition:"tabPosition",tabScrollButtonsPosition:"tabScrollButtonsPosition",tabTextOrientation:"tabTextOrientation",theme:"theme",unfocusable:"unfocusable",value:"value",windowParent:"windowParent",wrap:"wrap"},outputs:{onOpening:"onOpening",onOpen:"onOpen",onClosing:"onClosing",onClose:"onClose",onCollapse:"onCollapse",onDragEnd:"onDragEnd",onDragStart:"onDragStart",onExpand:"onExpand",onMaximize:"onMaximize",onMinimize:"onMinimize",onResizeEnd:"onResizeEnd",onResizeStart:"onResizeStart",onRestore:"onRestore"},features:[H.\u0275\u0275InheritDefinitionFeature,H.\u0275\u0275NgOnChangesFeature]}),t.ctorParameters=()=>[{type:H.ElementRef}],(0,I.gn)([(0,H.Input)()],t.prototype,"addNewTab",null),(0,I.gn)([(0,H.Input)()],t.prototype,"animation",null),(0,I.gn)([(0,H.Input)()],t.prototype,"autoCapitalize",null),(0,I.gn)([(0,H.Input)()],t.prototype,"autoExpand",null),(0,I.gn)([(0,H.Input)()],t.prototype,"cancelLabel",null),(0,I.gn)([(0,H.Input)()],t.prototype,"completeLabel",null),(0,I.gn)([(0,H.Input)()],t.prototype,"confirmLabel",null),(0,I.gn)([(0,H.Input)()],t.prototype,"collapsed",null),(0,I.gn)([(0,H.Input)()],t.prototype,"closeOnMaskClick",null),(0,I.gn)([(0,H.Input)()],t.prototype,"dataSource",null),(0,I.gn)([(0,H.Input)()],t.prototype,"disabled",null),(0,I.gn)([(0,H.Input)()],t.prototype,"disableSnap",null),(0,I.gn)([(0,H.Input)()],t.prototype,"displayMode",null),(0,I.gn)([(0,H.Input)()],t.prototype,"dropPosition",null),(0,I.gn)([(0,H.Input)()],t.prototype,"formatFunction",null),(0,I.gn)([(0,H.Input)()],t.prototype,"footerPosition",null),(0,I.gn)([(0,H.Input)()],t.prototype,"footerTemplate",null),(0,I.gn)([(0,H.Input)()],t.prototype,"headerButtons",null),(0,I.gn)([(0,H.Input)()],t.prototype,"headerTemplate",null),(0,I.gn)([(0,H.Input)()],t.prototype,"headerPosition",null),(0,I.gn)([(0,H.Input)()],t.prototype,"hint",null),(0,I.gn)([(0,H.Input)()],t.prototype,"indeterminate",null),(0,I.gn)([(0,H.Input)()],t.prototype,"inverted",null),(0,I.gn)([(0,H.Input)()],t.prototype,"label",null),(0,I.gn)([(0,H.Input)()],t.prototype,"liveResize",null),(0,I.gn)([(0,H.Input)()],t.prototype,"layout",null),(0,I.gn)([(0,H.Input)()],t.prototype,"locale",null),(0,I.gn)([(0,H.Input)()],t.prototype,"locked",null),(0,I.gn)([(0,H.Input)()],t.prototype,"localizeFormatFunction",null),(0,I.gn)([(0,H.Input)()],t.prototype,"maximized",null),(0,I.gn)([(0,H.Input)()],t.prototype,"messages",null),(0,I.gn)([(0,H.Input)()],t.prototype,"modal",null),(0,I.gn)([(0,H.Input)()],t.prototype,"max",null),(0,I.gn)([(0,H.Input)()],t.prototype,"min",null),(0,I.gn)([(0,H.Input)()],t.prototype,"minimized",null),(0,I.gn)([(0,H.Input)()],t.prototype,"maxLength",null),(0,I.gn)([(0,H.Input)()],t.prototype,"minLength",null),(0,I.gn)([(0,H.Input)()],t.prototype,"opened",null),(0,I.gn)([(0,H.Input)()],t.prototype,"pinned",null),(0,I.gn)([(0,H.Input)()],t.prototype,"placeholder",null),(0,I.gn)([(0,H.Input)()],t.prototype,"promptLabel",null),(0,I.gn)([(0,H.Input)()],t.prototype,"readonly",null),(0,I.gn)([(0,H.Input)()],t.prototype,"resizeIndicator",null),(0,I.gn)([(0,H.Input)()],t.prototype,"resizeMode",null),(0,I.gn)([(0,H.Input)()],t.prototype,"rightToLeft",null),(0,I.gn)([(0,H.Input)()],t.prototype,"required",null),(0,I.gn)([(0,H.Input)()],t.prototype,"requiredMessage",null),(0,I.gn)([(0,H.Input)()],t.prototype,"selectAllOnFocus",null),(0,I.gn)([(0,H.Input)()],t.prototype,"selectedIndex",null),(0,I.gn)([(0,H.Input)()],t.prototype,"selectionMode",null),(0,I.gn)([(0,H.Input)()],t.prototype,"selectionEnd",null),(0,I.gn)([(0,H.Input)()],t.prototype,"selectionStart",null),(0,I.gn)([(0,H.Input)()],t.prototype,"showProgressValue",null),(0,I.gn)([(0,H.Input)()],t.prototype,"siblings",null),(0,I.gn)([(0,H.Input)()],t.prototype,"size",null),(0,I.gn)([(0,H.Input)()],t.prototype,"spellCheck",null),(0,I.gn)([(0,H.Input)()],t.prototype,"tabCloseButtons",null),(0,I.gn)([(0,H.Input)()],t.prototype,"tabCloseButtonMode",null),(0,I.gn)([(0,H.Input)()],t.prototype,"tabOverflow",null),(0,I.gn)([(0,H.Input)()],t.prototype,"tabPosition",null),(0,I.gn)([(0,H.Input)()],t.prototype,"tabScrollButtonsPosition",null),(0,I.gn)([(0,H.Input)()],t.prototype,"tabTextOrientation",null),(0,I.gn)([(0,H.Input)()],t.prototype,"theme",null),(0,I.gn)([(0,H.Input)()],t.prototype,"unfocusable",null),(0,I.gn)([(0,H.Input)()],t.prototype,"value",null),(0,I.gn)([(0,H.Input)()],t.prototype,"windowParent",null),(0,I.gn)([(0,H.Input)()],t.prototype,"wrap",null),(0,I.gn)([(0,H.Output)()],t.prototype,"onOpening",void 0),(0,I.gn)([(0,H.Output)()],t.prototype,"onOpen",void 0),(0,I.gn)([(0,H.Output)()],t.prototype,"onClosing",void 0),(0,I.gn)([(0,H.Output)()],t.prototype,"onClose",void 0),(0,I.gn)([(0,H.Output)()],t.prototype,"onCollapse",void 0),(0,I.gn)([(0,H.Output)()],t.prototype,"onDragEnd",void 0),(0,I.gn)([(0,H.Output)()],t.prototype,"onDragStart",void 0),(0,I.gn)([(0,H.Output)()],t.prototype,"onExpand",void 0),(0,I.gn)([(0,H.Output)()],t.prototype,"onMaximize",void 0),(0,I.gn)([(0,H.Output)()],t.prototype,"onMinimize",void 0),(0,I.gn)([(0,H.Output)()],t.prototype,"onResizeEnd",void 0),(0,I.gn)([(0,H.Output)()],t.prototype,"onResizeStart",void 0),(0,I.gn)([(0,H.Output)()],t.prototype,"onRestore",void 0);let n=class{};n.\u0275fac=function(i){return new(i||n)},n.\u0275mod=H.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=H.\u0275\u0275defineInjector({})},5978:(_e,fe,ue)=>{var H=ue(8506).default;(()=>{var he={2737:e=>{var t=function(n){"use strict";var o,a=Object.prototype,i=a.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},l=r.iterator||"@@iterator",s=r.asyncIterator||"@@asyncIterator",c=r.toStringTag||"@@toStringTag";function u(m,h,f){return Object.defineProperty(m,h,{value:f,enumerable:!0,configurable:!0,writable:!0}),m[h]}try{u({},"")}catch(m){u=function(h,f,_){return h[f]=_}}function p(m,h,f,_){var S=Object.create((h&&h.prototype instanceof T?h:T).prototype),E=new re(_||[]);return S._invoke=function(m,h,f){var _=b;return function(S,E){if(_===y)throw new Error("Generator is already running");if(_===x){if("throw"===S)throw E;return d()}for(f.method=S,f.arg=E;;){var $=f.delegate;if($){var L=W($,f);if(L){if(L===D)continue;return L}}if("next"===f.method)f.sent=f._sent=f.arg;else if("throw"===f.method){if(_===b)throw _=x,f.arg;f.dispatchException(f.arg)}else"return"===f.method&&f.abrupt("return",f.arg);_=y;var k=g(m,h,f);if("normal"===k.type){if(_=f.done?x:v,k.arg===D)continue;return{value:k.arg,done:f.done}}"throw"===k.type&&(_=x,f.method="throw",f.arg=k.arg)}}}(m,f,E),S}function g(m,h,f){try{return{type:"normal",arg:m.call(h,f)}}catch(_){return{type:"throw",arg:_}}}n.wrap=p;var b="suspendedStart",v="suspendedYield",y="executing",x="completed",D={};function T(){}function M(){}function A(){}var B={};B[l]=function(){return this};var O=Object.getPrototypeOf,N=O&&O(O(C([])));N&&N!==a&&i.call(N,l)&&(B=N);var P=A.prototype=T.prototype=Object.create(B);function V(m){["next","throw","return"].forEach(function(h){u(m,h,function(f){return this._invoke(h,f)})})}function Y(m,h){function f(S,E,$,L){var k=g(m[S],m,E);if("throw"!==k.type){var F=k.arg,R=F.value;return R&&"object"==typeof R&&i.call(R,"__await")?h.resolve(R.__await).then(function(z){f("next",z,$,L)},function(z){f("throw",z,$,L)}):h.resolve(R).then(function(z){F.value=z,$(F)},function(z){return f("throw",z,$,L)})}L(k.arg)}var _;this._invoke=function(S,E){function $(){return new h(function(L,k){f(S,E,L,k)})}return _=_?_.then($,$):$()}}function W(m,h){var f=m.iterator[h.method];if(f===o){if(h.delegate=null,"throw"===h.method){if(m.iterator.return&&(h.method="return",h.arg=o,W(m,h),"throw"===h.method))return D;h.method="throw",h.arg=new TypeError("The iterator does not provide a 'throw' method")}return D}var _=g(f,m.iterator,h.arg);if("throw"===_.type)return h.method="throw",h.arg=_.arg,h.delegate=null,D;var w=_.arg;return w?w.done?(h[m.resultName]=w.value,h.next=m.nextLoc,"return"!==h.method&&(h.method="next",h.arg=o),h.delegate=null,D):w:(h.method="throw",h.arg=new TypeError("iterator result is not an object"),h.delegate=null,D)}function Z(m){var h={tryLoc:m[0]};1 in m&&(h.catchLoc=m[1]),2 in m&&(h.finallyLoc=m[2],h.afterLoc=m[3]),this.tryEntries.push(h)}function te(m){var h=m.completion||{};h.type="normal",delete h.arg,m.completion=h}function re(m){this.tryEntries=[{tryLoc:"root"}],m.forEach(Z,this),this.reset(!0)}function C(m){if(m){var h=m[l];if(h)return h.call(m);if("function"==typeof m.next)return m;if(!isNaN(m.length)){var f=-1,_=function w(){for(;++f<m.length;)if(i.call(m,f))return w.value=m[f],w.done=!1,w;return w.value=o,w.done=!0,w};return _.next=_}}return{next:d}}function d(){return{value:o,done:!0}}return M.prototype=P.constructor=A,A.constructor=M,M.displayName=u(A,c,"GeneratorFunction"),n.isGeneratorFunction=function(m){var h="function"==typeof m&&m.constructor;return!!h&&(h===M||"GeneratorFunction"===(h.displayName||h.name))},n.mark=function(m){return Object.setPrototypeOf?Object.setPrototypeOf(m,A):(m.__proto__=A,u(m,c,"GeneratorFunction")),m.prototype=Object.create(P),m},n.awrap=function(m){return{__await:m}},V(Y.prototype),Y.prototype[s]=function(){return this},n.AsyncIterator=Y,n.async=function(m,h,f,_,w){void 0===w&&(w=Promise);var S=new Y(p(m,h,f,_),w);return n.isGeneratorFunction(h)?S:S.next().then(function(E){return E.done?E.value:S.next()})},V(P),u(P,c,"Generator"),P[l]=function(){return this},P.toString=function(){return"[object Generator]"},n.keys=function(m){var h=[];for(var f in m)h.push(f);return h.reverse(),function _(){for(;h.length;){var w=h.pop();if(w in m)return _.value=w,_.done=!1,_}return _.done=!0,_}},n.values=C,re.prototype={constructor:re,reset:function(m){if(this.prev=0,this.next=0,this.sent=this._sent=o,this.done=!1,this.delegate=null,this.method="next",this.arg=o,this.tryEntries.forEach(te),!m)for(var h in this)"t"===h.charAt(0)&&i.call(this,h)&&!isNaN(+h.slice(1))&&(this[h]=o)},stop:function(){this.done=!0;var h=this.tryEntries[0].completion;if("throw"===h.type)throw h.arg;return this.rval},dispatchException:function(m){if(this.done)throw m;var h=this;function f(L,k){return S.type="throw",S.arg=m,h.next=L,k&&(h.method="next",h.arg=o),!!k}for(var _=this.tryEntries.length-1;_>=0;--_){var w=this.tryEntries[_],S=w.completion;if("root"===w.tryLoc)return f("end");if(w.tryLoc<=this.prev){var E=i.call(w,"catchLoc"),$=i.call(w,"finallyLoc");if(E&&$){if(this.prev<w.catchLoc)return f(w.catchLoc,!0);if(this.prev<w.finallyLoc)return f(w.finallyLoc)}else if(E){if(this.prev<w.catchLoc)return f(w.catchLoc,!0)}else{if(!$)throw new Error("try statement without catch or finally");if(this.prev<w.finallyLoc)return f(w.finallyLoc)}}}},abrupt:function(m,h){for(var f=this.tryEntries.length-1;f>=0;--f){var _=this.tryEntries[f];if(_.tryLoc<=this.prev&&i.call(_,"finallyLoc")&&this.prev<_.finallyLoc){var w=_;break}}w&&("break"===m||"continue"===m)&&w.tryLoc<=h&&h<=w.finallyLoc&&(w=null);var S=w?w.completion:{};return S.type=m,S.arg=h,w?(this.method="next",this.next=w.finallyLoc,D):this.complete(S)},complete:function(m,h){if("throw"===m.type)throw m.arg;return"break"===m.type||"continue"===m.type?this.next=m.arg:"return"===m.type?(this.rval=this.arg=m.arg,this.method="return",this.next="end"):"normal"===m.type&&h&&(this.next=h),D},finish:function(m){for(var h=this.tryEntries.length-1;h>=0;--h){var f=this.tryEntries[h];if(f.finallyLoc===m)return this.complete(f.completion,f.afterLoc),te(f),D}},catch:function(m){for(var h=this.tryEntries.length-1;h>=0;--h){var f=this.tryEntries[h];if(f.tryLoc===m){var _=f.completion;if("throw"===_.type){var w=_.arg;te(f)}return w}}throw new Error("illegal catch attempt")},delegateYield:function(m,h,f){return this.delegate={iterator:C(m),resultName:h,nextLoc:f},"next"===this.method&&(this.arg=o),D}},n}(e.exports);try{regeneratorRuntime=t}catch(n){Function("r","regeneratorRuntime = r")(t)}},1731:()=>{Smart.Utilities.Assign("DragDrop",class{constructor(e){const t=this;t.ownerElement=e,t._dragDetails=null,t._items=null,t._showFeedback=!0}capture(e,t){this._dragDetails={element:e.element||e,item:e,x:t.pageX,y:t.pageY}}get isDragging(){return null!==this.feedback}get items(){return this._items}set items(e){this._items=e}get showFeedback(){return this._showFeedback}set showFeedback(e){this._showFeedback=e}findTarget(e){const t=this,n=t.ownerElement.rightToLeft;let a=null;if(!t._itemCoordinates)return null;for(let i=0;i<t._itemCoordinates.coordinates.length;i++)for(let o=0;o<t._itemCoordinates.coordinates[i].length;o++){const r=t._itemCoordinates.coordinates[i][o];if(t._items[o]&&(t._items[o].classList.contains("smart-visibility-hidden")||t._items[o].classList.contains("smart-hidden"))||t._items[r.index]&&(t._items[r.index].classList.contains("smart-visibility-hidden")||t._items[r.index].classList.contains("smart-hidden")))continue;const l=r.rect;if(l.top<=e.clientY&&l.left<=e.clientX&&(a=t._items[r.index],n))break}return a}createFeedback(e){const t=this,n=t.dragDetails;let a;if(t.showFeedback)return n?n.feedback?n.feedback:Math.abs(n.x-e.pageX)>5||Math.abs(n.y-e.pageY)>5?(a=document.createElement("div"),a.className="smart-breadcrumb-feedback",a.style.height=t.dragDetails.element.offsetHeight+"px",a.innerHTML=t.dragDetails.element.innerHTML,document.body.appendChild(a),n.feedback=a,n.element.classList.add("dragged"),t.getItemCoordinates(t.items),t.ownerElement.$.fireEvent("dragStart",{item:n.item,element:n.element,target:n.item,originalEvent:e.originalEvent}),t.ownerElement.rightToLeft?a.setAttribute("right-to-left",!0):a.removeAttribute("right-to-left"),a):null:null}get feedback(){const e=this;return e.dragDetails&&e.dragDetails.feedback?e.dragDetails.feedback:null}removeFeedback(e){const t=this,n=t.dragDetails;if(t.showFeedback){if(n)if(n.feedback&&document.body.removeChild(n.feedback),t.ownerElement.allowDrop){if("Escape"===e.key)return t.ownerElement.$.fireEvent("dragCancel",{item:n.item,element:n.element,originalEvent:e.originalEvent}),void t.removeCapture();t.ownerElement.$.fireEvent("dragEnd",{item:n.item,element:n.element,target:n.target,droppedBeforeTarget:n.before,originalEvent:e.originalEvent}),t.removeCapture()}else t.removeCapture()}else t.removeCapture()}removeCapture(){const e=this,t=e.dragDetails;t&&(e.clearItemDragClass(),t.element.classList.remove("dragged"),e._dragDetails=null)}moveFeedback(e,t){const n=this,a=n.dragDetails;if(!n.showFeedback||!a)return;const i=n.dragDetails.feedback;i&&(i.style.left=e+"px",i.style.top=t+"px"),delete a.target}drag(e){const t=this;if(!t.dragDetails)return;t.createFeedback(e),t.moveFeedback(e.pageX+5,e.pageY+5);const n=t.findTarget(e);if(n){let a=n.element?n.element:n;if(a)return void t.applyItemDragClass(a,a.getBoundingClientRect(),e)}else t.ownerElement.$.fireEvent("dragging",{item:t.dragDetails.item,element:t.dragDetails.element,target:null,originalEvent:e.pageX?e:e.originalEvent}),t.clearItemDragClass()}error(){const e=this;e.dragDetails&&e.dragDetails.feedback&&e.dragDetails.feedback.classList.add("error")}data(){const e=this;e.dragDetails&&e.dragDetails.feedback&&e.dragDetails.feedback.classList.add("data")}success(){const e=this;e.dragDetails&&e.dragDetails.feedback&&(e.dragDetails.feedback.classList.remove("error"),e.dragDetails.feedback.classList.remove("data"))}applyItemDragClass(e,t,n){const a=this,i=a._dragDetails;let o,r,l;a.clearItemDragClass(),i.target=e,i&&a.showFeedback&&i.feedback&&(i.feedback.classList.remove("error"),i.before=!1),a._minimized?(o=n.clientY,r="top",l="height"):(o=n.clientX,r="left",l="width");const s=e[(a.ownerElement.rightToLeft?"previous":"next")+"ElementSibling"];o<=t[r]+t[l]/2?(e.classList.add("target"),i&&(i.before=!0)):s?s.classList.add("target"):e.classList.add("afterTarget"),i&&(a.ownerElement.rightToLeft&&(i.before=!i.before),a.ownerElement.$.fireEvent("dragging",{item:i.item,element:i.element,target:e,originalEvent:n.originalEvent}))}clearItemDragClass(){const e=this;e.items&&e.items.forEach(t=>{const n=t instanceof HTMLElement?t:t.element;n.classList.remove("target"),n.classList.remove("afterTarget")}),e.ownerElement._addNewItemButton&&e.ownerElement._addNewItemButton.classList.remove("target")}getItemCoordinates(e){if(!e)return{coordinate:[],rows:[]};const t=e.map(r=>r.nodeName?r:r.element),n=[[]],a=[];let i=t[0].offsetTop,o=0;n[0].push({index:0,rect:t[0].getBoundingClientRect()}),a[0]={top:n[0][0].rect.top,bottom:n[0][0].rect.bottom};for(let r=1;r<t.length;r++){const l=t[r].getBoundingClientRect(),s=t[r].offsetTop;s>i&&(i=s,o++,n[o]=[],a[o]={top:l.top,bottom:l.bottom}),n[o].push({index:r,rect:l})}this._itemCoordinates={coordinates:n,rows:a}}get dragDetails(){return this._dragDetails}}),Smart("smart-breadcrumb",class extends Smart.BaseElement{static get properties(){return{addNewItem:{value:!1,type:"boolean"},allowDrag:{value:!1,type:"boolean"},allowDrop:{value:!1,type:"boolean"},closeButtons:{value:!1,type:"boolean"},dataSource:{value:[],type:"array",reflectToAttribute:!1},itemTemplate:{value:null,type:"any"},minimizeWidth:{value:150,type:"number?"},placeholder:{value:"",type:"string"}}}static get listeners(){return{move:"_moveHandler",resize:"_resizeHandler","container.click":"_containerClickHandler","container.down":"_containerDownHandler","container.transitionend":"_containerTransitionendHandler","hamburgerIcon.click":"_hamburgerIconClickHandler","document.move":"_documentMoveHandler","document.keyup":"_documentKeyUpHandler","document.up":"_documentUpHandler"}}static get styleUrls(){return["smart.breadcrumb.css"]}template(){return'<div id="container" role="presentation">\n                    <div id="minimizedHeader" class="smart-header smart-minimized-header smart-hidden" role="presentation">\n                        <div id="hamburgerIcon" class="smart-hamburger-icon" role="button" aria-label="Toggle" aria-haspopup="dialog" aria-expanded="false">\n                            <div id="hamburgerIconLineTop" class="smart-hamburger-icon-line smart-hamburger-icon-line-top" role="presentation"></div>\n                            <div id="hamburgerIconLineCenter" class="smart-hamburger-icon-line smart-hamburger-icon-line-center" role="presentation"></div>\n                            <div id="hamburgerIconLineBottom" class="smart-hamburger-icon-line smart-hamburger-icon-line-bottom" role="presentation"></div>\n                        </div>\n                    </div>\n                    <template>\n                        <div class="smart-breadcrumb-items" *items={{dataSource}} role="list">\n                            <div class="smart-breadcrumb-item" role="listitem" aria-label={{item.label}}>\n                                <div class="smart-breadcrumb-item-label" inner-H-T-M-L={{item.label}} role="presentation"></div>\n                                <div class="smart-close-button" role="button" aria-label="Close"></div>\n                            </div>\n                        </div>\n                    </template>\n                    <div id="placeholder" class="smart-breadcrumb-placeholder smart-hidden" inner-H-T-M-L={{placeholder}}></div>\n                </div>'}propertyChangedHandler(e,t,n){super.propertyChangedHandler(e,t,n);const a=this;switch(e){case"addNewItem":n?a._appendNewItemButton():(a.$.templateContainer.firstElementChild.removeChild(a._addNewItemButton),delete a._addNewItemButton),a._setIndentation();break;case"animation":case"disabled":case"unfocusable":a.addNewItem&&(a._addNewItemButton[e]=n),"disabled"===e&&a._minimizedDropDownOpened&&a._hamburgerIconClickHandler();break;case"itemTemplate":for(let i=0;i<a._items.length;i++)a._items[i].firstElementChild.innerHTML=a.dataSource[i].label;n&&a._applyTemplate();break;case"minimizeWidth":null!==n&&a.offsetWidth<=n?a.minimize():a.maximize();break;case"closeButtons":a._minimized||a._setIndentation()}}ready(){super.ready();const e=this;e.setAttribute("role","navigation"),e.$.container.children[1].setAttribute("id",e.id+"TemplateContainer"),e.$.container.children[1].setAttribute("role","presentation"),e.$.hamburgerIcon.setAttribute("aria-controls",e.id+"TemplateContainer"),e._edgeMacFF=Smart.Utilities.Core.Browser.Edge||Smart.Utilities.Core.Browser.Firefox&&-1!==navigator.platform.toLowerCase().indexOf("mac"),e.templateContainer=e.$.container.children[1],e._dragDrop=new Smart.Utilities.DragDrop(e),null!==e.minimizeWidth&&e.offsetWidth<=e.minimizeWidth&&e.minimize()}templateAttached(){this._handleDataSourceRefresh()}addItem(e){const t=this.dataSource.slice(0);!e||"object"!=typeof e||isNaN(e.index)||e.index<0||(t.splice(e.index,0,{label:e.label,value:e.value}),this.dataSource=t)}maximize(){const e=this;e._minimized&&(e.$minimizedHeader.addClass("smart-hidden"),e.templateContainer.classList.remove("smart-visibility-hidden"),e._edgeMacFF&&e.templateContainer.classList.remove("not-in-view"),e.$hamburgerIcon.removeClass("smart-close-button"),e.removeAttribute("minimized"),e.$.container.children[1].setAttribute("role","presentation"),e._minimizedDropDownOpened=!1,e._minimized=!1,e.$.fireEvent("maximize"),e._setIndentation())}minimize(){const e=this;if(e._minimized||0===e.offsetWidth||0===e.offsetHeight)return;const t=e.animation,n=e.hasAnimation;n&&(e.animation="none"),e.$minimizedHeader.removeClass("smart-hidden"),e.templateContainer.classList.add("smart-visibility-hidden"),e._edgeMacFF&&e.templateContainer.classList.add("not-in-view"),n&&setTimeout(function(){e.animation=t},0),e.setAttribute("minimized",""),e.$.container.children[1].setAttribute("role","dialog"),e._minimized=!0,e.$.fireEvent("minimize"),e._setIndentation()}removeItem(e){const t=this,n=t._items.indexOf(e),a=t.dataSource.slice(0);-1!==n&&(a.splice(n,1),t.dataSource=a)}_moveHandler(e){"touchmove"===e.originalEvent.type&&e.originalEvent.preventDefault()}_resizeHandler(){this.refresh()}refresh(){const e=this;null!==e.minimizeWidth&&e.offsetWidth<=e.minimizeWidth?e.minimize():e._minimized?e.maximize():e._setIndentation()}_containerClickHandler(e){const t=this;if(t.disabled||!t.templateContainer.contains(e.target))return;const n=e.target.closest(".smart-close-button");if(!n){const o=e.target.closest(".smart-breadcrumb-item"),r=t.dataSource[t._items.indexOf(o)];return void t.$.fireEvent("itemClick",{item:r,element:o})}const a=n.closest(".smart-breadcrumb-item"),i=t.dataSource[t._items.indexOf(a)];if(!t.$.fireEvent("closing",{item:i,element:a}).defaultPrevented){const o=t.dataSource.slice(0);o.splice(t._items.indexOf(a),1),t.dataSource=o,t.$.fireEvent("close",{item:i,element:a})}}_containerDownHandler(e){const t=this,n=e.originalEvent.target;if(!t.allowDrag||t.disabled||n.classList.contains("smart-close-button"))return;const a=n.closest(".smart-breadcrumb-item");a&&(t._dragDrop.items=t._items,t._dragDrop.capture(a,e))}_containerTransitionendHandler(e){const t=this;t._edgeMacFF&&e.target===t.templateContainer&&!t._minimizedDropDownOpened&&t.hasAnimation&&t.templateContainer.classList.add("not-in-view")}_hamburgerIconClickHandler(){const e=this;e._minimizedDropDownOpened?(e.$hamburgerIcon.removeClass("smart-close-button"),e.templateContainer.classList.add("smart-visibility-hidden"),e.$.hamburgerIcon.setAttribute("aria-expanded",!1),e._minimizedDropDownOpened=!1):(e.$hamburgerIcon.addClass("smart-close-button"),e._edgeMacFF&&e.templateContainer.classList.remove("not-in-view"),e.templateContainer.classList.remove("smart-visibility-hidden"),e.$.hamburgerIcon.setAttribute("aria-expanded",!0),e._minimizedDropDownOpened=!0)}_documentKeyUpHandler(e){const t=this;t.contains(t.getRootNode().activeElement)&&"Escape"===e.key&&t.dragDrop.removeFeedback(e)}_documentMoveHandler(e){this._dragDrop.dragDetails&&(e.originalEvent.preventDefault(),this._dragDrop.drag(e))}_documentUpHandler(e){const t=this,n=t._dragDrop.dragDetails;if(n)if(n.feedback){if(n.item===n.target)return void t._dragDrop.removeFeedback(e);const a=t._items.slice(0),i=a.indexOf(n.item),o=t.dataSource.slice(0),r=o.splice(i,1);a.splice(i,1);const l=a.indexOf(n.target)+(n.before?0:1);i!==l&&i>=0&&(o.splice(l,0,r[0]),t.dataSource=o),t._dragDrop.removeFeedback(e)}else t._dragDrop.removeCapture()}_handleDataSourceRefresh(){const e=this;e._items=Array.from(e.$.templateContainer.firstElementChild.children),e._items.forEach((t,n)=>{t.data=e.dataSource[n]}),e.addNewItem&&e._appendNewItemButton(),e._applyTemplate(),e._setIndentation(),0===e._items.length?e.$.placeholder.classList.remove("smart-hidden"):e.$.placeholder.classList.add("smart-hidden")}_appendNewItemButton(){const e=this,t=document.createElement("smart-button");t.innerHTML="+",t.animation=e.animation,t.disabled=e.disabled,t.unfocusable=e.unfocusable,t.setAttribute("aria-label","Add"),t.addEventListener("click",function(){e.$.fireEvent("addNewItem")}),e.$.templateContainer.firstElementChild.appendChild(t),e._addNewItemButton=t}_setIndentation(){const e=this,t=e._items.slice(0);if(e._addNewItemButton&&t.push(e._addNewItemButton),0===t.length)return;let n=t[0].offsetTop,a=0;if(t.forEach(function(i){i.style.marginLeft=i.style.marginRight=null}),!e._minimized)for(let i=1;i<t.length;i++){const o=t[i],r=t[i].offsetTop;r>n&&(n=r,a++,o.style["margin"+(e.rightToLeft?"Right":"Left")]=10*a+"px")}}_applyTemplate(){const e=this,t=e.itemTemplate;if(null===t)return;let n;if(n=t instanceof HTMLTemplateElement?t:document.getElementById(t),null!==n&&n instanceof HTMLTemplateElement){const a=document.importNode(n.content,!0),i=document.createElement("div");i.appendChild(a);const o=i.innerHTML;for(let r=0;r<e._items.length;r++){const l=e.dataSource,c=l[r].value;e._items[r].firstElementChild.innerHTML=o.replace(/{{label}}/g,l[r].label).replace(/{{value}}/g,c)}}}})},2612:()=>{Smart("smart-button",class extends Smart.ContentElement{static get properties(){return{value:{type:"string"},name:{type:"string"},type:{value:"button",type:"string"},clickMode:{allowedValues:["hover","press","release","pressAndRelease"],type:"string",value:"release"}}}static get styleUrls(){return["smart.button.css"]}template(){return"<button class=\"smart-button smart-unselectable\" inner-h-t-m-l='[[innerHTML]]' id='button' type='[[type]]' name='[[name]]' value='[[value]]' disabled='[[disabled]]' role=\"presentation\"></button>"}refresh(){}static get listeners(){return{"button.down":"_downHandler","button.mouseenter":"_mouseEnterHandler","button.mouseleave":"_mouseLeaveHandler","button.touchend":"_touchEndHandler","button.click":"_clickHandler","button.up":"_upHandler",up:"_upHandler","button.focus":"_focusHandler","button.blur":"_blurHandler"}}focus(){const e=this;e.$.button?e.$.button.focus():HTMLElement.prototype.focus.call(e)}blur(){const e=this;e.$.button?e.$.button.blur():HTMLElement.prototype.blur.call(e)}_upHandler(e){const t=this;if(e.stopPropagation(),t.$.setAttributeValue("active",!1),t.dataset.target){const n=document.querySelector(t.dataset.target);let a=t.dataset.toggle;if(n&&"Smart-WINDOW"===n.nodeName&&"modal"===a&&(a="openModal"),"tab"===a||"pill"===a||"list"===a){const i=this.closest(".nav, .list-group"),o='[data-toggle="tab"], [data-toggle="pill"], [data-toggle="list"]',r=!i||"UL"!==i.nodeName&&"OL"!==i.nodeName?i.children(".active"):i.querySelectorAll("li > .active");if(i){const l=i.querySelectorAll(o);for(let c=0;c<l.length;c++)l[c].classList.remove("primary");for(let c=0;c<r.length;c++)r[c].classList.remove("active");let s=t.parentNode;for(;s;){if("LI"===s.nodeName){s.classList.add("active");break}s=s.parentNode}t.classList.add("primary")}return n.parentNode.querySelectorAll(".active").forEach(l=>{l.classList.remove("active"),l.classList.add("smart-hidden")}),n.classList.add("active"),void n.classList.remove("smart-hidden")}a&&n&&n[a]&&(setTimeout(()=>{n[a]()},50),e.originalEvent.preventDefault())}}_focusHandler(){this.$.setAttributeValue("focus",!0),this.$.fireEvent("focus")}_blurHandler(){this.$.setAttributeValue("focus",!1),this.$.fireEvent("blur")}_clickHandler(e){const t=this;("release"!==t.clickMode&&"pressAndRelease"!==t.clickMode||t.readonly)&&(e.preventDefault(),e.stopPropagation())}_downHandler(e){const t=this;if(!(t.disabled||(t.hasRippleAnimation&&Smart.Utilities.Animation.Ripple.animate(t,e.pageX,e.pageY),t.$.setAttributeValue("active",!0),"press"!==t.clickMode&&"pressAndRelease"!==t.clickMode||t.readonly))){if(t.hasAttribute("smart-blazor"))return void t.$.dispatchEvent(new Event("click"));t.$.fireEvent("click",{buttons:"buttons"in e?e.buttons:e.which,clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY,screenX:e.screenX,screenY:e.screenY})}}_mouseEnterHandler(e){const t=this;if(!t.readonly&&(t.$button.setAttributeValue("hover",!0),t.$.setAttributeValue("hover",!0),"hover"===t.clickMode)){const n="buttons"in e?e.buttons:e.which;if(t.hasAttribute("smart-blazor"))return void t.$.dispatchEvent(new Event("click"));t.$.fireEvent("click",{buttons:n,clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY,screenX:e.screenX,screenY:e.screenY})}}_touchEndHandler(){const e=this;setTimeout(function(){e.$button.setAttributeValue("hover",!1),e.$.setAttributeValue("hover",!1)},300)}_mouseLeaveHandler(){this.$button.setAttributeValue("hover",!1),this.$.setAttributeValue("hover",!1)}propertyChangedHandler(e,t,n){super.propertyChangedHandler(e,t,n);const a=this;"disabled"===e?(a._setFocusable(),a.$button&&a.$button.setAttributeValue("hover",!1),a.$.setAttributeValue("hover",!1),a instanceof Smart.RepeatButton&&a._stopRepeat()):"unfocusable"===e&&a._setFocusable()}_setFocusable(){const e=this,t=e.$.button?e.$.button:e;if(e.disabled||e.unfocusable)return t.removeAttribute("tabindex"),void(t.tabIndex=-1);t.tabIndex=e.tabIndex>0?e.tabIndex:0}ready(){const e=this;super.ready(),e.setAttribute("role","button"),e._setFocusable(),e.enableShadowDOM&&e.$.hiddenInput&&e.appendChild(e.$.hiddenInput)}}),Smart("smart-repeat-button",class extends Smart.Button{static get properties(){return{delay:{value:50,type:"number"},initialDelay:{value:150,type:"number"}}}static get listeners(){return{"button.down":"_startRepeat","button.mouseenter":"_overriddenHandler","button.mouseleave":"_overriddenHandler","button.pointerenter":"_updateInBoundsFlag","button.pointerleave":"_updateInBoundsFlag","button.touchmove":"_touchmoveHandler","document.up":"_stopRepeat"}}_clickHandler(e){const t=this;("release"!==t.clickMode||t.preventDefaultClick||t.readonly||t.disabled)&&(e.preventDefault(),e.stopPropagation(),t.preventDefaultClick=!1)}_updateInBoundsFlag(e){const t=this;-1!==e.type.indexOf("leave")?(t._isPointerInBounds=!1,t.$button.setAttributeValue("hover",!1),t.$.setAttributeValue("hover",!1)):(t._isPointerInBounds=!0,t.$button.setAttributeValue("hover",!0),t.$.setAttributeValue("hover",!0)),1!==("buttons"in e?e.buttons:e.which)&&t._stopRepeat(e)}_startRepeat(e){const t=this;t.setAttribute("active",""),t._initialTimer||t.readonly||(t._initialTimer=setTimeout(function(){t._repeatTimer=setInterval(()=>{if(t._isPointerInBounds){if(t.hasAttribute("smart-blazor"))return t.$.dispatchEvent(new Event("click")),void(t.preventDefaultClick=!0);t.$.fireEvent("click",{buttons:"buttons"in e?e.buttons:e.which,clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY,screenX:e.screenX,screenY:e.screenY}),t.preventDefaultClick=!0}},t.delay)},t.initialDelay))}_stopRepeat(e){const t=this;t.readonly||e&&("pointercancel"===e.type||e.originalEvent&&"pointercancel"===e.originalEvent.type)||(t.$.setAttributeValue("active",!1),t._repeatTimer&&(clearInterval(t._repeatTimer),t._repeatTimer=null),t._initialTimer&&(clearTimeout(t._initialTimer),t._initialTimer=null))}_touchmoveHandler(e){this.preventDefaultClick&&e.cancelable&&(e.preventDefault(),e.stopPropagation())}_overriddenHandler(){}}),Smart("smart-toggle-button",class extends Smart.Button{static get properties(){return{checked:{value:!1,type:"boolean?"},falseContent:{value:"",reflectToAttribute:!1,type:"string"},indeterminateContent:{value:"",reflectToAttribute:!1,type:"string"},indeterminate:{value:!1,type:"boolean"},trueContent:{value:"",reflectToAttribute:!1,type:"string"},indeterminateTemplate:{value:null,type:"any"},trueTemplate:{value:null,type:"any"},falseTemplate:{value:null,type:"any"},type:{value:"toggle",type:"string",defaultReflectToAttribute:!0,readonly:!0}}}static get listeners(){return{keydown:"_keyHandler",keyup:"_keyHandler",dragstart:"_dragStartHandler","button.click":"_buttonClickHandler","button.mouseenter":"_buttonMouseEnterHandler","button.mouseleave":"_buttonMouseLeaveHandler","document.up":"_documentUpHandler"}}ready(){super.ready(),this._setAriaState()}_setAriaState(){const t=this.checked;this.setAttribute("aria-pressed",null!==t?t:"mixed")}_buttonClickHandler(){}_buttonMouseLeaveHandler(){this.removeAttribute("hover")}_buttonMouseEnterHandler(){const e=this;e.setAttribute("hover",""),e.disabled||e.readonly||"hover"!==e.clickMode||(e._changeCheckState("pointer"),e.focus(),e._updateHidenInputNameAndValue())}_documentUpHandler(e){const t=this;t._pressed&&(t._pressed=!1,t.disabled||t.readonly||"press"===t.clickMode||"pointercancel"===e.originalEvent.type||(t._changeCheckState("pointer"),t.focus(),t._updateHidenInputNameAndValue()))}_downHandler(e){const t=this;t.disabled||t.readonly||(t.hasRippleAnimation&&Smart.Utilities.Animation.Ripple.animate(t,e.pageX,e.pageY),t._pressed=!0,"press"!==t.clickMode&&"pressAndRelease"!==t.clickMode||(t._changeCheckState("pointer"),t.hasAttribute("smart-blazor")?t.$.dispatchEvent(new Event("click")):t.$.fireEvent("click"),t._updateHidenInputNameAndValue()),"press"===t.clickMode&&(e.preventDefault(),e.stopPropagation()))}_dragStartHandler(e){e.preventDefault()}_keyHandler(e){const t=this;if(!0!==t.disabled&&!t.readonly&&32===e.keyCode){if("keydown"===e.type)return void e.preventDefault();if("none"===t.switchMode)return;t._changeCheckState("keyboard"),t._updateHidenInputNameAndValue()}}_changeCheckState(e){const t=this;let n=null;null===t.checked?t.checked=!0:(n=t.checked,t.checked=!t.checked),t._handleTextSelection(),t.$.fireEvent("change",{value:t.checked,oldValue:n,changeType:e}),t.$.fireEvent(t.checked?"checkValue":"uncheckValue",{changeType:e}),t._setAriaState()}_handleTextSelection(){const e=this;e.$.addClass("smart-unselectable"),e.timer&&clearTimeout(e.timer),e.timer=setTimeout(()=>e.$.removeClass("smart-unselectable"),500)}propertyChangedHandler(e,t,n){super.propertyChangedHandler(e,t,n);const a=this;if("checked"===e)return a.$.fireEvent("change",{value:n,oldValue:t,changeType:"api"}),void a._setAriaState();switch(e){case"trueTemplate":a._handleTemplate(!0);break;case"falseTemplate":a._handleTemplate(!1);break;case"indeterminateTemplate":a._handleTemplate()}}_htmlBindOnInitialization(){const e=this;e._bindContentProperty("trueContent","smart-true-content"),e._bindContentProperty("falseContent","smart-false-content"),e._bindContentProperty("indeterminateContent","smart-indeterminate-content")}_bindContentProperty(e,t){const n=this;if(!n.$[e+"Container"])return;let a=document.createElement("div");a.innerHTML=n.innerHTML;let i,o=a.getElementsByClassName(t);if(o.length>0)for(let r=0;r<o.length;r++)i=o[r];""===n[e]&&(n[e]=void 0===i?"":i.outerHTML),n.$[e+"Container"].innerHTML=n[e]}_updateContentProperties(){const e=this;function t(n){e.$[n+"Container"]&&(e[n]=e.$[n+"Container"].innerHTML)}t("trueContent"),t("falseContent"),t("indeterminateContent")}_updateHidenInputValue(){const e=this;if(!e.$.hiddenInput)return;let t;t=null===e.checked?"null":!1===e.checked?"off":e.value||"on",e.$.hiddenInput.setAttribute("value",t)}_updateHidenInputName(){const e=this;e.$.hiddenInput&&e.$.hiddenInput.setAttribute("name",!1===e.checked?"":e.name||"")}_updateHidenInputNameAndValue(){this._updateHidenInputName(),this._updateHidenInputValue()}_handleTemplate(e,t){const n=this;let a,i,o;if(!0===e?(a=n.trueTemplate,i=n.$.trueContentContainer,o=n.trueContent):!1===e?(a=n.falseTemplate,i=n.$.falseContentContainer,o=n.falseContent):(a=n.indeterminateTemplate,i=n.$.indeterminateContentContainer,o=n.indeterminateContent),t&&(i.innerHTML=o||""),null===a||!a)return;if("function"==typeof a)return void a(i,{value:o});if(!("content"in document.createElement("template")))return void n.error(n.localize("htmlTemplateNotSuported",{elementType:n.nodeName.toLowerCase()}));if(a=document.getElementById(a),null===a||!("content"in a))return void n.error(n.localize("invalidTemplate",{elementType:n.nodeName.toLowerCase(),property:"template"}));const r=a.content,l=r.childNodes.length,s=/{{\w+}}/g;let c,u=[];for(let y=0;y<l;y++)for(c=s.exec(r.childNodes[y].innerHTML);c;)u.push({childNodeIndex:y,bindingString:c[0]}),c=s.exec(r.childNodes[y].innerHTML);const p=u.length;let g,b,v=document.importNode(a.content,!0);for(let y=0;y<p;y++){g=v.childNodes[u[y].childNodeIndex],b=u.length;for(let x=0;x<b;x++)g.innerHTML=g.innerHTML.replace(u[y].bindingString,o)}i.innerHTML="";for(let y=0;y<v.childNodes.length;y++)v.childNodes[y].outerHTML&&(i.innerHTML+=v.childNodes[y].outerHTML)}})},5810:()=>{Smart("smart-calendar",class extends Smart.BaseElement{static get properties(){return{animationSettings:{value:null,type:"object"},calendarMode:{value:"default",allowedValues:["default","classic"],type:"string"},dayNameFormat:{value:"firstTwoLetters",allowedValues:["narrow","firstTwoLetters","long","short"],type:"string"},dateFormatFunction:{value:null,type:"function"},disableAutoNavigation:{value:!1,type:"boolean"},displayMode:{value:"month",allowedValues:["month","year","decade"],type:"string"},displayModeView:{value:"table",allowedValues:["table","list"],type:"string"},dropDownHeight:{value:"200",type:"string"},dropDownWidth:{value:"",type:"string"},firstDayOfWeek:{value:0,type:"number",defaultValue:0,validator:"_firstDayOfWeekValidator"},footerTemplate:{value:null,type:"any"},headerTemplate:{value:null,type:"any"},hideDayNames:{value:!1,type:"boolean"},hideOtherMonthDays:{value:!1,type:"boolean"},hideTooltipArrow:{value:!1,type:"boolean"},importantDates:{value:[],type:"array",defaultValue:[]},importantDatesTemplate:{value:null,type:"any"},max:{value:new Date(2100,1,1),type:"any",defaultValue:new Date(2100,1,1)},min:{value:new Date(1900,1,1),type:"any",defaultValue:new Date(1900,1,1)},months:{value:1,type:"number",defaultValue:1,validator:"_monthsValidator"},monthNameFormat:{value:"long",allowedValues:["narrow","firstTwoLetters","long","short","2-digit","numeric"],type:"string"},name:{value:"",type:"string"},restrictedDates:{value:[],type:"array",defaultValue:[]},scrollButtonsNavigationMode:{value:"landscape",allowedValues:["portrait","landscape"],type:"string"},scrollButtonsPosition:{value:"both",allowedValues:["near","far","both"],type:"string"},selectedDates:{value:[],reflectToAttribute:!1,type:"array"},selectionMode:{value:"default",allowedValues:["none","default","one","oneExtended","many","zeroOrMany","oneOrMany","zeroOrOne","week","range"],type:"string"},spinButtonsDelay:{value:80,type:"number"},spinButtonsInitialDelay:{value:0,type:"number"},titleTemplate:{value:null,type:"any"},tooltip:{value:!1,type:"boolean"},tooltipArrow:{value:!0,type:"boolean"},tooltipArrowDirection:{allowedValues:["bottom","top","left","right","none"],value:"bottom",type:"string"},tooltipDelay:{value:100,type:"number"},tooltipOffset:{value:[],type:"array"},tooltipPosition:{value:"auto",allowedValues:["auto","bottom","top","left","right","absolute"],type:"string"},tooltipTemplate:{value:null,type:"any"},view:{value:"portrait",allowedValues:["landscape","portrait"],type:"string"},viewSections:{value:["header"],type:"array"},weekNumbers:{value:!1,type:"boolean"},weeks:{value:6,type:"number",defaultValue:6,validator:"_weeksValidator"},yearFormat:{value:"numeric",allowedValues:["2-digit","numeric"],type:"string"}}}static get listeners(){return{"container.down":"_downHandler","document.up":"_documentUpHandler","body.move":"_moveHandler","container.wheel":"_containerWheelHandler","body.focus":"_bodyFocusStateHandler","body.blur":"_bodyBlurStateHandler","header.click":"_headerClickHandler","header.change":"_headerChangeHandler",keydown:"_keyDownHandler",keyup:"_keyUpHandler",mouseenter:"_mouseEventsHandler",mouseleave:"_mouseEventsHandler","container.mouseover":"_mouseEventsHandler","container.mouseout":"_mouseEventsHandler","container.open":"_popupEventHandler","container.close":"_popupEventHandler"}}static get methods(){return{select:"select(date=new Date(): date|string): void",clearSelection:"clearSelection(): void",today:"today(): date",navigate:"navigate(step: date|string|int): bool"}}static get styleUrls(){return["smart.calendar.css"]}template(){return'<div id="container" role="presentation">\n                    <div id="title" class="smart-calendar-title" role="heading" aria-level="1">\n                        <div id="yearContainer" class="smart-calendar-year-container" role="button"></div>\n                        <div id="dateContainer" class="smart-calendar-date-container smart-calendar-selected" role="button"></div>\n                    </div>\n                    <div id="calendarContainer" class="smart-calendar-container">\n                        <div id="header" class="smart-calendar-header">\n                            <smart-repeat-button prev-month class="smart-calendar-button" id="previousMonthButton" animation="[[animation]]" initial-delay="[[spinButtonsInitialDelay]]" delay="[[spinButtonsDelay]]" disabled="[[disabled]]" readonly="[[readonly]]" right-to-left="[[rightToLeft]]" aria-label="Previous month">\n                                <span aria-hidden="true"></span>\n                            </smart-repeat-button>\n                            <div id="dateElement" class="smart-calendar-date-element" role="presentation">\n                                <div id="defaultHeaderDate" role="button"></div>\n                                <div id="classicHeaderDate">\n                                    <div id="monthElement" class="smart-calendar-month-element" disabled="[[disabled]]" role="presentation">\n                                    </div>\n                                    <input class="smart-calendar-year-element" id="yearElement" disabled="[[disabled]]" readonly="[[readonly]]" aria-label="Year" />\n                                    <span class="smart-calendar-year-elements">\n                                        <smart-repeat-button next-year class="smart-calendar-button" id="nextYearButton" animation="[[animation]]" initial-delay="[[spinButtonsInitialDelay]]" delay="[[spinButtonsDelay]]" disabled="[[disabled]]" readonly="[[readonly]]" right-to-left="[[rightToLeft]]" aria-label="Next year">\n                                            <span aria-hidden="true"></span>\n                                        </smart-repeat-button>\n                                        <smart-repeat-button prev-year class="smart-calendar-button" id="previousYearButton" animation="[[animation]]" initial-delay="[[spinButtonsInitialDelay]]" delay="[[spinButtonsDelay]]" disabled="[[disabled]]" readonly="[[readonly]]" right-to-left="[[rightToLeft]]" aria-label="Previous year">\n                                            <span aria-hidden="true"></span>\n                                        </smart-repeat-button>\n                                    </span>\n                                </div>\n                            </div>\n                            <smart-repeat-button next-month class="smart-calendar-button" id="nextMonthButton" animation="[[animation]]" initial-delay="[[spinButtonsInitialDelay]]" delay="[[spinButtonsDelay]]" disabled="[[disabled]]" readonly="[[readonly]]" right-to-left="[[rightToLeft]]" aria-label="Next month">\n                                <span aria-hidden="true"></span>\n                            </smart-repeat-button>\n                        </div>\n                        <div id="body" class="smart-content smart-calendar-body" role="presentation">\n                            <div id="monthsContainer" class="smart-calendar-months-container" role="presentation">\n                              <div id="month" class="smart-calendar-month" role="grid">\n                                   <div id="monthName" class="smart-calendar-month-name"></div>\n                                   <div id="weekTitles" class="smart-calendar-week-titles" role="row">\n                                       <div class="smart-calendar-week-title" role="columnheader"></div>\n                                       <div class="smart-calendar-week-title" role="columnheader"></div>\n                                       <div class="smart-calendar-week-title" role="columnheader"></div>\n                                       <div class="smart-calendar-week-title" role="columnheader"></div>\n                                       <div class="smart-calendar-week-title" role="columnheader"></div>\n                                       <div class="smart-calendar-week-title" role="columnheader"></div>\n                                       <div class="smart-calendar-week-title" role="columnheader"></div>\n                                       <div class="smart-calendar-week-title" role="columnheader"></div>\n                                   </div>\n                                   <div id="weeks" class="smart-calendar-weeks" role="rowgroup">\n                                        <div class="smart-calendar-week" role="row">\n                                           <div class="smart-calendar-week-number" role="rowheader"></div>\n                                           <div class="smart-calendar-cell" role="gridcell"></div>\n                                           <div class="smart-calendar-cell" role="gridcell"></div>\n                                           <div class="smart-calendar-cell" role="gridcell"></div>\n                                           <div class="smart-calendar-cell" role="gridcell"></div>\n                                           <div class="smart-calendar-cell" role="gridcell"></div>\n                                           <div class="smart-calendar-cell" role="gridcell"></div>\n                                           <div class="smart-calendar-cell" role="gridcell"> </div>\n                                        </div>\n                                        <div class="smart-calendar-week" role="row">\n                                           <div class="smart-calendar-week-number" role="rowheader"></div>\n                                           <div class="smart-calendar-cell" role="gridcell"></div>\n                                           <div class="smart-calendar-cell" role="gridcell"></div>\n                                           <div class="smart-calendar-cell" role="gridcell"></div>\n                                           <div class="smart-calendar-cell" role="gridcell"></div>\n                                           <div class="smart-calendar-cell" role="gridcell"> </div>\n                                           <div class="smart-calendar-cell" role="gridcell"> </div>\n                                           <div class="smart-calendar-cell" role="gridcell"> </div>\n                                       </div>\n                                       <div class="smart-calendar-week" role="row">\n                                           <div class="smart-calendar-week-number" role="rowheader"></div>\n                                           <div class="smart-calendar-cell" role="gridcell"></div>\n                                           <div class="smart-calendar-cell" role="gridcell"></div>\n                                           <div class="smart-calendar-cell" role="gridcell"></div>\n                                           <div class="smart-calendar-cell" role="gridcell"></div>\n                                           <div class="smart-calendar-cell" role="gridcell"> </div>\n                                           <div class="smart-calendar-cell" role="gridcell"> </div>\n                                           <div class="smart-calendar-cell" role="gridcell"> </div>\n                                       </div>\n                                       <div class="smart-calendar-week" role="row">\n                                           <div class="smart-calendar-week-number" role="rowheader"></div>\n                                           <div class="smart-calendar-cell" role="gridcell"></div>\n                                           <div class="smart-calendar-cell" role="gridcell"></div>\n                                           <div class="smart-calendar-cell" role="gridcell"></div>\n                                           <div class="smart-calendar-cell" role="gridcell"></div>\n                                           <div class="smart-calendar-cell" role="gridcell"> </div>\n                                           <div class="smart-calendar-cell" role="gridcell"> </div>\n                                           <div class="smart-calendar-cell" role="gridcell"> </div>\n                                       </div>\n                                       <div class="smart-calendar-week" role="row">\n                                           <div class="smart-calendar-week-number" role="rowheader"></div>\n                                           <div class="smart-calendar-cell" role="gridcell"></div>\n                                           <div class="smart-calendar-cell" role="gridcell"></div>\n                                           <div class="smart-calendar-cell" role="gridcell"></div>\n                                           <div class="smart-calendar-cell" role="gridcell"></div>\n                                           <div class="smart-calendar-cell" role="gridcell"> </div>\n                                           <div class="smart-calendar-cell" role="gridcell"> </div>\n                                           <div class="smart-calendar-cell" role="gridcell"> </div>\n                                       </div>\n                                       <div class="smart-calendar-week" role="row">\n                                           <div class="smart-calendar-week-number" role="rowheader"></div>\n                                           <div class="smart-calendar-cell" role="gridcell"></div>\n                                           <div class="smart-calendar-cell" role="gridcell"></div>\n                                           <div class="smart-calendar-cell" role="gridcell"></div>\n                                           <div class="smart-calendar-cell" role="gridcell"></div>\n                                           <div class="smart-calendar-cell" role="gridcell"> </div>\n                                           <div class="smart-calendar-cell" role="gridcell"> </div>\n                                           <div class="smart-calendar-cell" role="gridcell"> </div>\n                                       </div>\n                                   </div>\n                                </div>\n                            </div>\n                            <div id="dateViewContainer" class="smart-calendar-date-view-container smart-hidden">\n                                    <div class="smart-calendar-cell" role="button"></div>\n                                    <div class="smart-calendar-cell" role="button"></div>\n                                    <div class="smart-calendar-cell" role="button"></div>\n                                    <div class="smart-calendar-cell" role="button"></div>\n                                    <div class="smart-calendar-cell" role="button"></div>\n                                    <div class="smart-calendar-cell" role="button"></div>\n                                    <div class="smart-calendar-cell" role="button"></div>\n                                    <div class="smart-calendar-cell" role="button"></div>\n                                    <div class="smart-calendar-cell" role="button"></div>\n                                    <div class="smart-calendar-cell" role="button"></div>\n                                    <div class="smart-calendar-cell" role="button"></div>\n                                    <div class="smart-calendar-cell" role="button"></div>\n                            </div>\n                            <div id="monthsSeparator" class="smart-calendar-month-separator"></div>\n                            <div id="nextMonthsContainer" class="smart-calendar-next-months-container" aria-hidden="true"></div>\n                            <div id="animationPanel" class="smart-calendar-animation-panel smart-hidden"></div>\n                        </div>\n                        <div id="footer" class="smart-calendar-footer smart-hidden">\n                            <div id="selectedDatesRange"></div>\n                        </div>\n                        <input id="hiddenInput" type="hidden" name="[[name]]">\n                    </div>\n                </div>'}propertyChangedHandler(e,t,n){super.propertyChangedHandler(e,t,n);const a=this;switch(e){case"animationSettings":a._applyAnimationSettings();break;case"disabled":case"unfocusable":a._setFocusable();break;case"calendarMode":case"dropDownWidth":case"dropDownHeight":a.displayMode="month",a._refreshHeaderElements(),a._refreshCalendarMode(),a._setDisplayModeContent();break;case"dayNameFormat":a._refreshDayOfWeekTitles(a.$.month);break;case"dateFormatFunction":{let i=a.$.monthsContainer.children;for(let o=0;o<i.length;o++)i[o].firstElementChild.innerHTML=n?n(i[o]._date):a._monthsNames[i[o]._date.getMonth()]+" "+i[o]._date.toLocaleDateString(a.locale,{year:a.yearFormat});a._refreshHeaderTitle();break}case"displayMode":if("classic"===a.calendarMode&&"month"!==n){a[e]="month";break}a._setDisplayMode(t,n);break;case"displayModeView":a._applyAnimationSettings(!0),"month"!==a.displayMode&&a._setDisplayModeContent();break;case"firstDayOfWeek":a._handleMonths(),a._refreshDayOfWeekTitles();break;case"hideTooltipArrow":a.$.tooltip&&(a.$.tooltip.arrow=!n);break;case"titleTemplate":case"headerTemplate":case"footerTemplate":a._handleLayoutTemplate(a.$[e.split(/[T]/)[0]],n),"titleTemplate"===e?a._refreshTitle():"headerTemplate"===e?a._refreshHeaderTitle():a._refreshFooter();break;case"importantDates":a.importantDates=a._getValidDates(n),a._refreshImportantDates();break;case"importantDatesTemplate":a._handleImportantDateTemplate(),a._refreshImportantDates();break;case"locale":a._refreshMonthNames(),a._refreshDayOfWeekTitles(),a._refreshHeaderTitle(),a._refreshTitle(),a._refreshFooter(),a.displayMode&&"month"!==a.displayMode&&a._setDisplayModeContent();break;case"max":case"min":a._validateMinMax(e,n,t),a._validateSelectedDates(),a._noFocusingRequired=!1,a._refreshHeaderElements();break;case"months":a._handleMonths();break;case"monthNameFormat":a._refreshCalendarMode(),a._refreshHeaderTitle();break;case"restrictedDates":a._setRestrictedDates(a.restrictedDates=a._getValidDates(n));break;case"rightToLeft":a._refreshDayOfWeekTitles(),a._handleMonths();break;case"scrollButtonsNavigationMode":a._setScrollButtonsNavigationMode();break;case"selectedDates":if(a._clearSelection(!0),a._validateSelectedDates(a._getValidDates(n)),a._applySelectionMode(!0),a._viewDates){let i=a.selectedDates[a.selectedDates.length-1];a._isDateInView(i)?a.selectedDates.map(o=>a._selectDate(o,!0,!0)):a._handleMonths(i)}a._refreshFooter(),a._setWeeksVisibility(a.$.monthsContainer),a.$.hiddenInput.value=a.selectedDates.toString(),a.isInitialized&&a.$.fireEvent("change",{value:a.selectedDates}),a._refreshTitle(),"month"!==a.displayMode&&a._setDisplayModeContent();break;case"selectionMode":a._applySelectionMode(!1,t),a._refreshTitle();break;case"tooltip":a._handleTooltip();break;case"tooltipArrow":case"tooltipArrowDirection":case"tooltipDelay":case"tooltipOffset":case"tooltipPosition":case"tooltipTemplate":if(a.$.tooltip){const i=e.replace("tooltip","");a.$.tooltip[i.charAt(0).toLowerCase()+i.slice(1)]=n}break;case"view":a._refreshTitle();break;case"viewSections":n.indexOf("title")>-1?a.$title.removeClass("smart-hidden"):a.$title.addClass("smart-hidden"),a._refreshTitle(),n.indexOf("header")>-1?a.$header.removeClass("smart-hidden"):a.$header.addClass("smart-hidden"),a._refreshHeaderTitle(),n.indexOf("footer")>-1?a.$footer.removeClass("smart-hidden"):a.$footer.addClass("smart-hidden"),a._refreshFooter(),a._setFocusable();break;case"weeks":a._setWeeksVisibility(a.$.monthsContainer);break;case"yearFormat":if(a._refreshCalendarMode(),a._refreshFooter(),a.months>1&&"month"===a.displayMode){let i=a._animationStarted?a.$.nextMonthsContainer.children:a.$.monthsContainer.children;for(let o=0;o<i.length;o++)i[o].firstElementChild.innerHTML=a.dateFormatFunction?a.dateFormatFunction(i[o]._date):a._monthsNames[i[o]._date.getMonth()]+" "+i[o]._date.toLocaleDateString(a.locale,{year:n})}a._refreshTitle(),a._refreshHeaderTitle()}}ready(){super.ready();const e=this;e._keysPressed={},e._applyAnimationSettings(),e.importantDates=e._getValidDates(e.importantDates),e.restrictedDates=e._getValidDates(e.restrictedDates)}render(){const e=this;e.setAttribute("role","dialog"),e._refreshMonthNames(),e._validateMinMax(),e._validateSelectedDates(e._getValidDates(e.selectedDates)),e._handleLayoutTemplate(e.$.title,e.titleTemplate),e._handleLayoutTemplate(e.$.header,e.headerTemplate),e._handleLayoutTemplate(e.$.footer,e.footerTemplate),e._handleImportantDateTemplate(),e._setFocusable(),e._refreshDayOfWeekTitles(),e._applySelectionMode(!0),e._handleMonths(0===e.selectedDates.length?new Date((new Date).setHours(0,0,0,0)):e.selectedDates[e.selectedDates.length-1]),e._handleTooltip(),e._updateViewSectionsVisibility(),e._setScrollButtonsNavigationMode(),e._refreshCalendarMode(),e._setDisplayMode(),e._refreshTitle(),e._refreshFooter(),e._refreshImportantDates(),e.$.monthElement&&e.$.monthElement._setDropDownSize&&e.$.monthElement._setDropDownSize(),e._changeEventFired=0,e.$.hiddenInput.value=e.selectedDates.toString(),e.shadowRoot&&e.appendChild(e.$.hiddenInput),e.isInitialized=!0,super.render()}refresh(){this.isInitialized&&this.render()}_updateViewSectionsVisibility(){const e=this;e.viewSections.indexOf("title")>-1?e.$title.removeClass("smart-hidden"):e.$title.addClass("smart-hidden"),e.viewSections.indexOf("header")>-1?e.$header.removeClass("smart-hidden"):e.$header.addClass("smart-hidden"),e.viewSections.indexOf("footer")>-1?e.$footer.removeClass("smart-hidden"):e.$footer.addClass("smart-hidden")}clearSelection(){this._clearSelection()}_setFocusable(){const e=this;let t=e.tabIndex>0?e.tabIndex:0;function n(a,i){if(i)return a&&a instanceof i?("function"==typeof a._setFocusable&&a.isCompleted?a.unfocusable=t<=-1:a.setAttribute("tabindex",t),a):a||void 0}(e.disabled||e.unfocusable)&&(t=-1),e.$.previousMonthButton=n(e.$.previousMonthButton,Smart.Button),e.$.nextMonthButton=n(e.$.nextMonthButton,Smart.Button),e.$.nextYearButton=n(e.$.nextYearButton,Smart.Button),e.$.previousYearButton=n(e.$.previousYearButton,Smart.Button),e.$.monthElement=n(e.$.monthElement,Smart.Input),e.$.yearElement=n(e.$.yearElement,HTMLInputElement),e.viewSections.indexOf("title")>-1&&(e.$.dateContainer.setAttribute("tabindex",t),e.$.yearContainer.setAttribute("tabindex",t)),e.$.body.setAttribute("tabindex",t),"default"===e.calendarMode?e.$.dateElement.setAttribute("tabindex",t):e.$.dateElement.removeAttribute("tabindex"),e.unfocusable?e.removeAttribute("tabindex"):e.tabIndex=e.readonly&&!e.disabled?e.tabIndex>0?e.tabIndex:0:t}static get requires(){return{"Smart.DropDownList":"smart.dropdownlist.js","Smart.ListBox":"smart.listbox.js","Smart.RepeatButton":"smart.button.js","Smart.Tooltip":"smart.tooltip.js"}}navigate(e){const t=this;let n,a,i;if(e){if("number"==typeof e){if(e=parseInt(e),isNaN(e)||0===e)return!1;if(6!==t.weeks&&0!==t.weeks&&"month"===t.displayMode){let o,r;t._focusedCell||t._focusCell();const l=[].slice.call(t._focusedCell.closest(".smart-calendar-weeks").children).filter(s=>!s.classList.contains("smart-hidden"));e<0?(r=l[0].querySelectorAll(".smart-calendar-cell"),o=t.rightToLeft?r[r.length-1]:r[0]):(r=l[l.length-1].querySelectorAll(".smart-calendar-cell"),o=t.rightToLeft?r[0]:r[r.length-1]),a=new Date(o.value),a.setDate(a.getDate()+e),n=a}else n=t._getNextDate(e)}else{if(n=e=t._getValidDate(e),i=!0,isNaN(n.getTime()))return!1;const o=t._viewDates[0];if(o&&n.getMonth()===o.getMonth()&&n.getFullYear()===o.getFullYear())return!1;6!==t.weeks&&0!==t.weeks&&"month"===t.displayMode&&(a=n)}return!(!n||t.$.fireEvent("navigationChanging",{value:new Date(n),type:t.displayMode}).defaultPrevented||("month"!==t.displayMode?(!i&&t.hasAnimation?(t.$nextMonthsContainer.addClass("smart-calendar-date-view-container"),"list"===t.displayModeView?t._setDisplayModeContent(n):t._navigationDate&&t._navigationDate.getTime()===n.getTime()||t._animateNavigation(n,e)):t._setDisplayModeContent(n),t.$.fireEvent("navigationChange",{value:new Date(n),type:t.displayMode}),0):(t.hasAnimation?(t._animateNavigation(n,e),t.$nextMonthsContainer.hasClass("smart-date-view-container")&&t.$nextMonthsContainer.removeClass("smart-date-view-container")):(t._handleMonths(n),t._refreshHeaderElements(),t._refreshHeaderTitle()),a&&(t._focusCell(t._getCellByDate(a,t._animationStarted?t.$.nextMonthsContainer:void 0),!0),t._updateWeeksVisibility(e)),t.$.fireEvent("navigationChange",{value:new Date(n),type:t.displayMode}),0)))}}set value(e){this.select(e)}get value(){return this.selectedDates&&this.selectedDates.length>0?this.selectedDates[0]:null}select(e){const t=this;t._viewDates&&void 0!==t._viewDates[0]&&"none"!==t.selectionMode&&e&&(e=t._getValidDate(e))instanceof Date&&("one"===t.selectionMode&&t.selectedDates.map(Number).indexOf(e.getTime())>-1||e.getTime()<t.min.getTime()||e.getTime()>t.max.getTime()||("one"!==t.selectionMode&&"default"!==t.selectionMode&&"zeroOrOne"!==t.selectionMode||t._clearSelection(!0),t._selectDate(e),1!==t.selectedDates.length||t._isDateInView(t.selectedDates[0])||t._handleMonths(t.selectedDates[0])))}today(){const e=this;let t=new Date;return t.setHours(0,0,0,0),t.getTime()<e.min.getTime()||t.getTime()>e.max.getTime()?t=new Date(e.max):e._selectDate(t),e._handleMonths(t),t}_animateNavigation(e,t,n){const a=this;a._navigationDate=e,a._animationSettings||a._applyAnimationSettings(),a.$animationPanel.addClass("smart-hidden"),a.$.dateViewContainer.style.transform="",a.$.dateViewContainer.style.opacity="",a.$.monthsContainer.style.transform="",a.$.monthsContainer.style.opacity="";const i="month"!==a.displayMode?a.$.dateViewContainer:a.$.monthsContainer,o=a.$.body[a._animationSettings.scrollMax]-a.$.body[a._animationSettings.size];a._scrollStep=a.$.body[a._animationSettings.size]*a._animationSettings.startSpeed,a._animationStarted&&a._getMonthCells(a.$.monthsContainer,a.rightToLeft).map(r=>{a._setCellState(r,"restricted",!1),a._setCellState(r,"selected",!1),a._setCellState(r,"otherMonth",!1),a._setCellState(r,"focus",!1),a._setCellState(r,"important",!1),a._setCellState(r,"today",!1),a._setCellState(r,"disabled",!1),a._setCellState(r,"hover",!1)}),a._animationStarted=!0,"month"!==a.displayMode?(a._setCellState(a._focusedCell,"focus",!1),a._setDisplayModeContent(e,a.$.nextMonthsContainer)):a._handleMonths(e,a.$.nextMonthsContainer),a.rightToLeft&&(t*=-1),n||(t>0?(i.style.order=1,a.$.nextMonthsContainer.style.order=3,(!a._animationStarted||a._animationStarted&&a.$.body[a._animationSettings.scrollSize]>a.$.body[a._animationSettings.scrollMax]*a._animationSettings.resetThreshold*2)&&(a.$.body[a._animationSettings.scrollSize]=0)):(i.style.order=3,a.$.nextMonthsContainer.style.order=1,(!a._animationStarted||a._animationStarted&&a.$.body[a._animationSettings.scrollSize]<a.$.body[a._animationSettings.scrollMax]*a._animationSettings.resetThreshold)&&(a.$.body[a._animationSettings.scrollSize]=a.$.body[a._animationSettings.scrollMax]))),cancelAnimationFrame(a._animationId),a._animationId=requestAnimationFrame(function r(){let s=a._scrollStep/2;(t>0?a.$.body[a._animationSettings.scrollSize]>=o:0===a.$.body[a._animationSettings.scrollSize])?a._animateNavigationCompleted():(t>0&&a.$.body[a._animationSettings.scrollSize]>o*a._animationSettings.easeThreshold?(s=Math.max(a.$.body[a._animationSettings.scrollSize]/a._animationSettings.stepEaseSize,Math.abs(s-(o-a.$.body[a._animationSettings.scrollSize])*a._animationSettings.step)),a._scrollStep=a._scrollStep*a._animationSettings.step+s):t<0&&a.$.body[a._animationSettings.scrollSize]<o*a._animationSettings.easeThreshold&&(s=Math.max(a.$.body[a._animationSettings.scrollMax]/a._animationSettings.stepEaseSize,Math.abs(s-a.$.body[a._animationSettings.scrollSize]*a._animationSettings.step)),a._scrollStep=a._scrollStep*a._animationSettings.step+s),a.$.body[a._animationSettings.scrollSize]+=t>0?a._scrollStep:-a._scrollStep,a._animationId=requestAnimationFrame(r))})}_animateNavigationCompleted(){const e=this;let t,n,a,i="month"!==e.displayMode?e.$.dateViewContainer:e.$.monthsContainer;if(cancelAnimationFrame(e._animationId),"month"!==e.displayMode){let o=[].slice.call(i.children).indexOf(e._focusedCell);i.innerHTML=e.$.nextMonthsContainer.innerHTML;let r,l=i.children[o];n=i.children,a=e.$.nextMonthsContainer.children;for(let s=0;s<n.length;s++)n[s].value=a[s].value,n[s].restricted=a[s].restricted,n[s].important=a[s].important,n[s].otherMonth=a[s].otherMonth,n[s].value.getTime()<=e.max.getTime()&&(r=n[s]);t=l&&l.value.getTime()>=e.max.getTime()?r.value:e._focusedCell?e._focusedCell.value:void 0}else{let o=i.children,r=e.$.nextMonthsContainer.children;e._focusedCell&&e.$.nextMonthsContainer.contains(e._focusedCell)&&(t=e._focusedCell.value);for(let l=0;l<o.length&&r[l]._date;l++){o[l]._date=r[l]._date,o[l].innerHTML=r[l].innerHTML,n=e._getMonthCells(o[l]),a=e._getMonthCells(r[l]);for(let s=0;s<n.length;s++)n[s].value=a[s].value,n[s].restricted=a[s].restricted,n[s].important=a[s].important,n[s].otherMonth=a[s].otherMonth,n[s].removeAttribute("focus")}e._selectedCells.length>0&&(e._selectedCells=e._selectedCells.map(l=>e._getCellByDate(l.value)).filter(l=>void 0!==l))}e._focusCell(e._getCellByDate(t)),i.style.order=1,e.$.nextMonthsContainer.style.order=3,e.$.body[e._animationSettings.scrollSize]=0,e._animationStarted=!1,delete e._navigationDate}_applyAnimationSettings(e){const t=this;t._animationSettings=t.animationSettings?t.animationSettings:t._animationSettings||{},"portrait"===t.scrollButtonsNavigationMode?(t._animationSettings.scrollMax="scrollHeight",t._animationSettings.size="offsetHeight",t._animationSettings.scrollSize="scrollTop"):(t._animationSettings.scrollMax="scrollWidth",t._animationSettings.size="offsetWidth",t._animationSettings.scrollSize="scrollLeft"),e||(t._animationSettings.startSpeed=t._animationSettings.startSpeed?t._animationSettings.startSpeed:.2,t._animationSettings.easeThreshold=t._animationSettings.easeThreshold?t._animationSettings.easeThreshold:.5,t._animationSettings.step=t._animationSettings.step?t._animationSettings.step:.25,t._animationSettings.stepEaseSize=t._animationSettings.stepEaseSize?t._animationSettings.stepEaseSize:200,t._animationSettings.resetThreshold=t._animationSettings.resetThreshold?t._animationSettings.resetThreshold:.2)}_applySelectionMode(e,t){const n=this;let a=[],i=!!e,o=n.selectionMode;function r(s,c){const u=n.$.monthsContainer.children;for(let p=0;p<u.length;p++)n._getMonthCells(u[p]).map(g=>{n._setCellState(g,s,c)})}switch("many"===o&&"range"===o||r("hover",!1),n._newRangeSelectionStarted=n.selectedDates.length>0&&"range"===o,-1!==["default","many","zeroOrMany","oneOrMany","week","range"].indexOf(o)?Array.from(n.getElementsByClassName("smart-calendar-month")).forEach(s=>s.setAttribute("aria-multiselectable",!0)):Array.from(n.getElementsByClassName("smart-calendar-month")).forEach(s=>s.removeAttribute("aria-multiselectable")),"none"!==o&&"none"!==t||r("selected",!1),o){case"none":return void n._clearSelection(i);case"range":return void(n.selectedDates.length>1&&n._selectMultipleDates(n.selectedDates[0],n.selectedDates[n.selectedDates.length-1]));case"many":case"default":case"oneOrMany":if(0===n.selectedDates.length){a.push(new Date(Math.min(Math.max(n.min.getTime(),(new Date).setHours(0,0,0,0)),n.max.getTime())));break}return;case"oneExtended":case"one":if(1===n.selectedDates.length)return;n.selectedDates.length>1?(a.push(n.selectedDates[n.selectedDates.length-1]),n._clearSelection(i)):a.push(new Date(Math.min(Math.max(n.min.getTime(),(new Date).setHours(0,0,0,0)),n.max.getTime())));break;case"zeroOrOne":if(n.selectedDates.length>1){a.push(n.selectedDates[n.selectedDates.length-1]),n._clearSelection(i);break}return;case"zeroOrMany":return;case"week":if(n.selectedDates.length>=1){let s=n.selectedDates[n.selectedDates.length-1];for(let c=0;c<7;c++)a.push(new Date(s)),s.setDate(s.getDate()+1);n._clearSelection(i)}}if(n.selectedDates=[],e)return void(n.selectedDates=a);const l=a.length;for(let s=0;s<l;s++)n._selectDate(a[s],s<l-1)}_clearSelection(e){const t=this,n=t.selectedDates.slice(0),a=t.selectionMode;if(t.isRendered){if(t._selectedCells&&t._selectedCells.map(i=>{t._setCellState(i,"selected",!1)}),t.selectedDates=[],t._selectedCells=[],"many"===a||"range"===a){const i=t.$.monthsContainer.children;for(let o=0;o<i.length;o++)t._getMonthCells(i[o]).map(r=>{t._setCellState(r,"hover",!1)})}t.$.footer&&t._refreshFooter(),t.$.hiddenInput.value=t.selectedDates.toString(),!e&&t.isInitialized&&n.length&&t.$.fireEvent("change",{value:[]}),t.$.title&&t._refreshTitle()}else t.set("selectedDates",[])}_bodyBlurStateHandler(e){this._bodyStateHandler(e),this.$.fireEvent("blur")}_bodyFocusStateHandler(e){this._bodyStateHandler(e),this.$.fireEvent("focus")}_bodyStateHandler(e){const t=this;if(t._focusedCell){if("blur"===e.type||"focus"===e.type&&t._noFocusingRequired)return t._noFocusingRequired=!1,void t._setCellState(t._focusedCell,"focus",!1);if("month"!==t.displayMode)return void("focus"!==e.type||t.$.dateViewContainer.querySelector("smart-calendar-cell[focus]")||t._setCellState(t._focusedCell||t.$.dateViewContainer.querySelector(".smart-calendar-cell"),"focus",!0))}"focus"===e.type&&t._focusCell()}_containerWheelHandler(e){const t=this;if(t.disabled||t.readonly||"month"!==t.displayMode&&"list"===t.displayModeView)return;let n,a;a=document.activeElement,t.shadowRoot?a=t.shadowRoot.activeElement:t.isInShadowDOM&&(a=t.getRootNode().activeElement),t.$.yearElement===a&&(n=12),(a&&t.shadowRoot||a.closest("smart-calendar")===t)&&(n=e.target===t.$.yearElement?12:1),n&&(e.preventDefault(),n=12===n?n:n*t.months,t.navigate(e.deltaY>0?-n:n))}_downHandler(e){const t=this;let n=e.originalEvent.target;if(t._dragStartDetails=void 0,t.disabled||t.readonly)return;if(t.hasRippleAnimation&&(n.value instanceof Date||n.parentElement&&n.parentElement.classList.contains("smart-calendar-title")||n.parentElement===t.$.dateElement)&&Smart.Utilities.Animation.Ripple.animate(n,e.pageX,e.pageY),n=e.originalEvent.target.closest(".smart-calendar-header"),e.originalEvent.target.closest(".smart-calendar-year-container")&&"decade"!==t.displayMode)return"classic"===t.calendarMode?void 0:void t._showDateView("year");if(e.originalEvent.target.closest(".smart-calendar-date-container")&&"month"!==t.displayMode)return"classic"===t.calendarMode?void 0:void t._displayModeHandler("list"===t.displayModeView?t.$.listViewContainer.querySelector("li.active"):t._focusedCell,"month");if(t._animationStarted&&t._animateNavigationCompleted(),Smart.Utilities.Core.isMobile&&e.originalEvent.target.closest(".smart-calendar-body")===t.$.body)return void(t._dragStartDetails={x:e.pageX,y:e.pageY,startTime:Date.now(),target:e.originalEvent.target});if(n=e.originalEvent.target,n.closest(".smart-calendar-week")||n.parentElement===t.$.dateViewContainer){for(;n&&!(n.value instanceof Date);)n=n.parentElement;return void(n&&("month"!==t.displayMode?t._displayModeHandler(n):t._weeksDownHandler(e,n)))}if(n.closest(".smart-calendar-month-element"))return;if(e.originalEvent.stopPropagation(),"list"===t.displayModeView&&"month"!==t.displayMode)return n=(t.shadowRoot||t.isInShadowDOM?e.originalEvent.composedPath()[0]:e.originalEvent.target).closest("smart-list-item"),void(n&&t._displayModeHandler(n));const a=document.scrollingElement||document.documentElement,i=a.scrollLeft,o=a.scrollTop;t.unfocusable||t.focus(),window.scrollTo(i,o)}_displayModeHandler(e,t){const n=this;if(n._animationStarted&&n._animateNavigationCompleted(),e instanceof HTMLElement&&e.closest(".smart-calendar-week")&&e.otherMonth&&("decade"===n.displayMode&&(e.value.getFullYear()<n.min.getFullYear()||e.value.getFullYear()>n.max.getFullYear())||"year"===n.displayMode&&(e.value.getFullYear()<n.min.getFullYear()||e.value.getFullYear()===n.min.getFullYear()&&e.value.getMonth()<n.min.getMonth()||e.value.getFullYear()>n.max.getFullYear()||e.value.getFullYear()===n.max.getFullYear()&&e.value.getMonth()>n.max.getMonth())))return;switch(t=t||n.displayMode){case"year":t="month";break;case"decade":t="year"}if(n.displayMode===t)return;const a=n.$.listViewContainer,i=a&&a.contains(e);n.$.fireEvent("displayModeChanging",{oldDisplayMode:n.displayMode,newDisplayMode:t}).defaultPrevented||(n.set("displayMode",t),n.$nextMonthsContainer.removeClass("smart-calendar-date-view-container"),e.parentElement!==n.$.dateViewContainer||e.disabled||e.restricted||n._focusCell(e),n.hasAnimation?(i&&e instanceof HTMLLIElement?n.$.animationPanel.style.transformOrigin=e.offsetHeight?e.offsetWidth/2+"px "+(e.offsetTop+e.offsetHeight/2)+"px":a.offsetLeft+a.offsetWidth/2+"px "+(a.offsetTop+a.offsetHeight/2)+"px":(n.$.dateViewContainer.style.order=1,n.$.nextMonthsContainer.style.order=3,n.$.animationPanel.style.transformOrigin=(e=n._focusedCell).offsetLeft+e.offsetWidth/2+"px "+(e.offsetTop+e.offsetHeight/2)+"px"),n._animateView(1,e)):n._setDisplayModeContent(e.value instanceof Date?e.value:new Date(e.getAttribute("value")||e.value)))}_animateView(e,t){const n=this;let a,i,o=t instanceof Date?t:new Date(t.getAttribute("value")||t.value),r=!1,l=1,s=1;const c=n.$.listViewContainer;"list"===n.displayModeView?a=c.contains(t)?c:i="month"!==n.displayMode?n.$.monthsContainer:c:t.value instanceof Date||(t=n._focusedCell?n._focusedCell:n._selectedCells.length>0?n._selectedCells[n._selectedCells.length-1]:n._getCellByDate(new Date)),a||(a=t.parentElement===n.$.dateViewContainer?n.$.dateViewContainer:n.$.monthsContainer),i||(i="month"===n.displayMode?n.$.monthsContainer:"list"===n.displayModeView?c:n.$.dateViewContainer),i.style.transformOrigin=n.$.animationPanel.style.transformOrigin,a===c?(n.$.animationPanel.innerHTML="",n.$.animationPanel.appendChild(a.cloneNode(!0))):n.$.animationPanel.innerHTML=a.innerHTML,n._setDisplayModeContent(o),a.style.order=1,n.$.nextMonthsContainer.style.order=3,n.$.body[n._animationSettings.scrollSize]=0,n.$.animationPanel.style.width=n.$.body.offsetWidth+"px",n.$.animationPanel.style.height=n.$.body.offsetHeight+"px",n.$.animationPanel.style.transform="scale(1)",n.$.animationPanel.style.opacity=1,n.$animationPanel.removeClass("smart-hidden"),i.style.opacity="0",i.style.transform="scale(3.5)",a.$.hasClass("smart-calendar-date-view-container")?n.$animationPanel.addClass("smart-calendar-date-view-container"):n.$animationPanel.removeClass("smart-calendar-date-view-container"),cancelAnimationFrame(n._animationId),n._animationId=requestAnimationFrame(function u(){if((e>0&&l>=3.5||e<0&&l<=0)&&(r=!0),r){if(cancelAnimationFrame(n._animationId),n.$animationPanel.addClass("smart-hidden"),n.$.animationPanel.style.transform="",n.$.animationPanel.style.opacity="",a.style.order=1,n.$.nextMonthsContainer.style.order=3,n.$.body[n._animationSettings.scrollSize]=0,i.style.transform="",i.style.opacity="",n.unfocusable)return;"month"===n.displayMode?n.$.body.focus():"list"===n.displayModeView&&n.focus()}else n.$.animationPanel.style.opacity=s,i.style.opacity=1-s,s-=.05,e>0?(n.$.animationPanel.style.transform="scale("+l+")",i.style.transform="scale("+Math.min((l-1)/2,1)+")",l+=.125):(n.$.animationPanel.style.transform="scale("+Math.max(l,0)+")",i.style.transform="scale("+Math.max(1+l,1)+")",l-=.06),n._animationId=requestAnimationFrame(u)})}_documentUpHandler(e){const t=this;let n=e.originalEvent.target;if((t.isInShadowDOM||t.shadowRoot&&n===t)&&(n=e.originalEvent.composedPath()[0]),t._newRangeSelectionStarted&&!t.$.container.contains(n)&&delete t._newRangeSelectionStarted,n&&n.classList&&n.classList.contains("smart-calendar-cell")&&(e.originalEvent.stopPropagation(),e.originalEvent.preventDefault(),e.preventDefault()),!Smart.Utilities.Core.isMobile||!t._dragStartDetails||e.originalEvent.target.closest(".smart-calendar-list-view"))return;delete t._previousIteration;const a=Date.now();let i={};(t.isInShadowDOM||t.shadowRoot&&n===t)&&(n=e.originalEvent.composedPath()[0]),"portrait"===t.scrollButtonsNavigationMode?(i.coordinate="y",i.direction="pageY"):(i.coordinate="x",i.direction="pageX");const o=t._dragStartDetails.step*(t.rightToLeft?-1:1);if(Math.abs(t._dragStartDetails[i.coordinate]-e[i.direction])<=10){if(n="list"===t.displayModeView&&"month"!==t.displayMode?n.closest("smart-list-item"):n,!n)return void(t._dragStartDetails=void 0);if("month"!==t.displayMode)return t._displayModeHandler(n),"portrait"===t.scrollButtonsNavigationMode?t.$.body.scrollTop=0:t.$.body.scrollLeft=0,void(t._dragStartDetails=void 0);if(t._weeksDownHandler(e,n),!t.disableAutoNavigation&&n.otherMonth)return}else{const l=Math.abs((e[i.direction]-t._dragStartDetails[i.coordinate])/(a-t._dragStartDetails.startTime));if(l>1){const s=parseInt(l);for(let c=0;c<s;c++)if(!t.navigate(o)){t._cancelAnimation();break}return void(t._dragStartDetails=void 0)}}if(!t.hasAnimation)return t.navigate(t._dragStartDetails.step),void(t._dragStartDetails=void 0);let r=("month"!==t.displayMode?t.$.dateViewContainer[t._animationSettings.scrollMax]:t.$.monthsContainer[t._animationSettings.scrollMax])+t.$.monthsSeparator[t._animationSettings.size];if(t._dragStartDetails.step>0&&t.$.body[t._animationSettings.scrollSize]>r*t._animationSettings.easeThreshold||t._dragStartDetails.step<0&&t.$.body[t._animationSettings.scrollSize]<r*t._animationSettings.easeThreshold)return t._animateNavigation(t._dragStartDetails.navigationDate,o,!0),6!==t.weeks&&0!==t.weeks&&"month"===t.displayMode&&t._updateWeeksVisibility(o,t._getCellByDate(t._dragStartDetails.navigationDate,t.$.nextMonthsContainer)),t.$.fireEvent("navigationChange",{value:new Date(t._dragStartDetails.navigationDate),type:t.displayMode}),void(t._dragStartDetails=void 0);t._cancelAnimation(),t._dragStartDetails=void 0}_cancelAnimation(){const e=this,t="month"!==e.displayMode?e.$.dateViewContainer:e.$.monthsContainer;let n=e.$.animationPanel.style.transform,a=e.$.animationPanel.style.opacity;n&&(n=parseFloat(n.substring(n.indexOf("(")+1||0,n.indexOf(")")))),t.style.order=1,e.$.nextMonthsContainer.style.order=3,e.$.body[e._animationSettings.scrollSize]=0,e._animationId=requestAnimationFrame(function i(){if(!n||n>=3.5){cancelAnimationFrame(e._animationId),e.$animationPanel.addClass("smart-hidden"),e.$.animationPanel.style.transform="",e.$.animationPanel.style.opacity="";const o="month"===e.displayMode?e.$.monthsContainer:e.$.listViewContainer;return o.style.transform="",o.style.opacity="",e.unfocusable||("month"===e.displayMode?e.$.body.focus():"list"===e.displayModeView&&e.focus()),void(e._animationStarted=!1)}e.$.animationPanel.style.opacity=a-=.25,e.$.animationPanel.style.transform="scale("+(n+=.5)+")",e._animationId=requestAnimationFrame(i)})}_focusCell(e,t){const n=this;if(n._focusedCell&&n._setCellState(n._focusedCell,"focus",!1),n.disabled||n.readonly)return;if(e)return"month"!==n.displayMode?(n._setCellState(e,"focus",!0),void(n._focusedCell=e)):e.disabled||e.restricted?void 0:(t||n._setCellState(e,"focus",!0),void(n._focusedCell=e));if("month"!==n.displayMode&&0===n.$.monthsContainer.offsetHeight)return;const a=n._selectedCells[n._selectedCells.length-1];if(a&&a.offsetHeight)n._setCellState(a,"focus",!0),n._focusedCell=a;else{const i=n.$.monthsContainer.children;if(!i[0]._date||n.min.getTime<i[0]._date.getTime())return;const o=n._getMonthCells(i[0],n.rightToLeft);for(let r=0;r<o.length;r++){const l=o[r];if(!l.otherMonth){if(l.disabled||l.restricted||!l.offsetHeight)continue;n._focusedCell=l;break}}}n._focusedCell&&n._setCellState(n._focusedCell,"focus",!0)}_getDays(e,t){const n=t.length;let a=[];if(n>0)for(let i=0;i<n;i++)t[i].getFullYear()===e.getFullYear()&&t[i].getMonth()===e.getMonth()&&a.push(t[i].getDate());return a}_getCellByDate(e,t){const n=this;if(!(e instanceof Date))return;if(t||(t=n.$.monthsContainer),"month"!==n.displayMode){if("list"===n.displayModeView)return;let r=arguments[1]?n.$.nextMonthsContainer.children:n.$.dateViewContainer.children;for(let l=0;l<r.length;l++)if("year"!==n.displayMode){if(r[l].value.getFullYear()===e.getFullYear())return r[l]}else if(r[l].value.getMonth()===e.getMonth())return r[l];return}let a,i,o=t.children;for(let r=0;r<o.length;r++)if(e.getFullYear()===o[r]._date.getFullYear()&&e.getMonth()===o[r]._date.getMonth()){a=o[r];break}if(a){i=n._getMonthCells(a);for(let r=0;r<i.length;r++)if((!i[r].otherMonth||i[r].hover)&&i[r].value.getMonth()===e.getMonth()&&i[r].value.getDate()===e.getDate())return i[r]}}_getMonthCells(e,t){const n=e.getElementsByClassName("smart-calendar-week");let a=[];if(t)for(let i=0;i<n.length;i++){let o=n[i].children;for(let r=o.length-1;r>0;r--)o[r].classList.contains("smart-calendar-cell")&&a.push(o[r])}else for(let i=0;i<n.length;i++){let o=n[i].children;for(let r=1;r<o.length;r++)o[r].classList.contains("smart-calendar-cell")&&a.push(o[r])}return a}_getWeekNumber(e){let n,a=new Date(e.getFullYear(),0,1),i=Math.round((e.getTime()-a.getTime()-6e4*(e.getTimezoneOffset()-a.getTimezoneOffset()))/864e5)+1,o=a.getDay()-this.firstDayOfWeek;return o=o>=0?o:o+7,o<4?(n=Math.floor((i+o-1)/7)+1,n>52&&(a=new Date(e.getFullYear()+1,0,1),o=a.getDay()-this.firstDayOfWeek,o=o>=0?o:o+7,n=o<4?1:53)):n=Math.round((i+o-1)/7),n}_handleDateSelection(e){const t=this;if(void 0!==e&&!e.disabled&&!e.restricted)switch(t.selectionMode){case"none":t._focusCell(e);break;case"oneExtended":case"one":case"default":if(t._keysPressed.Control)return t.selectedDates.length>1||1===t.selectedDates.length&&!e.selected?void t._selectDate(e.value):void t._focusCell(e);if(t._keysPressed.Shift)return void t._selectMultipleDates(new Date(t.selectedDates[0]),e);t._clearSelection(!0),t._selectDate(e.value,t._selectedCells.indexOf(e.value)>-1);break;case"many":{if(0===t.selectedDates.length)return void t._selectDate(e.value);const n=t.selectedDates[t.selectedDates.length-1];let a=new Date(t.selectedDates[0]);if(e.value.getTime()===a.getTime()||e.value.getTime()===n.getTime())return t._clearSelection(),void t._focusCell(e);t.selectedDates.length>0&&t._selectMultipleDates(a,e);break}case"range":{if(t.selectedDates.length>1&&!t._keysPressed.Control&&!t._newRangeSelectionStarted&&t._clearSelection(!0),0===t.selectedDates.length||t._keysPressed.Control&&t.selectedDates.length>1&&!t._newRangeSelectionStarted)return e.value&&t.selectedDates.find(i=>i.getTime()===e.value.getTime())?void 0:(t._newRangeSelectionStarted=!0,void t._selectDate(e.value));const n=t.selectedDates[t.selectedDates.length-1];let a=t._keysPressed.Control||t._newRangeSelectionStarted?n:new Date(t.selectedDates[0]);t.selectedDates.length>0&&t._selectMultipleDates(a,e),delete t._newRangeSelectionStarted;break}case"zeroOrMany":t._selectDate(e.value);break;case"oneOrMany":if(1===t.selectedDates.length&&e.selected)return void t._focusCell(e);t._selectDate(e.value);break;case"zeroOrOne":if(1===t.selectedDates.length&&e.selected)return void t._selectDate(e.value);t._clearSelection(!0),t._selectDate(e.value);break;case"week":{if(e.selected&&(e.value.getTime()===t.selectedDates[0].getTime()||e.value.getTime()===t.selectedDates[t.selectedDates.length-1].getTime()))return t._clearSelection(),void t._focusCell(e);t._clearSelection(!0);let n=new Date(e.value);t._selectDate(n);for(let a=1;a<7;a++)n.setDate(n.getDate()+1),t._selectDate(n);t._isDateInView(n)||t.navigate(1);break}}}_handleImportantDateTemplate(){const e=this;if(e._importantDatesTemplate=e._validateTemplate("importantDatesTemplate",e.importantDatesTemplate),!e._importantDatesTemplate||!e._importantDatesTemplate.content)return;let t=e._importantDatesTemplate.content;const n=t.childNodes.length,a=/{{\w+}}/g;let i;e._bindingDetails=[];for(let o=0;o<n;o++)if(i=a.exec(t.childNodes[o].innerHTML),i)return void e._bindingDetails.push({childNodeIndex:o,bindingString:i[0]})}_handleLayoutTemplate(e,t){const n=this,a=n._validateTemplate(e.$.hasClass("smart-header")?"headerTemplate":e.$.hasClass("smart-calendar-footer")?"footerTemplate":"titleTemplate",t);if(!a||!a.content)return void("function"==typeof t&&t(e,{}));n._layoutTemplates||(n._layoutTemplates=[]);let i=document.importNode(a.content,!0);e.innerHTML="";const o=i.childNodes.length,r=/{{\w+}}/g;let l,s=[];for(let c=0;c<o;c++)l=r.exec(i.childNodes[c].innerHTML),l&&s.push({childNodeIndex:c,bindingString:l[0]});if(n._layoutTemplates=n._layoutTemplates.filter(c=>c.selector!==e),n._layoutTemplates.push({selector:e,template:a,bindings:s}),n.shadowRoot)return e.innerHTML="<slot></slot>",void n.appendChild(i);e.appendChild(i)}_handleCalendarCellHover(e,t){const n=this;if(!n._animationStarted){if("month"===n.displayMode)if("mouseover"===e.type&&("many"===n.selectionMode||"range"===n.selectionMode&&n._newRangeSelectionStarted)&&n.selectedDates.length>0){const a=n.$.monthsContainer.children;for(let c=0;c<a.length;c++)n._getMonthCells(a[c]).map(u=>{n._setCellState(u,"hover",!1)});let i=new Date("range"===n.selectionMode?n.selectedDates[n.selectedDates.length-1]:n.selectedDates[0]),o=new Date(t.value),r=t;const l=i.getTime()>o.getTime()?-1:1,s=function(){r=n._getCellByDate(i),!r||r.selected||r.restricted||n._setCellState(r,"hover",!0)};if(i.getTime()!==o.getTime()){for(i.setDate(i.getDate()+l);i.getTime()!==o.getTime();)s(),i.setDate(i.getDate()+l);s()}}else n._setCellState(t,"hover",!1);n._setCellState(t,"hover","mouseover"===e.type&&!t.otherMonth)}}_handleMonths(e,t){const n=this;let a;function i(r){let l,s=r.children.length,c=document.createDocumentFragment();for(;s<n.months;s++)l=n.$.month.cloneNode(!1),l.innerHTML=n.$.month.innerHTML,c.appendChild(l);return c}function o(r){let l=r.children;for(let s=0;s<l.length;s++)n._setMonth(e,l[s]),e.setMonth(e.getMonth()+1);n._setWeeksVisibility(r),n._refreshHeaderElements(),n._refreshHeaderTitle(),n.tooltip&&n.$.tooltip&&n.$.tooltip.close(),n.$.body===document.activeElement&&n._focusCell()}if(e||(e=n._viewDates&&n._viewDates.length>0?n._viewDates[0]:new Date),e=new Date(Math.min(Math.max(n.min.getTime(),e.getTime()),n.max.getTime())),t||(t=n.$.monthsContainer),n._selectedCells=[],n.hasAnimation){for(a=n.$.nextMonthsContainer.children,a.length>0&&a[0].value instanceof Date&&(n.$.nextMonthsContainer.innerHTML="");n.$.nextMonthsContainer.childElementCount<n.months;)n.$.nextMonthsContainer.appendChild(i(n.$.nextMonthsContainer));for(;n.$.nextMonthsContainer.childElementCount>n.months;)n.$.nextMonthsContainer.removeChild(a[n.$.nextMonthsContainer.childElementCount-1]);if(arguments[1]===n.$.nextMonthsContainer)return void o(n.$.nextMonthsContainer)}if(a=n.$.monthsContainer.children,a.length>n.months){for(;n.$.monthsContainer.childElementCount>n.months;)n.$.monthsContainer.removeChild(a[n.$.monthsContainer.childElementCount-1]),n._viewDates.pop();o(n.$.monthsContainer)}else n.$.monthsContainer.children.length!==n.months&&(n._viewDates=[],n.$.monthsContainer.appendChild(i(n.$.monthsContainer))),o(n.$.monthsContainer)}_headerChangeHandler(e){const t=this;if(e.stopPropagation(),t.disabled||t.readonly)return;if(e.target.ownerElement===t.$.monthElement&&0!==t._changeEventFired)return void t._changeEventFired--;const n=t.displayMode;e.target===t.$.yearElement&&(t._viewDates[0].setFullYear(Math.min(Math.max(t.min.getFullYear(),isNaN(parseInt(t.$.yearElement.value))?0:parseInt(t.$.yearElement.value)),t.max.getFullYear())),t._handleMonths(t._viewDates[0])),!t.$.monthElement||e.target!==t.$.monthElement&&e.target.ownerElement!==t.$.monthElement||(t._handleMonths(new Date(t.$.monthsContainer.children[0]._date.getFullYear(),t.$.monthElement.selectedIndex,1)),"month"!==n&&t._setDisplayMode(t.displayMode,t.displayMode="month"))}_headerClickHandler(e){const t=this;if(t.disabled||t.readonly)return;let n=e.target.closest("smart-repeat-button");if(!n||!n.disabled){switch(n){case t.$.previousMonthButton:return t._isInteractiveNavigation=!0,void t.navigate(-1*t.months*(t.rightToLeft?-1:1));case t.$.nextMonthButton:return t._isInteractiveNavigation=!0,void t.navigate(1*t.months*(t.rightToLeft?-1:1));case t.$.previousYearButton:return void t.navigate(-12);case t.$.nextYearButton:return void t.navigate(12)}"classic"!==t.calendarMode&&e.target.closest(".smart-calendar-date-element")&&(t._animationStarted&&t._animateNavigationCompleted(),t._isInteractiveNavigation=!0,t._showDateView())}}_selectMultipleDates(e,t){const n=this;if(t instanceof HTMLElement&&(t=t.value),n._newRangeSelectionStarted?n._selectDate(e,!0):n._clearSelection(!0),"range"!==n.selectionMode||t.getTime()!==e.getTime()){if((e=new Date(e)).getTime()<t.getTime())for(;e.getTime()<=t.getTime();)n.selectedDates.find(a=>a.getTime()===e.getTime())||n._selectDate(e,!0),e.setDate(e.getDate()+1);else if(e.getTime()>t.getTime())for(;e.getTime()>=t.getTime();)n.selectedDates.find(a=>a.getTime()===e.getTime())||n._selectDate(e,!0),e.setDate(e.getDate()-1);else n._selectDate(t,!0);n.$.hiddenInput.value=n.selectedDates.toString(),n._refreshFooter(),n.isInitialized&&n.$.fireEvent("change",{value:n.selectedDates}),n._refreshTitle()}}_setDisplayMode(e,t,n){const a=this;if(a.$nextMonthsContainer.removeClass("smart-calendar-date-view-container"),0!==arguments.length&&a.hasAnimation)if(a._animationStarted&&(a.displayMode=e,a._animateNavigationCompleted(),a.displayMode=t),"month"===e&&"year"===t||"year"===e&&"decade"===t)a.displayMode=e,a._showDateView(n?void 0:a.displayMode);else if("month"===e&&"decade"===t)a._showDateView(a.displayMode="year");else{let i;"list"===a.displayModeView?(i=a.$.listViewContainer.querySelector("li.active"),a.$.animationPanel.style.transformOrigin=i.offsetLeft+i.offsetWidth/2+"px "+(i.offsetTop>0?i.offsetTop-i.offsetHeight/2:i.offsetTop+i.offsetHeight/2)+"px"):(a.$.dateViewContainer.style.order=1,a.$.nextMonthsContainer.style.order=3,i=a._focusedCell,a.$.animationPanel.style.transformOrigin=i.offsetLeft+i.offsetWidth/2+"px "+(i.offsetTop+i.offsetHeight/2)+"px"),a._animateView(1,i)}else{if("classic"===a.calendarMode)return void(a.displayMode="month");if("month"!==a.displayMode&&(a.$monthsContainer.addClass("smart-hidden"),a.$dateViewContainer.hasClass("smart-hidden")&&a.$dateViewContainer.removeClass("smart-hidden")),!a.isCompleted&&"month"===a.displayMode)return;a._setDisplayModeContent()}}_setDisplayModeContent(e,t){const n=this;let a=e&&"Invalid Date"!==e.toString()?e:n.selectedDates.length>0?n.selectedDates[n.selectedDates.length-1]:new Date;a.setTime(Math.min(Math.max(a.getTime(),n.min.getTime()),n.max.getTime())),a.setHours(0,0,0,0);const i=n._prepareView(a);if(!i)return;let o;t?(n.$.nextMonthsContainer.innerHTML=n.$.dateViewContainer.innerHTML,o=n.$.nextMonthsContainer):o=n.$.dateViewContainer;const r=o.children;let l;for(let s=0;s<r.length;s++){const c=r[s];c.innerHTML=i.viewContent[s],c.value=i.dates[s],"year"===n.displayMode?(c.value.getFullYear()<n.min.getFullYear()||c.value.getFullYear()===n.min.getFullYear()&&c.value.getMonth()<n.min.getMonth()||c.value.getFullYear()>n.max.getFullYear()||c.value.getFullYear()===n.max.getFullYear()&&c.value.getMonth()>n.max.getMonth()?n._setCellState(c,"otherMonth",!0):n._setCellState(c,"otherMonth",!1),a.getFullYear()===c.value.getFullYear()&&a.getMonth()===c.value.getMonth()&&(l=c)):"decade"===n.displayMode&&(0===s||s===r.length-1||c.value.getFullYear()<n.min.getFullYear()||c.value.getFullYear()>n.max.getFullYear()?n._setCellState(c,"otherMonth",!0):n._setCellState(c,"otherMonth",!1),a.getFullYear()===c.value.getFullYear()&&(l=c)),n._setCellState(c,"hover",!1),n._setCellState(c,"focus",!1)}if(l.otherMonth)for(let s=0;s<r.length;s++)if(!r[s].otherMonth){l=r[s];break}n._mobileScrolling||(n._focusedCell&&n._setCellState(n._focusedCell,"focus",!1),n._focusedCell=l,n._focusCell(n._focusedCell),n._refreshHeaderTitle(),n._refreshHeaderElements(),n.$.fireEvent("displayModeChange"),n._isInteractiveNavigation?n._isInteractiveNavigation=void 0:(n._setCellState(l,"focus",!0),setTimeout(function(){n.unfocusable||(n.$.body.focus(),n._focusCell(n._focusedCell))},0)))}_prepareView(e){const t=this,n=t.$.listViewContainer;let a,i,o=[],r=[];function l(s,c,u){let p=new Date(s,c+1,0),g=p.getDate();return p.setDate(u>g?g:u),p}if("month"===t.displayMode)return t.$nextMonthsContainer.hasClass("smart-date-view-container")&&t.$nextMonthsContainer.removeClass("smart-date-view-container"),n&&n.classList.add("smart-hidden"),t.$dateViewContainer.hasClass("smart-visibility-hidden")&&t.$dateViewContainer.removeClass("smart-visibility-hidden"),t._isDateInView(e)||t._handleMonths(e),t.$header.hasClass("smart-hidden")&&t.$header.removeClass("smart-hidden"),t.$body.hasClass("smart-calendar-list-view")&&t.$body.removeClass("smart-calendar-list-view"),t.$dateContainer.addClass("smart-calendar-selected"),t.$yearContainer.removeClass("smart-calendar-selected"),t.$dateViewContainer.addClass("smart-hidden"),t.$monthsContainer.removeClass("smart-hidden"),t._refreshHeaderTitle(),t.$.body.setAttribute("tabindex",t.tabIndex>0?t.tabIndex:0),t._refreshHeaderElements(),t.unfocusable||t.$.body.focus(),t._focusCell(t._getCellByDate(e)),void t.$.fireEvent("displayModeChange");if("list"===t.displayModeView)return t._setDisplayModeListContent(e),void t.$.fireEvent("displayModeChange");if(t.$header.hasClass("smart-hidden")&&t.$header.removeClass("smart-hidden"),t.$dateViewContainer.hasClass("smart-visibility-hidden")&&t.$dateViewContainer.removeClass("smart-visibility-hidden"),n&&n.classList.add("smart-hidden"),t.$.body.setAttribute("tabindex",t.tabIndex>0?t.tabIndex:0),"year"===t.displayMode){let s=new Date;for(let c=0;c<12;c++)s=l(s.getFullYear(),c,s.getDate()),o.push(s.toLocaleDateString(t.locale,{month:"short"})),r.push(l(e.getFullYear(),c,e.getDate()))}else{a=e?e.getFullYear():t._viewDates[0].getFullYear(),i=a%10,0!==i&&(a-=i),a-=1;for(let s=0;s<12;s++)o.push(a+""),r.push(new Date(a,e.getMonth(),e.getDate())),++a}return{viewContent:o,dates:r}}_setDisplayModeListContent(e){const t=this;let n=[];function a(i,o,r){let l=new Date(i,o+1,0),s=l.getDate();return l.setDate(r>s?s:r),l}if(t.$dateViewContainer.addClass("smart-visibility-hidden"),"year"===t.displayMode){let i=new Date;for(let o=0;o<12;o++)i=a(i.getFullYear(),o,i.getDate()),n.push({label:i.toLocaleDateString(t.locale,{month:"short"}),value:a(e.getFullYear(),o,e.getDate()).toDateString()});t.$yearContainer.removeClass("smart-calendar-selected"),t.$dateContainer.addClass("smart-calendar-selected")}else{let i=t.min.getFullYear(),o=t.max.getFullYear();o=Math.min(t.max.getFullYear(),e.getFullYear()+10),i=Math.max(t.min.getFullYear(),o-10);for(let r=i;r<o;r++)n.push({label:r.toString(),value:new Date(r,e.getMonth(),e.getDate()).toDateString()});t.$yearContainer.addClass("smart-calendar-selected"),t.$dateContainer.removeClass("smart-calendar-selected")}t._prepareListViewer(n,e.toDateString()),t._refreshHeaderTitle(),t._refreshHeaderElements(),t.unfocusable||t.focus()}_prepareListViewer(e=[],t){const n=this,a=n.$.body;let i=n.$.listViewContainer;i||(n.$.listViewContainer=i=document.createElement("smart-scroll-viewer"),i.classList.add("smart-input-drop-down-menu","smart-calendar-list-view"),i.ensureVisible=n._listViewerEnsureVisible.bind(n),i._handleKeyStrokes=n._listViewerKeyStrokesHandler.bind(n),i._setActiveDescendant=n._listViewerSetActiveDescendant.bind(n));let o=i.querySelector("ul");o||(o=document.createElement("ul"),o.onclick=n._listViewContainerItemClickHandler.bind(n),i.appendChild(o)),a.contains(i)&&a.removeChild(i),o.innerHTML="";for(let r=0;r<e.length;r++){const l=e[r],s=l.label,c=l.value,u=document.createElement("li"),p=document.createElement("a");t===c?(u.setAttribute("aria-selected",!0),u.classList.add("active"),t=u):u.setAttribute("aria-selected",!1),u.id=i.id+"Item"+Math.floor(65536*(1+Math.random())).toString(16).substring(1),u.setAttribute("value",c),u.setAttribute("role","option"),u.setAttribute("aria-label",s),p.innerHTML=s,p.setAttribute("aria-hidden",!0),u.appendChild(p),o.appendChild(u)}i.classList.remove("smart-hidden"),a.classList.add("smart-calendar-list-view"),a.removeAttribute("tabindex"),a.insertBefore(i,n.$.animationPanel),i.refresh(),i.ensureVisible()}_listViewerEnsureVisible(){const e=this.$.listViewContainer,t=e.querySelector(".active");if(!t)return;const n=Array.from(e.querySelectorAll("li"));t.offsetTop+t.offsetHeight>=e.scrollTop+e.offsetHeight&&(e.scrollTop=t.offsetTop+t.offsetHeight),(t.offsetTop<=e.scrollTop||t.offsetTop>=e.scrollTop+e.offsetHeight)&&(e.scrollTop=t.offsetTop),0===n.indexOf(t)?e.scrollTop=0:n.indexOf(t)===n.length-1&&(e.scrollTop=e.scrollHeight)}_listViewerKeyStrokesHandler(e){if(["ArrowUp","ArrowDown"].indexOf(e)<0)return;event.preventDefault();const t=this.$.listViewContainer,n=t.querySelector(".active");if(!n){const i=t.querySelector("li");return i.classList.add("active"),void t._setActiveDescendant(i)}const a=n["ArrowDown"===e?"nextElementSibling":"previousElementSibling"];a&&(n.classList.remove("active"),a.classList.add("active"),t._setActiveDescendant(a),t.ensureVisible())}_listViewerSetActiveDescendant(e){const t=this.$.listViewContainer;e?t.setAttribute("aria-activedescendant",e.id):t.removeAttribute("aria-activedescendant")}_listViewContainerItemClickHandler(e){const t=this,n=e.target.closest("li");n&&"list"===t.displayModeView&&"month"!==t.displayMode&&t._displayModeHandler(n)}_isDateInView(e){const t=this;if(!e)return!1;for(let n=0;n<t._viewDates.length;n++)if(e.getFullYear()===t._viewDates[n].getFullYear()&&e.getMonth()===t._viewDates[n].getMonth()){let a=t._getCellByDate(e,t._animationStarted?t.$.nextMonthsContainer:void 0);return a?!(a.otherMonth||!a.offsetHeight||a.classList.contains("smart-visibility-hidden")):void 0}return!1}_keyDownHandler(e){const t=this;if(t.disabled||t.readonly)return;const n=(t.shadowRoot||t.getRootNode()).activeElement||document.activeElement;switch(n){case t.$.yearElement:"Escape"===e.key&&t._refreshHeaderElements();break;case t.$.dateElement:if("default"===t.calendarMode&&" "===e.key||"Enter"===e.key)return e.preventDefault(),t._isInteractiveNavigation=!0,void t._showDateView();t._focusedCell||t._focusCell(),e.key.indexOf("Arrow")>-1&&t.$.dateElement===n&&!t.unfocusable&&t.$.body.focus(),t._navigateDays(e);break;case t.$.body:" "===e.key&&e.preventDefault(),t._navigateDays(e);break;case t.$.yearContainer:if(" "!==e.key&&"Enter"!==e.key||"decade"===t.displayMode||(e.preventDefault(),t._isInteractiveNavigation=!0,t._showDateView("year")),e.key.indexOf("Arrow")>-1){if(e.preventDefault(),t._focusedCell||t._focusCell(),"month"!==t.displayMode&&"list"===t.displayModeView)return t.unfocusable||t.focus(),void t.$.listViewContainer._handleKeyStrokes(e.key);t._navigateDays(e)}break;case t.$.dateContainer:if(" "!==e.key&&"Enter"!==e.key||"month"===t.displayMode||(e.preventDefault(),t._displayModeHandler("list"===t.displayModeView?t.$.listViewContainer.querySelector("li.active"):t._focusedCell,"month")),e.key.indexOf("Arrow")>-1){if(t._focusedCell||t._focusCell(),"month"!==t.displayMode&&"list"===t.displayModeView)return t.unfocusable||t.focus(),void t.$.listViewContainer._handleKeyStrokes(e.key);t._navigateDays(e)}break;default:if("month"!==t.displayMode&&"list"===t.displayModeView)return["Arrow","End","Home","Page"].indexOf(e.key)&&e.preventDefault()," "===e.key||"Enter"===e.key||e.ctrlKey&&("ArrowUp"===e.key||"ArrowDown"===e.key)?void t._navigateDays(e):void t.$.listViewContainer._handleKeyStrokes(e.key);e.key.indexOf("Arrow")>-1&&(t._focusedCell||t._focusCell(),t._navigateDays(e))}}_showDateView(e){const t=this;switch(e=e||t.displayMode){case"month":e="year";break;case"year":e="decade"}if(t.displayMode===e||t.$.fireEvent("displayModeChanging",{oldDisplayMode:t.displayMode,newDisplayMode:e}).defaultPrevented)return;let n;if(t.displayMode=e,"list"===t.displayModeView&&"month"!==t.displayMode){t._setDisplayModeListContent(t._focusedCell?t._focusedCell.value:t._viewDates[0]);const a=t.$.listViewContainer;a.classList.remove("smart-hidden"),n=a.querySelector("li.active"),t.$.animationPanel.style.transformOrigin=n.offsetHeight?n.offsetLeft+n.offsetWidth/2+"px "+(n.offsetTop>0?n.offsetTop-n.offsetHeight/2:n.offsetTop+n.offsetHeight/2)+"px":a.offsetLeft+a.offsetWidth/2+"px "+(n.offsetTop>0?n.offsetTop-n.offsetHeight/2:a.offsetTop+a.offsetHeight/2)+"px"}else t._focusedCell||t._focusCell(),n=t._focusedCell,t.$.animationPanel.style.transformOrigin=n.offsetLeft+n.offsetWidth/2+"px "+(n.offsetTop+n.offsetHeight/2)+"px";t.$monthsContainer.addClass("smart-hidden"),t.$dateViewContainer.hasClass("smart-hidden")&&t.$dateViewContainer.removeClass("smart-hidden"),"decade"===t.displayMode&&(t.$yearContainer.addClass("smart-calendar-selected"),t.$dateContainer.removeClass("smart-calendar-selected")),t.hasAnimation?t._animateView(-1,n):t._setDisplayModeContent(t._focusedCell?t._focusedCell.value:t._viewDates[0])}_keyUpHandler(e){const t=this;t.disabled||t.readonly||"default"!==t.selectionMode&&"range"!==t.selectionMode||"Shift"!==e.key&&"Control"!==e.key||(t._keysPressed[e.key]=!1)}_handleTooltip(){const e=this;let n=e.$.tooltip;e.tooltip?(n||(n=document.createElement("smart-tooltip"),n.tooltipTemplate=e.tooltipTemplate,n.arrow=e.tooltipArrow,n.arrowDirection=e.tooltipArrowDirection,n.offset=e.tooltipOffset,n.position=e.tooltipPosition,n.delay=e.tooltipDelay,n.rightToLeft=e.rightToLeft,n.openMode="manual",e.$.tooltip=n),n.parentElement||e.$.calendarContainer.appendChild(n)):n&&n.remove()}_mouseEventsHandler(e){const t=this;if(t.disabled||t.readonly)return;const n=t.$.tooltip;if("mouseenter"===e.type)return void t.$.setAttributeValue("hover",!0);if("mouseleave"===e.type){if(t.$.setAttributeValue("hover",!1),t._newRangeSelectionStarted&&"range"===t.selectionMode){const r=t.$.monthsContainer.children;for(let l=0;l<r.length;l++)t._getMonthCells(r[l]).map(s=>{t._setCellState(s,"hover",!1)})}return void(t.tooltip&&n&&n.close())}const a=t.shadowRoot||t.isInShadowDOM?e.composedPath()[0]:e.target;if(!a.closest(".smart-calendar-week"))return void(t.tooltip&&n&&(clearTimeout(t._tooltipAutoCloseTimeout),n[n.contains(a)?"open":"close"]()));const i=a.closest(".smart-calendar-cell");if(!i)return;if(Smart.Utilities.Core.isMobile||t._handleCalendarCellHover(e,i),!t.tooltip&&n)return void n.close();const o=i.hasAttribute("important");if(clearTimeout(t._tooltipAutoCloseTimeout),o&&n&&"mouseover"===e.type)return n.selector=i,void(n.selector!==i?n.close():(t.tooltipTemplate||(n.innerHTML=0===n.innerHTML.trim().length?"Important day!":n.innerHTML),n.open(),t.$.fireEvent("open",{target:n,value:new Date(i.value)})));t._tooltipAutoCloseTimeout=setTimeout(function(){!n||"mouseout"!==e.type&&i&&o||n.close(),clearTimeout(t._tooltipAutoCloseTimeout)}.bind(t),t.tooltipDelay)}_popupEventHandler(e){const t=this,n=t.$.tooltip;if(e.stopPropagation(),e.target!==t.$.monthElement)if(e.target===n){if("close"===e.type){const a=n.selector;t.$.fireEvent("close",{target:n,value:a?new Date(a.value):null})}}else t.$.fireEvent(e.type,{target:e.target})}_moveHandler(e){const t=this;if(!Smart.Utilities.Core.isMobile||!t._dragStartDetails||"list"===t.displayModeView&&"month"!==t.displayMode)return;e.originalEvent.preventDefault(),e.preventDefault(),e.stopPropagation();const n={x:Math.round(e.pageX),y:Math.round(e.pageY)};let a,i,o;if(a="portrait"===t.scrollButtonsNavigationMode?n.y>t._dragStartDetails.y?-1*t.months:1*t.months:n.x<t._dragStartDetails.x?1*t.months:-1*t.months,t._previousIteration&&a===t._previousIteration.step)i=t._previousIteration.date;else if(6!==t.weeks&&0!==t.weeks&&"month"===t.displayMode){let l,s;t._focusedCell||t._focusCell();const c=[].slice.call(t._focusedCell.closest(".smart-calendar-weeks").children).filter(u=>!u.classList.contains("smart-hidden"));if(c.length){let u;!t.rightToLeft&&a<0||t.rightToLeft&&a>0?(u=c[0].querySelectorAll(".smart-calendar-cell"),s=t.rightToLeft?u[u.length-1]:u[0]):(u=c[c.length-1].querySelectorAll(".smart-calendar-cell"),s=t.rightToLeft?u[0]:u[u.length-1]),l=new Date(s.value),l.setDate(l.getDate()+a*(t.rightToLeft?-1:1)),i=l}else i=t._getNextDate(a*(t.rightToLeft?-1:1))}else i=t._getNextDate(a*(t.rightToLeft?-1:1));if(!i)return;if(!t._dragStartDetails.navigationDate&&t.$.fireEvent("navigationChanging",{value:new Date(i),type:t.displayMode}).defaultPrevented)return t._cancelAnimation(),void(t._dragStartDetails=void 0);if(t._dragStartDetails.step=a,t._dragStartDetails.navigationDate=new Date(i),!t.hasAnimation)return;if(t._previousIteration={step:a,date:i},t._mobileScrolling=!0,"month"!==t.displayMode)t.$nextMonthsContainer.addClass("smart-calendar-date-view-container"),o=t.$.dateViewContainer,t.$.nextMonthsContainer.children[0].value instanceof Date&&t.$.nextMonthsContainer.children[1].value.getFullYear()===i.getFullYear()||t._setDisplayModeContent(i,t.$.nextMonthsContainer);else if(t.$nextMonthsContainer.hasClass("smart-calendar-date-view-container")&&t.$nextMonthsContainer.removeClass("smart-calendar-date-view-container"),o=t.$.monthsContainer,!t.$.nextMonthsContainer.children[0]._date||t.$.nextMonthsContainer.children[0]._date.getTime()!==i.getTime()){let l=t.$.nextMonthsContainer.children;for(let s=0;s<l.length;s++)i.setMonth(t._dragStartDetails.navigationDate.getMonth()+s*(t.rightToLeft?-1:1)),t._setMonth(new Date(i),l[s],!0)}6!==t.weeks&&0!==t.weeks&&"month"===t.displayMode&&t._updateWeeksVisibility(a*(t.rightToLeft?-1:1),t._getCellByDate(i,t.$.nextMonthsContainer)),delete t._mobileScrolling,a<0?(o.style.order=3,t.$.nextMonthsContainer.style.order=1,t.$.body[t._animationSettings.scrollSize]=t.$.body[t._animationSettings.scrollMax]):(o.style.order=1,t.$.nextMonthsContainer.style.order=3,t.$.body[t._animationSettings.scrollSize]=0);const r="portrait"===t.scrollButtonsNavigationMode?"y":"x";Math.abs(t._dragStartDetails[r]-n[r])>5&&(t.$.body[t._animationSettings.scrollSize]+=2*-(n[r]-t._dragStartDetails[r]))}_getNextDate(e){const t=this;let n;if("month"!==t.displayMode){let a;const i=t._focusedCell&&t._focusedCell.value.getFullYear();if("list"===t.displayModeView)n=new Date(t.$.listViewContainer.querySelector("li").getAttribute("value"));else{let r=t._animationStarted?t.$.nextMonthsContainer:t.$.dateViewContainer;n=new Date("year"===t.displayMode?r.children[0].value:r.children[1].value)}a="year"===t.displayMode?1:0!==e?10:1,n.setFullYear(n.getFullYear()+(e>0?a:-a)),n.getTime()<t.min.getTime()&&(n=t.min),n.getTime()>t.max.getTime()&&(n=t.max);const o="month"!==t.displayMode&&"list"===t.displayModeView;if(n.getFullYear()<t.min.getFullYear()||n.getFullYear()>t.max.getFullYear()||!o&&i===n.getFullYear())return}else{let a=t._viewDates[0];if(n=new Date(a),n.setDate(1),n.setMonth(n.getMonth()+e),n.setTime(Math.min(Math.max(n.getTime(),t.min.getTime()),t.max.getTime())),a.getMonth()===n.getMonth()&&a.getFullYear()===n.getFullYear())return}return n}_navigateDays(e){const t=this;let n="ArrowUp"===e.key||"ArrowDown"===e.key?7:1,a="ArrowUp"===e.key||"ArrowLeft"===e.key||"PageUp"===e.key?-1:1;switch(e.key){case"ArrowUp":case"ArrowLeft":case"ArrowDown":case"ArrowRight":if(!t._handleArrowKeys(e,n,a))return;break;case" ":case"Enter":{if("month"!==t.displayMode)return void t._displayModeHandler("list"===t.displayModeView?t.$.listViewContainer.querySelector("li.active"):t._focusedCell);const i=t._focusedCell;if("oneExtended"===t.selectionMode&&i)return t._clearSelection(!0),void t._selectDate(i.value,t._selectedCells.indexOf(i.value)>-1);break}case"Control":case"Shift":return"default"===t.selectionMode&&(t._keysPressed[e.key]=!0),void("range"===t.selectionMode&&(t._keysPressed[e.key]="Control"===e.key));case"Home":case"End":{let i;if(e.preventDefault(),i=function(r){if("Home"===e.key){for(let l=0;l<r.length;l++)if(!r[l].otherMonth&&(!r[l].disabled||!r[l].restricted)&&r[l].offsetHeight)return r[l]}else for(let l=r.length-1;l>=0;l--)if(!r[l].otherMonth&&(!r[l].disabled||!r[l].restricted)&&r[l].offsetHeight)return r[l]}("month"!==t.displayMode?t.$.dateViewContainer.children:t._getMonthCells(t._focusedCell.closest(".smart-calendar-month"),t.rightToLeft)),!i||(t._focusCell(i),"month"!==t.displayMode))return;break}case"PageUp":case"PageDown":if(!t._handlePageUpDownKeys(e,a))return;break;default:return}"oneExtended"!==t.selectionMode&&t._focusedCell&&t._handleDateSelection(t._focusedCell)}_handleArrowKeys(e,t,n){const a=this;let i;if("month"!==a.displayMode||a._animationStarted||a.unfocusable||a.$.body.focus(),a._focusedCell||a._focusCell(a._getCellByDate(new Date)),e.altKey)return;if(e.ctrlKey){if("ArrowDown"===e.key||"ArrowUp"===e.key){if("classic"===a.calendarMode)return;let l;switch(a.displayMode){case"month":l="ArrowDown"===e.key?"month":"year";break;case"year":l="ArrowDown"===e.key?"month":"decade";break;case"decade":l="ArrowDown"===e.key?"year":"decade"}if(l!==a.displayMode){const s=a.displayMode;a.displayMode=l,a._setDisplayMode(s,l,"month"===s),a._keysPressed&&delete a._keysPressed.Control}}return}if(e.preventDefault(),!a.rightToLeft||"ArrowLeft"!==e.key&&"ArrowRight"!==e.key||(n*=-1),"month"!==a.displayMode&&"list"!==a.displayModeView){const l=a._animationStarted?a.$.nextMonthsContainer.children:a.$.dateViewContainer.children;if(t="ArrowUp"===e.key||"ArrowDown"===e.key?4:1,"year"===a.displayMode){const s=a._focusedCell.value.getMonth()+n*t;let c=new Date(a._focusedCell.value.getFullYear(),s+1,0);a._focusedCell.value.getDate()<=c.getDate()&&(c=a._focusedCell.value),i=new Date(a._focusedCell.value.getFullYear(),s,c.getDate())}else i=new Date(a._focusedCell.value.getFullYear()+n*t,a._focusedCell.value.getMonth(),a._focusedCell.value.getDate());if("year"===a.displayMode){if(i.getFullYear()<a.min.getFullYear()||i.getFullYear()===a.min.getFullYear()&&i.getMonth()<a.min.getMonth()||i.getFullYear()>a.max.getFullYear()||i.getFullYear()===a.max.getFullYear()&&i.getMonth()>a.max.getMonth())return;i.getTime()>l[l.length-1].value.getTime()?a.navigate(1):i.getTime()<l[0].value.getTime()&&a.navigate(-1)}else{if(i.getFullYear()<a.min.getFullYear()||i.getFullYear()>a.max.getFullYear())return;if(i.getFullYear()<l[1].value.getFullYear()||i.getFullYear()>l[10].value.getFullYear()){let s=a._focusedCell;a.navigate(n),"ArrowUp"!==e.key&&"ArrowDown"!==e.key||i.setFullYear(s===l[3]||s===l[4]||s===l[7]||s===l[8]?i.getFullYear()+2*n:i.getFullYear()-2*n)}}return void a._focusCell(a._getCellByDate(i,a._animationStarted?a.$.nextMonthsContainer:void 0))}if(!a._focusedCell)return;const o=a.restrictedDates.map(Number);for(i=new Date(a._focusedCell.value.getFullYear(),a._focusedCell.value.getMonth(),a._focusedCell.value.getDate()+n*t,0,0,0,0);o.indexOf(i.getTime())>-1;)i.setDate(i.getDate()+n);if(i.getTime()<a.min.getTime()||i.getTime()>a.max.getTime())return;a._isDateInView(i)||a.navigate(n*a.months);let r=a._getCellByDate(i,a._animationStarted?a.$.nextMonthsContainer:void 0);return a._focusCell(r),a._updateWeeksVisibility(n),!(["zeroOrMany","oneOrMany","none","many","week","range"].indexOf(a.selectionMode)>-1)||void 0}_handlePageUpDownKeys(e,t){const n=this;let a;if(e.preventDefault(),"month"!==n.displayMode){if(a=n._focusedCell,!n.navigate(t))return;for(;a&&a.classList.contains("smart-visibility-hidden");)a=null===a.previousElementSibling?a.nextElementSibling:a.previousElementSibling;return n._focusCell(a),void(n.hasAnimation&&"decade"===n.displayMode&&n._focusedCell.value.setFullYear(n._focusedCell.value.getFullYear()+10*t))}a=new Date(n._focusedCell.value.getFullYear(),n._focusedCell.value.getMonth()+t,1,0,0,0,0);let i=new Date(a.getFullYear(),a.getMonth()+1,0).getDate();return n._focusedCell.value.getDate()>i?a.setDate(i):a.setDate(n._focusedCell.value.getDate()),n._isDateInView(a)||n.navigate(a),n._focusCell(n._animationStarted?n._getCellByDate(a,n.$.nextMonthsContainer):n._getCellByDate(a)),!0}_selectDate(e,t,n){const a=this;if(void 0===a._viewDates||"none"===a.selectionMode)return;let i,o=a.selectedDates.slice(0),r=a._getCellByDate(e,a._animationStarted?a.$.nextMonthsContainer:void 0);r&&a._selectCell(r),(e=new Date(e)).setHours(0,0,0,0),i=o.map(Number).indexOf(e.getTime()),a.restrictedDates.map(Number).indexOf(e.getTime())>-1||e.getTime()<a.min.getTime()||e.getTime()>a.max.getTime()||(i>-1?o.splice(i,1):o.push(e),n||(a.selectedDates=o),a._refreshFooter(),a.$.hiddenInput.value=a.selectedDates.toString(),!t&&a.isInitialized&&a.$.fireEvent("change",{value:[e]}),a._refreshTitle())}_selectCell(e){const t=this;if(!e||t.restrictedDates.map(Number).indexOf(e.value.getTime())>-1||t.disableAutoNavigation&&!1===e.otherMonth||e.value.getTime()<t.min.getTime()||e.value.getTime()>t.max.getTime())return;const n=t._selectedCells.indexOf(e);n>-1?(t._setCellState(e,"selected",!1),t._selectedCells.splice(n,1)):(t._setCellState(e,"selected",!0),t._selectedCells.push(e)),t._focusCell(e)}_refreshDayOfWeekTitles(){const e=this;let t,n=[],a=new Date;function i(s){let c;return"firstTwoLetters"===e.dayNameFormat?(c=new Intl.DateTimeFormat(e.locale,{weekday:"long"}).format(s),c=8206===c.charCodeAt(0)?c.substring(1,3):c.substring(0,2)):c=new Intl.DateTimeFormat(e.locale,{weekday:e.dayNameFormat}).format(s),c}for(let s=1;s<8;s++)a.setDate(s),t={number:a.getDay(),name:i(a)},n.push(t);n.sort((s,c)=>s.number>c.number?1:-1);const o=e.$.monthsContainer.children;let r,l;for(let s=0;s<o.length;s++)if(r=o[s].getElementsByClassName("smart-calendar-week-titles")[0].children,l=e.firstDayOfWeek>6?0:e.firstDayOfWeek,e.rightToLeft)for(let c=r.length-1;c>=1;c--)r[c].textContent=n[l++].name,l=l>6?0:l;else for(let c=1;c<r.length;c++)r[c].textContent=n[l++].name,l=l>6?0:l;if(e.hasAnimation){const s=e.$.monthsContainer.getElementsByClassName("smart-calendar-week-titles")[0].innerHTML,c=e.$.nextMonthsContainer.getElementsByClassName("smart-calendar-week-titles");for(let u=0;u<c.length;u++)c[u].innerHTML=s}}_refreshCalendarMode(){const e=this;if(!e.headerTemplate)if(e._refreshMonthNames(),"default"===e.calendarMode){e.$classicHeaderDate.addClass("smart-hidden"),e.$defaultHeaderDate.removeClass("smart-hidden");const t=e._viewDates.slice(0).sort((r,l)=>r.getTime()-l.getTime()),n=t[0],a=t[t.length-1];n.setDate(2);let i=e.monthNameFormat;"firstTwoLetters"===i&&(i="long");let o=n.toLocaleDateString(e.locale,{year:e.yearFormat,month:i});e.months>1&&(a.setDate(2),o+=" - "+a.toLocaleDateString(e.locale,{year:e.yearFormat,month:i})),e.$.defaultHeaderDate.innerHTML=o,e.unfocusable||e.$.dateElement.setAttribute("tabindex",e.tabIndex>0?e.tabIndex:0)}else e.$defaultHeaderDate.addClass("smart-hidden"),e.$classicHeaderDate.removeClass("smart-hidden"),e.$.dateElement.removeAttribute("tabindex")}_refreshFooter(){const e=this;if(!(e.viewSections.indexOf("footer")<0||0===e.$.footer.offsetHeight))if(e.footerTemplate){if("function"==typeof e.footerTemplate)return;let n=e._layoutTemplates.filter(i=>i.selector===e.$.footer)[0],a=document.importNode(n.template.content,!0);n.bindings.length>0&&(n.selector.childNodes[n.bindings[0].childNodeIndex].innerHTML=a.childNodes[n.bindings[0].childNodeIndex].innerHTML.replace(n.bindings[0].bindingString,t()))}else e.$.selectedDatesRange.innerHTML=t();function t(){if(0===e.selectedDates.length)return"";if(1===e.selectedDates.length)return e.selectedDates[0].toLocaleDateString(e.locale,{year:e.yearFormat,weekday:"short",month:"short",day:"numeric"});{let n=e.selectedDates.slice(0).sort((a,i)=>a.getTime()-i.getTime());return n[0].toLocaleDateString(e.locale,{year:e.yearFormat,weekday:"short",month:"short",day:"numeric"})+" - "+n[n.length-1].toLocaleDateString(e.locale,{year:e.yearFormat,weekday:"short",month:"short",day:"numeric"})}}}_refreshImportantDates(){const e=this;if("month"===e.displayMode){e._clearImportantDates();for(let t=0;t<e.importantDates.length;t++)e._setImportantDate(e.importantDates[t])}}_clearImportantDates(){const e=this,t=e.$.monthsContainer.children;for(let n=0;n<t.length;n++)e._getMonthCells(t[n]).map(a=>{e._setCellState(a,"important",!1)})}_setImportantDate(e,t){const n=this,a=n._getCellByDate(e);t||(t=a),t&&(n._setCellState(t,"important",!0),n._applyImportantDateTemplate(t))}_applyImportantDateTemplate(e){const t=this;if(!t._importantDatesTemplate)return"function"==typeof t.importantDatesTemplate?void t.importantDatesTemplate(e,{value:e.value}):void(e.innerHTML=e.value.getDate()+"");let n=document.importNode(t._importantDatesTemplate.content,!0);if(t._bindingDetails&&t._bindingDetails.length>0){let a=n.childNodes[t._bindingDetails[0].childNodeIndex];a.innerHTML=a.innerHTML.replace(t._bindingDetails[0].bindingString,e.value.getDate())}e.innerHTML="";for(let a=0;a<n.childNodes.length;a++)n.childNodes[a].outerHTML&&(e.innerHTML+=n.childNodes[a].outerHTML)}_setMonth(e,t,n){const a=this,i=a._getDays(e,a.selectedDates),o=a._getDays(e,a.importantDates),r=a._getDays(e,a.restrictedDates);e.setDate(1),t||(t=a.$.month),t._date=new Date(e),n||((!a._viewDates||a._viewDates.length>=a.months)&&(a._viewDates=[]),a._viewDates.push(new Date(e)));let l=((e=new Date(e)).getDay()-a.firstDayOfWeek+7)%7;e.setDate(0);let s=e.getDate();if(e.setDate(32),e.setDate(1),e.setDate(32),a._selectedCells)for(let c=0;c<a._selectedCells.length;c++)a._selectedCells[c].closest(".smart-calendar-month")===t&&a._setCellState(a._selectedCells[c],"selected",!1);a._setMonthContent(e,t,{previusMonthDays:s,firstDayOfWeek:l,selectedDates:i,importantDates:o,restrictedDates:r})}_setMonthContent(e,t,n){const a=this,i=32-e.getDate(),o=a._getMonthCells(t,a.rightToLeft),r=t._date.getMonth(),l=t._date.getFullYear(),s=new Date;let c,u=1,p=1;s.setHours(0,0,0,0),o.map(g=>{a._setCellState(g,"restricted",!1),a._setCellState(g,"selected",!1),a._setCellState(g,"otherMonth",!1),a._setCellState(g,"focus",!1),a._setCellState(g,"important",!1),a._setCellState(g,"today",!1),a._setCellState(g,"disabled",!1),a._setCellState(g,"hover",!1)});for(let g=0;g<o.length;g++){const b=o[g];g===n.firstDayOfWeek&&p<=i?(b.className="smart-calendar-cell",b.value=new Date(l,r,p),b.innerHTML=b.value.getDate().toString(),n.restrictedDates.indexOf(p)>-1||b.value.getTime()<a.min.getTime()||b.value.getTime()>a.max.getTime()?a._setCellState(b,"restricted",!0):n.selectedDates.indexOf(p)>-1&&(a._setCellState(b,"selected",!0),a._selectedCells.indexOf(b)<0&&a._selectedCells.push(b)),n.importantDates.indexOf(p)>-1&&(a._setImportantDate(b.value,b),n.importantDates.splice(n.importantDates.indexOf(p),1)),b.value.getTime()===s.getTime()&&a._setCellState(b,"today",!0),n.firstDayOfWeek++,p++):(1===p?(b.value=new Date(l,r-1,++n.previusMonthDays-n.firstDayOfWeek),c=!!(b.value.getTime()<a.min.getTime()||t.previousElementSibling)):(b.value=new Date(l,r+1,u++),c=!!(b.value.getTime()>a.max.getTime()||t.nextElementSibling)),b.innerHTML=b.value.getDate().toString(),a._setCellState(b,"otherMonth",!0),c?b.classList.add("smart-visibility-hidden"):b.classList.remove("smart-visibility-hidden"))}a.months>1&&(t.firstElementChild.innerHTML=a.dateFormatFunction?a.dateFormatFunction(t._date):a._monthsNames[r]+" "+t._date.toLocaleDateString(a.locale,{year:a.yearFormat})),a._setMonthWeekNumbers(t)}_refreshMonthNames(){const e=this;let t,n=new Date;function a(i){let o=e.monthNameFormat;"firstTwoLetters"===o&&(o="long");let r=new Intl.DateTimeFormat(e.locale,{month:o}).format(i);return"firstTwoLetters"===e.monthNameFormat&&(r=8206===r.charCodeAt(0)?r.substring(0,2):r.substring(1,3)),r}n.setDate(1),e._monthsNames=[];for(let i=0;i<12;i++)n.setMonth(i),t=a(n),e._monthsNames.push(t);if("classic"===e.calendarMode&&e.$.monthElement){let i=e.$.monthsContainer.children;if(e.$.monthElement.dataSource&&(e._changeEventFired=1),e.shadowRoot?e._setMonthElementPropertyInShadowDOM("dataSource",e._monthsNames):e.$.monthElement.dataSource=e._monthsNames,e._viewDates){for(let o=0;o<i.length;o++)i[o].firstElementChild.textContent=e._monthsNames[i[o]._date.getMonth()]+" "+i[o]._date.getFullYear();e._changeEventFired=1,e.shadowRoot?e._setMonthElementPropertyInShadowDOM("selectedIndex",e._viewDates.map(o=>o.getMonth())[0]):e.$.monthElement.selectedIndex=e._viewDates.map(o=>o.getMonth())[0]}}}_setMonthWeekNumbers(e){const t=this,n=function(i){for(let o=1;o<i.children.length;o++)if(!i.children[o].classList.contains("smart-visibility-hidden"))return!0};let a=e.getElementsByClassName("smart-calendar-week");a=[].slice.call(a);for(let i=0;i<a.length;i++){if(!n(a[i])){a[i].children[0].innerHTML="";continue}const o=a[i].children[1],r=o.otherMonth?o.value.getTime()>e._date.getTime()?1:-1:0;a[i].children[0].innerHTML=t._getWeekNumber(new Date(e._date.getFullYear(),e._date.getMonth()+r,o.value.getDate()))}}_setRestrictedDates(e){const t=this,n=t.$.monthsContainer.children;for(let a=0;a<n.length;a++)t._getMonthCells(n[a]).map(i=>{t._setCellState(i,"restricted",!1)});if(t._viewDates){const a=function(i){for(let o=0;o<t._viewDates.length;o++)if(t._viewDates[o].getFullYear()===i.getFullYear()&&t._viewDates[o].getMonth()===i.getMonth())return!0};for(let i=0;i<e.length;i++)if(a(e[i])){const o=t._getCellByDate(e[i]);t._setCellState(o,"restricted",!0)}}}_setScrollButtonsNavigationMode(){const e=this;"landscape"!==e.scrollButtonsNavigationMode?(e.$.previousMonthButton&&(e.$.previousMonthButton.$.button.firstElementChild.className="smart-arrow-down smart-arrow"),e.$.nextMonthButton&&(e.$.nextMonthButton.$.button.firstElementChild.className="smart-arrow-up smart-arrow")):(e.$.previousMonthButton&&(e.$.previousMonthButton.$.button.firstElementChild.className="smart-arrow-left smart-arrow"),e.$.nextMonthButton&&(e.$.nextMonthButton.$.button.firstElementChild.className="smart-arrow-right smart-arrow")),e._applyAnimationSettings(!0)}_refreshTitle(){const e=this;let t=e.selectedDates.length>0?e.selectedDates[e.selectedDates.length-1]:new Date;if(e.titleTemplate){if("function"==typeof e.titleTemplate)return;let n=e._layoutTemplates.filter(i=>i.selector===e.$.title)[0],a=document.importNode(n.template.content,!0);if(n.bindings.length>0){let i=a.childNodes[n.bindings[0].childNodeIndex];return t=t.toLocaleDateString(e.locale,{year:e.yearFormat,weekday:"short",month:"short",day:"numeric"}),void(n.selector.childNodes[n.bindings[0].childNodeIndex].innerHTML=i.innerHTML.replace(n.bindings[0].bindingString,t))}}e.$.title.children[0].innerHTML=t.toLocaleDateString(e.locale,{year:e.yearFormat}),e.$.title.children[1].innerHTML="landscape"===e.view?t.toLocaleDateString(e.locale,{weekday:"short"})+",</br>"+t.toLocaleDateString(e.locale,{month:"short",day:"numeric"}):t.toLocaleDateString(e.locale,{weekday:"short"})+", "+t.toLocaleDateString(e.locale,{month:"short",day:"numeric"})}_setWeeksVisibility(e){const t=this,n=e.children;let a;function i(o){(function(r){for(let l=1;l<r.children.length;l++)if(!r.children[l].classList.contains("smart-visibility-hidden"))return!1;return!0})(o)||a>=t.weeks?o.classList.add("smart-hidden"):a<t.weeks&&(o.classList.remove("smart-hidden"),a++)}for(let o=0;o<n.length;o++){let r=n[o].getElementsByClassName("smart-calendar-week");r=[].slice.call(r);let l=t._selectedCells.filter(s=>s.closest(".smart-calendar-month")===n[o]);if(6!==t.weeks)if(a=0,l.length>0){let c=r.indexOf(l[l.length-1].parentElement);for(let u=c;u<r.length;u++)i(r[u]);for(let u=c-1;u>=0;u--)i(r[u])}else for(let s=0;s<r.length;s++)i(r[s]);else r.map(s=>s.classList.remove("smart-hidden"))}}_refreshHeaderElements(){const e=this,t=document.activeElement.closest("smart-calendar")===e,n=e._animationStarted?e.$.nextMonthsContainer:e.$.dateViewContainer;let a,i,o=e._viewDates[e._viewDates.length-1],r=e._viewDates.map(l=>l.getFullYear());if("month"===e.displayMode||"list"!==e.displayModeView){if("classic"===e.calendarMode&&e.$.monthElement&&e.$.monthElement instanceof HTMLDivElement){const l=document.createElement("smart-input");l.setAttribute("smart-id","monthElement"),l.classList.add("smart-calendar-month-element"),l.dropDownPosition="bottom",l.selectionMode="one",l.disabled=e.disabled,l.rightToLeft=e.rightToLeft,l.theme=e.theme,l.dropDownWidth=e.dropDownWidth,l.dropDownHeight=e.dropDownHeight,l.readonly=!0,l.dropDownButtonPosition="right";const s=e.$.monthElement;e.$.monthElement.parentNode.insertBefore(l,e.$.monthElement),e.$.monthElement=l,s.remove()}if(e.$.previousMonthButton&&!e.disabled&&("month"!==e.displayMode&&e.$.dateViewContainer.children[0].value?i="year"===e.displayMode?n.children[0].value.getFullYear()-1:n.children[1].value.getFullYear()-1:e._viewDates[0].getMonth()-1<0?(a=11,i=e._viewDates[0].getFullYear()-1):(a=e._viewDates[0].getMonth()-1,i=e._viewDates[0].getFullYear()),e.$.previousMonthButton.disabled=i<e.min.getFullYear()||i===e.min.getFullYear()&&a<e.min.getMonth(),e.$.previousMonthButton.disabled&&t&&e.$.body.focus()),e.$.nextMonthButton&&!e.disabled&&("month"!==e.displayMode&&e.$.dateViewContainer.children[0].value?i="year"===e.displayMode?n.children[0].value.getFullYear()+1:n.children[1].value.getFullYear()+11:o.getMonth()+1>11?(a=0,i=o.getFullYear()+1):(a=o.getMonth()+1,i=o.getFullYear()),e.$.nextMonthButton.disabled=i>e.max.getFullYear()||i===e.max.getFullYear()&&a>e.max.getMonth(),e.$.nextMonthButton.disabled&&t&&e.$.body.focus()),"classic"===e.calendarMode&&e.$.monthElement){let l=[...e._monthsNames];if(r.indexOf(e.min.getFullYear())>-1)for(let c=0;c<e.min.getMonth();c++)l[c]="";if(r.indexOf(e.max.getFullYear())>-1)for(let c=e.max.getMonth()+1;c<l.length;c++)l[c]="";l=l.filter(c=>""!==c);const s=Math.max(0,e.$.monthElement.selectedIndex);e.$.monthElement.dataSource=l,e._changeEventFired=0!==e.$.monthElement.selectedIndex,e.shadowRoot?e._setMonthElementPropertyInShadowDOM("selectedIndex",e._viewDates[0].getMonth()):e.$.monthElement.selectedIndex=s,e._changeEventFired=0}e.$.previousYearButton&&!e.disabled&&(i=e._viewDates[0].getFullYear()-1,e.$.previousYearButton.disabled=i<e.min.getFullYear(),e.$.previousYearButton.disabled&&t&&e.$.body.focus()),e.$.nextYearButton&&!e.disabled&&(i=o.getFullYear()+1,e.$.nextYearButton.disabled=i>e.max.getFullYear(),e.$.nextYearButton.disabled&&t&&e.$.body.focus()),e.$.yearElement&&(e.$.yearElement.value=r[0],e.$.yearElement.disabled=o.getFullYear()+1>e.max.getFullYear()&&e._viewDates[0].getFullYear()-1<e.min.getFullYear())}}_setMonthElementPropertyInShadowDOM(e,t){const n=this.$.monthElement,a=n.context;n.context=document,this.$.monthElement[e]=t,n.context=a}_refreshHeaderTitle(){const e=this;let t;function n(){if("month"!==e.displayMode){if("list"===e.displayModeView){const c=e.$.listViewContainer;if(!c)return;const u=c.querySelectorAll("li");if(!u.length)return"";let p;c.querySelector("li.active")&&(p=c.querySelector("li.active").getAttribute("value")),t="year"===e.displayMode?new Date(p||u[0].getAttribute("value")).getFullYear():new Date(u[0].getAttribute("value")).getFullYear()+" - "+new Date(u[u.length-1].getAttribute("value")).getFullYear()}else if(e.$.dateViewContainer.children[0].value){let c=e._animationStarted?e.$.nextMonthsContainer.children:e.$.dateViewContainer.children;t="year"===e.displayMode?c[0].value.getFullYear():c[1].value.getFullYear()+" - "+c[c.length-2].value.getFullYear()}if(t)return t}const o=e._viewDates.slice(0).sort((c,u)=>c.getTime()-u.getTime()),r=o[0],l=o[o.length-1];r.setDate(2);let s=e.monthNameFormat;return"firstTwoLetters"===s&&(s="long"),t=r.toLocaleDateString(e.locale,{year:e.yearFormat,month:s}),e.months>1&&(l.setDate(2),t+=" - "+l.toLocaleDateString(e.locale,{year:e.yearFormat,month:s})),t}if("default"===e.calendarMode&&(e.$.defaultHeaderDate.innerHTML=n()),"function"==typeof e.headerTemplate||!e._layoutTemplates)return;let a=e._layoutTemplates.filter(o=>o.selector===e.$.header)[0];if(!a)return;let i=document.importNode(a.template.content,!0);a.bindings.length>0&&((e.shadowRoot?e:a.selector).childNodes[a.bindings[0].childNodeIndex].innerHTML=i.childNodes[a.bindings[0].childNodeIndex].innerHTML.replace(a.bindings[0].bindingString,e.dateFormatFunction?e.dateFormatFunction(e._viewDates):n()))}_updateWeeksVisibility(e,t){const n=this;let a=(t||n._focusedCell).parentElement;function i(){for(let u=l;u<r.length;u++)if(r[u].classList.contains("smart-hidden")&&!s(r[u])&&(r[u].classList.remove("smart-hidden"),c++,c===n.weeks))return!0}function o(){for(let u=l;u>=0;--u)if(r[u].classList.contains("smart-hidden")&&!s(r[u])&&(r[u].classList.remove("smart-hidden"),c++,c===n.weeks))return!0}if(!t&&!a.classList.contains("smart-hidden"))return;const r=[].slice.call(a.parentElement.children),l=r.indexOf(a),s=function(u){for(let p=1;p<u.children.length;p++)if(!u.children[p].classList.contains("smart-visibility-hidden"))return!1;return!0};let c=0;if(r.map(u=>u.classList.add("smart-hidden")),e>0){if(i())return;o()}else{if(o())return;i()}}_getValidDates(e){let t=[];function n(a){if(a instanceof Date)return a;if(Smart.Utilities.DateTime&&a instanceof Smart.Utilities.DateTime)return a.toDate();if("string"==typeof a){if("new Date()"===a.trim()||"new Smart.Utilities.DateTime()"===a.trim())return new Date;let i=/(\d+[,-.\/]{1}\s*\d+[,-.\/]{1}\s*\d+)/;const o=()=>(a=a.replace(/[,-.\/]/g,",").split(",")).length>2?a=new Date(parseInt(a[0]),parseInt(a[1])-1,parseInt(a[2])):new Date;return i.test(a)&&(a=i.exec(a)[0].replace(/[,-.\/]/g,",").split(","))?new Date(parseInt(a[0]),parseInt(a[1])-1,parseInt(a[2])):o()}}if(void 0===e)return null;if(Array.isArray(e))for(let a=0;a<e.length;a++)t.push(n(e[a]));else t.push(n(e));return t=t.filter(a=>a&&"Invalid Date"!==a.toDateString()),t.map(a=>a.setHours(0,0,0,0)),t}_getValidDate(e){const t=this._getValidDates(e);return t.length>0?t[0]:null}_validateSelectedDates(e){const t=this;let n=[];e||(e=t.selectedDates);let a=e.slice(0);t.selectedDates=a.filter(function(o){if(o.getTime()>=t.min.getTime()&&o.getTime()<=t.max.getTime()&&!function(o){for(let r=0;r<t.restrictedDates.length;r++)if(t.restrictedDates[r].getTime()===o.getTime())return!0}(o))return!0;n.push(o)}),t._viewDates&&(n.map(o=>t._selectDate(o)),t._focusCell())}_validateMinMax(e,t,n){const a=this;switch(e){case"min":t=a._getValidDate(a[e]),a.min=t||n||a.properties.min.defaultValue;break;case"max":t=a._getValidDate(a[e]),a.max=t||n||a.properties.max.defaultValue;break;default:t=a._getValidDate(a.min),a.min=t||n||a.properties.min.defaultValue,t=a._getValidDate(a.max),a.max=t||n||a.properties.max.defaultValue}a.min=a.min.getTime()>a.max.getTime()?a.max:a.min,a.min.setHours(0,0,0,0),a.max.setHours(0,0,0,0);let i,o=a.$.monthsContainer.children;if(a._viewDates){if(a._viewDates[0].getTime()>a.max.getTime()||a._viewDates[0].getTime()<a.min.getTime())return void a._handleMonths();for(let r=0;r<o.length;r++){i=a._getMonthCells(o[r]);for(let l=0;l<i.length;l++){const s=i[l];if(s.value.getTime()>=a.min.getTime()&&s.value.getTime()<=a.max.getTime())a._setCellState(s,"restricted",!1),s.value.getMonth()===o[r]._date.getMonth()?s.classList.remove("smart-visibility-hidden"):a.hideOtherMonthDays||(a._setCellState(s,"otherMonth",!0),s.classList.remove("smart-visibility-hidden")),"month"!==a.displayMode&&a._setCellState(s,"otherMonth",!1);else{if(s.otherMonth){if(s.classList.contains("smart-visibility-hidden")){a._setCellState(s,"restricted",!1);continue}}else a._setCellState(s,"restricted",!0);"month"!==a.displayMode&&(s.classList.remove("smart-visibility-hidden"),a._setCellState(s,"otherMonth",!0))}}}}}_setCellState(e,t,n){e[t]=n;const a=Smart.Utilities.Core.toDash(t);n?(e.setAttribute(a,""),"selected"===t?e.setAttribute("aria-selected",!0):"today"===t?e.setAttribute("aria-current","date"):"restricted"===t?e.removeAttribute("aria-selected"):"disabled"===t&&(e.removeAttribute("aria-selected"),e.setAttribute("aria-disabled",!0))):(e.removeAttribute(a),"selected"===t?"none"===this.selectionMode||e.restricted||e.disabled?e.removeAttribute("aria-selected"):e.setAttribute("aria-selected",!1):"today"===t?e.removeAttribute("aria-current"):"restricted"!==t||e.disabled?"disabled"===t&&(e.removeAttribute("aria-disabled"),e.restricted||e.setAttribute("aria-selected",!1)):e.setAttribute("aria-selected",!1))}_validateTemplate(e,t){if(null===t||!t||"function"==typeof t)return;const n=this;if("content"in document.createElement("template")){if("string"==typeof t&&(t=document.getElementById(t)),null!==t&&"content"in t)return t;n.error(n.localize("invalidTemplate",{elementType:n.nodeName.toLowerCase(),property:e}))}else n.error(n.localize("htmlTemplateNotSuported",{elementType:n.nodeName.toLowerCase()}))}_weeksDownHandler(e,t){const n=this,a=t.value;let i;if(n.$.body.contains(t))if(t.otherMonth&&(i=t.value.getTime()>t.closest(".smart-calendar-month")._date.getTime()?1:-1),a&&n.hasRippleAnimation&&Smart.Utilities.Animation.Ripple.animate(t,e.pageX,e.pageY),i){if(n._isDateInView(a))return;n.disableAutoNavigation||n.navigate(i*n.months)}else(t=n._getCellByDate(a))&&(t.disabled||t.restricted)||n._handleDateSelection(t)}_firstDayOfWeekValidator(e,t){return Math.min(Math.max(0,isNaN(t)?6:t),6)}_weeksValidator(e,t){return Math.min(Math.max(1,isNaN(t)?6:t),6)}_monthsValidator(e,t){return Math.min(Math.max(1,isNaN(t)?1:t),12)}})},2864:()=>{Smart("smart-check-input",class extends Smart.MultiInput{static get properties(){return{inverted:{type:"boolean",value:!1}}}_performSelect(e){const t=this;if(!e)return void t.close();const n=e.target?e.target.closest("li"):e;if(!n)return;t._selectedItems||(t._selectedItems=[]),n.classList.toggle("selected");const a=n.classList.contains("selected"),i={label:n.getAttribute("data-label"),value:n.getAttribute("value")},o=t.$.menu.children;for(let p=0;p<o.length;p++)o[p].classList.remove("active");if(a)t._selectedItems.push(i),t._setActiveDescendant(n),n.classList.add("active"),n.setAttribute("aria-selected",!0);else{const p=t._selectedItems.findIndex(g=>g.label===i.label&&g.value===i.value);p>-1&&t._selectedItems.splice(p,1),n.classList.remove("active"),n.setAttribute("aria-selected",!1)}n.setAttribute("aria-selected",a);const r=t._selectedItems,l=t.value,s=t.$.input.dataValue;let[c,u]=[[],[]];for(let p=0;p<r.length;p++){const g=r[p];c.push(g.label),u.push(g.value)}t.set("selectedValues",r.map(p=>p.value)),c=c.join(", "),t.set("value",c),t.$.input.dataValue=u=u.join(", "),c===l&&u===s||t.$.fireEvent("change",{value:u,label:c,oldValue:s,oldLabel:l})}_render(e){const t=this,n=e.map(function(l){let s=l,c=l;"object"==typeof l&&(s=l.label,c=l.value||s);const u=document.createElement("li"),p=document.createElement("a");return p.href="#",u.id=t.id+"Item"+Math.floor(65536*(1+Math.random())).toString(16).substring(1),u.setAttribute("data-label",s),u.setAttribute("value",c),u.setAttribute("role","option"),u.setAttribute("aria-selected",!1),u.setAttribute("aria-label",s),p.innerHTML=t.highlighter?t.highlighter(s):t._highlighter(s),p.setAttribute("aria-hidden",!0),l.icon&&(p.classList.add("icon"),p.classList.add(l.icon)),u.appendChild(p),u});t.$.menu.innerHTML="";let a=[],i=[],o=t._selectedItems;o||(o=t._selectedItems=[]);const r=o.length;o.length&&o.forEach(l=>{i.push(l.label),a.push(l.value)}),a=a.concat((t.$.input.dataValue||t.$.input.value).split(",").map(l=>l.trim())),i=i.concat(t.$.input.value.split(",").map(l=>l.trim()));for(let l=0;l<n.length;l++){const s=n[l],c=s.getAttribute("value"),u=s.getAttribute("data-label"),p=r?a.indexOf(c):i.indexOf(u);p>-1&&i[p]===u&&(s.classList.add("selected"),s.setAttribute("aria-selected",!0),t._setActiveDescendant(s),o.findIndex(g=>g.label===u&&g.value===c)<0&&o.push({label:s.getAttribute("data-label"),value:s.getAttribute("value")})),t.$.menu.appendChild(s)}t.set("selectedValues",o.map(l=>l.value))}_next(){const e=this;let t=e._selectedItems?e._selectedItems[e._selectedItems.length-1]:void 0;t&&(t=e.$.menu.querySelector(`.active[data-label="${t.label}"][value="${t.value}"]`));const n=t||e.$.menu.querySelector(".active");if(!n){const o=e.$.menu.firstElementChild;return o.classList.add("active","focused"),void e._setActiveDescendant(o)}const a=e.$.menu.children;for(let o=0;o<a.length;o++)a[o].classList.remove("active","focused");e._setActiveDescendant();let i=n.nextElementSibling;i||(i=e.$.menu.firstElementChild),i.classList.add("active","focused"),e._setActiveDescendant(i),e.ensureVisible()}_prev(){const e=this;let t=e._selectedItems?e._selectedItems[e._selectedItems.length-1]:void 0;t&&(t=e.$.menu.querySelector(`.active[data-label="${t.label}"][value="${t.value}"]`));const n=t||e.$.menu.querySelector(".active");if(!n){const o=e.$.menu.firstElementChild;return o.classList.add("active","focused"),void e._setActiveDescendant(o)}const a=e.$.menu.children;for(let o=0;o<a.length;o++)a[o].classList.remove("active","focused");e._setActiveDescendant();let i=n.previousElementSibling;i||(i=e.$.menu.lastElementChild),i.classList.add("active","focused"),e._setActiveDescendant(i),e.ensureVisible()}_keyUpHandler(e){const t=this;if(!e.shiftKey)switch(e.keyCode){case 40:case 38:case 16:case 17:case 18:40===e.keyCode&&e.altKey&&t.open(),38===e.keyCode&&e.altKey&&t.close();break;case 9:case 13:if(!t.opened)return;t._performSelect(t.$.menu.querySelector(".active")),e.stopPropagation(),e.preventDefault();break;case 27:if(!t.opened)return;t.close(),e.stopPropagation(),e.preventDefault();break;default:t._lookup(e),!t.opened||e.ctrlKey||e.shiftKey||(e.stopPropagation(),e.preventDefault()),t.readonly||(t.$.input.dataValue=t.$.input.value)}}_createElement(){super._createElement(),this.$.menu.setAttribute("aria-multiselectable",!0),this.$.scrollView.classList.add("smart-check-input-drop-down-menu")}})},4896:()=>{Smart("smart-color-input",class extends Smart.Input{static get properties(){return{dataSource:{type:"any",value:null},displayMode:{value:"default",allowedValues:["default","grid"],type:"string"},dropDownHeight:{type:"any",value:"auto"},messages:{value:{en:{standardColors:"Standard colors",themeShadeColors:"",themeColors:"Theme colors"}},type:"object",extend:!0},placeholder:{value:"Please Select Color",type:"string"},valueDisplayMode:{value:"default",allowedValues:["default","colorBox","colorCode"],type:"string"},valueFormat:{value:"hex",allowedValues:["rgb","rgba","hex"],type:"string"}}}static get listeners(){return{"input.focus":"_focusHandler","input.blur":"_blurHandler","input.keydown":"_keyDownHandler","input.keyup":"_keyUpHandler","input.keypress":"_keyPressHandler","input.select":"_inputSelectHandler","input.change":"_inputChangeHandler","dropDownButton.down":"_dropDownButtonDownHandler","inputContainer.down":"_downHandler","document.up":"_documentUpHandler"}}template(){return'<div id="inputContainer" role="presentation">\n                    <div class="smart-content">\n                        <div class="smart-buttons-container" role="presentation" id="buttonsContainer">\n                            <div class="smart-action-button" id="actionButton">\n                                <div id="colorSampleContainer" class="smart-color-box color-picker-sample-container" role="presentation">\n                                    <div id="colorSample" class="color-picker-sample"></div>\n                                </div>\n                                <input class="smart-input smart-color-input" id=\'input\' readonly=\'[[readonly]]\' placeholder=\'[[placeholder]]\' type=\'[[type]]\' name=\'[[name]]\'\n                                    value=\'[[value]]\' disabled=\'[[disabled]]\' aria-label="[[placeholder]]" spellcheck="false" />\n                            </div>\n                            <div id="dropDownButton" tabindex=-1 class="smart-drop-down-button" role="button" aria-label="Toggle popup">\n                                <div id="arrow" class="smart-drop-down-button-icon" aria-hidden="true"></div>\n                            </div>\n                        </div>\n                        <span id="hint" class="smart-hint smart-hidden" inner-h-t-m-l="[[hint]]"></span>\n                    </div>\n                </div>'}open(){const e=this;let t;e.dropDownDataSource?(e.query="",t="function"==typeof e.dataSource?e.dataSource(e.query):e.dataSource):t="function"==typeof e.dropDownDataSource?e.dropDownDataSource(e.query):e.dropDownDataSource,e._process(t);const n=e.$.menu.querySelector(".color-sample.selected");if(n){const a=e.$.input.dataValue,i=e.$.menu.querySelectorAll(".color-sample");for(let o=0;o<i.length;o++){const r=i[o],l=r.getAttribute("data-label"),s=r.getAttribute("value");if(void 0!==a&&s===a||void 0===a&&l===e.$.input.value){n.removeAttribute("aria-current"),n.classList.remove("selected"),r.classList.add("selected"),r.setAttribute("aria-current",!0),e._setActiveDescendant(r),e.$.input.dataValue=s;break}}}e.ensureVisible(),e.$.input.focus(),setTimeout(function(){e.$.input.focus()},25)}_blurHandler(){const e=this;e.opened||(e.removeAttribute("focus"),e.$.actionButton.removeAttribute("focus"),e.$.dropDownButton.removeAttribute("focus")),delete e._preventLookup,e._isValidColor(e.value)||(e.$.input.value=e.$.input.dataValue=e.value="",e.$colorSampleContainer.addClass("no-color"))}_focusHandler(){const e=this;e.setAttribute("focus",""),e.$.actionButton.setAttribute("focus",""),e.$.dropDownButton.setAttribute("focus",""),e.readonly||0!==e.minLength||0!==e.$.input.value.length||e._preventLookup?delete e._preventLookup:e._lookup()}_lookup(e){const t=this;let n=[];t.query=t.$.input.value,t.$.input.readonly&&(t._incrementalSearchQuery||(t._incrementalSearchQuery=""),t._incrementalSearchQuery+=e.key,t._incrementalSearchTimer&&clearTimeout(t._incrementalSearchTimer),t.query=t._incrementalSearchQuery,t._incrementalSearchTimer=setTimeout(function(){t._incrementalSearchQuery=""},700)),t.query.length<t.minLength?t.close():(n="function"==typeof t.dataSource?t.dataSource(t.query):t.dataSource,clearTimeout(t._autoCompleteTimeout),t._autoCompleteTimeout=setTimeout(function(){const a=t.context;t.context=t,t._process(n),t.context=a},t.autoCompleteDelay))}_getDefaultColors(){let e=this._generateColors();if("grid"===this.displayMode)return e;let t=[];for(let n=0;n<e.length;n++)t=t.concat(Object.values(e[n])[0]);return t}_generateColors(){const e=this;return"default"===e.displayMode?e._defaultModeColors?e._defaultModeColors:e._defaultModeColors=[{themeColors:["#FFFFFF","#000000","#E6E6E6","#495469","#5671C2","#D48439","#A5A5A5","#EEC328","#7399D3","#85AA4C"]},{themeShadeColors:["#F2F2F2","#808080","#D0CECE","#D6DCE4","#DDEBF7","#FCE4D6","#EBEBEB","#FFF2CC","#DDE5F7","#E2EFDA","#D8D8D8","#595959","#AEAAAA","#ACB9CA","#BDD7EE","#F6CAAD","#DBDBDB","#FFE699","#B4C6E7","#C6E0B4","#BFBFBF","#404040","#757171","#8497B0","#9BC2E6","#F4B084","#C0C0C0","#FFD966","#8EA9DB","#A9D08E","#A6A6A6","#262626","#312F2F","#333F4F","#2F75B5","#C65911","#7B7B7B","#BF8F00","#305496","#548235","#808080","#0D0D0D","#161616","#222B35","#1F4E78","#833C0C","#525252","#806000","#203764","#375623"]},{standardColors:["#A52A0D","#DB3A15","#EEC328","#FEFE33","#A6CD57","#62AC54","#65ADEE","#3F6FBE","#10205F","#64379E"]}]:e._gridColors?e._gridColors:e._gridColors=["rgba(255, 255, 255, 0)","rgb(0, 0, 0)","rgb(153, 51, 0)","rgb(51, 51, 0)","rgb(0, 51, 0)","rgb(0, 51, 102)","rgb(0, 0, 128)","rgb(51, 51, 153)","rgb(51, 51, 51)","rgb(128, 0, 0)","rgb(255, 102, 0)","rgb(128, 128, 0)","rgb(0, 128, 0)","rgb(0, 128, 128)","rgb(0, 0, 255)","rgb(102, 102, 153)","rgb(128, 128, 128)","rgb(255, 0, 0)","rgb(255, 153, 0)","rgb(153, 204, 0)","rgb(51, 153, 102)","rgb(51, 204, 204)","rgb(51, 102, 255)","rgb(128, 0, 128)","rgb(153, 153, 153)","rgb(255, 0, 255)","rgb(255, 204, 0)","rgb(255, 255, 0)","rgb(0, 255, 0)","rgb(0, 255, 255)","rgb(0, 204, 255)","rgb(153, 51, 102)","rgb(192, 192, 192)","rgb(255, 153, 204)","rgb(255, 204, 153)","rgb(255, 255, 153)","rgb(204, 255, 204)","rgb(204, 255, 255)","rgb(153, 204, 255)","rgb(204, 153, 255)","rgb(255, 255, 255)"]}_downHandler(e){(this.readonly||e.originalEvent.target.closest(".smart-color-box"))&&this._dropDownButtonDownHandler(e)}_documentUpHandler(e){const t=this,n=t.shadowRoot||t.isInShadowDOM?e.originalEvent.composedPath()[0]:e.originalEvent.target;n===t||n.closest&&n.closest(".smart-buttons-container")===t.$.buttonsContainer||(t.$.scrollView.contains(n.shadowParent||n)?t._isPointerDown&&(t._isPointerDown=!1,t.opened&&(t._preventLookup=!0),t.$.input.focus()):(t.opened&&(t._preventLookup=!0),t._isPointerDown=!1,"manual"!==t.dropDownOpenMode&&t.close()))}_formatValue(e){const t=this;if(!t._isValidColor(e))return"";const n=t._getRGBA(e);switch(t.valueFormat){case"hex":e=t._rgbArrayToHEX([n.r,n.g,n.b,n.a]);break;case"rgb":e="rgb("+n.r+", "+n.g+", "+n.b+")";break;case"rgba":e=null!==n.r&&null!==n.g&&null!==n.b?"rgba("+n.r+", "+n.g+", "+n.b+", "+n.a+")":null}return e||null}_getRGBA(e){const t=this,n=e||t.value;let a=1;n&&(t._isRGBA(n)&&/rgba\((\d*.\d+|\d+),(\d*.\d+|\d+),(\d*.\d+|\d+)\,(\d*.\d+|\d+)\)/gi.test(n.replace(/\s/g,""))?a=/rgba\((\d*.\d+|\d+),(\d*.\d+|\d+),(\d*.\d+|\d+)\,(\d*.\d+|\d+)\)/gi.exec(n.replace(/\s/g,""))[4]:t._isHEX(e)&&/(^#[0-9A-F]{8}$)/gi.test(e.replace(/\s/g,""))&&(a=parseInt(/(^#[0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2}$)/gi.exec(e.replace(/\s/g,""))[4],16)/255),a=Math.min(1,Math.max(0,parseFloat(a))),isNaN(a)&&(a=1)),e=t._HSVtoRGBA(t._colorToHSV(n),a);const i=/rgba\((\d*.\d+|\d+),(\d*.\d+|\d+),(\d*.\d+|\d+)\,(\d*.\d+|\d+)\)/gi.exec(e.replace(/\s/g,""));return{r:parseInt(i[1]),g:parseInt(i[2]),b:parseInt(i[3]),a:parseFloat(i[4])}}_colorToHSV(e){if(!this._isValidColor(e))return;e=this._toRGBA(e).replace(/\s/g,"");const t=/rgba\((\d*.\d+|\d+),(\d*.\d+|\d+),(\d*.\d+|\d+)\,(\d*.\d+|\d+)\)/gi.exec(e),n=Math.min(255,Math.max(0,parseFloat(t[1])))/255,a=Math.min(255,Math.max(0,parseFloat(t[2])))/255,i=Math.min(255,Math.max(0,parseFloat(t[3])))/255;let o={h:0,s:0,v:0},r=0,l=0;if(n>=a&&n>=i?(l=n,r=a>i?i:a):a>=i&&a>=n?(l=a,r=n>i?i:n):(l=i,r=a>n?n:a),o.v=l,o.s=l?(l-r)/l:0,o.s){const s=l-r;o.h=n===l?(a-i)/s:a===l?2+(i-n)/s:4+(n-a)/s,o.h=60*o.h,o.h<0&&(o.h+=360)}else o.h=0;return o.s=parseFloat(o.s),o.v=parseFloat(o.v),o}_rgbArrayToHEX(e){let t="#";if(Array.isArray(e)&&null===e[0])return null;for(let a=0;a<3;a++){let i=parseInt(e[a]).toString(16).toUpperCase();i=1===i.length?0+i:i,t+=i}let n=parseFloat(e[3]);return isNaN(n)||(n=parseInt(255*n).toString(16).toUpperCase(),"FF"!==n&&(t=t.slice(0,7)+(1===n.length?0+n:n))),t}_HSVtoRGBA(e,t){const n=(e=e||{h:0,s:0,v:0}).h,i=e.v;let o,r,l,s=i*e.s,c=n/60,u=s*(1-Math.abs(c%2-1));c>=0&&c<=1?[o,r,l]=[s,u,0]:c>=1&&c<=2?[o,r,l]=[u,s,0]:c>=2&&c<=3?[o,r,l]=[0,s,u]:c>=3&&c<=4?[o,r,l]=[0,u,s]:c>=4&&c<=5?[o,r,l]=[u,0,s]:c>=5&&c<=6&&([o,r,l]=[s,0,u]);const p=i-s;return"rgba("+Math.round(255*(o+p))+", "+Math.round(255*(r+p))+", "+Math.round(255*(l+p))+", "+(void 0!==t?t:this._getRGBA().a||0)+")"}_toRGBA(e,t){const n=this;let a=n.value;function i(o){const r=/^#(.)(.)(.)$/gi.exec(o),l=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})?$/i.exec(o),s=parseInt(r?r[1]+r[1]:l[1],16),c=parseInt(r?r[2]+r[2]:l[2],16),u=parseInt(r?r[3]+r[3]:l[3],16),p=parseInt(r?r[4]+r[4]:l[4],16);return t?"rgba("+s+", "+c+", "+u+", 1)":"rgba("+s+", "+c+", "+u+", "+(isNaN(p)?"1":p/255)+")"}if(n._isRGBA(e))return t?"rgba("+e.match(/(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})/gi)+", 1)":e;if(n._isValidColorName(e))a=i(n._cssColorNamesHEX[e.trim().toLowerCase()]);else if(n._isHEX(e))a=i(e);else{if(!n._isRGB(e))return!1;a=e.toLowerCase(),a=a.replace("rgb","rgba"),a=a.replace(")",", 1)")}return a}_isHEX(e){return/(^#[0-9A-F]{3}$)|(^#[0-9A-F]{6}$)|(^#[0-9A-F]{8}$)/i.test(e)}_isRGB(e){return/rgb\((\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\)/i.test(e)}_isValidColorName(e){return!(!e||void 0===this._cssColorNamesHEX[e.trim().toLowerCase()])}_isRGBA(e){return/rgba\((\d*.\d+|\d+)\s*,\s*(\d*.\d+|\d+)\s*,\s*(\d*.\d+|\d+)\s*,\s*(\d*.\d+|\d+)\)/i.test(e)}_isValidColor(e){return this._isHEX(e)||this._isRGB(e)||this._isRGBA(e)||this._isValidColorName(e)}_performSelect(e){const t=this;let n,a,i;t.opened?(n=t.$.menu.querySelector(".selected")||t.$.menu.querySelector(".color-sample"),a=n.getAttribute("data-label"),i=n.getAttribute("value")):a=i=t.$.input.value;const o=e||t.value,r=t.$.input.dataValue;t.set("value",t.$.colorSample.style.backgroundColor=t._formatValue(a)),t.$.input.dataValue=i,t.setAttribute("data-value",i),t._isValidColor(t.value)?(t.$colorSampleContainer.removeClass("no-color"),t.$.colorSample.setAttribute("aria-label",t.value)):(t.$colorSampleContainer.addClass("no-color"),t.$.colorSample.setAttribute("aria-label","No color")),n&&(n.classList.add("selected"),n.setAttribute("aria-current",!0)),!t.isRendered||a===o&&i===r||t.$.fireEvent("change",{value:i,label:a,oldValue:r,oldLabel:o}),t.close()}_process(e){const t=this;if(e||(e=[]),"string"==typeof(e=e.slice(0))&&(e=t.$.deserialize(e,"array")),t.matcher)e=e.filter(n=>t.matcher(n)>-1);else if(t.query){let n=[];for(let a in t._cssColorNamesHEX)t._matcher(a,!0)>-1&&n.push(t._cssColorNamesHEX[a]);if(n.length)e=n;else if(e.length||null!=t.dataSource)e=e.filter(a=>t._matcher(a)>-1);else{let a=t._generateColors();"default"===t.displayMode&&(a=[].concat.apply([],a.map(i=>Object.values(i)[0]))),e=a.filter(i=>t._matcher(i)>-1)}}!e.length&&t.opened&&t.close(),t.query.length>0&&!e.length||!e.length&&null!=t.dataSource||(t._render(t.query.length>0?e.slice(0,t.items):e),t._open(),t._refreshMenu(),t.ensureVisible())}_matcher(e,t){const n=this,a=n.query;if(e=t?e.label||e:n._formatValue(e.label||e),!a)return-1;switch(n.queryMode){case"startsWith":return e.startsWith(a);case"startsWithIgnoreCase":return e.toLowerCase().startsWith(a.toLowerCase());case"doesNotContain":return e.indexOf(a)<0;case"doesNotContainIgnoreCase":return e.toLowerCase().indexOf(a.toLowerCase())<0;case"contains":return e.indexOf(a)>-1;default:case"containsIgnoreCase":return e.toLowerCase().indexOf(a.toLowerCase());case"equals":return 0===e.localeCompare(a);case"equalsIgnoreCase":return 0===e.toLowerCase().localeCompare(a.toLowerCase());case"endsWith":return e.endsWith(a);case"endsWithIgnoreCase":return e.toLowerCase().endsWith(a.toLowerCase())}}_render(e){const t=this;if(t.$.menu.innerHTML="",e.length)t.$.menu.appendChild(t._createColorGroup(t._createColorSamples(e)));else if(null==t.dataSource&&!t.query.length)if(e=t._generateColors(),"default"===t.displayMode){const n=t._generateColors();for(let a=0;a<n.length;a++){const i=Object.keys(n[a])[0],o=Object.values(n[a])[0],r=document.createElement("div");r.classList.add("standard-colors-label"),r.innerHTML=t.localize(i),r.id=t.id+i+"Label",t.$.menu.appendChild(r),t.$.menu.appendChild(t._createColorGroup(t._createColorSamples(o),i+"Label"))}}else t.$.menu.appendChild(t._createColorGroup(t._createColorSamples(e)))}_createColorGroup(e,t){const n=this,a=document.createElement("div");function i(){const o=n.$.menu.getElementsByClassName("selected");o[0]&&(o[0].removeAttribute("aria-current"),o[0].classList.remove("selected")),this.classList.add("selected"),this.setAttribute("aria-current",!0),n._setActiveDescendant(this)}a.classList.add("grid-samples-container"),a.setAttribute("role","menu"),t&&a.setAttribute("aria-labelledby",n.id+t);for(let o=0;o<e.length;o++){const r=e[o];a.appendChild(r),r.onmouseenter=i,r.onclick=i,r.onmouseleave=function(){this.removeAttribute("aria-current"),this.classList.remove("selected"),n._setActiveDescendant(null)}}return a}_createColorSamples(e){const t=this;let n=[];for(let a=0;a<e.length;a++){const i=e[a];let o=i,r=i;"object"==typeof i&&(o=i.label,r=i.value||o);const l=document.createElement("div");l.id=t.id+"Item"+Math.floor(65536*(1+Math.random())).toString(16).substring(1),l.setAttribute("data-label",o),l.setAttribute("value",r),l.setAttribute("role","menuitem"),l.setAttribute("aria-label",o),l.classList.add("color-sample"),l.style.backgroundColor=o,"rgba(255, 255, 255, 255)"!==o&&"#FFFFFF"!==o&&"#FFFFFFFF"!==o||(l.style.borderColor="var(--smart-border)",l.style.borderStyle="solid",l.style.borderWidth="1px"),"rgba(255, 255, 255, 0)"===o||"#FFFFFF00"===o||"transparent"===o?l.setAttribute("transparent",""):l.removeAttribute("transparent"),l.classList[o||r?"remove":"add"]("no-color"),n.push(l)}if(n.length>0&&!t.$.menu.querySelector(".selected")){const a=Math.max(0,e.indexOf(t.value));n[a].classList.add("selected"),n[a].setAttribute("aria-current",!0),t._setActiveDescendant(n[0])}return n}ensureVisible(){this.$.menu.querySelector(".color-sample.selected")}_next(){const e=this,t=e.$.menu.querySelector(".color-sample.selected");if(!t){const a=e.$.menu.querySelector(".color-sample");return a.classList.add("selected"),a.setAttribute("aria-current",!0),void e._setActiveDescendant(a)}t.removeAttribute("aria-current"),t.classList.remove("selected");let n=t.nextElementSibling;if(!n){let a=t.parentElement.nextElementSibling;for(;a;){if(a.classList.contains("grid-samples-container")){n=a.children[0];break}a=a.nextElementSibling}n||(n=e.$.menu.querySelector(".color-sample"))}n.classList.add("selected"),n.setAttribute("aria-current",!0),e._setActiveDescendant(n),e.ensureVisible()}_prev(){const e=this,t=e.$.menu.querySelector(".color-sample.selected");if(!t){const a=e.$.menu.querySelector(".color-sample");return a.classList.add("selected"),a.setAttribute("aria-current",!0),void e._setActiveDescendant(a)}t.removeAttribute("aria-current"),t.classList.remove("selected");let n=t.previousElementSibling;if(!n){let a=t.parentElement.previousElementSibling;for(;a;){if(a.classList.contains("grid-samples-container")){n=a.children[a.children.length-1];break}a=a.previousElementSibling}n||(n=e.$.menu.querySelector(".grid-samples-container:last-of-type .color-sample:last-of-type"))}n.classList.add("selected"),n.setAttribute("aria-current",!0),e._setActiveDescendant(n),e.ensureVisible()}_move(e){const t=this;if(t.opened){switch(e.keyCode){case 9:case 13:case 27:e.preventDefault();break;case 37:case 38:e.preventDefault(),t[t.rightToLeft?"_next":"_prev"]();break;case 39:case 40:e.preventDefault(),t[t.rightToLeft?"_prev":"_next"]()}e.stopPropagation()}}_inputSelectHandler(){const e=this;e.readonly&&(e.$.input.selectionStart=e.$.input.selectionEnd)}_inputChangeHandler(e){e.stopPropagation(),this._performSelect()}_keyDownHandler(e){const t=this;t._suppressKeyPressRepeat=![37,38,39,40,9,13,27,16,17,18].includes(e.keyCode),e.shiftKey||e.ctrlKey||(e.altKey?"ArrowUp"===e.key?t.close():"ArrowDown"===e.key&&t.open():t._move(e))}_keyUpHandler(e){const t=this;if(!(e.shiftKey||e.altKey||e.ctrlKey))switch(e.keyCode){case 40:case 39:case 38:case 37:case 16:case 17:case 18:40===e.keyCode&&e.altKey&&t.open(),38===e.keyCode&&e.altKey&&t.close();break;case 9:case 13:if(!t.opened)return void(13===e.keyCode&&t.open());t._performSelect(),e.stopPropagation(),e.preventDefault();break;case 27:if(!t.opened)return;t.close(),e.stopPropagation(),e.preventDefault();break;default:if(t.readonly)return void(32!==e.keyCode||t.opened||t.open());t._lookup(e),!t.opened||e.ctrlKey||e.shiftKey||(e.stopPropagation(),e.preventDefault()),t.$.input.dataValue=t.$.input.value,t._isValidColor(t.value)||(t.$colorSampleContainer.addClass("no-color"),t.$.colorSample.setAttribute("aria-label","No color"),t.$.colorSample.style.backgroundColor="")}}propertyChangedHandler(e,t,n){const a=this;if("dropDownHeight"===e)a.$.scrollView.style.setProperty("--smart-input-drop-down-menu-height",a.dropDownHeight+"px");else if("opened"===e)a.opened=t,n?a.open():a.close();else if("placeholder"===e){if(a.readonly){const i=a.getAttribute("aria-label");if(i&&i!==t)return;n?a.setAttribute("aria-label",n):a.removeAttribute("aria-label")}}else"readonly"===e?a._setAriaRelations():"theme"===e?a.$.scrollView.setAttribute(e,n):"rightToLeft"===e?n?a.$.scrollView.setAttribute("right-to-left",""):a.$.scrollView.removeAttribute("right-to-left"):"valueFormat"===e?(a.value=a._formatValue(a.value),a.$.input.dataValue=a.value):"displayMode"===e?a.open():"value"===e?(a.$.input.value=n,a._performSelect(t)):super.propertyChangedHandler(e,t,n)}_createElement(){const e=this,t=document.createElement("div"),n=document.createElement("div");n.classList.add("smart-color-input-drop-down-menu","smart-color-panel"),n.setAttribute("theme",e.theme),e.$.scrollView=n,e.rightToLeft?e.$.scrollView.setAttribute("right-to-left",""):e.$.scrollView.removeAttribute("right-to-left"),e.$.menu=t,e.$.menu.classList.add("default-samples-container","grid-mode-container","smart-container"),e.$.scrollView.onclick=function(a){a.stopPropagation(),a.preventDefault(),e._performSelect(),e.$.input.focus()},e.classList.add("smart-drop-down-box","smart-color-picker"),e.value?(e.$colorSampleContainer.removeClass("no-color"),e.$.colorSample.setAttribute("aria-label",e.value)):(e.$colorSampleContainer.addClass("no-color"),e.$.colorSample.setAttribute("aria-label","No color")),e._cssColorNamesHEX={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},e._performSelect(e.value)}_setAriaRelations(){const e=this,t=e.getAttribute("aria-label");e.readonly?(e.setAttribute("role","button"),!t&&e.placeholder&&e.setAttribute("aria-label",e.placeholder),e.$.input.setAttribute("aria-hidden",!0),e.$.input.removeAttribute("aria-activedescendant"),e.$.input.removeAttribute("aria-controls"),e.$.dropDownButton.setAttribute("aria-hidden",!0)):(e.setAttribute("role","combobox"),t&&t===e.placeholder&&e.removeAttribute("aria-label"),e.$.input.setAttribute("role","searchbox"),e.$.input.removeAttribute("aria-hidden",!0),e.$.dropDownButton.removeAttribute("aria-hidden")),e.setAttribute("aria-expanded",e.opened),e.setAttribute("aria-haspopup","listbox"),e.$.scrollView.setAttribute("role","listbox")}})},4232:()=>{Smart.Utilities.Assign("Complex",class{constructor(e,t){if("string"==typeof e)this.complexNumber=this.parseComplexNumber(e),this.realPart=this.complexNumber.realPart,this.imaginaryPart=this.complexNumber.imaginaryPart;else{if("number"!=typeof e)throw new Error("Can't create complex number");if(this.realPart=e,"number"==typeof t)this.imaginaryPart=t;else{if(void 0!==t)throw new Error("Can't create complex number: invalid imaginary part");this.imaginaryPart=0}this.complexNumber=this.parseComplexNumber(this.realPart,this.imaginaryPart)}}valueOf(){return 0===this.imaginaryPart?this.realPart:null}isNaN(){return isNaN(this.realPart)||isNaN(this.imaginaryPart)}isZero(){return!(0!==this.realPart&&"-0"!==this.realPart.toString()||0!==this.imaginaryPart&&"-0"!==this.imaginaryPart.toString())}isFinite(){return isFinite(this.realPart)&&isFinite(this.imaginaryPart)}isInfinite(){return!(this.isNaN()||this.isFinite())}parseComplexNumber(e,t){const n={realPart:0,imaginaryPart:0};if(null==e)n.realPart=n.imaginaryPart=0;else if(void 0!==t)n.realPart=e,n.imaginaryPart=t;else switch(typeof e){case"object":if("imaginaryPart"in e&&"realPart"in e)n.realPart=e.realPart,n.imaginaryPart=e.imaginaryPart;else{if(2!==e.length)throw SyntaxError("Invalid Complex Number Parameter");n.realPart=e[0],n.imaginaryPart=e[1]}break;case"string":{n.imaginaryPart=n.realPart=0;const a=e.match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g);let i=1,o=0;if(null===a)throw SyntaxError("Invalid Complex Number Parameter");for(let r=0;r<a.length;r++){const l=a[r];if(" "!==l&&"\t"!==l&&"\n"!==l)if("+"===l)i++;else if("-"===l)o++;else if("i"===l||"I"===l){if(i+o===0)throw SyntaxError("Invalid Complex Number Parameter");" "===a[r+1]||isNaN(a[r+1])?n.imaginaryPart+=parseFloat((o%2?"-":"")+"1"):(n.imaginaryPart+=parseFloat((o%2?"-":"")+a[r+1]),r++),i=o=0}else{if(i+o===0||isNaN(l))throw SyntaxError("Invalid Complex Number Parameter");"i"===a[r+1]||"I"===a[r+1]?(n.imaginaryPart+=parseFloat((o%2?"-":"")+l),r++):n.realPart+=parseFloat((o%2?"-":"")+l),i=o=0}}if(i+o>0)throw SyntaxError("Invalid Complex Number Parameter");break}case"number":n.imaginaryPart=0,n.realPart=e;break;default:throw SyntaxError("Invalid Complex Number Parameter")}return n}compare(e,t){const n=this.parseComplexNumber(e,t),a=this.parseComplexNumber("1e-16");return Math.abs(n.realPart-this.realPart)<=a&&Math.abs(n.imaginaryPart-this.imaginaryPart)<=a}toString(){let e=this.realPart,t=this.imaginaryPart,n="";return this.isNaN()?"NaN":this.isZero()?"0":this.isInfinite()?"Infinity":(0!==e&&(n+=e),0!==t&&(0!==e?n+=t<0?" - ":" + ":t<0&&(n+="-"),t=Math.abs(t),1!==t&&(n+=t),n+="i"),n||"0")}})},6057:()=>{(()=>{Smart.DataAdapter=window.smartDataAdapter=class{constructor(t){t||(t={});const n=Object.assign(this,t);n.key=(65536*(1+Math.random())|0).toString(16).substring(1),n.$document=Smart.Utilities.Extend(document),n.boundSource=!1===n.observable||n.virtualDataSource?[]:new Smart.ObservableArray,n.dataItemById=[],void 0===n.allowAdd&&(n.allowAdd=!0),void 0===n.allowRemove&&(n.allowRemove=!0),void 0===n.allowUpdate&&(n.allowUpdate=!0),void 0===n.mapChar&&(n.mapChar="."),n.observable=void 0===t.observable&&!n.virtualDataSource,void 0===n.sanitizeHTML&&(n.sanitizeHTML="blackList"),n._expandedRowIds=[],t.dataSource||(n.dataSource=[]),t.dataFields||(n.dataFields=[]),t.dataSourceType||(n.dataSourceType="array"),t.id||(n.id=null),t.autoFetch||(n.autoFetch=!0),t.dataFields&&(n.dataFields=t.dataFields),Object.defineProperty(n,"groupBy",{configurable:!1,enumerable:!0,get:()=>n._groupBy?n._groupBy:[],set(a){const i=()=>{n.boundHierarchy=null,n.refreshHierarchy(),n.onGroup&&n.onGroup()};n._groupBy=new Smart.ObservableArray(a),n._groupBy.notify(function(){i()}),n.isInitialized&&i()}}),n.groupBy=t.groupBy?t.groupBy.toArray?t.groupBy.toArray():t.groupBy:[],t&&!1!==t.autoBind&&n.dataBind(),n.isInitialized=!0}beginUpdate(){this.isUpdating=!0}endUpdate(){const t=this;t.isUpdating=!1,t.refreshIndexes(),t.refreshHierarchy()}get expandHierarchy(){return void 0===this._expandHierarchy&&(this._expandHierarchy=!1),this._expandHierarchy}set expandHierarchy(t){const n=this;n._expandHierarchy=t,n.isInitialized&&n.refreshHierarchy()}_getDataField(t){switch(t.name){case"leaf":case"parent":case"expanded":case"checked":case"selected":case"level":case"icon":case"data":case"group":case"children":case"items":t.map=t.map?t.map.replace(t.name,"$"+t.name):t.name,t.name="$"+t.name}}get dataFields(){return this._dataFields}set dataFields(t){const n=this;return n._dataFields=n._getDataFieldObjects(t),n._dataFields}_getDataFieldObjects(t){const n=this;let a=[];if("number"==typeof t){const i="A".charCodeAt(0);let o="",r=0;for(let l=0;l<t;l++){const s=String.fromCharCode(i+r);r++,a.push({name:o+s,dataType:"string"}),r>=26&&(r=0,o+="A")}}else if(Array.isArray(t)&&t.length>0)for(let i=0;i<t.length;i++){const o=t[i];if("string"==typeof o){const r=o.split(":"),l=r[0].trim(),s=r.length>1?r[1].trim():"string";a.push({name:l,dataType:s})}else a.push(o);n._getDataField(a[a.length-1])}return a}get dataSource(){const t=this;return t._dataSource||(t._dataSource=[]),t._dataSource}set dataSource(t){const n=this;n._dataSource=t,n.isInitialized&&(n.boundSource=!1===n.observable||n.virtualDataSource?[]:new Smart.ObservableArray,n.dataItemById=[],n.bindingCompleted=!1,n.dataBind(),n.refreshIndexes())}get canNotify(){const t=this;return void 0===t._canNotify&&(t._canNotify=!0),t._canNotify}set canNotify(t){this._canNotify=t}_notify(t){const n=this;n.canNotify&&n.notifyFn&&n.notifyFn(t)}notify(t){t&&(this.notifyFn=t)}toArray(){const t=this;return!1===t.observable?t.boundSource:t.boundSource.toArray()}dataBind(){const t=this;t.bindingCompleted=!1,t.clear();const n=()=>{t.observable&&(t.boundSource.notify||(t.boundSource=new Smart.ObservableArray),t.boundSource.notify(function(a){if("update"===a.action&&a.path&&a.path.indexOf(".")>=0&&-1===a.path.indexOf("children")&&-1===a.path.indexOf("loaded")&&-1===a.path.indexOf("level")&&-1===a.path.indexOf("leaf")&&-1===a.path.indexOf("expanded")){let i=!1;for(let o=0;o<t.dataFields.length;o++)a.path.indexOf(t.dataFields[o].name)>=0&&(i=!0);t._notify&&i&&t._notify({action:"update",data:a.target,index:a.index})}})),t._onBindingComplete()};"string"==typeof t.dataSource&&(t.dataSource.indexOf(".json")>=0||"json"===t.dataSourceType)?(t.url=t.dataSource,t.dataSourceType="json",new e(t,a=>{t.dataSource=a})):"string"==typeof t.dataSource&&t.dataSource.indexOf(".xml")>=0?(t.url=t.dataSource,t.dataSourceType="xml",new e(t,a=>{t.dataSource=a})):"string"==typeof t.dataSource&&t.dataSource.indexOf(".xlsx")>=0?(t.url=t.dataSource,t.dataSourceType="xlsx",new e(t,a=>{if(!a[0])return a=[],t._bindToArray(),void n();const i=Object.keys(a[0]),o={},r=[];if(!1!==t.exportHeader){let l=0;for(let s in i)o[i[s]]=t.dataFields[l++].name;for(let s=1;s<a.length;s++){const c=a[s],u={};for(let p in i){const g=i[p];u[o[g]]=c[g]}r.push(u)}t.dataSource=r}t._bindToArray(),n()})):"string"==typeof t.dataSource&&t.dataSource.indexOf(".csv")>=0?(t.url=t.dataSource,t.dataSourceType="csv",new e(t,a=>{t.dataSource=a})):"string"==typeof t.dataSource&&t.dataSource.indexOf(".tsv")>=0?(t.url=t.dataSource,t.dataSourceType="tsv",new e(t,a=>{t.dataSource=a})):"string"==typeof t.dataSource&&(t.dataSource.indexOf(".ics")>=0||t.dataSource.indexOf(".php")>=0&&"ics"===t.dataSourceType||t.dataSource.indexOf(".txt")>=0&&"ics"===t.dataSourceType)?(t.url=t.dataSource,t.dataSourceType="ics",new e(t,a=>{t.dataSource=a})):"string"==typeof t.dataSource&&(t.dataSource.indexOf("BEGIN:VCALENDAR")>=0||"ics"===t.dataSourceType)?(t._bindToICS(),n()):"string"==typeof t.dataSource&&(t.dataSource.indexOf("<?xml")>=0||"xml"===t.dataSourceType)?(t._bindToXML(),n()):"string"==typeof t.dataSource&&(t.dataSource.indexOf("  ")>=0||t.dataSource.indexOf(",")>=0||"tsv"===t.dataSourceType||"csv"===t.dataSourceType||"tab"===t.dataSourceType)?(t._bindToCSV(),n()):"array"===t.dataSourceType?(t._bindToArray(),n()):"json"===t.dataSourceType&&(t._bindToJSON(),n())}_bindToXML(){const t=this;let n=null,a=null;window.DOMParser&&(n=new DOMParser,a=n.parseFromString(t.dataSource,"text/xml")),void 0===t.root&&(t.root=""),void 0===t.record&&(t.record="");const i=a.querySelectorAll(t.root+" "+t.record),o=i.length,r=[];let l=t.dataFields?t.dataFields.length:0;if(0===l){const s=i[0],c=new Array;for(let u in s)c[c.length]={name:u};t.dataFields=c,l=c.length}for(let s=0;s<o;s++){const c=i[s],u={};if(void 0===c)break;if(t.id){const p=c.querySelector(t.id);u[t.id]=p.textContent}for(let p=0;p<l;p++){const g=t.dataFields[p],b=c.querySelector(g.map||g.name);u[g.name]=b.textContent}r[s]=u}t.canNotify=!1,t.dataSource=r,t.canNotify=!0,t._bindToArray()}_bindToCSV(){const t=this,n=""+t.dataSource,a=-1===n.indexOf(",")?"\t":",",i=n.split("\r"),o=new Array;let r=n.split("\n"),l=r.length;1===l&&i.length>1&&(r=i,l=r.length);const s=t.dataFields.length>0;for(let c=0;c<l;c++){const u=r[c],p={},g=r[c].split(a);for(let b=0;b<g.length;b++){let v=t.dataFields[b],y=g[b];if(v||(t.dataFields.push({name:y.trim()}),v=t.dataFields[t.dataFields.length-1]),v.map&&(y=u[v.map]),y=y.trim(),1!==c||s)switch(v.dataType){case"boolean":y="false"!==y;break;case"number":y=parseFloat(y);break;case"date":y=new Date(y)}else{let x="string";"false"===y||"true"===y?(x="boolean",y="false"!==y):isNaN(parseInt(y)&&-1===y.indexOf("/"))?(y.indexOf("-")>=0||y.indexOf("/")>=0||y.indexOf(":")>=0)&&"Invalid Date"!==new Date(y).toString()&&(x="date",y=new Date(y)):(x="number",y=parseFloat(y)),v.dataType||(v.dataType=x)}p[v.map||v.name||b.toString()]=y}(s||c>0)&&o.push(p)}t.canNotify=!1,t.dataSource=o,t.canNotify=!0,t._bindToArray()}_onBindingComplete(){const t=this;t._buildHierarchy(),t.onBindingComplete&&t.onBindingComplete({data:t.boundSource}),t._notify&&t._notify({action:"bindingComplete",data:t.boundSource}),t.bindingCompleted=!0}refreshHierarchy(){this.isUpdating||this._buildHierarchy()}find(){return this.boundSource.find.apply(this.boundSource,arguments)}onVirtualDataSourceRequested(t,n){const a=this;let i=n?n.first:1/0,o=n?n.last:1/0,r=n?n.row:null;if(void 0===i&&(i=1/0),void 0===o&&(o=1/0),a.virtualFirstIndex=i,a.virtualLastIndex=o,a.virtualDataSource){const l=function(c){void 0!==c.virtualDataSourceLength&&(a.virtualDataSourceLength=c.virtualDataSourceLength),new Smart.DataAdapter({dataSource:c.dataSource,dataFields:c.dataFields||a.dataFields,data:n,keyDataField:c.keyDataField,parentDataField:c.parentDataField,observable:!1,id:c.id||a.id,onBindingComplete(u){if(void 0===n.result&&(n.result=!0),a.virtualDataSourceOnExpand&&r)return a.groupBy.length>0?u.data&&u.data.length>0&&a.add(u.data):u.data&&u.data.length>0?a.add(u.data,r.$.id):r.leaf=!0,a.onFilter&&a.onFilter(),void t(n);i===1/0&&"scroll"===n.action?u.data&&u.data.length&&a.add(u.data):(a.canNotify=!1,a.dataSource=u.data,a.canNotify=!0),a.onFilter&&a.onFilter(),t(n)}})};let s={};if(n.sorting&&n.sorting.length>0){let c=[];for(let p in n.sorting)c.push(p+" "+n.sorting[p].sortOrder.toUpperCase());const u=" ORDER BY "+c.join(", ");s.orderBy=u}else s.orderBy="";if(void 0===i||void 0===o||0===i&&0===o)s.limit="";else{const c=o-i;s.limit=" LIMIT "+c+" OFFSET "+i,isNaN(c)&&(s.limit="")}if(s.groupBy=n.grouping&&n.grouping.length>0?" GROUP BY "+n.grouping[0]:"",n.filtering&&n.filtering.length>0){const c=(b,v)=>{switch(v.condition){case"EMPTY":return b+" = ''";case"NOT_EMPTY":return b+" != ''";case"EQUAL":return b+" = '"+v.value+"'";case"NOT_EQUAL":return b+" != '"+v.value+"'";case"CONTAINS_CASE_SENSITIVE":case"CONTAINS":return b+" LIKE '%"+v.value+"%'";case"DOES_NOT_CONTAIN_CASE_SENSITIVE":case"DOES_NOT_CONTAIN":return b+" NOT LIKE '%"+v.value+"%'";case"STARTS_WITH_CASE_SENSITIVE":case"STARTS_WITH":return b+" LIKE '"+v.value+"%'";case"ENDS_WITH_CASE_SENSITIVE":case"ENDS_WITH":return b+" LIKE '%"+v.value+"'";case"NULL":return b+" IS NULL";case"NOT_NULL":return b+" IS NOT NULL"}},u=(b,v)=>{switch(v.condition){case"EQUAL":return b+" = "+v.value;case"NOT_EQUAL":return b+" != "+v.value;case"GREATER_THAN":return b+" > "+v.value;case"GREATER_THAN_OR_EQUAL":return b+" >= "+v.value;case"LESS_THAN":return b+" < "+v.value;case"LESS_THAN_OR_EQUAL":return b+" <= "+v.value;case"NULL":return b+" IS NULL";case"NOT_NULL":return b+" IS NOT NULL";case"RANGE":return"("+b+" >= "+v.value+" and "+b+" <= "+v.valueTo+")"}},p=(b,v,y)=>{if(y.operator){var x=b(v,y.condition1),D=b(v,y.condition2);return"("+x+" "+y.operator+" "+D+")"}return b(v,y)};let g=[];for(let b in n.filtering){const v=n.filtering[b];let y=v.filters,x=[],D=" AND ";for(let T=0;T<y.length;T++){const M=y[T];switch(M.type){case"stringFilter":x.push(p(c,b,M));break;case"numericFilter":case"dateFilter":case"booleanFilter":x.push(p(u,b,M))}1===v.logicalOperators[T]&&(D=" OR ")}g.push("("+x.join(D)+")")}if(g.length>0){let b=" AND ";n.filterOperator&&"or"===n.filterOperator.toLowerCase()&&(b=" OR "),s.where=" WHERE "+g.join(b)}else s.where=""}else s.where="";if("dataBind"===n.action&&a.virtualDataSourceOnExpand&&a.keyDataField&&a.parentDataField&&(s.where?s.where+=" AND "+a.parentDataField+" IS NULL":s.where=" WHERE "+a.parentDataField+" IS NULL"),"update"===n.action){const c=[];for(let u in n.edit.row)"$"!==u&&u!==a.id&&c.push(u+"='"+n.edit.row[u]+"'");s.update=" SET "+c.join(", ")+" WHERE "+a.id+"="+n.edit.row[a.id]}if("remove"===n.action){const c=[];for(let u in n.edit.row)"$"!==u&&u!==a.id&&c.push(u+" = '"+n.edit.row[u]+"'");s.remove=" WHERE "+a.id+"="+n.edit.row[a.id]}if("add"===n.action){const c=[],u=[];for(let p in n.edit.row)"$"!==p&&(u.push(p),c.push("'"+n.edit.row[p]+"'"));s.add=" ("+u.join(", ")+")  VALUES ("+c.join(", ")+")"}"expand"===n.action?(a.groupDataField?s.where?s.where+=" AND "+a.groupDataField+" = '"+r[a.groupDataField]+"'":s.where=" WHERE "+a.groupDataField+" = '"+r[a.groupDataField]+"'":a.keyDataField&&a.parentDataField?s.where?s.where+=" AND "+a.parentDataField+" = "+r[a.keyDataField]:s.where=" WHERE "+a.parentDataField+" = "+r[a.keyDataField]:s.where?s.where+=" AND "+r.groupDataField+" = '"+r.label+"'":s.where=" WHERE "+r.groupDataField+" = '"+r.label+"'",s.limit="",s.groupBy="",a.virtualDataSourceOnExpand(l,{first:i,last:o,row:n.row,sorting:n.sorting,filtering:n.filtering,grouping:n.grouping,action:n.action,query:s})):a.virtualDataSource(l,{first:i,last:o,sorting:n.sorting,filtering:n.filtering,filterOperator:n.filterOperator||"and",grouping:n.grouping,action:n.action,query:s})}else t()}add(t,n){const a=this;if(!t)return;let i=!0;const o=function(r){const l=a._getDataItem(r,a.boundSource.length);if(a.dataItemById[l.$.id])return void 0!==n&&(l.$.parentId=n),null;a[a.boundSource.length]=l,a.dataItemById[l.$.id]=l;const s=a.boundSource.push(l);return void 0!==n&&(l.$.parentId=n),s||(i=!1),l};if(t.length){let r=[];for(let l=0;l<t.length;l++){const s=o(t[l]);s&&r.push(s)}a._notify({action:"add",data:r})}else{const r=o(t);a._notify({action:"add",data:r})}return a.refreshHierarchy(),i}refreshIndexes(){const t=this;for(let a=0;a<t.boundSource.length;a++)t[a]=t.boundSource[a],t[a].$.index=a,t.dataItemById[t[a].$.id]=t[a];let n=t.boundSource.length;for(;t[n];)delete t[n],n++}removeLast(){const t=this;delete t[t.boundSource.length-1];const n=t.boundSource.pop();return delete t.dataItemById[n.$.id],t._notify({action:"removeLast",data:n}),t.refreshHierarchy(),n}remove(t){const n=this;let a=n.indexOf(t);-1===a&&t&&t.$&&(a=n.indexOf(n.dataItemById[t.$.id])),n.removeAt(a)}removeAt(t){const n=this,a=n.boundSource[t];if(!a)throw new Error("Invalid Item Index");n.boundSource.splice(t,1),delete n.dataItemById[a.$.id],n.refreshIndexes(),n._notify({action:"remove",index:t,data:a}),n.refreshHierarchy()}update(t,n){const a=this;if(Smart.Utilities.Types.isArray(t)&&Smart.Utilities.Types.isArray(n)&&0===t.length&&0===n.length)return void a.refreshHierarchy();if(n.length&&t.length){let r=[];for(let l=0;l<t.length;l++){const s=a._getDataItem(n[l],t[l]),c=t[l];r.push(s),a.boundSource[c]=s,a[c]=a.boundSource[c],a.dataItemById[s.$.id]=a[c]}return a._notify({action:"update",index:t,data:r}),void a.refreshHierarchy()}const i=a._getDataItem(n,t);return i.$.id=a.boundSource[t].$.id,a.boundSource[t]=i,a[t]=a.boundSource[t],a.dataItemById[i.$.id]=a[t],a._notify({action:"update",index:t,data:i}),a.refreshHierarchy(),i}insert(t,n){const a=this;n=a._getDataItem(n,t);const i=a.boundSource.splice(t,0,n);return a.refreshIndexes(),a._notify({action:"insert",index:t,data:n}),a.refreshHierarchy(),i}move(t,n){if(n>t&&n-t==1||t===n)return;const a=this,i=a.boundSource.splice(t,1)[0];n>t&&n--,a.boundSource.splice(n,0,i),a.refreshIndexes(),a._notify({action:"move",index:n,data:a.boundSource[n]}),a.refreshHierarchy()}indexOf(t){return this.boundSource.indexOf(t)}get length(){const t=this;return void 0!==t.virtualDataSourceLength?t.virtualDataSourceLength:t.dataSourceLength?t.dataSourceLength:"number"==typeof t.dataSource?t.dataSource:t.bindingCompleted?t.boundSource.length:t.dataSource&&"string"!=typeof t.dataSource&&t.dataSource.length?t.dataSource.length:t.boundSource.length}clear(){const t=this;if(!t.isInitialized)return t._cachedValues=[],void(t.dataItemById=[]);for(let n=0;n<t.boundSource.length;n++)delete t[n];t._expandedRowIds=[],t._cachedValues=[],t.boundSource=t.observable?new Smart.ObservableArray:[],t.dataItemById=[],t.refreshHierarchy()}_getId(t,n,a){if(null===t||void 0===t.name||!t.name||!n.getAttribute){if(t&&t.toString().length>0&&n.getAttribute){let i=n.getAttribute(t);if(null!==i&&i.toString().length>0)return i.trim().split(" ").join("").replace(/([ #;?%&,.+*~\':'!^$[\]()=>|\/@])/g,"");{let o=t.split(this.mapChar);if(o.length>1){let r=n;for(let l=0;l<o.length;l++)void 0!==r&&(r=r[o[l]]);if(void 0!==r)return r}else if(void 0!==n[t])return n[t]}}return a}{let i=n.getAttribute(t.name);if(null!==i&&i.toString().length>0)return i;if(t.map)try{let o=n.getAttribute(t.map);if(null!==o&&o.toString().length>0)return o}catch(o){return a}}}_buildHierarchy(){const t=this;if(t.reservedNames){const a=t.reservedNames;a.leaf||(a.leaf="leaf"),a.parent||(a.parent="parent"),a.expanded||(a.expanded="expanded"),a.checked||(a.checked="checked"),a.selected||(a.selected="selected"),a.level||(a.level="level"),a.data||(a.data="data")}else t.reservedNames={leaf:"leaf",parent:"parent",expanded:"expanded",checked:"checked",selected:"selected",level:"level",icon:"icon",data:"data"};const n=t.reservedNames;if(t.childrenDataField){const a=[];for(let i=0;i<t.boundSource.length;i++){const o=Object.assign({},t.boundSource[i]);if(!o)continue;a.push(o);const r=function(s){const c=t.childrenDataField.split(t.mapChar);let u=null;if(c.length>1){let p=s;for(let g=0;g<c.length;g++)void 0!==p&&(p=p[c[g]]);u=p}else u=s.children;s.children=u,(null==s.children||s.children&&0===s.children.length)&&(s[n.leaf]=!0)};r(o),o[n.level]=0,o.$||(o.$={}),o[n.parent]=null,o[n.data]=o,void 0===o[n.expanded]&&(o[n.expanded]=!1,t.expandHierarchy&&(o[n.expanded]=!0));const l=function(s,c){if(c)for(let u=0;u<c.length;u++){let p=t._getDataItem(c[u],u);p&&(r(p),t.id||(p.$.id=function(){const b=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return b()+b()}()),p[n.level]=s[n.level]+1,p[n.parent]=s,p[n.data]=Object.assign({},p),s&&(s.children[u]=p),void 0===p[n.expanded]&&(p[n.expanded]=!1,t.expandHierarchy&&(p[n.expanded]=!0)),l(p,p.children))}else s.children=new Array};l(o,o.children)}if(t.boundHierarchy=a,!t._boundSourceUpdate){for(let i=0;i<t.boundHierarchy.length;i++){const o=t.boundHierarchy[i];if(o.children){const r=function(l){if(t.dataItemById[l.$.id]||(t.boundSource.canNotify=!1,t.dataItemById[l.$.id]=l,t.boundSource.canNotify=!0),l.children)for(let s=0;s<l.children.length;s++){const c=l.children[s];c.children&&r(c)}};r(o)}}t._boundSourceUpdate=!0}}if(t.xmlRoot&&"xml"===t.dataSourceType&&(t.boundHierarchy=this._getHierarchy("uid","_parentuid","children",null,t.boundSource)),t.keyDataField&&t.parentDataField)return["keyDataField","parentDataField"].forEach(a=>{switch(t[a]){case"parent":t[a]="$"+t[a]}}),void(t.boundHierarchy=this._getHierarchy(t.keyDataField,t.parentDataField,"children",null,t.boundSource));t.groupBy&&t.groupBy.length>0?t.boundHierarchy=this._getGroupHierarchy(t.groupBy,"children","label",null,"data",null,"parent",t.boundSource):t.virtualDataSourceOnExpand&&(t.boundHierarchy=this._getHierarchy("id","parentId","children",null,t.boundSource))}_getGroupHierarchy(t,n,a,i,o,r,l,s,c){let u=this;c||(c=0);let p=u.reservedNames;const g=function(){function M(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return M()+M()+"-"+M()+"-"+M()+"-"+M()+"-"+M()+M()+M()};let b=new Array;for(let M=0;M<t.length;M++)b[M]=g();n||(n="children"),a||(a="group"),o||(o="item"),l||(l="parent"),void 0===r&&(r="value");const v=new Array,y=new Array;let x=0;const D=function(M){let A=M;if(i)for(let B in i){const O=i[B];O.name&&O.map&&(A[O.map]=A[O.name])}return A};let T=!1;for(let M=0;M<s.length;M++){let A=Object.assign({},D(s[M]));A[p.leaf]=!1;let B=new Array,O=0;for(let V=0;V<t.length;V++){const Y=t[V],K=A[Y];null!==K?((""===K||void 0===K&&0===V)&&(T=!0),B[O++]={value:K,group:Y,hash:b[V]}):(B[O++]={value:null,group:Y,hash:b[V]},0===V&&(T=!0))}if(B.length!==t.length)break;let N=null,P="";for(let V=0;V<B.length;V++){const Y=B[V].value,K=B[V].group;if(P=P+"_"+B[V].hash+"_"+Y,null==y[P]){if(null===N){N={$:{}},N[p.level]=0,N[p.leaf]=!1,N[l]=null,N[a]=Y,N[o]=A,N.groupDataField=K,N[K]||(N[K]=N.data[K]),void 0!==A[p.expanded]?N[p.expanded]=A[p.expanded]:(N[p.expanded]=!1,u.expandHierarchy&&(N[p.expanded]=!0)),r&&(N[r]=A[r]),N[n]=new Array;let W=v.length+c;this.id&&"number"!=typeof A.$.id&&!isFinite(A.$.id)||(W="Item"+W),void 0===N.$.id&&(N.$.id=W),u._expandedRowIds[N.$.id]&&(N[p.expanded]=!0),v[x++]=N}else{const W={$:{}};W[p.level]=N[p.level]+1,W[l]=N,W[a]=Y,W[n]=new Array,W[o]=A,W.groupDataField=K,W[p.leaf]=!1,W[K]||(W[K]=W.data[K]),void 0!==A[p.expanded]?W[p.expanded]=A[p.expanded]:(W[p.expanded]=!1,u.expandHierarchy&&(W[p.expanded]=!0)),r&&(W[r]=A[r]),void 0===W.$.id&&(W.$.id=N.$.id+"_"+N[n].length),u._expandedRowIds[W.$.id]&&(W[p.expanded]=!0),N[n][N[n].length]=W,N=W}y[P]=N}else N=y[P]}A&&(A[p.leaf]=!0),null!==N?(null===this.id?void 0===A.$.id&&(A.$.id=N.$.id+"_"+N[n].length):void 0===A.$.id&&-1===A.$.id.toString().indexOf(N.$.id)&&(A.$.id=N.$.id+"_"+A.$.id),A[l]=N,A[p.level]=N[p.level]+1,N[n][N[n].length]=A):void 0===A.$.id&&(A.$.id=g())}if(T){let M=null,A=!1;for(let B=0;B<v.length;B++){const O=v[B];if(!O[O.groupDataField]){M=O,M.$.id.toString().startsWith("Item")&&(A=!0),v.splice(B,1);break}}if(M&&(v.push(M),A))for(let B=0;B<v.length;B++)v[B].$.id="Item"+B}return v}_getHierarchy(t,n,a,i,o){const r=this,l=new Array;let s=this.boundSource;if(o&&(s=o),0===this.boundSource.length)return null;const c=null!==a?a:"children";let u=new Array,p=s,g=p.length,b=r.reservedNames;const v=function(y){let x=y;if(i)for(let D in i){const T=i[D];T.name&&T.map&&(x[T.map]=x[T.name])}return x};for(let y=0;y<g;y++){let x=p[y],D=x[n],T=x[t];"parentId"===n&&(D=x.$.parentId),"id"===t&&(T=x.$.id),x[c]=new Array,r.expandHierarchy&&void 0===x[b.expanded]&&(x[b.expanded]=r.expandHierarchy),u[T]={parentId:D,item:x}}for(let y=0;y<g;y++){const x=p[y];let D=x[n],T=x[t];if("parentId"===n&&(D=x.$.parentId),"id"===t&&(T=x.$.id),void 0!==u[D]){let M={parentId:D,item:u[T].item},A=u[D].item;A[c]||(A[c]=new Array);let B=A[c].length;M=M.item,b?M[b.parent]=A:M.parent=A;const O=v(M);A[c][B]=O,u[D].item=A,u[T].item=M}else{let M=u[T].item;b?void 0===M[b.parent]&&(M[b.parent]=null):void 0===M.parent&&(M.parent=null);const A=v(M);b?A[b.level]=0:A.level=0,l[l.length]=A}}if(0!==l.length){let y=function(x,D){for(let T=0;T<D.length;T++){const M=D[T];b?M[b.level]=x:M.level=x;const A=M[c];A&&A.length>0?(M.leaf=!1,y(x+1,A)):r.virtualDataSourceOnExpand?void 0===M.leaf&&(M.leaf=!1):b?M[b.leaf]=!0:M.leaf=!0}};y(0,l)}return l}summarize(t,n){Array.isArray(t)||(t=[t]);let i=[];for(let s=0;s<t.length;s++){const c=t[s];for(let u in c)i.push({dataField:u,functions:c[u]})}t=i;let o={},r=new Array;n||(n=this.boundSource);let l=n.length;if(0!==l&&void 0!==l){for(let s=0;s<l;s++){let c=n[s];for(let u=0;u<t.length;u++){const p=t[u];let g=c[p.dataField];if(p.functions){o[p.dataField]=o[p.dataField]||{},r[p.dataField]=r[p.dataField]||0,r[p.dataField]++;const b=function(y){for(let x in y){let D=o[p.dataField][x];null==D&&(o[p.dataField][x]=0,D=0),"function"==typeof y[x]&&(D=y[x](D,g,p.dataField,c)),o[p.dataField][x]=D}};let v=parseFloat(g);v=!isNaN(v),v&&(g=parseFloat(g)),"number"==typeof g&&isFinite(g)?p.functions.forEach(function(y){let x=o[p.dataField][y];if(null==x&&(x=0,"min"===y&&(x=9999999999999),"max"===y&&(x=-9999999999999),"median"===y&&(x=[])),"sum"===y||"avg"===y||"stdev"===y||"stdevp"===y||"var"===y||"varp"===y)x+=parseFloat(g);else if("product"===y)0===s?x=parseFloat(g):x*=parseFloat(g);else if("min"===y)x=Math.min(x,parseFloat(g));else if("max"===y)x=Math.max(x,parseFloat(g));else if("count"===y)x++;else if("median"===y)x.push(parseFloat(g));else if("object"==typeof y)return void b(y);o[p.dataField][y]=x}):p.functions.forEach(function(y){if("min"===y||"max"===y||"count"===y||"product"===y||"sum"===y||"avg"===y||"stdev"===y||"stdevp"===y||"var"===y||"varp"===y){if(null===g)return!0;let x=o[p.dataField][y];return null==x&&(x=0),o[p.dataField][y]=x,!0}"object"==typeof y&&b(y)})}}}for(let s=0;s<t.length;s++){const c=t[s];if(c.functions){if(o[c.dataField]||(o[c.dataField]={},c.functions.forEach(function(u){o[c.dataField][u]=0})),void 0!==o[c.dataField].avg){const u=o[c.dataField].avg,p=r[c.dataField];o[c.dataField].avg=0===p||void 0===p?0:u/p}else if(void 0!==o[c.dataField].count)o[c.dataField].count=l;else if(void 0!==o[c.dataField].median){let u=o[c.dataField].median;u.sort(function(p,g){return p-g}),o[c.dataField].median=.5*(u[Math.floor((u.length+1)/2)-1]+u[Math.ceil((u.length+1)/2)-1])}(o[c.dataField].stdev||o[c.dataField].stdevp||o[c.dataField].var||o[c.dataField].varp)&&c.functions.forEach(function(u){if("stdev"===u||"var"===u||"varp"===u||"stdevp"===u){const g=l,b=o[c.dataField][u]/l;let v=0;for(let x=0;x<l;x++){let D=n[x][c.dataField];v+=(D-b)*(D-b)}let y="stdevp"===u||"varp"===u?g:g-1;0===y&&(y=1),"var"===u||"varp"===u?o[c.dataField][u]=v/y:"stdevp"!==u&&"stdev"!==u||(o[c.dataField][u]=Math.sqrt(v/y))}})}}return o}}_getDataItem(t,n){const a=this,i={};if(!t)return{$:{id:n,isEmpty:!0,index:n}};if("string"==typeof t&&(t={"":t}),"number"==typeof a.dataSource||a.dataSourceLength){for(let s=0;s<a.dataFields.length;s++)i[(a.dataFields?a.dataFields[s]:{}).name]="";return i.$={},i.$.id=n,i.$.index=n,i}const r=t;if(void 0!==r.expanded&&(i.expanded=r.expanded,i.expanded="true"===r.expanded||!0===r.expanded||1===r.expanded),a.childrenDataField?void 0!==r[a.childrenDataField]&&(i.children=r[a.childrenDataField]):void 0!==r.children?i.children=r.children:void 0!==r.items&&(i.children=r.items),void 0!==r.leaf&&(i.leaf=r.leaf),void 0!==r.level&&(i.level=r.level),a.keyDataField&&void 0!==r[a.keyDataField]&&(i[a.keyDataField]=r[a.keyDataField]),a.parentDataField&&void 0!==r[a.parentDataField]&&(i[a.parentDataField]=r[a.parentDataField]),0===a.dataFields.length){const s=Object.getOwnPropertyNames(t);for(let c=0;c<s.length;c++)"$"!==s[c]&&a.dataFields.push({name:s[c],dataType:"string"})}for(let s=0;s<a.dataFields.length;s++){const c=a.dataFields?a.dataFields[s]:{};let u="";if(null==c)continue;if(t.length&&(u=t[s]),c.map){let g=c.map.split(a.mapChar);if(g.length>0){let b=r;for(let v=0;v<g.length;v++)r&&(b=b[g[v]]);u=b}else u=r[c.map]}null!=u?u=u.toString():void 0===u&&null!==u&&(u="");let p=!1;""===u&&(p=!0,u=t[c.name],void 0===c.dataType&&(c.dataType="any"),null!=u?"array"!==c.dataType&&("any"===c.dataType?u=Array.isArray(t[c.name])?[...t[c.name]]:"object"==typeof t[c.name]?Object.assign({},t[c.name]):t[c.name]:"date"!==c.dataType&&(u=u.toString())):u=void 0===u&&"any"===c.dataType?null:""),"[object Object]"===u&&c.map&&p&&(u=""),a._cachedValues[u+"_"+c.dataType]?u=a._cachedValues[u+"_"+c.dataType]:("bool"===c.dataType||"boolean"===c.dataType?"true"===u||"1"===u?u=!0:"false"!==u&&"0"!==u||(u=!1):"number"===c.dataType?(-1===u.indexOf(".")&&u.indexOf(",")>=0&&u.substring(1+u.indexOf(",")).length<3&&(u=u.replace(",",".")),u=a.$document.deserialize(""+u,c.dataType,!0)):"any"!==c.dataType&&(u=a.$document.deserialize(""+u,c.dataType,!0)),"any"!==c.dataType&&(a._cachedValues[u+"_"+c.dataType]=u)),"string"!==c.dataType&&"boolean"!==c.dataType&&"bool"!==c.dataType&&"any"!==c.dataType&&(isNaN(u)||u===-1/0||u===1/0)&&(u=0),"parent"!==c.name&&"group"!==c.name&&"leaf"!==c.name&&"level"!==c.name?("string"===c.dataType&&/<.+?>/.test(u)&&u.replace&&("all"===a.sanitizeHTML?u=u.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;"):"blackList"===a.sanitizeHTML&&(u=window.Smart.Utilities.Core.sanitizeHTML(u))),i[c.name]=u):i.$[c.name]=u}let l=n;if(a.id)l=r[a.id],"object"==typeof l&&(l=n),r.$&&r.$.id&&(l=r.$.id);else if(!a.virtualDataSource&&a.dataItemById&&a.dataItemById[l])for(l=a.length;a.dataItemById[l];)l++;return i.$||(i.$={}),i.$.id=l,i.$.index=n,new Object(i)}_bindToArray(){const t=this,n="number"==typeof t.dataSource||t.dataSourceLength,a=[];t.boundSource.canNotify=!1;const i=n?"number"==typeof t.dataSource?t.dataSource:t.dataSource.length:t.observable?t.length:t.dataSource.length;for(let o=0;o<i;o++){const l=t._getDataItem(n?{}:t.dataSource[o],o);a.push(l)}if(n&&t.dataSourceLength&&t.dataSource.length>0)for(let o=0;o<t.dataSource.length;o++){const r=t.dataSource[o].cell,l=t.dataSource[o].value,s=r.replace(/[^0-9]/g,""),c=r.replace(/[0-9]/g,"");a[s-1][c]=l}t.boundSource=!1===t.observable||t.virtualDataSource?[]:new Smart.ObservableArray(a),t.observable&&(t.boundSource=new Smart.ObservableArray(a));for(let o=0;o<i;o++)t[o]=t.observable?t.boundSource[o]:a[o],t.dataItemById[t[o].$.id]=t[o];!1===t.observable&&(t.boundSource=a),t.boundSource.canNotify=!0}_bindToICS(){const t=this,n=""+t.dataSource,a=t.rowDelimiter||"\n",i=n.split("\r"),o=[];let r=n.split(a),l=r.length;1===l&&i.length>1&&(r=i,l=r.length);const s=function(p,g){var b=/^(\d{4})(\d{2})(\d{2})(T(\d{2})(\d{2})(\d{2})Z)?$/.exec(p);if(!b)throw new Error("Invalid UNTIL value: "+p);return g?new Date(b[1],b[2]-1,b[3],0,0,0,0):new Date(Date.UTC(b[1],b[2]-1,b[3],b[5]||0,b[6]||0,b[7]||0))};for(let p=0;p<l;p++){const g=r[p].trim();if(g.indexOf("BEGIN:VEVENT")>=0)var c={};else if(c)if(g.indexOf("BEGIN:VALARM")>=0)var u={};else{if(u){if(g.indexOf("ACTION")>=0){u.ACTION=g.substring(g.indexOf("ACTION")+7);continue}if(g.indexOf("DESCRIPTION")>=0){u.DESCRIPTION=g.substring(g.indexOf("DESCRIPTION")+12);continue}if(g.indexOf("TRIGGER")>=0){u.TRIGGER=g.substring(g.indexOf("TRIGGER")+8);continue}if(g.indexOf("END:VALARM")>=0){c.ALARM||(c.ALARM=[]),c.ALARM.push(u),u=void 0;continue}}if(g.indexOf("SUMMARY")>=0)c.SUMMARY=g.substring(g.indexOf("SUMMARY")+8);else if(g.indexOf("LOCATION")>=0)c.LOCATION=g.substring(g.indexOf("LOCATION")+9);else if(g.indexOf("DESCRIPTION")>=0)c.DESCRIPTION=g.substring(g.indexOf("DESCRIPTION")+12);else if(g.indexOf("RRULE")>=0)c.RRULE=g.substring(g.indexOf("RRULE")+6);else if(g.indexOf("RECURRENCE-ID")>=0)c.RECURRENCEID=g.substring(g.indexOf("RECURRENCE-ID")+14);else if(g.indexOf("RECURRENCE-ID;VALUE=DATE")>=0)c.RECURRENCEID=g.substring(g.indexOf("RECURRENCE-ID;VALUE=DATE")+25);else if(g.indexOf("EXDATE;VALUE=DATE")>=0){const b=g.substring(g.indexOf("EXDATE;VALUE=DATE")+20);c.EXDATE=b}else if(g.indexOf("EXDATE")>=0){const b=g.substring(g.indexOf("EXDATE")+7);c.EXDATE=b}else g.indexOf("DTEND;VALUE=DATE")>=0?c.DTEND=s(g.substring(g.indexOf("DTEND;VALUE=DATE")+17),!0):g.indexOf("DTEND")>=0?c.DTEND=s(g.substring(g.indexOf("DTEND")+6)):g.indexOf("DTSTART;VALUE=DATE")>=0?c.DTSTART=s(g.substring(g.indexOf("DTSTART;VALUE=DATE")+19),!0):g.indexOf("DTSTART")>=0?c.DTSTART=s(g.substring(g.indexOf("DTSTART")+8)):g.indexOf("UID")>=0?c.uid=c.UID=g.substring(g.indexOf("UID")+4):g.indexOf("STATUS")>=0?c.STATUS=g.substring(g.indexOf("STATUS")+7):g.indexOf("TITLE")>=0?c.TITLE=g.substring(g.indexOf("TITLE")+6):g.indexOf("CATEGORIES")>=0?c.CATEGORIES=g.substring(g.indexOf("CATEGORIES")+11):g.indexOf("END:VEVENT")>=0&&(o.push(c),c.ALARM&&(c.ALARM=JSON.stringify(c.ALARM)),u=void 0)}}t.canNotify=!1,t.dataSource=o,t.canNotify=!0,t._bindToArray()}_bindToJSON(){const t=this,n=[],a=t.dataSource.length?t.dataSource:Object.entries(t.dataSource);t.boundSource.canNotify=!1;for(let i=0;i<a.length;i++){const r=t._getDataItem(a[i],i);n.push(r)}t.boundSource=!1===t.observable||t.virtualDataSource?[]:new Smart.ObservableArray(n);for(let i=0;i<t.length;i++)t[i]=t.boundSource[i],t.dataItemById[t[i].$.id]=t[i];!1===t.observable&&(t.boundSource=n),t.boundSource.canNotify=!0}sortBy(t,n,a){const i=this;if(!n)for(let o=0;o<i.dataFields.length;o++){const r=i.dataFields[o];if(r.name===t){n=r.dataType;break}}if(i.boundHierarchy){if((!t||0===t.length)&&i.groupBy.length>0)return void i.refreshHierarchy();const o=(l=>{let s=[];for(;l;){s=s.concat(l);for(let c=0;c<l.length;c++)l[c].children&&(s=s.concat(l[c].children));l=l.children}return s})(i.boundHierarchy);o&&o.find(l=>{if(l.summaryRow)return l})&&i.refreshHierarchy();const r=function(l){i._sort(l,t,a,n);for(let s=0;s<l.length;s++){const c=l[s];c.children&&r(c.children,t,a,n)}};r(i.boundHierarchy)}else i._sort(i.boundSource,t,a,n)}_createFilter(t,n){const a={"=":"EQUAL","<>":"NOT_EQUAL","<":"LESS_THAN",">":"GREATER_THAN","<=":"LESS_THAN_OR_EQUAL",">=":"GREATER_THAN_OR_EQUAL",equal:"EQUAL","not equal":"NOT_EQUAL","less than":"LESS_THAN","greater than":"GREATER_THAN","greater than or equal":"GREATER_THAN_OR_EQUAL","less than or equal":"LESS_THAN_OR_EQUAL","starts with":"STARTS_WITH","ends with":"ENDS_WITH",notEqual:"NOT_EQUAL",lessThan:"LESS_THAN",greaterThan:"GREATER_THAN",greaterThanOrEqual:"GREATER_THAN_OR_EQUAL",lessThanOrEqual:"LESS_THAN_OR_EQUAL",null:"null","":"EMPTY",isblank:"EMPTY",isnotblank:"NOT_EMPTY",isBlank:"EMPTY",isNotBlank:"NOT_EMPTY",contains:"CONTAINS",notcontains:"DOES_NOT_CONTAIN",notContains:"DOES_NOT_CONTAIN",startswith:"STARTS_WITH",endswith:"ENDS_WITH",startsWith:"STARTS_WITH",endsWith:"ENDS_WITH",NULL:"NULL",NOT_NULL:"NOT_NULL"};let i=[];for(let c=0;c<n.length;c++){const u=n[c],p=-1===u.indexOf('"')?u.split(" "):u.split('"');let g=[];for(let b=0;b<p.length;b++){const v=p[b];""!==v&&g.push(v.trim())}i.push(g)}const o=new Smart.FilterGroup,r=[],l=[];for(let c=0;c<i.length;c++){const u=i[c];if(u.length>1){const p=new Smart.FilterGroup;let g="and",b=0;for(let v=0;v<u.length;v++){const y=u[v];if("and"!==y&&"or"!==y){if(b++,2===b){const x=p.createFilter(t,y,a[u[v-1]]);b=0,g&&p.addFilter(g,x)}}else g=y}l.push(p)}else{const p=u[0];if("and"!==p&&"or"!==p)throw new Error('Filter Exprresion expects "AND" or "OR", but the token is: '+p);r.push(p)}}let s=0;if(1===l.length)return l[0];for(let c=0;c<l.length;c++){let u=r[s];(c+1)%2==0&&s++,u||(u="and"),o.addFilter(u,l[c])}return o}filterBy(t,...n){const a=this,i=(()=>{for(let r=0;r<a.dataFields.length;r++){const l=a.dataFields[r];if(l.name===t)return l.dataType}})(),o=a._createFilter(i,n);return a.boundSource.filter(r=>o.evaluate(r[t]))}_filter(t,n="and"){const a=this,i=[],o=[];if(0===t.length)return void a.clearFilter();const r=c=>{for(let u=0;u<a.dataFields.length;u++){const p=a.dataFields[u];if(p.name===c)return p.dataType}};let l,s;"and"===n?(l=!0,s=function(c,u,p){return c&&u.evaluate(p[u.dataField])}):(l=!1,s=function(c,u,p){return c||u.evaluate(p[u.dataField])});for(let c=0;c<t.length;c++){const u=t[c],p=u[0];let g=null;g=u[1]instanceof Smart.FilterGroup?u[1]:a._createFilter(r(p),u.splice(1)),g&&(o.push(p),g.dataField=p,i.push(g))}if(a.boundHierarchy){const c=function(p){let g=l;for(let b=0;b<i.length;b++)g=s(g,i[b],p);return p.$.filtered=g,g},u=function(p,g,b){let v=0;for(let y=0;y<p.length;y++){const x=p[y];c(x),x.$.filtered&&v++,x.children&&u(x.children,x,g)}v>0&&a.groupBy.length>0&&g?(g.$.filtered=!0,b&&!b.$.filtered&&(b.$.filtered=!0)):v>0&&v!==p.length&&g?(g.$.filtered=null,b&&!b.$.filtered&&(b.$.filtered=null)):v>0&&v===p.length&&g&&(g.$.filtered=!0,b&&!b.$.filtered&&(b.$.filtered=!0))};u(a.boundHierarchy,null,null)}else for(let c=0;c<a.boundSource.length;c++){const u=a.boundSource[c];let p=l;for(let g=0;g<i.length;g++)p=s(p,i[g],u);u.$.filtered=p}a.onFilter&&a.onFilter()}clearGroup(){const t=this;t.groupBy=[],t.boundHierarchy=null,t.refreshHierarchy(),t.onGroup&&t.onGroup()}clearFilter(){const t=this;for(let n=0;n<t.boundSource.length;n++)t.boundSource[n].$.filtered=!0;if(t.boundHierarchy){const n=function(a,i,o){for(let r=0;r<a.length;r++){const l=a[r];l.$.filtered=!0,l.children&&n(l.children,l,i)}i&&(i.$.filtered=!0,o&&!o.$.filtered&&(o.$.filtered=!0))};n(t.boundHierarchy,null,null)}t.onFilter&&t.onFilter()}clearSort(){this._sort(this.boundSource,[],[],[])}_sort(t,n,a,i,o,r){const l=this;let s=!1;if(0===t.length)return;if(t&&t.constructor&&t instanceof Smart.ObservableArray&&(s=!0),(!t||!Array.isArray(t)||0===t.length||!n||Array.isArray(n)&&0===n.length)&&!s&&!l.boundHierarchy)throw new Error("sort: Missing or Invalid arguments!");"string"==typeof n&&(n=[n]);const c=[],u=[];void 0===a&&(a=[]);const p=function(g,b){let v;switch(b||typeof g){case"string":v=(new Intl.Collator).compare;break;case"number":case"int":case"bigInt":case"float":case"double":v=function(y,x){return y-x};break;case"boolean":case"bool":v=function(y,x){return y===x?0:!1===y?-1:1};break;case"date":case"time":case"dateTime":g instanceof Date?v=function(y,x){return y||x?y?x?y.getTime()-x.getTime():1:-1:0}:(g instanceof Smart.Utilities.DateTime||g instanceof Smart.Utilities.BigNumber)&&(v=function(y,x){return y.compare(x)});break;case"object":if(g instanceof Date)v=function(y,x){return y||x?y?x?y.getTime()-x.getTime():1:-1:0};else if(g instanceof Smart.Utilities.DateTime||g instanceof Smart.Utilities.BigNumber)v=function(y,x){return y.compare(x)};else if(g instanceof Smart.Utilities.Complex||window.NIComplex&&g instanceof window.NIComplex){const y=new Smart.Utilities.ComplexNumericProcessor;v=function(x,D){return y.compareComplexNumbers(x,D)}}}return v};for(let g=0;g<n.length;g++){c[g]=void 0===a[g]||"asc"===a[g]||"ascending"===a[g]?1:-1;let b=t[0][n[g]];if(void 0===b&&t[0]&&t[0].children&&t[0].data&&(b=t[0].data[n[g]]),r&&r){const v=n[g];if(r[v]){u[g]=r[v];continue}}u[g]=p(b,i[g])}n.length>0&&o?o(t,n,a,u):t.sort(function(g,b){for(let v=0;v<n.length;v++){const y=u[v](g[n[v]],b[n[v]]);if(0===y){if(n[v+1])continue;return void 0!==g.$.index?(g.$.index-b.$.index)*c[v]:0}return y*c[v]}if(0===n.length)return g.$.index<b.$.index?-1:g.$.index>b.$.index?1:0});for(let g=0;g<t.length;g++)l[g]=t[g]}static Filter(t,n,a,i,o="and"){let r,l;return"and"===o?(r=!0,l=function(s,c,u,p){return i?s&&i(c,u,p):s&&p.evaluate(c[u])}):(r=!1,l=function(s,c,u,p){return i?s||i(c,u,p):s||p.evaluate(c[u])}),t.filter(s=>{let c=r;for(let u=0;u<a.length;u++)c=l(c,s,n[u],a[u]);return c})}filter(t,n,a){Smart.DataAdapter.Filter(this.boundSource,t,n,a)}sort(t,n,a){Smart.DataAdapter.Sort(this.boundSource,t,n,a)}static Sort(t,n,a,i){const o=function(c){let u;switch(typeof c){case"string":if(c.indexOf("-")>=0||c.indexOf("/")>=0){const p=new Date(c);if(p&&"Invalid Date"!==p.toString())return function(g,b){const v=new Date(g),y=new Date(b);return v||y?v?y?v.getTime()-y.getTime():1:-1:0}}u=(new Intl.Collator).compare;break;case"number":u=function(p,g){return p-g};break;case"boolean":u=function(p,g){return p===g?0:!1===p?-1:1};break;case"object":if(c instanceof Date)u=function(p,g){return p||g?p?g?p.getTime()-g.getTime():1:-1:0};else if(c instanceof Smart.Utilities.DateTime||c instanceof BigNumberNG)u=function(p,g){return p.compare(g)};else if(c instanceof Smart.Utilities.Complex||window.NIComplex&&c instanceof window.NIComplex){const p=new Smart.Utilities.ComplexNumericProcessor;u=function(g,b){return p.compareComplexNumbers(g,b)}}}return u};if(!t||!Array.isArray(t)||0===t.length||!n||Array.isArray(n)&&0===n.length)return;"string"==typeof n&&(n=[n]);const r=[],l=[];void 0===a&&(a=[]);for(let c=0;c<n.length;c++)r[c]=void 0===a[c]||"asc"===a[c]||"ascending"===a[c]?1:-1,l[c]=o(t[0][n[c]]);if(i)return void i(t,n,a,l);const s=t.slice(0);return s.sort(function(c,u){for(let p=0;p<n.length;p++){const g=l[p](c[n[p]],u[n[p]]);if(0===g){if(n[p+1])continue;return void 0!==c._index?(c._index-u._index)*r[p]:0}return g*r[p]}}),s}};class e{constructor(n,a){const i=this;i.config=n,i.callback=a,!1!==n.autoFetch&&i.call(n)}call(n){const a=this;n||(n=a.config);let i="GET",o=n.url,r=null,l=!0;if(n.type&&(i=n.type),n.data)if("GET"===i){o+="?";for(let s in n.data)Object.prototype.hasOwnProperty.call(n.data,s)&&(o+=encodeURI(s+"="+n.data[s]+"&"));"&"===o.charAt(o.length-1)&&(o=o.slice(0,o.length-1))}else"POST"===i&&(r=JSON.stringify(n.data));n&&!1===n.async&&"xlsx"!==n.dataSourceType&&(l=!1),void 0!==window.fetch&&l?a.ajaxFetch(n,i,o,r):a.ajaxXMLHttpRequest(n,i,o,r,l)}ajaxFetch(n,a,i,o){const r=this,l={method:a};let s,c,u,p;switch(n.dataSourceType){case"json":s="json";break;case"xlsx":s="arrayBuffer";break;default:s="text"}n&&n.contentType&&(l.headers=new Headers({"Content-Type":n.contentType})),null!==o&&(l.body=o),n.timeout&&(u=setTimeout(function(){p=!0},n.timeout)),(!n.beforeSend||!1!==n.beforeSend(l,n))&&fetch(i,l).then(function(g){if(p)throw c=408,new Error("timeout");if(u&&clearTimeout(u),c=g.status,!g.ok)throw new Error(g.statusText);return g[s]()}).then(function(g){if("arrayBuffer"===s)return JSZip.loadAsync(g).then(function(b){return b.files["xl/worksheets/sheet1.xml"].async("text").then(function(v){return b.files["xl/sharedStrings.xml"].async("text").then(function(y){const x=r.parseXLSXData(v,y);r.ajaxComplete(n,x,c)})})});r.ajaxComplete(n,g,c)}).catch(function(g){"JSZip is not defined"===g.message&&(g.message="JSZip is not defined. Please include a reference to JSZip to be able to load data from XLSX files."),n&&n.loadError&&n.loadError(c,g),r.callback&&r.callback(g,c)})}ajaxXMLHttpRequest(n,a,i,o,r){const l=new XMLHttpRequest,s=this;l.open(a,i,r),l.ontimeout=function(){n&&n.loadError&&n.loadError(408,"timeout")},l.onload=function(){if(4===l.readyState){const c=l.status;let u=l.response;c>=200&&c<=299?("json"===n.dataSourceType&&(u=JSON.parse(u)),s.ajaxComplete(n,u,c)):n&&n.loadError&&n.loadError(c,u)}},l.onerror=function(){n&&n.loadError&&n.loadError(l.status,l.response)},n&&n.contentType&&l.setRequestHeader("Content-Type",n.contentType),r&&n.timeout&&(l.timeout=n.timeout),(!n.beforeSend||!1!==n.beforeSend(l,n))&&l.send(o)}ajaxComplete(n,a,i){if(n){if(n.beforeLoadComplete){const o=n.beforeLoadComplete(a);o&&(a=o)}n.loadComplete&&n.loadComplete(a,i),this.callback&&this.callback(a,i)}}parseXLSXData(n,a){const i=new DOMParser,o=i.parseFromString(a,"text/xml"),r=Array.from(o.getElementsByTagName("si")),l=[],s=i.parseFromString(n,"text/xml"),c=Array.from(s.getElementsByTagName("row")),u=[];return r.forEach(function(p){let g=p.getElementsByTagName("t");if(1===g.length)l.push(g[0].innerHTML);else{let b="";g=Array.from(g),g.forEach(function(v){b+=v.innerHTML}),l.push(b)}}),c.forEach(function(p){const g={};Array.from(p.getElementsByTagName("c")).forEach(function(b){const v=b.getAttribute("r").match(/\D+/)[0],y=b.getAttribute("t"),x=b.getElementsByTagName("v")[0].innerHTML;let D;switch(y){case"s":D=l[parseFloat(x)];break;case"b":D=1===parseFloat(x);break;default:D=parseFloat(x)}g[v]=D}),u.push(g)}),u}}Smart.Ajax=window.Ajax=e})()},2052:()=>{(()=>{const e=-1*(new Date).getTimezoneOffset(),t=[{id:"Local",offset:e,offsetHours:e/60,displayName:"",supportsDaylightSavingTime:!1},{id:"Dateline Standard Time",offset:-720,offsetHours:-12,displayName:"(UTC-12:00) International Date Line West",supportsDaylightSavingTime:!1},{id:"UTC-11",offset:-660,offsetHours:-11,displayName:"(UTC-11:00) Coordinated Universal Time-11",supportsDaylightSavingTime:!1},{id:"Hawaiteratoran Standard Time",offset:-600,offsetHours:-10,displayName:"(UTC-10:00) Hawaiterator",supportsDaylightSavingTime:!1},{id:"Alaskan Standard Time",offset:-540,offsetHours:-9,displayName:"(UTC-09:00) Alaska",supportsDaylightSavingTime:!0},{id:"Pacific Standard Time (Mexico)",offset:-480,offsetHours:-8,displayName:"(UTC-08:00) Baja California",supportsDaylightSavingTime:!0},{id:"Pacific Standard Time",offset:-480,offsetHours:-8,displayName:"(UTC-08:00) Pacific Time (US & Canada)",supportsDaylightSavingTime:!0},{id:"US Mountain Standard Time",offset:-420,offsetHours:-7,displayName:"(UTC-07:00) Arizona",supportsDaylightSavingTime:!1},{id:"Mountain Standard Time (Mexico)",offset:-420,offsetHours:-7,displayName:"(UTC-07:00) Chihuahua, La Paz, Mazatlan",supportsDaylightSavingTime:!0},{id:"Mountain Standard Time",offset:-420,offsetHours:-7,displayName:"(UTC-07:00) Mountain Time (US & Canada)",supportsDaylightSavingTime:!0},{id:"Central Standard Time",offset:-360,offsetHours:-6,displayName:"(UTC-06:00) Central Time (US & Canada)",supportsDaylightSavingTime:!0},{id:"Central America Standard Time",offset:-360,offsetHours:-6,displayName:"(UTC-06:00) Central America",supportsDaylightSavingTime:!1},{id:"Canada Central Standard Time",offset:-360,offsetHours:-6,displayName:"(UTC-06:00) Saskatchewan",supportsDaylightSavingTime:!1},{id:"Central Standard Time (Mexico)",offset:-360,offsetHours:-6,displayName:"(UTC-06:00) Guadalajara, Mexico City, Monterrey",supportsDaylightSavingTime:!0},{id:"SA Pacific Standard Time",offset:-300,offsetHours:-5,displayName:"(UTC-05:00) Bogota, Lima, Quito, Rio Branco",supportsDaylightSavingTime:!1},{id:"Eastern Standard Time",offset:-300,offsetHours:-5,displayName:"(UTC-05:00) Eastern Time (US & Canada)",supportsDaylightSavingTime:!0},{id:"US Eastern Standard Time",offset:-300,offsetHours:-5,displayName:"(UTC-05:00) Indiana (East)",supportsDaylightSavingTime:!0},{id:"Venezuela Standard Time",offset:-270,offsetHours:-4.5,displayName:"(UTC-04:30) Caracas",supportsDaylightSavingTime:!1},{id:"Atlantic Standard Time",offset:-240,offsetHours:-4,displayName:"(UTC-04:00) Atlantic Time (Canada)",supportsDaylightSavingTime:!0},{id:"Paraguay Standard Time",offset:-240,offsetHours:-4,displayName:"(UTC-04:00) Asuncion",supportsDaylightSavingTime:!0},{id:"Central Brazilian Standard Time",offset:-240,offsetHours:-4,displayName:"(UTC-04:00) Cuiaba",supportsDaylightSavingTime:!0},{id:"Pacific SA Standard Time",offset:-240,offsetHours:-4,displayName:"(UTC-04:00) Santiago",supportsDaylightSavingTime:!0},{id:"SA Western Standard Time",offset:-240,offsetHours:-4,displayName:"(UTC-04:00) Georgetown, La Paz, Manaus, San Juan",supportsDaylightSavingTime:!1},{id:"Newfoundland Standard Time",offset:-210,offsetHours:-3.5,displayName:"(UTC-03:30) Newfoundland",supportsDaylightSavingTime:!0},{id:"SA Eastern Standard Time",offset:-180,offsetHours:-3,displayName:"(UTC-03:00) Cayenne, Fortaleza",supportsDaylightSavingTime:!1},{id:"Argentina Standard Time",offset:-180,offsetHours:-3,displayName:"(UTC-03:00) Buenos Aires",supportsDaylightSavingTime:!0},{id:"E. South America Standard Time",offset:-180,offsetHours:-3,displayName:"(UTC-03:00) Brasilia",supportsDaylightSavingTime:!0},{id:"Bahia Standard Time",offset:-180,offsetHours:-3,displayName:"(UTC-03:00) Salvador",supportsDaylightSavingTime:!0},{id:"Montevideo Standard Time",offset:-180,offsetHours:-3,displayName:"(UTC-03:00) Montevideo",supportsDaylightSavingTime:!0},{id:"Greenland Standard Time",offset:-180,offsetHours:-3,displayName:"(UTC-03:00) Greenland",supportsDaylightSavingTime:!0},{id:"UTC-02",offset:-120,offsetHours:-2,displayName:"(UTC-02:00) Coordinated Universal Time-02",supportsDaylightSavingTime:!1},{id:"Mid-Atlantic Standard Time",offset:-120,offsetHours:-2,displayName:"(UTC-02:00) Mid-Atlantic - Old",supportsDaylightSavingTime:!0},{id:"Azores Standard Time",offset:-60,offsetHours:-1,displayName:"(UTC-01:00) Azores",supportsDaylightSavingTime:!0},{id:"Cape Verde Standard Time",offset:-60,offsetHours:-1,displayName:"(UTC-01:00) Cape Verde Is.",supportsDaylightSavingTime:!1},{id:"Morocco Standard Time",offset:0,offsetHours:0,displayName:"(UTC) Casablanca",supportsDaylightSavingTime:!0},{id:"UTC",offset:0,offsetHours:0,displayName:"(UTC) Coordinated Universal Time",supportsDaylightSavingTime:!1},{id:"GMT Standard Time",offset:0,offsetHours:0,displayName:"(UTC) Dublin, Edinburgh, Lisbon, London",supportsDaylightSavingTime:!0},{id:"Greenwich Standard Time",offset:0,offsetHours:0,displayName:"(UTC) Monrovia, Reykjavik",supportsDaylightSavingTime:!1},{id:"Central European Standard Time",offset:60,offsetHours:1,displayName:"(UTC+01:00) Sarajevo, Skopje, Warsaw, Zagreb",supportsDaylightSavingTime:!0},{id:"Namibia Standard Time",offset:60,offsetHours:1,displayName:"(UTC+01:00) Windhoek",supportsDaylightSavingTime:!0},{id:"W. Central Africa Standard Time",offset:60,offsetHours:1,displayName:"(UTC+01:00) West Central Africa",supportsDaylightSavingTime:!1},{id:"W. Europe Standard Time",offset:60,offsetHours:1,displayName:"(UTC+01:00) Amsterdam, Berlin, Bern, Rome, Stockholm, Vienna",supportsDaylightSavingTime:!0},{id:"Central Europe Standard Time",offset:60,offsetHours:1,displayName:"(UTC+01:00) Belgrade, Bratislava, Budapest, Ljubljana, Prague",supportsDaylightSavingTime:!0},{id:"Romance Standard Time",offset:60,offsetHours:1,displayName:"(UTC+01:00) Brussels, Copenhagen, Madrid, Paris",supportsDaylightSavingTime:!0},{id:"FLE Standard Time",offset:120,offsetHours:2,displayName:"(UTC+02:00) Helsinki, Kyiv, Riga, Sofia, Tallinn, Vilnius",supportsDaylightSavingTime:!0},{id:"South Africa Standard Time",offset:120,offsetHours:2,displayName:"(UTC+02:00) Harare, Pretoria",supportsDaylightSavingTime:!1},{id:"Turkey Standard Time",offset:120,offsetHours:2,displayName:"(UTC+02:00) Istanbul",supportsDaylightSavingTime:!0},{id:"GTB Standard Time",offset:120,offsetHours:2,displayName:"(UTC+02:00) Athens, Bucharest",supportsDaylightSavingTime:!0},{id:"Libya Standard Time",offset:120,offsetHours:2,displayName:"(UTC+02:00) Tripoli",supportsDaylightSavingTime:!0},{id:"E. Europe Standard Time",offset:120,offsetHours:2,displayName:"(UTC+02:00) E. Europe",supportsDaylightSavingTime:!0},{id:"Jordan Standard Time",offset:120,offsetHours:2,displayName:"(UTC+02:00) Amman",supportsDaylightSavingTime:!0},{id:"Middle East Standard Time",offset:120,offsetHours:2,displayName:"(UTC+02:00) Beirut",supportsDaylightSavingTime:!0},{id:"Egypt Standard Time",offset:120,offsetHours:2,displayName:"(UTC+02:00) Cairo",supportsDaylightSavingTime:!0},{id:"Syria Standard Time",offset:120,offsetHours:2,displayName:"(UTC+02:00) Damascus",supportsDaylightSavingTime:!0},{id:"Israel Standard Time",offset:120,offsetHours:2,displayName:"(UTC+02:00) Jerusalem",supportsDaylightSavingTime:!0},{id:"Arab Standard Time",offset:180,offsetHours:3,displayName:"(UTC+03:00) Kuwait, Riyadh",supportsDaylightSavingTime:!1},{id:"E. Africa Standard Time",offset:180,offsetHours:3,displayName:"(UTC+03:00) Nairobi",supportsDaylightSavingTime:!1},{id:"Arabic Standard Time",offset:180,offsetHours:3,displayName:"(UTC+03:00) Baghdad",supportsDaylightSavingTime:!0},{id:"Kaliningrad Standard Time",offset:180,offsetHours:3,displayName:"(UTC+03:00) Kaliningrad, Minsk",supportsDaylightSavingTime:!0},{id:"Iran Standard Time",offset:210,offsetHours:3.5,displayName:"(UTC+03:30) Tehran",supportsDaylightSavingTime:!0},{id:"Mauritius Standard Time",offset:240,offsetHours:4,displayName:"(UTC+04:00) Port Louis",supportsDaylightSavingTime:!0},{id:"Georgian Standard Time",offset:240,offsetHours:4,displayName:"(UTC+04:00) Tbilisi",supportsDaylightSavingTime:!1},{id:"Caucasus Standard Time",offset:240,offsetHours:4,displayName:"(UTC+04:00) Yerevan",supportsDaylightSavingTime:!0},{id:"Arabian Standard Time",offset:240,offsetHours:4,displayName:"(UTC+04:00) Abu Dhabi, Muscat",supportsDaylightSavingTime:!1},{id:"Azerbaijan Standard Time",offset:240,offsetHours:4,displayName:"(UTC+04:00) Baku",supportsDaylightSavingTime:!0},{id:"Russian Standard Time",offset:240,offsetHours:4,displayName:"(UTC+04:00) Moscow, St. Petersburg, Volgograd",supportsDaylightSavingTime:!0},{id:"Afghanistan Standard Time",offset:270,offsetHours:4.5,displayName:"(UTC+04:30) Kabul",supportsDaylightSavingTime:!1},{id:"Pakistan Standard Time",offset:300,offsetHours:5,displayName:"(UTC+05:00) Islamabad, Karachi",supportsDaylightSavingTime:!0},{id:"West Asia Standard Time",offset:300,offsetHours:5,displayName:"(UTC+05:00) Ashgabat, Tashkent",supportsDaylightSavingTime:!1},{id:"India Standard Time",offset:330,offsetHours:5.5,displayName:"(UTC+05:30) Chennai, Kolkata, Mumbai, New Delhi",supportsDaylightSavingTime:!1},{id:"Sri Lanka Standard Time",offset:330,offsetHours:5.5,displayName:"(UTC+05:30) Sri Jayawardenepura",supportsDaylightSavingTime:!1},{id:"Nepal Standard Time",offset:345,offsetHours:5.75,displayName:"(UTC+05:45) Kathmandu",supportsDaylightSavingTime:!1},{id:"Central Asia Standard Time",offset:360,offsetHours:6,displayName:"(UTC+06:00) Astana",supportsDaylightSavingTime:!1},{id:"Bangladesh Standard Time",offset:360,offsetHours:6,displayName:"(UTC+06:00) Dhaka",supportsDaylightSavingTime:!0},{id:"Ekaterinburg Standard Time",offset:360,offsetHours:6,displayName:"(UTC+06:00) Ekaterinburg",supportsDaylightSavingTime:!0},{id:"Myanmar Standard Time",offset:390,offsetHours:6.5,displayName:"(UTC+06:30) Yangon (Rangoon)",supportsDaylightSavingTime:!1},{id:"SE Asia Standard Time",offset:420,offsetHours:7,displayName:"(UTC+07:00) Bangkok, Hanoi, Jakarta",supportsDaylightSavingTime:!1},{id:"N. Central Asia Standard Time",offset:420,offsetHours:7,displayName:"(UTC+07:00) Novosibirsk",supportsDaylightSavingTime:!0},{id:"Ulaanbaatar Standard Time",offset:480,offsetHours:8,displayName:"(UTC+08:00) Ulaanbaatar",supportsDaylightSavingTime:!1},{id:"China Standard Time",offset:480,offsetHours:8,displayName:"(UTC+08:00) Beijing, Chongqing, Hong Kong, Urumqi",supportsDaylightSavingTime:!1},{id:"Singapore Standard Time",offset:480,offsetHours:8,displayName:"(UTC+08:00) Kuala Lumpur, Singapore",supportsDaylightSavingTime:!1},{id:"North Asia Standard Time",offset:480,offsetHours:8,displayName:"(UTC+08:00) Krasnoyarsk",supportsDaylightSavingTime:!0},{id:"Taipei Standard Time",offset:480,offsetHours:8,displayName:"(UTC+08:00) Taipei",supportsDaylightSavingTime:!1},{id:"W. Australia Standard Time",offset:480,offsetHours:8,displayName:"(UTC+08:00) Perth",supportsDaylightSavingTime:!0},{id:"Korea Standard Time",offset:540,offsetHours:9,displayName:"(UTC+09:00) Seoul",supportsDaylightSavingTime:!1},{id:"North Asia East Standard Time",offset:540,offsetHours:9,displayName:"(UTC+09:00) Irkutsk",supportsDaylightSavingTime:!0},{id:"Tokyo Standard Time",offset:540,offsetHours:9,displayName:"(UTC+09:00) Osaka, Sapporo, Tokyo",supportsDaylightSavingTime:!1},{id:"AUS Central Standard Time",offset:570,offsetHours:9.5,displayName:"(UTC+09:30) Darwin",supportsDaylightSavingTime:!1},{id:"Cen. Australia Standard Time",offset:570,offsetHours:9.5,displayName:"(UTC+09:30) Adelaide",supportsDaylightSavingTime:!0},{id:"West Pacific Standard Time",offset:600,offsetHours:10,displayName:"(UTC+10:00) Guam, Port Moresby",supportsDaylightSavingTime:!1},{id:"Tasmania Standard Time",offset:600,offsetHours:10,displayName:"(UTC+10:00) Hobart",supportsDaylightSavingTime:!0},{id:"E. Australia Standard Time",offset:600,offsetHours:10,displayName:"(UTC+10:00) Brisbane",supportsDaylightSavingTime:!1},{id:"AUS Eastern Standard Time",offset:600,offsetHours:10,displayName:"(UTC+10:00) Canberra, Melbourne, Sydney",supportsDaylightSavingTime:!0},{id:"Yakutsk Standard Time",offset:600,offsetHours:10,displayName:"(UTC+10:00) Yakutsk",supportsDaylightSavingTime:!0},{id:"Vladivostok Standard Time",offset:660,offsetHours:11,displayName:"(UTC+11:00) Vladivostok",supportsDaylightSavingTime:!0},{id:"Central Pacific Standard Time",offset:660,offsetHours:11,displayName:"(UTC+11:00) Solomon Is., New Caledonia",supportsDaylightSavingTime:!1},{id:"Magadan Standard Time",offset:720,offsetHours:12,displayName:"(UTC+12:00) Magadan",supportsDaylightSavingTime:!0},{id:"Kamchatka Standard Time",offset:720,offsetHours:12,displayName:"(UTC+12:00) Petropavlovsk-Kamchatsky - Old",supportsDaylightSavingTime:!0},{id:"Fiji Standard Time",offset:720,offsetHours:12,displayName:"(UTC+12:00) Fiji",supportsDaylightSavingTime:!0},{id:"New Zealand Standard Time",offset:720,offsetHours:12,displayName:"(UTC+12:00) Auckland, Wellington",supportsDaylightSavingTime:!0},{id:"UTC+12",offset:720,offsetHours:12,displayName:"(UTC+12:00) Coordinated Universal Time+12",supportsDaylightSavingTime:!1},{id:"Tonga Standard Time",offset:780,offsetHours:13,displayName:"(UTC+13:00) Nuku'alofa",supportsDaylightSavingTime:!1},{id:"Samoa Standard Time",offset:780,offsetHours:13,displayName:"(UTC+13:00) Samoa",supportsDaylightSavingTime:!0}],n=[0,31,59,90,120,151,181,212,243,273,304,334,365],a=[0,31,60,91,121,152,182,213,244,274,305,335,366];Smart.Utilities.Assign("TimeSpan",class{constructor(){const i=this;if(i.ticksPerMillisecond=1e4,i.millisecondsPerTick=1e-4,i.ticksPerSecond=1e7,i.secondsPerTick=1e-7,i.ticksPerMinute=6e8,i.minutesPerTick=1/6e8,i.ticksPerHour=36e9,i.hoursPerTick=1/36e9,i.ticksPerDay=864e9,i.daysPerTick=1/864e9,i.millisPerSecond=1e3,i.millisPerMinute=6e4,i.millisPerHour=36e5,i.millisPerDay=864e5,i._ticks=0,1===arguments.length){if(isNaN(arguments[0]))throw new Error("Argument must be a number.");i._ticks=arguments[0]}else 3===arguments.length?i._ticks=i.timeToMS(arguments[0],arguments[1],arguments[2],0):4===arguments.length?i._ticks=(1e3*(3600*arguments[0]*24+3600*arguments[1]+60*arguments[2]+arguments[3])+0)*i.ticksPerMillisecond:5===arguments.length&&(i._ticks=(1e3*(3600*arguments[0]*24+3600*arguments[1]+60*arguments[2]+arguments[3])+arguments[4])*i.ticksPerMillisecond)}ticks(){return this._ticks}days(){return parseInt(this._ticks/this.ticksPerDay)}timeToMS(i,o,r,l){return parseInt((3600*i+60*o+r+l/1e3)*this.ticksPerSecond)}hours(){return parseInt(this._ticks/this.ticksPerHour)%24}milliseconds(){return parseInt(this._ticks/this.ticksPerMillisecond)%1e3}minutes(){return parseInt(this._ticks/this.ticksPerMinute)%60}seconds(){return parseInt(this._ticks/this.ticksPerSecond)%60}totalDays(){return parseInt(this._ticks*this.daysPerTick)}totalHours(){return parseInt(this._ticks*this.hoursPerTick)}totalMilliseconds(){return parseInt(this._ticks*this.millisecondsPerTick)}totalMinutes(){return parseInt(this._ticks*this.minutesPerTick)}totalSeconds(){return parseInt(this._ticks*this.secondsPerTick)}add(i){return new Smart.Utilities.TimeSpan(this._ticks+i._ticks)}subtract(i){return new Smart.Utilities.TimeSpan(this._ticks-i._ticks)}duration(){const i=this;return i._ticks>=0?new Smart.Utilities.TimeSpan(i._ticks):new Smart.Utilities.TimeSpan(-i._ticks)}equals(i){return this._ticks===i._ticks}valueOf(){return this._ticks}compare(i,o){return i._ticks>o._ticks?1:i._ticks<o._ticks?-1:0}interval(i,o){return new Smart.Utilities.TimeSpan((i*o+(i>=0?.5:-.5))*this.ticksPerMillisecond)}fromDays(i){return this.interval(i,this.millisPerDay)}fromHours(i){return this.interval(i,this.millisPerHour)}fromMilliseconds(i){return this.interval(i,1)}fromMinutes(i){return this.interval(i,this.millisPerMinute)}fromSeconds(i){return this.interval(i,this.millisPerSecond)}fromTicks(i){return new Smart.Utilities.TimeSpan(i)}toString(){return this.totalMilliseconds().toString()}negate(){return new Smart.Utilities.TimeSpan(-this._ticks)}}),Smart.Utilities.Assign("DateTime",class{constructor(){function i(l){const s=o.regexISOString.exec(l);r=new Smart.Utilities.DateTime(parseFloat(s[1]),parseFloat(s[2]),parseFloat(s[3]),parseFloat(s[4]),parseFloat(s[5]),parseFloat(s[6]),parseFloat(s[7]),0,0,0,0,0,0,0,"UTC")}const o=this;let r;if(o.ticksPerMillisecond=1e4,o.millisecondsPerTick=1e-4,o.ticksPerSecond=1e7,o.secondsPerTick=1e-7,o.ticksPerMinute=6e8,o.minutesPerTick=1/6e8,o.ticksPerHour=36e9,o.hoursPerTick=1/36e9,o.ticksPerDay=864e9,o.daysPerTick=1/864e9,o.millisPerSecond=1e3,o.millisPerMinute=6e4,o.millisPerHour=36e5,o.millisPerDay=864e5,o.daysPerYear=365,o.daysPer4Years=1461,o.daysPer100Years=36524,o.daysPer400Years=146097,o.daysTo1601=584388,o.daysTo1899=693593,o.daysTo10000=3652059,o.minTicks=0,o.maxTicks=3155378976e9,o.maxMillis=3155378976e5,o.datePartYear=0,o.datePartDayOfYear=1,o.datePartMonth=2,o.datePartDay=3,o.daysToMonth365=n,o.daysToMonth366=a,o.minValue=new Date(0),o.maxValue=new Date(3155378976e9),o.ticksMask=0x4000000000000000,o.flagsMask=0xc000000000000000,o.localMask=0x8000000000000000,o.ticksCeiling=0x4000000000000000,o.kindUnspecified=0,o.kindUtc=0x4000000000000000,o.kindLocal=0x8000000000000000,o.kindLocalAmbiguousDst=0xc000000000000000,o.kindShift=62,o.regexTrim=/^\s+|\s+$/g,o.regexInfinity=/^[+-]?infinity$/i,o.regexHex=/^0x[a-f0-9]+$/i,o.regexParseFloat=/^[+-]?\d*\.?\d*(e[+-]?\d+)?$/,o.regexISOString=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}).(\d{3})Z$/,o.calendar={"/":"/",":":":",firstDay:0,days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December",""],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]},AM:["AM","am","AM"],PM:["PM","pm","PM"],eras:[{name:"A.D.",start:null,offset:0}],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",ISO:"yyyy-MM-dd hh:mm:ss",ISO2:"yyyy-MM-dd HH:mm:ss",d1:"dd.MM.yyyy",d2:"dd-MM-yyyy",zone1:"yyyy-MM-ddTHH:mm:ss-HH:mm",zone2:"yyyy-MM-ddTHH:mm:ss+HH:mm",custom:"yyyy-MM-ddTHH:mm:ss.fff",custom2:"yyyy-MM-dd HH:mm:ss.fff",FP:"yyyy-MM-dd HH:mm:ss:fff:uu:nn:pp:ee:aa:xx:oo",FPA:"yyyy/MM/dd HH:mm:ss:fffuunnppeeaaxxoo",FPA2:"yyyy-MM-dd HH:mm:ss:fffuunnppeeaaxxoo",FT:"HH:mm:ss:fff:uu:nn:pp:ee:aa:xx:oo",PP:"yyyy-MM-dd HH:mm:ss:fff:uu:nn:pp",PT:"HH:mm:ss:fff:uu:nn:pp"},percentsymbol:"%",currencysymbol:"$",currencysymbolposition:"before",decimalseparator:".",thousandsseparator:","},o.dateData=0,o.timeZone=null,o.timeZones=t,o._codeToUnit={u:"_microsecond",uu:"_microsecond",n:"_nanosecond",nn:"_nanosecond",p:"_picosecond",pp:"_picosecond",e:"_femtosecond",ee:"_femtosecond",a:"_attosecond",aa:"_attosecond",x:"_zeptosecond",xx:"_zeptosecond",o:"_yoctosecond",oo:"_yoctosecond"},o._smallUnits=["_microsecond","_nanosecond","_picosecond","_femtosecond","_attosecond","_zeptosecond","_yoctosecond"],o._microsecond=0,o._nanosecond=0,o._picosecond=0,o._femtosecond=0,o._attosecond=0,o._zeptosecond=0,o._yoctosecond=0,0===arguments.length){const l=new Date;o.dateData=o.dateToMS(l.getFullYear(),l.getMonth()+1,l.getDate())+o.timeToMS(l.getHours(),l.getMinutes(),l.getSeconds(),l.getMilliseconds())}else if(1===arguments.length)if(void 0===arguments[0]&&(arguments[0]="todayDate"),"number"==typeof arguments[0]&&isFinite(arguments[0])||"string"!=typeof arguments[0])if("number"==typeof arguments[0])o.dateData=arguments[0];else if(arguments[0]instanceof Date){const l=arguments[0];o.dateData=o.dateToMS(l.getFullYear(),l.getMonth()+1,l.getDate())+o.timeToMS(l.getHours(),l.getMinutes(),l.getSeconds(),l.getMilliseconds())}else o.dateData=arguments[0];else{let l;"today"===arguments[0]?l=new Date:"todayDate"===arguments[0]?(l=new Date,l.setHours(0,0,0,0)):o.regexISOString.test(arguments[0])?i(arguments[0]):l=o.tryparseDate(arguments[0]),l&&(o.dateData=o.dateToMS(l.getFullYear(),l.getMonth()+1,l.getDate())+o.timeToMS(l.getHours(),l.getMinutes(),l.getSeconds(),l.getMilliseconds()))}else if(2===arguments.length){if(void 0===arguments[0]&&(arguments[0]="todayDate"),"number"==typeof arguments[0]&&isFinite(arguments[0])||"string"!=typeof arguments[0])if("number"==typeof arguments[0])o.dateData=arguments[0];else if(arguments[0]instanceof Date){const l=arguments[0];o.dateData=o.dateToMS(l.getFullYear(),l.getMonth()+1,l.getDate())+o.timeToMS(l.getHours(),l.getMinutes(),l.getSeconds(),l.getMilliseconds())}else o.dateData=arguments[0];else{let l;"today"===arguments[0]?l=new Date:"todayDate"===arguments[0]?(l=new Date,l.setHours(0,0,0,0)):o.regexISOString.test(arguments[0])?i(arguments[0]):l=o.tryparseDate(arguments[0]),l&&(o.dateData=o.dateToMS(l.getFullYear(),l.getMonth()+1,l.getDate())+o.timeToMS(l.getHours(),l.getMinutes(),l.getSeconds(),l.getMilliseconds()))}o.validateTimeZone(arguments[1])}else if(arguments.length>2)if("string"==typeof arguments[0]){const l=o.tryparseDate(arguments[0],arguments[2],arguments[1]);o.dateData=o.dateToMS(l.getFullYear(),l.getMonth()+1,l.getDate())+o.timeToMS(l.getHours(),l.getMinutes(),l.getSeconds(),l.getMilliseconds())}else{const l=arguments[0],s=arguments[7]||0,c=arguments[8]||0,u=arguments[9]||0,p=arguments[10]||0,g=arguments[11]||0,b=arguments[12]||0,v=arguments[13]||0,y=new Date(l,arguments[1]-1,arguments[2],arguments[3]||0,arguments[4]||0,arguments[5]||0,arguments[6]||0);l<1970&&y.setFullYear(l),o.dateData=o.dateToMS(y.getFullYear(),y.getMonth()+1,y.getDate())+o.timeToMS(y.getHours(),y.getMinutes(),y.getSeconds(),y.getMilliseconds()),o._microsecond=s,o._nanosecond=c,o._picosecond=u,o._femtosecond=p,o._attosecond=g,o._zeptosecond=b,o._yoctosecond=v,arguments[14]&&o.validateTimeZone(arguments[14])}if(o.timeZone||o.validateTimeZone("Local"),r){const l=r.toTimeZone(o.timeZone);o.dateData=l.dateData}}static validateDate(i,o,r){if(i instanceof Smart.Utilities.DateTime)return i;if(i instanceof Date)return new Smart.Utilities.DateTime(i);try{if(new RegExp(/^\d{1,2}\/\d{1,2}\/\d{4}(, \d{1,2}:\d{2}:\d{1,2} [A|P]M)?$/).test(i)){const l=new Date(i);if(!isNaN(l.getTime()))return new Smart.Utilities.DateTime(l)}if("string"==typeof i)return this.parseDateString(i,o,r);if("number"==typeof i)return new Smart.Utilities.DateTime(new Date(i))}catch(l){}return o}static parseDateString(i,o,r){const l=new Date(i);if(!isNaN(l.getTime()))return new Smart.Utilities.DateTime(l);const s=i.indexOf("Date("),c=i.indexOf("DateTime("),u=i.lastIndexOf(")");let p=i;if(-1===s&&-1===c||-1===u){const g=new Smart.Utilities.DateTime,b=g.parseDate(i,r);if(b)return p=new Smart.Utilities.DateTime(b),g.copySmallTimePartValues(p),p}else{if(p=i.slice(-1!==s?s+5:c+9,u),p=p.replace(/'/g,"").replace(/"/g,"").replace(/^\s+|\s+$|\s+(?=\s)/g,""),""===p.trim())return new Smart.Utilities.DateTime;if(new RegExp(/(^(\d+)(\s*,\s*\d+)+(\s*,\s*[a-zA-Z ]+)?$)/g).test(p))return p=p.split(","),p.map(function(g,b){p[b]=isNaN(p[b])?g.trim():parseInt(g)}),-1!==s&&p[1]++,p.unshift(null),p=new(Function.prototype.bind.apply(Smart.Utilities.DateTime,p)),p}if(""===p.trim())return o;if(!isNaN(p))return p=new Date(parseInt(p,10)),new Smart.Utilities.DateTime(p);try{const g=p.split(",");2===g.length?(g[1]=g[1].trim(),g.unshift(null),p=new(Function.prototype.bind.apply(Smart.Utilities.DateTime,g))):p=new Smart.Utilities.DateTime(p)}catch(g){p=o}return p}static fromFullTimeStamp(i){i=i.toString();const o=new Smart.Utilities.DateTime(parseFloat(i.slice(0,i.length-21)));let r=i.slice(i.length-21),l=0;for(;r.length>0;)o[o._smallUnits[l]]=parseInt(r.slice(0,3),10),r=r.slice(3),l++;return o}static getConstructorParameters(i){return[i.year(),i.month(),i.day(),i.hour(),i.minute(),i.second(),i.millisecond(),i._microsecond,i._nanosecond,i._picosecond,i._femtosecond,i._attosecond,i._zeptosecond,i._yoctosecond,i.timeZone]}static detectDisplayMode(i,o,r){if(i.calendar.patterns[o])return-1!==["d","D","M","Y","d1","d2"].indexOf(o)?"calendar":-1!==["t","T","FT","PT"].indexOf(o)?"timePicker":"default";const l=["d","M","y"],s=["h","H","m","s","t","f","u","n","p","e","a","x","o"],c=r.groups;let u=!1,p=!1;for(let g=0;g<c.length;g++){const b=c[g].charAt(0);if(-1!==l.indexOf(b)?u=!0:-1!==s.indexOf(b)&&(p=!0),u&&p)break}return u===p?"default":u?"calendar":"timePicker"}static getLocalizedNames(i){const o={names:[],namesAbbr:[],namesShort:[]},r={names:[],namesAbbr:[]};if(this[i])return this[i];for(let l=23;l<30;l++){const s=new Date(2017,6,l),c=s.toLocaleString(i,{weekday:"long"});o.names.push(c),o.namesAbbr.push(s.toLocaleString(i,{weekday:"short"})),o.namesShort.push(c.substring(0,2))}for(let l=0;l<12;l++){const s=new Date(2017,l,1).toLocaleString(i,{month:"long"});r.names.push(s),r.namesAbbr.push(s.substring(0,3))}return r.names.push(""),r.namesAbbr.push(""),this[i]={days:o,months:r},this[i]}internalMS(){return this.dateData}getDatePart(i){const o=this,r=o.internalMS();let l=parseInt(r/o.millisPerDay);const s=parseInt(l/o.daysPer400Years);l-=s*o.daysPer400Years;let c=parseInt(l/o.daysPer100Years);4===c&&(c=3),l-=c*o.daysPer100Years;const u=parseInt(l/o.daysPer4Years);l-=u*o.daysPer4Years;let p=parseInt(l/o.daysPerYear);if(4===p&&(p=3),i===o.datePartYear)return parseInt(400*s+100*c+4*u+p+1);if(l-=p*o.daysPerYear,i===o.datePartDayOfYear)return parseInt(l+1);const g=3!==p||24===u&&3!==c?o.daysToMonth365:o.daysToMonth366;let b=l>>6;for(;l>=g[b];)b++;return i===o.datePartMonth?parseInt(b):parseInt(l-g[b-1]+1)}dayOfWeek(){return parseInt(this.dateData/this.millisPerDay+1)%7}dayOfYear(){return this.getDatePart(this.datePartDayOfYear)}weekOfYear(i){const o=this.toDate(),r=i||this.calendar.firstDay,l=new Date(o.getFullYear(),0,1),s=Math.floor((o.getTime()-l.getTime()-6e4*(o.getTimezoneOffset()-l.getTimezoneOffset()))/864e5)+1;let c,u=l.getDay()-r;if(u=u>=0?u:u+7,u<4){if(c=Math.floor((s+u-1)/7)+1,c>52){let p=new Date(o.getFullYear()+1,0,1).getDay()-r;p=p>=0?p:p+7,c=p<4?1:53}}else c=Math.floor((s+u-1)/7);return c}subtract(i){const o=this;return new Smart.Utilities.TimeSpan(o.dateData*o.ticksPerMillisecond-i.dateData*o.ticksPerMillisecond)}dateToMS(i,o,r){const l=this;if(i>=1&&i<=9999&&o>=1&&o<=12){i=parseInt(i);const s=l.isLeapYear(i)?l.daysToMonth366:l.daysToMonth365;if(r>=1&&r<=s[o]-s[o-1]){const c=i-1;return(365*c+parseInt(c/4)-parseInt(c/100)+parseInt(c/400)+s[o-1]+r-1)*l.millisPerDay}}}isLeapYear(i){if(i<1||i>9999)throw new Error("Year out of Range");return i%4==0&&(i%100!=0||i%400==0)}timeToMS(i,o,r,l){const s=this;if(i>=0&&i<24&&o>=0&&o<60&&r>=0&&r<60){const c=parseInt(3600*i+60*o+r);return l>0&&l<1e3?c*s.millisPerSecond+l:c*s.millisPerSecond}}daysInMonth(i,o){if(o<1||o>12)throw new Error("Month out of Range");const r=this,l=r.isLeapYear(i)?r.daysToMonth366:r.daysToMonth365;return l[o]-l[o-1]}arrayIndexOf(i,o){return i.indexOf(o)}startsWith(i,o){return 0===i.indexOf(o)}endsWith(i,o){return i.substr(i.length-o.length)===o}trim(i){return(i+"").replace(this.regexTrim,"")}expandFormat(i,o){let r,l=i.patterns,s=(o=o||"F").length;if(l[o])return l[o];if(1===s){if(r=l[o],!r)throw"Invalid date format string '"+o+"'.";o=r}else 2===s&&"%"===o.charAt(0)&&(o=o.charAt(1));return o}getEra(i,o){if(!o||"string"==typeof i)return 0;let r,l=i.getTime();for(let s=0,c=o.length;s<c;s++)if(r=o[s].start,null===r||l>=r)return s;return 0}toUpper(i){return i.split("\xa0").join(" ").toUpperCase()}toUpperArray(i){const o=[];for(let r=0,l=i.length;r<l;r++)o[r]=this.toUpper(i[r]);return o}getEraYear(i,o,r,l){let s=i.getFullYear();return!l&&o.eras&&(s-=o.eras[r].offset),s}getDayIndex(i,o,r){const l=this,s=i.days;let c,u=i._upperDays;return u||(i._upperDays=u=[l.toUpperArray(s.names),l.toUpperArray(s.namesAbbr),l.toUpperArray(s.namesShort)]),o=o.toUpperCase(),r?(c=l.arrayIndexOf(u[1],o),-1===c&&(c=l.arrayIndexOf(u[2],o))):c=l.arrayIndexOf(u[0],o),c}getMonthIndex(i,o,r){const l=this;let s=i.months,c=i.monthsGenitive||i.months,u=i._upperMonths,p=i._upperMonthsGen;u||(i._upperMonths=u=[l.toUpperArray(s.names),l.toUpperArray(s.namesAbbr)],i._upperMonthsGen=p=[l.toUpperArray(c.names),l.toUpperArray(c.namesAbbr)]),o=l.toUpper(o);let g=l.arrayIndexOf(r?u[1]:u[0],o);return g<0&&(g=l.arrayIndexOf(r?p[1]:p[0],o)),g}appendPreOrPostMatch(i,o){let r=0,l=!1;for(let s=0,c=i.length;s<c;s++){const u=i.charAt(s);switch(u){case"'":l?o.push("'"):r++,l=!1;break;case"\\":l&&o.push("\\"),l=!l;break;default:o.push(u),l=!1}}return r}getTokenRegExp(){return/\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyyy|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|uu|u|nn|n|pp|p|ee|e|aa|a|xx|x|oo|o|i{1,24}|zzz|zz|z|gg|g/g}tryparseDate(i,o,r){const l=this;if(null==o&&(o=l.calendar),void 0!==r){if(Array.isArray(r))for(let g=0;g<r.length;g++){const b=l.parseDate(i,r[g],o);if(b)return b}const p=l.parseDate(i,r,o);if(p)return p}if(""===i)return null;if(null==i||i.substring||(i=i.toString()),null!=i&&"/Date("===i.substring(0,6)){const p=/^\/Date\((-?\d+)(\+|-)?(\d+)?\)\/$/;let g=new Date(+i.replace(/\/Date\((\d+)\)\//,"$1"));if("Invalid Date"===g){const b=i.match(/^\/Date\((\d+)([-+]\d\d)(\d\d)\)\/$/);g=null,b&&(g=new Date(1*b[1]+36e5*b[2]+6e4*b[3]))}if(null==g||"Invalid Date"===g||isNaN(g)){const b=p.exec(i);if(b){const v=new Date(parseInt(b[1]));if(b[2]){let y=parseInt(b[3]);"-"===b[2]&&(y=-y);const x=v.getUTCMinutes();v.setUTCMinutes(x-y)}if(!isNaN(v.valueOf()))return v}}return g}const s={smartdate:"yyyy-MM-dd HH:mm:ss",d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",ISO:"yyyy-MM-dd hh:mm:ss",ISO2:"yyyy-MM-dd HH:mm:ss",ISO8601:"yyyy-MM-ddTHH:mm:ss.sssZ",d1:"dd.MM.yyyy",d2:"dd-MM-yyyy",d3:"MM-dd-yyyy",d4:"MM.dd.yyyy",zone1:"yyyy-MM-ddTHH:mm:ss-HH:mm",zone2:"yyyy-MM-ddTHH:mm:ss+HH:mm",custom:"yyyy-MM-ddTHH:mm:ss.fff",custom2:"yyyy-MM-dd HH:mm:ss.fff",iso:"yyyy-MM-ddTHH:mm:ssZ",iso_date1:"yyyy-MM-dd",iso_date2:"yyyy-MM-dd",iso_date3:"yyyy-ddd",iso_date4:"yyyy-MM-dd HH:mm",iso_date5:"yyyy-MM-dd HH:mm Z",iso_date6:"yyyy-MMM-dd",iso_date7:"yyyy-MM",iso_date8:"yyyy-MMM",iso_date9:"yyyy-MMMM",iso_date10:"yyyy-MMMM-dd",iso_time1:"HH:mm:ss.tttt",iso_time2:"HH:mm:ss",iso_time3:"HH:mm",iso_time4:"HH",iso_time5:"yyyyyy-MM-dd",iso_time6:"yyyyyy-MM-dd"};for(let p in s){const g=l.parseDate(i,s[p],o);if(g)return g}const c=o.patterns;for(let p in c){const g=l.parseDate(i,c[p],o);if(g){if("ISO"===p){const b=l.parseDate(i,c.ISO2,o);if(b)return b}return g}}let u;if("string"==typeof i){const p=[":","/","-"," ",","];let g="",b=(T=i=l.trim(i),i=T.replace(new RegExp(", ","g"),","));i.indexOf(":")>=0?(g=i.substring(i.indexOf(":")-2),g=l.trim(g),b=i.substring(0,i.indexOf(":")-2)):i.toUpperCase().indexOf("AM")>=0?(g=i.substring(i.toUpperCase().indexOf("AM")-2),g=l.trim(g),b=i.substring(0,i.toUpperCase().indexOf("AM")-2)):i.toUpperCase().indexOf("PM")>=0&&(g=i.substring(i.toUpperCase().indexOf("PM")-2),g=l.trim(g),b=i.substring(0,i.toUpperCase().indexOf("PM")-2));let v=new Date,y=!1;if(b){for(let O=0;O<p.length;O++)if(b.indexOf(p[O])>=0){u=b.split(p[O]);break}if(!u)return null;let x=new Array,D=new Array,T=new Array,M=null,A=null;for(let O=0;O<u.length;O++){const N=u[O],P=l.parseDate(N,"d",o)||l.parseDate(N,"dd",o)||l.parseDate(N,"ddd",o)||l.parseDate(N,"dddd",o);if(P&&(x.push(P.getDate()),N.length>2)){M=O;break}}for(let O=0;O<u.length;O++){const N=u[O],P=l.parseDate(N,"M",o)||l.parseDate(N,"MM",o)||l.parseDate(N,"MMM",o)||l.parseDate(N,"MMMM",o);if(P){if(null!=M&&M===O)continue;if(D.push(P.getMonth()),N.length>2){A=O;break}}}for(let O=0;O<u.length;O++){const P=l.parseDate(u[O],"yyyy",o);if(P){if(null!=M&&M===O||null!=A&&A===O)continue;T.push(P.getFullYear())}}const B=new Array;for(let O=x.length-1;O>=0;O--)for(let N=0;N<D.length;N++)for(let P=0;P<T.length;P++){const V=new Date(T[P],D[N],x[O]);T[P]<1970&&V.setFullYear(T[P]),isNaN(V.getTime())||B.push(V)}B.length>0&&(v=B[0],y=!0)}if(g){const x=g.indexOf(":")>=0?g.split(":"):g,D=l.parseDate(g,"h:mm tt",o)||l.parseDate(g,"HH:mm:ss.fff",o)||l.parseDate(g,"HH:mm:ss.ff",o)||l.parseDate(g,"h:mm:ss tt",o)||l.parseDate(g,"HH:mm:ss.tttt",o)||l.parseDate(g,"HH:mm:ss",o)||l.parseDate(g,"HH:mm",o)||l.parseDate(g,"HH",o);let T=0,M=0,A=0,B=0;D&&!isNaN(D.getTime())?(T=D.getHours(),M=D.getMinutes(),A=D.getSeconds(),B=D.getMilliseconds()):(1===x.length&&(T=parseInt(x[0])),2===x.length&&(T=parseInt(x[0]),M=parseInt(x[1])),3===x.length&&(T=parseInt(x[0]),M=parseInt(x[1]),x[2].indexOf(".")>=0?(A=parseInt(x[2].toString().split(".")[0]),B=parseInt(x[2].toString().split(".")[1])):A=parseInt(x[2])),4===x.length&&(T=parseInt(x[0]),M=parseInt(x[1]),A=parseInt(x[2]),B=parseInt(x[3]))),!v||isNaN(T)||isNaN(M)||isNaN(A)||isNaN(B)||(v.setHours(T,M,A,B),y=!0)}if(y)return v}var T;if(null!=i){u=[":","/","-"];let p=!0;for(let g=0;g<u.length;g++)-1!==i.indexOf(u[g])&&(p=!1);if(p){const g=new Number(i);if(!isNaN(g))return new Date(g)}}return null}getParseRegExp(i,o){const r=this;let l=i._parseRegExp;if(l){const x=l[o];if(x)return x}else i._parseRegExp=l={};let s,c=r.expandFormat(i,o).replace(/([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g,"\\\\$1"),u=["^"],p=[],g=0,b=0,v=r.getTokenRegExp();for(;null!==(s=v.exec(c));){const x=c.slice(g,s.index);if(g=v.lastIndex,b+=r.appendPreOrPostMatch(x,u),b%2){u.push(s[0]);continue}let D,T=s[0],M=T.length;switch(T){case"dddd":case"ddd":case"MMMM":case"MMM":case"gg":case"g":D="(\\D+)";break;case"tt":case"t":D="(\\D*)";break;case"yyyyy":D="(\\d{1,4})";break;case"yyyy":D="(\\d{"+M+"})";break;case"fff":case"ff":case"f":D="(\\d{1,"+M+"})";break;case"dd":case"d":case"MM":case"M":case"yy":case"y":case"HH":case"H":case"hh":case"h":case"mm":case"m":case"ss":case"s":D="(\\d\\d?)";break;case"uu":case"nn":case"pp":case"ee":case"aa":case"xx":case"oo":D="(\\d{1,3})";break;case"zzz":D="([+-]?\\d\\d?:\\d{2})";break;case"zz":case"z":D="([+-]?\\d\\d?)";break;case"/":D="/";break;default:if(!/i{1,24}/.test(T))throw"Invalid date format pattern '"+T+"'.";D="(\\d{"+T.length+"})"}D&&u.push(D),"/"!==T&&p.push(s[0])}r.appendPreOrPostMatch(c.slice(g),u),u.push("$");const y={regExp:u.join("").replace(/\s+/g,"\\s+"),groups:p};return l[o]=y}outOfRange(i,o,r){return i<o||i>r}expandYear(i,o){const r=this,l=new Date,s=r.getEra(l);if(o<100){let c=i.twoDigitYearMax;c="string"==typeof c?(new Date).getFullYear()%100+parseInt(c,10):c;const u=r.getEraYear(l,i,s);(o+=u-u%100)>c&&(o-=100)}return o}padZeros(i,o){let r,l=i+"";return o>1&&l.length<o?(r=["0","00","000"][o-2]+l,r.substr(r.length-o,o)):(r=l,r)}parseDate(i,o,r){const l=this;null==r&&(r=l.calendar),i=l.trim(i);const s=r,c=l.getParseRegExp(s,o),u=new RegExp(c.regExp).exec(i);if(null===u)return null;let p,g=c.groups,b=null,v=null,y=null,x=null,D=null,T=0,M=0,A=0,B=0,O=null,N=!1;for(let K=0,W=g.length;K<W;K++){const Z=u[K+1];if(Z){const te=g[K],re=te.length,C=parseInt(Z,10);switch(te){case"dd":case"d":if(x=C,l.outOfRange(x,1,31))return null;break;case"MMM":case"MMMM":case"MMMMM":case"MMMMMM":case"MMMMMMM":case"MMMMMMMM":if(y=l.getMonthIndex(s,Z,3===re),l.outOfRange(y,0,11))return null;break;case"M":case"MM":if(y=C-1,l.outOfRange(y,0,11))return null;break;case"y":case"yy":case"yyyy":if(v=re<4?l.expandYear(s,C):C,l.outOfRange(v,0,9999))return null;break;case"h":case"hh":if(T=C,12===T&&(T=0),l.outOfRange(T,0,11))return null;break;case"H":case"HH":if(T=C,l.outOfRange(T,0,23))return null;break;case"m":case"mm":if(M=C,l.outOfRange(M,0,59))return null;break;case"s":case"ss":if(A=C,l.outOfRange(A,0,59))return null;break;case"tt":case"t":if(N=s.PM&&(Z===s.PM[0]||Z===s.PM[1]||Z===s.PM[2]),!N&&(!s.AM||Z!==s.AM[0]&&Z!==s.AM[1]&&Z!==s.AM[2]))return null;break;case"f":case"ff":case"fff":if(B=C*Math.pow(10,3-re),l.outOfRange(B,0,999))return null;break;case"uu":case"nn":case"pp":case"ee":case"aa":case"xx":case"oo":if(l.outOfRange(C,0,1e3))return null;l[l._codeToUnit[te]]=C;break;case"ddd":case"dddd":if(D=l.getDayIndex(s,Z,3===re),l.outOfRange(D,0,6))return null;break;case"zzz":{const d=Z.split(/:/);if(2!==d.length||(p=parseInt(d[0],10),l.outOfRange(p,-12,13)))return null;const m=parseInt(d[1],10);if(l.outOfRange(m,0,59))return null;O=60*p+(l.startsWith(Z,"-")?-m:m);break}case"z":case"zz":if(p=C,l.outOfRange(p,-12,13))return null;O=60*p;break;case"g":case"gg":{let d=Z;if(!d||!s.eras)return null;d=this.trim(d.toLowerCase());for(let m=0,h=s.eras.length;m<h;m++)if(d===s.eras[m].nathat.toLowerCase()){b=m;break}if(null===b)return null;break}default:{let d=Z;d.length%3==1?d+="00":d.length%3==2&&(d+="0"),B=parseInt(d.slice(0,3),10),d=d.slice(3);let m=0;for(;d.length>0;)l[l._smallUnits[m]]=parseInt(d.slice(0,3),10),d=d.slice(3),m++}}}}let P,V=new Date,Y=s.convert;if(P=V.getFullYear(),null===v?v=P:s.eras&&(v+=s.eras[b||0].offset),null===y&&(y=0),null===x&&(x=1),Y){if(V=Y.toGregorian(v,y,x),null===V)return null}else if(V.setFullYear(v,y,x),V.getDate()!==x||null!==D&&V.getDay()!==D)return null;if(N&&T<12&&(T+=12),V.setHours(T,M,A,B),null!==O){const K=V.getMinutes()-(O+V.getTimezoneOffset());V.setHours(V.getHours()+parseInt(K/60,10),K%60)}return V}toString(i,o){const r=this;void 0===i&&(i="yyyy-MM-dd HH:mm:ss");const l=r.dateData.toString()+r.getFractionsOfSecondStamp()+i+(r.timeZone||"");if(Smart.Utilities.DateTime.cache&&Smart.Utilities.DateTime.cache[l])return Smart.Utilities.DateTime.cache[l];const s=r.toDate();if(null==o&&(o=r.calendar),"string"==typeof s)return s;if(!i||!i.length||"i"===i){let D;return D=r.formatDate(s,o.patterns.F,o),D}const c=o.eras,u="s"===i;i=r.expandFormat(o,i);const p=[];let g,b=0,v=r.getTokenRegExp();function y(D,T){if(void 0!==D.getMonth)switch(T){case 0:return D.getFullYear();case 1:return D.getMonth();case 2:return D.getDate()}}for(;;){const D=v.lastIndex,T=v.exec(i),M=i.slice(D,T?T.index:i.length);if(b+=r.appendPreOrPostMatch(M,p),!T)break;if(b%2){p.push(T[0]);continue}const A=T[0],B=A.length;let O;if(/i{1,24}/.test(A))p.push(r.getFirstNDigitsOfPrecision(A.length));else switch(A){case"ddd":case"dddd":p.push((3===B?o.days.namesAbbr:o.days.names)[s.getDay()]);break;case"d":case"dd":p.push(r.padZeros(y(s,2),B));break;case"MMM":case"MMMM":O=y(s,1),p.push(o.months[3===B?"namesAbbr":"names"][O]);break;case"M":case"MM":p.push(r.padZeros(y(s,1)+1,B));break;case"y":case"yy":case"yyyy":O=r.getEraYear(s,o,r.getEra(s,c),u),B<4&&(O%=100),p.push(r.padZeros(O,B));break;case"h":case"hh":g=s.getHours()%12,0===g&&(g=12),p.push(r.padZeros(g,B));break;case"H":case"HH":p.push(r.padZeros(s.getHours(),B));break;case"m":case"mm":p.push(r.padZeros(s.getMinutes(),B));break;case"s":case"ss":p.push(r.padZeros(s.getSeconds(),B));break;case"t":case"tt":O=s.getHours()<12?o.AM?o.AM[0]:" ":o.PM?o.PM[0]:" ",p.push(1===B?O.charAt(0):O);break;case"f":case"ff":case"fff":p.push(r.padZeros(s.getMilliseconds(),3).substr(0,B));break;case"u":case"n":case"p":case"e":case"a":case"x":case"o":p.push(r[r._codeToUnit[A]]);break;case"uu":case"nn":case"pp":case"ee":case"aa":case"xx":case"oo":p.push(r.padZeros(r[r._codeToUnit[A]],3));break;case"z":case"zz":p.push((r.timeZoneOffsetHours>=0?"+":"-")+r.padZeros(Math.floor(Math.abs(r.timeZoneOffsetHours)),B));break;case"zzz":p.push((r.timeZoneOffsetHours>=0?"+":"-")+r.padZeros(Math.floor(Math.abs(r.timeZoneOffsetHours)),2)+":"+r.padZeros(60*Math.abs(r.timeZoneOffsetHours%1),2));break;case"g":case"gg":o.eras&&p.push(o.eras[r.getEra(s,c)].name);break;case"/":p.push(o["/"]);break;default:throw"Invalid date format pattern '"+A+"'."}}const x=p.join("");return Smart.Utilities.DateTime.cache||(Smart.Utilities.DateTime.cache=new Array),Smart.Utilities.DateTime.cache[l]=x,x}getFractionsOfSecondStamp(){const i=this;return i._microsecond.toString()+i._nanosecond+i._picosecond+i._femtosecond+i._attosecond+i._zeptosecond+i._yoctosecond}getFirstNDigitsOfPrecision(i,o){const r=this;return(""+(!0!==o?r.padZeros(r.millisecond(),3):"")+r.padZeros(r._microsecond,3)+r.padZeros(r._nanosecond,3)+r.padZeros(r._picosecond,3)+r.padZeros(r._femtosecond,3)+r.padZeros(r._attosecond,3)+r.padZeros(r._zeptosecond,3)+r.padZeros(r._yoctosecond,3)).slice(0,i)}copySmallTimePartValues(i){const o=this;i._microsecond=o._microsecond,i._nanosecond=o._nanosecond,i._picosecond=o._picosecond,i._femtosecond=o._femtosecond,i._attosecond=o._attosecond,i._zeptosecond=o._zeptosecond,i._yoctosecond=o._yoctosecond}add(i,o,r){const l=this,s=l.internalMS();if(void 0===o){if(!1===r)return l.dateData=s+parseInt(i._ticks/l.ticksPerMillisecond),l;const p=new Smart.Utilities.DateTime(s+parseInt(i._ticks/l.ticksPerMillisecond));return l.copyTimeZone(p),l.copySmallTimePartValues(p),p}const c=i*o;if(c<=-l.maxMillis||c>=l.maxMillis)throw new Error("Out of Range");if(!1===r)return l.dateData=s+c,l;const u=new Smart.Utilities.DateTime(s+c);return l.copyTimeZone(u),l.copySmallTimePartValues(u),u}addDays(i,o){return this.add(i,this.millisPerDay,o)}clone(){const i=this,o=new Smart.Utilities.DateTime(i.dateData);return i.copyTimeZone(o),i.copySmallTimePartValues(o),o}clearTime(){const i=this,o=i.month(),r=i.year(),l=i.day(),s=new Smart.Utilities.DateTime(r,o,l,0,0,0,0);return i.copyTimeZone(s),s}addHours(i,o){return this.add(i,this.millisPerHour,o)}addDeciseconds(i,o){return this.add(100*i,1,o)}addCentiseconds(i,o){return this.add(10*i,1,o)}addMilliseconds(i,o){return this.add(i,1,o)}addMinutes(i,o){return this.add(i,this.millisPerMinute,o)}addMonths(i,o){const r=this;if(i<-12e4||i>12e4)throw new Error("Invalid Months Value");let l=parseInt(r.getDatePart(r.datePartYear)),s=parseInt(r.getDatePart(r.datePartMonth)),c=parseInt(r.getDatePart(r.datePartDay));if(i%12==0)l+=i/12;else{const g=s-1+i;g>=0?(s=g%12+1,l+=g/12):(s=12+(g+1)%12,l+=(g-11)/12),l=parseInt(l)}if(l<1||l>9999)throw new Error("Year out of range");const u=r.daysInMonth(l,s);if(c>u&&(c=u),!1===o)return r.dateData=r.dateToMS(l,s,c)+r.internalMS()%r.millisPerDay,r;const p=new Smart.Utilities.DateTime(r.dateToMS(l,s,c)+r.internalMS()%r.millisPerDay);return r.copyTimeZone(p),r.copySmallTimePartValues(p),p}addSeconds(i,o){return this.add(i,this.millisPerSecond,o)}addYears(i,o){return this.addMonths(12*i,o)}addMicroseconds(i,o){if(0===i)return;const r=this;let l,s;i<0&&0===r.hour()&&0===r.minute()&&0===r.second()&&0===r.millisecond()&&0===r._microsecond&&(l=parseInt(i/1e3,10)-1,s=1e3+i%1e3);const c=1e3*r.timeToMS(r.hour(),r.minute(),r.second(),r.millisecond())+r._microsecond,u=c+i;let p;if(void 0===l&&(l=parseInt(u/1e3,10)-parseInt(c/1e3,10)),void 0===s&&(s=parseInt(u%1e3,10)),0!==l&&(p=r.addMilliseconds(l,o)),!1!==o)return p||(p=r.clone()),p._microsecond=s,p;r._microsecond=s}addFractionsOfSecond(i,o,r,l,s){if(0===i)return;const c=this,u=1e3*c[l]+c[r],p=i+u;let g,b=parseInt(p/1e3,10)-parseInt(u/1e3,10),v=parseInt(p%1e3,10);if(i<0&&p<0&&v<0&&(b--,v=1e3+v),0!==b&&(g=c[s](b,o)),!1!==o)return g||(g=c.clone()),g[r]=v,g;c[r]=v}addNanoseconds(i,o){return this.addFractionsOfSecond(i,o,"_nanosecond","_microsecond","addMicroseconds")}addPicoseconds(i,o){return this.addFractionsOfSecond(i,o,"_picosecond","_nanosecond","addNanoseconds")}addFemtoseconds(i,o){return this.addFractionsOfSecond(i,o,"_femtosecond","_picosecond","addPicoseconds")}addAttoseconds(i,o){return this.addFractionsOfSecond(i,o,"_attosecond","_femtosecond","addFemtoseconds")}addZeptoseconds(i,o){return this.addFractionsOfSecond(i,o,"_zeptosecond","_attosecond","addAttoseconds")}addYoctoseconds(i,o){return this.addFractionsOfSecond(i,o,"_yoctosecond","_zeptosecond","addZeptoseconds")}getTimeZoneOffset(){const i=new Date,o=new Date(i.getFullYear(),0,1),r=new Date(i.getFullYear(),6,1),l=i.getTimezoneOffset()<Math.max(o.getTimezoneOffset(),r.getTimezoneOffset());return{offset:-i.getTimezoneOffset()/60,dst:+l}}isInDaylightSavingTime(){const i=new Date,o=new Date(i.getFullYear(),0,1),r=new Date(i.getFullYear(),6,1);return this.date().getTimezoneOffset()<Math.max(o.getTimezoneOffset(),r.getTimezoneOffset())}supportsDaylightSavingTime(){const i=new Date,o=new Date(i.getFullYear(),0,1),r=new Date(i.getFullYear(),6,1);return o.getTimezoneOffset()!==r.getTimezoneOffset()}date(){const i=this,o=i.month(),r=i.year(),l=i.day(),s=new Smart.Utilities.DateTime(r,o,l);return i.copyTimeZone(s),s}isWeekend(){return 0===this.dayOfWeek()||6===this.dayOfWeek()}toDate(i){const o=this,r=o.month(),l=o.year(),s=o.day(),c=o.hour(),u=o.minute(),p=o.second(),g=o.millisecond();let b=new Date(l,r-1,s);if(l<1970&&b.setFullYear(l),b.setHours(c,u,p,g),i){const v=o.timeZones.filter(function(y){return y.id===i});if(v.length){let y=v[0].offset;const x=b.getTime();let D=60*b.getTimezoneOffset()*1e3;if(o.timeZone){const T=o.timeZones.filter(function(M){return M.id===o.timeZone});T.length&&(D=60*-T[0].offset*1e3)}b=new Date(x+D+6e4*y)}}return b}toTimeZone(i){const o=this;let r=i;if(null==r&&(r="Local"),o.timeZone===r)return o.clone();const l=o.timeZones.filter(function(u){return u.id===r});if(0===l.length)return o.clone();const s=this.toDate(r),c=new Smart.Utilities.DateTime(s);return c.timeZone=r,c.timeZoneOffset=l[0].offset,c.timeZoneOffsetHours=l[0].offsetHours,o.copySmallTimePartValues(c),c}day(){return this.getDatePart(this.datePartDay)}month(){return this.getDatePart(this.datePartMonth)}year(){return this.getDatePart(this.datePartYear)}millisecond(){return parseInt(this.internalMS()%1e3)}hour(){return parseInt(Math.floor(this.internalMS()/this.millisPerHour)%24)}minute(){return parseInt(this.internalMS()/this.millisPerMinute%60)}second(){return parseInt(this.internalMS()/this.millisPerSecond%60)}microsecond(){return this._microsecond}nanosecond(){return this._nanosecond}picosecond(){return this._picosecond}femtosecond(){return this._femtosecond}attosecond(){return this._attosecond}zeptosecond(){return this._zeptosecond}yoctosecond(){return this._yoctosecond}valueOf(){return this.dateData}equals(i){const o=this;return o.dateData===i.dateData&&o._microsecond===i._microsecond&&o._nanosecond===i._nanosecond&&o._picosecond===i._picosecond&&o._femtosecond===i._femtosecond&&o._attosecond===i._attosecond&&o._zeptosecond===i._zeptosecond&&o._yoctosecond===i._yoctosecond}equalDateParts(i){const o=this;return o.year()===i.year()&&o.month()===i.month()&&o.day()===i.day()}compare(i){const o=this;if(o.equals(i))return 0;const r=["dateData","_microsecond","_nanosecond","_picosecond","_femtosecond","_attosecond","_zeptosecond","_yoctosecond"];for(let l=0;l<r.length;l++){const s=r[l];if(o[s]>i[s])return 1;if(o[s]<i[s])return-1}return 0}toDateString(){return this.toDate().toDateString()}toLocaleDateString(){return this.toDate().toLocaleDateString(this.calendar.locale)}toLocaleString(){return this.toDate().toLocaleString(this.calendar.locale)}toLocaleTimeString(){return this.toDate().toLocaleTimeString(this.calendar.locale)}validateTimeZone(i){const o=this;if("string"!=typeof i)return;const r=o.timeZones.filter(function(l){return l.id===i});0!==r.length&&(o.timeZone=i,o.timeZoneOffset=r[0].offset,o.timeZoneOffsetHours=r[0].offsetHours)}copyTimeZone(i){const o=this;i.timeZone=o.timeZone,i.timeZoneOffset=o.timeZoneOffset,i.timeZoneOffsetHours=o.timeZoneOffsetHours}getTimeStamp(){return new Smart.Utilities.BigNumber(this.dateData.toString()+this.getFirstNDigitsOfPrecision(void 0,!0))}})})()},501:()=>{Smart("smart-date-input",class extends Smart.Input{static get properties(){return{autoClose:{value:!1,type:"boolean"},autoCloseDelay:{value:0,type:"number"},dropDownButtonPosition:{allowedValues:["none","left","right"],value:"right",defaultReflectToAttribute:!0,type:"string"},dropDownHeight:{type:"any",value:"auto"},min:{type:"any",value:new Date(1900,0,1)},max:{type:"any",value:new Date(2100,0,1)},messages:{value:{en:{hours:"Hours",minutes:"Minutes",am:"am",pm:"pm"}},type:"object",extend:!0},placeholder:{value:"MM/dd/yyyy",type:"string"},dateTimeFormat:{type:"any",value:{year:"numeric",month:"numeric",day:"numeric"}},value:{type:"any",value:""}}}template(){return'<div id="inputContainer" role="presentation"><input class="smart-input" id=\'input\' readonly=\'[[readonly]]\' placeholder=\'[[placeholder]]\' type=\'[[type]]\' name=\'[[name]]\' disabled=\'[[disabled]]\' aria-label="[[placeholder]]" /><span class="smart-hidden smart-hint" id="span">[[hint]]</span><div id="dropDownButton" tabindex=-1 class="smart-drop-down-button" role="button" aria-label="Toggle popup"><div id="arrow" class="arrow" aria-hidden="true"></div></div></div>'}static get listeners(){return{"input.change":"_changeHandler","input.focus":"_focusHandler","input.blur":"_blurHandler","input.keydown":"_keyDownHandler","input.keyup":"_keyUpHandler","input.keypress":"_keyPressHandler","dropDownButton.down":"_dropDownButtonDownHandler","inputContainer.down":"_downHandler","document.up":"_documentUpHandler"}}_calendarDropDownClickHandler(e){const t=this;t.autoClose&&e.target.closest(".smart-calendar-cell")&&(clearTimeout(t._autoCloseTimeout),t._autoCloseTimeout=setTimeout(function(){t.close()},t.autoCloseDelay))}render(){super.render(),this.value&&this.value instanceof Date&&this._setInputValue(this.value)}focus(){this.$.input.focus()}select(){const e=this;e.readonly?e.$.input.focus():e.$.input.select()}_documentUpHandler(e){const t=this,n=t.shadowRoot||t.isInShadowDOM?e.originalEvent.composedPath()[0]:e.originalEvent.target;t.contains(n)?requestAnimationFrame(()=>{}):t.$.scrollView.contains(n.shadowParent||n)?t._isPointerDown&&(t._isPointerDown=!1,t.opened&&(t._preventLookup=!0),t.$.input.focus()):(t.opened&&(t._preventLookup=!0),t._isPointerDown=!1,t.close())}_changeHandler(e){const t=this;e.stopPropagation(),t._performSelect();const n=t._getInputValue();t._oldValue||(t._oldValue=null),t.$.fireEvent("change",{value:n,oldValue:t._oldValue}),t._oldValue=n}_focusHandler(){const e=this;if(e.setAttribute("focus",""),e.readonly||0!==e.minLength||0!==e.$.input.value.length||e._preventLookup){if(e.$.fireEvent("focus"),e.value){const t=e._getInputValue();e._setInputValue(t)}delete e._preventLookup}}_blurHandler(){const e=this;if(e.opened||e.removeAttribute("focus"),e._popup&&e._popup.isCompleted&&e.opened)e._setInputValue(e._popup.value);else{const t=e._getInputValue();e._setInputValue(t)}e.$.fireEvent("blur"),delete e._preventLookup}_getInputValue(){const e=this,t=e.$.input.value;let n=null;const a=i=>{let o=new Date(Date.parse(i));if("Invalid Date"===o.toString()&&(o=null),!o){let r=(new Smart.Utilities.DateTime).tryparseDate(i,null);if(r)return r}return o};return e.dateTimeFormat.day&&e.dateTimeFormat.month&&e.dateTimeFormat.year?n=a(t):e.dateTimeFormat.day&&e.dateTimeFormat.month&&!e.dateTimeFormat.year?(n=a(t),e._popup.value||(e._popup.value=new Date),n.setFullYear(e._popup.isCompleted?e._popup.value.getFullYear():(new Date).getFullYear(),n.getMonth(),n.getDate())):!e.dateTimeFormat.day&&e.dateTimeFormat.month&&e.dateTimeFormat.year&&(e._popup.value||(e._popup.value=new Date),n=a(t),n.setFullYear(n.getFullYear(),n.getMonth(),e._popup.isCompleted?e._popup.value.getDate():(new Date).getDate())),n<e.min&&(n=e.min),n>e.max&&(n=e.max),n}getValue(){return this._getInputValue()}setValue(e){this._setInputValue(e)}_setInputValue(e){const t=this;if(!e)return t.$.input.value="",t.removeAttribute("data-value"),void(t.value=null);e<t.min&&(e=t.min),e>t.max&&(e=t.max);let n=new Intl.DateTimeFormat(t.locale,t.dateTimeFormat).format(e);t.hasAttribute("focus")&&(n=new Intl.DateTimeFormat(t.locale,{year:"numeric",day:"numeric",month:"numeric"}).format(e)),t.$.input.value=t.value=n,t.setAttribute("data-value",e)}_performSelect(){}getFormattedValue(e,t){return null===t?parseFloat(e):(e||(e=new Date),t||(t=this.dateTimeFormat),new Intl.DateTimeFormat(this.locale,t).format(e))}_open(){const e=this,t=e.getBoundingClientRect(),n=window.scrollX,a=window.scrollY;let i=0,o=0;if(!this.opened){if(e.timer&&clearTimeout(e.timer),document.body.appendChild(e.$.scrollView),e.setAttribute("aria-owns",e.$.scrollView.id),e.readonly||e.$.input.setAttribute("aria-controls",e.$.scrollView.id),e.$.scrollView.enableShadowDOM&&!e._importedStyle&&(e.$.scrollView.importStyle(e._getStyleUrl("smart.textbox.css")),e._importedStyle=!0),"static"!==getComputedStyle(document.body).position){const r=document.body.getBoundingClientRect();i=r.left,o=r.top}e.$.scrollView.style.setProperty("--smart-input-drop-down-menu-width",""),e.$.scrollView.style.left=-3+t.left+n-i+"px",e.$.scrollView.style.top=t.bottom+a-o+1+"px",e.$.scrollView.classList.remove("open"),e.$.scrollView.onpointerdown=function(){e._isPointerDown=!0},e._refreshPopup(),requestAnimationFrame(function(){e.$.scrollView.setAttribute("open",""),e.setAttribute("open",""),e.$.dropDownButton.setAttribute("open",""),e.$.input.setAttribute("open","")}),this.opened=!0}}_refreshPopup(){const e=this,t=e._getInputValue();e._popup.isAttached&&e._popup.select(t)}close(){const e=this;return!!e.opened&&(e.timer&&clearTimeout(e.timer),e.timer=setTimeout(function(){e.$.scrollView.parentNode&&!e.opened&&(document.body.removeChild(e.$.scrollView),e.removeAttribute("aria-owns"),e.readonly||e.$.input.removeAttribute("aria-controls"))},1e3),e.$.scrollView.removeAttribute("open"),e.$.dropDownButton.removeAttribute("open"),e.$.input.removeAttribute("open"),e.removeAttribute("open"),e.opened=!1,!0)}_lookup(){}_downHandler(e){this.readonly&&this._dropDownButtonDownHandler(e)}_dropDownButtonDownHandler(e){return this._toggle(),e.preventDefault(),e.stopPropagation(),e.originalEvent.preventDefault(),e.originalEvent.stopPropagation(),!1}_toggle(){const e=this;e.opened?e.close():e.open()}open(){const e=this;e._process(),e.$.input.focus(),setTimeout(function(){e.$.input.focus()},25)}_process(){this._performSelect(void 0,!0),this._open()}_matcher(){}_sorter(){}_highlighter(){}_render(){}ensureVisible(){}_next(){}_prev(){}_move(e){e.stopPropagation()}_keyPressHandler(e){}_insertKey(e,t=1){const n=this,a=n.$.input.selectionStart,i=n.$.input.value,o=i.substring(0,a),r=i.substring(a+t);n.$.input.value=o+e.key+r,n.$.input.selectionStart=n.$.input.selectionEnd=a+1}_keyDownHandler(e){this._suppressKeyPressRepeat=![40,38,9,13,27,16,17,18].includes(e.keyCode);let n=!1;switch(e.keyCode>=48&&e.keyCode<=57&&(n=!0),e.key){case"/":case"-":case":":case"ArrowLeft":case"ArrowUp":case"ArrowDown":case"ArrowRight":case"Home":case"End":case"Delete":case"Backspace":case"Tab":n=!0}e.ctrlKey&&(n=!0),n||e.preventDefault(),"Tab"===e.key&&this.close()}_getMask(){const e=this,t=e.getFormattedValue(new Date(2020,10,10),{year:"numeric",month:"numeric",day:"numeric"});let n="/";-1===t.indexOf(n)&&(n="-");const a=t.split(n);e._mask=[];let i=0;for(let o=0;o<a.length-1;o++)i+=a[o].length,e._mask[i]=n,i++}_appendPreOrPostMatch(e,t){for(var n=0,a=!1,i=0,o=e.length;i<o;i++){var r=e.charAt(i);switch(r){case"'":a?t.push("'"):n++,a=!1;break;case"\\":a&&t.push("\\"),a=!a;break;default:t.push(r),a=!1}}return n}_keyUpHandler(e){const t=this;let n=t.$.input.value.trim();const a=new Date(n);if(e.keyCode>=48&&e.keyCode<=57){if(void 0!==t._mask[n.length]){let i=[...n],o=t._mask.flat().length,r=0;for(let l=0;l<i.length;l++)i[l]===t._mask[n.length]&&r++;r<o&&(n+=t._mask[n.length],t.$.input.value=n)}}else if(" "===e.key||"Enter"===e.key){const i=t._getInputValue();t._setInputValue(i)}else if("/"===e.key||":"===e.key||"-"===e.key){const i=t.$.input.selectionStart,o=t._getInputValue();t._setInputValue(o),t.$.input.selectionStart=i,"/"===t.$.input.value[i]&&t.$.input.selectionStart++}if(t.value="Invalid Date"!==a.toString()?a:null,t._refreshPopup(),!e.shiftKey)switch(e.keyCode){case 40:case 38:case 16:case 17:case 18:40===e.keyCode&&e.altKey&&t.open(),38===e.keyCode&&e.altKey&&t.close();break;case 27:if(!t.opened)return;t.close(),e.stopPropagation(),e.preventDefault()}}propertyChangedHandler(e,t,n){const a=this;switch(e){case"value":"string"==typeof n?a.$.input.value=n:a._setInputValue(n);break;case"month":case"min":case"max":a.$.calendar[e]=n;break;case"theme":case"rightToLeft":case"animation":case"inverted":a.$.calendar&&(a.$.calendar[e]=n),a.$.scrollView&&(n?a.$.scrollView.setAttribute(Smart.Utilities.Core.toDash(e),"boolean"==typeof n?"":n):a.$.scrollView.removeAttribute(Smart.Utilities.Core.toDash(e)));break;case"locale":a._performSelect(),a.$.calendar&&(a.$.calendar.locale=n);break;default:super.propertyChangedHandler(e,t,n)}}_createElement(){const e=this,t=document.createElement("div");if(t.classList.add("smart-input-drop-down-menu","smart-date-input-drop-down-menu"),t.setAttribute("animation",e.animation),t.setAttribute("role","presentation"),e.rightToLeft?t.setAttribute("right-to-left",""):t.removeAttribute("right-to-left"),e.inverted?t.setAttribute("inverted",""):t.removeAttribute("inverted"),t.onclick=function(a){a.stopPropagation(),a.preventDefault();const i=a.target;e.$.input.focus(),i.closest("smart-done-button")&&e.close()},!t.id){const a=t.tagName.toLowerCase();t.id=a.slice(0,1).toLowerCase()+a.slice(1)+Math.floor(65536*(1+Math.random())).toString(16).substring(1)}e.$.scrollView=t,e.classList.add("smart-input");const n=document.createElement("smart-calendar");if(e._popup=n,n.onchange=a=>{e._oldValue||(e._oldValue=null);const i=a.detail.value[0];e.$.fireEvent("change",{value:i,oldValue:e._oldValue}),e._oldValue=i},n.onclick=a=>{e._calendarDropDownClickHandler(a)},t.appendChild(n),e.$.input.value=e.value,e.value&&(""+e.value).length>0){const a=e._getInputValue();e._oldValue=a,e._setInputValue(a)}e._getMask()}_refreshMenu(){}_setAriaRelations(){const e=this,t=e.getAttribute("aria-label");e.readonly?(e.setAttribute("role","button"),!t&&e.placeholder&&e.setAttribute("aria-label",e.placeholder),e.removeAttribute("aria-readonly"),e.$.input.setAttribute("aria-hidden",!0),e.$.input.removeAttribute("aria-controls"),e.$.dropDownButton.setAttribute("aria-hidden",!0)):(e.setAttribute("role","presentation"),t&&t===e.placeholder&&e.removeAttribute("aria-label"),e.$.input.removeAttribute("aria-hidden"),e.$.dropDownButton.removeAttribute("aria-hidden")),e.setAttribute("aria-haspopup","dialog"),e.$.scrollView.setAttribute("role","dialog")}_setActiveDescendant(){}_setInputPurpose(){}})},5473:()=>{Smart("smart-date-range-input",class extends Smart.Input{static get properties(){return{dropDownButtonPosition:{allowedValues:["none","left","right"],value:"right",defaultReflectToAttribute:!0,type:"string"},dateFormat:{type:"object",value:{day:"numeric",month:"numeric",year:"numeric"}},dropDownHeight:{type:"any",value:"auto"},icons:{type:"boolean",value:!1},max:{value:new Date(2100,1,1),type:"any",defaultValue:new Date(2100,1,1)},messages:{value:{en:{done:"Done",today:"Today",clear:"Clear",hours:"Hours",minutes:"Minutes",am:"am",pm:"pm"}},type:"object",extend:!0},min:{value:new Date(1900,1,1),type:"any",defaultValue:new Date(1900,1,1)},months:{value:1,type:"number",defaultValue:1},separator:{value:" - ",type:"string"},timeFormat:{type:"object",value:{hour:"2-digit",minute:"2-digit"}},timepicker:{value:!1,type:"boolean"},value:{type:"any",value:"",validator:"_valueValidator"},valueType:{allowedValues:["string","object"],value:"string",type:"string"}}}template(){return'<div id="inputContainer" role="presentation"><input class="smart-input" id=\'input\' readonly=\'[[readonly]]\' placeholder=\'[[placeholder]]\' type=\'[[type]]\' name=\'[[name]]\' disabled=\'[[disabled]]\' aria-label="[[placeholder]]" /><span class="smart-hidden smart-hint" id="span">[[hint]]</span><div id="dropDownButton" tabindex=-1 class="smart-drop-down-button" role="button" aria-label="Toggle popup"><div id="arrow" class="arrow" aria-hidden="true"></div></div></div>'}static get listeners(){return{"input.change":"_changeHandler","input.focus":"_focusHandler","input.blur":"_blurHandler","input.keydown":"_keyDownHandler","input.keyup":"_keyUpHandler","input.keypress":"_keyPressHandler","dropDownButton.down":"_dropDownButtonDownHandler","inputContainer.down":"_downHandler","document.up":"_documentUpHandler"}}focus(){this.$.input.focus()}select(){const e=this;e.readonly?e.$.input.focus():e.$.input.select()}_documentUpHandler(e){const t=this,n=t.shadowRoot||t.isInShadowDOM?e.originalEvent.composedPath()[0]:e.originalEvent.target;t.contains(n)?requestAnimationFrame(()=>{const a=t.$.calendar;t.opened&&1===a.selectedDates.length&&!a._newRangeSelectionStarted&&(a._newRangeSelectionStarted=!0)}):t.$.scrollView.contains(n.shadowParent||n)?t._isPointerDown&&(t._isPointerDown=!1,t.opened&&(t._preventLookup=!0),t.$.input.focus()):(t.opened&&(t._preventLookup=!0),t._isPointerDown=!1,t.close())}_changeHandler(e){e.stopPropagation(),this._performSelect(void 0)}_focusHandler(){const e=this;e.setAttribute("focus",""),(e.readonly||0!==e.minLength||0!==e.$.input.value.length||e._preventLookup)&&(e.$.fireEvent("focus"),delete e._preventLookup)}_blurHandler(){const e=this;e.opened||e.removeAttribute("focus"),e.$.fireEvent("blur"),delete e._preventLookup}_performSelect(e,t){const n=this,a=n.$.calendar;let i,o,r,l=n.$.input.value.split(n.separator);void 0!==e&&"object"!=typeof e&&(r=e,e=void 0);let s=n._oldValue?n._oldValue:n._formatValue(void 0!==r?r:n.value,"string");if(e){let c,u;e.type&&(e.preventDefault(),e.stopPropagation()),n.timepicker&&n._timepicker&&(c=n._timepicker._from,u=n._timepicker._to),l=e.detail?e.detail.value.slice(0).sort((p,g)=>p.getTime()-g.getTime()):"",l.length?1===l.length?(i=new Date(l[0]),c&&i.setHours(c.hours,c.minutes),l=[i]):(i=new Date(l[0]),o=new Date(l[l.length-1]),c&&i.setHours(c.hours,c.minutes),u&&o.setHours(u.hours,u.minutes),l=[i,o]):l=""}else{if(l=n.$.input.value.split(n.separator),l.length){if(1===l.length)l=new Date(n.$.input.value.trim()),isNaN(l.getTime())?l="":(i=new Date(l),n._noCalendarChange=!0,a.selectedDates=[l],l=[i]);else if(l=l.map(c=>new Date(c)).filter(c=>!isNaN(c.getTime())),l.sort((c,u)=>c.getTime()-u.getTime()),l.length){let c=[],u=l[0];if(i=new Date(l[0]),l.length>1&&(o=l[l.length-1]),c.push(new Date(u)),i&&o){const p=new Date(u);if(u=new Date(p.setDate(p.getDate()+1)),u.getTime()<=o.getTime()){for(;u.getTime()<o.getTime()&&(u.getDate()!==o.getDate()||u.getMonth()!==o.getMonth()||u.getFullYear()!==o.getFullYear());)c.push(new Date(u)),u.setDate(u.getDate()+1);c.push(u)}}n._noCalendarChange=!0,a.selectedDates=c}}else l="";if((!l||!l.length)&&a.isRendered&&(n._noCalendarChange=!0,a.clearSelection(),n._timepicker)){n._timepicker.classList.add("smart-visibility-hidden");const c=n.$.scrollView.querySelectorAll(".smart-timepicker-button");for(let u=0;u<c.length;u++)c[u].removeAttribute("selected")}}n.timepicker&&n._timepicker&&(i&&(n._timepicker._from={hours:i.getHours(),minutes:i.getMinutes()}),o&&(n._timepicker._to={hours:o.getHours(),minutes:o.getMinutes()})),a.isRendered?n._setTimePickerButtons(i,o):a.whenRendered(()=>n._setTimePickerButtons(i,o)),n.set("value",n.$.input.value=n._oldValue=l=n._formatDate(l)),t||l===s||n.$.fireEvent("change",{value:n._formatValue(l),label:l,oldValue:n._formatValue(s),oldLabel:s}),delete n._noCalendarChange}_setTimePickerButtons(e,t){const n=this,a=n.$.scrollView.querySelector(".smart-timepicker-button.from"),i=n.$.scrollView.querySelector(".smart-timepicker-button.to");a&&(a.textContent=e&&!isNaN(e.getTime())?e.toLocaleTimeString(n.locale,n.timeFormat):""),i&&(i.textContent=t&&!isNaN(t.getTime())?t.toLocaleTimeString(n.locale,n.timeFormat):"")}_formatValue(e,t){const n=this;if(t||(t=n.valueType),"string"===t&&"string"==typeof e||"object"===t&&e.from)return e;let a,i,o;return Array.isArray(e)?(a=e[0],i=e[e.length-1]):"object"==typeof e?(a=e.from,i=e.to):(o=e.split(n.separator),o.length&&(o=o.map(r=>new Date(r)).filter(r=>!isNaN(r.getTime())),o.sort((r,l)=>r.getTime()-l.getTime()),a=o[0],i=o[o.length-1])),"string"===t?n._formatDate([a,i]):{from:new Date(a),to:new Date(i)}}_formatDate(e){const t=this;return e?(e instanceof Date&&(e=[e]),e=e.filter(n=>void 0!==n),t.selectedDates=e,1===(e=e.map(t.timepicker?n=>new Date(n).toLocaleString(t.locale,Object.assign({},t.dateFormat,t.timeFormat)):n=>new Date(n).toLocaleDateString(t.locale,t.dateFormat))).length?e[0]:e.join(t.separator)):""}_open(){const e=this,t=e.getBoundingClientRect(),n=window.scrollX,a=window.scrollY;let i=0,o=0;if(!this.opened){if(e.timer&&clearTimeout(e.timer),document.body.appendChild(e.$.scrollView),e.setAttribute("aria-owns",e.$.scrollView.id),e.readonly||e.$.input.setAttribute("aria-controls",e.$.scrollView.id),e.$.scrollView.enableShadowDOM&&!e._importedStyle&&(e.$.scrollView.importStyle(e._getStyleUrl("smart.textbox.css")),e._importedStyle=!0),"static"!==getComputedStyle(document.body).position){const r=document.body.getBoundingClientRect();i=r.left,o=r.top}e.$.scrollView.style.setProperty("--smart-input-drop-down-menu-width",""),e.$.scrollView.style.left=-3+t.left+n-i+"px",e.$.scrollView.style.top=t.bottom+a-o+1+"px",e.$.scrollView.classList.remove("open"),e.$.scrollView.onpointerdown=function(){e._isPointerDown=!0},requestAnimationFrame(function(){const r=e.dropDownWidth,l=e.$.calendar;if(e.$.scrollView.setAttribute("open",""),e.setAttribute("open",""),e.$.dropDownButton.setAttribute("open",""),e.$.input.setAttribute("open",""),r&&"string"==typeof r&&-1!==r.indexOf("%")){const s=parseFloat(r)/100;e.$.scrollView.style.setProperty("--smart-input-drop-down-menu-width",e.offsetWidth*s+"px"),l.style.width="100%"}else"auto"!==r&&r?(e.$.scrollView.style.setProperty("--smart-input-drop-down-menu-width",parseFloat(r)+"px"),l.style.width="100%"):"auto"===r?(l.style.width=null,e.$.scrollView.style.setProperty("--smart-input-drop-down-menu-width","auto")):(l.style.width=null,e.$.scrollView.style.setProperty("--smart-input-drop-down-menu-width",Math.max(l.offsetWidth,e.offsetWidth-8)+"px"))}),this.opened=!0}}close(){const e=this;if(!e.opened)return!1;if(e.timer&&clearTimeout(e.timer),e.timer=setTimeout(function(){e.$.scrollView.parentNode&&!e.opened&&(document.body.removeChild(e.$.scrollView),e.removeAttribute("aria-owns"),e.readonly||e.$.input.removeAttribute("aria-controls"))},1e3),e._timepicker){e._timepicker.classList.add("smart-visibility-hidden");const t=e.$.scrollView.querySelectorAll(".smart-timepicker-button");for(let n=0;n<t.length;n++)t[n].removeAttribute("selected")}return e.$.scrollView.removeAttribute("open"),e.$.dropDownButton.removeAttribute("open"),e.$.input.removeAttribute("open"),e.removeAttribute("open"),e.opened=!1,!0}_lookup(){}_downHandler(e){this.readonly&&this._dropDownButtonDownHandler(e)}_dropDownButtonDownHandler(e){return this.disabled||(this._toggle(),e.preventDefault(),e.stopPropagation(),e.originalEvent.preventDefault(),e.originalEvent.stopPropagation()),!1}toggle(){this._toggle()}_toggle(){const e=this;e.opened?e.close():e.open()}open(){const e=this;e._process(),e.$.input.focus(),setTimeout(function(){e.$.input.focus()},25)}_process(){this._performSelect(void 0,!0),this._open()}_matcher(){}_sorter(){}_highlighter(){}_render(){}ensureVisible(){}_next(){}_prev(){}_move(e){e.stopPropagation()}_keyDownHandler(e){this._suppressKeyPressRepeat=![40,38,9,13,27,16,17,18].includes(e.keyCode)}_keyPressHandler(e){}_keyUpHandler(e){const t=this;if(!e.shiftKey)switch(e.keyCode){case 40:case 38:case 16:case 17:case 18:40===e.keyCode&&e.altKey&&t.open(),38===e.keyCode&&e.altKey&&t.close();break;case 27:if(!t.opened)return;t.close(),e.stopPropagation(),e.preventDefault()}}propertyChangedHandler(e,t,n){const a=this;switch(e){case"dateFormat":case"value":a.$.input.value=a._formatValue(n,"string"),a._performSelect(t);break;case"month":case"min":case"max":a.$.calendar[e]=n;break;case"theme":case"rightToLeft":case"animation":case"inverted":a.$.calendar&&(a.$.calendar[e]=n),a.$.scrollView&&(n?a.$.scrollView.setAttribute(Smart.Utilities.Core.toDash(e),"boolean"==typeof n?"":n):a.$.scrollView.removeAttribute(Smart.Utilities.Core.toDash(e)));break;case"timepicker":case"icons":if(n?a.$.scrollView.setAttribute(e,""):a.$.scrollView.removeAttribute(e),a._performSelect(void 0),!n&&a._timepicker){a._timepicker.classList.add("smart-visibility-hidden"),a._timepicker.remove();const i=a.$.scrollView.querySelectorAll(".smart-timepicker-button");for(let o=0;o<i.length;o++)i[o].removeAttribute("selected")}break;case"locale":{const i=a.$.calendar.querySelector(".smart-icon-today"),o=a.$.calendar.querySelector(".smart-icon-clear");i&&(i.innerHTML=a.localize("today")),o&&(i.innerHTML=a.localize("clear")),a._performSelect(void 0,!0),a.$.calendar.locale=n;break}default:super.propertyChangedHandler(e,t,n)}}_createElement(){const e=this,t=document.createElement("div"),n=document.createElement("smart-calendar"),a=document.createElement("template");if(t.classList.add("smart-input-drop-down-menu","smart-date-range-input-drop-down-menu"),t.setAttribute("animation",e.animation),t.setAttribute("role","presentation"),e.rightToLeft?t.setAttribute("right-to-left",""):t.removeAttribute("right-to-left"),e.inverted?t.setAttribute("inverted",""):t.removeAttribute("inverted"),t.onclick=function(i){i.stopPropagation(),i.preventDefault();const o=i.target;e.$.input.focus();const r=o.closest(".smart-timepicker-button");if(r){const l=t.querySelectorAll(".smart-timepicker-button");for(let s=0;s<l.length;s++)l[s].removeAttribute("selected");if(o.closest(".smart-icon-clear")){if(e.$.calendar.clearSelection(),e._timepicker){e._timepicker.classList.add("smart-visibility-hidden");const s=e.$.scrollView.querySelectorAll(".smart-timepicker-button");for(let c=0;c<s.length;c++)s[c].removeAttribute("selected"),s[c].setAttribute("aria-selected",!1)}return}return o.closest(".smart-icon-today")?void e.$.calendar.today():(r.setAttribute("selected",""),void e._toggleTimepicker(i))}o.closest("smart-done-button")?e.close():o.closest(".smart-timepicker")&&e._handleTimeSelection(o.closest(".smart-calendar-cell"))},!t.id){const i=t.tagName.toLowerCase();t.id=i.slice(0,1).toLowerCase()+i.slice(1)+Math.floor(65536*(1+Math.random())).toString(16).substring(1)}e.$.scrollView=t,e.classList.add("smart-input"),n.theme=e.theme,n.unfocusable=!0,n.rightToLeft=e.rightToLeft,n.animation=e.animation,n.months=e.months,n.max=e.max,n.min=e.min,n.locale=e.locale,n.viewSections=["header","footer"],n.selectionMode="range",e.button&&t.setAttribute("button",""),e.timepicker&&t.setAttribute("timepicker",""),e.icons&&t.setAttribute("icons",""),e.$.calendar||n.$.listen("change",()=>{e._noCalendarChange?delete e._noCalendarChange:e._performSelect(event)}),a.innerHTML=`\n        <div class="smart-date-range-input-footer-controls">\n            <div class="smart-timepicker-buttons">\n                <div class="smart-timepicker-button from"></div>\n                <div class="smart-timepicker-button to"></div>\n            </div>\n            <div class="smart-button-controls">\n                <div class="smart-icon-today smart-timepicker-button">${e.localize("today")}</div>\n                <div class="smart-icon-clear smart-timepicker-button">${e.localize("clear")}</div>\n            </div>\n        </div>`,n.footerTemplate=a,e.$.calendar=n,t.appendChild(e.$.calendar)}_toggleTimepicker(e){const t=this;if(!t.timepicker)return void(t._timepicker&&(t._timepicker.classList.add("smart-visibility-hidden"),t._timepicker.remove()));if(!t._timepicker){const p=document.createElement("div");p.innerHTML='\n                <div class="hour-selection smart-calendar-week" role="row"><div class="header" role="rowheader"></div>\n                    <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="0">12</div>\n                    <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="1">01</div>\n                    <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="2">02</div>\n                    <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="3">03</div>\n                    <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="4">04</div>\n                    <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="5">05</div>\n                    <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="6">06</div>\n                    <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="7">07</div>\n                    <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="8">08</div>\n                    <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="9">09</div>\n                    <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="10">10</div>\n                    <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="11">11</div>\n                    <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="12" pm>12</div>\n                    <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="13" pm>01</div>\n                    <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="14" pm>02</div>\n                    <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="15" pm>03</div>\n                    <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="16" pm>04</div>\n                    <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="17" pm>05</div>\n                    <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="18" pm>06</div>\n                    <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="19" pm>07</div>\n                    <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="20" pm>08</div>\n                    <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="21" pm>09</div>\n                    <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="22" pm>10</div>\n                    <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="23" pm>11</div>\n                </div>\n                <div class="minute-selection smart-calendar-week" role="row"><div class="header" role="rowheader"></div>\n                    <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="0">00</div>\n                    <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="5">05</div>\n                    <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="10">10</div>\n                    <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="15">15</div>\n                    <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="20">20</div>\n                    <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="25">25</div>\n                    <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="30">30</div>\n                    <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="35">35</div>\n                    <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="40">40</div>\n                    <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="45">45</div>\n                    <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="50">50</div>\n                    <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="55">55</div>\n                </div>',p.classList.add("smart-timepicker","smart-calendar","smart-visibility-hidden"),p.setAttribute("role","grid"),Smart.Utilities.Core.isMobile||(p.onmouseover=function(b){const v=b.target.closest(".smart-calendar-cell");v&&v.setAttribute("hover","")},p.onmouseout=function(b){const v=b.target.closest(".smart-calendar-cell");v&&v.removeAttribute("hover")}),t._timepicker=p;const g=t.$.calendar.selectedDates;if(g.length){const b=g[0],v={hours:b.getHours(),minutes:b.getMinutes()};let y;if(g.length>1){const x=g[g.length-1];y={hours:x.getHours(),minutes:x.getMinutes()}}v&&(t._timepicker._from=v),y&&(t._timepicker._to=y)}}const n=t._timepicker.querySelector(".hour-selection"),a=t._timepicker.querySelector(".minute-selection"),i=t.$.calendar;n.setAttribute("am-label",t.localize("am")),n.setAttribute("pm-label",t.localize("pm")),n.querySelector(".header").textContent=t.localize("hours"),a.querySelector(".header").textContent=t.localize("minutes"),t._timepicker.style.top=i.offsetTop+"px",t._timepicker.style.left=i.offsetLeft+"px",t._timepicker.style.width=i.offsetWidth+"px";const o=t._timepicker._rangeType;delete t._timepicker._rangeType;const r=e.target.closest(".smart-timepicker-button"),l=r.classList.contains("from")?"from":"to";r&&(t._timepicker._rangeType=l),Array.from(t._timepicker.querySelectorAll("div[selected]")).map(p=>{p.removeAttribute("selected"),p.setAttribute("aria-selected",!1)});const s=t._timepicker[`_${l}`];if(s){const p=t._timepicker.querySelectorAll(`.hour-selection div[value="${s.hours}"], .minute-selection div[value="${s.minutes}"]`);for(let g=0;g<p.length;g++){const b=p[g];b&&(b.setAttribute("selected",!0),b.setAttribute("aria-selected",!0))}}const c=t._timepicker.classList.contains("smart-visibility-hidden");if(!c&&o&&o!==l)return;const u=t._timepicker.parentElement;if(u||t.$.scrollView.appendChild(t._timepicker),c)u?t._timepicker.classList.remove("smart-visibility-hidden"):requestAnimationFrame(()=>t._timepicker.classList.remove("smart-visibility-hidden"));else{t._timepicker.classList.add("smart-visibility-hidden");const p=t.$.scrollView.querySelectorAll(".smart-timepicker-button");for(let g=0;g<p.length;g++)p[g].removeAttribute("selected"),p[g].setAttribute("aria-selected",!1)}}_handleTimeSelection(e,t){const n=this;if(!e)return;e.closest(".hour-selection")?Array.from(n._timepicker.querySelectorAll(".hour-selection div[selected]")).map(s=>{s.removeAttribute("selected"),s.setAttribute("aria-selected",!1)}):Array.from(n._timepicker.querySelectorAll(".minute-selection div[selected]")).map(s=>{s.removeAttribute("selected"),s.setAttribute("aria-selected",!1)}),e.setAttribute("selected",!0),e.setAttribute("aria-selected",!0);const a=n._timepicker._rangeType;if(!a)return;let i=n._timepicker[`_${a}`],[o,r]=i?[i.hours,i.minutes]:[0,0];e.closest(".hour-selection")?o=parseInt(e.getAttribute("value"))||0:r=parseInt(e.getAttribute("value"))||0,n._timepicker[`_${a}`]={hours:o,minutes:r};const l=n.$.calendar.selectedDates;l.length&&n._performSelect({detail:{value:l},noChangeEvent:t})}_valueValidator(e,t){return Array.isArray(t)||"object"===this.valueType&&t.from||"string"==typeof t?t:"object"===this.valueType?{}:""}_refreshMenu(){}_setAriaRelations(){const e=this,t=e.getAttribute("aria-label");e.readonly?(e.setAttribute("role","button"),!t&&e.placeholder&&e.setAttribute("aria-label",e.placeholder),e.removeAttribute("aria-readonly"),e.$.input.setAttribute("aria-hidden",!0),e.$.input.removeAttribute("aria-controls"),e.$.dropDownButton.setAttribute("aria-hidden",!0)):(e.setAttribute("role","presentation"),t&&t===e.placeholder&&e.removeAttribute("aria-label"),e.$.input.removeAttribute("aria-hidden"),e.$.dropDownButton.removeAttribute("aria-hidden")),e.setAttribute("aria-haspopup","dialog"),e.$.scrollView.setAttribute("role","dialog")}_setActiveDescendant(){}_setInputPurpose(){}})},7054:()=>{Smart("smart-date-time-picker",class extends Smart.BaseElement{static get properties(){return{animationSettings:{value:null,type:"object"},autoClose:{value:!1,type:"boolean"},autoCloseDelay:{value:0,type:"number"},calendarButton:{value:!1,type:"boolean"},calendarButtonPosition:{value:"right",allowedValues:["left","right"],type:"string"},calendarMode:{value:"default",allowedValues:["default","classic"],type:"string"},dayNameFormat:{value:"firstTwoLetters",allowedValues:["narrow","firstTwoLetters","long","short"],type:"string"},disableAutoNavigation:{value:!1,type:"boolean"},displayKind:{value:"unspecified",allowedValues:["UTC","local","unspecified"],type:"string"},displayModeView:{value:"table",allowedValues:["table","list"],type:"string"},displayMode:{allowedValues:["outlined","filled","underlined"],value:"outlined",type:"string"},dropDownAppendTo:{value:null,type:"any"},dropDownDisplayMode:{value:"default",allowedValues:["default","classic","calendar","timePicker","auto"],type:"string"},dropDownOverlay:{value:!1,type:"boolean"},dropDownPosition:{value:"auto",allowedValues:["auto","bottom","overlay-top","overlay-center","overlay-bottom","top","center-bottom","center-top"],type:"string"},editMode:{value:"default",allowedValues:["default","full","partial"],type:"string"},enableMouseWheelAction:{value:!1,type:"boolean"},firstDayOfWeek:{value:0,type:"number"},footerTemplate:{value:null,type:"any"},footer:{value:!1,type:"boolean"},formatString:{value:"dd-MMM-yy HH:mm:ss.fff",type:"string"},headerTemplate:{value:null,type:"any"},hideDayNames:{value:!1,type:"boolean"},hideOtherMonthDays:{value:!1,type:"boolean"},hideTooltipArrow:{value:!1,type:"boolean"},hint:{value:"",type:"string"},importantDates:{value:[],type:"array"},importantDatesTemplate:{value:null,type:"any"},interval:{value:new Smart.Utilities.TimeSpan(0,0,1),type:"any"},label:{value:"",type:"string"},max:{value:new Smart.Utilities.DateTime(3001,1,1),type:"any"},messages:{value:{en:{now:"Now",dateTabLabel:"DATE",timeTabLabel:"TIME"}},type:"object",extend:!0},min:{value:new Smart.Utilities.DateTime(1600,1,1),type:"any"},name:{value:"",type:"string"},nullable:{value:!1,type:"boolean"},opened:{value:!1,type:"boolean"},placeholder:{value:"Enter date",type:"string"},restrictedDates:{value:[],type:"array"},spinButtons:{value:!1,type:"boolean"},spinButtonsDelay:{value:75,type:"number"},spinButtonsInitialDelay:{value:0,type:"number"},spinButtonsPosition:{value:"right",allowedValues:["left","right"],type:"string"},tooltip:{value:!1,type:"boolean"},tooltipDelay:{value:100,type:"number"},tooltipPosition:{value:"top",allowedValues:["bottom","top","left","right","absolute"],type:"string"},tooltipTemplate:{value:null,type:"any"},validation:{value:"strict",allowedValues:["strict","interaction"],type:"string"},value:{defaultReflectToAttribute:!0,value:new Smart.Utilities.DateTime,type:"any"},weekNumbers:{value:!1,type:"boolean"},weeks:{value:6,type:"number"},yearCutoff:{value:1926,type:"number"}}}static get listeners(){return{"container.mouseout":"_mouseoutHandler","container.mouseover":"_mouseoverHandler","calendarButton.click":"_calendarButtonClickHandler","calendarDropDown.change":"_calendarDropDownChangeHandler","calendarDropDown.click":"_calendarDropDownClickHandler","downButton.click":"_spinButtonsClickHandler","input.blur":"_inputBlurHandler","input.change":"_inputChangeHandler","input.dragstart":"_inputDragstartHandler","input.focus":"_inputFocusHandler","input.keydown":"_inputKeydownHandler","input.down":"_inputDownHandler","input.paste":"_inputPasteHandler","input.select":"_inputSelectHandler","input.up":"_inputUpHandler","input.wheel":"_inputWheelHandler","dropDownContainer.keydown":"_dropDownKeydownHandler","dropDownContainer.transitionend":"_dropDownTransitionendHandler","dropDownHeader.click":"_dropDownHeaderClickHandler","upButton.click":"_spinButtonsClickHandler","document.up":"_documentUpHandler"}}static get requires(){return{"Smart.Utilities.DateTime":"smart.date.js","Smart.Utilities.Draw":"smart.draw.js","Smart.Utilities.BigNumber":"smart.math.js","Smart.Utilities.NumericProcessor":"smart.numeric.js","Smart.RepeatButton":"smart.button.js","Smart.Calendar":"smart.calendar.js","Smart.TimePicker":"smart.timepicker.js"}}static get styleUrls(){return["smart.datetimepicker.css"]}template(){return'<div id="container" role="presentation">\n                    <span id="label" class="smart-label">[[label]]</span>\n                    <div id="content" class="smart-content">\n                        <input id="input" class="smart-input smart-date-time-input" type="text" readonly="[[readonly]]" disabled="[[disabled]]" placeholder="[[placeholder]]" name="[[name]]" aria-label="[[placeholder]]" />\n                        <div id="spinButtonsContainer" class="smart-spin-buttons-container" role="presentation">\n                            <smart-repeat-button initial-delay="[[spinButtonsInitialDelay]]" animation="[[animation]]" delay="[[spinButtonsDelay]]" readonly="[[readonly]]"  unfocusable id="upButton" right-to-left="[[rightToLeft]]" class="smart-spin-button" aria-label="Increment">\n                                <div class="smart-arrow smart-arrow-up" aria-hidden="true"></div>\n                            </smart-repeat-button>\n                            <smart-repeat-button initial-delay="[[spinButtonsInitialDelay]]" animation="[[animation]]" delay="[[spinButtonsDelay]]" readonly="[[readonly]]" unfocusable id="downButton" right-to-left="[[rightToLeft]]" class="smart-spin-button" aria-label="Decrement">\n                                <div class="smart-arrow smart-arrow-down" aria-hidden="true"></div>\n                            </smart-repeat-button>\n                        </div>\n                        <div id="calendarButton" class="smart-drop-down-button smart-calendar-button" role="button" aria-haspopup="dialog" aria-label="Toggle popup"></div>\n                        <div id="dropDownContainer" class="smart-drop-down smart-date-time-drop-down smart-drop-down-container smart-visibility-hidden" role="dialog">\n                            <div id="dropDownHeader" class="smart-drop-down-header smart-hidden" role="heading" aria-level="1">\n                                <div id="selectDate" class="smart-selected" role="button"></div>\n                                <div id="selectTime" role="button"></div>\n                            </div>\n                            <div id="dropDownContent" class="smart-drop-down-content" role="presentation">\n                                <smart-calendar id="calendarDropDown" class="smart-hidden"\n                                              animation="[[animation]]"\n                                              animation-settings="[[animationSettings]]"\n                                              calendar-mode="[[calendarMode]]"\n                                              day-name-format="[[dayNameFormat]]"\n                                              disable-auto-navigation="[[disableAutoNavigation]]"\n                                              display-mode-view="[[displayModeView]]"\n                                              first-day-of-week="[[firstDayOfWeek]]"\n                                              header-template="[[headerTemplate]]"\n                                              hide-day-names="[[hideDayNames]]"\n                                              hide-other-month-days="[[hideOtherMonthDays]]"\n                                              hide-tooltip-arrow="[[hideTooltipArrow]]"\n                                              important-dates="[[importantDates]]"\n                                              important-dates-template="[[importantDatesTemplate]]"\n                                              locale="[[locale]]"\n                                              right-to-left="[[rightToLeft]]"\n                                              selection-mode="one"\n                                              spin-buttons-delay="[[spinButtonsDelay]]"\n                                              spin-buttons-initial-delay="[[spinButtonsInitialDelay]]"\n                                              theme="[[theme]]"\n                                              tooltip="[[tooltip]]"\n                                              tooltip-delay="[[tooltipDelay]]"\n                                              tooltip-position="[[tooltipPosition]]"\n                                              tooltip-template="[[tooltipTemplate]]"\n                                              unfocusable="[[unfocusable]]"\n                                              view-sections=\'["header", "footer"]\'\n                                              week-numbers="[[weekNumbers]]"\n                                              weeks="[[weeks]]"></smart-calendar>\n                            </div>\n                        </div>\n                    </div>\n                    <span id="hint" class="smart-hint smart-hidden">[[hint]]</span>\n                </div>'}attached(){const e=this;super.attached(),e.isCompleted&&(e._defaultFooterTemplateApplied&&e._addCalendarFooterListeners(),e.$.timePickerDropDown&&e._addTimePickerListener(),e._positionDetection&&e._positionDetection.dropDownAttached())}detached(){const e=this;if(super.detached(),e.close(),e._defaultFooterTemplateApplied){const t=e.$.calendarDropDown.$footer;t.unlisten("change"),t.unlisten("click"),t.unlisten("wheel")}e.$.timePickerDropDown&&e.$.timePickerDropDown.$.unlisten("change"),e._positionDetection&&e._positionDetection.dropDownDetached()}ready(){super.ready();const e=this;e._edgeMacFF=Smart.Utilities.Core.Browser.Edge||Smart.Utilities.Core.Browser.Firefox&&-1!==navigator.platform.toLowerCase().indexOf("mac"),e._iOS=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform),e._edgeMacFF&&e.$dropDownContainer.addClass("not-in-view"),e._defaultFooterTemplate=document.createElement("template"),e._defaultFooterTemplate.innerHTML='<div class="smart-date-time-picker-footer">\n                <div class="smart-footer-component smart-footer-component-hour" role="presentation">\n                    <input type="text" class="smart-hour-element" aria-label="Hours" />\n                    <span role="presentation">\n                        <smart-repeat-button initial-delay="0" delay="75" aria-label="Increment hours">\n                            <span class="smart-arrow smart-arrow-up" aria-hidden="true"></span>\n                        </smart-repeat-button>\n                        <smart-repeat-button  initial-delay="0" delay="75" aria-label="Decrement hours">\n                            <span class="smart-arrow smart-arrow-down" aria-hidden="true"></span>\n                        </smart-repeat-button>\n                    </span>\n                </div>\n                <div class="smart-footer-component smart-footer-component-minute" role="presentation">\n                    <input class="smart-minute-element" aria-label="Minutes" />\n                    <span role="presentation">\n                        <smart-repeat-button initial-delay="0" delay="75" aria-label="Increment minutes">\n                            <span class="smart-arrow smart-arrow-up" aria-hidden="true"></span>\n                        </smart-repeat-button>\n                        <smart-repeat-button initial-delay="0" delay="75" aria-label="Decrement minutes">\n                            <span class="smart-arrow smart-arrow-down" aria-hidden="true"></span>\n                        </smart-repeat-button>\n                    </span>\n                </div>\n                <div class="smart-footer-component smart-footer-component-ampm" role="presentation">\n                    <input type="text" class="smart-am-pm-element" aria-label="AM/PM" />\n                </div>\n                <div class="smart-footer-component smart-footer-component-today" role="presentation">\n                    <div tabindex="-1" class="smart-today-element" role="button" aria-label="Now"></div>\n                </div>\n            </div>',e._codeToMethod={y:"addYears",yy:"addYears",yyyy:"addYears",yyyyy:"addYears",M:"addMonths",MM:"addMonths",MMM:"addMonths",MMMM:"addMonths",d:"addDays",dd:"addDays",ddd:"addDays",dddd:"addDays",H:"addHours",HH:"addHours",h:"addHours",hh:"addHours",m:"addMinutes",mm:"addMinutes",s:"addSeconds",ss:"addSeconds",f:"addDeciseconds",ff:"addCentiseconds",fff:"addMilliseconds",u:"addMicroseconds",uu:"addMicroseconds",n:"addNanoseconds",nn:"addNanoseconds",p:"addPicoseconds",pp:"addPicoseconds",e:"addFemtoseconds",ee:"addFemtoseconds",a:"addAttoseconds",aa:"addAttoseconds",x:"addZeptoseconds",xx:"addZeptoseconds",o:"addYoctoseconds",oo:"addYoctoseconds"},e._codeToIndex={y:0,yy:0,yyyy:0,yyyyy:0,M:1,MM:1,MMM:1,MMMM:1,d:2,dd:2,ddd:2,dddd:2,H:3,HH:3,h:3,hh:3,m:4,mm:4,s:5,ss:5,f:6,ff:6,fff:6,u:7,uu:7,n:8,nn:8,p:9,pp:9,e:10,ee:10,a:11,aa:11,x:12,xx:12,o:13,oo:13},e._getLocalizedNames(),e.checkLicense()}render(){const e=this;e.rightToLeft&&(e.calendarButtonPosition="right"===e.calendarButtonPosition?"left":"right"),e._positionDetection=new Smart.Utilities.PositionDetection(e,e.$.dropDownContainer,e.$.content,"close"),e._positionDetection.customPositionDropDown=e._positionExternalDropDown,e._positionDetection.getDropDownParent(!0),e._positionDetection.setDropDownPosition(),e.$.dropDownContainer.style.left=null,e._positionDetection.handleAutoPositioning(),e._setIds(),e._validateInitialPropertyValues(),e._setFocusable(),e.setAttribute("role","presentation"),e.$.input.setAttribute("aria-describedby",e.$.hint.id),e.$.input.setAttribute("aria-labelledby",e.$.label.id),e.$.calendarButton.setAttribute("aria-owns",e.$.dropDownContainer.id),e.$.dropDownContainer.setAttribute("animation",e.animation),e.$.dropDownContainer.setAttribute("drop-down-display-mode",e.dropDownDisplayMode),super.render(),e.isInitialized=!0}close(){this.opened&&this._close()}focus(){this.$.input.focus()}select(){this.$.input.select()}open(){this.opened||this._open()}_handleFooter(){const e=this;if(e.footer){e.$.dropDownContainer.setAttribute("footer","");const t=e.$.calendarDropDown;"default"===e._dropDownDisplayMode?t.viewSections=["title","header","footer"]:"classic"===e._dropDownDisplayMode?t.viewSections=["header","footer"]:"calendar"===e._dropDownDisplayMode&&(t.viewSections=["title","header","footer"])}else e.$.dropDownContainer.removeAttribute("footer")}propertyChangedHandler(e,t,n){super.propertyChangedHandler(e,t,n);const a=this;switch(e){case"animation":case"theme":a.$.timePickerDropDown&&(a.$.timePickerDropDown[e]=n),"animation"===e&&(a.$.dropDownContainer.setAttribute("animation",a.animation),a._defaultFooterTemplateApplied&&Array.from(a.$.calendarDropDown.$.footer.getElementsByTagName("smart-repeat-button")).forEach(function(i){i.animation=n}));break;case"calendarButton":a.$.dropDownContainer.style.transition="none",n||a.close();break;case"calendarButtonPosition":a.$.dropDownContainer.style.transition="none",a.close(),"left"===n?a.$.content.insertBefore(a.$.calendarButton,a.$.content.firstElementChild):null===a._dropDownParent?a.$.content.insertBefore(a.$.calendarButton,a.$.dropDownContainer):a.$.content.appendChild(a.$.calendarButton);break;case"disabled":n?(a.close(),a.$.upButton.disabled=!0,a.$.downButton.disabled=!0):a._disableSpinButtons(),a._setFocusable(),a._positionDetection.handleAutoPositioning();break;case"displayKind":{const i=a._outputTimeZone;switch(n){case"unspecified":a._outputTimeZone=a._inputTimeZone;break;case"UTC":a._outputTimeZone="UTC";break;case"local":a._outputTimeZone="Local"}if(a._outputTimeZone===i)return;null!==a._value&&(a.close(),a._toSync=!0,a._value=a._value.toTimeZone(a._outputTimeZone),a._applyFormatString()),a.min=a.min.toTimeZone(a._outputTimeZone),a.max=a.max.toTimeZone(a._outputTimeZone);for(let o=0;o<a.restrictedDates.length;o++){let r=a.restrictedDates[o];r=r.toTimeZone(a._outputTimeZone)}break}case"dropDownAppendTo":a._positionDetection.dropDownAppendToChangedHandler();break;case"dropDownDisplayMode":a._changeDropDownDisplayMode();break;case"dropDownOverlay":n||a._positionDetection.removeOverlay();break;case"dropDownPosition":a._positionDetection.dropDownPositionChangedHandler();break;case"footer":a._handleFooter();break;case"footerTemplate":if(null!==n){a._defaultFooterTemplateApplied=!1;const i=a.$.calendarDropDown.$footer;i.unlisten("change"),i.unlisten("click"),i.unlisten("wheel"),a.$.calendarDropDown.footerTemplate=n}else{a._setDefaultFooterTemplate();const i=a._value;a._hourElement.value=i.toString("hh"),a._minuteElement.value=i.toString("mm"),a._ampmElement.value=i.toString("tt")}a._handleFooter();break;case"formatString":""===n&&(a.formatString="dd-MMM-yy HH:mm:ss.fff"),a._getFormatStringRegExp(),a._applyFormatString(),"auto"===a.dropDownDisplayMode&&a._changeDropDownDisplayMode(),a._timePickerInitialized&&(a.$.timePickerDropDown.format=a._formatStringRegExp.groups.find(i=>-1!==i.indexOf("H"))?"24-hour":"12-hour");break;case"interval":a._validateInterval(t);break;case"locale":case"messages":if(a.$.selectDate.innerHTML=a.localize("dateTabLabel"),a.$.selectTime.innerHTML=a.localize("timeTabLabel"),a._defaultFooterTemplateApplied&&(a._todayElement.title=a.localize("now")),"messages"===e)return;a._getLocalizedNames(),a.min.calendar.days=a._localizedDays,a.min.calendar.months=a._localizedMonths,a.min.calendar.locale=a.locale,a.max.calendar.days=a._localizedDays,a.max.calendar.months=a._localizedMonths,a.max.calendar.locale=a.locale,null!==a.value&&(a._value.calendar.days=a._localizedDays,a._value.calendar.months=a._localizedMonths,a._value.calendar.locale=a.locale,a.value.calendar.days=a._localizedDays,a.value.calendar.months=a._localizedMonths,a.value.calendar.locale=a.locale),Smart.Utilities.DateTime.cache=[],a._applyFormatString();break;case"max":case"min":a._validateMinMax(e,t),"strict"===a.validation?a._validateValue():a._minMaxChanged=!0;break;case"nullable":!0===t&&null===a._value&&a._validateValue(a._now(),null);break;case"opened":n?a._open():a._close();break;case"readonly":case"unfocusable":n&&a.close(),"unfocusable"===e&&a._setFocusable();break;case"restrictedDates":a._validateRestrictedDates(),a._validateValue();break;case"spinButtonsPosition":a.$.content.insertBefore(a.$.spinButtonsContainer,"right"===n?a.$.input.nextElementSibling:a.$.input);break;case"validation":"strict"===n&&(delete a._minMaxChanged,a._validateValue());break;case"value":{let i;null!==n?(i=Smart.Utilities.DateTime.validateDate(n,a._now(),a.formatString),i=i.toTimeZone(a._outputTimeZone)):i=null,a._validateValue(i,a._value,void 0,!0);break}}}_addCalendarFooterListeners(){const e=this,t=e.$.calendarDropDown.$footer;t.listen("change",e._footerChangeHandler.bind(e)),t.listen("click",e._footerClickHandler.bind(e)),t.listen("wheel",e._footerWheelHandler.bind(e))}_addTimePickerListener(){const e=this;e.$.timePickerDropDown.$.listen("change",function(t){const n=e.context,a=t.detail.value,i=Smart.Utilities.DateTime.getConstructorParameters(null!==e._value?e._value:e._now());e.context=e,i[3]=a.getHours(),i[4]=a.getMinutes(),e._timePickerInitiatedChange=!0,i.unshift(null),e._validateValue(new(Function.prototype.bind.apply(Smart.Utilities.DateTime,i))),e._timePickerInitiatedChange=!1,e.context=n})}_applyFormatString(){const e=this;null!==e.value&&(e.$.input.value=e._value.toString(e.formatString))}_calendarButtonClickHandler(e){const t=this;t._highlightedTimePart=void 0,t.disabled||t.readonly||(t.hasRippleAnimation&&Smart.Utilities.Animation.Ripple.animate(t.$.calendarButton,e.pageX,e.pageY),t.opened?t._close():t._open())}_calendarDropDownChangeHandler(e){const t=this;if(e.stopPropagation(),t._disregardCalendarChangeEvent)t._disregardCalendarChangeEvent=!1;else if(this.$.calendarDropDown.selectedDates.length>0){const n=e.detail.value[0],a=null!==t._value?t._value:t._now(),i=Smart.Utilities.DateTime.getConstructorParameters(a);if(i[0]=n.getFullYear(),i[1]=n.getMonth()+1,i[2]=n.getDate(),t._calendarInitiatedChange=!0,i.unshift(null),t._validateValue(new(Function.prototype.bind.apply(Smart.Utilities.DateTime,i))),t._defaultFooterTemplateApplied){const o=t._value;""===t._hourElement.value&&(t._hourElement.value=o.toString("hh")),""===t._ampmElement.value&&(t._ampmElement.value=o.toString("tt")),""===t._minuteElement.value&&(t._minuteElement.value=o.toString("mm"))}t._calendarInitiatedChange=!1}else t._setNullValue()}_calendarDropDownClickHandler(e){const t=this;t.autoClose&&e.target.closest(".smart-calendar-cell")&&(clearTimeout(t._autoCloseTimeout),t._autoCloseTimeout=setTimeout(function(){t.close()},t.autoCloseDelay))}_changeDropDownDisplayMode(){function e(a,i,o,r){t.$dropDownHeader[a]("smart-hidden"),t.$calendarDropDown[i]("smart-hidden"),t._timePickerInitialized&&t.$.timePickerDropDown.$[o]("smart-hidden"),r&&(t.opened?t.$.calendarDropDown._refreshTitle():t._toSync=!0)}const t=this,n=t._dropDownDisplayMode;t._detectDisplayMode(),t._dropDownDisplayMode!==n&&("default"===t._dropDownDisplayMode?(t.calendarMode="default",t.$.calendarDropDown.viewSections=["title","header"],t.$selectDate.addClass("smart-selected"),t.$selectTime.removeClass("smart-selected"),e("removeClass","removeClass","addClass",!0)):"classic"===t._dropDownDisplayMode?(t.calendarMode="classic",t.$.calendarDropDown.viewSections=["header","footer"],e("addClass","removeClass","addClass")):"calendar"===t._dropDownDisplayMode?(t.calendarMode="default",t.$.calendarDropDown.viewSections=["title","header"],e("addClass","removeClass","addClass",!0)):(t.calendarMode="default",e("addClass","addClass","removeClass"),t._timePickerInitialized||t._initializeTimePicker()),t.$.dropDownContainer.setAttribute("drop-down-display-mode",t.dropDownDisplayMode))}_cloneValue(){return null!==this._value?this._value.clone():null}_close(){const e=this;if(e.$.fireEvent("closing").defaultPrevented)e.opened=!0;else{e.$.calendarDropDown.disabled=!0,e.$calendarButton.removeClass("smart-calendar-button-pressed"),e.$.calendarButton.removeAttribute("active"),e.$dropDownContainer.addClass("smart-visibility-hidden");const t=e.$.calendarDropDown.$.container.querySelector(".smart-calendar-cell[hover]");t&&t.removeAttribute("hover"),e.opened=!1,e._positionDetection.removeOverlay(!0),e.$.fireEvent("close"),e._edgeMacFF&&!e.hasAnimation&&(e.$.dropDownContainer.style.top=null,e.$.dropDownContainer.style.left=null,e.$dropDownContainer.addClass("not-in-view")),e.$.input.focus()}e.$.calendarButton.setAttribute("aria-expanded",e.opened)}_detectDisplayMode(){const e=this;e._dropDownDisplayMode="auto"!==e.dropDownDisplayMode?e.dropDownDisplayMode:Smart.Utilities.DateTime.detectDisplayMode(e.value||e.min,e.formatString,e._formatStringRegExp),"timePicker"===e._dropDownDisplayMode?(e.$calendarButton.addClass("time"),"Enter date"===e.placeholder&&(e.placeholder="Enter time")):(e.$calendarButton.removeClass("time"),"Enter time"===e.placeholder&&(e.placeholder="Enter date")),"default"===e._dropDownDisplayMode?e.$dropDownContent.removeClass("partial"):e.$dropDownContent.addClass("partial")}_disableSpinButtons(){const e=this;if(e.disabled)return;const t=null===e._value;e.$.upButton.disabled=t,e.$.downButton.disabled=t}_documentUpHandler(e){const t=this,n=(t.shadowRoot||t.getRootNode()).activeElement||document.activeElement,a=t.shadowRoot||t.isInShadowDOM?e.originalEvent.composedPath()[0]:e.originalEvent.target;Smart.Utilities.Core.isMobile||n!==t.$.input||"partial"!==t.editMode||null===t._value||a===t.$.input&&t.$.input.selectionStart!==t.$.input.selectionEnd?a===t.$.calendarButton||t.$.dropDownContainer.contains(a)||t.$.dropDownContainer.contains(t._getRootShadowHost(a))||(t.close(),n===t.$.input||t.contains(a)||(t._highlightedTimePart=void 0)):(t._highlightedTimePartEdit=!1,t._validateValue(t.$.input.value,t._cloneValue(),!1),t._highlightTimePartBasedOnCursor()),t._mouseFocus=!1}_getRootShadowHost(e){const t=this;if(!t.shadowRoot&&!t.isInShadowDOM)return;let n,a=e.getRootNode().host;for(;a&&a!==t&&a!==document;)n=a,a=a.getRootNode().host;return n}_dropDownHeaderClickHandler(e){const t=this;if(e.target===t.$.selectDate){if(t.$selectDate.hasClass("smart-selected"))return;t.$selectDate.addClass("smart-selected"),t.$selectTime.removeClass("smart-selected"),t.$.timePickerDropDown.$.addClass("smart-hidden"),t.$calendarDropDown.removeClass("smart-hidden")}else{if(t.$selectTime.hasClass("smart-selected"))return;t.$selectDate.removeClass("smart-selected"),t.$selectTime.addClass("smart-selected"),t.$calendarDropDown.addClass("smart-hidden"),t._timePickerInitialized?t.$.timePickerDropDown.$.removeClass("smart-hidden"):t._initializeTimePicker()}}_dropDownKeydownHandler(e){const t=this,n=e.key,a=t.shadowRoot?t.shadowRoot.activeElement:document.activeElement;!t.$.dropDownHeader.contains(a)||"Enter"!==n&&" "!==n?"Escape"===n||e.altKey&&"ArrowUp"===n?(e.preventDefault(),t.close(),t.$.input.focus()):"Enter"!==n&&" "!==n||!a.classList.contains("smart-footer-component-today")?"Enter"===n&&(a===t.$.calendarDropDown.$.body&&t.$.calendarDropDown.querySelectorAll(".smart-calendar-cell[selected][focus]").length>0||t._timePickerInitialized&&a===t.$.timePickerDropDown.$.picker)&&(e.preventDefault(),t.close()):(e.preventDefault(),t._validateValue(t._now()),t.close()):(e.preventDefault(),t._dropDownHeaderClickHandler({target:a}))}_dropDownTransitionendHandler(){const e=this;if(e.hasAnimation)return e.opened&&e._toFocus?(e._toFocus.focus(),delete e._toFocus,void(e._timePickerInitialized&&!e.$.timePickerDropDown.classList.contains("smart-hidden")&&requestAnimationFrame(()=>e.$.timePickerDropDown._highlightLabel()))):e._edgeMacFF&&!e.opened?(e.$.dropDownContainer.style.top=null,e.$.dropDownContainer.style.left=null,void e.$dropDownContainer.addClass("not-in-view")):void 0}_footerChangeHandler(e){const t=this,n=t.context,a=e.target,i=null!==t._value?t._value:t._now();let o,r=a.value;if(t.context=t,e.stopPropagation(),a.classList.contains("smart-hour-element")){if(r=parseInt(r,10),isNaN(r)||r<0||r>12)return void(a.value=i.toString("hh"));r>0&&r<12&&"PM"===i.toString("tt")&&(r+=12),o="hh"}else{if(!a.classList.contains("smart-minute-element")){if(null===t._value)return void(a.value="");const s=i.toString("tt");return r=r.toLowerCase(),void("PM"===s&&("a"===r||"am"===r)||"AM"===s&&("p"===r||"pm"===r)?(t._incrementDecrement(void 0,"tt"),a.value=t._value.toString("tt")):a.value=s)}if(r=parseInt(r,10),isNaN(r)||r<0||r>59)return void(a.value=i.toString("mm"));o="mm"}const l=Smart.Utilities.DateTime.getConstructorParameters(i);l[t._codeToIndex[o]]=r,l.unshift(null),t._validateValue(new(Function.prototype.bind.apply(Smart.Utilities.DateTime,l))),a.value=t._value.toString(o),t.context=n}_footerClickHandler(e){const t=this,n=t.context,a=e.target;if(t.context=t,a.classList.contains("smart-today-element"))t._validateValue(t._now()),t.autoClose&&(clearTimeout(t._autoCloseTimeout),t._autoCloseTimeout=setTimeout(function(){t.close()},t.autoCloseDelay));else{const i=a.closest("smart-repeat-button");if(null!==i){const o=i===i.parentElement.children[1],r=i.closest(".smart-footer-component").classList.contains("smart-footer-component-hour")?"hh":"mm";t._incrementDecrement(o,r)}}t.context=n}_footerWheelHandler(e){const t=this,n=t.shadowRoot?t.shadowRoot.activeElement:document.activeElement;if(t.enableMouseWheelAction&&e.target instanceof HTMLInputElement&&n===e.target){const a=t.context,i=e.target;t.context=t,i.classList.contains("smart-hour-element")?t._incrementDecrement(e.deltaY>0,"hh"):i.classList.contains("smart-minute-element")?t._incrementDecrement(e.deltaY>0,"mm"):t._incrementDecrement(void 0,"tt"),t.context=a,e.stopPropagation()}}_getAndHighlightTimePart(e,t,n){const a=this;a._programmaticSelection=!0,a.$.input.selectionStart!==e||a.$.input.selectionEnd!==t?a.$.input.setSelectionRange(e,t):setTimeout(function(){a.$.input.setSelectionRange(e,t)},200),a._highlightedTimePart={code:a._formatStringRegExp.groups[n],index:n,from:e,to:t}}_getFormatStringRegExp(){const e=this;e._formatStringRegExp=e.min.getParseRegExp(e.min.calendar,e.formatString.replace(/y+/g,"yyyyy")),e._formatStringRegExp.regExp=new RegExp(e._formatStringRegExp.regExp)}_getLocalizedNames(){const e=this,t=Smart.Utilities.DateTime.getLocalizedNames(e.locale);e._localizedDays=t.days,e._localizedMonths=t.months,e.$.selectDate.innerHTML=e.localize("dateTabLabel"),e.$.selectTime.innerHTML=e.localize("timeTabLabel")}_handleManualTimePartEdit(e){const t=this,n=Smart.Utilities.DateTime.getConstructorParameters(t._value);if(e=e[t._highlightedTimePart.index+1],isNaN(e)){if(1===t._codeToIndex[t._highlightedTimePart.code]){let a=-1;if(e.length>1&&t._localizedMonths.names.some(function(i,o){if(-1!==i.toLowerCase().indexOf(e.toLowerCase()))return a=o,!0}),-1===a)return void t._applyFormatString();n[1]=a+1}}else{if("f"===t._highlightedTimePart.code)e=100*parseInt(e,10);else if("ff"===t._highlightedTimePart.code)e=10*parseInt(e,10);else if(-1!==t._highlightedTimePart.code.indexOf("y")&&e.length<3){const a=t.yearCutoff.toString(),i=parseInt(a.slice(2),10);let o=parseInt(a.slice(0,2),10);(e=parseInt(e,10))<i&&o++,e=e.toString(),e=o+""+"0".repeat(2-e.length)+e}else if(-1!==t._highlightedTimePart.code.indexOf("h")){const a=t._value.hour();e=parseInt(e,10),a>11&&e<=11&&(e+=12)}n[t._codeToIndex[t._highlightedTimePart.code]]=parseInt(e,10)}try{n.unshift(null),t._validateValue(new(Function.prototype.bind.apply(Smart.Utilities.DateTime,n)))}catch(a){t._applyFormatString()}}_highlightTimePartBasedOnCursor(e){const t=this,n=t.$.input.value,a=t._formatStringRegExp.regExp.exec(n);function i(){return void 0===e?t.$.input.selectionStart:e}if(null===a)return void(t._highlightedTimePart=void 0);t._iOS||void 0!==e||(e=t.$.input.selectionStart);let o,r=a.index;for(let l=1;l<a.length;l++){const s=a[l];if(o=n.indexOf(s,r),r=o+s.length,1===l&&i()<o){t._getAndHighlightTimePart(o,r,0);break}if(i()>=o&&i()<=r){t._getAndHighlightTimePart(o,r,l-1);break}const c=a[l+1];if(!c){t._programmaticSelection=!0,t.$.input.setSelectionRange(o,r),t._highlightedTimePart={code:t._formatStringRegExp.groups[l-1],index:l-1,from:o,to:r};break}{const u=n.indexOf(c,r);if(i()>r&&i()<u){i()-r<=u-i()?t._getAndHighlightTimePart(o,r,l-1):(t._programmaticSelection=!0,t.$.input.setSelectionRange(u,u+c.length));break}}}}_highlightTimePartBasedOnIndex(e){const t=this,n=t.$.input.value,a=t._formatStringRegExp.regExp.exec(n);if(null===a)return t._validateValue(void 0,t._cloneValue(),!1),void t._highlightTimePartBasedOnIndex(e);let i,o=a.index;const r=t.shadowRoot?t.shadowRoot.activeElement:document.activeElement;if(!(e<0||e>=a.length)){t.$.input!==r&&t.$.input.focus();for(let l=1;l<a.length;l++){const s=a[l];if(i=n.indexOf(s,o),o=i+s.length,e===l-1){t._getAndHighlightTimePart(i,o,e);break}}}}_incrementDecrement(e,t){const n=this,a=n._cloneValue();if(n._minMaxChanged&&(n._value=n._rangeValidation(n._value),delete n._minMaxChanged),void 0===t&&n._highlightedTimePart&&(t=n._highlightedTimePart.code),void 0!==t){if("z"===t||"zz"===t||"zzz"===t)return void n._highlightTimePartBasedOnIndex(n._highlightedTimePart.index);n._value="t"===t||"tt"===t?n._value.addHours(n._value.hour()<12?12:-12,!0):n._value[n._codeToMethod[t]](e?-1:1,!0),n._validateValue(void 0,a,!1),n._highlightedTimePart&&n._highlightTimePartBasedOnIndex(n._highlightedTimePart.index)}else n._value=n._value.add(e?n.interval.negate():n.interval,void 0,!0),n._validateValue(void 0,a,!1);0!==a.compare(n._value)&&n.isInitialized&&n.$.fireEvent("change",{oldValue:a.toTimeZone(n._inputTimeZone),value:n.value})}_initializeTimePicker(){const e=this,t=document.createElement("smart-time-picker");t.rightToLeft=e.rightToLeft,t.animation=e.animation,t.format=e._formatStringRegExp.groups.find(n=>-1!==n.indexOf("H"))?"24-hour":"12-hour",t.theme=e.theme,t.value=null!==e._value?e._value.toDate():e._now(),e.$.timePickerDropDown=t,t.$=Smart.Utilities.Extend(t),e.$.dropDownContent.appendChild(t),e._timePickerInitialized=!0,e._addTimePickerListener()}_inputBlurHandler(){const e=this;e.removeAttribute("focus"),e._fullEdit=!1,e._highlightedTimePartEdit=!1,e.$.fireEvent("blur")}_inputChangeHandler(e){const t=this;if(e&&e.stopPropagation(),""!==t.$.input.value){if(t._fullEdit||null===t._value)t._fullEdit=!1,t._validateValue(t.$.input.value),t._highlightTimePartBasedOnCursor();else if(t._highlightedTimePartEdit){t._highlightedTimePartEdit=!1;let n=t._formatStringRegExp.regExp.exec(t.$.input.value);null!==n?t._handleManualTimePartEdit(n):t._applyFormatString()}}else t._setNullValue()}_inputDragstartHandler(e){e.preventDefault()}_inputFocusHandler(){const e=this;if(e.setAttribute("focus",""),"full"!==e.editMode){const t=Smart.Utilities.Core.isMobile?10:0;setTimeout(function(){e._iOS?e._highlightTimePartBasedOnCursor():!0!==e._mouseFocus&&(void 0===e._highlightedTimePart?e._highlightTimePartBasedOnCursor(e._iOS?void 0:0):e._highlightTimePartBasedOnIndex(e._highlightedTimePart.index))},t)}e.$.fireEvent("focus")}_inputKeydownHandler(e){const t=this,n=t.editMode,a=e.key;if("Tab"!==a){if(e.altKey&&"ArrowDown"===a)return e.preventDefault(),void t.open();if("Escape"===a||e.altKey&&"ArrowUp"===a)return e.preventDefault(),void t.close();if("full"!==n){if("partial"===n){if("Delete"===a)return void(null!==t._value&&(t._setNullValue(),e.preventDefault()));if(null===t._value&&(t._validateValue(t._now(),null,!1),t._highlightTimePartBasedOnIndex(0)),-1!==["/",".","-",","," "].indexOf(a))return t._inputChangeHandler(),t._navigateToNextTimePart(),void e.preventDefault();if("Backspace"===a)return t._resetTimePart(),t._highlightedTimePart.index>0?t._navigateToPreviousTimePart():t._highlightTimePartBasedOnIndex(0),void e.preventDefault()}else if(t._fullEdit||t._highlightedTimePartEdit||t.readonly||-1!==["Alt","Control","Shift"].indexOf(a)||e.altKey||e.ctrlKey)return;if(-1!==["End","Home","ArrowLeft","ArrowUp","ArrowRight","ArrowDown"].indexOf(a)){if(e.preventDefault(),"partial"===n&&t._highlightedTimePartEdit&&t._inputChangeHandler(),null!==t._value)switch(a){case"End":t._highlightTimePartBasedOnIndex(t._formatStringRegExp.groups.length-1);break;case"Home":t._highlightTimePartBasedOnIndex(0);break;case"ArrowLeft":t._navigateToPreviousTimePart();break;case"ArrowUp":t._incrementDecrement();break;case"ArrowRight":t._navigateToNextTimePart();break;case"ArrowDown":t._incrementDecrement(!0)}}else if(t._highlightedTimePart){if("partial"!==n&&t._highlightedTimePart.to-t._highlightedTimePart.from!=t.$.input.selectionEnd-t.$.input.selectionStart)return void(t._fullEdit=!0);const i=t._highlightedTimePart.code;if("ddd"===i||"dddd"===i||"z"===i||"zz"===i||"zzz"===i||"t"===i||"tt"===i)return void e.preventDefault();if("partial"===n&&"MMM"!==i&&"MMMM"!==i&&!1===new RegExp(/^\d+$/).test(a))return void((a.length<2||"F"!==a.charAt(0))&&e.preventDefault());t._highlightedTimePartEdit=!0}}else t._fullEdit=!0}}_inputDownHandler(){const e=this;e._fullEdit||e._highlightedTimePartEdit||"full"===e.editMode||Smart.Utilities.Core.isMobile||setTimeout(function(){e._mouseFocus=!0,e._highlightTimePartBasedOnCursor()},0)}_inputPasteHandler(e){"partial"===this.editMode?e.preventDefault():this._fullEdit=!0}_inputSelectHandler(){const e=this,t=e.shadowRoot?e.shadowRoot.activeElement:document.activeElement;"partial"===e.editMode&&t===e.$.input&&(!0===e._programmaticSelection?e._programmaticSelection=!1:e._highlightTimePartBasedOnIndex(e._highlightedTimePart?e._highlightedTimePart.index:0))}_inputUpHandler(){const e=this;Smart.Utilities.Core.isMobile&&(e._iOS?(e._mouseFocus=!0,setTimeout(function(){document.activeElement===e.$.input&&e._highlightTimePartBasedOnCursor()},50)):setTimeout(function(){e._mouseFocus=!0,e._highlightTimePartBasedOnCursor()},10))}_inputWheelHandler(e){const t=this;(t.shadowRoot?t.shadowRoot.activeElement:document.activeElement)!==t.$.input||!t.enableMouseWheelAction||t.disabled||t.readonly||(e.preventDefault(),t._incrementDecrement(e.deltaY>0))}_isRestricted(e){const t=this.restrictedDates;let n=!1;for(let a=0;a<t.length;a++)if(e.equalDateParts(t[a])){n=!0;break}return n}_mouseoutHandler(e){const t=this,n=e.target;t.disabled||n!==t.$.input&&n!==t.$.calendarButton||(n.removeAttribute("hover"),t.removeAttribute("hover"))}_mouseoverHandler(e){const t=this,n=e.target;t.disabled||n!==t.$.input&&n!==t.$.calendarButton||(n.setAttribute("hover",""),t.setAttribute("hover",""))}_navigateToNextTimePart(){this._highlightTimePartBasedOnIndex(this._highlightedTimePart.index+1)}_navigateToPreviousTimePart(){this._highlightTimePartBasedOnIndex(this._highlightedTimePart.index-1)}_now(){const t=new Smart.Utilities.DateTime("today","Local");return"Local"!==this._outputTimeZone?t.toTimeZone(this._outputTimeZone):t}_open(e){const t=this;if(t.disabled||t.readonly||t.$.fireEvent("opening").defaultPrevented)return t.opened=!1,void t.$.calendarButton.setAttribute("aria-expanded",!1);t._edgeMacFF&&t.$dropDownContainer.removeClass("not-in-view");const n=t.$.dropDownContainer;n.style.marginLeft=null,e||(n.style.transition=""),t.$.calendarDropDown.disabled=!1,t.$calendarButton.addClass("smart-calendar-button-pressed"),t.$.calendarButton.setAttribute("active",""),("default"!==t._dropDownDisplayMode&&"timePicker"!==t._dropDownDisplayMode||!t._timePickerInitialized||t._timePickerInitialized&&t.$.timePickerDropDown.$.hasClass("smart-hidden"))&&t.$calendarDropDown.removeClass("smart-hidden"),t.opened=!0,t.$.calendarButton.setAttribute("aria-expanded",!0),t._positionDetection.placeOverlay(),t._positionDetection.checkBrowserBounds("vertically"),t._positionDetection.positionDropDown(),t.$dropDownContainer.removeClass("smart-visibility-hidden");const a=1===window.devicePixelRatio?document.documentElement.clientWidth:window.innerWidth,i=n.getBoundingClientRect();if(i.left<0?n.style.marginLeft=-1*i.left+"px":i.right>a&&(n.style.marginLeft=a-i.right+"px"),t.$.fireEvent("open"),t._toSync){const r=t._value;if(null!==r)t._disregardCalendarChangeEvent=!0,t.$.calendarDropDown.selectedDates=[r.toDate()],t._defaultFooterTemplateApplied&&(t._hourElement.value=r.toString("hh"),t._minuteElement.value=r.toString("mm"),t._ampmElement.value=r.toString("tt")),t._timePickerInitialized&&(t.$.timePickerDropDown.value=r.toDate());else{const l=t.$.calendarDropDown.context;t.$.calendarDropDown.context=t.$.calendarDropDown,t.$.calendarDropDown._clearSelection(!0),t.$.calendarDropDown.context=l,t._defaultFooterTemplateApplied&&(t._hourElement.value="",t._minuteElement.value="",t._ampmElement.value="")}t._toSync=!1}let o;switch(t._dropDownDisplayMode){case"default":o=t.$selectDate.hasClass("smart-selected")?t.$.calendarDropDown:t.$.timePickerDropDown.$.picker;break;case"classic":case"calendar":o=t.$.calendarDropDown;break;case"timePicker":o=t.$.timePickerDropDown.$.picker}t.hasAnimation?(t._toFocus=o,function r(){t._toFocus&&(0===t.$.dropDownContainer.getBoundingClientRect().height?requestAnimationFrame(r):t._dropDownTransitionendHandler())}()):o.focus()}_positionExternalDropDown(e){const t=this.context,n=!t.calendarButton||"right"===t.calendarButtonPosition,a=t._dropDownListPosition,i=t.$.dropDownContainer;let o,r=n?e.right-i.offsetWidth:e.left;switch(a){case"bottom":o=e.bottom;break;case"overlay-top":o=e.bottom-i.offsetHeight;break;case"overlay-center":o=e.top+e.height/2-i.offsetHeight/2;break;case"overlay-bottom":o=e.top;break;case"top":o=e.top-i.offsetHeight;break;case"center-bottom":case"center-top":o="center-bottom"===a?e.bottom+5:e.top-5-i.offsetHeight,r=n?e.right-i.offsetWidth/2-t.$.calendarButton.offsetWidth/2:e.left-i.offsetWidth/2+t.$.calendarButton.offsetWidth/2}return{left:r,top:o}}_rangeValidation(e){const t=this;return-1===e.compare(t.min)?t.min.clone():1===e.compare(t.max)?t.max.clone():e}_resetTimePart(){const e=this,n=e._codeToIndex[e._highlightedTimePart.code],a=Smart.Utilities.DateTime.getConstructorParameters(e._value);let i;i=n>2?0:n>0?1:e.min.year(),a[n]=i,a.unshift(null),e._validateValue(new(Function.prototype.bind.apply(Smart.Utilities.DateTime,a)))}_setIds(){const e=this;e.$.label.id||(e.$.label.id=e.id+"Label"),e.$.input.id||(e.$.input.id=e.id+"Input"),e.$.calendarButton.id||(e.$.calendarButton.id=e.id+"CalendarButton"),e.$.dropDownContainer.id||(e.$.dropDownContainer.id=e.id+"DropDownContainer"),e.$.hint.id||(e.$.hint.id=e.id+"Hint")}_setDefaultFooterTemplate(e){const t=this;t.$.calendarDropDown.footerTemplate=t._defaultFooterTemplate,e&&t.$.calendarDropDown._handleLayoutTemplate(t.$.calendarDropDown.$.footer,t._defaultFooterTemplate),t._hourElement=t.$.calendarDropDown.getElementsByClassName("smart-hour-element")[0],t._minuteElement=t.$.calendarDropDown.getElementsByClassName("smart-minute-element")[0],t._ampmElement=t.$.calendarDropDown.getElementsByClassName("smart-am-pm-element")[0],t._todayElement=t.$.calendarDropDown.getElementsByClassName("smart-today-element")[0],t._todayElement.title=t.localize("now"),Array.from(t.$.calendarDropDown.$.footer.getElementsByTagName("smart-repeat-button")).forEach(function(n){n.animation=t.animation}),t._addCalendarFooterListeners(),t._defaultFooterTemplateApplied=!0}_setFocusable(){const e=this;if(e.disabled||e.unfocusable)return e.$.input.tabIndex=-1,e.$.selectDate.removeAttribute("tabindex"),e.$.selectTime.removeAttribute("tabindex"),void(e._defaultFooterTemplateApplied&&(e._hourElement.tabIndex=-1,e._ampmElement.tabIndex=-1,e._minuteElement.tabIndex=-1));const t=e.tabIndex>0?e.tabIndex:0;e.$.input.removeAttribute("tabindex"),e.$.selectDate.tabIndex=t,e.$.selectTime.tabIndex=t,e._defaultFooterTemplateApplied&&(e._hourElement.removeAttribute("tabindex"),e._ampmElement.removeAttribute("tabindex"),e._minuteElement.removeAttribute("tabindex"),e.$.calendarDropDown.getElementsByClassName("smart-footer-component-today")[0].tabIndex=t)}_setNullValue(e){const t=this;if(void 0===e&&(e=t._cloneValue()),t.nullable){if(t._value=null,t.value=null,t._highlightedTimePart=void 0,t.$.input.value="",null!==e){if(t.opened){if(!t._calendarInitiatedChange){const n=t.$.calendarDropDown.context;t.$.calendarDropDown.context=t.$.calendarDropDown,t.$.calendarDropDown._clearSelection(!0),t.$.calendarDropDown.context=n}t._defaultFooterTemplateApplied&&(t._hourElement.value="",t._ampmElement.value="",t._minuteElement.value=""),t._toSync=!1}else t._toSync=!0;t.isInitialized&&t.$.fireEvent("change",{oldValue:e.toTimeZone(t._inputTimeZone),value:null})}t._disableSpinButtons()}else t._validateValue(t._now(),e)}_spinButtonsClickHandler(e){const t=this;null===t._value||t.disabled||t.readonly||t._incrementDecrement(t.$.downButton.contains(e.target))}_validateInitialPropertyValues(){const e=this,t=e.$.calendarDropDown;"left"===e.calendarButtonPosition&&e.$.content.insertBefore(e.$.calendarButton,e.$.input),"left"===e.spinButtonsPosition&&e.$.content.insertBefore(e.$.spinButtonsContainer,e.$.input),e.disabled&&(e.$.upButton.disabled=!0,e.$.downButton.disabled=!0),e.opened&&(e.disabled||e.readonly?e.opened=!1:(e.$.dropDownContainer.style.transition="none",e._open(!0))),e.$.calendarButton.setAttribute("aria-expanded",e.opened),null===e.footerTemplate?e._setDefaultFooterTemplate(!0):(t.footerTemplate=e.footerTemplate,t._handleLayoutTemplate(t.$.footer,e.footerTemplate)),""===e.formatString&&(e.formatString="dd-MMM-yy HH:mm:ss.fff");const n=e.displayKind;let a;if("UTC"===n?e._outputTimeZone="UTC":"local"===n&&(e._outputTimeZone="Local"),null!==e.value?(a=Smart.Utilities.DateTime.validateDate(e.value,new Smart.Utilities.DateTime,e.formatString),e._inputTimeZone=a.timeZone,"unspecified"!==n&&e._inputTimeZone!==e._outputTimeZone?a=a.toTimeZone(e._outputTimeZone):"unspecified"===n&&(e._outputTimeZone=e._inputTimeZone)):(a=null,e._inputTimeZone="Local"),e._validateRestrictedDates(),e._validateMinMax("both"),e._validateValue(a,e._now(),!1,!0),e._validateInterval(new Smart.Utilities.TimeSpan(0,0,1)),e._getFormatStringRegExp(),e._defaultFooterTemplateApplied&&""===e._hourElement.value&&null!==e.value){const o=e.value;e._hourElement.value=o.toString("hh"),e._ampmElement.value=o.toString("tt"),e._minuteElement.value=o.toString("mm")}e._detectDisplayMode();const i=e._dropDownDisplayMode;"default"===i||"calendar"===i?(t.viewSections=["title","header"],t.$title.hasClass("smart-hidden")&&t.propertyChangedHandler("viewSections",["header","footer"],["title","header"]),"default"===i&&e.$dropDownHeader.removeClass("smart-hidden")):"timePicker"===i&&(e.$calendarDropDown.addClass("smart-hidden"),e._initializeTimePicker()),e.footer&&e._handleFooter()}_validateInterval(e){const t=this,n=t.interval;let a=n;if(n instanceof Smart.Utilities.TimeSpan)a=n;else if("string"==typeof n){const i=n.indexOf("TimeSpan("),o=n.indexOf(")");if(-1!==i&&-1!==o&&(a=n.slice(i+9,o),a=a.replace(/'/g,"").replace(/"/g,"").replace(/^\s+|\s+$|\s+(?=\s)/g,""),new RegExp(/(^(\d+)(,\s*\d+)*$)/g).test(a)&&(a=a.replace(/\s/g,""),a=a.split(","),a.map(function(r,l){a[l]=parseInt(r)}),a.unshift(null),a=new(Function.prototype.bind.apply(Smart.Utilities.TimeSpan,a)))),a instanceof Smart.Utilities.TimeSpan==0){if(""===a.trim())return void(t.interval=e);isNaN(a)||(a=1e4*parseInt(a,10));try{a=new Smart.Utilities.TimeSpan(a)}catch(r){return void(t.interval=e)}}}else{if("number"!=typeof n)return void(t.interval=e);a=new Smart.Utilities.TimeSpan(n)}t.interval=0===a._ticks?e:a}_validateMinMax(e,t){const n=this;let a=!1;"max"!==e&&(n.min=Smart.Utilities.DateTime.validateDate(n.min,t||new Smart.Utilities.DateTime(1600,1,1),n.formatString),n.min=n.min.toTimeZone(n._outputTimeZone),a=!0),"min"!==e&&(n.max=Smart.Utilities.DateTime.validateDate(n.max,t||new Smart.Utilities.DateTime(3001,1,1),n.formatString),n.max=n.max.toTimeZone(n._outputTimeZone),n.max.calendar.days=n._localizedDays,n.max.calendar.months=n._localizedMonths,n.max.calendar.locale=n.locale,n.$.calendarDropDown.max=n.max.toDate()),n.min.compare(n.max)>0&&(n.min=n.max.clone(),a=!0),a&&(n.min.calendar.days=n._localizedDays,n.min.calendar.months=n._localizedMonths,n.min.calendar.locale=n.locale,n.$.calendarDropDown.min=n.min.toDate())}_validateRestrictedDates(){const e=this,t=[],n=[];for(let a=0;a<e.restrictedDates.length;a++){let o=Smart.Utilities.DateTime.validateDate(e.restrictedDates[a],"invalid",e.formatString);"invalid"!==o&&(o=o.toTimeZone(e._outputTimeZone),t.push(o),n.push(o.toDate()))}e.restrictedDates=t,e.$.calendarDropDown.restrictedDates=n}_validateValue(e,t,n,a){const i=this,o=void 0!==t?t:i._cloneValue();if(null===e||""===e||(void 0!==e&&(i._value=Smart.Utilities.DateTime.validateDate(e,o,i.formatString)),null===i._value))return void i._setNullValue(o);let r=i._value;for(;!0===i._isRestricted(r);)r.addDays(1,!1);const l=i._rangeValidation(r);a&&"strict"!==i.validation?!1===r.equals(l)&&(i._minMaxChanged=!0):(i._value=l,delete i._minMaxChanged),i.value=i._value.toTimeZone(i._inputTimeZone);const s=i._value;if(s.calendar.days=i._localizedDays,s.calendar.months=i._localizedMonths,s.calendar.locale=i.locale,i._applyFormatString(),i._disableSpinButtons(),(null===o||null===s)&&o!==s||null!==o&&null!==s&&0!==o.compare(s)){if(!1!==n&&i.isInitialized&&i.$.fireEvent("change",{oldValue:null!==o?o.toTimeZone(i._inputTimeZone):null,value:i.value}),i._calendarInitiatedChange)return;i.opened?(null!==o&&0!==i.$.calendarDropDown.selectedDates.length&&o.year()===s.year()&&o.month()===s.month()&&o.day()===s.day()&&i.$.calendarDropDown._isDateInView(s.toDate())||(i._disregardCalendarChangeEvent=!0,i.$.calendarDropDown.selectedDates=[s.toDate()]),i._defaultFooterTemplateApplied&&(null!==o&&o.hour()===s.hour()||(i._hourElement.value=s.toString("hh"),i._ampmElement.value=s.toString("tt")),null!==o&&o.minute()===s.minute()||(i._minuteElement.value=s.toString("mm"))),i._timePickerInitialized&&!i._timePickerInitiatedChange&&(i.$.timePickerDropDown.value=s.toDate()),i._toSync=!1):i._toSync=!0}}})},9613:()=>{Smart.Utilities.Assign("Draw",class{constructor(e,t){const n=this;n.host=e,n.renderEngine=t||"",n.refresh();const a=["clear","removeElement","attr","getAttr","line","circle","rect","path","pieslice","pieSlicePath","text","measureText"];for(let i in a)n._addFn(Smart.Utilities.Draw.prototype,a[i])}_addFn(e,t){e[t]||(e[t]=function(){return this.renderer[t].apply(this.renderer,arguments)})}_initRenderer(e){return this.createRenderer(this,e)}_internalRefresh(){const e=this;if(e.renderer||(e.host.innerHTML="",e._initRenderer(e.host)),"none"===window.getComputedStyle(e.host).display)return;const t=e.renderer;if(!t)return;const n=t.getRect();e._render({x:1,y:1,width:n.width,height:n.height})}_render(e){this._plotRect=e}refresh(){this._internalRefresh()}getSize(){const e=this._plotRect;return{width:e.width,height:e.height}}toGreyScale(e){if(-1===e.indexOf("#"))return e;const t=this.cssToRgb(e);t[0]=t[1]=t[2]=Math.round(.3*t[0]+.59*t[1]+.11*t[2]);const n=this.rgbToHex(t[0],t[1],t[2]);return"#"+n[0]+n[1]+n[2]}decToHex(e){return e.toString(16)}hexToDec(e){return parseInt(e,16)}rgbToHex(e,t,n){return[this.decToHex(e),this.decToHex(t),this.decToHex(n)]}hexToRgb(e,t,n){return[this.hexToDec(e),this.hexToDec(t),this.hexToDec(n)]}cssToRgb(e){return e.indexOf("rgb")<=-1?this.hexToRgb(e.substring(1,3),e.substring(3,5),e.substring(5,7)):e.substring(4,e.length-1).split(",")}hslToRgb(e){let t,n,a;const i=parseFloat(e[0]),o=parseFloat(e[1]),r=parseFloat(e[2]);if(0===o)t=n=a=r;else{const l=r<.5?r*(1+o):r+o-r*o,s=2*r-l;t=this.hueToRgb(s,l,i+1/3),n=this.hueToRgb(s,l,i),a=this.hueToRgb(s,l,i-1/3)}return[255*t,255*n,255*a]}hueToRgb(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}rgbToHsl(e){const t=parseFloat(e[0])/255,n=parseFloat(e[1])/255,a=parseFloat(e[2])/255,i=Math.max(t,n,a),o=Math.min(t,n,a);let r,l,s=(i+o)/2;if(i===o)r=l=0;else{const c=i-o;switch(l=s>.5?c/(2-i-o):c/(i+o),i){case t:r=(n-a)/c+(n<a?6:0);break;case n:r=(a-t)/c+2;break;case a:r=(t-n)/c+4}r/=6}return[r,l,s]}swap(e,t){const n=e;e=t,t=n}getNum(e){if(e.constructor!==Array){if(isNaN(e))return 0}else for(let t=0;t<e.length;t++)if(!isNaN(e[t]))return e[t];return 0}_ptRotate(e,t,n,a,i){const o=Math.sqrt(Math.pow(Math.abs(e-n),2)+Math.pow(Math.abs(t-a),2)),r=Math.asin((e-n)/o)+i;return{x:e=n+Math.cos(r)*o,y:t=a+Math.sin(r)*o}}log(e,t){return Math.log(e)/(t?Math.log(t):1)}_mod(e,t){const n=Math.abs(e>t?t:e);let a=1;if(0!==n)for(;n*a<100;)a*=10;return(e*=a)%(t*=a)/a}createRenderer(e,t){const n=e;let a=n.renderer=null;return document.createElementNS&&"HTML5"!==n.renderEngine&&(a=new Smart.Utilities.SvgRenderer(this)),null!==a||"HTML5"!==n.renderEngine&&void 0!==n.renderEngine||(a=new Smart.Utilities.HTML5Renderer(this)),a.init(t),n.renderer=a,a}getByPriority(e){let t;for(let n=0;n<e.length;n++){const a=e[n];if(null!=a&&""!==a){t=a;break}}return t}get(e,t,n){return void 0!==n?e[t][n]:e[t]}min(e,t){let n=NaN;for(let a=0;a<e.length;a++){const i=this.get(e,a,t);(isNaN(n)||i<n)&&(n=i)}return n}max(e,t){let n=NaN;for(let a=0;a<e.length;a++){const i=this.get(e,a,t);(isNaN(n)||i>n)&&(n=i)}return n}sum(e,t){let n=0;for(let a=0;a<e.length;a++){const i=this.get(e,a,t);isNaN(i)||(n+=i)}return n}count(e,t){let n=0;for(let a=0;a<e.length;a++){const i=this.get(e,a,t);isNaN(i)||n++}return n}avg(e,t){return this.sum(e,t)/Math.max(1,this.count(e,t))}filter(e,t){if(!t)return e;const n=[];for(let a=0;a<e.length;a++)t(e[a])&&n.push(e[a]);return n}scale(e,t,n,a){if(isNaN(e))return NaN;if((e<Math.min(t.min,t.max)||e>Math.max(t.min,t.max))&&(!a||!0!==a.ignore_range))return NaN;let i=NaN,o=1;if(void 0===t.type||"logarithmic"!==t.type){let r=Math.abs(t.max-t.min);r||(r=1),o=Math.abs(e-Math.min(t.min,t.max))/r}else if("logarithmic"===t.type){let r=t.base;isNaN(r)&&(r=10);let l=Math.min(t.min,t.max);l<=0&&(l=1);let s=Math.max(t.min,t.max);s<=0&&(s=1);const c=this.log(s,r);s=Math.pow(r,c);const u=this.log(l,r);l=Math.pow(r,u);const p=this.log(e,r);o=Math.abs(p-u)/(c-u)}if("logarithmic"===n.type){let r=n.base;isNaN(r)&&(r=10);const l=this.log(n.max,r),s=this.log(n.min,r);n.flip&&(o=1-o);const c=Math.min(s,l)+o*Math.abs(l-s);i=Math.pow(r,c)}else i=Math.min(n.min,n.max)+o*Math.abs(n.max-n.min),n.flip&&(i=Math.max(n.min,n.max)-i+n.min);return i}axis(e,t,n){if(n<=1)return[t,e];(isNaN(n)||n<2)&&(n=2);let a=0;for(;Math.round(e)!==e&&Math.round(t)!==t&&a<10;)e*=10,t*=10,a++;let i=(t-e)/n;for(;a<10&&Math.round(i)!==i;)e*=10,t*=10,i*=10,a++;const o=[1,2,5];let r,l=0;for(;;){let g=l%o.length,b=Math.floor(l/o.length),v=Math.pow(10,b)*o[g];if(g=(l+1)%o.length,b=Math.floor((l+1)/o.length),r=Math.pow(10,b)*o[g],i>=v&&i<r)break;l++}const s=r,c=[];let u=this.renderer._rnd(e,s,!1);const p=a<=0?1:Math.pow(10,a);for(;u<t+s;)c.push(u/p),u+=s;return c}_widgetToImage(e,t,n,a,i){let o=e;if(!o)return!1;void 0!==n&&""!==n||(n="image."+t);let r=o.renderEngine,l=o.animation;if(o.animation="none",o.renderEngine="HTML5",o.renderEngine!==r)try{o.refresh()}catch(p){return o.renderEngine=r,o.refresh(),o.animation=l,!1}let s=o.renderer.getContainer().firstElementChild,c=!0;"function"==typeof a&&(c=a(e,s));let u=!0;return c&&(u=this.exportImage(e,s,t,n,i)),o.renderEngine!==r&&(o.renderEngine=r,o.refresh(),o.animation=l),u}_saveAsImage(e,t){return this._widgetToImage(this,e,t)}saveAsPNG(e){return this._saveAsImage("png",e)}saveAsJPEG(e){return this._saveAsImage("jpeg",e)}exportImage(e,t,n,a,i){if(!t)return!1;let o="pdf"===n.toLowerCase();o&&(n="jpeg"),void 0!==a&&""!==a||(a="image."+n);let r=!0;if("print"!==n){try{if(t)if(o){i=i||"portrait";const l={content:{image:t.toDataURL("image/"+n),width:Math.min(t.width/1.35,"portrait"===i?515:762)},pageOrientation:i};try{pdfMake.createPdf(l).download(a)}catch(s){e.error(e.localize("missingReference",{files:"pdfmake.min.js"}))}}else{Smart.Utilities.DataExporter||e.error(e.localize("missingReference",{files:"smart.export.js"}));const l=new Smart.Utilities.DataExporter;t.toBlob(function(s){l.downloadFile(s,n,a)})}}catch(l){r=!1}return r}{const l=window.open("","","width=800,height=500"),s=l.document.open(),c='<!DOCTYPE html><html><head><meta charset="utf-8" /><title>jQWidgets Chart</title></head><body><img src="'+t.toDataURL()+'" /></html>';try{s.write(c),s.close(),setTimeout(function(){l.print(),l.close()},100)}catch(u){}}}}),Smart.Utilities.Assign("Renderer",class{constructor(e){const t=this;t.draw=e,t._gradients={},t._toRadiansCoefficient=2*Math.PI/360}pieSlicePath(e,t,n,a,i,o,r){a||(a=1);const l=Math.abs(i-o),s=l>180?1:0;l>=360&&(o=i+359.99);const c=i*this._toRadiansCoefficient,u=o*this._toRadiansCoefficient;let p=e,g=e,b=t,v=t;const y=!isNaN(n)&&n>0;y&&(r=0);const x=Math.cos(c),D=Math.sin(c),T=Math.cos(u),M=Math.sin(u);if(r+n>0){if(r>0){const Y=(l/2+i)*this._toRadiansCoefficient;e+=r*Math.cos(Y),t-=r*Math.sin(Y)}y&&(p=e+n*x,b=t-n*D,g=e+n*T,v=t-n*M)}const A=e+a*x,B=e+a*T,O=t-a*D,N=t-a*M;let P="";const V=Math.abs(Math.abs(o-i)-360)>.02;return y?(P="M "+g+","+v,P+=" a"+n+","+n,P+=" 0 "+s+",1 "+(p-g)+","+(b-v),P+=V?" L"+A+","+O:" M"+A+","+O,P+=" a"+a+","+a,P+=" 0 "+s+",0 "+(B-A)+","+(N-O),V&&(P+=" Z")):(P="M "+B+","+N,P+=" a"+a+","+a,P+=" 0 "+s+",1 "+(A-B)+","+(O-N),V&&(P+=" L"+e+","+t,P+=" Z")),P}measureText(e,t,n,a){const i=this._getTextParts(e,t,n),o=i.width;let r=i.height;!1===a&&(r/=.6);let l={};if(isNaN(t)&&(t=0),0===t)l={width:this._rup(o),height:this._rup(r)};else{const s=t*Math.PI*2/360,c=Math.abs(Math.sin(s)),u=Math.abs(Math.cos(s)),p=Math.abs(o*c+r*u),g=Math.abs(o*u+r*c);l={width:this._rup(g),height:this._rup(p)}}return a&&(l.textPartsInfo=i),l}alignTextInRect(e,t,n,a,i,o,r,l,s,c){const u=s*Math.PI*2/360,p=Math.sin(u),g=Math.cos(u),b=i*p,v=i*g;"center"===r||""===r||"undefined"===r?e+=n/2:"right"===r&&(e+=n),"center"===l||"middle"===l||""===l||"undefined"===l?t+=a/2:"bottom"===l?t+=a-o/2:"top"===l&&(t+=o/2);let y="middle";-1!==(c=c||"").indexOf("top")?y="top":-1!==c.indexOf("bottom")&&(y="bottom");let x="center";return-1!==c.indexOf("left")?x="left":-1!==c.indexOf("right")&&(x="right"),"center"===x?(e-=v/2,t-=b/2):"right"===x&&(e-=v,t-=b),"top"===y?(e-=o*p,t+=o*g):"middle"===y&&(e-=o*p/2,t+=o*g/2),{x:e=this._rup(e),y:t=this._rup(t)}}adjustColor(e,t){if("string"!=typeof e)return"#000000";if(-1===e.indexOf("#"))return e;const n=this.draw;let a=n.cssToRgb(e);const i=n.rgbToHsl(a);i[2]=Math.min(1,i[2]*t),i[1]=Math.min(1,i[1]*t*1.1),a=n.hslToRgb(i),e="#";for(let o=0;o<3;o++){let r=Math.round(a[o]);r=n.decToHex(r),1===r.toString().length&&(e+="0"),e+=r}return e.toUpperCase()}_rup(e){let t=Math.round(e);return e>t&&t++,t}_ptdist(e,t,n,a){return Math.sqrt((n-e)*(n-e)+(a-t)*(a-t))}_rnd(e,t,n,a){if(isNaN(e))return e;void 0===a&&(a=!0);let i=e-(!0===a?e%t:this._mod(e,t));return e===i?i:(n?e>i&&(i+=t):i>e&&(i-=t),1===t?Math.round(i):i)}_ptrnd(e){if(!document.createElementNS)return Math.round(e)===e?e:this._rnd(e,1,!1,!0);const t=this._rnd(e,.5,!1,!0);return.5!==Math.abs(t-Math.round(t))?t>e?t-.5:t+.5:t}_getContrastColor(e){if(void 0===e)return;let t=this.draw.hexToRgb(e.slice(1,3),e.slice(3,5),e.slice(5,7));return(.299*t[0]+.61*t[1]+.114*t[2])/255>.6?"#000000":"#FFFFFF"}}),Smart.Utilities.Assign("SvgRenderer",class extends Smart.Utilities.Renderer{constructor(e){super(e);const t=this;t._svgns="http://www.w3.org/2000/svg",t._openGroups=[],t._clipId=0}init(e){const t=document.createElement("div");t.className="drawContainer",t.onselectstart=function(){return!1},e.appendChild(t),this.host=e,this.container=t;try{const n=document.createElementNS(this._svgns,"svg");n.setAttribute("version","1.1"),n.setAttribute("width","100%"),n.setAttribute("height","100%"),n.setAttribute("overflow","hidden"),t.appendChild(n),this.canvas=n}catch(n){return!1}return this._id=(new Date).getTime(),this.clear(),!0}getType(){return"SVG"}refresh(){}getRect(){return{x:0,y:0,width:Math.max(this._rup(this.host.offsetWidth)-1,0),height:Math.max(this._rup(this.host.offsetHeight)-1,0)}}getContainer(){return this.container}clear(){for(;this.canvas.childNodes.length>0;)this.removeElement(this.canvas.firstElementChild);this._defaultParent=void 0,this._defs=document.createElementNS(this._svgns,"defs"),this._gradients={},this.canvas.appendChild(this._defs)}removeElement(e){if(void 0!==e)try{for(;e.firstChild;)this.removeElement(e.firstChild);e.parentNode?e.parentNode.removeChild(e):this.canvas.removeChild(e)}catch(t){}}beginGroup(){const e=this._activeParent(),t=document.createElementNS(this._svgns,"g");return e.appendChild(t),this._openGroups.push(t),t}endGroup(){0!==this._openGroups.length&&this._openGroups.pop()}_activeParent(){return 0===this._openGroups.length?this.canvas:this._openGroups[this._openGroups.length-1]}createClipRect(e){const t=document.createElementNS(this._svgns,"clipPath"),n=document.createElementNS(this._svgns,"rect");return this.attr(n,{x:e.x,y:e.y,width:e.width,height:e.height,fill:"none"}),this._clipId=this._clipId||0,t.id="cl"+this._id+"_"+(++this._clipId).toString(),t.appendChild(n),this._defs.appendChild(t),t}getWindowHref(){let e=window.location.href;return e&&(e=e.replace(/([\('\)])/g,"\\$1"),e=e.replace(/#.*$/,""),e)}setClip(e,t){const n="url("+this.getWindowHref()+"#"+t.id+")";return this.attr(e,{"clip-path":n})}addHandler(e,t,n){e.addEventListener(t,n)}removeHandler(){}on(e,t,n){this.addHandler(e,t,n)}off(e,t,n){this.removeHandler(e,t,n)}shape(e,t){const n=document.createElementNS(this._svgns,e);if(n){for(let a in t)n.setAttribute(a,t[a]);return this._activeParent().appendChild(n),n}}_getTextParts(e,t,n){const a={width:0,height:0,parts:[]};if(void 0===e)return a;const i=e.toString().split("<br>"),o=this._activeParent(),r=document.createElementNS(this._svgns,"text");this.attr(r,n);for(let l=0;l<i.length;l++){const s=i[l],c=r.ownerDocument.createTextNode(s);let u;r.appendChild(c),o.appendChild(r);try{u=r.getBBox()}catch(b){}const p=this._rup(u.width),g=this._rup(.6*u.height);r.removeChild(c),a.width=Math.max(a.width,p),a.height+=g+(l>0?4:0),a.parts.push({width:p,height:g,text:s})}return o.removeChild(r),a}_measureText(e,t,n,a){return super.measureText(e,t,n,a)}measureText(e,t,n){return this._measureText(e,t,n,!1)}text(e,t,n,a,i,o,r,l,s,c,u){const p=this._measureText(e,o,r,!0,this).textPartsInfo,g=p.parts,b=this._getContrastColor(arguments[11]);let v;if(s||(s="center"),c||(c="center"),(g.length>1||l)&&(v=this.beginGroup()),l){const P=this.createClipRect({x:this._rup(t)-1,y:this._rup(n)-1,width:this._rup(a)+2,height:this._rup(i)+2});this.setClip(v,P)}let y=this._activeParent(),x=0,D=0;x=p.width,D=p.height,(isNaN(a)||a<=0)&&(a=x),(isNaN(i)||i<=0)&&(i=D);const T=a||0,M=i||0;let A=0;if(!o||0===o){let P;n+=D,"center"===c||"middle"===c?n+=(M-D)/2:"bottom"===c&&(n+=M-D),a||(a=x),i||(i=D),y=this._activeParent();for(let V=g.length-1;V>=0;V--){P=document.createElementNS(this._svgns,"text"),this.attr(P,r),this.attr(P,{cursor:"default"});const Y=P.ownerDocument.createTextNode(g[V].text);P.appendChild(Y);let K=t;const W=g[V].width,Z=g[V].height;"center"===s?K+=(T-W)/2:"right"===s&&(K+=T-W),this.attr(P,{x:this._rup(K),y:this._rup(n+A),width:this._rup(W),height:this._rup(Z)}),void 0!==b&&(P.style.fill=b),y.appendChild(P),A-=g[V].height+4}return v?(this.endGroup(),v):P}const B=this.alignTextInRect(t,n,a,i,x,D,s,c,o,u),O=this.shape("g",{transform:"translate("+(t=B.x)+","+(n=B.y)+")"}),N=this.shape("g",{transform:"rotate("+o+")"});O.appendChild(N),A=0;for(let P=g.length-1;P>=0;P--){const V=document.createElementNS(this._svgns,"text");this.attr(V,r),this.attr(V,{cursor:"default"});const Y=V.ownerDocument.createTextNode(g[P].text);V.appendChild(Y);let K=0;const W=g[P].width,Z=g[P].height;"center"===s?K+=(p.width-W)/2:"right"===s&&(K+=p.width-W),this.attr(V,{x:this._rup(K),y:this._rup(A),width:this._rup(W),height:this._rup(Z)}),N.appendChild(V),A-=Z+4}return y.appendChild(O),v&&this.endGroup(),O}line(e,t,n,a,i){const o=this.shape("line",{x1:e,y1:t,x2:n,y2:a});return this.attr(o,i),o}path(e,t){const n=this.shape("path");return n.setAttribute("d",e),t&&this.attr(n,t),n}rect(e,t,n,a,i){e=this._ptrnd(e),t=this._ptrnd(t),n=Math.max(1,this._rnd(n,1,!1)),a=Math.max(1,this._rnd(a,1,!1));const o=this.shape("rect",{x:e,y:t,width:n,height:a});return i&&this.attr(o,i),o}circle(e,t,n,a){const i=this.shape("circle",{cx:e,cy:t,r:n});return a&&this.attr(i,a),i}pieslice(e,t,n,a,i,o,r,l){const s=this.pieSlicePath(e,t,n,a,i,o,r),c=this.shape("path");return c.setAttribute("d",s),l&&this.attr(c,l),c}attr(e,t){if(e&&t)for(let n in t)"textContent"===n?e.textContent=t[n]:e.setAttribute(n,"width"===n||"height"===n?Math.max(0,t[n]):t[n])}removeAttr(e,t){if(e&&t)for(let n in t)"textContent"===n?e.textContent="":e.removeAttribute(t[n])}getAttr(e,t){return e.getAttribute(t)}_toLinearGradient(e,t,n){const a="grd"+this._id+e.replace("#","")+(t?"v":"h"),i="url("+this.getWindowHref()+"#"+a+")";if(this._gradients[i])return i;const o=document.createElementNS(this._svgns,"linearGradient");this.attr(o,{x1:"0%",y1:"0%",x2:t?"0%":"100%",y2:t?"100%":"0%",id:a});for(let r=0;r<n.length;r++){const l=n[r],s=document.createElementNS(this._svgns,"stop"),c="stop-color:"+this.adjustColor(e,l[1]);this.attr(s,{offset:l[0]+"%",style:c}),o.appendChild(s)}return this._defs.appendChild(o),this._gradients[i]=!0,i}_toRadialGradient(e,t,n){const a="grd"+this._id+e.replace("#","")+"r"+(void 0!==n?n.key:""),i="url("+this.getWindowHref()+"#"+a+")";if(this._gradients[i])return i;const o=document.createElementNS(this._svgns,"radialGradient");this.attr(o,void 0===n?{cx:"50%",cy:"50%",r:"100%",fx:"50%",fy:"50%",id:a}:{cx:n.x,cy:n.y,r:n.outerRadius,id:a,gradientUnits:"userSpaceOnUse"});for(let r=0;r<t.length;r++){const l=t[r],s=document.createElementNS(this._svgns,"stop"),c="stop-color:"+this.adjustColor(e,l[1]);this.attr(s,{offset:l[0]+"%",style:c}),o.appendChild(s)}return this._defs.appendChild(o),this._gradients[i]=!0,i}}),Smart.Utilities.Assign("HTML5Renderer",class extends Smart.Utilities.Renderer{constructor(e){super(e),this._renderers=new Smart.Utilities.HTML5RenderHelpers(this)}init(e){try{this.host=e;const t=document.createElement("div"),n=document.createElement("canvas");t.className="chartContainer",t.style.position="relative",t.onselectstart=function(){return!1},n.id="__smartCanvasWrap",n.style.width="100%",n.style.height="100%",t.appendChild(n),e.appendChild(t),this.canvas=n,n.width=e.offsetWidth,n.height=e.offsetHeight,this.ctx=n.getContext("2d"),this._elements={},this._maxId=0,this._gradientId=0,this._gradients={},this._currentPoint={x:0,y:0},this._lastCmd="",this._pos=0}catch(t){return!1}return!0}getType(){return"HTML5"}getContainer(){return this.host.getElementsByClassName("chartContainer")[0]}getRect(){return{x:0,y:0,width:this.canvas.width-1,height:this.canvas.height-1}}beginGroup(){}endGroup(){}setClip(){}createClipRect(){}addHandler(){}removeHandler(){}on(e,t,n){this.addHandler(e,t,n)}off(e,t,n){this.removeHandler(e,t,n)}clear(){this._elements={},this._maxId=0,this._renderers._gradients={},this._gradientId=0}removeElement(e){void 0!==e&&this._elements[e.id]&&delete this._elements[e.id]}shape(e,t){let n={type:e,id:this._maxId++};for(let a in t)n[a]=t[a];return this._elements[n.id]=n,n}attr(e,t){for(let n in t)e[n]=t[n]}removeAttr(e,t){for(let n in t)delete e[t[n]]}rect(e,t,n,a,i){if(isNaN(e))throw'Invalid value for "x"';if(isNaN(t))throw'Invalid value for "y"';if(isNaN(n))throw'Invalid value for "width"';if(isNaN(a))throw'Invalid value for "height"';let o=this.shape("rect",{x:e,y:t,width:n,height:a});return i&&this.attr(o,i),o}path(e,t){let n=this.shape("path",t);return this.attr(n,{d:e}),n}line(e,t,n,a,i){return this.path("M "+e+","+t+" L "+n+","+a,i)}circle(e,t,n,a){let i=this.shape("circle",{x:e,y:t,r:n});return a&&this.attr(i,a),i}pieslice(e,t,n,a,i,o,r,l){let s=this.path(this.pieSlicePath(e,t,n,a,i,o,r),l);return this.attr(s,{x:e,y:t,innerRadius:n,outerRadius:a,angleFrom:i,angleTo:o}),s}_getCSSStyle(e){const t=document.createElement("div");t.className=e,t.style.position="absolute",t.style.visibility="hidden",this.host.appendChild(t);let n=window.getComputedStyle(t);return n={color:n.color,fontFamily:n.fontFamily,fontSize:n.fontSize,fontWeight:n.fontWeight},this.host.removeChild(t),n}_getTextParts(e,t,n){let a="Arial",i="10pt",o="";if(n&&n.class){let s=this._getCSSStyle(n.class);s.fontSize&&(i=s.fontSize),s.fontFamily&&(a=s.fontFamily),s.fontWeight&&(o=s.fontWeight)}this.ctx.font=o+" "+i+" "+a;let r={width:0,height:0,parts:[]},l=e.toString().split("<br>");for(let s=0;s<l.length;s++){let c=l[s],u=this.ctx.measureText(c).width,p=document.createElement("span");p.className="chart",p.font=this.ctx.font,p.textContent=c,this.host.appendChild(p);let g=.6*p.offsetHeight;this.host.removeChild(p),r.width=Math.max(r.width,this._rup(u)),r.height+=g+(s>0?4:0),r.parts.push({width:u,height:g,text:c})}return r}_measureText(e,t,n,a){return super.measureText(e,t,n,a)}measureText(e,t,n){return this._measureText(e,t,n,!1)}text(e,t,n,a,i,o,r,l,s,c,u){let p=this.shape("text",{text:e,x:t,y:n,width:a,height:i,angle:o,clip:l,halign:s,valign:c,rotateAround:u});if(r&&this.attr(p,r),p.fontFamily="Arial",p.fontSize="10pt",p.fontWeight="",p.color=this._getContrastColor(arguments[11]),r&&r.class){let b=this._getCSSStyle(r.class);p.fontFamily=b.fontFamily||p.fontFamily,p.fontSize=b.fontSize||p.fontSize,p.fontWeight=b.fontWeight||p.fontWeight,p.color=p.color||b.color}p.color=p.color||"#000000";let g=this._measureText(e,0,r,!0);return this.attr(p,{textPartsInfo:g.textPartsInfo,textWidth:g.width,textHeight:g.height}),(a<=0||isNaN(a))&&this.attr(p,{width:g.width}),(i<=0||isNaN(i))&&this.attr(p,{height:g.height}),p}_toLinearGradient(e,t,n){if(this._renderers._gradients[e])return e;let a=[];for(let o=0;o<n.length;o++)a.push({percent:n[o][0]/100,color:this.adjustColor(e,n[o][1])});let i="gr"+this._gradientId++;return this.createGradient(i,t?"vertical":"horizontal",a),i}_toRadialGradient(e,t){if(this._renderers._gradients[e])return e;let n=[];for(let i=0;i<t.length;i++)n.push({percent:t[i][0]/100,color:this.adjustColor(e,t[i][1])});let a="gr"+this._gradientId++;return this.createGradient(a,"radial",n),a}createGradient(e,t,n){this._renderers.createGradient(this,e,t,n)}refresh(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);for(let e in this._elements){let t=this._elements[e];this._renderers.setFillStyle(this,t),this._renderers.setStroke(this,t),this._renderers[this._elements[e].type](this.ctx,t)}}}),Smart.Utilities.Assign("HTML5RenderHelpers",class{constructor(e){this.HTML5Renderer=e,this._cmds="mlcazq"}ptrnd(e){if(.5===Math.abs(Math.round(e)-e))return e;let t=Math.round(e);return t<e&&(t-=1),t+.5}createGradient(e,t,n,a){e._gradients[t]={orientation:n,colorStops:a}}setStroke(e,t){let n=e.ctx,a=t["stroke-width"];n.strokeStyle=t.stroke||"transparent",n.lineWidth=0===a?.01:void 0!==a?a:1,n.globalAlpha=void 0!==t["fill-opacity"]?t["fill-opacity"]:void 0!==t.opacity?t.opacity:1,n.setLineDash&&n.setLineDash(t["stroke-dasharray"]?t["stroke-dasharray"].split(","):[])}setFillStyle(e,t){let n=e.ctx;if(n.fillStyle="transparent",n.globalAlpha=void 0!==t["fill-opacity"]?t["fill-opacity"]:void 0!==t.opacity?t.opacity:1,t.fill&&-1===t.fill.indexOf("#")&&e._gradients[t.fill]){let a,i="horizontal"!==e._gradients[t.fill].orientation,o="radial"===e._gradients[t.fill].orientation,r=this.ptrnd(t.x),l=this.ptrnd(t.y),s=this.ptrnd(t.x+(i?0:t.width)),c=this.ptrnd(t.y+(i?t.height:0));if(("circle"===t.type||"path"===t.type||"rect"===t.type)&&o){let p=this.ptrnd(t.x),g=this.ptrnd(t.y);"rect"===t.type&&(p+=t.width/2,g+=t.height/2),a=n.createRadialGradient(p,g,t.innerRadius||0,p,g,t.outerRadius||t.r||0)}o||((isNaN(r)||isNaN(s)||isNaN(l)||isNaN(c))&&(r=0,l=0,s=i?0:n.canvas.width,c=i?n.canvas.height:0),a=n.createLinearGradient(r,l,s,c));let u=e._gradients[t.fill].colorStops;for(let p=0;p<u.length;p++)a.addColorStop(u[p].percent,u[p].color);n.fillStyle=a}else t.fill&&(n.fillStyle=t.fill)}rect(e,t){0!==t.width&&0!==t.height&&(e.fillRect(this.ptrnd(t.x),this.ptrnd(t.y),t.width,t.height),e.strokeRect(this.ptrnd(t.x),this.ptrnd(t.y),t.width,t.height))}circle(e,t){0!==t.r&&(e.beginPath(),e.arc(this.ptrnd(t.x),this.ptrnd(t.y),t.r,0,2*Math.PI,!1),e.closePath(),e.fill(),e.stroke())}_parsePoint(e){return{x:this._parseNumber(e),y:this._parseNumber(e)}}_parseNumber(e){let t,n=!1;for(t=this._pos;t<e.length;t++)if(e[t]>="0"&&e[t]<="9"||"."===e[t]||"e"===e[t]||"-"===e[t]&&!n||"-"===e[t]&&t>=1&&"e"===e[t-1])n=!0;else{if(n||" "!==e[t]&&","!==e[t])break;this._pos++}let a=parseFloat(e.substring(this._pos,t));if(!isNaN(a))return this._pos=t,a}_isRelativeCmd(e){return-1!==this._cmds.indexOf(e)}_parseCmd(e){for(let t=this._pos;t<e.length;t++){if(-1!==this._cmds.toLowerCase().indexOf(e[t].toLowerCase()))return this._pos=t+1,this._lastCmd=e[t],this._lastCmd;if(" "!==e[t]){if(e[t]>="0"&&e[t]<="9"){if(this._pos=t,""===this._lastCmd)break;return this._lastCmd}}else this._pos++}}_toAbsolutePoint(e){return{x:this._currentPoint.x+e.x,y:this._currentPoint.y+e.y}}path(e,t){let n,a=t.d;for(this._pos=0,this._lastCmd="",this._currentPoint={x:0,y:0},e.beginPath();this._pos<a.length;){let i=this._parseCmd(a);if(void 0===i)break;if("M"!==i&&"m"!==i)if("L"!==i&&"l"!==i)if("A"!==i&&"a"!==i)if("Z"!==i&&"z"!==i||void 0===n)if("C"!==i&&"c"!==i){if("Q"===i||"q"===i){let o=this._parsePoint(a),r=this._parsePoint(a);e.quadraticCurveTo(o.x,o.y,r.x,r.y),this._currentPoint=r}}else{let o=this._parsePoint(a),r=this._parsePoint(a),l=this._parsePoint(a);e.bezierCurveTo(o.x,o.y,r.x,r.y,l.x,l.y),this._currentPoint=l}else e.lineTo(n.x,n.y),this._currentPoint=n;else{let o=this._parseNumber(a),r=this._parseNumber(a),l=this._parseNumber(a)*(Math.PI/180),s=this._parseNumber(a),c=this._parseNumber(a),u=this._parsePoint(a);if(this._isRelativeCmd(i)&&(u=this._toAbsolutePoint(u)),0===o||0===r)continue;let p=this._currentPoint,g={x:Math.cos(l)*(p.x-u.x)/2+Math.sin(l)*(p.y-u.y)/2,y:-Math.sin(l)*(p.x-u.x)/2+Math.cos(l)*(p.y-u.y)/2},b=Math.pow(g.x,2)/Math.pow(o,2)+Math.pow(g.y,2)/Math.pow(r,2);b>1&&(o*=Math.sqrt(b),r*=Math.sqrt(b));let v=(s===c?-1:1)*Math.sqrt((Math.pow(o,2)*Math.pow(r,2)-Math.pow(o,2)*Math.pow(g.y,2)-Math.pow(r,2)*Math.pow(g.x,2))/(Math.pow(o,2)*Math.pow(g.y,2)+Math.pow(r,2)*Math.pow(g.x,2)));isNaN(v)&&(v=0);let y={x:v*o*g.y/r,y:v*-r*g.x/o},x={x:(p.x+u.x)/2+Math.cos(l)*y.x-Math.sin(l)*y.y,y:(p.y+u.y)/2+Math.sin(l)*y.x+Math.cos(l)*y.y},D=function(K){return Math.sqrt(Math.pow(K[0],2)+Math.pow(K[1],2))},T=function(K,W){return(K[0]*W[0]+K[1]*W[1])/(D(K)*D(W))},M=function(K,W){return(K[0]*W[1]<K[1]*W[0]?-1:1)*Math.acos(T(K,W))},A=M([1,0],[(g.x-y.x)/o,(g.y-y.y)/r]),B=[(g.x-y.x)/o,(g.y-y.y)/r],O=[(-g.x-y.x)/o,(-g.y-y.y)/r],N=M(B,O);T(B,O)<=-1&&(N=Math.PI),T(B,O)>=1&&(N=0),0===c&&N>0&&(N-=2*Math.PI),1===c&&N<0&&(N+=2*Math.PI);let P=o>r?o:r,V=o>r?1:o/r,Y=o>r?r/o:1;e.translate(x.x,x.y),e.rotate(l),e.scale(V,Y),e.arc(0,0,P,A,A+N,1-c),e.scale(1/V,1/Y),e.rotate(-l),e.translate(-x.x,-x.y)}else{let o=this._parsePoint(a);if(void 0===o)break;e.lineTo(o.x,o.y),this._currentPoint=o}else{let o=this._parsePoint(a);if(void 0===o)break;e.moveTo(o.x,o.y),this._currentPoint=o,void 0===n&&(n=o)}}e.fill(),e.stroke(),e.closePath()}text(e,t){let n=this.ptrnd(t.x),a=this.ptrnd(t.y),i=this.ptrnd(t.width),o=this.ptrnd(t.height),r=t.halign,l=t.valign,s=t.angle,c=t.rotateAround,u=t.textPartsInfo,p=u.parts,g=t.clip;void 0===g&&(g=!0),e.save(),r||(r="center"),l||(l="center"),g&&(e.rect(n,a,i,o),e.clip());let b=t.textWidth,v=t.textHeight,y=i||0,x=o||0;if(e.fillStyle=t.color,e.font=t.fontWeight+" "+t.fontSize+" "+t.fontFamily,!s||0===s){a+=v,"center"===l||"middle"===l?a+=(x-v)/2:"bottom"===l&&(a+=x-v),i||(i=b),o||(o=v);let B=0;for(let O=p.length-1;O>=0;O--){let N=p[O],P=n,V=p[O].width;"center"===r?P+=(y-V)/2:"right"===r&&(P+=y-V),e.fillText(N.text,P,a+B),B-=N.height+(O>0?4:0)}return void e.restore()}let D=this.HTML5Renderer.alignTextInRect(n,a,i,o,b,v,r,l,s,c);n=D.x,a=D.y;let T=s*Math.PI*2/360;e.translate(n,a),e.rotate(T);let M=0,A=u.width;for(let B=p.length-1;B>=0;B--){let O=0;"center"===r?O+=(A-p[B].width)/2:"right"===r&&(O+=A-p[B].width),e.fillText(p[B].text,O,M),M-=p[B].height+4}e.restore()}}),Smart.Utilities.Assign("Plot",class{constructor(e){this.renderer=e}get(e,t,n){return void 0!==n?e[t][n]:e[t]}min(e,t){let n=NaN;for(let a=0;a<e.length;a++){let i=this.get(e,a,t);(isNaN(n)||i<n)&&(n=i)}return n}max(e,t){let n=NaN;for(let a=0;a<e.length;a++){let i=this.get(e,a,t);(isNaN(n)||i>n)&&(n=i)}return n}sum(e,t){let n=0;for(let a=0;a<e.length;a++){let i=this.get(e,a,t);isNaN(i)||(n+=i)}return n}count(e,t){let n=0;for(let a=0;a<e.length;a++){let i=this.get(e,a,t);isNaN(i)||n++}return n}avg(e,t){return this.sum(e,t)/Math.max(1,this.count(e,t))}filter(e,t){if(!t)return e;let n=[];for(let a=0;a<e.length;a++)t(e[a])&&n.push(e[a]);return n}scale(e,t,n,a){if(isNaN(e))return NaN;if((e<Math.min(t.min,t.max)||e>Math.max(t.min,t.max))&&(!a||!0!==a.ignore_range))return NaN;let i=NaN,o=1;if(void 0===t.type||"logarithmic"!==t.type){let r=Math.abs(t.max-t.min);r||(r=1),o=Math.abs(e-Math.min(t.min,t.max))/r}else if("logarithmic"===t.type){let r=t.base;isNaN(r)&&(r=10);let l=Math.min(t.min,t.max);l<=0&&(l=1);let s=Math.max(t.min,t.max);s<=0&&(s=1);let c=Math.log(s)/Math.log(r);s=Math.pow(r,c);let u=Math.log(l)/Math.log(r);l=Math.pow(r,u);let p=Math.log(e)/Math.log(r);o=Math.abs(p-u)/(c-u)}if("logarithmic"===n.type){let r=n.base;isNaN(r)&&(r=10);let l=Math.log(n.max)/Math.log(r),s=Math.log(n.min)/Math.log(r);n.flip&&(o=1-o);let c=Math.min(s,l)+o*Math.abs(l-s);i=Math.pow(r,c)}else i=Math.min(n.min,n.max)+o*Math.abs(n.max-n.min),n.flip&&(i=Math.max(n.min,n.max)-i+n.min);return i}axis(e,t,n){if(n<=1)return[t,e];(isNaN(n)||n<2)&&(n=2);let a=0;for(;Math.round(e)!==e&&Math.round(t)!==t&&a<10;)e*=10,t*=10,a++;let i=(t-e)/n;for(;a<10&&Math.round(i)!==i;)e*=10,t*=10,i*=10,a++;let o,r=[1,2,5],l=0;for(;;){let g=l%r.length,b=Math.floor(l/r.length),v=Math.pow(10,b)*r[g];if(g=(l+1)%r.length,b=Math.floor((l+1)/r.length),o=Math.pow(10,b)*r[g],i>=v&&i<o)break;l++}let s=o,c=[],u=this.renderer._rnd(e,s,!1),p=a<=0?1:Math.pow(10,a);for(;u<t+s;)c.push(u/p),u+=s;return c}})},7650:()=>{Smart("smart-drop-down-list",class extends Smart.ContentElement{static get properties(){return{autoCloseDelay:{value:100,type:"number"},dataSource:{value:null,type:"any",reflectToAttribute:!1},displayLoadingIndicator:{value:!1,type:"boolean"},displayMember:{value:"",type:"string"},displayMode:{allowedValues:["outlined","filled","underlined"],value:"outlined",type:"string"},dropDownAppendTo:{value:null,type:"any"},dropDownButtonPosition:{allowedValues:["none","left","right","top","bottom"],value:"right",defaultReflectToAttribute:!0,type:"string"},dropDownMinHeight:{value:"",type:"any",validator:"_propertyValidator"},dropDownHeight:{value:"",type:"any",validator:"_propertyValidator"},dropDownMaxHeight:{value:"",type:"any",validator:"_propertyValidator"},dropDownOpenMode:{allowedValues:["none","default","dropDownButton","auto"],value:"default",type:"string"},dropDownOverlay:{value:!1,type:"boolean"},dropDownPlaceholder:{value:"No Items",type:"string"},dropDownPosition:{allowedValues:["auto","top","bottom","overlay-top","overlay-center","overlay-bottom","center-bottom","center-top"],value:"auto",type:"string"},dropDownMinWidth:{value:"",type:"any",validator:"_propertyValidator"},dropDownWidth:{value:"",type:"any",validator:"_propertyValidator"},dropDownMaxWidth:{value:"",type:"any",validator:"_propertyValidator"},filterable:{value:!1,type:"boolean"},filterInputPlaceholder:{value:"",type:"string"},filterCallback:{value:null,type:"function?"},filterMode:{value:"startsWithIgnoreCase",allowedValues:["contains","containsIgnoreCase","doesNotContain","doesNotContainIgnoreCase","equals","equalsIgnoreCase","startsWith","startsWithIgnoreCase","endsWith","endsWithIgnoreCase","custom"],type:"string"},grouped:{value:!1,type:"boolean"},groupMember:{value:"",type:"string"},hint:{value:"",type:"string"},horizontalScrollBarVisibility:{type:"string",value:"auto",allowedValues:["auto","disabled","hidden","visible"]},incrementalSearchDelay:{value:700,type:"number?"},incrementalSearchMode:{value:"startsWithIgnoreCase",allowedValues:["contains","containsIgnoreCase","doesNotContain","doesNotContainIgnoreCase","equals","equalsIgnoreCase","startsWith","startsWithIgnoreCase","endsWith","endsWithIgnoreCase"],type:"string"},itemMeasureMode:{value:"auto",allowedValues:["auto","precise"],type:"string"},inputMember:{value:"label",type:"string"},itemTemplate:{value:null,type:"any"},itemHeight:{value:null,type:"number?"},label:{value:"",type:"string"},loadingIndicatorPlaceholder:{value:"Loading...",type:"string"},loadingIndicatorPosition:{value:"center",allowedValues:["bottom","center","top"],type:"string"},messages:{extend:!0,value:{en:{invalidNode:'{{elementType}}: Invalid parameter "{{node}}" when calling {{method}}.'}},type:"object"},name:{value:"",type:"string"},opened:{value:!1,type:"boolean"},placeholder:{value:"",type:"string"},resizeMode:{value:"none",allowedValues:["none","horizontal","vertical","both"],type:"string"},resizeIndicator:{value:!1,type:"boolean"},selectionDisplayMode:{value:"plain",allowedValues:["plain","placeholder","tokens"],type:"string"},selectionMode:{value:"zeroAndOne",allowedValues:["none","oneOrManyExtended","zeroOrMany","oneOrMany","zeroOrOne","zeroAndOne","one","checkBox","radioButton"],type:"string"},selectedIndexes:{value:[],type:"array"},selectedValues:{value:[],type:"array"},sorted:{value:!1,type:"boolean"},sortDirection:{value:"asc",type:"string"},tokenTemplate:{value:null,type:"any"},type:{value:"list",type:"string",defaultReflectToAttribute:!0,readonly:!0},valueMember:{value:"",type:"string"},virtualized:{value:!1,type:"boolean"},verticalScrollBarVisibility:{type:"string",value:"auto",allowedValues:["auto","disabled","hidden","visible"]}}}static get listeners(){return{"actionButton.down":"_buttonsDownHandler","actionButton.mouseenter":"_buttonsMouseEventsHandler","actionButton.mouseleave":"_buttonsMouseEventsHandler","actionButton.focus":"_buttonsFocusHandler","actionButton.blur":"_buttonsFocusHandler","document.selectstart":"_selectStartHandler","document.dragstart":"_dragStartHandler","document.down":"_documentDownHandler","document.up":"_documentUpHandler","document.move":"_documentMoveHandler","dropDownButton.down":"_buttonsDownHandler","dropDownButton.mouseenter":"_buttonsMouseEventsHandler","dropDownButton.mouseleave":"_buttonsMouseEventsHandler",keydown:"_keyDownHandler",keyup:"_keyUpHandler",focus:"_focusEventHandler",blur:"_blurEventHandler","dropDownButton.focus":"_buttonsFocusHandler","dropDownButton.blur":"_buttonsFocusHandler","dropDownContainer.transitionend":"_dropDownTransitionendHandler","listBox.change":"_listBoxChangeHandler","listBox.itemClick":"_listBoxItemClickHandler","listBox.keydown":"_listBoxKeyDownHandler","listBox.bindingComplete":"_bindingCompleteHandler",mouseenter:"_mouseEnterHandler",mouseleave:"_mouseLeaveHandler",resize:"_resizeHandler","resizeBar.move":"_resizeBarMoveHandler",styleChanged:"_styleChangedHandler",wheel:"_mouseWheelHandler"}}template(){return'<div id="container" role="presentation">\n                    <span class="smart-label" id="label">[[label]]</span>\n                    <div id="content" class="smart-content" role="presentation">\n                        <div class="smart-buttons-container" id="buttonsContainer" role="presentation">\n                            <span id="actionButton" class ="smart-action-button" role="presentation">[[placeholder]]</span>\n                            <span id="dropDownButton" class="smart-drop-down-button">\n                                <span class ="smart-drop-down-button-icon" id="arrow" aria-hidden="true"></span>\n                            </span>\n                        </div>\n                        <div id="dropDownContainer" class="smart-drop-down smart-drop-down-container smart-visibility-hidden" role="presentation">\n                            <smart-list-box id="listBox" unfocusable\n                                    animation="[[animation]]"\n                                    data-source="[[dataSource]]"\n                                    disabled="[[disabled]]"\n                                    display-loading-indicator="[[displayLoadingIndicator]]"\n                                    display-member="[[displayMember]]"\n                                    filterable="[[filterable]]"\n                                    filter-callback="[[filterCallback]]"\n                                    filter-mode="[[filterMode]]"\n                                    filter-input-placeholder="[[filterInputPlaceholder]]"\n                                    grouped="[[grouped]]"\n                                    group-member="[[groupMember]]"\n                                    item-height="[[itemHeight]]"\n                                    item-measure-mode="[[itemMeasureMode]]"\n                                    item-template="[[itemTemplate]]"\n                                    incremental-search-delay="[[incrementalSearchDelay]]"\n                                    incremental-search-mode="[[incrementalSearchMode]]"\n                                    loading-indicator-placeholder="[[loadingIndicatorPlaceholder]]"\n                                    loading-indicator-position="[[loadingIndicatorPosition]]"\n                                    name="[[name]]"\n                                    placeholder="[[dropDownPlaceholder]]"\n                                    right-to-left="[[rightToLeft]]"\n                                    readonly="[[readonly]]"\n                                    selected-indexes="{{selectedIndexes}}"\n                                    selection-mode="[[selectionMode]]"\n                                    selected-values="{{selectedValues}}"\n                                    sorted="[[sorted]]"\n                                    sort-direction="[[sortDirection]]"\n                                    theme="[[theme]]"\n                                    value-member="[[valueMember]]"\n                                    horizontal-scroll-bar-visibility="[[horizontalScrollBarVisibility]]"\n                                    vertical-scroll-bar-visibility="[[verticalScrollBarVisibility]]"\n                                    virtualized="[[virtualized]]">\n                                <content></content>\n                            </smart-list-box>\n                            <div id="resizeBar" class="smart-drop-down-resize-bar" aria-label="Resize">\n                                <div></div>\n                            </div>\n                         </div>\n                    </div>\n                    <span class="smart-hint smart-hidden" id="hint">[[hint]]</span>\n                </div>'}static get styleUrls(){return["smart.dropdownlist.css","smart.dropdown.css"]}propertyChangedHandler(e,t,n){super.propertyChangedHandler(e,t,n);const a=this;switch(e){case"animation":a.$.dropDownContainer.setAttribute("animation",a.animation);break;case"disabled":a._setFocusable(),a.close(),a._positionDetection.handleAutoPositioning();break;case"dataSource":case"displayMember":case"inputMember":a.$.actionButton&&(a.$.actionButton.innerHTML=a.placeholder),a._setDropDownSize(),a._positionDetection.checkBrowserBounds("vertically"),a._positionDetection.positionDropDown(),a._positionDetection.checkBrowserBounds("horizontally");break;case"dropDownAppendTo":a._positionDetection.dropDownAppendToChangedHandler();break;case"dropDownOpenMode":a._setFocusable(),a.$dropDownContainer.addClass("smart-visibility-hidden"),a.$.dropDownContainer.setAttribute("drop-down-open-mode",n),a.$.dropDownButton.removeAttribute("selected"),a.removeAttribute("drop-down-button-focus"),a.removeAttribute("action-button-focus"),a.opened=!1,a._ariaButton&&a._ariaButton.setAttribute("aria-expanded",!1),a._setAriaRelations();break;case"dropDownOverlay":n||a._positionDetection.removeOverlay();break;case"dropDownPosition":a._positionDetection.dropDownPositionChangedHandler();break;case"dropDownMinWidth":case"dropDownWidth":case"dropDownMaxWidth":case"dropDownHeight":case"dropDownMinHeight":case"dropDownMaxHeight":a._setDropDownSize();break;case"filterable":a.$.listBox.filterable=n,a._dropDownSize&&"auto"===a._dropDownSize.height&&a._setDropDownSize();break;case"label":if(!a._ariaButton)return;n?a._ariaButton.setAttribute("aria-labelledby",a.$.label.id):"DropDownList"===a.elementName&&a._ariaButton.setAttribute("aria-labelledby",a.$.actionButton.id);break;case"opened":if(a.disabled||a.readonly)return;n?a.open():a.close();break;case"placeholder":a._applySelection();break;case"readonly":a.close();break;case"resizeIndicator":n?a.$.dropDownContainer.setAttribute("resize-indicator",""):a.$.dropDownContainer.removeAttribute("resize-indicator");break;case"resizeMode":a.$.dropDownContainer.setAttribute("resize-mode",a.resizeMode);break;case"selectedValues":case"selectedIndexes":0===n.length?a.$.actionButton.innerHTML=a.placeholder:a._applySelection();break;case"selectionMode":a.$.listBox&&(a.$.listBox[e]=n,"checkBox"!==n&&"radioButton"!==n&&"checkBox"!==t&&"radioButton"!==t||a._setDropDownSize());break;case"selectionDisplayMode":a._applySelection();break;case"tokenTemplate":a._tokenTemplate=a._validateTemplate(a.tokenTemplate),a._applySelection();break;case"unfocusable":a._setFocusable()}}appendChild(e){const t=this;if(!t.isCompleted||e instanceof HTMLElement&&e.classList.contains("smart-resize-trigger-container")){const n=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.appendChild.apply(t,n.concat(Array.prototype.slice.call(arguments)))}e?(t.$.listBox.appendChild(e),t._dropDownSize&&"auto"===t._dropDownSize.height&&t._setDropDownSize()):t.error(t.localize("invalidNode",{elementType:t.nodeName.toLowerCase(),method:"appendChild",node:"node"}))}attached(){const e=this;super.attached(),e.isCompleted&&e.$.dropDownContainer&&(e._positionDetection.dropDownAttached("_setDropDownSize"),e._positionDetection.checkBrowserBounds(),e.selectedIndexes&&e._applySelection())}detached(){const e=this;super.detached(),e.$.dropDownContainer&&(e.close(),e._positionDetection&&e._positionDetection.dropDownDetached())}clearItems(){const e=this;e.$.listBox&&(e.$.listBox.clearItems(),e.$.actionButton.innerHTML=e.placeholder)}clearSelection(){const e=this;e.$.listBox&&(e.$.listBox.clearSelection(),e.$.actionButton.innerHTML=e.placeholder)}close(){const e=this;e.$dropDownContainer.hasClass("smart-visibility-hidden")||e.$.fireEvent("closing").defaultPrevented||(e.$dropDownContainer.addClass("smart-visibility-hidden"),e.$.fireEvent("close"),e.$.dropDownButton&&e.$.dropDownButton.removeAttribute("selected"),e.opened=!1,e._ariaButton&&e._ariaButton.setAttribute("aria-expanded",!1),e._preventDropDownClose=!1,e._positionDetection.removeOverlay(!0),e.$.listBox.removeAttribute("focus"),e._edgeMacFF&&!e.hasAnimation&&e.$.dropDownContainer&&(e.$.dropDownContainer.style.top=e.$.dropDownContainer.style.left="",e.$dropDownContainer.addClass("not-in-view")))}cloneNode(){const e=this;if(!e.$.listBox)return;let t=HTMLElement.prototype.cloneNode.apply(e,Array.prototype.slice.call(arguments,0,1));return t.dataSource=e.dataSource,t}ensureVisible(e){this.$.listBox&&this.$.listBox.ensureVisible(e)}getItem(e){if(this.$.listBox)return this.$.listBox.getItem(e)}get items(){const e=this;return e.$&&e.$.listBox?e.$.listBox.items:[]}get _focusedItem(){const e=this;return e.$&&e.$.listBox?e.$.listBox._focusedItem:null}insert(e,t){const n=this;n.$.listBox&&(n.$.listBox.insert(e,t),n._applySelection(),n._dropDownSize&&"auto"===n._dropDownSize.height&&n._setDropDownSize())}insertBefore(e,t){const n=this;if(!n.isCompleted){const a=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.insertBefore.apply(n,a.concat(Array.prototype.slice.call(arguments)))}e&&t?n.$.listBox&&(n.$.listBox.insertBefore(e,t),n._dropDownSize&&"auto"===n._dropDownSize.height&&n._setDropDownSize()):n.error(n.localize("invalidNode",{elementType:n.nodeName.toLowerCase(),method:"insertBefore",node:"newNode/referenceNode"}))}toggle(){const e=this;e.opened?e.close():e.open()}open(){const e=this,t=function(){for(let n=0;n<e.items.length;n++)if(!e.items[n].disabled)return e.items[n]};if(!e.disabled&&e.offsetHeight&&e.$dropDownContainer.hasClass("smart-visibility-hidden")){if(e.$dropDownContainer.hasClass("not-in-view")&&e.$dropDownContainer.removeClass("not-in-view"),e.$.dropDownContainer.style.transition=null,e.dropDownAppendTo){const n=e.getBoundingClientRect();if(e.$.container.contains(e.$.dropDownContainer)){let a=0;const i=setInterval(function(){const o=e.getBoundingClientRect();a++,o.top===e._positionTop&&a<10||(e.open(),clearInterval(i),e._positionTop=o.top)},100);return}n.top!==e._positionTop&&(e._positionTop=n.top)}e.$.fireEvent("opening").defaultPrevented||(e._shadowDOMStylesDelay&&(e._setDropDownSize(),delete e._shadowDOMStylesDelay),e.opened=!0,e._ariaButton&&e._ariaButton.setAttribute("aria-expanded",!0),e.$.listBox.setAttribute("focus",""),e._positionDetection.placeOverlay(),e._positionDetection.checkBrowserBounds("vertically"),e._positionDetection.positionDropDown(),e._positionDetection.checkBrowserBounds("horizontally"),e.$dropDownContainer.removeClass("smart-visibility-hidden"),e.$.fireEvent("open"),e.$.dropDownButton&&("dropDownButton"===e.dropDownOpenMode?e.$.dropDownButton.setAttribute("selected",""):e.$.dropDownButton.removeAttribute("selected")),(e.$.listBox&&!e._focusedItem||e._focusedItem&&!e._focusedItem._focused)&&e._focus(e.selectedIndexes.length>0?e.items[e.selectedIndexes[0]]:t),e.$.input&&!Smart.Utilities.Core.isMobile&&e.$.input.focus())}}ready(){super.ready()}render(){const e=this;e.rightToLeft&&(e.dropDownButtonPosition="right"===e.dropDownButtonPosition?"left":"right"),e.classList.add("smart-drop-down-box"),e.$.dropDownContainer&&(e._positionDetection=new Smart.Utilities.PositionDetection(e,e.$.dropDownContainer,e.$.container,"close"),e._positionDetection.getDropDownParent(!0),e._positionDetection.setDropDownPosition(),e._calculateDropDownSize(),e.$.dropDownContainer.setAttribute("resize-mode",e.resizeMode),e.$.dropDownContainer.setAttribute("drop-down-open-mode",e.dropDownOpenMode),e.resizeIndicator&&e.$.dropDownContainer.setAttribute("resize-indicator",""),e._positionDetection.handleAutoPositioning()),e.opened&&e.open(),e._positionTop=e.getBoundingClientRect().top,e._edgeMacFF=Smart.Utilities.Core.Browser.Edge||Smart.Utilities.Core.Browser.Firefox&&-1!==navigator.platform.toLowerCase().indexOf("mac"),e._edgeMacFF&&e.hasAnimation&&e.$.dropDownContainer&&e.$dropDownContainer.addClass("not-in-view"),e.$.label&&!e.$.label.id&&(e.$.label.id=e.id+"Label"),e.$.actionButton&&!e.$.actionButton.id&&(e.$.actionButton.id=e.id+"ActionButton"),e.$.hint&&!e.$.hint.id&&(e.$.hint.id=e.id+"Hint"),e._createElement(),super.render()}removeAt(e){const t=this;t.$.listBox&&(t.$.listBox.removeAt(e),t._applySelection(),t._dropDownSize&&"auto"===t._dropDownSize.height&&t._setDropDownSize())}removeChild(e){const t=this;if(!t.isCompleted||e instanceof HTMLElement&&e.classList.contains("smart-resize-trigger-container")){const n=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.removeChild.apply(t,n.concat(Array.prototype.slice.call(arguments)))}e&&e instanceof Smart.ListItem?(t.$.listBox.removeChild(e),t._dropDownSize&&"auto"===t._dropDownSize.height&&t._setDropDownSize()):t.error(t.localize("invalidNode",{elementType:t.nodeName.toLowerCase(),method:"removeChild",node:"node"}))}get value(){const e=this;return e.isRendered&&e.$.listBox?e.$.listBox.value:null}set value(e){const t=this;return t.isRendered&&t.$.listBox?void(t.$.listBox.value=e):null}select(e){this.$.listBox&&this.$.listBox.select(e)}_setFocusable(){const e=this;if(e.disabled||e.unfocusable)return e.removeAttribute("tabindex"),e.$.actionButton.removeAttribute("tabindex"),void e.$.dropDownButton.removeAttribute("tabindex");let t=e.tabIndex>0?e.tabIndex:0;e.tabIndex=t,"dropDownButton"===e.dropDownOpenMode?(e.removeAttribute("tabindex"),e.$.actionButton.setAttribute("tabindex",t),e.$.dropDownButton.setAttribute("tabindex",t)):(e.$.actionButton.removeAttribute("tabindex"),e.$.dropDownButton.removeAttribute("tabindex"))}static get requires(){return{"Smart.ListBox":"smart.listbox.js"}}unselect(e){this.$.listBox&&this.$.listBox.unselect(e)}update(e,t){const n=this;n.$.listBox&&(n.$.listBox.update(e,t),n._applySelection())}_resizeBarMoveHandler(e){"touchmove"===e.originalEvent.type&&e.originalEvent.preventDefault()}_createToken(){const e=this;let t,n=!1;const a=document.createDocumentFragment(),i=e.selectedIndexes[e.selectedIndexes.length-1];"plain"!==e.selectionDisplayMode||"one"!==e.selectionMode&&"zeroAndOne"!==e.selectionMode&&"zeroOrOne"!==e.selectionMode&&"radioButton"!==e.selectionMode?"tokens"===e.selectionDisplayMode?1===e.selectedIndexes.length&&["oneOrManyExtended","oneOrMany","zeroAndOne","one","radioButton"].indexOf(e.selectionMode)>-1?t="":(t="&#10006",n=!0):t=1===e.selectedIndexes.length?"":",":t="";const o=e.selectedIndexes,r=e.$.listBox._items;for(let l=0;l<o.length;l++){const s=o[l];r[s]&&a.appendChild(e._applyTokenTemplate(r[s][e.inputMember],"tokens"!==e.selectionDisplayMode&&s===i?"":t,n))}return a}_applySelection(){const e=this;if("placeholder"!==e.selectionDisplayMode&&0!==e.selectedIndexes.length){if(e.$.listBox._items&&0!==e.$.listBox._items.length)if("plain"!==e.selectionDisplayMode)e.$.actionButton.innerHTML="",e.$.actionButton.appendChild(e._createToken());else{const t=e.$.listBox.selectedIndexes,n=e.$.listBox._items;let a=[];for(let i=0;i<t.length;i++){const o=t[i];n[o]&&a.push(n[o][e.inputMember])}e.$.actionButton.innerHTML=a.length?`<span class="smart-token">${a.join(", ").trim()}</span>`:""}}else e.$.actionButton.innerHTML=e.placeholder}_applyTokenTemplate(e,t,n){const a=this,i=document.createElement("span"),o=function(){return"<span class='smart-drop-down-list-selection-label' role=\"presentation\">"+e+`</span><span class='smart-drop-down-list-unselect-button' role="button"${n?' aria-label="Unselect"':""}>${t}</span>`};if(i.classList.add("smart-token"),a._tokenTemplate){let r=document.importNode(a._tokenTemplate.content,!0);const l=r.childNodes.length,s=/{{\w+}}/g;let c;for(let u=0;u<l;u++)c=s.exec(r.childNodes[u].innerHTML),c&&(r.childNodes[u].innerHTML=r.childNodes[u].innerHTML.replace(c[0],o())),r.childNodes[u].outerHTML&&(i.innerHTML+=r.childNodes[u].outerHTML)}else"function"==typeof a.tokenTemplate?a.tokenTemplate(i,{label:e,iconSeparator:t}):i.innerHTML=o();return i}_bindingCompleteHandler(){const e=this;e.$.listBox&&requestAnimationFrame(()=>{e._setDropDownSize(),e._positionDetection.checkBrowserBounds()})}_buttonsDownHandler(e){const t=this;if(!t.disabled){if(t.hasRippleAnimation)if(t.$.buttonsContainer&&"dropDownButton"!==t.dropDownOpenMode){const n=t.$.buttonsContainer;n.firstElementChild.noRipple=!0,Smart.Utilities.Animation.Ripple.animate(n,e.pageX,e.pageY),n.firstElementChild.noRipple=!1}else Smart.Utilities.Animation.Ripple.animate(e.target,e.pageX,e.pageY);t._preventsSelectStart=!0,t.tagName.toLowerCase().indexOf("smart-drop-down-")>-1&&"dropDownButton"===t.dropDownOpenMode&&e.target===t.$.actionButton&&t.$.actionButton.setAttribute("active",""),t.opened&&(t._preventDropDownClose=!0)}}_buttonsMouseEventsHandler(e){const t=this;t.disabled||("mouseenter"===e.type?(t.setAttribute("hover",""),e.target.setAttribute("hover",""),"dropDownButton"===t.dropDownOpenMode&&e.target===t.$.dropDownButton&&t.setAttribute("drop-down-button-hover","")):(t.removeAttribute("hover"),t.removeAttribute("drop-down-button-hover"),e.target.removeAttribute("hover")))}_calculateDropDownSize(){const e=this;e._dropDownSize={};const t=window.getComputedStyle(e.$.dropDownContainer),n=parseFloat(t.getPropertyValue("border-top-width").trim()),a=parseFloat(t.getPropertyValue("border-bottom-width").trim()),i=parseFloat(t.getPropertyValue("margin-top").trim()),o=parseFloat(t.getPropertyValue("margin-bottom").trim()),r=parseFloat(t.getPropertyValue("padding-top").trim()),l=parseFloat(t.getPropertyValue("padding-bottom").trim());Smart.Utilities.Core.CSSVariablesSupport()&&(e._dropDownSize.width=t.getPropertyValue("--smart-drop-down-list-drop-down-width").trim(),e._dropDownSize.height=t.getPropertyValue("--smart-drop-down-list-drop-down-height").trim()),(!e._dropDownSize.width||e._dropDownSize.width.indexOf("initial")>-1)&&(e._dropDownSize.width=e.offsetWidth),e._dropDownSize.height||(e._dropDownSize.height="auto"),e._dropDownSize.minHeight=parseFloat(t.getPropertyValue("min-height").trim()),e._dropDownSize.maxHeight=parseFloat(t.getPropertyValue("max-height").trim()),e._dropDownSize.borderWidth=(isNaN(n)?0:n)+(isNaN(a)?0:a),e._dropDownSize.paddingWidth=(isNaN(r)?0:r)+(isNaN(l)?0:l),e._dropDownSize.marginWidth=(isNaN(i)?0:i)+(isNaN(o)?0:o)}_createElement(){const e=this;e._tokenTemplate=e._validateTemplate(e.tokenTemplate),e._applySelection(),e._setDropDownSize(),e._setFocusable(),e.$.arrow.noRipple=!0,e._shadowDOMStylesDelay=e.shadowRoot,e._setAriaRelations(!0)}_documentDownHandler(e){const t=this;if(t.disabled||t.readonly)return;let n=e.originalEvent.target;if(n===t._overlay&&(t._overlayDown=!0),t.shadowRoot){n=e.originalEvent.composedPath()[0];let i=n.getRootNode().host;for(;i;)i.closest(".smart-drop-down-container")===t.$.dropDownContainer&&(t._isDropDownClicked=!0),i=i.getRootNode().host}else t.isInShadowDOM&&(n=e.originalEvent.composedPath()[0]),t._isDropDownClicked=n.closest(".smart-drop-down-container")===t.$.dropDownContainer;if(t._buttonClicked=n.closest(".smart-action-button")||n.closest(".smart-drop-down-button"),t.$.listBox){let i=n.closest("smart-list-item");t.$.listBox.contains(i)||(i=void 0),t.hasRippleAnimation&&i&&Smart.Utilities.Animation.Ripple.animate(i,e.pageX,e.pageY),(i||n===t.$.listBox.$.filterInput||n.closest(".smart-token"))&&(t._preventDropDownClose=!0)}if(t._isDropDownClicked&&(t._preventDropDownClose=!0),n!==t.$.resizeBar||"none"===t.resizeMode)return;t._resizeDetails||(t._resizeDetails={});const a=t.$.dropDownContainer.getBoundingClientRect();t._resizeDetails.started=!0,t._resizeDetails.x=e.pageX,t._resizeDetails.y=e.pageY,t._resizeDetails.width=t.$.dropDownContainer.offsetWidth,t._resizeDetails.height=t.$.dropDownContainer.offsetHeight,t._resizeDetails.offsetXL=e.clientX-a.left,t._resizeDetails.offsetXR=a.left+t.$.dropDownContainer.offsetWidth-e.clientX,t._resizeDetails.offsetY=a.top+t.$.dropDownContainer.offsetHeight-e.clientY,t._resizeDetails.offsetYtop=e.clientY-a.top,t._preventDropDownClose=!0}_documentMoveHandler(e){const t=this,n=t.shadowRoot||t.isInShadowDOM?e.originalEvent.composedPath()[0]:e.originalEvent.target;if("auto"===t.dropDownOpenMode&&null!==t.dropDownAppendTo&&(t.contains(n)||t.$.dropDownContainer.contains(n)?t._isElementHovered=!0:(t._isElementHovered=!1,t._autoClose())),!t._resizeDetails||t._resizeDetails&&!t._resizeDetails.started)return;t.setAttribute("resizing",""),t._resizeDetails.resizeEventFired||(t.$.fireEvent("resizeStart",{position:{left:e.pageX,top:e.pageY}}),t._resizeDetails.resizeEventFired=!0);const a=document.documentElement,i=t.$.dropDownContainer.getBoundingClientRect(),o=t.getBoundingClientRect(),r=t.$.dropDownContainer.hasAttribute("top")?"top":"bottom";let l;function s(){if(l=e.pageY-t._resizeDetails.y,"bottom"===r)t._resizeDetails.height=Math.min(a.clientHeight-i.top-6,Math.max(0,t._resizeDetails.height+l)),t._resizeDetails.y=Math.max(i.top+a.scrollTop-t._resizeDetails.offsetY,Math.min(a.clientHeight+a.scrollTop-1.5*t._resizeDetails.offsetY,e.pageY));else{if(t._resizeDetails.height=Math.min(t._dropDownSize.maxHeight,Math.max(0,Math.min(o.top,t._resizeDetails.height-l))),l=Math.max(0,i.top+(i.height-Math.max(t._dropDownSize.minHeight,t._resizeDetails.height))),t.dropDownAppendTo){const p=Math.abs(parseFloat(getComputedStyle(t.$.dropDownContainer).getPropertyValue("margin-bottom")))||0;t.$.dropDownContainer.style.top=t.dropDownAppendTo?p+l+"px":""}const u=o.top+a.scrollTop+t._resizeDetails.offsetYtop;t._resizeDetails.y=Math.max(t._resizeDetails.offsetYtop,Math.min(u,Math.max(u-t._dropDownSize.maxHeight,e.pageY)))}t.$.dropDownContainer.style.height=t._resizeDetails.height+"px"}function c(){l=e.pageX-t._resizeDetails.x,t._resizeDetails.width=Math.min(a.clientWidth-i.left-6,Math.max(0,t._resizeDetails.width+l)),t.$.dropDownContainer.style.width=t._resizeDetails.width+"px",t._resizeDetails.x=Math.max(i.left+a.scrollLeft-t._resizeDetails.offsetXR,Math.min(a.clientWidth+a.scrollLeft-1.5*t._resizeDetails.offsetXR,e.pageX))}switch(t.resizeMode){case"vertical":s();break;case"horizontal":c();break;case"both":c(),s()}}_documentUpHandler(e){const t=this;if(t.$.actionButton.removeAttribute("active"),t._resizeDetails&&t._resizeDetails.started)return t._resizeDetails.started=t._resizeDetails.resizeEventFired=!1,t.removeAttribute("resizing"),t._preventDropDownClose=!1,t.focus(),void t.$.fireEvent("resizeEnd",{position:{left:e.pageX,top:e.pageY}});if(t.disabled||t._isDropDownClicked||t.readonly)return void delete t._isDropDownClicked;if(t._overlayDown)return t.close(),void delete t._overlayDown;let n=e.originalEvent.target,a=n.closest?n.closest("smart-drop-down-list"):void 0;if((t.enableShadowDOM||t.isInShadowDOM)&&(n=e.originalEvent.composedPath()[0],a=n.getRootNode().host),t._preventsSelectStart=!1,void 0===n||n===t.$.resizeBar)return;if("tokens"===t.selectionDisplayMode&&n.classList.contains("smart-drop-down-list-selection-label")&&a===t){"none"!==t.dropDownOpenMode&&t.open();let r=t.$.listBox._items.filter(l=>l[t.inputMember].toString()===n.textContent)[0];return t.$.listBox._scrollView.scrollTop=r.offsetTop,void t._focus(r)}if("tokens"===t.selectionDisplayMode&&n.classList.contains("smart-drop-down-list-unselect-button")&&a===t)return 1===t.selectedIndexes.length&&["zeroOrMany","zeroOrOne","checkBox"].indexOf(t.selectionMode)<0?void 0:void t.unselect(t.$.listBox._items.filter(r=>r[t.inputMember].toString()===n.previousElementSibling.textContent)[0]);const i=n.closest(".smart-action-button");let o;if(t._buttonClicked&&("dropDownButton"===t.dropDownOpenMode&&i&&t._buttonClicked===t.$.actionButton?t.$.fireEvent("actionButtonClick"):n.closest(".smart-drop-down-button")!==t._buttonClicked&&i!==t._buttonClicked||(o=!0,t.$.fireEvent("dropDownButtonClick"))),t._buttonClicked=void 0,i===t.$.actionButton||n.closest(".smart-drop-down-button")===t.$.dropDownButton)return"dropDownButton"===t.dropDownOpenMode&&i===t.$.actionButton?void t.close():void(t.$dropDownContainer.hasClass("smart-visibility-hidden")&&"none"!==t.dropDownOpenMode&&o&&"pointercancel"!==e.originalEvent.type?t.open():t.close());n=t._getUpEventTarget(n),void 0!==n&&("dropDownContainer"!==n&&"item"!==n||"item"===n&&"checkBox"!==t.selectionMode&&t.selectionMode.indexOf("Many")<0)&&t.close()}_dragStartHandler(e){this._resizeDetails&&this._resizeDetails.started&&e.preventDefault()}_dropDownTransitionendHandler(){const e=this;e._edgeMacFF&&!e.opened&&e.hasAnimation&&(e.$.dropDownContainer.style.top=e.$.dropDownContainer.style.left="",e.$dropDownContainer.addClass("not-in-view"))}_focus(e){this.$.listBox._focus(e)}_blurEventHandler(){const e=this;e.$.dropDownButton&&(e.removeAttribute("focus"),e.$.dropDownButton.removeAttribute("focus")),e.$.actionButton&&(e.removeAttribute("focus"),e.$.actionButton.removeAttribute("focus")),e.nodeName&&"smart-drop-down-list"===e.nodeName.toLowerCase()&&!e._preventDropDownClose&&e.close()}_focusEventHandler(){const e=this;e.$.dropDownButton&&(e.setAttribute("focus",""),e.$.dropDownButton.setAttribute("focus","")),e.$.actionButton&&(e.setAttribute("focus",""),e.$.actionButton.setAttribute("focus","")),e.removeAttribute("drop-down-button-focus"),e.removeAttribute("action-button-focus")}_buttonsFocusHandler(e){const t=this;e.target===t.$.dropDownButton?"focus"===e.type?t.setAttribute("drop-down-button-focus",""):(t.removeAttribute("drop-down-button-focus"),t.nodeName&&"smart-drop-down-list"===t.nodeName.toLowerCase()&&!t._preventDropDownClose&&t.close()):"focus"===e.type?t.setAttribute("action-button-focus",""):t.removeAttribute("action-button-focus")}_getUpEventTarget(e){const t=this;let n=e;for(n=void 0===n.parentElement?n.getRootNode().host:n.parentElement;n;){if(n===t.$.dropDownContainer){n="dropDownContainer";break}n=void 0===n.parentElement?n.getRootNode().host:n.parentElement}return n}_keyDownHandler(e){const t=this,n=t.enableShadowDOM&&t.shadowRoot.activeElement||document.activeElement,a=t.enableShadowDOM?e.composedPath()[0]:e.target;if(!(t.$.listBox&&a===t.$.listBox.$.filterInput||n!==t&&n!==t.$.dropDownButton&&n!==t.$.actionButton))switch(e.key){case"Enter":case" ":e.preventDefault(),a!==t.$.actionButton&&(t._keyPressed=!0,t.opened?(t._focusedItem&&t.select(t._focusedItem),("Enter"===e.key&&["none"].indexOf(t.selectionMode)<0||" "===e.key&&["none","zeroAndOne","one","radioButton"].indexOf(t.selectionMode)>-1)&&t.close()):t.opened||t.readonly||"none"===t.dropDownOpenMode||t.open()),"dropDownButton"===t.dropDownOpenMode&&a.setAttribute("active","");break;case"End":case"Home":case"PageUp":case"PageDown":case"ArrowUp":case"ArrowDown":if(t.readonly)return;if(e.altKey)return t._keyPressed=!1,void(t.$dropDownContainer.hasClass("smart-visibility-hidden")?t.open():t.close());e.preventDefault(),t.$.listBox._handleKeyStrokes(e.key);break;case"Escape":e.preventDefault(),t.close();break;default:if(t.readonly)return;"oneOrManyExtended"===t.selectionMode&&(t.$.listBox._keysPressed[e.key]=!0),t.$.listBox._applyIncrementalSearch(e.key)}}_keyUpHandler(e){const t=this,n=t.enableShadowDOM?e.composedPath()[0]:e.target;t.$.listBox&&n===t.$.listBox.$.filterInput||("Enter"!==e.key&&" "!==e.key||(n.removeAttribute("active"),t.$dropDownContainer.hasClass("smart-visibility-hidden")||(t._keyPressed=!1)),t.$.listBox&&"oneOrManyExtended"===t.selectionMode&&(t.$.listBox._keysPressed[e.key]=!1))}_listBoxChangeHandler(e){const t=this;if(e.target===t.$.listBox){if((t.dropDownAppendTo||t.enableShadowDOM)&&t.$.fireEvent("change",e.detail),"list"===t.autoComplete&&e.detail){const n=t.$.listBox._items[e.detail.index];t._lastSelectedItem=n&&n.selected?n:void 0}t._applySelection(t.selectionMode,e.detail)}else e.stopPropagation()}_listBoxItemClickHandler(e){const t=this;(t.dropDownAppendTo||t.enableShadowDOM)&&t.$.fireEvent(e.type,e.detail),"checkBox"!==t.selectionMode&&t.selectionMode.indexOf("Many")<0&&t.close(),Smart.Utilities.Core.isMobile||t.focus(),delete t._isDropDownClicked}_listBoxKeyDownHandler(e){const t=this;if("Enter"===e.key)return t.close(),"dropDownButton"===t.dropDownOpenMode?t.$.dropDownButton.focus():t.focus(),void e.stopPropagation();"Escape"!==e.key||t.close()}_mouseEnterHandler(){const e=this;e._isElementHovered=!0,e.tagName.toLowerCase().indexOf("smart-drop-down-")>-1&&"auto"===e.dropDownOpenMode&&!e.disabled&&!e.readonly&&e.open()}_mouseLeaveHandler(){const e=this;e.removeAttribute("hover"),e._isElementHovered=!1,"auto"!==e.dropDownOpenMode||e.disabled||e.readonly||e._autoClose()}_mouseWheelHandler(e){const t=this;t.disabled||t.readonly||t.items&&0===t.items.length||t.$dropDownContainer&&!t.$dropDownContainer.hasClass("smart-visibility-hidden")||t.$.listBox&&(e.preventDefault(),t.$.listBox._handleKeyStrokes(e.deltaY>0?"ArrowDown":"ArrowUp"))}_autoClose(){const e=this;e._autoCloseTimeout=setTimeout(function(){e._isElementHovered||e.close(),clearTimeout(e._autoCloseTimeout)}.bind(e),e.autoCloseDelay)}_propertyValidator(e,t){return"number"!=typeof t&&"string"!=typeof t?e:t}_resizeHandler(){this.refresh()}refresh(){const e=this;"none"===e.resizeMode&&(e._calculateDropDownSize(),e._setDropDownSize())}_selectStartHandler(e){this._preventsSelectStart&&e.preventDefault()}_setAriaRelations(e){const t=this;let n,a;"dropDownButton"!==t.dropDownOpenMode?(n=t.$.dropDownButton,n.setAttribute("aria-hidden",!0),a=t,t.$.actionButton.removeAttribute("role")):(n=t,a=t.$.dropDownButton,a.removeAttribute("aria-hidden"),t.$.actionButton.setAttribute("role","button")),t._ariaButton=a,a.setAttribute("role","button"),a.setAttribute("aria-haspopup","listbox"),a.setAttribute("aria-owns",t.$.listBox.id),a.setAttribute("aria-describedby",t.$.hint.id),t.label?a.setAttribute("aria-labelledby",t.$.label.id):"DropDownList"===t.elementName&&a.setAttribute("aria-labelledby",t.$.actionButton.id),n.setAttribute("role","presentation"),n.removeAttribute("aria-owns"),e?a.setAttribute("aria-expanded",t.opened):(n.removeAttribute("aria-describedby"),n.removeAttribute("aria-expanded"),n.removeAttribute("aria-haspopup"),n.removeAttribute("aria-labelledby"))}_setDropDownSize(){const e=this,t=e.$.listBox;let n;if(e._dropDownSize||e._calculateDropDownSize(),["dropDownMinWidth","dropDownMaxWidth"].forEach(a=>{e.$.dropDownContainer.style[a.replace("dropDown","").replace(/^./,"m")]="initial"===e[a]?e.offsetWidth+"px":e[a]?parseFloat(e[a])+(e[a].toString().endsWith("%")?"%":"px"):null}),["dropDownMinHeight","dropDownMaxHeight"].forEach(a=>{e.$.dropDownContainer.style[a.replace("dropDown","").replace(/^./,"m")]=e[a]?parseFloat(e[a])+(e[a].toString().endsWith("%")?"%":"px"):null}),e.$.dropDownContainer.style.width=e.dropDownWidth?"auto"!==e.dropDownWidth?("initial"===e.dropDownWidth?e.offsetWidth:parseFloat(e.dropDownWidth))+"px":"auto":"auto"===e._dropDownSize.width?"auto":(parseFloat(e._dropDownSize.width)||0)+"px",e.dropDownHeight&&"auto"!==e.dropDownHeight)e.$.dropDownContainer.style.height=parseFloat(e.dropDownHeight)+((e.dropDownHeight+"").indexOf("%")>-1?"%":"px");else if(!e.$.listBox||"auto"!==e._dropDownSize.height&&"auto"!==e.dropDownHeight)e.$.dropDownContainer.style.height=e._dropDownSize.height;else{e.$.dropDownContainer.style.height="";let a=2*parseInt(window.getComputedStyle(t.$.itemsContainer).getPropertyValue("--smart-list-item-vertical-offset"));if(isNaN(a)&&(a=6),n=a,t.items.length>0?t.items.map(i=>n+=i.height||i.offsetHeight):n=t.$.placeholder.offsetHeight,e.filterable){const i=t.$.filterInputContainer;n+=i.offsetHeight+i.offsetTop}n=n+e._dropDownSize.paddingWidth+e._dropDownSize.borderWidth,e.$.dropDownContainer.style.height=n+"px"}if(t){if(void 0===n||!t.$)return void t._refreshLayout();const a=Math.max(0,e._dropDownSize.minHeight-(n-t.$.horizontalScrollBar.offsetHeight));a&&(e.$.dropDownContainer.style.height=n+a+"px"),!e.opened&&e.virtualized&&t.refresh()}}_styleChangedHandler(e){const t=this;if(t.dropDownAppendTo){const n=e.detail.styleProperties,a=["font-size","font-family","font-style","font-weight"];for(let i=0;i<a.length;i++)n[a[i]]&&(t.$.dropDownContainer.style[a[i]]=n[a[i]].value)}"auto"===t._dropDownSize.height&&t._setDropDownSize()}_validateTemplate(e){const t=this;if(e&&"function"!=typeof e)if("content"in document.createElement("template")){if(e instanceof HTMLTemplateElement||(e=document.getElementById(e)),null!==e&&"content"in e)return e;t.error(t.localize("invalidTemplate",{elementType:t.nodeName.toLowerCase(),property:"tokenTemplate"}))}else t.error(t.localize("htmlTemplateNotSuported",{elementType:t.nodeName.toLowerCase()}))}})},6321:()=>{!function(){const e="9.1.27",t=[];let n="Smart";if(window[n]&&window[n].Version){if(window[n].Version===e)return;if(window[n].Version!==e)n+=e;else{let C=2;for(;window[n];)n+=C.toString(),C++}}const a=navigator.userAgent.indexOf("Edge")>-1&&navigator.appVersion.indexOf("Edge")>-1;document.elementsFromPoint||(document.elementsFromPoint=document.msElementsFromPoint);class i{static isBoolean(d){return"boolean"==typeof d}static isFunction(d){return!!(d&&d.constructor&&d.call&&d.apply)}static isArray(d){return Array.isArray(d)}static isObject(d){return d&&("object"==typeof d||this.isFunction(d))||!1}static isDate(d){return d instanceof Date}static isString(d){return"string"==typeof d}static isNumber(d){return"number"==typeof d}static getType(d){const m=this,h=["Boolean","Number","String","Function","Array","Date","Object"].find(f=>{if(m["is"+f](d))return f});return h?h.toLowerCase():void 0}}class o{static animate(d,m,h,f){const _=d;if(!_||_ instanceof HTMLElement==0)return;if(0===_.getElementsByClassName("smart-ripple").length){const R=document.createElement("span");R.classList.add("smart-ripple"),R.setAttribute("role","presentation");let z=!0,G=null;if(window[n].EnableShadowDOM&&_.enableShadowDOM&&!0!==_.isInShadowDOM){for(let j=0;j<_.shadowRoot.host.shadowRoot.children.length;j++)"link"!==_.shadowRoot.host.shadowRoot.children[j].tagName.toLowerCase()&&(G=_.shadowRoot.host.shadowRoot.children[j]);_.shadowRoot.host.shadowRoot.querySelector(".smart-ripple")&&(z=!1)}else G=_.firstElementChild;z&&(G&&!G.noRipple&&G.offsetHeight>0?G.appendChild(R):_.appendChild(R))}let w=null;if(w=window[n].EnableShadowDOM&&_.shadowRoot?_.shadowRoot.host.shadowRoot.querySelector(".smart-ripple"):_.getElementsByClassName("smart-ripple")[0],!w)return;w.innerHTML="",w.classList.remove("smart-animate"),w.style.height=w.style.width=Math.max(_.offsetHeight,_.offsetWidth)+"px";const S=window.getComputedStyle(w.parentElement),E=parseInt(S.borderLeftWidth)||0,$=parseInt(S.borderTopWidth)||0,L=_.getBoundingClientRect(),k=m-(L.left+window.pageXOffset)-w.offsetWidth/2-E,F=h-(L.top+window.pageYOffset)-w.offsetHeight/2-$;w.style.left=k+"px",w.style.top=F+"px",w.classList.add("smart-animate"),w.addEventListener("animationend",function R(){w.parentElement&&w.parentElement.removeChild(w),f&&f(),w.removeEventListener("animationend",R),w.removeEventListener("animationcancel",R)}),w.addEventListener("animationcancel",function R(){w.parentElement&&w.parentElement.removeChild(w),f&&f(),w.removeEventListener("animationcancel",R),w.removeEventListener("animationend",R)})}}class r{static easeInQuad(d,m,h,f){return h*(d/=f)*d+m}static easeOutQuad(d,m,h,f){return-h*(d/=f)*(d-2)+m}static easeInOutQuad(d,m,h,f){return(d/=f/2)<1?h/2*d*d+m:-h/2*(--d*(d-2)-1)+m}static easeInCubic(d,m,h,f){return h*(d/=f)*d*d+m}static easeOutCubic(d,m,h,f){return h*((d=d/f-1)*d*d+1)+m}static easeInOutCubic(d,m,h,f){return(d/=f/2)<1?h/2*d*d*d+m:h/2*((d-=2)*d*d+2)+m}static easeInQuart(d,m,h,f){return h*(d/=f)*d*d*d+m}static easeOutQuart(d,m,h,f){return-h*((d=d/f-1)*d*d*d-1)+m}static easeInOutQuart(d,m,h,f){return(d/=f/2)<1?h/2*d*d*d*d+m:-h/2*((d-=2)*d*d*d-2)+m}static easeInQuint(d,m,h,f){return h*(d/=f)*d*d*d*d+m}static easeOutQuint(d,m,h,f){return h*((d=d/f-1)*d*d*d*d+1)+m}static easeInOutQuint(d,m,h,f){return(d/=f/2)<1?h/2*d*d*d*d*d+m:h/2*((d-=2)*d*d*d*d+2)+m}static easeInSine(d,m,h,f){return-h*Math.cos(d/f*(Math.PI/2))+h+m}static easeOutSine(d,m,h,f){return h*Math.sin(d/f*(Math.PI/2))+m}static easeInOutSine(d,m,h,f){return-h/2*(Math.cos(Math.PI*d/f)-1)+m}static easeInExpo(d,m,h,f){return 0===d?m:h*Math.pow(2,10*(d/f-1))+m}static easeOutExpo(d,m,h,f){return d===f?m+h:h*(1-Math.pow(2,-10*d/f))+m}static easeInOutExpo(d,m,h,f){return 0===d?m:d===f?m+h:(d/=f/2)<1?h/2*Math.pow(2,10*(d-1))+m:h/2*(2-Math.pow(2,-10*--d))+m}static easeInCirc(d,m,h,f){return-h*(Math.sqrt(1-(d/=f)*d)-1)+m}static easeOutCirc(d,m,h,f){return h*Math.sqrt(1-(d=d/f-1)*d)+m}static easeInOutCirc(d,m,h,f){return(d/=f/2)<1?-h/2*(Math.sqrt(1-d*d)-1)+m:h/2*(Math.sqrt(1-(d-=2)*d)+1)+m}static easeInElastic(d,m,h,f){let _=1.70158,w=0,S=h;return 0===d?m:1==(d/=f)?m+h:(w||(w=.3*f),S<Math.abs(h)?(S=h,_=w/4):_=w/(2*Math.PI)*Math.asin(h/S),-S*Math.pow(2,10*(d-=1))*Math.sin((d*f-_)*(2*Math.PI)/w)+m)}static easeOutElastic(d,m,h,f){let _=1.70158,w=0,S=h;return 0===d?m:1==(d/=f)?m+h:(w||(w=.3*f),S<Math.abs(h)?(S=h,_=w/4):_=w/(2*Math.PI)*Math.asin(h/S),S*Math.pow(2,-10*d)*Math.sin((d*f-_)*(2*Math.PI)/w)+h+m)}static easeInOutElastic(d,m,h,f){let _=1.70158,w=0,S=h;return 0===d?m:2==(d/=f/2)?m+h:(w||(w=f*(.3*1.5)),S<Math.abs(h)?(S=h,_=w/4):_=w/(2*Math.PI)*Math.asin(h/S),d<1?S*Math.pow(2,10*(d-=1))*Math.sin((d*f-_)*(2*Math.PI)/w)*-.5+m:S*Math.pow(2,-10*(d-=1))*Math.sin((d*f-_)*(2*Math.PI)/w)*.5+h+m)}static easeInBack(d,m,h,f,_){return void 0===_&&(_=1.70158),h*(d/=f)*d*((_+1)*d-_)+m}static easeOutBack(d,m,h,f,_){return void 0===_&&(_=1.70158),h*((d=d/f-1)*d*((_+1)*d+_)+1)+m}static easeInOutBack(d,m,h,f,_){return void 0===_&&(_=1.70158),(d/=f/2)<1?h/2*(d*d*((1+(_*=1.525))*d-_))+m:h/2*((d-=2)*d*((1+(_*=1.525))*d+_)+2)+m}static easeInBounce(d,m,h,f){return h-this.easeOutBounce(f-d,0,h,f)+m}static easeOutBounce(d,m,h,f){return(d/=f)<1/2.75?h*(7.5625*d*d)+m:d<2/2.75?h*(7.5625*(d-=1.5/2.75)*d+.75)+m:d<2.5/2.75?h*(7.5625*(d-=2.25/2.75)*d+.9375)+m:h*(7.5625*(d-=2.625/2.75)*d+.984375)+m}static easeInOutBounce(d,m,h,f){return d<f/2?.5*this.easeInBounce(2*d,0,h,f)+m:.5*this.easeOutBounce(2*d-f,0,h,f)+.5*h+m}}class l{static get isMobile(){return/(iphone|ipod|ipad|android|iemobile|blackberry|bada)/.test(window.navigator.userAgent.toLowerCase())||["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}static get Browser(){let d;const m=function(f){let _=f.indexOf(d);if(-1===_)return;const w=f.indexOf("rv:");return parseFloat(f.substring("Trident"===d&&-1!==w?w+3:_+d.length+1))};let h={};return h[function(){const f=[{string:navigator.userAgent,subString:"Edge",identity:"Edge"},{string:navigator.userAgent,subString:"MSIE",identity:"IE"},{string:navigator.userAgent,subString:"Trident",identity:"IE"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.userAgent,subString:"Opera",identity:"Opera"},{string:navigator.userAgent,subString:"OPR",identity:"Opera"},{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"Safari",identity:"Safari"}];for(let _=0;_<f.length;_++)if(d=f[_].subString,-1!==f[_].string.indexOf(f[_].subString))return f[_].identity;return"Other"}()]=!0,h.version=m(navigator.userAgent)||m(navigator.appVersion)||"Unknown",h}static toCamelCase(d){return d.replace(/-([a-z])/g,function(m){return m[1].toUpperCase()})}static toDash(d){return d.split(/(?=[A-Z])/).join("-").toLowerCase()}static unescapeHTML(d){return(new DOMParser).parseFromString(d,"text/html").documentElement.textContent}static escapeHTML(d){const m={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};return String(d).replace(/[&<>"'`=\/]/g,h=>m[h])}static sanitizeHTML(d){if(d&&(d.indexOf("onclick")>=0||d.indexOf("onload")>=0||d.indexOf("onerror")>=0))return this.escapeHTML(d);const m=new RegExp("<s*(applet|audio|base|bgsound|embed|form|iframe|isindex|keygen|layout|link|meta|object|script|svg|style|template|video)[^>]*>(.*?)<s*/s*(applet|audio|base|bgsound|embed|form|iframe|isindex|keygen|layout|link|meta|object|script|svg|style|template|video)>","ig");return String(d).replace(m,h=>this.escapeHTML(h))}static createGUID(){function d(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return d()+d()+"-"+d()+"-"+d()+"-"+d()+"-"+d()+d()+d()}static getScriptLocation(){return"./"!==window[n].BaseUrl?window[n].BaseUrl:function(){if(document.currentScript){let _=document.currentScript.src,w=_.lastIndexOf("/");return _=_.substring(0,w),_}const d=new Error;let m="(",h=")";if(Smart.Utilities.Core.Browser.Safari&&(m="@",h="\n"),d.fileName)return d.fileName.replace("/smart.element.js","");let f=d.stack.split(m);return f=f[1],f=f.split(h)[0],f=f.split(":"),f.splice(-2,2),f=f.join(":"),f.replace("/smart.element.js","")}()}static CSSVariablesSupport(){return window.CSS&&window.CSS.supports&&window.CSS.supports("(--fake-var: 0)")}static assign(d,m){const h=_=>_&&"object"==typeof _&&!Array.isArray(_)&&null!==_;let f=Object.assign({},d);return h(d)&&h(m)&&Object.keys(m).forEach(_=>{h(m[_])?_ in d?f[_]=this.assign(d[_],m[_]):Object.assign(f,{[_]:m[_]}):Object.assign(f,{[_]:m[_]})}),f}static html(d,m){const h=this;let f="",_=d.childNodes;if(!m){for(let w,S=0,E=_.length;S<E&&(w=_[S]);S++){const $=["strong"];if(w instanceof HTMLElement||w.tagName&&$.indexOf(w.tagName.toLowerCase())>=0){const L=w.tagName.toLowerCase(),k=w.attributes;let F="<"+L;for(let R,z=0;R=k[z];z++)F+=" "+R.name+'="'+R.value.replace(/[&\u00A0"]/g,D.Core.escapeHTML)+'"';F+=">",["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"][L]&&(f+=F),f=f+F+h.html(w)+"</"+L+">"}else{if(8===w.nodeType)continue;f+=w.textContent.replace(/[&\u00A0<>]/g,D.Core.escapeHTML)}}return f}d.innerHTML=m.replace(/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,"<$1></$2>")}}let s=[];class c{static watch(d){switch(d.nodeName.toLowerCase()){case"smart-grid":case"smart-kanban":case"smart-table":case"smart-pivot-table":case"smart-scheduler":case"smart-tabs":case"smart-card-view":case"smart-list-box":case"smart-combo-box":case"smart-drop-down-list":case"smart-calendar":case"smart-gauge":case"smart-numeric-text-box":case"smart-menu":case"smart-tree":s.push(d);break;default:return}c.start()}static start(){c.isStarted||(c.isStarted=!0,c.interval&&clearInterval(c.interval),0===s.length||document.hidden?c.isStarted=!1:c.interval=setInterval(function(){c.observe()},100))}static stop(){c.isStarted=!1,c.interval&&clearInterval(c.interval)}static observeElement(d){const m=d;if("test"===window.Smart.Mode||document.hidden)return void(c.interval&&clearInterval(c.interval));let h=d._computedStyle||"resize"!==m.hasStyleObserver?document.defaultView.getComputedStyle(m,null):{},f=!0,_="resize"!==m.hasStyleObserver?["paddingLeft","paddingRight","paddingTop","paddingBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth","display","visibility","font-size","font-family","font-style","font-weight","max-height","min-height","max-width","min-width","overflow","overflow-x","overflow-y"]:[];if(d.styleProperties&&(_=_.concat(d.styleProperties)),d.observableStyleProperties&&(_=d.observableStyleProperties),!m._styleInfo){m._styleInfo=[];for(let S=0;S<_.length;S++){const E=_[S],$=E.startsWith("--")?h.getPropertyValue(E):h[E];m._styleInfo[E]=$}return}if(d.isHidden||"none"!==h.display&&(0!==d.offsetWidth&&0!==d.offsetHeight||(d.isHidden=!0)),d.isHidden){if(d.visibilityChangedHandler(),d.isHidden)return;f=!1}let w=[];for(let S=0;S<_.length;S++){const E=_[S],$=E.startsWith("--")?h.getPropertyValue(E):h[E];m._styleInfo[E]!==$&&(w[E]={oldValue:m._styleInfo[E],value:$},w.length++),m._styleInfo[E]=$}w.length>0&&(m.$.fireEvent("styleChanged",{styleProperties:w},{bubbles:!1,cancelable:!0}),w.display&&f&&m.$.fireEvent("resize",m,{bubbles:!1,cancelable:!0}))}static observe(){for(let d=0;d<s.length;d++)this.observeElement(s[d])}static unwatch(d){c.stop();const m=s.indexOf(d);-1!==m&&s.splice(m,1),c.start()}}let u=[];const p=[],g=["resize","down","up","move","tap","taphold","swipeleft","swiperight","swipetop","swipebottom"];class b{constructor(d){const m=this;m.target=d,m.$target=new y(d),m.$document=d.$document?d.$document:new y(document),m.id=(Date.now().toString(36)+Math.random().toString(36).substr(2,5)).toUpperCase();let h={handlers:{},boundEventTypes:[],listen:m.listen.bind(m),unlisten:m.unlisten.bind(m)};return m.tapHoldDelay=750,m.swipeMin=10,m.swipeMax=5e3,m.swipeDelay=1e3,m.tapHoldDelay=750,m.inputEventProperties=["clientX","clientY","pageX","pageY","screenX","screenY"],g.forEach(f=>{h[f]=_=>{h.handlers[f]=_},m[f]=_=>{if(!h.handlers[_.type]){if(("mousemove"===_.type||"pointermove"===_.type||"touchmove"===_.type)&&h.handlers.move){const w=m.createEvent(_,"move");h.handlers.move(w)}return!0}return h.handlers[_.type](_)}}),m.listen(),m.handlers=h.handlers,h}listen(d){const m=this;if("resize"===d&&m.target!==document&&m.target!==window&&!1!==m.target.hasResizeObserver)if(Smart.Utilities.Core.Browser.Firefox){if(!m.target.resizeObserver){let h,f,_,w=!1,S=m.target.offsetWidth,E=m.target.offsetHeight;const $=new ResizeObserver(()=>{if(!w)return void(w=!0);const L=new CustomEvent("resize",{bubbles:!1,cancelable:!0});f=m.target.offsetWidth,_=m.target.offsetHeight,h=f!==S||_!==E,m.target.requiresLayout&&(h=!0),h&&(m.resize(L),m.target.requiresLayout=!1)});$.observe(m.target),m.target.resizeObserver=$}}else if(!m.target.resizeTrigger){const h=document.createElement("div");h.className="smart-resize-trigger-container",h.innerHTML='<div class="smart-resize-trigger-container"><div class="smart-resize-trigger"></div></div><div class="smart-resize-trigger-container"><div class="smart-resize-trigger-shrink"></div></div>',h.setAttribute("aria-hidden",!0),window[n].EnableShadowDOM&&m.target.shadowRoot?m.target.shadowRoot.appendChild(h):m.target.appendChild(h),m.target.resizeTrigger=h;const f=h.childNodes[0],_=f.childNodes[0],w=h.childNodes[1],S=function(){_.style.width="100000px",_.style.height="100000px",f.scrollLeft=1e5,f.scrollTop=1e5,w.scrollLeft=1e5,w.scrollTop=1e5};let E,$,L,k,F=m.target.offsetWidth,R=m.target.offsetHeight;if(0===F||0===R){const z=function(){S(),m.target.removeEventListener("resize",z)};m.target.addEventListener("resize",z),S()}else S();m.target.resizeHandler=function(){$||($=requestAnimationFrame(function(){if($=0,L=m.target.offsetWidth,k=m.target.offsetHeight,E=L!==F||k!==R,m.target.requiresLayout&&(E=!0),!E)return;F=L,R=k;const z=new CustomEvent("resize",{bubbles:!1,cancelable:!0});m.resize(z),m.target.requiresLayout=!1})),S()},f.addEventListener("scroll",m.target.resizeHandler),w.addEventListener("scroll",m.target.resizeHandler)}m.isListening||(m.isListening=!0,m.isPressed=!1,m.isReleased=!1,m.isInBounds=!1,window.PointerEvent?(m.$target.listen("pointerdown.inputEvents"+m.id,m.pointerDown.bind(m)),m.$target.listen("pointerup.inputEvents"+m.id,m.pointerUp.bind(m)),m.$target.listen("pointermove.inputEvents"+m.id,m.pointerMove.bind(m)),m.$target.listen("pointercancel.inputEvents"+m.id,m.pointerCancel.bind(m))):("ontouchstart"in window&&(m.$target.listen("touchmove.inputEvents"+m.id,m.touchMove.bind(m)),m.$target.listen("touchstart.inputEvents"+m.id,m.touchStart.bind(m)),m.$target.listen("touchend.inputEvents"+m.id,m.touchEnd.bind(m)),m.$target.listen("touchcancel.inputEvents"+m.id,m.touchCancel.bind(m))),m.$target.listen("mousedown.inputEvents"+m.id,m.mouseDown.bind(m)),m.$target.listen("mouseup.inputEvents"+m.id,m.mouseUp.bind(m)),m.$target.listen("mousemove.inputEvents"+m.id,m.mouseMove.bind(m)),m.$target.listen("mouseleave.inputEvents"+m.id,m.mouseLeave.bind(m))),m.target._handleDocumentUp||(m.target._handleDocumentUp=m.handleDocumentUp.bind(m),m.target._handleDocumentUpId=m.id,m.$document.listen("mouseup.inputEvents"+m.target._handleDocumentUpId,m.target._handleDocumentUp)))}unlisten(d){const m=this;if(m.isListening=!1,window.PointerEvent?(m.$target.unlisten("pointerdown.inputEvents"+m.id),m.$target.unlisten("pointerup.inputEvents"+m.id),m.$target.unlisten("pointermove.inputEvents"+m.id),m.$target.unlisten("pointercancel.inputEvents"+m.id)):("ontouchstart"in window&&(m.$target.unlisten("touchstart.inputEvents"+m.id),m.$target.unlisten("touchmove.inputEvents"+m.id),m.$target.unlisten("touchend.inputEvents"+m.id),m.$target.unlisten("touchcancel.inputEvents"+m.id)),m.$target.unlisten("mousedown.inputEvents"+m.id),m.$target.unlisten("mouseup.inputEvents"+m.id),m.$target.unlisten("mousemove.inputEvents"+m.id),m.$target.unlisten("mouseleave.inputEvents"+m.id)),m.target._handleDocumentUp&&(m.$document.unlisten("mouseup.inputEvents"+m.target._handleDocumentUpId,m.target._handleDocumentUp),delete m.target._handleDocumentUp,delete m.target._handleDocumentUpId),"resize"===d)if(Smart.Utilities.Core.Browser.Firefox)m.target.resizeObserver&&(m.target.resizeObserver.unobserve(m.target),delete m.target.resizeObserver);else if(m.target.resizeTrigger){const h=m.target.resizeTrigger,_=h.childNodes[1];h.childNodes[0].removeEventListener("scroll",m.target.resizeHandler),_.removeEventListener("scroll",m.target.resizeHandler),m.target.resizeHandler=null,h.parentNode.removeChild(h),delete m.target.resizeTrigger}}handleDocumentUp(d){const m=this;m.isPressed=!1,m.isReleased=!1,m.resetSwipe(d)}createEvent(d,m){const h=this,f=d.touches,_=d.changedTouches,w=f&&f.length?f[0]:_&&_.length?_[0]:void 0,S=new CustomEvent(m,{bubbles:!0,cancelable:!0,composed:void 0!==h.$target.element.getRootNode().host});if(S.originalEvent=d,w){for(let E=0;E<h.inputEventProperties.length;E++){const $=h.inputEventProperties[E];S[$]=w[$]}return S}for(let E in d)E in S||(S[E]=d[E]);return S}fireTap(d){const m=this;if(clearTimeout(this.tapHoldTimeout),!this.tapHoldFired&&this.isInBounds){const h=m.createEvent(d,"tap");m.tap(h)}}initTap(d){const m=this;m.isInBounds=!0,m.tapHoldFired=!1,m.tapHoldTimeout=setTimeout(function(){if(m.isInBounds){m.tapHoldFired=!0;const h=m.createEvent(d,"taphold");m.taphold(h)}},m.tapHoldDelay)}pointerDown(d){return this.handleDown(d)}mouseDown(d){const m=this;if(!(m.isPressed||m.touchStartTime&&new Date-m.touchStartTime<500))return m.handleDown(d)}touchStart(d){const m=this;return m.touchStartTime=new Date,m.isTouchMoved=!0,m.handleDown(d)}mouseUp(d){const m=this;if(!(m.isReleased||m.touchEndTime&&new Date-m.touchEndTime<500))return m.handleUp(d)}handleDown(d){const m=this;m.isReleased=!1,m.isPressed=!0;const h=m.createEvent(d,"down");return(m.handlers.tap||m.handlers.taphold)&&m.initTap(h),(m.handlers.swipeleft||m.handlers.swiperight||m.handlers.swipetop||m.handlers.swipebottom)&&m.initSwipe(h),m.down(h)}handleUp(d){const m=this;m.isReleased=!0,m.isPressed=!1;const h=m.createEvent(d,"up"),f=m.up(h);return(m.handlers.tap||m.handlers.taphold)&&m.fireTap(h),m.resetSwipe(h),f}handleMove(d){const m=this;let h=m.move(d);return m.isPressed&&(m._maxSwipeVerticalDistance=Math.max(m._maxSwipeVerticalDistance,Math.abs(m._startY-d.pageY)),m._maxSwipeHorizontalDistance=Math.max(m._maxSwipeHorizontalDistance,Math.abs(m._startX-d.pageX)),h=m.handleSwipeEvents(d)),h}touchEnd(d){return this.touchEndTime=new Date,this.handleUp(d)}pointerUp(d){return this.handleUp(d)}pointerCancel(d){this.pointerUp(d)}touchCancel(d){this.touchEnd(d)}mouseLeave(){this.isInBounds=!1}mouseMove(d){if(!this.isTouchMoved)return this.handleMove(d)}pointerMove(d){return this.handleMove(d)}touchMove(d){const m=this,h=d.touches,f=d.changedTouches,_=h&&h.length?h[0]:f&&f.length?f[0]:void 0;for(let w=0;w<m.inputEventProperties.length;w++){const S=m.inputEventProperties[w];void 0===d[S]&&(d[S]=_[S])}return m.isTouchMoved=!0,m.handleMove(d)}handleSwipeEvents(d){const m=this;let h=!0;return(m.handlers.swipetop||m.handlers.swipebottom)&&(h=this.handleVerticalSwipeEvents(d)),!1===h||(m.handlers.swipeleft||m.handlers.swiperight)&&(h=this.handleHorizontalSwipeEvents(d)),h}handleVerticalSwipeEvents(d){let m,h;return m=d.pageY,h=m-this._startY,this.swiped(d,h,"vertical")}handleHorizontalSwipeEvents(d){let m,h;return m=d.pageX,h=m-this._startX,this.swiped(d,h,"horizontal")}swiped(d,m,h){const f=this;if(h=h||0,Math.abs(m)>=f.swipeMin&&!f._swipeEvent&&!f._swipeLocked){let _=m<0?"swipeleft":"swiperight";if("horizontal"===h?f._swipeEvent=f.createEvent(d,_):(_=m<0?"swipetop":"swipebottom",f._swipeEvent=f.createEvent(d,m<0?"swipetop":"swipebottom")),f[_]&&(f[_](this._swipeEvent),Math.abs(m)<=this.swipeMax))return d.stopImmediatePropagation(),!1}return!0}resetSwipe(){this._swipeEvent=null,clearTimeout(this._swipeTimeout)}initSwipe(d){const m=this;m._maxSwipeVerticalDistance=0,m._maxSwipeHorizontalDistance=0,m._startX=d.pageX,m._startY=d.pageY,m._swipeLocked=!1,m._swipeEvent=null,m._swipeTimeout=setTimeout(function(){m._swipeLocked=!0},m.swipeDelay)}}class v{get scrollWidth(){return this.horizontalScrollBar?this.horizontalScrollBar.max:-1}set scrollWidth(d){d<0&&(d=0),this.horizontalScrollBar&&(this.horizontalScrollBar.max=d)}get scrollHeight(){return this.verticalScrollBar?this.verticalScrollBar.max:-1}set scrollHeight(d){d<0&&(d=0),this.verticalScrollBar&&(this.verticalScrollBar.max=d)}get scrollLeft(){return this.horizontalScrollBar?this.horizontalScrollBar.value:-1}set scrollLeft(d){d<0&&(d=0),this.horizontalScrollBar&&(this.horizontalScrollBar.value=d)}get scrollTop(){return this.verticalScrollBar?this.verticalScrollBar.value:-1}set scrollTop(d){d<0&&(d=0),this.verticalScrollBar&&(this.verticalScrollBar.value=d)}get vScrollBar(){return this.verticalScrollBar}get hScrollBar(){return this.horizontalScrollBar}constructor(d,m,h){const f=this;f.container=d,f.horizontalScrollBar=m,f.verticalScrollBar=h,f.disableSwipeScroll=!1,f.listen()}listen(){const d=this,m=l.isMobile,h=d.horizontalScrollBar,f=d.verticalScrollBar;let _,w,S,E,$,L,k,F;d.inputEvents=new b(d.container);const R=function(q){return{amplitude:0,delta:0,initialValue:0,min:0,max:q.max,previousValue:0,pointerPosition:0,targetValue:0,scrollBar:q,value:0,velocity:0}},z=R(h),G=R(f),j=function(){const q=d.container.touchVelocityCoefficient||50;L=Date.now(),k=L-E,E=L;const J=function(U){U.delta=U.value-U.previousValue,U.previousValue=U.value,U.velocity=q*U.delta/(1+k)*.8+.2*U.velocity};J(G),J(z)},X=function(q){return F.value=q>F.max?F.max:q<F.min?F.min:q,F.scrollBar.value=F.value,q>F.max?"max":q<F.min?"min":"value"};function ee(){let q,J;F.amplitude&&(d.container.$.fireEvent("kineticScroll"),q=Date.now()-E,J=-F.amplitude*Math.exp(-q/500),J>5||J<-5?(X(F.targetValue+J),cancelAnimationFrame(w),w=0,w=requestAnimationFrame(ee)):X(F.targetValue))}let ne;d.inputEvents.down(function(q){if(!m)return;const J=q.originalEvent.target,U=J&&J.closest?J.closest("smart-scroll-bar"):void 0;if(U===d.horizontalScrollBar||U===d.verticalScrollBar)return;S=!0,_=!1;const ae=function(ie,ce){ie.amplitude=0,ie.pointerPosition=ce,ie.previousValue=ie.value,ie.value=ie.scrollBar.value,ie.initialValue=ie.value,ie.max=ie.scrollBar.max};ae(G,q.clientY),ae(z,q.clientX),E=Date.now(),clearInterval($),$=setInterval(j,500)}),d.inputEvents.up(function(){if(!S)return!0;if(clearInterval($),d.disableSwipeScroll)return void(S=!1);const q=function(J){F=J,J.amplitude=.8*J.velocity,J.targetValue=Math.round(J.value+J.amplitude),E=Date.now(),cancelAnimationFrame(w),w=requestAnimationFrame(ee),J.velocity=0};G.velocity>10||G.velocity<-10?q(G):(z.velocity>10||z.velocity<-10)&&q(z),S=!1}),d.inputEvents.move(function(q){if(!S)return!0;if(d.disableSwipeScroll||(_&&(q.originalEvent.preventDefault(),q.originalEvent.stopPropagation()),z.visible=d.scrollWidth>0,G.visible=d.scrollHeight>0,!S||!z.visible&&!G.visible))return;const J=d.container.touchScrollRatio,U=d.container;let ae,ie;J&&("number"==typeof J?(ae=-J,ie=-J):"function"==typeof J&&(ae=J(G.max,U.offsetHeight),ie=J(z.max,U.offsetWidth))),G.ratio=ae||-G.max/U.offsetHeight,G.delta=(q.clientY-G.pointerPosition)*G.ratio,z.ratio=ie||-z.max/U.offsetWidth,z.delta=(q.clientX-z.pointerPosition)*z.ratio;let ce="value";const de=function(Q,pe,oe){return Q.delta>5||Q.delta<-5?(F=Q,ce=Q.initialValue+Q.delta>F.max?"max":Q.initialValue+Q.delta<F.min?"min":"value","min"===ce&&0===Q.initialValue||"max"===ce&&Q.initialValue===Q.max||!Q.visible||(d.container.$.fireEvent("kineticScroll"),X(Q.initialValue+Q.delta),j(),oe.originalEvent.preventDefault(),oe.originalEvent.stopPropagation(),_=!0,!1)):null};let me=de(G,0,q);if(null!==me)return me;{let Q=de(z,0,q);if(null!==Q)return Q}}),d.scrollTo=function(q,J){const U=!1===J?z:G;let ae=!1;E||(E=Date.now()),ne||(ne=Date.now()),Math.abs(Date.now()-ne)>375?E=Date.now():ae=!0,ne=Date.now(),U.value=U.scrollBar.value,U.delta=q-U.value,U.max=U.scrollBar.max,q<=U.min&&(q=U.min),q>=U.max&&(q=U.max),U.targetValue=q;const ie=q;let ce=U.value;U.velocity=100*U.delta/(1+U.max),U.from=ce;const de=function(Q){return U.value=Q>U.max?U.max:Q<U.min?U.min:Q,U.scrollBar.value=U.value,Q>U.max?"max":Q<U.min?"min":"value"},me=function(){let Q,pe=Date.now()-ne,oe=Math.min(1e3,Date.now()-E),le=U.velocity*Math.exp(oe/175);if(ae)(le<0&&U.value<=q||le>0&&U.value>=q)&&(le=0),(U.value+le<=U.min||U.value+le>=U.max)&&(le=0),le>.5||le<-.5?(de(U.value+le),cancelAnimationFrame(w),w=0,w=requestAnimationFrame(me)):de(U.targetValue);else{if(pe>=175)return cancelAnimationFrame(w),d.container.$.fireEvent("kineticScroll"),void(w=0);Q=D.Animation.Easings.easeInSine(pe,ce,ie-ce,175),de(Q),cancelAnimationFrame(w),w=0,w=requestAnimationFrame(me)}};cancelAnimationFrame(w),w=requestAnimationFrame(me)},d.inputEvents.listen()}unlisten(){const d=this;d.inputEvents&&d.inputEvents.unlisten(),delete d.inputEvents}}class y{constructor(d){this.events={},this.handlers={},this.element=d}hasClass(d){const m=this,h=d.split(" ");for(let f=0;f<h.length;f++)if(!m.element.classList.contains(h[f]))return!1;return!0}addClass(d){const m=this;if(m.hasClass(d))return;const h=d.split(" ");for(let f=0;f<h.length;f++)m.element.classList.add(h[f]);m.isNativeElement||c.observeElement(m.element)}removeClass(d){const m=this;if(0===arguments.length)return void m.element.removeAttribute("class");const h=d.split(" ");for(let f=0;f<h.length;f++)m.element.classList.remove(h[f]);""===m.element.className&&m.element.removeAttribute("class"),m.isNativeElement||c.observeElement(m.element)}get isCustomElement(){const d=this;return!!d.element.tagName.startsWith(n)||d.element instanceof window[n].BaseElement==1||"DIV"!==d.element.tagName&&"SPAN"!==d.element.tagName&&"BUTTON"!==d.element.tagName&&"INPUT"!==d.element.tagName&&"UL"!==d.element.tagName&&"LI"!==d.element.tagName&&document.createElement(d.element.nodeName)instanceof window[n].BaseElement==1}get isNativeElement(){return!this.isCustomElement}dispatch(d){const m=this,h=m.events[d.type];let f=!1;if(h.length>1)for(let _=0;_<h.length;_++){const w=h[_];if(w.namespace&&w.namespace.indexOf("_")>=0){f=!0;break}}f&&h.sort(function(_,w){let S=_.namespace,E=w.namespace;return S=-1===S.indexOf("_")?0:parseInt(S.substring(S.indexOf("_")+1)),E=-1===E.indexOf("_")?0:parseInt(E.substring(E.indexOf("_")+1)),S<E?-1:S>E?1:0});for(let _=0;_<h.length;_++){const w=h[_];if(d.namespace=w.namespace,d.context=w.context,d.defaultPrevented)break;const S=w.handler.apply(m.element,[d]);if(void 0!==S&&(d.result=S,!1===S)){d.preventDefault(),d.stopPropagation();break}}return d.result}fireEvent(d,m,h){h||(h={bubbles:!0,cancelable:!0,composed:null!==this.element.getRootNode().host}),h.detail=m||{};const _=new CustomEvent(d,h);return _.originalStopPropagation=_.stopPropagation,_.stopPropagation=function(){return _.isPropagationStopped=!0,_.originalStopPropagation()},this.dispatchEvent(_),_}get isPassiveSupported(){const d=this;if(void 0!==d.supportsPassive)return d.supportsPassive;d.supportsPassive=!1;try{let m=Object.defineProperty({},"passive",{get:function(){d.supportsPassive=!0}});window.addEventListener("testPassive",null,m),window.removeEventListener("testPassive",null,m)}catch(m){}return d.supportsPassive}dispatchEvent(d){const m=this,h=d.type,f=m.element.context,_=h.substring(0,1).toUpperCase()+h.substring(1);m.element.context=document,m.element["on"+_]?m.element["on"+_](d):m.element["on"+h.toLowerCase()]?m.element["on"+h.toLowerCase()](d):m.element.dispatchEvent(d),m.element.context=f}listen(d,m){const h=this,f=d.split("."),_=f.slice(1).join("."),w=f[0];h.events[w]||(h.events[w]=[]);const S={type:w,handler:m,context:h.element,namespace:_};g.indexOf(w)>=0&&(h.inputEvents||(h.inputEvents=new b(h.element)),h.inputEvents[w](function(E){h.dispatchEvent(E)}),h.inputEvents.boundEventTypes.push(w),h.inputEvents.listen(w)),0===h.events[w].length&&(h.handlers[w]=h.dispatch.bind(h),"wheel"===w?h.element.addEventListener("wheel",h.handlers[w],!!h.isPassiveSupported&&{passive:!1}):h.element.addEventListener(w,h.handlers[w],("touchmove"===w||"touchstart"===w||"touchend"===w)&&!!h.isPassiveSupported&&{passive:!1})),h.events[w].push(S)}unlisten(d){const m=this,h=d.split("."),f=h.slice(1).join("."),_=h[0];let w=m.events[_];if(m.inputEvents&&m.inputEvents.boundEventTypes.indexOf(_)>=0&&(m.inputEvents.boundEventTypes.splice(m.inputEvents.boundEventTypes.indexOf(_),1),0===m.inputEvents.boundEventTypes.length&&m.inputEvents.unlisten(_)),w){for(let S=0;S<w.length;S++){if(""!==f){let E=w.findIndex($=>$.namespace===f);w.splice(E,1);break}w=[]}0===w.length&&(m.element.removeEventListener(_,m.handlers[_]),m.events[_]=[],delete m.handlers[_])}}getAttributeValue(d,m){const h=this,f=h.element.getAttribute(d);if(h.isNativeElement)return h.deserialize(f,m);const _=h.element.propertyByAttributeName[d];return void 0===_.deserialize?h.deserialize(f,m,_.nullable):h.element[_.deserialize](f)}setAttributeValue(d,m,h){const f=this;let _,w=!1;if(f.isNativeElement){if(_=f.serialize(m,h),"boolean"===h&&["checked","selected","async","autofocus","autoplay","controls","defer","disabled","hidden","ismap","loop","multiple","open","readonly","required","scoped"].indexOf(d)>=0)return void(m?f.element.setAttribute(d,""):f.element.removeAttribute(d))}else{const S=f.element.propertyByAttributeName[d];w=!S||S.nullable,_=S&&S.serialize?f.element[S.serialize](m):f.serialize(m,h,w)}"array"!==h&&"object"!==h||"[]"!==_&&"{}"!==_?void 0===_?(f.element.removeAttribute(d),f.element.shadowRoot&&f.element.$.root&&f.element.$.root.removeAttribute(d)):(f.element.setAttribute(d,_),f.element.shadowRoot&&f.element.$.root&&f.element.$.root.setAttribute(d,_)):f.element.removeAttribute(d)}serialize(d,m,h){if(void 0===m&&(m=D.Types.getType(d)),void 0!==d&&(h||null!==d)){if(h&&null===d)return"null";if("string"===m)return d;if("boolean"===m||"bool"===m){if(!0===d||"true"===d||1===d||"1"===d)return"";if(!1===d||"false"===d||0===d||"0"===d)return}return"array"===m?JSON.stringify(d):["string","number","int","integer","float","date","any","function"].indexOf(m)>=0?d.toString():"object"===m?JSON.stringify(d):void 0}}deserialize(d,m,h){const f="null"===d;if(void 0!==d&&(!f||h)){if(f&&h)return null;if("boolean"===m||"bool"===m)return null!==d;if("number"===m||"float"===m)return"NaN"===d?NaN:"Infinity"===d?1/0:"-Infinity"===d?-1/0:parseFloat(d);if("int"===m||"integer"===m)return"NaN"===d?NaN:"Infinity"===d?1/0:"-Infinity"===d?-1/0:parseInt(d);if("string"===m||"any"===m)return d;if("date"===m)return new Date(d);if("function"===m){if("function"==typeof window[d])return window[d]}else if("array"===m||"object"===m)try{const _=JSON.parse(d);if(_)return _}catch(_){if(window[d]&&"object"==typeof window[d])return window[d];if("array"===m&&d.indexOf("[")>=0){if(d.indexOf("{")>=0){let w=d.replace(/{/gi,"").replace("[","").replace("]","").replace(/'/gi,"").replace(/"/gi,"").trim();w=w.split("},");for(let S=0;S<w.length;S++){let E={},$=w[S].trim().split(",");for(let L=0;L<$.length;L++){const k=$[L].split(":")[0].trim(),F=$[L].split(":")[1].trim();E[k]=F}w[S]=E}return w}return d.replace("[","").replace("]","").replace(/'/gi,"").replace(/"/gi,"").trim().split(",")}}}}}class x{static get Ripple(){return o}static get Easings(){return r}}class D{static get Types(){return i}static get Core(){return l}static get Animation(){return x}static get Scroll(){return v}static get InputEvents(){return b}static Extend(d){return new y(d)}static Assign(d,m){if(d.indexOf(".")>=0){const h=d.split(".");return D[h[0]]||(D[h[0]]={}),void(D[h[0]][h[1]]=m)}D[d]=m}}const T=D.Extend(document);let M=null;document.addEventListener("click",()=>{c.start(),M&&clearTimeout(M),M=setTimeout(()=>{c.stop()},1e4)}),document.addEventListener("mouseenter",()=>{c.start()}),document.addEventListener("mouseleave",()=>{c.stop()});let A=(()=>{class C{}return C.cache={},C})();class B extends HTMLElement{static get properties(){return{animation:{value:"advanced",type:"string",allowedValues:["none","simple","advanced"]},unfocusable:{value:!1,type:"boolean"},disabled:{value:!1,type:"boolean"},dataContext:{value:null,reflectToAttribute:!1,type:"any"},debugMode:{value:!0,type:"boolean",reflectToAttribute:!1},locale:{value:"en",type:"string",reflectToAttribute:!1},localizeFormatFunction:{value:void 0,type:"function",reflectToAttribute:!1},messages:{value:{en:{propertyUnknownName:"Invalid property name: '{{name}}'!",propertyUnknownType:"'{{name}}' property is with undefined 'type' member!",propertyInvalidValue:"Invalid '{{name}}' property value! Actual value: '{{actualValue}}', Expected value: '{{value}}'!",propertyInvalidValueType:"Invalid '{{name}}' property value type! Actual type: '{{actualType}}', Expected type: '{{type}}'!",methodInvalidValueType:"Invalid '{{name}}' method argument value type! Actual type: '{{actualType}}', Expected type: '{{type}}' for argument with index: '{{argumentIndex}}'!",methodInvalidArgumentsCount:"Invalid '{{name}}' method arguments count! Actual arguments count: '{{actualArgumentsCount}}', Expected at least: '{{argumentsCount}}' argument(s)!",methodInvalidReturnType:"Invalid '{{name}}' method return type! Actual type: '{{actualType}}', Expected type: '{{type}}'!",elementNotInDOM:"Element does not exist in DOM! Please, add the element to the DOM, before invoking a method.",moduleUndefined:"Module is undefined.",missingReference:"{{elementType}}: Missing reference to '{{files}}'.",htmlTemplateNotSuported:"{{elementType}}: Web Browser doesn't support HTMLTemplate elements.",invalidTemplate:"{{elementType}}: '{{property}}' property accepts a string that must match the id of an HTMLTemplate element from the DOM."}},reflectToAttribute:!1,inherit:!0,type:"object"},props:{value:null,reflectToAttribute:!1,isHierarchicalProperty:!0,type:"any"},readonly:{value:!1,type:"boolean"},renderMode:{value:"auto",type:"string",reflectToAttribute:!1,allowedValues:["auto","manual"]},rightToLeft:{value:!1,type:"boolean"},rethrowError:{value:!0,type:"boolean",reflectToAttribute:!1},theme:{value:window[n].Theme,type:"string"},visibility:{value:"visible",allowedValues:["visible","collapsed","hidden"],type:"string"},wait:{value:!1,type:"boolean"}}}getBindings(d,m){const h=this;let f=0,_={},w=(S=>{if(S instanceof HTMLElement)return h.parseAttributes(S);{let E=h.parseProperty(S.data?S.data.trim():null,"textContent",S);if(E)return h&&S.parentNode===h.$.content&&(E.value=""!==h.$.html?h.$.html:void 0,h.innerHTML=""),{textContent:E}}})(d);w&&(_.data=w),m||(_.mapping=[],m=_),d.getAttribute&&(_.nodeId=d.getAttribute("smart-id"),m&&w&&(m.mapping[_.nodeId]=w)),_.node=d,d.firstChild&&(_.children={});for(let S=d.firstChild;S;S=S.nextSibling)_.children[f++]=h.getBindings(S,m);return _}_addRemovePropertyBinding(d,m,h,f,_){if(!d||!m||!h)return;const w=this,S=w.bindings,E=h.getAttribute("smart-id"),$=d.indexOf("{{")>=0;let L=!1;(d=d.replace("{{","").replace("}}","").replace("[[","").replace("]]","")).indexOf("!")>=0&&(d=d.replace("!",""),L=!0);const k=w._properties[d],F={name:d,reflectToAttribute:k.reflectToAttribute,twoWay:$,type:k.type,not:L};if(_&&!f){const z={};z[d]={name:d,targetPropertyName:m,reflectToAttribute:k.reflectToAttribute,twoWay:$,type:k.type,not:L},S.mapping[E]=z}const R=function(z){for(let G in z){const j=z[G];if(j.nodeId===E){j.data||(j.data={}),f?(j.data[m]=null,delete j.data[m]):j.data[m]=F;break}if(j.children)R(j.children);else if(j.node&&j.node.children&&j.node===h.parentElement){const X=j.node;if(!X.firstChild)continue;j.children={};let ee=0;for(let ne=X.firstChild;ne;ne=ne.nextSibling)j.children[ee++]=w.getBindings(ne);R(j.children)}}};R(S.children),f?delete w.boundProperties[d]:w.boundProperties[d]=!0,w.updateBoundNodes(d)}addPropertyBinding(d,m,h,f){this._addRemovePropertyBinding(d,m,h,!1,f)}removePropertyBinding(d,m,h,f){this._addRemovePropertyBinding(d,m,h,!0,f)}parseAttributes(d){const m=this;let h;for(let f=0;f<d.attributes.length;f++){const _=d.attributes[f],w=_.name,S=_.value;A.cache["toCamelCase"+w]||(A.cache["toCamelCase"+w]=D.Core.toCamelCase(w));const E=A.cache["toCamelCase"+w];if(w.indexOf("(")>=0){let L=w.substring(1,w.length-1);if(m&&!m.dataContext){m.templateListeners[d.getAttribute("smart-id")+"."+L]=S,d.removeAttribute(w);continue}{h||(h={});const k=S.substring(0,S.indexOf("("));h[E]={isEvent:!0,name:L,value:k};continue}}let $=m.parseProperty(S,w,d);$&&(h||(h={}),h[E]=$)}return h}parseProperty(d,m){if(!d||!d.length)return;const h=this;let f,_=d.length,w=0,S=0,E=0,$=!0;for(;S<_;){w=d.indexOf("{{",S);let F=d.indexOf("[[",S),R="}}";if(F>=0&&(w<0||F<w)&&(w=F,$=!1,R="]]"),E=w<0?-1:d.indexOf(R,w+2),E<0)return;f=f||{};let z=d.slice(w+2,E).trim();f.name=z,S=E+2}const L=f.name,k=h?h._properties[L]:null;return f.twoWay=$,f.ready=!1,h&&(L.indexOf("::")>=0?h.boundProperties[L.substring(0,L.indexOf("::"))]=!0:h.boundProperties[L]=!0),k?(f.type=k.type,f.reflectToAttribute=k.reflectToAttribute):(f.type=["checked","selected","async","autofocus","autoplay","controls","defer","disabled","hidden","ismap","loop","multiple","open","readonly","required","scoped"].indexOf(m)>=0?"boolean":"string",f.reflectToAttribute=!0),f}updateTextNodes(){const d=this;d.updateTextNode(d.shadowRoot||d,d.bindings,d)}updateTextNode(d,m,h){const f=this;if(!m)return;let _=0;for(let w=d.firstChild;w&&m.children;w=w.nextSibling)f.updateTextNode(w,m.children[_++],h);if(m&&m.data)for(let w in m.data){const S=m.data[w],E=S.name;"textContent"===w&&S.twoWay&&!S.updating&&void 0!==S.value&&(h[E]=S.value)}}updateBoundProperty(d,m){m.updating||(m.updating=!0,this[d]=m.value,m.updating=!1)}updateBoundNodes(d){const m=this;if(m.updateBoundNode(m.shadowRoot||m,m.bindings,m,d),m.detachedChildren.length>0)for(let h=0;h<m.detachedChildren.length;h++){const f=m.detachedChildren[h],_=f.getAttribute("smart-id"),w=function(E){if(E.nodeId===_)return E;for(let $ in E.children){const L=E.children[$];if((L.getAttribute?L.getAttribute("smart-id"):"")===_)return E;if(L.children){const k=w(L);if(k)return k}}return null},S=w(m.bindings);if(S)m.updateBoundNode(f,S,m,d,!0);else if(f.getAttribute&&m.bindings.mapping){const E=m,$=m.bindings;if($)for(let L in $.mapping){const k=E.querySelector('[smart-id="'+L+'"]');k&&m.updateBoundData(k,$.mapping[L],E,d)}}}}updateBoundMappedNodes(){const d=this,m=d.bindings,h=d;if(m.mapping)for(let f in m.mapping){let _=h.querySelector('[smart-id="'+f+'"]');if(h.shadowRoot&&(_=h.querySelector('[id="'+f+'"]'),_||(_=h.shadowRoot.querySelector('[id="'+f+'"]')||h.shadowRoot.querySelector('[smart-id="'+f+'"]'))),_)d.updateBoundData(_,m.mapping[f],h);else if(h.getAttribute("aria-controls")){let w=document.getElementById(h.getAttribute("aria-controls"));!w&&h.shadowRoot&&(w=h.shadowRoot.getElementById(h.getAttribute("aria-controls"))),_=w.querySelector('[smart-id="'+f+'"]'),_&&d.updateBoundData(_,m.mapping[f],h)}}}updateBoundNode(d,m,h,f,_){const w=this;if(!m)return;let S=0;if(_){if(_&&!m.data)for(let $=d.firstChild;$&&m.children;$=$.nextSibling)if($.getAttribute){const L=$.getAttribute("smart-id"),k=function(){for(let F in m.children)if(m.children[F].nodeId===L)return m.children[F]}();w.updateBoundNode($,k,h,f),S++}else w.updateBoundNode($,m.children[S++],h,f,_)}else for(let $=d.firstChild;$&&m.children;$=$.nextSibling)if($.getAttribute){const L=$.getAttribute("smart-id"),k=function(){for(let F in m.children)if(m.children[F].nodeId===L)return m.children[F]}();w.updateBoundNode($,k,h,f),S++}else w.updateBoundNode($,m.children[S++],h,f);m&&m.data&&w.updateBoundData(d,m.data,h,f)}updateBoundData(d,m,h,f){const _=this;for(let w in m){const S=m[w];let E=S.name;if(!S.updating&&(E.indexOf("::")>=0&&(E=E.substring(0,E.indexOf("::"))),void 0===f||f===E)){if(E.indexOf("(")>=0){let $=E.substring(E.indexOf("("));const L=E.substring(0,E.indexOf("("));if($=$.substring(1,$.length-1),$=$.replace(/ /gi,""),$=$.split(","),$.length>0&&""!==$[0]){let k=[];for(let F=0;F<$.length;F++)k.push(h[$[F]]);S.value=h[L].apply(h,k)}else S.value=h[L]();S.type=typeof S.value}else S.value=h[E];if("innerHTML"===E){if(d[w].toString().trim()!==h[E].toString().trim()){if(window.smartBlazor&&d[w].indexOf("\x3c!--")>=0){(S.ready||h._properties[E].defaultValue!==S.value)&&(d[w]=S.value.toString());continue}(S.ready||h._properties[E].defaultValue!==S.value)&&(d[w]=S.value.toString().trim())}}else S.not?(d[w]=!S.value,S.targetPropertyName&&(d[S.targetPropertyName]=!S.value)):(d[w]=S.value,S.targetPropertyName&&(d[S.targetPropertyName]=S.value));if(d.$&&d.$.isNativeElement){A.cache["toDash"+w]||(A.cache["toDash"+w]=D.Core.toDash(w));const $=A.cache["toDash"+w],L=d.$.getAttributeValue($,S.type);!S.reflectToAttribute||L===S.value&&S.ready||d.$.setAttributeValue($,S.value,S.type),S.reflectToAttribute||d.$.setAttributeValue($,null,S.type)}if(!S.ready){if(d.$&&d.$.isCustomElement){A.cache["toDash"+w]||(A.cache["toDash"+w]=D.Core.toDash(w));const $=A.cache["toDash"+w];d._properties||(d._beforeCreatedProperties=d._properties=d.propertyByAttributeName=[]),d._properties[w]||(d._properties[w]={attributeName:$},d._beforeCreatedProperties&&(d._beforeCreatedProperties[w]=d._properties[w]),d.propertyByAttributeName[$]=d._properties[w]);const L=d._properties[w];L.isUpdating=!0,S.reflectToAttribute&&d.$.setAttributeValue(L.attributeName,S.not?!S.value:S.value,S.type),S.reflectToAttribute||d.$.setAttributeValue(L.attributeName,null,S.type),L.isUpdating=!1}if(S.twoWay){const $=function(L){if(S.value=L,d.$&&d.$.isNativeElement){A.cache["toDash"+w]||(A.cache["toDash"+w]=D.Core.toDash(w));const k=A.cache["toDash"+w],F=d.$.getAttributeValue(k,S.type);S.reflectToAttribute&&F!==S.value&&d.$.setAttributeValue(k,S.value,S.type),S.reflectToAttribute||d.$.setAttributeValue(k,null,S.type)}};if(S.name.indexOf("::")>=0){const L=S.name.indexOf("::"),k=S.name.substring(L+2);_["$"+d.getAttribute("smart-id")].listen(k,function(){$(d[w]);const F=S.name.substring(0,S.name.indexOf("::"));_.updateBoundProperty(F,S)})}if(d.$&&d.$.isCustomElement){d._properties[w]&&(d._properties[w].notify=!0),A.cache["toDash"+w]||(A.cache["toDash"+w]=D.Core.toDash(w));const L=A.cache["toDash"+w];_["$"+d.getAttribute("smart-id")].listen(L+"-changed",function(k){$(k.detail.value);const R=_.context;k.context!==document&&(_.context=_),_.updateBoundProperty(S.name,S),_.context=R})}}}S.ready=!0}}}static clearCache(){this.cache={}}addMessages(d,m){Object.assign(this.messages[d],m)}localize(d,m){const h=this;if(!h.messages||!h.messages[h.locale])return;let f=h.messages[h.locale][d];if(""===f)return"";if(!f){const w=h.messages.en;if(w)return w[d]||d}const _=f;for(let w in m){let S=m[w];f=f.replace(new RegExp("{{"+w+"}}","g"),S)}return h.localizeFormatFunction&&h.localizeFormatFunction(_,f,m),f}static get requires(){return{}}static get listeners(){return{"theme-changed":function(d){this.theme=d.detail.newValue}}}static get methods(){return{}}get classNamesMap(){return{animation:"smart-animate",rippleAnimation:"smart-ripple"}}get hasAnimation(){return"none"!==this.animation}get hasRippleAnimation(){return"none"!==this.animation&&"advanced"===this.animation}static get modules(){return window[n].Modules}get properties(){const d=this;return d._properties||(d._properties=[]),d._properties}get parents(){const d=this;let m=[],h=d.parentNode;for(;h&&9!==h.nodeType;)h instanceof HTMLElement==1&&m.push(h),h=h.parentNode;const f=d.getRootNode();return f.host&&(m=m.concat((w=>{let S=[w],E=w.parentNode;for(;E&&9!==E.nodeType;)E instanceof HTMLElement==1&&S.push(E),E=E.parentNode;return S})(f.host))),window[n].EnableShadowDOM&&d.isInShadowDOM&&d.shadowParent&&(m=m.concat(d.shadowParent.parents)),m}log(d){this._logger("log",d)}warn(d){this._logger("warn",d)}error(d){this._logger("error",d)}_logger(d,m){if(this.debugMode){const h=m instanceof Error?m.message:m.toString();console[d](h)}if(this.rethrowError&&"error"===d)throw m}get focused(){return this.contains(document.activeElement)}template(){return"<div></div>"}registered(){this.onRegistered&&this.onRegistered()}created(){const d=this;d.isReady=!1,d._initElement(d),d._setModuleState("created"),d.onCreated&&d.onCreated()}completed(){const d=this;d.isCompleted=!0,d._onCompleted&&d._onCompleted(),d.onCompleted&&d.onCompleted()}whenReady(d){const m=this;m.isCompleted?d():(m.whenReadyCallbacks||(m.whenReadyCallbacks=[]),m.whenReadyCallbacks.push(d))}whenRendered(d){const m=this;m.isRendered?d():(m.whenRenderedCallbacks||(m.whenRenderedCallbacks=[]),m.whenRenderedCallbacks.push(d))}addThemeClass(){const d=this;""!==d.theme&&d.classList.add("smart-"+d.theme)}addDefaultClass(){const d=this;d.classList.add(n.toLowerCase()+"-element"),d.classList.add(d.nodeName.toLowerCase())}_renderShadowRoot(){const d=this;if(d.shadowRoot){d.$.root.classList.add(d.nodeName.toLowerCase());for(let m=0;m<d.attributes.length;m++){const h=d.attributes[m];"class"===h.name||"id"===h.name||"style"===h.name||"tabindex"===h.name||h.name.indexOf("aria")>=0||d.$.root.setAttribute(h.name,h.value)}for(let m=0;m<d.classList.length;m++){const h=d.classList[m];"smart-element-init"!==h&&"smart-element"!==h&&"smart-hidden"!==h&&"smart-visibility-hidden"!==h&&d.$.root.classList.add(h)}}}render(){const d=this;if(!d.isRendered&&(d.isRendered=!0,d.isRendering=!1,d.context=document,d._renderShadowRoot(),d.whenRenderedCallbacks)){for(let m=0;m<d.whenRenderedCallbacks.length;m++)d.whenRenderedCallbacks[m]();d.whenRenderedCallbacks=[]}d.onRender&&d.onRender(),d.disabled&&d.setAttribute("aria-disabled",!0),d.readonly&&-1!==["checkbox","combobox","grid","gridcell","listbox","radiogroup","slider","spinbutton","textbox"].indexOf(d.getAttribute("role"))&&d.setAttribute("aria-readonly",!0)}ready(){const d=this;if(d._setId(),d.addThemeClass(),d.addDefaultClass(),"collapsed"===d.visibility?d.classList.add("smart-hidden"):"hidden"===d.visibility&&d.classList.add("smart-visibility-hidden"),d.dataContext&&d.applyDataContext(),d.onReady&&d.onReady(),d.shadowRoot&&Smart(d._selector)){if(Smart(d._selector).styleUrls){const m=Smart(d._selector).styleUrls;for(let h=0;h<m.length;h++)d.importStyle(m[h])}if(Smart(d._selector).styles){const m=document.createElement("style");m.innerHTML=Smart(d._selector).styles,d.shadowRoot.insertBefore(m,d.shadowRoot.firstChild)}}Smart(d._selector)&&Smart(d._selector).ready&&Smart(d._selector).ready()}_setId(){const d=this;if(!d.id){const m=d.elementName;d.id=m.slice(0,1).toLowerCase()+m.slice(1)+Math.floor(65536*(1+Math.random())).toString(16).substring(1)}}checkLicense(){"Evaluation"===window[n].License&&-1===window.location.hostname.indexOf("htmlelements")&&(this.logWatermark(),this.logLicense(),window[n].License="")}logWatermark(){const d=document.createElement("a");d.href="https://www.htmlelements.com/",d.innerHTML="https://www.htmlelements.com/",d.style.position="absolute",d.style.right="5px",d.style.bottom="5px",d.style.color="#fff",d.style.padding="20px",d.style.borderRadius="5px",d.style.background="#0C3D78",d.style.cursor="pointer",d.style.zIndex="999999",d.style.display="block",d.style.fontSize="24px",d.style.textDecoration="none",d.style.fontWeight="bold",d.style.opacity=0,d.style.transition="opacity .35s ease-in-out",d.id="watermark",document.getElementById("watermark")||setTimeout(()=>{document.getElementById("watermark")||(document.body.appendChild(d),setTimeout(()=>{d.style.opacity=1}),setTimeout(()=>{d.style.opacity=0,setTimeout(()=>{d.parentNode.removeChild(d)},350)},6e3))},1e3)}logLicense(){console.log("****************************************************************************************************************"),console.log("****************************************************************************************************************"),console.log("****************************************************************************************************************"),console.log("*jQWidgets License Key Not Found."),console.log("*This is an EVALUATION only Version, it is NOT Licensed for software projects intended for PRODUCTION."),console.log("*if you want to hide this message, please send an email to: sales@jqwidgets.com for a license."),console.log("****************************************************************************************************************"),console.log("****************************************************************************************************************"),console.log("****************************************************************************************************************")}get _selector(){const d=this;return d.id?"#"+d.id:d.classList.length>0?"."+d.classList[0]:""}applyDataContext(d){const m=this;let h="string"==typeof m.dataContext?window[m.dataContext]||document[m.dataContext]:m.dataContext;if(d&&(h=d,m.dataContext=d),h){if(!h._uid){h._uid=(Date.now().toString(36)+Math.random().toString(36).substr(2,5)).toUpperCase(),h._properties=[];for(let f in h){const _=h[f];"function"!=typeof _&&"_properties"!==f&&"_uid"!==f&&(h._properties[f]=_,Object.defineProperty(h,f,{configurable:!1,enumerable:!0,get:()=>h._properties[f],set(w){const S=h._properties[f];h._properties[f]=w;let E=[];E[f]={oldValue:S,value:w},E.length++,m.updatingDataContext=!0,T.fireEvent("dataContextPropertyChanged",{dataContext:h,properties:E},{bubbles:!1,cancelable:!0}),m.updatingDataContext=!1}}))}}if(m.dataContextProperties=m.parseAttributes(m),m.dataContextPropertiesMap={},m.dataContextListeners={},m.dataContextProperties){m.updatingDataContext=!0;for(let f in m.dataContextProperties){const _=m.dataContextProperties[f],w=_.name;if(_.propertyName=f,m.dataContextPropertiesMap[w]=f,A.cache["toDash"+f]||(A.cache["toDash"+f]=D.Core.toDash(w)),_.isEvent){const S=_.value;m.dataContextListeners[w]&&m.removeEventListener(w,m.dataContextListeners[w]),m.dataContextListeners[w]=function(E){h[S](E)},m.addEventListener(w,m.dataContextListeners[w])}if(w.indexOf(".")>=0){const S=w.split(".");let E=h[S[0]];for(let $=1;$<S.length;$++)E=E[S[$]];void 0!==E&&(m[f]=E)}else m[f]=h[w]}m.dataContextPropertyChangedHandler=function(f){const _=f.detail.properties;if(f.detail.dataContext===("string"==typeof m.dataContext?window[m.dataContext]||document[m.dataContext]:m.dataContext))for(let w in _){const S=m.dataContextPropertiesMap[w],E=m.context;S&&(m.context=document,m[S]=_[w].value,m.context=E)}},T.listen("dataContextPropertyChanged",m.dataContextPropertyChangedHandler),m.updatingDataContext=!1}else m.dataContextProperties=null}else{m.dataContextProperties=null;const f=function(){("string"==typeof m.dataContext?window[m.dataContext]||document[m.dataContext]:m.dataContext)&&(m.applyDataContext(),window.removeEventListener("load",f))};window.addEventListener("load",f)}}updateDataContextProperty(d){const m=this,h="string"==typeof m.dataContext?window[m.dataContext]||document[m.dataContext]:m.dataContext,f=m.dataContextProperties[d];if(!m.updatingDataContext&&f.twoWay){const _=f.name;if(_.indexOf(".")>=0){const w=_.split(".");let S=h[w[0]];for(let E=1;E<w.length;E++)S=S[w[E]];void 0!==S&&(S=m[d],u[h._uid]&&(u[h._uid][d]=S))}else h[_]=m[d],u[h._uid]&&(u[h._uid][d]=h[_])}}static get version(){return window[n].Version}initProperties(){const d=this;if(Smart(d._selector)&&Smart(d._selector).properties&&(d._initProperties=Smart(d._selector).properties),d.hasAttribute("props")&&!d.props?d._initProperties=window[d.getAttribute("props")]:d.props&&(d._initProperties=d.props),d._initProperties){const m=Object.keys(d._initProperties);for(let h=0;h<m.length;h++){const f=m[h],_=d._initProperties[f];if(_.constructor===Smart.ObservableArray||_ instanceof Smart.ObservableArray)d[f]=_.toArray();else if(_.constructor===Smart.DataAdapter||"smartDataAdapter"===_.constructor.name||"object"==typeof _&&Smart.DataAdapter&&_ instanceof Smart.DataAdapter||_ instanceof Smart.Observable||_.constructor===Smart.Observable||"object"!=typeof _||D.Types.isArray(_)||_ instanceof Date){if(void 0===d[f]&&-1===["onReady","onAttached","onDetached","onCreated","onCompleted"].indexOf(f)){const w=d.localize("propertyUnknownName",{name:f});d.log(w)}d[f]=_}else if("messages"!==f&&"dataSourceMap"!==f){if("object"==typeof _){const w=function(S,E){const $=Object.keys(S);for(let L=0;L<$.length;L++){const k=$[L],F=S[k],R=d._properties[E+"_"+k];if(R&&null===R.value){if(void 0===d[E+"_"+k]){const z=d.localize("propertyUnknownName",{name:E+"_"+k});d.log(z)}d[E+"_"+k]=F}else if("object"==typeof F&&!D.Types.isArray(F)&&F&&F.constructor!==Date)w(F,E+"_"+k);else{if(void 0===d[E+"_"+k]){const z=d.localize("propertyUnknownName",{name:E+"_"+k});d.log(z)}d[E+"_"+k]=F}}};w(_,f)}}else d[f]=_}}}setup(){const d=this;if(d.context=this,d.isReady&&!d.isCompleted)return;if(d.isReady)return d._setModuleState("attached"),d.isAttached=!0,d.attached(),d._handleListeners("listen"),void(d.context=document);d.ownerElement&&d.ownerElement.detachedChildren.indexOf(d)>=0&&d.ownerElement.detachedChildren.splice(d.ownerElement.detachedChildren.indexOf(d),1),d.isReady=!0,d.methods=d.getStaticMember("methods"),d.initProperties(),l.isMobile&&d.classList.add("smart-mobile");for(let f=0;f<d.attributes.length;f+=1){const _=d.propertyByAttributeName[d.attributes[f].name];if(!_)continue;let w=d.$.getAttributeValue(_.attributeName,_.type);const S=w?w.toString():"";if(!(S.indexOf("{{")>=0||S.indexOf("[[")>=0||"object"!==_.type&&"array"!==_.type&&(d.attributes[f].value.indexOf("{{")>=0||d.attributes[f].value.indexOf("[[")>=0)||void 0===w||_.value===w)){const E=D.Types.getType(w),$=d.attributes[f].value;if(("any"===_.type||"object"===_.type)&&""+d[_.name]===w||"array"===_.type&&d[_.name]&&JSON.stringify(d[_.name])===w)continue;if("number"===E&&isNaN(w)&&"NaN"!==$&&"Infinity"!==$&&"-Infinity"!==$){const L=d.localize("propertyInvalidValueType",{name:_.name,actualType:"string",type:_.type});d.log(L)}_.isUpdatingFromAttribute=!0,d[_.name]=w,_.isUpdatingFromAttribute=!1}}for(let f in d._properties){const _=d._properties[f];if("innerHTML"===f&&_.value===_.defaultValue&&(_.value=_.defaultValue=D.Core.html(d)),"boolean"!==_.type&&"bool"!==_.type||"false"===d.getAttribute(_.attributeName)&&(_.isUpdating=!0,d.setAttribute(_.attributeName,""),_.isUpdating=!1),_.defaultReflectToAttribute&&_.reflectToAttribute){if(_.defaultReflectToAttribute&&_.defaultReflectToAttributeConditions){let w=!0;for(let S=0;S<_.defaultReflectToAttributeConditions.length;S++){const E=_.defaultReflectToAttributeConditions[S];let $,L;for(let k in E)$=k,L=E[k];d._properties[$]&&d._properties[$].value!==L&&(w=!1)}if(!w)continue}_.isUpdating=!0,d.$.setAttributeValue(_.attributeName,_.value,_.type),_.isUpdating=!1}}const m=[];if(d.children.length>0)for(let f=0;f<d.children.length;f++){const _=d.children[f];D.Extend(_).isCustomElement&&m.push(_)}d.applyTemplate(),d.complete=function(){if(!d.templateBindingsReady){const _=w=>{w.templateBindingsReady||(w.templateBindingsReady=!0,w.updateTextNodes(),w.updateBoundNodes())};if(d.ownerElement){let w=d.ownerElement,S=[];for(;w;)S.push(w),w=w.ownerElement;for(let E=S.length-1;E>=0;E--)_(S[E]);_(d)}else _(d)}const f=()=>{if(d._setModuleState("ready"),d.ready(),"auto"!==d.renderMode||d.isRendered||d.render(),d.isAttached=!0,d._setModuleState("attached"),d.attached(),d._handleListeners("listen"),d.isHidden||0!==d.offsetWidth&&0!==d.offsetHeight||(d.isHidden=!0),d.completed(),d.isRendered&&(d.context=document),d.whenReadyCallbacks){for(let _=0;_<d.whenReadyCallbacks.length;_++)d.whenReadyCallbacks[_]();d.whenReadyCallbacks=[]}};if(d.wait)d.classList.add("smart-visibility-hidden");else if(d.classList.contains("smart-async"))requestAnimationFrame(()=>{f()});else{const _=d.shadowParent;d.shadowParent=null;const w=d.parents;if(d.shadowParent=_,0===w.length)return;const S=()=>{let E=d.ownerElement,$=[];for(;E;)$.push(E),E=E.ownerElement;for(let L=$.length-1;L>=0;L--)$[L].updateBoundMappedNodes()};d.ownerElement&&"HTML"!==w[w.length-1].nodeName?d.getRootNode().host?f():d.ownerElement&&"HTML"===d.ownerElement.parents[d.ownerElement.parents.length-1].nodeName?(S(),f()):d.checkIsInDomInterval=setInterval(()=>{const E=d.parents;"HTML"===E[E.length-1].nodeName&&(clearInterval(d.checkIsInDomInterval),S(),f())},100):f()}};let h=[].slice.call(d.querySelectorAll("[smart-id]")).concat(m);if(window[n].EnableShadowDOM&&!0!==d.isInShadowDOM&&(h=[].slice.call(d.shadowRoot.querySelectorAll("[smart-id]")).concat(m)),0===h.length)d.complete();else{d._completeListeners=0;for(let f=0;f<h.length;f++){const _=h[f];if(D.Extend(_).isCustomElement){const w=function(){d._completeListeners--,0===d._completeListeners&&(d.complete(),delete d._completeListeners)}.bind(d);_.isCompleted||_.isUtilityElement||!0===_.wait||(d._completeListeners++,_._onCompleted||(_.completeHandlers=[],_._onCompleted=function(){for(let S=0;S<_.completeHandlers.length;S++)_.completeHandlers[S]()}),_.completeHandlers.push(w))}}0===d._completeListeners&&d.complete()}}visibilityChangedHandler(){const d=this;d.isReady&&requestAnimationFrame(()=>{0===d.offsetWidth||0===d.offsetHeight?d.isHidden=!0:(d.isHidden=!1,d.$.fireEvent("resize",d,{bubbles:!1,cancelable:!0}))})}attributeChangedCallback(d,m,h){const f=this,_=f.propertyByAttributeName[d];if("class"!==d&&"style"!==d||f.visibilityChangedHandler(),_||f.attributeChanged(d,m,h),f.onAttributeChanged&&f.onAttributeChanged(d,m,h),!_||_&&_.isUpdating)return;let w=f.$.getAttributeValue(_.attributeName,_.type);void 0!==h&&f[_.name]!==w&&(_.isUpdatingFromAttribute=!0,f[_.name]=void 0!==w?w:f._properties[_.name].defaultValue,_.isUpdatingFromAttribute=!1)}attributeChanged(d,m,h){}set hasStyleObserver(d){const m=this;void 0===m._hasStyleObserver&&(m._hasStyleObserver=d),d?c.watch(m):c.unwatch(m)}get hasStyleObserver(){return void 0===this._hasStyleObserver||this._hasStyleObserver}attached(){const d=this;d.hasStyleObserver&&c.watch(d),d.onAttached&&d.onAttached(),Smart(d._selector)&&Smart(d._selector).attached&&Smart(d._selector).attached()}detached(){const d=this;d.hasStyleObserver&&c.unwatch(d),d._setModuleState("detached"),d.isAttached=!1,d.ownerElement&&-1===d.ownerElement.detachedChildren.indexOf(d)&&d.ownerElement.detachedChildren.push(d),d._handleListeners("unlisten"),d.onDetached&&d.onDetached(),Smart(d._selector)&&Smart(d._selector).detached&&Smart(d._selector).detached(),p&&p[d._selector]&&delete p[d._selector]}propertyChangedHandler(d,m,h){const f=this;m!==h&&("theme"===d&&(""!==m&&f.classList.remove("smart-"+m),""!==h&&f.classList.add("smart-"+h)),"visibility"===d?("collapsed"===m?f.classList.remove("smart-hidden"):"hidden"===m&&f.classList.remove("smart-visibility-hidden"),"collapsed"===h?f.classList.add("smart-hidden"):"hidden"===h&&f.classList.add("smart-visibility-hidden")):("disabled"===d||"readonly"===d)&&f._ariaPropertyChangedHandler(d,h),f.propertyChanged&&f.propertyChanged(d,m,h))}_ariaPropertyChangedHandler(d,m){const h=this;"readonly"===d&&-1===["checkbox","combobox","grid","gridcell","listbox","radiogroup","slider","spinbutton","textbox"].indexOf(h.getAttribute("role"))||(m?h.setAttribute("aria-"+d,!0):h.removeAttribute("aria-"+d))}_handleListeners(d){const m=this,h=m.tagName.toLowerCase(),f=_=>{for(let w in _){const S=w.split(".");let E=S[0],$=m.$;if(S[1])if(E=S[1],$=m["$"+S[0]],"document"===S[0]){let F=m.smartId;""===F&&(F=D.Core.toCamelCase(h)),E=E+"."+F}else m.smartId&&(E=E+"."+m.smartId+"_"+m.parents.length);else m.smartId&&(E=E+"."+m.smartId);const L=_[w],k=function(F){const R=m.context;m.context=m,m[L]&&m[L].apply(m,[F]),m.context=R};$&&$[d](E,k)}};f(m.getStaticMember("listeners")),f(m.templateListeners),Smart(m._selector)&&Smart(m._selector).properties&&f(Smart(m._selector).listeners)}parseTemplate(){const d=this,m=d.template(),h=document.createDocumentFragment();if(t[d.nodeName]&&!a)return t[d.nodeName].cloneNode(!0);if(""===m)return null;let f=document.createElement("div");h.appendChild(f),f.innerHTML=m;let _=f.childNodes;f.parentNode.removeChild(f);for(let w=0;w<_.length;w++)h.appendChild(_[w]);return t[d.nodeName]=h,a?h:h.cloneNode(!0)}applyTemplate(){const d=this,m=d.parseTemplate();if(!m||!m.hasChildNodes)return;const h=m.childNodes[0],f=(S,E)=>{d["$"+S]=E.$=D.Extend(E),d.$[S]=E,E.ownerElement=d};let _=h;if(h.getElementsByTagName("content").length>0){let S=h.getElementsByTagName("content")[0];_=S.parentNode,_.removeChild(S)}else{const S=m.querySelectorAll("[inner-h-t-m-l]");S&&S.length>0&&(_=S[0])}d.$.template="template"===h.nodeName.toLowerCase()?h:h.querySelector("template");let w=m.querySelectorAll("[id]");0===w.length&&(w=m.querySelectorAll("*")),f("root",h),f("content",_),d.$.html=d.innerHTML.toString().trim();for(let S=0;S<w.length;S+=1){let E=w[S];""===E.id&&(E.id="child"+S),f(E.id,E),E.setAttribute("smart-id",E.id),d.shadowRoot?E.shadowParent=d:E.removeAttribute("id")}for(d.bindings=!1!==d.hasTemplateBindings?d.getBindings(m):[],d.$root.addClass("smart-container");d.childNodes.length;)_.appendChild(d.firstChild);if(d.appendTemplate(m),d.$.template){const S=document.createElement("div");S.classList.add("smart-template-container"),d.$.templateContainer=S,d.$.template.parentNode.insertBefore(S,d.$.template),d.refreshTemplate()}}refreshTemplate(){const d=this;if(!d.$.templateContainer)return;d.templateDetached(d.$.templateContainer);const m=d.$.template.content.cloneNode(!0);d.templateBindings=d.getBindings(m),d.templateProperties=[];let h=document.createDocumentFragment();const f=function(_,w,S){for(let E in _){const $=_[E],L=$.node.cloneNode();w.appendChild(L);let k=[],F=!1;if($.data)for(let R in $.data){const z=$.data[R],G=z.name;if(d.templateProperties[G]=!0,L.removeAttribute(D.Core.toDash(R)),"*items"===R)k=d[G],F=!0;else if(G.indexOf("item.")>=0&&void 0!==S)z.value=S[G.substring("item.".length)],L[R]=z.value;else if(G.indexOf("item")>=0&&void 0!==S)z.value=S,L[R]=z.value;else if("*if"===R)if(G.indexOf("(")>=0){let j,X=G.substring(G.indexOf("("));const ee=G.substring(0,G.indexOf("("));if(X=X.substring(1,X.length-1),X=X.replace(/ /gi,""),X=X.split(","),X.length>0&&""!==X[0]){let ne=[];for(let q=0;q<X.length;q++)ne.push(d[X[q]]);j=d[ee].apply(d,ne)}else j=d[ee]();!1===j&&w.removeChild(L)}else d[G]||w.removeChild(L);else d.updateBoundNode(L,$,d,G)}if(k.length>0||F){for(let R=0;R<k.length;R++)$.children&&f($.children,L,k[R]);if("number"==typeof k)for(let R=0;R<k;R++)$.children&&f($.children,L,R)}else $.children&&f($.children,L,S)}};f(d.templateBindings.children,h),d.$.templateContainer.innerHTML="",d.$.templateContainer.appendChild(h),d.templateAttached(d.$.templateContainer)}templateAttached(){}templateDetached(){}appendTemplate(d){this.appendChild(d)}defineElementModules(){const d=this,m=d.constructor.prototype;if("BaseElement"===m.elementName){m.modules=d.constructor.modules;const h=m.modules;for(let f=0;f<h.length;f+=1)d.addModule(h[f])}else{const h=m.modules;if(!h)return;for(let f=0;f<h.length;f+=1){const _=h[f],w=_.prototype;d.defineElementMethods(w.methodNames,w),d.defineElementProperties(_.properties)}}}watch(d,m){this._watch=null!==d&&null!==m?{properties:d,propertyChangedCallback:m}:null}unwatch(){this._watch=null}set(d,m,h){const f=this,_=f.context;f.context=!0===h?document:f,f[d]=m,f.context=_}get(d){return this[d]}_setModuleState(d,m){const h=this,f="is"+d.substring(0,1).toUpperCase()+d.substring(1),_="on"+d.substring(0,1).toUpperCase()+d.substring(1);for(let w=0;w<h.modulesList.length;w++){const S=h.modulesList[w];S[f]=!0,S[d]&&S[d](m),S[_]&&S[_](m)}}addModule(d,m){const h=this;if(!d)return;const f=h.modules.slice(0),_=d.prototype,w=Object.getPrototypeOf(d);if(w.name&&w.name!==d.name&&h.addModule(w),!d.moduleName&&d.name&&(d.moduleName=d.name),-1===f.findIndex(S=>d.moduleName===S.moduleName)&&f.push(d),h.defineModule(d),h.defineElementMethods(_.methodNames,_),h.defineElementProperties(d.properties),h.constructor.prototype.modules=f,m)for(let S in Smart.Elements.tagNames){const E=Smart.Elements.tagNames[S];let $=Object.getPrototypeOf(E),L=[];for(;$!==HTMLElement;)L.push($.prototype),$=Object.getPrototypeOf($);L.indexOf(h)>=0&&E!==h&&E.prototype.addModule(d)}}defineModule(d){if(d.isDefined)return;d.prototype._initModule=function(_){this.ownerElement=_};const m=d.properties||{},h=Object.keys(m),f=Object.getOwnPropertyNames(d.prototype);d.prototype.methodNames=f;for(let _=0;_<h.length;_+=1){const w=h[_],S=m[w];Object.defineProperty(d.prototype,w,{configurable:!1,enumerable:!0,get(){return this.ownerElement?this.ownerElement[w]:S.value},set(E){this.ownerElement[w]=E}})}d.isDefined=!0}getStaticMember(d,m){const h=window[n][this.elementName],f=h[d];m||(m="");let _="array"===m?[]:"string"===m?"":{},w=Object.getPrototypeOf(h),S=[];for(;w[d];)S.push(w[d]),w=Object.getPrototypeOf(w);for(let E=S.length-1;E>=0;E--)if("array"===m)for(let $=0;$<S[E].length;$++)-1===_.indexOf(S[E][$])&&_.push(S[E][$]);else"string"===m?-1===_.indexOf(S[E])&&(_+=S[E]):_=D.Core.assign(_,S[E]);if("array"===m){for(let E=0;E<f.length;E++)-1===_.indexOf(f[E])&&_.push(f[E]);return _}return"string"===m?(-1===_.indexOf(f)&&(_+=f),_):D.Core.assign(_,f)}defineElementHierarchicalProperties(d,m){const f=[];(function(_){const w=Object.keys(_);for(let S=0;S<w.length;S++){const E=w[S];if("messages"===E)continue;const $=_[E],L=Object.keys($),k=L.indexOf("value")>=0&&L.indexOf("type")>=0&&"object"==typeof $.value;if("propertyObject"===$.type||k){const F=function(R,z){if(!R.value)return;const G=Object.keys(R.value);for(let j=0;j<G.length;j++){const X=G[j],ee=R.value[X],ne=z+"_"+X;if("object"!=typeof ee||null===ee)break;const q=Object.keys(ee);if(!(q.indexOf("value")>=0&&q.indexOf("type")>=0))break;if("array"!==R.type&&(R.isHierarchicalProperty=!0),ee.parentPropertyName=z,m){const J=m._properties[ne];if(R.value.hasOwnProperty(X)){if(J.isDefined)continue;delete R.value[X]}J.isDefined=!0,Object.defineProperty(R.value,X,{configurable:!1,enumerable:!0,get:()=>m._properties[ne].value,set(U){m.updateProperty(m,m._properties[ne],U)}})}f[ne]||(f[ne]=ee,f.length++),("propertyObject"===ee.type||"object"==typeof ee.value&&"array"!==ee.type)&&F(m?m._properties[ne]:ee,ne)}};F($,E)}}})(d),f.length>0&&!m&&this.defineElementProperties(f)}defineElement(){const d=this,m=d.constructor.prototype,h=d.getStaticMember("properties"),f=Object.getOwnPropertyNames(m);m.extendedProperties={},m.boundProperties={},m.templateListeners={},d.defineElementModules(),d.defineElementMethods(f,m),d.defineElementProperties(h),d.defineElementHierarchicalProperties(d.extendedProperties),m._initElement=function(){const _=this,w=m.extendedProperties,S=Object.keys(w),E=_.modules;_.$=D.Extend(_),_.$document=T,_.smartId=(Date.now().toString(36)+Math.random().toString(36).substr(2,5)).toUpperCase(),_.isCreated||(_.modulesList=[],_._properties=[],_._beforeCreatedProperties&&(_._properties=_._beforeCreatedProperties,delete _._beforeCreatedProperties),_.detachedChildren=[],_.propertyByAttributeName=[]);for(let $=0;$<E.length;$+=1){let L=new E[$];L._initModule(_),_.modulesList.push(L)}for(let $=0;$<S.length;$+=1){const L=S[$],k=w[L];let F=k.value;if(_._properties[L]){if(void 0!==_._properties[L].notify)continue;delete _._properties[L]}if(V&&"innerHTML"===L&&delete _[L],-1===window.navigator.userAgent.indexOf("PhantomJS")&&_.hasOwnProperty(L)&&(F=_[L],delete _[L]),"array"===k.type&&null!=F&&(F=F.slice(0)),"object"===k.type&&null!=F&&(F=Array.isArray(F)?F.slice(0):Object.assign({},F)),_._properties[L]={name:L,notify:k.notify,allowedValues:k.allowedValues,type:k.type,nullable:k.nullable,reflectToAttribute:k.reflectToAttribute,defaultReflectToAttribute:k.defaultReflectToAttribute,defaultReflectToAttributeConditions:k.defaultReflectToAttributeConditions,value:F,readOnly:k.readOnly,defaultValue:F,attributeName:k.attributeName,observer:k.observer,inherit:k.inherit,extend:k.extend,validator:k.validator},_.propertyByAttributeName[k.attributeName]=_._properties[L],!k.hasOwnProperty("type")){const z=_.localize("propertyUnknownType",{name:L});_.log(z)}if("any"===k.type||"propertyObject"===k.type)continue;const R=D.Types.getType(F);if(null!=F&&k.type!==R&&!k.validator){if("object"===k.type&&"array"===R||"number"===R&&["integer","int","float"].findIndex(G=>G===k.type)>=0)continue;const z=_.localize("propertyInvalidValueType",{name:L,actualType:R,type:k.type});_.log(z)}}_.defineElementHierarchicalProperties(_._properties,_),_.isCreated=!0},m.registered()}defineElementMethods(d,m){const h=this.constructor.prototype,f=function(w,S){const E=Array.prototype.slice.call(arguments,2);return function(){if(!this.isReady&&"localize"!==S&&"localize"!==S&&"cloneNode"!==S&&"importStyle"!==S&&"log"!==S&&"parseAttributes"!==S){const j=this.localize("elementNotInDOM");this.log(j)}let L=this;for(let j=0;j<this.modulesList.length;j++){let X=this.modulesList[j];if(S in X){L=X;break}}const k=this.context,F=E.concat(Array.prototype.slice.call(arguments));let R=null;const z=function(j,X){return j===X||"number"===j&&("int"===X||"integer"===X||"float"===X)||"bool"===j&&"boolean"===X||"boolean"===j&&"bool"===X||"object"===j&&"any"===X||void 0};if(this.methods){const j=this.methods[S];if(j){const X=j.split(":");R=X[X.length-1].trim();const ee=[],ne=j.substring(1+j.indexOf("("),j.lastIndexOf(")")).split(",");let q="";for(let U=0;U<ne.length;U++){const ae=ne[U];q+=ae,ae.indexOf(":")>=0?(ee.push(q),q=""):q+=","}let J=ee.length;for(let U=0;U<ee.length;U++){const ae=ee[U].trim().split(":"),ie=ae[0].split("=")[0].trim().indexOf("?")>=0,ce=ae[1].indexOf("?")>=0,de=ae[1].replace(/\?/gi,"").trim(),me=de.split("|");let Q=ae[0].split("=")[1];const pe=D.Types.getType(F[U]);if(void 0===F[U]&&Q){switch(Q=Q.trim(),de[0]){case"date":{let oe=Q.substring(Q.indexOf("(")+1,Q.lastIndexOf(")"));oe=oe.length>0?oe.split(",").map(le=>parseInt(le)):[],Q=0===oe.length?new Date:new Date(oe[0],oe[1],oe[2]);break}case"bool":case"boolean":Q="true"===Q||"1"===Q;break;case"int":case"integer":Q=parseInt(Q);break;case"float":case"number":Q=parseFloat(Q);break;case"any":case"object":Q=Q.indexOf("{")>=0?JSON.parse(Q):Q}F.push(Q)}else ie&&J--;if(de!==pe&&pe){let oe=!0;for(let le=0;le<me.length;le++)if(z(pe,me[le])){oe=!1;break}if(oe&&(null!==F[U]||!ce)){const le=this.localize("methodInvalidValueType",{name:S,actualType:pe,type:de,argumentIndex:U});this.log(le)}}if(F.length<J){const oe=this.localize("methodInvalidArgumentsCount",{name:S,actualArgumentsCount:F.length,argumentsCount:J});this.log(oe)}}}}this.context=this;const G=w.apply(L,F);if(R){const j=void 0===D.Types.getType(G)?"void":D.Types.getType(G);if(!z(j,R)){const X=this.localize("methodInvalidReturnType",{name:S,actualType:j,type:R});this.log(X)}}return this.context=k,G}},_=["constructor","ready","created","render","attached","detached","appendChild","insertBefore","removeChild","connect","disconnectedCallback","connectedCallback","attributeChangedCallback","propertyChangedHandler","enableShadowDOM","isInShadowDOM","addPropertyBindings"];for(let w in d){let S=d[w];S.startsWith("_")||void 0!==_.find(E=>E===S)||h.extendedProperties[S]||D.Types.isFunction(m[S])&&(h[S]=f(m[S],S))}}defineElementProperties(d){if(!d)return;const m=this,h=m.constructor.prototype,f=Object.keys(d),_=m.getStaticMember("properties");Object.assign(h.extendedProperties,d),m.updateProperty=function(w,S,E){const $=w;if(!S||S.readOnly)return;if(S.allowedValues){let F=!1;for(let R=0;R<S.allowedValues.length;R++)if(S.allowedValues[R]===E){F=!0;break}if(!F){const R=JSON.stringify(S.allowedValues).replace(/\[|\]/gi,"").replace(",",", ").replace(/"/gi,"'"),G=$.localize("propertyInvalidValue",{name:S.name,actualValue:"'"+E+"'",value:R});return void $.log(G)}}const L=S.name,k=$._properties[L].value;if(S.validator&&$[S.validator]){const F=$.context;$.context=$;const R=$[S.validator](k,E);void 0!==R&&(E=R),$.context=F}if(k!==E){if($.propertyChanging){const F=$.propertyChanging(L,k,E);if(!1===F||null===F)return}if(!S.hasOwnProperty("type")){const F=$.localize("propertyUnknownType",{name:L});$.log(F)}if("array"!==S.type||JSON.stringify(k)!==JSON.stringify(E)){if(null!=E&&"any"!==S.type&&"propertyObject"!==S.type&&S.type!==D.Types.getType(E)&&!S.validator||null===E&&!S.nullable){let F=!0;if("object"===S.type&&"array"===D.Types.getType(E)&&(F=!1),"number"===D.Types.getType(E)&&["integer","int","float"].findIndex(R=>R===S.type)>=0&&(F=!1),F){const R=$.localize("propertyInvalidValueType",{name:L,actualType:D.Types.getType(E),type:S.type});return void $.error(R)}}if(S.isUpdating=!0,S.isHierarchicalProperty){const F=function(R,z){const G=Object.keys(R);for(let j=0;j<G.length;j++){const X=G[j],ee=R[X];"object"==typeof ee&&!D.Types.isArray(ee)&&ee&&ee.constructor!==Date?F(ee,z+"_"+X):$[z+"_"+X]=ee}};F(E,L)}else $._properties[L].value=E;if(!S.isUpdatingFromAttribute&&S.reflectToAttribute&&$.$.setAttributeValue(S.attributeName,E,S.type),$.isReady&&(!$.ownerElement||$.ownerElement&&$.ownerElement.isReady)){if("wait"===L&&(E||!k||$.isCompleted||($.classList.remove("smart-visibility-hidden"),$.ownerElement&&$.ownerElement.updateBoundMappedNodes(),$.updateBoundMappedNodes(),$.complete())),"renderMode"===L)return;if($.context!==$&&!$.wait){const R=$.context;$.context=$,$.propertyChangedHandler(L,k,E),$.context=R,S.observer&&$[S.observer]&&($.context=$,$[S.observer](k,E),$.context=document),$._watch&&$._watch.properties.indexOf(L)>=0&&$._watch.propertyChangedCallback(L,k,E)}const F=S.notify||$.boundProperties[L];F&&($.$.fireEvent(S.attributeName+"-changed",{context:$.context,oldValue:k,value:$[L]}),$.boundProperties[L]&&$.updateBoundNodes(L)),F&&$.templateProperties&&$.templateProperties[L]&&$.refreshTemplate(),$.dataContextProperties&&("dataContext"===L?$.applyDataContext():$.dataContextProperties[L]&&$.updateDataContextProperty(L))}S.isUpdating=!1}}};for(let w=0;w<f.length;w+=1){const S=f[w],E=d[S],$=D.Core.toDash(S),L=E.type||"any",k=L.indexOf("?")>=0||"any"===L;k&&"any"!==L&&(E.type=L.substring(0,L.length-1)),E.nullable=k,E.attributeName=$.toLowerCase(),E.name=S,E.reflectToAttribute=void 0===E.reflectToAttribute||E.reflectToAttribute,E.inherit&&_[S]&&(E.value=_[S].value),E.extend&&_[S]&&D.Core.assign(E.value,_[S].value),h.hasOwnProperty(S)||Object.defineProperty(h,S,{configurable:!1,enumerable:!0,get(){if(this._properties[S])return this._properties[S].value},set(F){const R=this;R.updateProperty(R,R._properties[S],F)}})}}}let O=[],N=[],P=[],V=!1;const Y=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);Y&&parseInt(Y[2],10)<=50&&(V=!0);class K{static register(d,m){const h=m.prototype;let f=l.toCamelCase(d).replace(/[a-z]+/,""),_=m.version||window[n].Version;if(window.customElements.get(d)&&window.customElements.get(d).version===_)return;let w=d;for(_=_.split(".");window.customElements.get(d);)d=w+"-"+_.join("."),_[2]=parseInt(_[2])+1;if(!O[d]){if(d.startsWith(n.toLowerCase()))O[d]=window[n][f]=window[n.toLowerCase()+f]=m;else{let S=d.split("-")[0];S=S.substring(0,1).toUpperCase()+S.substring(1),window[n][S]||(window[n][S]={}),O[d]=window[n][S][f]=window[S.toLowerCase()+f]=m,window[n][f]&&(f=l.toCamelCase(d)),window[n][f]=m}h.elementName=f,h.defineElement(),N[d]&&N[d](h),window.customElements.define(d,m)}}static registerElements(){const d=this;if(d.toRegister){d.isRegistering=!0;for(let m=0;m<d.toRegister.length;m++){const h=d.toRegister[m];d.register(h.tagName,h.element)}d.isRegistering=!1}}static get(d){if(O[d])return O[d]}static whenRegistered(d,m){if(!d)throw new Error("Syntax Error: Invalid tag name");const h=N[d],f=this.get(d),_=f?f.modules.length:3;try{h||f?!h&&f?(m(f.prototype),N[d]=void 0):h&&!f?N[d]=function(w){h(w),m(w)}:h&&f&&(f.proto&&(h(f.proto),m(f.proto)),N[d]=void 0):N[d]=function(w){try{m(w)}catch(S){const E=S instanceof Error?S.message:S.toString();console.log(E)}}}catch(w){const S=w instanceof Error?w.message:w.toString();console.log(S)}if(f&&_!==f.prototype.modules.length){const w=document.querySelectorAll(d);for(let S=0;S<w.length;S++){const E=w[S];E.isCreated&&E._initElement()}}}}K.lazyRegister=!1,K.tagNames=[];class W{constructor(){const d=this;d.name="observableArray",d.observables=arguments.length<3?null:arguments[2];const m=new Proxy(d,{deleteProperty:function(h,f){return delete h[f],!0},apply:function(h,f,_){return h.apply(f,_)},get:function(h,f){return h[f]||isNaN(parseInt(f))?h[f]:d.getItem(parseInt(f))},set:function(h,f,_){return h[f]||isNaN(parseInt(f))?(h[f]=_,!0):(d.setItem(parseInt(f),_),!0)}});if(d._addArgs={eventName:"change",object:m,action:"add",index:null,removed:new Array,addedCount:1},d._removeArgs={eventName:"change",object:m,action:"remove",index:null,removed:null,addedCount:0},arguments.length>=1&&Array.isArray(arguments[0])){d._array=[];const h=arguments[0];for(let f=0,_=h.length;f<_;f++){const w=d._getItem(d._array.length,h[f]);d._array.push(w)}}else d._array=Array.apply(null,arguments);return 2===arguments.length&&(d.notifyFn=arguments[1]),m}get canNotify(){const d=this;return void 0===d._canNotify&&(d._canNotify=!0),d._canNotify}set canNotify(d){this._canNotify=d}_notify(d){const m=this;m.canNotify&&m.notifyFn&&m.notifyFn(d)}notify(d){d&&(this.notifyFn=d)}toArray(){return this._array}_getItem(d,m){const h=this;return"string"==typeof m||"number"==typeof m||void 0===m?m:new Proxy(m,{deleteProperty:function(f,_){return delete f[_],!0},set:function(f,_,w){const S=f[_];return f[_]=w,!h._canNotify||!1===f.canNotify||(h.observables&&!h.observables[_]||h._notify({eventName:"change",object:h,target:f,action:"update",index:d,path:d+"."+_,oldValue:S,newValue:w,propertyName:_}),!0)}})}getItem(d){return this._array[d]}setItem(d,m){const h=this,f=h._array[d];h._array[d]=h._getItem(d,m),h._notify({eventName:"change",object:h._array,action:"update",index:d,removed:[f],addedCount:1})}get length(){return this._array.length}set length(d){const m=this;i.isNumber(d)&&m._array&&m._array.length!==d&&m.splice(d,m._array.length-d)}toString(){return this._array.toString()}toLocaleString(){return this._array.toLocaleString()}concat(){const d=this;d._addArgs.index=d._array.length;const m=d._array.concat.apply(d._array,arguments);return new Smart.ObservableArray(m)}join(d){return this._array.join(d)}pop(){const d=this;d._removeArgs.index=d._array.length-1,delete d[d._array.length-1];const m=d._array.pop();return d._removeArgs.removed=[m],d._notify(d._removeArgs),d._notifyLengthChange(),m}push(){const d=this;if(d._addArgs.index=d._array.length,1===arguments.length&&Array.isArray(arguments[0])){const m=arguments[0];for(let h=0,f=m.length;h<f;h++){const _=d._getItem(d._array.length,m[h]);d._array.push(_)}}else{const m=d._getItem(d._addArgs.index,arguments[0]);d._array.push.apply(d._array,[m])}return d._addArgs.addedCount=d._array.length-d._addArgs.index,d._notify(d._addArgs),d._notifyLengthChange(),d._array.length}_notifyLengthChange(){const d=this;if(!d.canNotify)return;const m=d._createPropertyChangeData("length",d._array.length);d._notify(m)}_createPropertyChangeData(d,m,h){return{eventName:"change",object:this,action:d,value:m,oldValue:h}}reverse(){return this._array.reverse()}shift(){const d=this,m=d._array.shift();return d._removeArgs.index=0,d._removeArgs.removed=[m],d._notify(d._removeArgs),d._notifyLengthChange(),m}slice(d,m){return this._array.slice(d,m)}sort(d){return this._array.sort(d)}splice(d,m,h){const f=this,_=f._array.length;let w;if(h&&h.length)for(let S=0;S<h.length;S++)w=f._array.splice(d+S,m,h[S]);else w=f._array.splice.apply(f._array,arguments);if(h){let S=f.canNotify;if(f.canNotify=!1,h.length)for(let E=0;E<h.length;E++)f.setItem(d+E,h[E]);else f.setItem(d,h);f.canNotify=S,f._notify({eventName:"change",object:this,action:"add",index:d,added:w,addedCount:f._array.length>_?f._array.length-_:0})}else f._notify({eventName:"change",object:this,action:"remove",index:d,removed:w,addedCount:f._array.length>_?f._array.length-_:0});return f._array.length!==_&&f._notifyLengthChange(),w}unshift(){const d=this,m=d._array.length,h=d._array.unshift.apply(d._array,arguments);return d._addArgs.index=0,d._addArgs.addedCount=h-m,d._notify(this._addArgs),d._notifyLengthChange(),h}indexOf(d,m){const h=this;for(let f=m||0,_=h._array.length;f<_;f++)if(h._array[f]===d)return f;return-1}lastIndexOf(d,m){const h=this;for(let f=m||h._array.length-1;f>=0;f--)if(h._array[f]===d)return f;return-1}find(d,m){return this._array.find(d,m)}findIndex(d,m){return this._array.findIndex(d,m)}every(d,m){return this._array.every(d,m)}some(d,m){return this._array.some(d,m)}forEach(d,m){this._array.forEach(d,m)}map(d,m){return this._array.map(d,m)}filter(d,m){return this._array.filter(d,m)}reduce(d,m){return void 0!==m?this._array.reduce(d,m):this._array.reduce(d)}reduceRight(d,m){return void 0!==m?this._array.reduceRight(d,m):this._array.reduceRight(d)}move(d,m){this.splice(m,0,this.splice(d,1)[0])}}let Z={};window[n]&&(Z=window[n]),window[n]=function(C,d){let m=C;if(C){if(C.indexOf("#")>=0||C.indexOf(".")>=0)return p[C]?p[C]:d?(p[C]=new d,function(h,f){const _=f.properties;f._properties=[];const w=function(E,$){const L=Object.keys(E);for(let k=0;k<L.length;k++){const F=L[k],R=E[F];f._properties[$+F]=R,Array.isArray(R)?f._properties[$+F]=new W(R,function(z){const G=F+"."+z.path,j=z.newValue,X=document.querySelector(h);if(X){const ee=G.split(".");let ne=X;for(let q=0;q<ee.length;q++)ne=ne[ee[q]];ne=j}}):(Object.defineProperty(E,F,{configurable:!1,enumerable:!0,get:()=>f._properties[$+F],set(z){f._properties[$+F]=z}}),R&&"DataAdapter"===R.constructor.name||R&&"object"==typeof R&&Smart.DataAdapter&&R instanceof Smart.DataAdapter||"object"==typeof R&&R&&Object.keys(R).length>0&&w(R,$+F+"."))}};w(_,""),Object.defineProperty(f,"properties",{configurable:!1,enumerable:!0,get:()=>_});const S=document.querySelector(h);if(S&&S.isReady)for(let E in _)S[E]=_[E];else if(S){S.props={};for(let E in _)S.props[E]=_[E]}}(C,p[C]),p[C]):void 0;if(d){if(K.tagNames[C]=d,K.lazyRegister){K.toRegister||(K.toRegister=[]);const h=l.toCamelCase(m).replace(/[a-z]+/,"");return window[n][h]=d,void K.toRegister.push({tagName:m,element:d})}K.register(m,d)}}},window.addEventListener("load",function(){const C=window[n].Elements.tagNames;let d=[];for(let m in C){const h=C[m];let f=document.querySelectorAll("["+m+"]");for(let w=0;w<f.length;w++){const S=f[w];S instanceof HTMLDivElement&&(S.__proto__=h.prototype,S.created(),S.connectedCallback()),S.classList.add("smart-element-ready")}let _=h.name;"Item"===_&&(_="ListItem"),f=document.querySelectorAll('[is="'+n.toLocaleLowerCase()+_+'"]');for(let w=0;w<f.length;w++)d.push(f[w])}if(d.length>0){const m=h=>{let f=[],_=h.parentNode;for(;_&&9!==_.nodeType;)_ instanceof HTMLElement==1&&f.push(_),_=_.parentNode;return f};d.sort(function(h,f){let _=m(h).length,w=m(f).length;return _<w?1:_>w?-1:0});for(let h=0;h<d.length;h++){const f=d[h],_=f.getAttribute("is");let w;w="smartItem"===_?new window.smartListItem(f):new window[_](f),w.removeAttribute("is")}}});const te=function(){if("complete"===document.readyState&&"manual"!==window[n].RenderMode){P.sort(function(C,d){let m=C.element.parents.length,h=d.element.parents.length;return m<h?-1:m>h?1:0});for(let C=0;C<P.length;C++)window[n].RenderMode="",P[C].element.isLoading=!1,P[C].callback(),window[n].RenderMode="";P=[],document.removeEventListener("readystatechange",te)}};Object.assign(window[n],{Elements:K,Modules:[],BaseElement:class extends B{static get observedAttributes(){let C=this,d=["external-style"];for(let m in C.prototype.extendedProperties)d.push(C.prototype.extendedProperties[m].attributeName);return d}static get styleUrls(){return[]}static get styles(){return""}get styleUrl(){return this._styleUrl}set styleUrl(C){this._styleUrl=C}get isInShadowDOM(){const C=this,d=C.getRootNode();return!C.hasAttribute("smart-blazor")&&d!==document&&d!==C}getShadowRootOrBody(){return this.isInShadowDOM?this.getRootNode().host.shadowRoot:document.body}get enableShadowDOM(){return window[n].EnableShadowDOM}importStyle(C,d){this._importStyle(C,d)}_importStyle(C,d){const m=this;if(!m.shadowRoot||!C)return;const h=w=>{const S=m.shadowRoot.children;for(let $=0;$<S.length;$++){const L=S[$];if(L instanceof HTMLLinkElement&&L.href===w)return d&&d(),null}const E=document.createElement("link");return E.rel="stylesheet",E.type="text/css",E.href=w,E.onload=d,E},f=(()=>{const w=m.shadowRoot.children;let S=null;for(let E=0;E<w.length;E++){const $=w[E];$ instanceof HTMLLinkElement&&(S=$)}return S})(),_=(w,S)=>{S.parentNode.insertBefore(w,S.nextSibling)};if(Array.isArray(C)){const w=document.createDocumentFragment();for(let S=0;S<C.length;S++){const E=h(C[S]);E&&w.appendChild(E)}f?_(w,f):m.shadowRoot.insertBefore(w,m.shadowRoot.firstChild)}else{const w=h(C);if(!w)return;f?_(w,f):m.shadowRoot.insertBefore(w,m.shadowRoot.firstChild)}}attributeChanged(C,d,m){"style-url"===C&&(this.styleUrl=m)}attributeChangedCallback(C,d,m){this.isReady&&super.attributeChangedCallback(C,d,m)}constructor(C,d){super();const m=this;if(C){d&&(m._initProperties=d);const h=f=>{if("string"==typeof f?document.querySelector(f):f){const _="string"==typeof f?document.querySelector(f):f;if(_ instanceof HTMLDivElement){const w=document.createElement(m.tagName);for(let S of _.attributes)w.setAttribute(S.name,_.getAttribute(S.name));for(;_.childNodes.length;)w.appendChild(_.firstChild);return"string"==typeof f&&(w.id=f.substring(1)),w._initProperties=d,_.parentNode&&_.parentNode.replaceChild(w,_),w}if(d){const w=_.context;if(_._initProperties=d,_.isReady){_.context=_;const S={},E={};for(let $ in d)S[$]=_[$],E[$]=d[$];Object.getOwnPropertyNames(d).length>0&&(_.initProperties(),_.propertyChangedHandler(d,S,E)),_.context=w}}return _}};if("string"==typeof C){const f=document.querySelectorAll(C),_=[];if(f.length>1){for(let w=0;w<f.length;w++){const S=h(f[w]);_.push(S)}return _}}else if(C&&C.length>0){const f=C;if(f.length>1){for(let _=0;_<f.length;_++){const w=h(f[_]);O.push(w)}return O}}return h(C)}m._styleUrl="",m.isUtilityElement||m.created()}_getRootShadowParent(){let C=this.shadowParent;for(;C;){if(!C.shadowParent)return C;C=C.shadowParent}return C||this.shadowParent}_getStyleUrl(C){let d=D.Core.getScriptLocation()+window[n].StyleBaseUrl+C;return this.shadowParent&&(d=d.replace("scoped/","")),d}_getStyleUrls(){const C=this;C.nodeName.startsWith(n);const d=C.getStaticMember("styleUrls","array"),m=[];for(let h=0;h<d.length;h++){const _=C._getStyleUrl(d[h]);m.push(_)}return m}_setupShadowRoot(){const C=this;C.classList.add("smart-element-init");const d=m=>{m.$.root&&(m.$.root.classList.add(n.toLowerCase()+"-element"),m.$.root.classList.add(C.nodeName.toLowerCase())),m.setup(),m.classList.remove("smart-element-init")};if(document.adoptedStyleSheets)if(window[n].AdoptedStyleSheets)window[n].AdoptedStyleSheetsLoaded?(C.shadowRoot.adoptedStyleSheets=window[n].AdoptedStyleSheets,d(C)):(C.shadowRoot.adoptedStyleSheets=window[n].AdoptedStyleSheets,window[n].AdoptedStyleSheetsLoadedQueue||(window[n].AdoptedStyleSheetsLoadedQueue=[]),window[n].AdoptedStyleSheetsLoadedQueue.push(C));else{const m=new CSSStyleSheet;let h=D.Core.getScriptLocation()+"/styles/smart.default.css";m.replace('@import url("'+h+'")').then(()=>{if(d(C),window[n].AdoptedStyleSheetsLoaded=!0,window[n].AdoptedStyleSheetsLoadedQueue){const f=window[n].AdoptedStyleSheetsLoadedQueue;for(let _=0;_<f.length;_++)d(f[_]);delete window[n].AdoptedStyleSheetsLoadedQueue}}).catch(f=>{console.error("Failed to load:",f)}),window[n].AdoptedStyleSheets=[m],document.adoptedStyleSheets=[m],C.shadowRoot.adoptedStyleSheets=window[n].AdoptedStyleSheets}}connect(){const C=this;window[n].EnableShadowDOM&&!C.shadowRoot&&!0!==C.isInShadowDOM&&(C.attachShadow({mode:"open"}),C.shadowRoot&&C.$.root&&(C.shadowRoot.appendChild(C.$.root),C.$.root.classList.add(C.nodeName.toLowerCase()))),C.shadowRoot||C.shadowParent?C.shadowRoot?C._setupShadowRoot():(C.shadowParent&&window,C.setup()):C.setup()}connectedCallback(){const C=this;if(C.isLoading||C.isUtilityElement)return;C.classList.add("smart-element-init");const d=function(){C.classList.remove("smart-element-init")};if("complete"===document.readyState&&(void 0===window[n].isAngular&&(window[n].isAngular=null!==document.body.querySelector("[ng-version]")),window[n].isAngular))for(let m=0;m<C.parents.length&&!C.parents[m].nodeName.toLowerCase().startsWith(n.toLowerCase()+"-");m++)if(C.parents[m].hasAttribute("ng-version")&&!C.classList.contains("smart-angular")){window[n].RenderMode="manual";break}if("complete"===document.readyState&&"manual"!==window[n].RenderMode){const m=C.parents;m.length&&"HTML"===m[m.length-1].nodeName||C.getRootNode().host?(C.checkIsInDomTimer&&clearInterval(C.checkIsInDomTimer),d(),C.connect()):(C.checkIsInDomTimer&&clearInterval(C.checkIsInDomTimer),m.length>0&&(C.checkIsInDomTimer=setInterval(()=>{const h=C.parents;0===h.length&&clearInterval(C.checkIsInDomTimer),h.length>0&&"HTML"===h[h.length-1].nodeName&&(clearInterval(C.checkIsInDomTimer),d(),C.connect())},100)))}else C.isLoading=!0,P.push({element:this,callback:function(){this.isReady||(d(),this.connect())}.bind(C)})}disconnectedCallback(){const C=this;C.isAttached?(C.shadowParent=null,C.detached()):C._resetShadowParent()}adoptedCallback(){this.setup()}appendTemplate(C){const d=this;d.shadowRoot?d.shadowRoot.appendChild(C):d.appendChild(C)}_resetShadowParent(){const C=this;if(!window[n].EnableShadowDOM||null===C.shadowParent)return;const d=[];let m=C.parentNode;for(;m&&9!==m.nodeType;){if(m instanceof HTMLElement==1)d.push(m);else if(11===m.nodeType&&m.host){m=m.host;continue}m=m.parentNode}for(let h=0;h<d.length;h++)if(d[h]===C.shadowParent)return;d.length>0&&"HTML"===d[d.length-1].nodeName&&(C.shadowParent=null)}},Utilities:D,Import:function(C,d){let m=0;const h=function(f,_){return new Promise(w=>{const S=document.createElement("script");S.src=f,S.onload=w;for(let E=0;E<document.head.children.length;E++){const $=document.head.children[E];if($.src&&$.src.toString().indexOf(_)>=0)return void w()}document.head.appendChild(S)})};return new Promise(f=>{const _=D.Core.getScriptLocation(),w=function(S){C[S]&&h(_+"/"+C[S],C[S]).then(function(){m++,m===C.length&&f(),w(S+1)})};if(d)for(let S=0;S<C.length;S++)h(_+"/"+C[S],C[S]).then(function(){m++,m===C.length&&f()});else w(0)})},ObservableArray:W,Observable:class{constructor(C,d){const m=this;var h;return this.name="observable",C&&Object.assign(m,C),h=C,Object.getOwnPropertyNames(Object.getPrototypeOf(h)).forEach(f=>"constructor"===f||!!f.startsWith("_")||void(m[f]=h[f])),new Proxy(m,{deleteProperty:function(f,_){return delete f[_],!0},get:function(f,_){return f[_]},set:function(f,_,w){const S=f[_];return S===w||(f[_]=w,!("notifyFn"!==_&&!_.startsWith("_")&&"canNotify"!==_&&(!d||-1!==d.indexOf(_))&&m.canNotify&&(m._notify({target:f,propertyName:_,oldValue:S,newValue:w}),0)))}})}get canNotify(){const C=this;return void 0===C._canNotify&&(C._canNotify=!0),C._canNotify}set canNotify(C){this._canNotify=C}_notify(C){const d=this;if(d.canNotify&&d.notifyFn)for(let m=0;m<d.notifyFn.length;m++)d.notifyFn[m](C)}notify(C){const d=this;C&&(d.notifyFn||(d.notifyFn=[]),d.notifyFn.push(C))}},Component:class{constructor(C,d){const m=this.name;let h=null;return C?h=new window[m](C,d):(h=new window[m],h._initProperties=d),this._element=h,h}get name(){return"Component"}get element(){return this._element}},Theme:Z.Theme||"",EnableShadowDOM:Z.ShadowDom||!1,BaseUrl:"./",StyleBaseUrl:"/styles/default/",Version:e,Templates:t,RenderMode:Z.RenderMode||"auto",Render:function(){const C=()=>{window[n].RenderMode="",te()};"complete"===document.readyState?C():(window.removeEventListener("load",C),window.addEventListener("load",C))},Data:p,Mode:Z.Mode||"production",License:"Evaluation"});let re=window[n].Theme;"manual"!==window[n].RenderMode&&document.addEventListener("readystatechange",te),Object.defineProperty(window[n],"Theme",{configurable:!1,enumerable:!0,get:()=>re,set(C){const d=re;re=C,T.fireEvent("theme-changed",{oldValue:d,newValue:C},{bubbles:!0,cancelable:!0})}}),window[n]("smart-base-element",window[n].BaseElement),window[n]("smart-content-element",class extends window[n].BaseElement{static get properties(){return{content:{type:"any",reflectToAttribute:!1},innerHTML:{type:"string",reflectToAttribute:!1}}}template(){return"<div inner-h-t-m-l='[[innerHTML]]'></div>"}ready(){super.ready(),this.applyContent()}refresh(){}clearContent(){const C=this;for(;C.$.content.firstChild;)C.$.content.removeChild(C.$.content.firstChild)}applyContent(){const C=this;if(void 0===C.content)return void(C.content=C.$.content);if(""===C.content||null===C.content)return void C.clearContent();if(C.content instanceof HTMLElement)return C.clearContent(),void C.$.content.appendChild(C.content);const d=document.createDocumentFragment();let m=document.createElement("div");d.appendChild(m),C.content instanceof HTMLElement?m.appendChild(C.content):m.innerHTML=C.content;let h=Array.from(m.childNodes);m.parentNode.removeChild(m);for(let f=0;f<h.length;f++)d.appendChild(h[f]);C.clearContent(),C.$.content.appendChild(d)}propertyChangedHandler(C,d,m){super.propertyChangedHandler(C,d,m);const h=this;d!==m&&("innerHTML"===C&&(h.content=m,h.applyContent(),h.innerHTML=h.content=D.Core.html(h.$.content)),"content"===C&&h.applyContent())}}),window[n]("smart-scroll-viewer",class extends window[n].ContentElement{static get properties(){return{horizontalScrollBarVisibility:{type:"string",value:"auto",allowedValues:["auto","disabled","hidden","visible"]},touchScrollRatio:{type:"any",value:null},touchVelocityCoefficient:{type:"number",value:50},verticalScrollBarVisibility:{type:"string",value:"auto",allowedValues:["auto","disabled","hidden","visible"]}}}static get listeners(){return{touchmove:"_touchmoveHandler",touchstart:"_touchstartHandler",wheel:"_mouseWheelHandler","document.up":"_upHandler"}}static get styleUrls(){return["smart.scrollviewer.css"]}template(){return'<div id="container" class="smart-container" role="presentation">\n                        <div id="scrollViewerContainer" class="smart-scroll-viewer-container" role="presentation">\n                            <div id="scrollViewerContentContainer" inner-h-t-m-l=\'[[innerHTML]]\' class="smart-scroll-viewer-content-container" role="presentation">\n                                <content></content>\n                            </div>\n                        </div>\n                        <smart-scroll-bar id="verticalScrollBar" theme="[[theme]]"  animation="[[animation]]" disabled="[[disabled]]" right-to-left="[[rightToLeft]]" orientation="vertical"></smart-scroll-bar>\n                        <smart-scroll-bar id="horizontalScrollBar" theme="[[theme]]" disabled="[[disabled]]" right-to-left="[[rightToLeft]]"></smart-scroll-bar>\n                    </div>'}appendChild(C){const d=this;if(C){if(!d.isCompleted||C.classList&&C.classList.contains("smart-resize-trigger-container")){const m=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.appendChild.apply(d,m.concat(Array.prototype.slice.call(arguments)))}d.$.scrollViewerContentContainer.appendChild(C)}}removeChild(C){const d=this;if(C){if(!d.isCompleted||C.classList&&C.classList.contains("smart-resize-trigger-container")){const m=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.removeChild.apply(d,m.concat(Array.prototype.slice.call(arguments)))}d.$.scrollViewerContentContainer.removeChild(C)}}removeAll(){this.isCompleted&&(this.$.scrollViewerContentContainer.innerHTML="")}_horizontalScrollbarHandler(C){const d=this;d.$.scrollViewerContentContainer.style.left=(d.rightToLeft?1:-1)*d.scrollLeft+"px",C.stopPropagation&&C.stopPropagation(),d.onHorizontalChange&&d.onHorizontalChange(C)}_verticalScrollbarHandler(C){const d=this;d.$.scrollViewerContentContainer.style.top=-d.scrollTop+"px",C.stopPropagation&&C.stopPropagation(),d.onVerticalChange&&d.onVerticalChange(C)}_touchmoveHandler(C){const d=this;if(d._touchmoveInside&&C.cancelable)return C.preventDefault(),void C.stopPropagation();const m=d.scrollHeight>0,f=d._touchCoords;if(!m&&!(d.scrollWidth>0)||!f)return;const _=C.touches[0];let w,S,E,$;d._touchCoords=[_.pageX,_.pageY],m?(w=d.scrollTop,S=d.scrollHeight,E=_.pageY,$=f[1]):(w=d.scrollLeft,S=d.scrollWidth,E=_.pageX,$=f[0]);const L=parseFloat(E.toFixed(5)),k=parseFloat($.toFixed(5));0===w&&L>=k||w===S&&L<=k||(E!==$&&(d._touchmoveInside=!0),C.cancelable&&(C.preventDefault(),C.stopPropagation()))}_touchstartHandler(C){const d=C.touches[0];this._touchCoords=[d.pageX,d.pageY]}_mouseWheelHandler(C){const d=this;if(!d.disabled&&(d.computedHorizontalScrollBarVisibility||d.computedVerticalScrollBarVisibility)){if(C.shiftKey&&d.computedHorizontalScrollBarVisibility){const m=d.scrollLeft;return 0===m&&C.deltaX<0||m===d.scrollHeight&&C.deltaX>0?void 0:(C.stopPropagation(),C.preventDefault(),void(d.scrollWidth>0&&d.scrollTo(void 0,d.scrollLeft+d._getScrollCoefficient(C,d.offsetWidth))))}if(d.computedVerticalScrollBarVisibility){const m=d.scrollTop;if(0===m&&C.deltaY<0||m===d.scrollHeight&&C.deltaY>0)return;C.stopPropagation(),C.preventDefault(),d.scrollHeight>0&&d.scrollTo(d.scrollTop+d._getScrollCoefficient(C,d.offsetHeight))}}}_overriddenHandler(){}_upHandler(){delete this._touchCoords,delete this._touchmoveInside}_getScrollCoefficient(C,d){const m=C.deltaMode,h=Math.abs(C.deltaY);let f;return 0===m?f=h<100/3?h:d:1===m?f=h<1?h*(100/3):d:2===m&&(f=d),C.deltaY<0?-f:f}applyContent(){super.applyContent(),this.refresh()}get computedHorizontalScrollBarVisibility(){const C=this;return C._scrollView&&C._scrollView.hScrollBar?!C._scrollView.hScrollBar.$.hasClass("smart-hidden"):null}get computedVerticalScrollBarVisibility(){const C=this;return C._scrollView&&C._scrollView.vScrollBar?!C._scrollView.vScrollBar.$.hasClass("smart-hidden"):null}scrollTo(C,d){const m=this;m._scrollView&&(void 0!==C&&m._scrollView.scrollTo(C),void 0!==d&&m._scrollView.scrollTo(d,!1))}refreshScrollBarsVisibility(){const C=this;C._scrollView&&(C._scrollView.hScrollBar.disabled=C.disabled,C._scrollView.vScrollBar.disabled=C.disabled,"disabled"===C.horizontalScrollBarVisibility&&(C._scrollView.hScrollBar.disabled=!0),"disabled"===C.verticalScrollBarVisibility&&(C._scrollView.vScrollBar.disabled=!0),C.scrollWidth>0?C._scrollView.hScrollBar.$.removeClass("smart-hidden"):"visible"!==C.horizontalScrollBarVisibility&&C._scrollView.hScrollBar.$.addClass("smart-hidden"),C.scrollHeight>0?C._scrollView.vScrollBar.$.removeClass("smart-hidden"):"visible"!==C.verticalScrollBarVisibility&&C._scrollView.vScrollBar.$.addClass("smart-hidden"),"hidden"===C.horizontalScrollBarVisibility&&C._scrollView.hScrollBar.$.addClass("smart-hidden"),"hidden"===C.verticalScrollBarVisibility&&C._scrollView.vScrollBar.$.addClass("smart-hidden"),"visible"===C.horizontalScrollBarVisibility&&C._scrollView.hScrollBar.$.removeClass("smart-hidden"),"visible"===C.verticalScrollBarVisibility&&(C._scrollView.vScrollBar.$.removeClass("smart-hidden"),C.disabled||(C._scrollView.vScrollBar.disabled=C.scrollHeight<=0)),C.computedHorizontalScrollBarVisibility&&C.computedVerticalScrollBarVisibility?(C._scrollView.hScrollBar.$.addClass("bottom-corner"),C._scrollView.vScrollBar.$.addClass("bottom-corner")):(C._scrollView.hScrollBar.$.removeClass("bottom-corner"),C._scrollView.vScrollBar.$.removeClass("bottom-corner")))}ready(){super.ready();const C=this;C.$.verticalScrollBar.onChange=d=>{d.detail=d,C._verticalScrollbarHandler(d)},C.$.horizontalScrollBar.onChange=d=>{d.detail=d,C._horizontalScrollbarHandler(d)},C.$.verticalScrollBar.setAttribute("aria-controls",C.id),C.$.horizontalScrollBar.setAttribute("aria-controls",C.id),C._customScrollView||(C._scrollView=new Smart.Utilities.Scroll(C,C.$.horizontalScrollBar,C.$.verticalScrollBar)),C.refresh()}refresh(){const C=this;function d(){const _=C.$.scrollViewerContainer.classList.contains("vscroll");C.$.scrollViewerContainer.classList.remove("vscroll");const w=C.$.scrollViewerContentContainer.offsetWidth-C.$.scrollViewerContainer.offsetWidth;return w>0&&"hidden"!==C.horizontalScrollBarVisibility||"visible"===C.horizontalScrollBarVisibility?C.$.scrollViewerContainer.classList.add("hscroll"):C.$.scrollViewerContainer.classList.remove("hscroll"),_&&C.$.scrollViewerContainer.classList.add("vscroll"),w}function m(){let _;const w=C.$.scrollViewerContainer.classList.contains("hscroll");if(C.$.scrollViewerContainer.classList.remove("hscroll"),Smart.Utilities.Core.Browser.Safari){const S=C.$.scrollViewerContentContainer.getBoundingClientRect().height,E=C.$.scrollViewerContainer.getBoundingClientRect().height;_=S&&E?parseInt(S)-parseInt(E):C.$.scrollViewerContentContainer.offsetHeight-C.$.scrollViewerContainer.offsetHeight}else _=C.$.scrollViewerContentContainer.offsetHeight-C.$.scrollViewerContainer.offsetHeight;return _>0&&"hidden"!==C.verticalScrollBarVisibility||"visible"===C.verticalScrollBarVisibility?C.$.scrollViewerContainer.classList.add("vscroll"):C.$.scrollViewerContainer.classList.remove("vscroll"),w&&C.$.scrollViewerContainer.classList.add("hscroll"),_}if(!C.$.scrollViewerContentContainer)return;let h=C.scrollWidth,f=C.scrollHeight;C.scrollWidth=d(),C.scrollHeight=m(),C.scrollHeight&&f===C.scrollHeight||(C.scrollWidth=d()),C.scrollWidth&&h===C.scrollWidth||(C.scrollHeight=m()),C.computedVerticalScrollBarVisibility&&(C.scrollHeight+=C._scrollView.hScrollBar.offsetHeight),C.computedHorizontalScrollBarVisibility&&(C.scrollWidth+=C._scrollView.vScrollBar.offsetWidth),0===C.scrollHeight&&C.scrollWidth>0&&C.$.container.offsetHeight-C.$.content.offsetHeight<5&&(C.$.container.style.paddingBottom=C._scrollView.hScrollBar.offsetHeight+"px")}attached(){const C=this;super.attached(),C._scrollView||C._customScrollView||(C._scrollView=new Smart.Utilities.Scroll(C,C.$.horizontalScrollBar,C.$.verticalScrollBar))}detached(){const C=this;super.detached(),C._scrollView&&(C._scrollView.unlisten(),delete C._scrollView)}get scrollWidth(){const C=this;return C._scrollView&&C._scrollView.hScrollBar?1===C._scrollView.hScrollBar.max&&"visible"===C.horizontalScrollBarVisibility?0:C._scrollView.hScrollBar.max:-1}set scrollWidth(C){const d=this;C<0&&(C=0),d._scrollView&&d._scrollView.hScrollBar&&(d._scrollView.hScrollBar.max=0===C&&"visible"===d.horizontalScrollBarVisibility?0:C,d.refreshScrollBarsVisibility())}get scrollHeight(){const C=this;return C._scrollView&&C._scrollView.vScrollBar?1===C._scrollView.vScrollBar.max&&"visible"===C.verticalScrollBarVisibility?0:C._scrollView.vScrollBar.max:0}set scrollHeight(C){const d=this;C<0&&(C=0),d._scrollView&&d._scrollView.vScrollBar&&(d._scrollView.vScrollBar.max=0===C&&"visible"===d.verticalScrollBarVisibility?1:C,d.refreshScrollBarsVisibility())}get scrollLeft(){const C=this;return C._scrollView&&C._scrollView.hScrollBar?C._scrollView.hScrollBar.value:0}set scrollLeft(C){const d=this;C<0&&(C=0),d._scrollView&&d._scrollView.hScrollBar&&(d._scrollView.hScrollBar.value=C)}get scrollTop(){const C=this;return C._scrollView&&C._scrollView.vScrollBar?C._scrollView.vScrollBar.value:0}set scrollTop(C){const d=this;C<0&&(C=0),d._scrollView&&d._scrollView.vScrollBar&&(d._scrollView.vScrollBar.value=C)}propertyChangedHandler(C,d,m){super.propertyChangedHandler(C,d,m),"animation"!==C&&"theme"!==C&&this.refresh()}}),window[n].Utilities.Assign("PositionDetection",class{constructor(C,d,m,h){const f=this;if(d){const _="dropDown"+Math.floor(65536*(1+Math.random())).toString(16).substring(1);d.id=_,C.setAttribute("aria-owns",_)}f.context=C,f.dropDown=d,f.defaultParent=m,f.closeMethod=h}handleAutoPositioning(){const C=this,d=C.context;if("auto"!==d.dropDownPosition||d.disabled||d.isHidden)return;const m=window.requestAnimationFrame;let h,f=Date.now();return h=m(function _(){d.isHidden||document.hidden||(h=m(_),"auto"===d.dropDownPosition&&!d.disabled&&(d.isInShadowDOM?document.body.contains(d.shadowParent):document.body.contains(d))||cancelAnimationFrame(h),d.isHidden&&cancelAnimationFrame(h),Date.now()-f>=200&&(C.scrollHandler(),f=Date.now()))})}checkBrowserBounds(C){const d=this.context;if("auto"===d.dropDownPosition&&!d.disabled)switch(C){case"vertically":this.checkBrowserBoundsVertically();break;case"horizontally":this.checkBrowserBoundsHorizontally();break;default:this.checkBrowserBoundsVertically(),this.checkBrowserBoundsHorizontally()}}checkBrowserBoundsHorizontally(){const C=this.context,d=this.dropDown;let m,h=0;l.isMobile||window.innerWidth===document.documentElement.clientWidth||(h=window.innerWidth-document.documentElement.clientWidth),null!==C._dropDownParent?m=!0:d.style.left="";const f=window.innerWidth-h;let _=C.getBoundingClientRect().left;if(_<0&&(d.style.left=(m?0:Math.abs(_))+"px",_=parseFloat(d.style.left)),_+d.offsetWidth>f){let w=_-Math.abs(f-_-d.offsetWidth);m&&(w+=window.pageXOffset),d.style.left=(m?w:w-_)+"px",window.innerWidth===document.documentElement.clientWidth&&(d.style.left=parseFloat(d.style.left)+h+"px"),m&&window.innerHeight===document.documentElement.clientHeight&&this.positionDropDown(!0)}}checkBrowserBoundsVertically(C){const d=this.context,m=this.dropDown,h=d._dropDownListPosition;C||(C=d.getBoundingClientRect()),0!==C.height&&(d._dropDownListPosition=document.documentElement.clientHeight-Math.abs(C.top+C.height+m.offsetHeight)>=0?"bottom":C.top-m.offsetHeight>=0?"top":"overlay-center",this.updatePositionAttribute(h,d._dropDownListPosition))}scrollHandler(){const C=this.context;if(!C.parentElement)return;const d=C.getBoundingClientRect();if(d.top===C._positionTop)return;const m=C._dropDownListPosition;this.checkBrowserBoundsVertically(d),C._dropDownListPosition!==m&&this.positionDropDown(),C._positionTop=d.top}getDropDownParent(C){const d=this.context,m=this.dropDown;let h=d.dropDownAppendTo;d._positionedParent=null,null===h?d._dropDownParent=null:"body"===h||h===document.body?d._dropDownParent=d.getRootNode().host?d.getRootNode().host.shadowRoot:document.body:h instanceof HTMLElement?d._dropDownParent=h:"string"==typeof h?(h=document.getElementById(h),h instanceof HTMLElement?d._dropDownParent=h:(d.dropDownAppendTo=null,d._dropDownParent=null)):(d.dropDownAppendTo=null,d._dropDownParent=null);let f=d._dropDownParent;if(null!==f){for(;f&&f instanceof HTMLElement&&"static"===window.getComputedStyle(f).position&&f!==d.getShadowRootOrBody();)f=f.parentElement;d._positionedParent=f===document.body?null:f,m&&(m.setAttribute("animation",d.animation),""!==d.theme&&m.$.addClass(d.theme),C&&(d._dropDownParent.appendChild(m),m.$.addClass("smart-drop-down-repositioned")),-1===d.detachedChildren.indexOf(m)&&d.detachedChildren.push(m))}}dropDownAppendToChangedHandler(){const C=this.context,d=this.dropDown,m=C._dropDownParent;this.getDropDownParent(),C._dropDownParent!==m&&(C[this.closeMethod](),["left","top","font-size","font-family","font-style","font-weight"].forEach(h=>d.style[h]=null),null===C._dropDownParent?(this.defaultParent.appendChild(d),d.$.removeClass("smart-drop-down-repositioned")):(C._dropDownParent.appendChild(d),d.$.addClass("smart-drop-down-repositioned")))}dropDownPositionChangedHandler(){const C=this;C.dropDown.style.transition="none",C.context[C.closeMethod](),C.setDropDownPosition(),C.handleAutoPositioning()}dropDownAttached(C){const d=this.context;null!==d._dropDownParent&&(d._dropDownParent.appendChild(this.dropDown),this.handleAutoPositioning(),C&&d[C]())}dropDownDetached(){const C=this.context;null!==C._dropDownParent&&document.body.contains(this.dropDown)&&document.body.contains(C._dropDownParent)&&C._dropDownParent.removeChild(this.dropDown)}setDropDownPosition(){const C=this.context,d=C.dropDownPosition,m=C._dropDownListPosition;"auto"===d?this.checkBrowserBounds():C._dropDownListPosition=d,this.updatePositionAttribute(m,C._dropDownListPosition)}updatePositionAttribute(C,d){const m=this.context,h=this.dropDown;m.$.dropDownButton&&!m.$.dropDownButton.hasAttribute(d)&&(m.$.dropDownButton.removeAttribute(C),m.$.dropDownButton.setAttribute(d,"")),h.hasAttribute(d)||(h.style.transition="none",h.removeAttribute(C),h.setAttribute(d,""),requestAnimationFrame(function(){h.style.transition=null}))}positionDropDown(C){const d=this.context,m=this.dropDown;if(!d.opened||null===d._dropDownParent)return;const h=d.getBoundingClientRect();let f,_;if(this.customPositionDropDown){const S=this.customPositionDropDown(h);f=S.left,_=S.top}else switch(f=h.left,_=h.top,d._dropDownListPosition){case"bottom":_+=d.$.container.offsetHeight-1;break;case"center-bottom":_+=d.$.container.offsetHeight-1,f+=d.offsetWidth-m.offsetWidth/2;break;case"center-top":_-=m.offsetHeight-1,f+=d.offsetWidth-m.offsetWidth/2;break;case"top":_-=m.offsetHeight-1;break;case"overlay-bottom":break;case"overlay-center":_-=m.offsetHeight/2-d.offsetHeight/2;break;case"overlay-top":_-=m.offsetHeight-d.offsetHeight}const w=this.getDropDownOffset();m.style.top=_+w.y+"px",C||(m.style.left=f+w.x+"px")}getDropDownOffset(){const C=this.context._positionedParent;let d,m;if(C&&"#document-fragment"!==C.nodeName){const h=C.getBoundingClientRect();d=-h.left,m=-h.top}else d=window.pageXOffset,m=window.pageYOffset;return{x:d,y:m}}placeOverlay(){const C=this.context;if(!C.dropDownOverlay||C._overlay)return;const d=document.createElement("div");d.classList.add("smart-drop-down-overlay"),d.style.width=document.documentElement.scrollWidth+"px",d.style.height=document.documentElement.scrollHeight+"px",document.body.appendChild(d),C._overlay=d}removeOverlay(C){const d=this,m=d.context;m._overlay&&(m.hasAnimation&&C?requestAnimationFrame(function h(){d.dropDown.getBoundingClientRect().height>0?requestAnimationFrame(h):(document.body.removeChild(m._overlay),delete m._overlay)}):(document.body.removeChild(m._overlay),delete m._overlay))}})}()},6802:()=>{Smart.Utilities.Assign("DataExporter",class{constructor(e,t,n,a){const i=this;e||(e={}),i.style=e.style,i.header=e.header,i.exportHeader=void 0===e.exportHeader||e.exportHeader,i.hierarchical=e.hierarchical,i.expandChar=e.expandChar||"+",i.collapseChar=e.collapseChar||"-",i.pageOrientation=e.pageOrientation,i.allowNull=e.allowNull||!1,!i.hierarchical&&t&&t.length>0?i.groupBy=t:i.mergedCells=e.mergedCells,!i.groupBy&&n&&Object.keys(n).length>0&&(i.filterBy=n),a&&(i.conditionalFormatting=a),i.timeBetween1900And1970=new Date(1970,0,1).getTime()-new Date(1900,0,1).getTime()}downloadFile(e,t,n){let a;if(!n)return e;if(a=e instanceof Blob?e:new Blob([e],{type:t}),window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(a,n);else{const i=document.createElement("a"),o=URL.createObjectURL(a);i.href=o,i.download=n,i.style.position="absolute",i.style.visibility="hidden",document.body.appendChild(i),i.click(),setTimeout(function(){document.body.removeChild(i),window.URL.revokeObjectURL(o)},100)}}exportData(e,t,n,a){const i=this;if(i.actualHierarchy=i.hierarchical,t=t.toLowerCase(),i.exportHeader&&(i.header?(0===(e=e.slice(0)).length&&(i.actualHierarchy=!1),i.processComplexHeader(i.header,e,t)):1===e.length&&(i.actualHierarchy=!1)),0===e.length)return void console.warn("No data to export.");"xlsx"===t&&(i.xlsxStartIndex=i.complexHeader?i.complexHeader.length:+i.exportHeader),i.actualHierarchy&&(e=i.processHierarchicalData(e,t)),i.getDatafields(e),n&&n.slice(n.length-t.length-1,n.length)!=="."+t&&(n+="."+t);let o=null;switch(t){case"csv":o=i.exportToCSVAndTSV(e,{delimiter:", ",MIME:"text/csv",toRemove:2},n);break;case"html":o=i.exportToHTML(e,n);break;case"jpeg":case"png":i.exportToImage(e,n,t,a);break;case"json":o=i.exportToJSON(e,n);break;case"pdf":o=i.exportToPDF(e,n);break;case"tsv":o=i.exportToCSVAndTSV(e,{delimiter:"\t",MIME:"text/tab-separated-values",toRemove:1},n);break;case"xlsx":o=i.exportToXLSX(e,n);break;case"xml":o=i.exportToXML(e,n);break;case"md":o=i.exportToMD(e,n)}return a&&o&&a(o),delete i.complexHeader,o}exportToCSVAndTSV(e,t,n){const a=this,i=a.datafields;let o="";for(let r=0;r<e.length;r++){const l=e[r];let s="";for(let c=0;c<i.length;c++)s+=a.actualHierarchy&&0===c?('""'+t.delimiter).repeat(l._level-1)+'"'+l[i[c]]+'"'+t.delimiter+('""'+t.delimiter).repeat(a.maxLevel-l._level):'"'+l[i[c]]+'"'+t.delimiter;s=s.slice(0,s.length-t.toRemove)+"\n",o+=s}return this.downloadFile(o,t.MIME,n)}exportToHTML(e,t){const n=this,a=n.datafields,i=n.style;let o="",r=0,l="";e=n.processGroupingInformation(e),n.data=e,n.exportHeader&&(o=n.getHTMLHeader(a,e),r=1),arguments[2]&&(l=`<script type="text/javascript" src="${Array.from(document.getElementsByTagName("script")).find(g=>-1!==g.src.indexOf("html2canvas")).src}"><\/script>`);let s=`<!DOCTYPE html>\n<html>\n<head>\n    <meta charset="UTF-8">\n    <style type="text/css">\n${n.getRowStyle()}${n.getColumnStyle()}\n    </style>${l}${n.toggleableFunctionality()}\n</head>\n<body>\n    <table${n.getTableStyle()}>${o}\n        <tbody>\n`;const c={},u={},p=[];n.getMergedCellsInfo(c,u);e:for(let g=r;g<e.length;g++){const b=e[g],v=g-r;let y=n.getAlternationIndex(v," rowN"),x="",D="",T="",M=0;if(n.actualHierarchy)b._collapsed&&(x=" collapsed"),D=` level="${b._level}"`;else if(n.groupBy)for(let B=0;B<n.groupBy.length;B++){const O=n.groupBy[B],N=b[O],P=n.groups[O][N];if(T+=N,-1===p.indexOf(T)){s+=`            <tr class="row">\n                <td class="column group" style="padding-left: ${25*M}px;" colspan="${n.datafields.length}">${P}</td>\n            </tr>`,p.push(T),g--;continue e}M++}let A=`            <tr class="row row${v}${y}${x}"${D}`;t||(A+=' style="page-break-inside: avoid;"'),A+=">\n";for(let B=0;B<a.length;B++){const O=B+","+v;let N=1,P=1;if(c[O])N=c[O].colspan,P=c[O].rowspan;else if(u[O])continue;const V=a[B];let Y=b[V],K="";if(n.actualHierarchy&&0===B){let Z="";b._expanded?Z=n.collapseChar:!1===b._expanded&&(Z=n.expandChar),K=`<div class="toggle-element" style="margin-left: ${25*(b._level-1)+5}px;" expanded>${Z}</div>`}Y=n.getFormattedValue(Y,V);let W="";if(i&&i.columns&&i.columns[V]&&i.columns[V][v]){const Z=i.columns[V][v];W+=`border-color: ${Z.border}; background-color: ${Z.background}; color: ${Z.color};"`}0===B&&M>1&&(W+=`padding-left: ${25*(M-1)}px;"`),W&&(W=` style="${W}"`),A+=`                <td class="column column${V}"${W} colspan="${N}" rowspan="${P}">${K+Y}</td>\n`}s+=A+"            </tr>\n"}return s+="        </tbody>\n    </table>\n</body>\n</html>",arguments[2]?s:this.downloadFile(s,"text/html",t)}exportToImage(e,t,n,a){try{html2canvas}catch(l){throw new Error("smart-grid: Missing reference to 'html2canvas.min.js'.")}let i=null;const o=this.exportToHTML(e,t,!0),r=document.createElement("iframe");return r.style.position="absolute",r.style.top=0,r.style.left=0,r.style.border="none",r.style.width="100%",r.style.height="100%",r.style.opacity=0,r.style.pointerEvents="none",document.body.appendChild(r),r.contentDocument.write(o),function l(){r.contentDocument.body&&r.contentDocument.body.firstElementChild?r.contentWindow.html2canvas(r.contentDocument.body.firstElementChild).then(s=>{const c=new Smart.Utilities.Draw(document.createElement("div"));i=s.toDataURL("image/png"),a?a(i):(document.body.appendChild(s),c.exportImage(void 0,s,n,t)),r.remove(),s.remove()}):requestAnimationFrame(l)}(),i}getMergedCellsInfo(e,t,n){const a=this;if(!a.mergedCells)return;const i=n&&0!==n[a.datafields.length-1];a.mergedCellsPDF=a.mergedCells.slice(0);for(let o=0;o<a.mergedCellsPDF.length;o++){const r=a.mergedCellsPDF[o];let l=r.colspan,s=r.rowspan;if(s<2&&l<2)continue;const c=r.cell[1];let u=r.cell[0];if(i&&l>1){const p=n[u],g=n[u+l-1],b=[];if(g>p){let v=p,y=u,x=0;e:for(let D=p;D<=g;D++){let T=y,M=0;for(;n[y]===v;)if(y++,x++,M++,x===l){b.push({start:T,span:M});break e}b.push({start:T,span:M}),v=n[y]}l=b[0].span;for(let D=1;D<b.length;D++)a.mergedCellsPDF.push({cell:[b[D].start,c],colspan:b[D].span,rowspan:s,originalCell:u})}}for(let p=u;p<u+l;p++)for(let g=c;g<c+s;g++){const b=p+","+g;p!==u||g!==c?t[b]=!0:e[b]={colspan:l,rowspan:s,originalCell:r.originalCell}}}}getAlternationIndex(e,t){if(!this.style)return"";const n=this.style.rows;return n&&n.alternationCount&&((void 0===n.alternationStart||e>=n.alternationStart)&&(void 0===n.alternationEnd||e<=n.alternationEnd)||n.alternationStart===n.alternationEnd)?t+e%n.alternationCount:""}getFormattedValue(e,t){const n=this,a=n.style;if(null===e)return n.allowNull?"null":"";if(t&&a&&a.columns&&a.columns[t]&&a.columns[t].format){if("number"==typeof e)return n.formatNumber(e,a.columns[t].format);if(e instanceof Date)return n.formatDate(e,a.columns[t].format)}else if(e instanceof Date)return n.formatDate(e,"d");return e}exportToJSON(e,t){return this.downloadFile(JSON.stringify(e,this.datafields.concat("rows")),"application/json",t)}exportToMD(e,t){const n=this.datafields;let a="";for(let i=0,o=e.length;i<o;i+=1)for(let r=0,l=n.length;r<l;r+=1){const s=e[i][n[r]];"string"==typeof s&&(a+=s)}return this.downloadFile(a,"application/text",t)}exportToPDF(e,t){try{pdfMake}catch(x){throw new Error("Missing reference to 'pdfmake.min.js'.")}const n=this,a=n.datafields,i=+n.exportHeader,o=[],r={},l={},s={},c=i?n.complexHeader?n.complexHeader.length:1:0,u={pageOrientation:n.pageOrientation||"portrait"};let p,g=[],b=[];function v(){let x=[];for(let D=0;D<p.length;D++)x.push([]);return x}e=n.processGroupingInformation(e),n.data=e,n.headerRows=c,n.getPDFStyle();const y=n.styleInfo;p=y?n.wrapPDFColumns(u,s):[{body:g,datafields:a}],i&&(g=n.getPDFHeader(a,p,s)),n.getMergedCellsInfo(r,l,s);e:for(let x=i;x<e.length;x++){const D=e[x];let T="",M=0;if(n.groupBy)for(let N=0;N<n.groupBy.length;N++){const P=n.groupBy[N],V=D[P],Y=n.groups[P][V];if(T+=V,-1===o.indexOf(T)){n.createGroupHeaderRow(p,{text:Y,style:["row","cell","group"],marginLeft:7.5*M}),o.push(T),x--;continue e}M++}const A=v(),B=x-i;let O=n.getAlternationIndex(B,"");for(let N=0;N<a.length;N++){const P=a[N],V={style:["row","row"+B,"cell","cell"+P]},Y=s[N]||0;if(void 0!==O&&V.style.splice(1,0,"rowN"+O),n.mergedCellsPDF){const W=N+","+B,Z=r[W];if(Z){if(V.colSpan=Z.colspan,V.rowSpan=Z.rowspan,void 0!==Z.originalCell){V.text="",V.style[V.style.length-1]="cell"+a[Z.originalCell],A[Y].push(V);continue}}else if(l[W]){A[Y].push({});continue}}const K=n.getFormattedValue(D[P],P);V.text=K.toString(),n.getUniqueStylePDF(V,P,B),n.setIndentation(V,{j:N,currentRecord:D,value:K,outlineLevel:M}),A[Y].push(V)}for(let N=0;N<p.length;N++)p[N].body.push(A[N])}if(y){for(let x=0;x<p.length;x++){const D=p[x].body;for(let T=c-1;T>=0;T--)D.unshift(g[x][T]);b.push({table:{headerRows:c,widths:p[x].widths,heights:function(T){return y.heights[T]?y.heights[T]:y.defaultHeight?y.defaultHeight:void 0},body:D},pageBreak:"after"})}delete b[p.length-1].pageBreak,u.styles=y.styles}else{const x=p[0].body;for(let D=c-1;D>=0;D--)x.unshift(g[0][D]);b=[{table:{headerRows:c,body:x}}],u.styles={header:{bold:!0},group:{bold:!0}}}u.content=b,pdfMake.createPdf(u).download(t),delete n.mergedCellsPDF,delete n.styleInfo}getPDFStyle(){const e=this,t=e.style;if(!t)return"";const n=e.data[0],a=t.header,i=t.columns,o=t.rows,r={heights:[],widths:Array(e.datafields.length).fill("*"),styles:{header:{},row:{},cell:{},group:{fillColor:"#FFFFFF",color:"#000000",bold:!0}}};function l(s,c){if(s)for(let u in s)if(Object.prototype.hasOwnProperty.call(s,u))if(void 0===n[u])if("height"===u&&"header"===c)for(let p=0;p<e.headerRows;p++)r.heights[p]=parseInt(s[u],10)/e.headerRows/1.4;else e.storePDFStyle({prop:u,value:s[u],toUpdate:c});else for(let p in s[u]){if(!isNaN(p)||!Object.prototype.hasOwnProperty.call(s[u],p))continue;const g=s[u][p],b=e.datafields.indexOf(u);"width"===p&&"*"===r.widths[b]?r.widths[b]=g:e.storePDFStyle({prop:p,value:g,toUpdate:c+u})}}if(e.styleInfo=r,l(a,"header"),l(i,"cell"),o){for(let s in o){if(!Object.prototype.hasOwnProperty.call(o,s)||-1!==s.indexOf("alt"))continue;const c=o[s];if(isNaN(s))"height"===s?r.defaultHeight=parseFloat(c)/1.4:e.storePDFStyle({prop:s,value:c,toUpdate:"row"});else for(let u in c)Object.prototype.hasOwnProperty.call(c,u)&&("height"===u?r.heights[parseFloat(s)+e.headerRows]=parseFloat(c[u])/1.4:e.storePDFStyle({prop:u,value:c[u],toUpdate:"row"+s}))}if(o.alternationCount)for(let s=0;s<o.alternationCount;s++){const c={};o[`alternationIndex${s}Color`]&&(c.color=o[`alternationIndex${s}Color`]),o[`alternationIndex${s}BackgroundColor`]&&(c.fillColor=o[`alternationIndex${s}BackgroundColor`]),r.styles["rowN"+s]=c}}}storePDFStyle(e){let n=this.styleInfo.styles[e.toUpdate];n||(n={},this.styleInfo.styles[e.toUpdate]=n);let a=e.value;switch(e.prop){case"backgroundColor":n.fillColor=a;break;case"color":n.color=a;break;case"fontSize":n.fontSize=parseFloat(a);break;case"fontStyle":"italic"===a&&(n.italics=!0);break;case"fontWeight":"bold"===a&&(n.bold=!0);break;case"textAlign":n.alignment=a}}wrapPDFColumns(e,t){const n=this,a=this.styleInfo,i="portrait"===e.pageOrientation?655:1155,o=[];let r=0;for(let l=0;l<a.widths.length;l++){let s,c=a.widths[l];if("*"===c?s=i/6:"string"==typeof c&&-1!==c.indexOf("%")?(s=Math.min(i,Math.floor(parseFloat(c)/100*i)),s===i&&(c="*")):(c=parseFloat(c),c>=i?(s=i,c="*"):(s=c,c/=1.4)),void 0===o[r]){o[r]={body:[],width:s,widths:[c],datafields:[n.datafields[l]]},t[l]=r;continue}const u=o[r];u.width+s>i?(r++,l--):(t[l]=r,u.width+=s,u.widths.push(c),u.datafields.push(n.datafields[l]))}return o}getPDFHeader(e,t,n){const a=this,i=[],o=a.headerRows,r=[],l=[];let s,c,u=[];a.complexHeader?(s=a.complexHeader,c=a.complexDataFieldsHeader):(s=[Object.values(a.data[0])],c=s);for(let g=0;g<o;g++){const b=s[g],v=c[g];for(let y=0;y<b.length;y++){let x=n[y]||0;r[x]||(r[x]=[],l[x]=[]),r[x][g]||(r[x][g]=[],l[x][g]=[]),r[x][g].push(b[y]),l[x][g].push(v[y])}}function p(g,b,v,y){for(let x=0;x<o;x++){const D=g[x],T=b[x],M=[];for(let A=0;A<D.length;A++){const B=T[A];let O=1,N=1;if(T[A-1]&&T[A-1]===B||b[x-1]&&b[x-1][A]===B){M.push({});continue}let P=A+1;for(;T[P]&&T[P]===T[P-1];)O++,P++;for(P=x+1;b[P]&&b[P][A]===B;)N++,P++;const V=x===o-1||N+x===o?y.datafields[A]:null,Y={text:D[A],colSpan:O,rowSpan:N};V?Y.style=["header","header"+V]:(Y.alignment="center",Y.style="header"),M.push(Y)}v.push(M)}}for(let g=0;g<t.length;g++)u=[],p(r[g],l[g],u,t[g]),i.push(u);return i}createGroupHeaderRow(e,t){for(let n=0;n<e.length;n++){const a=Object.assign({},t),i=e[n].datafields.length,o=[a];a.colSpan=i,o.length=i,o.fill({},1,i-1),e[n].body.push(o)}}getUniqueStylePDF(e,t,n){const a=this.style;if(!a||!a.columns||!a.columns[t])return;const i=a.columns[t][n];i&&(e.fillColor=function(o){const r=/rgba\((\d+),(\d+),(\d+)\,(\d*.\d+|\d+)\)/gi.exec(o.replace(/\s/g,""));if(null===r)return o;const l=parseFloat(r[1]).toString(16).toUpperCase(),s=parseFloat(r[2]).toString(16).toUpperCase(),c=parseFloat(r[3]).toString(16).toUpperCase();return"#"+"0".repeat(2-l.length)+l+"0".repeat(2-s.length)+s+"0".repeat(2-c.length)+c}(i.background),e.color=i.color.toLowerCase())}setIndentation(e,t){if(0!==t.j)return;const n=this;if(n.actualHierarchy){const a=t.currentRecord;void 0!==a._expanded?(e.marginLeft=25*(a._level-1),e.text=n.collapseChar+" "+t.value):e.marginLeft=25*(a._level-1)+6}else t.outlineLevel>1&&(e.marginLeft=7.5*(t.outlineLevel-1))}exportToXLSX(e,t){try{JSZip}catch(D){throw new Error("Missing reference to 'jszip.min.js'.")}const n=this;let a=n.style;if(e=n.processGroupingInformation(e,!0),n.data=e,n.getColumnsArray(),n.complexHeaderMergedCells=[],n.complexHeaderMergeInfo)for(let D in n.complexHeaderMergeInfo)if(Object.prototype.hasOwnProperty.call(n.complexHeaderMergeInfo,D)){const T=n.complexHeaderMergeInfo[D];if(T.from[0]===T.to[0]&&T.from[1]===T.to[1])continue;n.complexHeaderMergedCells.push({from:n.columnsArray[T.from[1]]+(T.from[0]+1),to:n.columnsArray[T.to[1]]+(T.to[0]+1)})}n.getConditionalFormatting(),a||(a=n.generateDefaultStyle(e));const i=n.generateSharedStrings(e),o=i.collection,r=i.xml,l=n.generateStyles(a),s=n.groupBy?n.generateSheet1WithGrouping(e,o):n.generateSheet1(e,o),c=n.generateAuxiliaryFiles(),u=new JSZip,p=u.folder("_rels"),g=u.folder("docProps"),b=u.folder("xl"),v=b.folder("_rels"),y=b.folder("theme"),x=b.folder("worksheets");p.file(".rels",c._relsRels),g.file("app.xml",c.docPropsAppXml),g.file("core.xml",c.docPropsCoreXml),v.file("workbook.xml.rels",c.xl_relsWorkbookXmlRels),y.file("theme1.xml",c.xlThemeTheme1Xml),x.file("sheet1.xml",s),b.file("sharedStrings.xml",r),b.file("styles.xml",l),b.file("workbook.xml",c.xlWorkbookXml),u.file("[Content_Types].xml",c.Content_TypesXml),u.generateAsync({type:"blob",mimeType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}).then(function(D){return n.downloadFile(D,"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",t)}),delete n.conditionalFormattingXLSX,delete n.complexHeaderMergeInfo,delete n.defaultRowHeight,delete n.rowHeight}processGroupingInformation(e,t){const n=this;if(!n.groupBy)return e;let a;if(e=e.slice(0),n.exportHeader&&(t&&n.complexHeader?(a=e.slice(0,n.complexHeader.length),e.splice(0,n.complexHeader.length)):(a=[e[0]],e.splice(0,1))),e.length>1){const i=function(o,r){let l;switch(r||typeof o){case"string":l=(new Intl.Collator).compare;break;case"number":l=function(s,c){return s-c};break;case"boolean":case"bool":l=function(s,c){return s===c?0:!1===s?-1:1};break;case"date":case"time":case"dateTime":o instanceof Date?l=function(s,c){return s.getTime()-c.getTime()}:(o instanceof Smart.Utilities.DateTime||o instanceof Smart.Utilities.BigNumber)&&(l=function(s,c){return s.compare(c)});break;case"object":if(o instanceof Date)l=function(s,c){return s.getTime()-c.getTime()};else if(o instanceof Smart.Utilities.DateTime||o instanceof Smart.Utilities.BigNumber)l=function(s,c){return s.compare(c)};else if(o instanceof Smart.Utilities.Complex||window.NIComplex&&o instanceof window.NIComplex){const s=new Smart.Utilities.ComplexNumericProcessor;l=function(c,u){return s.compareComplexNumbers(c,u)}}}return l};!function(o,r,l,s){if(!o||!Array.isArray(o)||0===o.length||!r||Array.isArray(r)&&0===r.length)return;"string"==typeof r&&(r=[r]);const c=[],u=[];void 0===l&&(l=[]);for(let p=0;p<r.length;p++)c[p]=void 0===l[p]||"asc"===l[p]||"ascending"===l[p]?1:-1,u[p]=i(o[0][r[p]]);o.sort(function(p,g){for(let b=0;b<r.length;b++){const v=u[b](p[r[b]],g[r[b]]);if(0===v){if(r[b+1])continue;return void 0!==p._index?(p._index-g._index)*c[b]:0}return v*c[b]}})}(e,n.groupBy)}return a&&(e=a.concat(e)),n.getGroupLabels(e),e}exportToXML(e,t){const n=this.datafields.slice(0);let a='<?xml version="1.0" encoding="UTF-8" ?>\n<table>\n';return-1===n.indexOf("rows")&&n.push("rows"),a+=function i(o,r){let l="";for(let s=0;s<o.length;s++){const c=o[s];l+=r+"<row>\n";for(let u=0;u<n.length;u++){const p=n[u];if("rows"!==p)l+=r+`    <${p}>${c[p]}</${p}>\n`;else{if(!c.rows)continue;l+=`${r}    <rows>\n${i(c.rows,r+"        ")}${r}    </rows>\n`}}l+=r+"</row>\n"}return l}(e,"    ")+"</table>",this.downloadFile(a,"application/xml",t)}formatDate(e,t){if(!Smart.Utilities.DateTime)return e;try{return new Smart.Utilities.DateTime(e).toString(t)}catch(n){return e}}formatNumber(e,t){if(!Smart.Utilities.NumberRenderer)return e;const n=(new Smart.Utilities.NumberRenderer).formatNumber(e,t);return void 0===n?e:n}generateAuxiliaryFiles(){const e=(new Date).toISOString();return{_relsRels:'<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\n<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId3" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties" Target="docProps/app.xml"/><Relationship Id="rId2" Type="http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties" Target="docProps/core.xml"/><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument" Target="xl/workbook.xml"/></Relationships>',docPropsAppXml:'<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\n<Properties xmlns="http://schemas.openxmlformats.org/officeDocument/2006/extended-properties" xmlns:vt="http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes"><Application>Microsoft Excel</Application><DocSecurity>0</DocSecurity><ScaleCrop>false</ScaleCrop><HeadingPairs><vt:vector size="2" baseType="variant"><vt:variant><vt:lpstr>Worksheets</vt:lpstr></vt:variant><vt:variant><vt:i4>1</vt:i4></vt:variant></vt:vector></HeadingPairs><TitlesOfParts><vt:vector size="1" baseType="lpstr"><vt:lpstr>Sheet1</vt:lpstr></vt:vector></TitlesOfParts><Company></Company><LinksUpToDate>false</LinksUpToDate><SharedDoc>false</SharedDoc><HyperlinksChanged>false</HyperlinksChanged><AppVersion>16.0300</AppVersion></Properties>',docPropsCoreXml:`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\n<cp:coreProperties xmlns:cp="http://schemas.openxmlformats.org/package/2006/metadata/core-properties" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:dcterms="http://purl.org/dc/terms/" xmlns:dcmitype="http://purl.org/dc/dcmitype/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><dc:creator>Smart HTML Elements</dc:creator><cp:lastModifiedBy>Smart HTML Elements</cp:lastModifiedBy><dcterms:created xsi:type="dcterms:W3CDTF">${e}</dcterms:created><dcterms:modified xsi:type="dcterms:W3CDTF">${e}</dcterms:modified></cp:coreProperties>`,xl_relsWorkbookXmlRels:'<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\n<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId3" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles" Target="styles.xml"/><Relationship Id="rId2" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme" Target="theme/theme1.xml"/><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet" Target="worksheets/sheet1.xml"/><Relationship Id="rId4" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings" Target="sharedStrings.xml"/></Relationships>',xlThemeTheme1Xml:'<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\n<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme"><a:themeElements><a:clrScheme name="Office"><a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1><a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1><a:dk2><a:srgbClr val="44546A"/></a:dk2><a:lt2><a:srgbClr val="E7E6E6"/></a:lt2><a:accent1><a:srgbClr val="4472C4"/></a:accent1><a:accent2><a:srgbClr val="ED7D31"/></a:accent2><a:accent3><a:srgbClr val="A5A5A5"/></a:accent3><a:accent4><a:srgbClr val="FFC000"/></a:accent4><a:accent5><a:srgbClr val="5B9BD5"/></a:accent5><a:accent6><a:srgbClr val="70AD47"/></a:accent6><a:hlink><a:srgbClr val="0563C1"/></a:hlink><a:folHlink><a:srgbClr val="954F72"/></a:folHlink></a:clrScheme><a:fontScheme name="Office"><a:majorFont><a:latin typeface="Calibri Light" panose="020F0302020204030204"/><a:ea typeface=""/><a:cs typeface=""/><a:font script="Jpan" typeface="\u6e38\u30b4\u30b7\u30c3\u30af Light"/><a:font script="Hang" typeface="\ub9d1\uc740 \uace0\ub515"/><a:font script="Hans" typeface="\u7b49\u7ebf Light"/><a:font script="Hant" typeface="\u65b0\u7d30\u660e\u9ad4"/><a:font script="Arab" typeface="Times New Roman"/><a:font script="Hebr" typeface="Times New Roman"/><a:font script="Thai" typeface="Tahoma"/><a:font script="Ethi" typeface="Nyala"/><a:font script="Beng" typeface="Vrinda"/><a:font script="Gujr" typeface="Shruti"/><a:font script="Khmr" typeface="MoolBoran"/><a:font script="Knda" typeface="Tunga"/><a:font script="Guru" typeface="Raavi"/><a:font script="Cans" typeface="Euphemia"/><a:font script="Cher" typeface="Plantagenet Cherokee"/><a:font script="Yiii" typeface="Microsoft Yi Baiti"/><a:font script="Tibt" typeface="Microsoft Himalaya"/><a:font script="Thaa" typeface="MV Boli"/><a:font script="Deva" typeface="Mangal"/><a:font script="Telu" typeface="Gautami"/><a:font script="Taml" typeface="Latha"/><a:font script="Syrc" typeface="Estrangelo Edessa"/><a:font script="Orya" typeface="Kalinga"/><a:font script="Mlym" typeface="Kartika"/><a:font script="Laoo" typeface="DokChampa"/><a:font script="Sinh" typeface="Iskoola Pota"/><a:font script="Mong" typeface="Mongolian Baiti"/><a:font script="Viet" typeface="Times New Roman"/><a:font script="Uigh" typeface="Microsoft Uighur"/><a:font script="Geor" typeface="Sylfaen"/><a:font script="Armn" typeface="Arial"/><a:font script="Bugi" typeface="Leelawadee UI"/><a:font script="Bopo" typeface="Microsoft JhengHei"/><a:font script="Java" typeface="Javanese Text"/><a:font script="Lisu" typeface="Segoe UI"/><a:font script="Mymr" typeface="Myanmar Text"/><a:font script="Nkoo" typeface="Ebrima"/><a:font script="Olck" typeface="Nirmala UI"/><a:font script="Osma" typeface="Ebrima"/><a:font script="Phag" typeface="Phagspa"/><a:font script="Syrn" typeface="Estrangelo Edessa"/><a:font script="Syrj" typeface="Estrangelo Edessa"/><a:font script="Syre" typeface="Estrangelo Edessa"/><a:font script="Sora" typeface="Nirmala UI"/><a:font script="Tale" typeface="Microsoft Tai Le"/><a:font script="Talu" typeface="Microsoft New Tai Lue"/><a:font script="Tfng" typeface="Ebrima"/></a:majorFont><a:minorFont><a:latin typeface="Calibri" panose="020F0502020204030204"/><a:ea typeface=""/><a:cs typeface=""/><a:font script="Jpan" typeface="\u6e38\u30b4\u30b7\u30c3\u30af"/><a:font script="Hang" typeface="\ub9d1\uc740 \uace0\ub515"/><a:font script="Hans" typeface="\u7b49\u7ebf"/><a:font script="Hant" typeface="\u65b0\u7d30\u660e\u9ad4"/><a:font script="Arab" typeface="Arial"/><a:font script="Hebr" typeface="Arial"/><a:font script="Thai" typeface="Tahoma"/><a:font script="Ethi" typeface="Nyala"/><a:font script="Beng" typeface="Vrinda"/><a:font script="Gujr" typeface="Shruti"/><a:font script="Khmr" typeface="DaunPenh"/><a:font script="Knda" typeface="Tunga"/><a:font script="Guru" typeface="Raavi"/><a:font script="Cans" typeface="Euphemia"/><a:font script="Cher" typeface="Plantagenet Cherokee"/><a:font script="Yiii" typeface="Microsoft Yi Baiti"/><a:font script="Tibt" typeface="Microsoft Himalaya"/><a:font script="Thaa" typeface="MV Boli"/><a:font script="Deva" typeface="Mangal"/><a:font script="Telu" typeface="Gautami"/><a:font script="Taml" typeface="Latha"/><a:font script="Syrc" typeface="Estrangelo Edessa"/><a:font script="Orya" typeface="Kalinga"/><a:font script="Mlym" typeface="Kartika"/><a:font script="Laoo" typeface="DokChampa"/><a:font script="Sinh" typeface="Iskoola Pota"/><a:font script="Mong" typeface="Mongolian Baiti"/><a:font script="Viet" typeface="Arial"/><a:font script="Uigh" typeface="Microsoft Uighur"/><a:font script="Geor" typeface="Sylfaen"/><a:font script="Armn" typeface="Arial"/><a:font script="Bugi" typeface="Leelawadee UI"/><a:font script="Bopo" typeface="Microsoft JhengHei"/><a:font script="Java" typeface="Javanese Text"/><a:font script="Lisu" typeface="Segoe UI"/><a:font script="Mymr" typeface="Myanmar Text"/><a:font script="Nkoo" typeface="Ebrima"/><a:font script="Olck" typeface="Nirmala UI"/><a:font script="Osma" typeface="Ebrima"/><a:font script="Phag" typeface="Phagspa"/><a:font script="Syrn" typeface="Estrangelo Edessa"/><a:font script="Syrj" typeface="Estrangelo Edessa"/><a:font script="Syre" typeface="Estrangelo Edessa"/><a:font script="Sora" typeface="Nirmala UI"/><a:font script="Tale" typeface="Microsoft Tai Le"/><a:font script="Talu" typeface="Microsoft New Tai Lue"/><a:font script="Tfng" typeface="Ebrima"/></a:minorFont></a:fontScheme><a:fmtScheme name="Office"><a:fillStyleLst><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:gradFill rotWithShape="1"><a:gsLst><a:gs pos="0"><a:schemeClr val="phClr"><a:lumMod val="110000"/><a:satMod val="105000"/><a:tint val="67000"/></a:schemeClr></a:gs><a:gs pos="50000"><a:schemeClr val="phClr"><a:lumMod val="105000"/><a:satMod val="103000"/><a:tint val="73000"/></a:schemeClr></a:gs><a:gs pos="100000"><a:schemeClr val="phClr"><a:lumMod val="105000"/><a:satMod val="109000"/><a:tint val="81000"/></a:schemeClr></a:gs></a:gsLst><a:lin ang="5400000" scaled="0"/></a:gradFill><a:gradFill rotWithShape="1"><a:gsLst><a:gs pos="0"><a:schemeClr val="phClr"><a:satMod val="103000"/><a:lumMod val="102000"/><a:tint val="94000"/></a:schemeClr></a:gs><a:gs pos="50000"><a:schemeClr val="phClr"><a:satMod val="110000"/><a:lumMod val="100000"/><a:shade val="100000"/></a:schemeClr></a:gs><a:gs pos="100000"><a:schemeClr val="phClr"><a:lumMod val="99000"/><a:satMod val="120000"/><a:shade val="78000"/></a:schemeClr></a:gs></a:gsLst><a:lin ang="5400000" scaled="0"/></a:gradFill></a:fillStyleLst><a:lnStyleLst><a:ln w="6350" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/><a:miter lim="800000"/></a:ln><a:ln w="12700" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/><a:miter lim="800000"/></a:ln><a:ln w="19050" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/><a:miter lim="800000"/></a:ln></a:lnStyleLst><a:effectStyleLst><a:effectStyle><a:effectLst/></a:effectStyle><a:effectStyle><a:effectLst/></a:effectStyle><a:effectStyle><a:effectLst><a:outerShdw blurRad="57150" dist="19050" dir="5400000" algn="ctr" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="63000"/></a:srgbClr></a:outerShdw></a:effectLst></a:effectStyle></a:effectStyleLst><a:bgFillStyleLst><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:solidFill><a:schemeClr val="phClr"><a:tint val="95000"/><a:satMod val="170000"/></a:schemeClr></a:solidFill><a:gradFill rotWithShape="1"><a:gsLst><a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="93000"/><a:satMod val="150000"/><a:shade val="98000"/><a:lumMod val="102000"/></a:schemeClr></a:gs><a:gs pos="50000"><a:schemeClr val="phClr"><a:tint val="98000"/><a:satMod val="130000"/><a:shade val="90000"/><a:lumMod val="103000"/></a:schemeClr></a:gs><a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="63000"/><a:satMod val="120000"/></a:schemeClr></a:gs></a:gsLst><a:lin ang="5400000" scaled="0"/></a:gradFill></a:bgFillStyleLst></a:fmtScheme></a:themeElements><a:objectDefaults/><a:extraClrSchemeLst/><a:extLst><a:ext uri="{05A4C25C-085E-4340-85A3-A5531E510DB2}"><thm15:themeFamily xmlns:thm15="http://schemas.microsoft.com/office/thememl/2012/main" name="Office Theme" id="{62F939B6-93AF-4DB8-9C6B-D6C7DFDC589F}" vid="{4A3C46E8-61CC-4603-A589-7422A47A8E4A}"/></a:ext></a:extLst></a:theme>',xlWorkbookXml:'<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\n<workbook xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x15 xr xr6 xr10 xr2" xmlns:x15="http://schemas.microsoft.com/office/spreadsheetml/2010/11/main" xmlns:xr="http://schemas.microsoft.com/office/spreadsheetml/2014/revision" xmlns:xr6="http://schemas.microsoft.com/office/spreadsheetml/2016/revision6" xmlns:xr10="http://schemas.microsoft.com/office/spreadsheetml/2016/revision10" xmlns:xr2="http://schemas.microsoft.com/office/spreadsheetml/2015/revision2"><fileVersion appName="xl" lastEdited="7" lowestEdited="7" rupBuild="20325"/><workbookPr defaultThemeVersion="166925"/><mc:AlternateContent xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"><mc:Choice Requires="x15"><x15ac:absPath url="C:UsersjqwidgetsDesktop" xmlns:x15ac="http://schemas.microsoft.com/office/spreadsheetml/2010/11/ac"/></mc:Choice></mc:AlternateContent><xr:revisionPtr revIDLastSave="0" documentId="13_ncr:1_{0DEDCB6D-5403-4CD8-AAA5-59B6D238A8B6}" xr6:coauthVersionLast="34" xr6:coauthVersionMax="34" xr10:uidLastSave="{00000000-0000-0000-0000-000000000000}"/><bookViews><workbookView xWindow="0" yWindow="0" windowWidth="19200" windowHeight="6950" xr2:uid="{0CB664E6-3800-4A88-B158-B46A682E7484}"/></bookViews><sheets><sheet name="Sheet1" sheetId="1" r:id="rId1"/></sheets><calcPr calcId="179021"/><extLst><ext uri="{140A7094-0E35-4892-8432-C4D2E57EDEB5}" xmlns:x15="http://schemas.microsoft.com/office/spreadsheetml/2010/11/main"><x15:workbookPr chartTrackingRefBase="1"/></ext></extLst></workbook>',Content_TypesXml:'<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\n<Types xmlns="http://schemas.openxmlformats.org/package/2006/content-types"><Default Extension="bin" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings"/><Default Extension="rels" ContentType="application/vnd.openxmlformats-package.relationships+xml"/><Default Extension="xml" ContentType="application/xml"/><Override PartName="/xl/workbook.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml"/><Override PartName="/xl/worksheets/sheet1.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml"/><Override PartName="/xl/theme/theme1.xml" ContentType="application/vnd.openxmlformats-officedocument.theme+xml"/><Override PartName="/xl/styles.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml"/><Override PartName="/xl/sharedStrings.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml"/><Override PartName="/docProps/core.xml" ContentType="application/vnd.openxmlformats-package.core-properties+xml"/><Override PartName="/docProps/app.xml" ContentType="application/vnd.openxmlformats-officedocument.extended-properties+xml"/></Types>'}}generateDefaultStyle(e){const t=this,n={},a=t.datafields,i=t.complexHeader?e[t.complexHeader.length]:e[+t.exportHeader];if(!i)return n;for(let o=0;o<a.length;o++)i[a[o]]instanceof Date&&(n.columns||(n.columns=[]),n.columns[a[o]]={format:"d"});return n}generateGroupRow(e){const t=e.rowNumber,n="A"+t,a=`        <row r="${t}" outlineLevel="${e.outlineLevel}" spans="1:${e.numberOfColumns}"${this.getCustomRowHeight(t-1)} x14ac:dyDescent="0.45">\n            <c r="${n}" t="s" s="0">\n                <v>${e.sharedStringIndex}</v>\n            </c>\n        </row>\n`;return e.mergedCells.push({from:n,to:this.columnsArray[e.numberOfColumns-1]+t}),a}generateSharedStrings(e){const t=this,n=t.datafields,a=[];let i="",o=0,r=0;function l(s){o++,-1===a.indexOf(s)&&(r++,a.push(s),s=(s=(s=(s=(s=s.replace(/&(?!amp;)/g,"&amp;")).replace(/'/g,"&apos;")).replace(/"/g,"&quot;")).replace(/>/g,"&gt;")).replace(/</g,"&lt;"),i+=`<si><t>${s}</t></si>`)}for(let s=0;s<e.length;s++){const c=e[s];for(let u=0;u<n.length;u++){let p=c[n[u]];null!==p||t.allowNull||(p=""),"string"==typeof p&&l(p)}}if(t.groupLabels)for(let s=0;s<t.groupLabels.length;s++)l(t.groupLabels[s]);return i=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\n<sst xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" count="${o}" uniqueCount="${r}">${i}</sst>`,{collection:a,xml:i}}generateSheet1(e,t){const n=this,a=n.columnsArray.length,o=n.columnsArray[a-1]+e.length,r=n.datafields,l=n.getFilters(),s=[].concat(n.complexHeaderMergedCells);let c=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\n<worksheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x14ac xr xr2 xr3" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac" xmlns:xr="http://schemas.microsoft.com/office/spreadsheetml/2014/revision" xmlns:xr2="http://schemas.microsoft.com/office/spreadsheetml/2015/revision2" xmlns:xr3="http://schemas.microsoft.com/office/spreadsheetml/2016/revision3" xr:uid="{7F25248B-C640-4C64-AD47-C0EA0E5D90D0}">\n    <sheetPr filterMode="${""!==l}" />\n    <dimension ref="A1:${o}" />\n    <sheetViews>\n        <sheetView tabSelected="1" workbookViewId="0" />\n    </sheetViews>\n    <sheetFormatPr defaultRowHeight="14.5" x14ac:dyDescent="0.35" />${n.getCustomColumnWidths()}\n    <sheetData>\n`;function u(p,g){return n.columnsArray[p]+g}for(let p=0;p<=e.length;p++){const g=e[p],b=p+1;let v="";if(n.actualHierarchy){const x=e[p-1];x&&x._collapsed&&(!g||x._level>g._level)&&(v=' collapsed="true"')}if(p===e.length){v&&(c+=`        <row r="${b}" outlineLevel="${Math.max(e[p-1]._level-2,0)}" hidden="false" collapsed="true" />\n`);break}let y=`        <row r="${b}"${n.getOutlineLevel(g)} hidden="${g._hidden||g._collapsed||!1}"${v} spans="1:${a}"${n.getCustomRowHeight(b-1)} x14ac:dyDescent="0.45">\n`;for(let x=0;x<r.length;x++){const D=n.getXLSXCellStyle(u(x,b));y+=n.getActualCellData(g[r[x]],{r:u(x,b),s:D},t)}y+="        </row>\n",c+=y}return c+=`    </sheetData>${n.conditionalFormattingXLSX.conditions}${l}${n.getMergedCells(s)}\n    <pageMargins left="0.7" right="0.7" top="0.75" bottom="0.75" header="0.3" footer="0.3" />\n    <pageSetup paperSize="9" orientation="portrait" r:id="rId1" />\n</worksheet>`,c}generateSheet1WithGrouping(e,t){const n=this,a=n.columnsArray.length,o=n.columnsArray[a-1]+e.length,r=n.datafields,l=[].concat(n.complexHeaderMergedCells);let s=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\n<worksheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x14ac xr xr2 xr3" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac" xmlns:xr="http://schemas.microsoft.com/office/spreadsheetml/2014/revision" xmlns:xr2="http://schemas.microsoft.com/office/spreadsheetml/2015/revision2" xmlns:xr3="http://schemas.microsoft.com/office/spreadsheetml/2016/revision3" xr:uid="{7F25248B-C640-4C64-AD47-C0EA0E5D90D0}">\n    <dimension ref="A1:${o}" />\n    <sheetViews>\n        <sheetView tabSelected="1" workbookViewId="0" />\n    </sheetViews>\n    <sheetFormatPr defaultRowHeight="14.5" x14ac:dyDescent="0.35" />${n.getCustomColumnWidths()}\n    <sheetData>\n`,c=0,u=[];function p(g,b){return n.columnsArray[g]+b}e:for(let g=0;g<e.length;g++){const b=e[g],v=g+1+c;let y=0,x="";if(!n.exportHeader||!n.complexHeader&&0!==g||n.complexHeader&&g>=n.complexHeader.length){let T="";for(let M=0;M<n.groupBy.length;M++){const A=n.groupBy[M],B=b[A],O=n.groups[A][B];if(T+=B,-1===u.indexOf(T)){let N=t.indexOf(O);s+=n.generateGroupRow({rowNumber:v,outlineLevel:y,numberOfColumns:a,sharedStringIndex:N,mergedCells:l}),u.push(T),g--,c++;continue e}y++}x=` outlineLevel="${y}"`}let D=`        <row r="${v}"${x} spans="1:${a}"${n.getCustomRowHeight(v-1)} x14ac:dyDescent="0.45">\n`;for(let T=0;T<r.length;T++){const M=n.getXLSXCellStyle(p(T,g+1));D+=n.getActualCellData(b[r[T]],{r:p(T,v),s:M},t)}D+="        </row>\n",s+=D}return s+=`    </sheetData>${n.getMergedCells(l)}\n    <pageMargins left="0.7" right="0.7" top="0.75" bottom="0.75" header="0.3" footer="0.3" />\n    <pageSetup paperSize="9" orientation="portrait" r:id="rId1" />\n</worksheet>`,s}getActualCellData(e,t,n){const a=t.r,i=t.s||' s="0"';return null!==e||this.allowNull||(e=""),"string"==typeof e?`            <c r="${a}" t="s"${i}>\n                <v>${n.indexOf(e)}</v>\n            </c>\n`:"boolean"==typeof e?`            <c r="${a}" t="b"${i}>\n                <v>${+e}</v>\n            </c>\n`:e instanceof Date?`            <c r="${a}"${i}>\n                <v>${(e.getTime()+this.timeBetween1900And1970)/864e5+2}</v>\n            </c>\n`:`            <c r="${a}"${i}>\n                <v>${e}</v>\n            </c>\n`}getColumnsArray(){const e=this.datafields.length,t=[];function n(a){return a<26?"":String.fromCharCode(64+Math.floor(a/26))}for(let a=0;a<e;a++)t.push(n(a)+String.fromCharCode(65+(a<26?a:a%26)));this.columnsArray=t}getColumnStyle(){const e=this,t=e.style;if(!t)return"        .header { border: 1px solid black; padding: 5px; }\n        .column { border: 1px solid black; padding: 5px; }\n        .group { background-color: #FFFFFF; color: #000000; font-weight: bold; }";let n;n=t.removeDefault?{header:"",column:"",group:""}:{header:"border: 1px solid black; padding: 5px; ",column:"white-space: nowrap; overflow: hidden; border: 1px solid black; padding: 5px; ",group:"background-color: #FFFFFF; color: #000000; font-weight: bold; "};const a=e.data[0];let i="";const o=t.header||{};for(let l in o){if(!Object.prototype.hasOwnProperty.call(o,l))continue;const s=o[l];if(a[l]){n["header"+l]||(n["header"+l]="");for(let c in s)if(Object.prototype.hasOwnProperty.call(s,c)){const u=Smart.Utilities.Core.toDash(c)+": "+s[c]+"; ";n["header"+l]+=u,"width"===c&&(n["column"+l]||(n["column"+l]=""),n["column"+l]+=u)}}else n.header+="height"===l&&e.complexHeader?"height: "+parseInt(o[l],10)/e.complexHeader.length+"px; ":Smart.Utilities.Core.toDash(l)+": "+o[l]+"; "}const r=t.columns||{};for(let l in r){if(!Object.prototype.hasOwnProperty.call(r,l))continue;const s=r[l];if(a[l]){n["column"+l]||(n["column"+l]="");for(let c in s)isNaN(c)&&Object.prototype.hasOwnProperty.call(s,c)&&"format"!==c&&(n["column"+l]+=Smart.Utilities.Core.toDash(c)+": "+s[c]+"; ")}else n.column+=Smart.Utilities.Core.toDash(l)+": "+s+"; "}for(let l in n)Object.prototype.hasOwnProperty.call(n,l)&&(i+=`        .${l} { ${n[l]}}\n`);return t.custom&&(i+=`${t.custom}\n`),i}getCustomColumnWidths(){const e=this;if(!e.style||!e.columnWidth||0===e.columnWidth.length)return"";let t="\n    <cols>\n";for(let n=0;n<e.columnWidth.length;n++){let a=e.columnWidth[n];void 0!==a&&(a=Math.round(parseFloat(a))/7,t+=`        <col min="${n+1}" max="${n+1}" width="${a}" customWidth="1" />\n`)}return t+="    </cols>",t}getCustomFilter(e,t){let n,a="equal";switch(e instanceof Date&&(e=(e.getTime()+this.timeBetween1900And1970)/864e5+2),t=t.toUpperCase()){case"EMPTY":n="";break;case"NOT_EMPTY":n="",a="notEqual";break;case"CONTAINS":case"CONTAINS_CASE_SENSITIVE":n=`*${e}*`;break;case"DOES_NOT_CONTAIN":case"DOES_NOT_CONTAIN_CASE_SENSITIVE":n=`*${e}*`,a="notEqual";break;case"STARTS_WITH":case"STARTS_WITH_CASE_SENSITIVE":n=`${e}*`;break;case"ENDS_WITH":case"ENDS_WITH_CASE_SENSITIVE":n=`*${e}`;break;case"EQUAL":case"EQUAL_CASE_SENSITIVE":n=e;break;case"NULL":n=null;break;case"NOT_NULL":n=null,a="notEqual";break;case"NOT_EQUAL":n=e,a="notEqual";break;case"LESS_THAN":n=e,a="lessThan";break;case"LESS_THAN_OR_EQUAL":n=e,a="lessThanOrEqual";break;case"GREATER_THAN":n=e,a="greaterThan";break;case"GREATER_THAN_OR_EQUAL":n=e,a="greaterThanOrEqual"}return`                <customFilter val="${n}" operator="${a}"/>\n`}getCustomRowHeight(e){const t=this;return t.style&&(t.rowHeight[e]||t.defaultRowHeight)||""}getDatafields(e){const t=e[0],n=[];for(let a in t)Object.prototype.hasOwnProperty.call(t,a)&&"_"!==a.charAt(0)&&n.push(a);this.datafields=n}getFilters(){const e=this,t=e.filterBy;if(!t)return"";let n="";for(let a in t)if(Object.prototype.hasOwnProperty.call(t,a)){const i=e.datafields.indexOf(a);if(-1===i)continue;const o=t[a],r=o.filters;n+=`        <filterColumn colId="${i}">\n            <customFilters and="${!o.operator}">\n`;for(let l=0;l<r.length;l++)n+=e.getCustomFilter(r[l].value,r[l].condition);n+="            </customFilters>\n        </filterColumn>"}return n?(n=`\n    <autoFilter ref="A1:${e.columnsArray[e.columnsArray.length-1]+e.data.length}">\n${n}\n    </autoFilter>`,n):""}getGroupLabels(e){const t=this,n=void 0!==t.xlsxStartIndex?t.xlsxStartIndex:+t.exportHeader,a={},i=[];for(let o=n;o<e.length;o++){const r=e[o];for(let l=0;l<t.groupBy.length;l++){const s=t.groupBy[l],c=r[s];let u=a[s];void 0===u&&(a[s]={},u=a[s]),void 0===u[c]&&(u[c]=(t.exportHeader?e[n-1][s]:s)+": "+c,i.push(u[c]))}}t.groups=a,t.groupLabels=i}getHTMLHeader(e,t){const n=this;let a="\n        <thead>\n";if(!n.complexHeader){a+="            <tr>\n";for(let i=0;i<e.length;i++){const o=e[i];a+=`                <th class="header header${o}">${t[0][o]}</th>\n`}return a+="            </tr>\n        </thead>",a}for(let i=0;i<n.complexDataFieldsHeader.length;i++){const o=n.complexDataFieldsHeader[i];a+="            <tr>\n";for(let r=0;r<o.length;r++){const l=o[r];let s=1,c=1;if(o[r-1]&&o[r-1]===l||n.complexDataFieldsHeader[i-1]&&n.complexDataFieldsHeader[i-1][r]===l)continue;let u=r+1;for(;o[u]&&o[u]===o[u-1];)s++,u++;for(u=i+1;n.complexDataFieldsHeader[u]&&n.complexDataFieldsHeader[u][r]===l;)c++,u++;a+=`                <th class="header${i===n.complexHeader.length-1||c+i===n.complexHeader.length?" header"+e[r]:""}" colspan="${s}" rowspan="${c}">${n.complexHeader[i][r]}</th>\n`}a+="            </tr>\n"}return a+="        </thead>",a}getConditionalFormatting(){const e=this,t=e.conditionalFormatting;if(!t)return void(e.conditionalFormattingXLSX={conditions:"",styles:""});const n=[];let a="",i="";for(let o=t.length-1;o>=0;o--){const r=t[o],l=e.columnsArray[e.datafields.indexOf(r.column)],s=l+(e.xlsxStartIndex+1),c=s+":"+l+e.data.length,u=r.background+r.color,p=e.getConditionalAttributes(r,s);let g=n.indexOf(u);-1===g&&(i+=`        <dxf>\n            <font>\n                <b val="0"/>\n                <i val="0"/>\n                <color rgb="${"White"===r.color?"FFFFFFFF":"FF000000"}"/>\n                <sz val="10"/>\n            </font>\n            <fill>\n                <patternFill>\n                    <bgColor rgb="${e.toARGB(r.background)}"/>\n                </patternFill>\n            </fill>\n        </dxf>\n`,g=n.length,n.push(u)),a+=`    <conditionalFormatting sqref="${c}">\n        <cfRule dxfId="${g}" text="${p.text}" rank="${p.rank}" percent="${p.percent}" bottom="${p.bottom}" equalAverage="${p.equalAverage}" aboveAverage="${p.aboveAverage}"${p.operator}${p.timePeriod} priority="${o+2}" type="${p.type}">\n${p.formula}        </cfRule>\n    </conditionalFormatting>\n`}i=`    <dxfs count="${n.length}">\n${i}    </dxfs>`,e.conditionalFormattingXLSX={conditions:a,styles:i}}getConditionalAttributes(e,t){let a=e.comparator,i="",o=0,r=0,l=0,s=0,c="",u="",p="",g="";switch(e.condition){case"equal":c="equal",p="cellIs",g=`            <formula>${a}</formula>\n`;break;case"lessThan":c="lessThan",p="cellIs",g=`            <formula>${a}</formula>\n`;break;case"greaterThan":c="greaterThan",p="cellIs",g=`            <formula>${a}</formula>\n`;break;case"notEqual":c="notEqual",p="cellIs",g=`            <formula>${a}</formula>\n`;break;case"between":c="between",p="cellIs",g=`            <formula>${e.min}</formula>\n            <formula>${e.max}</formula>\n`;break;case"duplicate":p="duplicateValues",g="            <formula>0</formula>\n";break;case"topNItems":o=a,p="top10";break;case"bottomNItems":o=a,l=1,p="top10";break;case"topNPercent":o=a,r=1,p="top10";break;case"bottomNPercent":o=a,r=1,l=1,p="top10";break;case"aboveAverage":s=1,p="aboveAverage",g="            <formula>0</formula>\n";break;case"belowAverage":p="aboveAverage",g="            <formula>0</formula>\n";break;case"contains":i=a,c="containsText",p="containsText",g=`            <formula>NOT(ISERROR(SEARCH("${a}",${t})))</formula>\n`;break;case"doesNotContain":i=a,c="notContains",p="notContainsText",g=`            <formula>ISERROR(SEARCH("${a}",${t}))</formula>\n`;break;case"dateOccur":u=` timePeriod="${a}"`,p="timePeriod"}return c&&(c=` operator="${c}" `),{text:i,rank:o,percent:r,bottom:l,equalAverage:0,aboveAverage:s,operator:c,timePeriod:u,type:p,formula:g}}getMergedCells(e){const t=this;let n="";for(let a=0;a<e.length;a++)e[a].from!==e[a].to&&(n+=`\n        <mergeCell ref="${e[a].from}:${e[a].to}" />\n`);if(t.mergedCells)for(let a=0;a<t.mergedCells.length;a++){const i=t.mergedCells[a];i.rowspan<2&&i.colspan<2||(n+=`\n        <mergeCell ref="${t.columnsArray[i.cell[0]]+(i.cell[1]+t.xlsxStartIndex+1)}:${t.columnsArray[i.cell[0]+i.colspan-1]+(i.cell[1]+t.xlsxStartIndex+i.rowspan)}" />\n`)}return n&&(n=`\n    <mergeCells count="${e.length}">${n}    </mergeCells>`),n}getNumFmtIndex(e,t){let n=t.collection.indexOf(e);return-1===n?(n=t.collection.length+100,t.collection.push(e),t.xml+=`<numFmt numFmtId="${n}" formatCode="${e}"/>`):n+=100,n}getOutlineLevel(e){return this.actualHierarchy&&1!==e._level?` outlineLevel="${e._level-1}"`:""}getRowStyle(){const e=this.style;if(!e)return"";const t=e.rows;if(!t)return"";const n={row:""};let a="";for(let o in t){if(!Object.prototype.hasOwnProperty.call(t,o)||"alternationCount"===o||"alternationStart"===o||"alternationEnd"===o)continue;const r=t[o];if(-1===o.indexOf("alt"))if(isNaN(o))n.row+=Smart.Utilities.Core.toDash(o)+": "+t[o]+"; ";else{n["row"+o]||(n["row"+o]="");for(let l in r)Object.prototype.hasOwnProperty.call(r,l)&&(n["row"+o]+=Smart.Utilities.Core.toDash(l)+": "+r[l]+"; ")}else{const l=o.slice(16,17),s=o.slice(17);n["rowN"+l]||(n["rowN"+l]=""),n["rowN"+l]+="Color"===s?"color : "+r+"; ":"BorderColor"===s?"border-color : "+r+"; ":"background-color : "+r+"; "}}let i=Object.keys(n);i.sort(function(o,r){if("row"===o)return-1;if("row"===r)return 1;const l=!isNaN(o.slice(3)),s=!isNaN(r.slice(3));return l&&!s?1:!l&&s?-1:+(o<r)});for(let o=0;o<i.length;o++)a+=`        .${i[o]} { ${n[i[o]]}}\n`;return a}getTableStyle(){const e=this.style;if(!e)return' style="table-layout: fixed; border: 1px solid black; border-collapse: collapse;"';let t="table-layout: fixed; ";for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&-1===["header","columns","rows","removeDefault","custom"].indexOf(n)&&(t+=Smart.Utilities.Core.toDash(n)+": "+e[n]+"; ");return t&&(t=' style="'+t+'"'),t}getXLSXCellStyle(e){return void 0!==this.cellStyleMapping[e]?` s="${this.cellStyleMapping[e]}"`:""}getXLSXFormat(e,t){if("number"==typeof t){if(!/^([a-zA-Z]\d*)$/g.test(e))return e;let n=parseFloat(e.slice(1))||0,a=n>0?"."+"0".repeat(n):"";switch(e=e.slice(0,1)){case"C":case"c":return"$#,0"+a;case"D":case"d":return n?"0".repeat(n):"0";case"E":case"e":return"0"+a+e+"000";case"F":case"f":return"0"+a;case"N":case"n":return"#,0"+a;case"P":case"p":return"#,0"+a+" %";default:return}}else if(t instanceof Date){switch(e){case"d":return"m/d/yyyy";case"D":return"nnnnmmmm dd, yyyy";case"t":return"h:m AM/PM";case"T":return"h:mm:ss AM/PM";case"f":return"nnnnmmmm dd, yyyy h:m AM/PM";case"F":return"nnnnmmmm dd, yyyy h:mm:ss AM/PM";case"M":return"mmmm d";case"Y":return"yyyy mmmm";case"FP":case"PP":return"yyyy-mm-dd hh:mm:ss";case"FT":case"PT":return"hh:mm:ss"}return(e=(e=(e=e.replace(/f|u|n|p|e|a|x|o/gi,"")).replace(/tt/gi,"AM/PM")).replace(/:{2,}|:\s|:$|\.$/g,"")).trim()}}processColumnStyle(e){const t=this,n=e.header,a=e.columns,i=t.data[0],o=t.xlsxStartIndex;if(t.columnWidth=[],o&&n)for(let r=0;r<t.columnsArray.length;r++){const l=t.columnsArray[r],s=l+o,c=n[t.datafields[r]];for(let u in n)if(Object.prototype.hasOwnProperty.call(n,u)&&void 0===i[u])if(t.complexHeader)for(let p=0;p<t.complexHeader.length;p++)"height"!==u?t.storeCellStyle(l+(p+1),u,n[u]):t.rowHeight[p]=` ht="${parseFloat(n.height)/t.complexHeader.length/2}"`;else{if("height"===u){t.rowHeight[0]=` ht="${parseFloat(n.height)/2}"`;continue}t.storeCellStyle(s,u,n[u])}if(c)for(let u in c)if(Object.prototype.hasOwnProperty.call(c,u)){if("width"===u){t.columnWidth[r]=c.width;continue}t.storeCellStyle(s,u,c[u])}}else if(n)for(let r=0;r<t.columnsArray.length;r++){const l=n[t.datafields[r]];l&&void 0!==l.width&&(t.columnWidth[r]=l.width)}if(!a)return"";for(let r=o;r<t.data.length;r++)for(let l=0;l<t.columnsArray.length;l++){const s=t.columnsArray[l]+(r+1),c=t.datafields[l],u=a[c];for(let p in a)Object.prototype.hasOwnProperty.call(a,p)&&void 0===i[p]&&t.storeCellStyle(s,p,a[p]);if(u)for(let p in u)isNaN(p)&&Object.prototype.hasOwnProperty.call(u,p)&&t.storeCellStyle(s,p,u[p],t.data[r][c])}}processComplexHeader(e,t,n){const a=this,i={},o=-1!==["html","jpeg","pdf","png","xlsx"].indexOf(n)&&e.columngroups,r=[],l={},s={},c=[],u=[];let p=0;function g(v){for(let y=0;y<e.columngroups.length;y++){const x=e.columngroups[y];if(x.name===v)return x}}function b(v,y){const x=[];for(;v;){if(x.unshift(v[y]),!v.parentGroup)return x;v=g(v.parentGroup)}}if(o){for(let v=0;v<e.columngroups.length;v++){const y=e.columngroups[v],x=b(y,"label");l[y.name]=x,s[y.name]=b(y,"name"),p=Math.max(p,x.length)}p++;for(let v=0;v<p;v++)c[v]=[],u[v]=[]}for(let v=0;v<e.columns.length;v++){const y=e.columns[v];if(i[y.dataField]=y.label,!o||(r[v]=y.dataField,c[p-1][v]=y.label,u[p-1][v]=y.dataField,!y.columnGroup))continue;const x=l[y.columnGroup],D=s[y.columnGroup];if(x)for(let T=0;T<x.length;T++)c[T][v]=x[T],u[T][v]=D[T]}if(c.length>1){const v=Object.keys(i).length;for(let y=0;y<p-1;y++){const x={};for(let D=0;D<v;D++){if(void 0===c[y][D]){let T=y+1;for(;void 0===c[T][D];)T++;c[y][D]=c[T][D],u[y][D]=u[T][D]}x[r[D]]=c[y][D]}"xlsx"===n&&t.splice(y,0,x)}if(a.complexHeader=c,a.complexDataFieldsHeader=u,"xlsx"!==n)t.unshift(i);else{t.splice(p-1,0,i);const y={};for(let x=0;x<p;x++)for(let D=0;D<v;D++){const T=u[x][D];if(y[T]){const M=y[T].to;if(x-M[0]>1||D-M[1]>1){y[T+Math.random().toString(36)]=y[T],y[T]={from:[x,D],to:[x,D]};continue}y[T].to=[x,D]}else y[T]={from:[x,D]},y[T].to=y[T].from}a.complexHeaderMergeInfo=y}}else t.unshift(i)}processHierarchicalData(e,t){const n=this,a="xlsx"!==t?+n.exportHeader:n.xlsxStartIndex,i={},o=[];let r=0,l=!1;if(void 0===e[a]._keyDataField)return n.processNestedData(e,t,a);for(let s=a;s<e.length;s++){const c=Object.assign({},e[s]);let u=c._parentDataField;void 0===u&&(u=null),void 0===i[u]?i[u]=[c]:i[u].push(c)}if(a)for(let s=0;s<a;s++)o.push(Object.assign({},e[s])),-1===["json","pdf","xml"].indexOf(t)&&(o[s]._level=1);return"json"!==t&&"xml"!==t?function s(c,u,p){const g=i[c];if(r=Math.max(r,u),void 0!==g)for(let b=0;b<g.length;b++){const v=g[b],y=v._keyDataField;v._collapsed=p,v._level=u,o.push(v),i[y]&&(l=!0,v._expanded=void 0===v._expanded||v._expanded,s(y,u+1,p||!v._expanded))}}(null,1,!1):function s(c,u,p){const g=i[c];if(r=Math.max(r,u),void 0!==g)for(let b=0;b<g.length;b++){const v=g[b],y=v._keyDataField;let x;if("json"===t){x={};for(let D in v)Object.prototype.hasOwnProperty.call(v,D)&&"_"!==D.charAt(0)&&(x[D]=v[D])}else x=Object.assign({},v);p.push(x),i[y]&&(l=!0,x.rows=[],s(y,u+1,x.rows))}}(null,1,o),l||(n.actualHierarchy=!1),n.maxLevel=r,o}processNestedData(e,t,n){const i=[];let o=0,r=!1;if(n)for(let l=0;l<n;l++)i.push(Object.assign({},e[l])),-1===["json","pdf","xml"].indexOf(t)&&(i[l]._level=1);return"json"!==t&&"xml"!==t?function l(s,c,u,p){o=Math.max(o,u);for(let g=s;g<c.length;g++){const b=Object.assign({},c[g]);b._collapsed=p,b._level=u,i.push(b),b.children&&b.children.length>0&&(r=!0,b._expanded=void 0===b._expanded||b._expanded,l(0,b.children,u+1,p||!b._expanded)),delete b.children}}(n,e,1,!1):function l(s,c,u,p){o=Math.max(o,p);for(let g=s;g<c.length;g++){const b=Object.assign({},c[g]);1===p?i[g]=b:u[g]=b,b.children&&b.children.length>0&&(r=!0,b.rows=[],l(0,b.children,b.rows,p+1)),delete b.children}}(n,e,void 0,1),r||(this.actualHierarchy=!1),this.maxLevel=o,i}processRowStyle(e){const t=this,n=e.rows;if(t.rowHeight=[],!n)return;const a=t.xlsxStartIndex;function i(o,r,l){for(let s=0;s<t.columnsArray.length;s++)t.storeCellStyle(t.columnsArray[s]+(o+1+a),r,l)}n.height&&(t.defaultRowHeight=` ht="${parseFloat(n.height)/2}"`);for(let o=a;o<t.data.length;o++){const r=o-a;for(let l in n)Object.prototype.hasOwnProperty.call(n,l)&&-1===l.indexOf("alt")&&isNaN(l)&&"height"!==l&&i(r,l,n[l]);if(n.alternationCount&&((void 0===n.alternationStart||r>=n.alternationStart)&&(void 0===n.alternationEnd||r<=n.alternationEnd)||n.alternationStart===n.alternationEnd)){const l=(r-(n.alternationStart||0))%n.alternationCount;n[`alternationIndex${l}Color`]&&i(r,"color",n[`alternationIndex${l}Color`]),n[`alternationIndex${l}BorderColor`]&&i(r,"borderColor",n[`alternationIndex${l}BorderColor`]),n[`alternationIndex${l}BackgroundColor`]&&i(r,"backgroundColor",n[`alternationIndex${l}BackgroundColor`])}if(n[r])for(let l in n[r])if(Object.prototype.hasOwnProperty.call(n[r],l)){if("height"===l){t.rowHeight[o]=` ht="${parseFloat(n[r].height)/2}"`;continue}i(r,l,n[r][l])}}}storeCellStyle(e,t,n){const a=this.styleMap[e];switch(t){case"backgroundColor":a.fills.fgColor=n;break;case"color":a.fonts.color=n;break;case"fontFamily":a.fonts.name=n.replace(/"/g,"'");break;case"fontSize":a.fonts.sz=parseFloat(n);break;case"fontStyle":"italic"===n?a.fonts.i=!0:delete a.fonts.i;break;case"fontWeight":"bold"===n?a.fonts.b=!0:delete a.fonts.b;break;case"numFmt":a.numFmt=n;break;case"textAlign":a.alignment.horizontal=n;break;case"textDecoration":"underline"===n?a.fonts.u=!0:delete a.fonts.u;break;case"verticalAlign":"middle"===n&&(n="center"),a.alignment.vertical=n}}toARGB(e){e=e.replace(/\s/g,"");const t=/rgb\((\d+),(\d+),(\d+)\)/gi.exec(e);if(null!==t){const i=parseFloat(t[1]).toString(16).toUpperCase(),o=parseFloat(t[2]).toString(16).toUpperCase(),r=parseFloat(t[3]).toString(16).toUpperCase();return"FF"+"0".repeat(2-i.length)+i+"0".repeat(2-o.length)+o+"0".repeat(2-r.length)+r}const n=/rgba\((\d+),(\d+),(\d+)\,(\d*.\d+|\d+)\)/gi.exec(e);if(null!==n){const i=Math.round(255*parseFloat(n[4])).toString(16).toUpperCase(),o=parseFloat(n[1]).toString(16).toUpperCase(),r=parseFloat(n[2]).toString(16).toUpperCase(),l=parseFloat(n[3]).toString(16).toUpperCase();return"0".repeat(2-i.length)+i+"0".repeat(2-o.length)+o+"0".repeat(2-r.length)+r+"0".repeat(2-l.length)+l}const a=/^#(.)(.)(.)$/gi.exec(e);if(null!==a){const i=a[1].toUpperCase(),o=a[2].toUpperCase(),r=a[3].toUpperCase();return"FF"+i+i+o+o+r+r}return"FF"+e.toUpperCase().slice(1)}toggleableFunctionality(){const e=this;return e.actualHierarchy?`\n    <style type="text/css">\n        .toggle-element {\n            width: 5px;\n            height: 1px;\n            padding-right: 5px;\n            float: left;\n            text-align: right;\n            cursor: pointer;\n            user-select: none;\n        }\n\n        .collapsed {\n            display: none;\n        }\n    </style>\n    <script type="text/javascript">\n        window.onload = function () {\n            var expandChar = '${e.expandChar}',\n                collapseChar = '${e.collapseChar}',\n                toggleElements = document.getElementsByClassName('toggle-element');\n\n            function getParent(child) {\n                var prevSibling = child.previousElementSibling;\n\n                while (prevSibling) {\n                    if (child.getAttribute('level') > prevSibling.getAttribute('level')) {\n                        return prevSibling;\n                    }\n\n                    prevSibling = prevSibling.previousElementSibling;\n                }\n\n            }\n\n            function getFirstCollapsedAncestor(child) {\n                var parent = getParent(child);\n\n                while (parent) {\n                    if (parent.firstElementChild.firstElementChild.innerHTML === expandChar) {\n                        return parent;\n                    }\n\n                    parent = getParent(parent);\n                }\n            }\n\n            for (var i = 0; i < toggleElements.length; i++) {\n                toggleElements[i].addEventListener('click', function (event) {\n                    var expanded = this.innerHTML === collapseChar,\n                        row = this.parentElement.parentElement,\n                        sibling = row.nextElementSibling;\n\n                    if (expanded) {\n                        this.innerHTML = expandChar;\n                    }\n                    else {\n                        this.innerHTML = collapseChar;\n                    }\n\n                    while (sibling && row.getAttribute('level') < sibling.getAttribute('level')) {\n                        if (expanded) {\n                            sibling.style.display = 'none';\n                        }\n                        else {\n                            var firstCollapsedAncestor = getFirstCollapsedAncestor(sibling);\n\n                            if (!firstCollapsedAncestor || firstCollapsedAncestor === row) {\n                                sibling.classList.remove('collapsed');\n                                sibling.style.display = null;\n                            }\n\n                        }\n\n                        sibling = sibling.nextElementSibling;\n                    }\n                });\n            }\n        }\n    <\/script>`:""}generateStyles(e){const t=this;if(t.cellStyleMapping={},0===Object.keys(e).length&&!t.complexHeader)return`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\n<styleSheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x14ac x16r2 xr" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac" xmlns:x16r2="http://schemas.microsoft.com/office/spreadsheetml/2015/02/main" xmlns:xr="http://schemas.microsoft.com/office/spreadsheetml/2014/revision"><fonts count="1" x14ac:knownFonts="1"><font><sz val="11"/><color theme="1"/><name val="Calibri"/><family val="2"/><charset val="204"/><scheme val="minor"/></font></fonts><fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills><borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders><cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs><cellXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0" xfId="0"/></cellXfs><cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>${t.conditionalFormattingXLSX.styles||'<dxfs count="0"/>'}<tableStyles count="0" defaultTableStyle="TableStyleMedium2" defaultPivotStyle="PivotStyleLight16"/><extLst><ext uri="{EB79DEF2-80B8-43e5-95BD-54CBDDF9020C}" xmlns:x14="http://schemas.microsoft.com/office/spreadsheetml/2009/9/main"><x14:slicerStyles defaultSlicerStyle="SlicerStyleLight1"/></ext><ext uri="{9260A510-F301-46a8-8635-F512D64BE5F5}" xmlns:x15="http://schemas.microsoft.com/office/spreadsheetml/2010/11/main"><x15:timelineStyles defaultTimelineStyle="TimeSlicerStyleLight1"/></ext></extLst></styleSheet>`;t.styleMap={};for(let l=0;l<t.data.length;l++)for(let s=0;s<t.columnsArray.length;s++)t.styleMap[t.columnsArray[s]+(l+1)]={numFmts:{},fonts:{},fills:{},borders:{},alignment:{}};if(e&&e.columns)for(let l=0;l<t.columnsArray.length;l++){const s=t.datafields[l];if(!e.columns[s]||!e.columns[s].format)continue;const c=t.getXLSXFormat(e.columns[s].format,t.data[t.data.length-1][s]);c&&(e.columns[s].numFmt=c)}t.processRowStyle(e),t.processColumnStyle(e);const n={};for(let l=0;l<t.complexHeaderMergedCells.length;l++){const s=t.complexHeaderMergedCells[l];parseFloat(s.to[1])!==t.complexHeader.length?(t.styleMap[s.from].alignment.horizontal="center",t.styleMap[s.from].alignment.vertical="center"):n[s.to]=s.from}const a={xml:'<font><sz val="11" /><color theme="1" /><name val="Calibri" /><family val="2" /><charset val="204" /><scheme val="minor" /></font>',collection:["default"]},i={xml:'<fill><patternFill patternType="none" /></fill><fill><patternFill patternType="gray125" /></fill>',collection:["default","gray125"]},o={xml:"",collection:[]},r={xml:'<xf fontId="0" fillId="0" borderId="1"/>',collection:["default"]};for(let l=0;l<t.data.length;l++)for(let s=0;s<t.columnsArray.length;s++){const c=t.columnsArray[s]+(l+1),u=t.styleMap[c];let p="",g="",b="",v=[],y=[],x=[],D=[];for(let M in u.fonts)if(Object.prototype.hasOwnProperty.call(u.fonts,M)){const A=u.fonts[M];switch(M){case"color":v[0]=A,p+=`<color rgb="${t.toARGB(A)}" />`;break;case"name":v[1]=A,p+=`<name val="${A}" />`;break;case"sz":v[2]=A,p+=`<sz val="${A}" />`;break;case"i":v[3]=A,p+="<i />";break;case"b":v[4]=A,p+="<b />";break;case"u":v[5]=A,p+="<u />"}}for(let M in u.fills)if(Object.prototype.hasOwnProperty.call(u.fills,M)){const A=u.fills[M];switch(M){case"fgColor":y[0]=A,g+=`<fgColor rgb="${t.toARGB(A)}" />`}}for(let M in u.alignment)if(Object.prototype.hasOwnProperty.call(u.alignment,M)){const A=u.alignment[M];switch(M){case"horizontal":x[0]=A,b+=`horizontal="${A}" `;break;case"vertical":x[1]=A,b+=`vertical="${A}" `}}if(v=v.toString(),y=y.toString(),""!==p){let M=a.collection.indexOf(v);-1===M&&(M=a.collection.length,a.xml+="<font>"+p+"</font>",a.collection.push(v)),D[0]=M}if(""!==g){let M=i.collection.indexOf(y);-1===M&&(M=i.collection.length,i.xml+='<fill><patternFill patternType="solid">'+g+"</patternFill></fill>",i.collection.push(y)),D[1]=M}x.length>0&&(D[2]=b),void 0!==u.numFmt&&(D[3]=t.getNumFmtIndex(u.numFmt,o));const T=D.toString();if(""!==T){let M=r.collection.indexOf(T);if(-1===M){let A="<xf ";M=r.collection.length,void 0!==D[0]&&(A+=`fontId="${D[0]}" `),void 0!==D[1]&&(A+=`fillId="${D[1]}" `),void 0!==D[3]&&(A+=`numFmtId="${D[3]}" `),A+=void 0!==D[2]?`applyAlignment="1" borderId="1"><alignment ${b}/></xf>`:' borderId="1"/>',r.xml+=A,r.collection.push(T)}t.cellStyleMapping[n[c]||c]=M}}return o.collection.length&&(o.xml=`<numFmts count="${o.collection.length}">${o.xml}</numFmts>`),`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\n<styleSheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x14ac x16r2 xr" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac" xmlns:x16r2="http://schemas.microsoft.com/office/spreadsheetml/2015/02/main" xmlns:xr="http://schemas.microsoft.com/office/spreadsheetml/2014/revision">${o.xml}<fonts count="${a.collection.length}" x14ac:knownFonts="1">${a.xml}</fonts><fills count="${i.collection.length}">${i.xml}</fills><borders count="2"><border><left/><right/><top/><bottom/></border><border><left style="hair"/><right style="hair"/><top style="hair"/><bottom style="hair"/><diagonal/></border></borders><cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs><cellXfs count="${r.collection.length}">${r.xml}</cellXfs><cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>${t.conditionalFormattingXLSX.styles}<dxfs count="0"/><tableStyles count="0" defaultTableStyle="TableStyleMedium2" defaultPivotStyle="PivotStyleLight16"/><extLst><ext uri="{EB79DEF2-80B8-43e5-95BD-54CBDDF9020C}" xmlns:x14="http://schemas.microsoft.com/office/spreadsheetml/2009/9/main"><x14:slicerStyles defaultSlicerStyle="SlicerStyleLight1"/></ext><ext uri="{9260A510-F301-46a8-8635-F512D64BE5F5}" xmlns:x15="http://schemas.microsoft.com/office/spreadsheetml/2010/11/main"><x15:timelineStyles defaultTimelineStyle="TimeSlicerStyleLight1"/></ext></extLst></styleSheet>`}})},6170:()=>{Smart.Utilities.Assign("FilterGroup",class ve{constructor(){const t=this;t.stringConditions=["EMPTY","NOT_EMPTY","CONTAINS","CONTAINS_CASE_SENSITIVE","DOES_NOT_CONTAIN","DOES_NOT_CONTAIN_CASE_SENSITIVE","STARTS_WITH","STARTS_WITH_CASE_SENSITIVE","ENDS_WITH","ENDS_WITH_CASE_SENSITIVE","EQUAL","NOT_EQUAL","EQUAL_CASE_SENSITIVE","NOT_EQUAL_CASE_SENSITIVE","NULL","NOT_NULL"],t.numericConditions=["EQUAL","NOT_EQUAL","LESS_THAN","LESS_THAN_OR_EQUAL","GREATER_THAN","GREATER_THAN_OR_EQUAL","NULL","NOT_NULL"],t.dateConditions=["EQUAL","NOT_EQUAL","LESS_THAN","LESS_THAN_OR_EQUAL","GREATER_THAN","GREATER_THAN_OR_EQUAL","NULL","NOT_NULL"],t.booleanConditions=["EQUAL","NOT_EQUAL","NULL","NOT_NULL"],t.filters=new Array,t.logicalOperators=new Array}evaluate(t){const n=this;let a=!0;for(let i=0;i<n.filters.length;i++){let o=n.filters[i].evaluate(t);a=0===i?o:1===n.logicalOperators[i]||"or"===n.logicalOperators[i]?a||o:a&&o}return a}getFiltersCount(){return this.filters.length}setConditions(t,n){const a=this;switch(t){case"numeric":a.numericConditions=n;break;case"string":a.stringConditions=n;break;case"date":case"time":a.dateConditions=n;break;case"bool":case"boolean":a.booleanConditions=n}}getConditions(t){const n=this;let a=new Array;switch(t){case"numeric":a=n.numericConditions.slice(0);break;case"string":a=n.stringConditions.slice(0);break;case"date":case"time":a=n.dateConditions.slice(0);break;case"bool":case"boolean":a=n.booleanConditions.slice(0)}return a}generateFilterKey(){const t=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return t()+"-"+t()+"-"+t()}createFilter(t,n,a,i,o,r,l){if(null==t)return null;switch(t){case"int":case"float":case"int64":case"double":case"numeric":case"number":case"numericFilter":return new Smart.Utilities.NumericFilter(n,a.toUpperCase());case"string":case"stringFilter":return new Smart.Utilities.StringFilter(n,a.toUpperCase(),r);case"date":case"time":case"dateFilter":return new Smart.Utilities.DateFilter(n,a.toUpperCase(),o,r,l);case"bool":case"boolean":case"booleanFilter":return new Smart.Utilities.BooleanFilter(n,a.toUpperCase());case"custom":return new Smart.Utilities.CustomFilter(n,a.toUpperCase(),i)}throw new Error('smartGrid: There is no such filter type. The available filter types are: "numericFilter", "stringFilter", "dateFilter" and "booleanFilter"')}getFilters(){const t=this;let n=new Array;for(let a=0;a<t.filters.length;a++){const i=t.filters[a];if(i instanceof ve){let o=i.getFilters();n.push({value:o,logicalOperator:t.logicalOperators[a],type:"FilterGroup"})}else{const o={value:i.value,condition:i.condition,logicalOperator:t.logicalOperators[a],type:i.type};i.data&&(o.id=i.data),n.push(o)}}return n}addFilter(t,n){const a=this;a.filters[a.filters.length]=n,n.key=a.generateFilterKey(),a.logicalOperators[a.logicalOperators.length]=t}removeFilter(t){const n=this;for(let a=0;a<n.filters.length;a++)if(n.filters[a].key===t.key){n.filters.splice(a,1),n.logicalOperators.splice(a,1);break}}getOperatorAt(t){return null==t||t<0||t>this.filters.length?null:this.logicalOperators[t]}setOperatorAt(t,n){return null==t||t<0||t>this.filters.length?null:void(this.logicalOperators[n]=n)}getFilterAt(t){return null==t||t<0||t>this.filters.length?null:this.filters[t]}setFilterAt(t,n){const a=this;return null==t||t<0||t>a.filters.length?null:(n.key=a.generateFilterKey(),void(a.filters[t]=n))}clear(){this.filters=new Array,this.logicalOperators=new Array}getUniqueValues(t,n){const a=t.data,i=[],o=[],r="dateFilter"===t.filterType&&"timePicker"===t.displayMode;let l,s=!1;for(let c=0;c<a.length;c++){let u,p=a[c][t.dataField];""!==p&&null!=p?(u=r?new Smart.Utilities.DateTime(p).toString(t.formatString):p.toString(),-1===i.indexOf(u)&&(i.push(u),o.push({label:u,value:p,customAttribute:"default-item"}))):s=!0}switch(t.filterType){case"numericFilter":case"booleanFilter":l=function(c,u){return c.value-u.value};break;case"stringFilter":l=function(c,u){return(new Intl.Collator).compare(c.value,u.value)};break;case"dateFilter":l=r?function(c,u){try{const p=c.value.getHours(),g=u.value.getHours();if(p!==g)return p-g;const b=c.value.getMinutes(),v=u.value.getMinutes();if(b!==v)return b-v;const y=c.value.getSeconds(),x=u.value.getSeconds();return y!==x?y-x:0}catch(p){return-1}}:function(c,u){try{return c.value.getTime()-u.value.getTime()}catch(p){return-1}}}return o.sort(l),"booleanFilter"===t.filterType&&o.map(function(c){c.label=c.label.toUpperCase()}),s&&o.push({label:n.localize("blanks"),value:"",customAttribute:"default-item"}),o}}),Smart.Utilities.Assign("StringFilter",class{constructor(e,t,n){const a=this;a.value=e,a.condition=t,a.locale=n||"en",a.type="stringFilter"}evaluate(e){const t=this,n=t.value,a=t.condition;if(null==e||""===e){if("NULL"===a||"EQUAL"===a&&e===n||"NOT_EQUAL"===a&&e!==n)return!0;if("EMPTY"!==a)return!1;if(""===e)return!0}let i="";try{i=e.toString()}catch(l){return!0}const o=function(l,s){const c=t.locale;switch(a){case"EQUAL":return 0===l.localeCompare(s,c,{sensitivity:"accent"});case"EQUAL_CASE_SENSITIVE":return 0===l.localeCompare(s,c,{sensitivity:"variant"});case"NOT_EQUAL":return 0!==l.localeCompare(s,c,{sensitivity:"accent"});case"NOT_EQUAL_CASE_SENSITIVE":return 0!==l.localeCompare(s,c,{sensitivity:"variant"});case"CONTAINS":return-1!==l.toLowerCase().indexOf(s.toLowerCase());case"CONTAINS_CASE_SENSITIVE":return-1!==l.indexOf(s);case"DOES_NOT_CONTAIN":return-1===l.toLowerCase().indexOf(s.toLowerCase());case"DOES_NOT_CONTAIN_CASE_SENSITIVE":return-1===l.indexOf(s);case"EMPTY":return""===l;case"NOT_EMPTY":return""!==l;case"NOT_NULL":return null!==l;case"STARTS_WITH":return 0===(l=l.substring(0,s.length)).localeCompare(s,c,{sensitivity:"accent"});case"ENDS_WITH":return 0===(l=l.substring(l.length-s.length,l.length)).localeCompare(s,c,{sensitivity:"accent"});case"ENDS_WITH_CASE_SENSITIVE":return 0===(l=l.substring(l.length-s.length,l.length)).localeCompare(s,c,{sensitivity:"variant"});case"STARTS_WITH_CASE_SENSITIVE":return 0===(l=l.substring(0,s.length)).localeCompare(s,c,{sensitivity:"variant"});default:return!1}},r=new Array;if(n&&n.indexOf&&(n.indexOf("|")>=0||n.indexOf(" AND ")>=0||n.indexOf(" OR ")>=0||n.indexOf(" and ")>=0||n.indexOf(" or ")>=0)){const l=o(i,n);if(l)return l;const s=n.indexOf(" and ")>=0?n.split(" and "):new Array,c=n.indexOf(" or ")>=0?n.split(" or "):new Array,u=n.indexOf("|")>=0?n.split("|"):new Array;let p=n.indexOf(" AND ")>=0?n.split(" AND "):new Array,g=n.indexOf(" OR ")>=0?n.split(" OR "):new Array;if(u.length>0)for(let y=0;y<u.length;y++)u[y]=u[y].trim;const b=n.indexOf(" ")>=0?n.split(" "):new Array;if(b.length>0)for(let y=0;y<b.length;y++)b[y]=b[y].trim;if(p=p.concat(b),p=p.concat(s),g=g.concat(u),g=g.concat(c),p.length>0)for(let y=0;y<p.length;y++)!p[y].indexOf(" OR ")>=0&&r.push(p[y]);if(g.length>0)for(let y=0;y<g.length;y++)!g[y].indexOf(" AND ")>=0&&r.push(g[y]);let v;for(let y=0;y<r.length;y++){const x=o(i,r[y]),D=y<p.length?"and":"or";v=void 0===v?x:"or"===D?v||x:v&&x}return v}return o(i,n)}}),Smart.Utilities.Assign("BooleanFilter",class{constructor(e,t){const n=this;n.value=e,n.condition=t,n.type="booleanFilter"}evaluate(e){const t=this.value,n=e;switch(this.condition){case"EQUAL":return n===t;case"NOT_EQUAL":return n!==t;case"NULL":return null==e||""===e;case"NOT_NULL":return!(null==e||""===e);default:return!1}}}),Smart.Utilities.Assign("NumericFilter",class{constructor(e,t){const n=this;n.value=e,n.condition=t,n.type="numericFilter"}evaluate(e){let t=this.value,n=this.condition;if(null==e||""===e){if("NOT_NULL"===n)return!1;if("NULL"===n)return!0;switch(n){case"EQUAL":return e===t;case"NOT_EQUAL":return e!==t}return!1}if("NULL"===n)return!1;if("NOT_NULL"===n)return!0;let a=e;try{a=parseFloat(a)}catch(r){if(""!==e.toString())return!1}const i=function(r,l){switch("number"==typeof r&&"number"!=typeof l&&(l=parseFloat(l)),n){case"EQUAL":return r===l;case"NOT_EQUAL":return r!==l;case"GREATER_THAN":return r>l;case"GREATER_THAN_OR_EQUAL":return r>=l;case"LESS_THAN":return r<l;case"LESS_THAN_OR_EQUAL":return r<=l;case"STARTS_WITH":return l=l.toString().toLowerCase(),r.toString().toLowerCase().substring(0,l.length)===l;case"ENDS_WITH":return r=r.toString().toLowerCase(),l=l.toString().toLowerCase(),r.substring(r.length-l.length,r.length)===l;case"ENDS_WITH_CASE_SENSITIVE":return r=r.toString(),l=l.toString(),r.substring(r.length-l.length,r.length)===l;case"STARTS_WITH_CASE_SENSITIVE":return l=l.toString(),r.toString().substring(0,l.length)===l;case"CONTAINS":return-1!==r.toString().toLowerCase().indexOf(l.toString().toLowerCase());case"CONTAINS_CASE_SENSITIVE":return-1!==r.toString().indexOf(l.toString());case"DOES_NOT_CONTAIN":return-1===r.toString().toLowerCase().indexOf(l.toString().toLowerCase());case"DOES_NOT_CONTAIN_CASE_SENSITIVE":return-1===r.toString().indexOf(l.toString());default:return!0}};let o=new Array;if(t&&t.indexOf&&(t.indexOf("|")>=0||t.indexOf(" AND ")>=0||t.indexOf(" OR ")>=0||t.indexOf(" and ")>=0||t.indexOf(" or ")>=0)){let r=i(a,t);if(r)return r;t=t.toString();const l=t.indexOf(" and ")>=0?t.split(" and "):new Array,s=t.indexOf(" or ")>=0?t.split(" or "):new Array,c=t.indexOf("|")>=0?t.split("|"):new Array;let u,p=t.indexOf(" AND ")>=0?t.split(" AND "):new Array,g=t.indexOf(" OR ")>=0?t.split(" OR "):new Array;if(p=p.concat(l),g=g.concat(s),c.length>0)for(let b=0;b<c.length;b++)c[b]=c[b].trim;if(g=g.concat(c),p.length>0)for(let b=0;b<p.length;b++)!p[b].indexOf(" OR ")>=0&&o.push(p[b]);if(g.length>0)for(let b=0;b<g.length;b++)!g[b].indexOf(" AND ")>=0&&o.push(g[b]);for(let b=0;b<o.length;b++){const v=o[b];if(v&&v.indexOf&&v.indexOf("..")>=0){const x=v.toString().split("..");2===x.length&&(r=a>=x[0]&&a<=x[1])}else r=i(a,v);const y=b<p.length?"and":"or";u=void 0===u?r:"or"===y?u||r:u&&r}return u}return t&&t.indexOf&&t.indexOf("..")>=0&&(o=t.toString().split(".."),2===o.length)?a>=o[0]&&a<=o[1]:i(a,t)}}),Smart.Utilities.Assign("DateFilter",class{constructor(e,t,n,a,i){const o=this,r=new Smart.Utilities.DateTime;if(o.value=e,o.type="dateFilter",void 0!==n){const l=r.parseDate(e,n);if(null!==l)o.filterdate=l;else{const s=r.tryparseDate(e);null!==s&&(o.filterdate=s)}}else{const l=new Date(e);o.filterdate="NaN"===l.toString()||"Invalid Date"===l.toString()?r.tryparseDate(e):l}if(!o.filterdate){const l=new Date(e);o.filterdate="NaN"===l.toString()||"Invalid Date"===l.toString()?r.tryparseDate(e):l}o.condition=t,o.formatString=n,o.timeOnly=i}evaluate(e){const t=this,n=t.condition,a=t.formatString;let i=t.value;if(t.timeOnly)return t.evaluateTimeOnly(e);if(null==e||""===e){if("NOT_NULL"===n)return!1;if("NULL"===n)return!0;switch(n){case"EQUAL":return e===i;case"NOT_EQUAL":return e!==i}return!1}if("NULL"===n)return!1;if("NOT_NULL"===n)return!0;let o,r=new Date;r.setFullYear(1900,0,1),r.setHours(12,0,0,0);try{const c=new Smart.Utilities.DateTime,u=new Date(e);if(r=e="NaN"===u.toString()||"Invalid Date"===u.toString()?c.tryparseDate(e):u,o=!1,void 0!==a&&(a.indexOf("t")>=0||a.indexOf("T")>=0||a.indexOf(":")>=0||a.indexOf("f")>=0)&&(o=!0,i&&-1===i.toString().indexOf(":"))){const p=c.tryparseDate(i.toString()+":00");null!==p&&(t.filterdate=p)}o||(r.setHours(0),r.setMinutes(0),r.setSeconds(0))}catch(c){if(""!==e.toString())return!1}if(null!==t.filterdate)i=t.filterdate;else if(i&&i.indexOf&&(-1!==i.indexOf(":")||!isNaN(parseInt(i)))){const c=new Date(r);c.setHours(12,0,0,0);const u=i.split(":");for(let p=0;p<u.length;p++)0===p&&c.setHours(u[p]),1===p&&c.setMinutes(u[p]),2===p&&c.setSeconds(u[p]);i=c}o&&i&&i.setFullYear&&r&&r.getFullYear&&-1===a.indexOf("d")&&-1===a.indexOf("M")&&-1===a.indexOf("y")&&i.setFullYear(r.getFullYear(),r.getMonth(),r.getDate());const l=function(c,u){switch(null===c&&(c=""),n){case"EQUAL":return c.toString()===u.toString();case"NOT_EQUAL":return c.toString()!==u.toString();case"GREATER_THAN":return c>u;case"GREATER_THAN_OR_EQUAL":return c>=u;case"LESS_THAN":return c<u;case"LESS_THAN_OR_EQUAL":return c<=u;case"STARTS_WITH":return u=u.toString().toLowerCase(),c.toString().toLowerCase().substring(0,u.length)===u;case"ENDS_WITH":return c=c.toString().toLowerCase(),u=u.toString().toLowerCase(),c.substring(c.length-u.length,c.length)===u;case"ENDS_WITH_CASE_SENSITIVE":return c=c.toString(),u=u.toString(),c.substring(c.length-u.length,c.length)===u;case"STARTS_WITH_CASE_SENSITIVE":return u=u.toString(),c.toString().substring(0,u.length)===u;case"CONTAINS":return-1!==c.toString().toLowerCase().indexOf(u.toString().toLowerCase());case"CONTAINS_CASE_SENSITIVE":return-1!==c.toString().indexOf(u.toString());case"DOES_NOT_CONTAIN":return-1===c.toString().toLowerCase().indexOf(u.toString().toLowerCase());case"DOES_NOT_CONTAIN_CASE_SENSITIVE":return-1===c.toString().indexOf(u.toString());default:return!0}};let s=new Array;if(i&&i.indexOf&&(i.indexOf("|")>=0||i.indexOf(" AND ")>=0||i.indexOf(" OR ")>=0||i.indexOf(" and ")>=0||i.indexOf(" or ")>=0)){let c=l(r,i);if(c)return c;const u=i.indexOf(" and ")>=0?i.split(" and "):new Array,p=i.indexOf(" or ")>=0?i.split(" or "):new Array,g=i.indexOf("|")>=0?i.split("|"):new Array;let b,v=i.indexOf(" AND ")>=0?i.split(" AND "):new Array,y=i.indexOf(" OR ")>=0?i.split(" OR "):new Array;if(v=v.concat(u),y=y.concat(p),g.length>0)for(let x=0;x<g.length;x++)g[x]=g[x].trim;if(y=y.concat(g),v.length>0)for(let x=0;x<v.length;x++)!v[x].indexOf(" OR ")>=0&&s.push(v[x]);if(y.length>0)for(let x=0;x<y.length;x++)!y[x].indexOf(" AND ")>=0&&s.push(y[x]);for(let x=0;x<s.length;x++){const D=s[x];if(D&&D.indexOf&&D.indexOf("..")>=0){const M=D.toString().split("..");2===M.length&&(c=r>=M[0]&&r<=M[1])}else c=l(r,D);const T=x<v.length?"and":"or";b=void 0===b?c:"or"===T?b||c:b&&c}return b}return i&&i.indexOf&&i.indexOf("..")>=0&&(s=i.toString().split(".."),2===s.length)?r>=s[0]&&r<=s[1]:l(r,i)}evaluateTimeOnly(e){const t=this.value;return t?!!(e&&e instanceof Date)&&e.getHours()===t.getHours()&&e.getMinutes()===t.getMinutes()&&e.getSeconds()===t.getSeconds():!e}}),Smart.Utilities.Assign("CustomFilter",class{constructor(e,t,n){const a=this;a.value=e,a.condition=t,a.customfilter=n}evaluate(e){const t=this;return t.customfilter(t.value,e,t.condition)}}),Smart.FilterGroup=Smart.Utilities.FilterGroup,Smart.StringFilter=Smart.Utilities.StringFilter,Smart.NumericFilter=Smart.Utilities.NumericFilter,Smart.DateFilter=Smart.Utilities.DateFilter,Smart.CustomFilter=Smart.Utilities.CustomFilter},3131:()=>{Smart("smart-query-builder",class extends Smart.BaseElement{static get properties(){return{allowDrag:{value:!1,type:"boolean"},autoPrompt:{value:!1,type:"boolean"},applyMode:{allowValues:["immediately","change"],value:"change",type:"string"},customOperations:{value:[],type:"array",reflectToAttribute:!1},customOperators:{value:{},type:"object",reflectToAttribute:!1},dropDownWidth:{type:"any",value:"100%"},fields:{value:null,type:"array?",reflectToAttribute:!1},fieldsMode:{value:"dynamic",allowedValues:["dynamic","static"],type:"string"},formatStringDate:{value:"dd-MMM-yy",type:"string"},formatStringDateTime:{value:"dd-MMM-yy HH:mm:ss",type:"string"},getDynamicField:{value:null,type:"function?"},icons:{value:{"=":"equals","<>":"notequals",">":"greaterthan",">=":"greaterthanorequal","<":"lessthan","<=":"lessthanorequal",startswith:"startswith",endswith:"endswith",contains:"contains",notcontains:"notcontains",isblank:"isblank",isnotblank:"isnotblank"},type:"object",reflectToAttribute:!1},messages:{value:{en:{add:"Add",addCondition:"Add Condition",addGroup:"Add Group",and:"And",notand:"Not And",or:"Or",notor:"Not Or","=":"Equals","<>":"Does not equal",">":"Greater than",">=":"Greater than or equal to","<":"Less than","<=":"Less than or equal to",startswith:"Starts with",endswith:"Ends with",contains:"Contains",notcontains:"Does not contain",isblank:"Is blank",isnotblank:"Is not blank",wrongParentGroupIndex:'{{elementType}}: Wrong parent group index in "{{method}}" method.',wrongElementNode:'{{elementType}}: Incorect node / node Id in "{{method}}" method.',invalidDataStructure:"{{elementType}}: Used invalid data structure in updateCondition/updateGroup method.",dateTabLabel:"DATE",timeTabLabel:"TIME",queryLabel:"Query"}},type:"object",extend:!0},operatorPlaceholder:{value:"Operator",type:"string"},propertyPlaceholder:{value:"Property",type:"string"},showIcons:{value:!1,type:"boolean"},showFieldNameArrow:{value:!1,type:"boolean"},validateOnInput:{value:!1,type:"boolean"},validationTimeout:{value:100,type:"number"},value:{value:[],type:"any",reflectToAttribute:!1},valueFormatFunction:{value:null,type:"function?",reflectToAttribute:!1},valuePlaceholder:{value:"Value",type:"string"}}}static get requires(){const e={"Smart.Button":"smart.button.js","Smart.Calendar":"smart.calendar.js","Smart.CheckBox":"smart.checkbox.js","Smart.DateTimePicker":"smart.datetimepicker.js","Smart.DropDownList":"smart.dropdownlist.js","Smart.Input":"smart.input.js","Smart.ListBox":"smart.listbox.js","Smart.Menu":"smart.menu.js","Smart.NumericTextBox":"smart.numerictextbox.js","Smart.ScrollBar":"smart.scrollbar.js","Smart.TimePicker":"smart.timepicker.js","Smart.Tooltip":"smart.tooltip.js","Smart.Utilities.BigNumber":"smart.math.js","Smart.Utilities.DateTime":"smart.date.js","Smart.Utilities.Draw":"smart.draw.js","Smart.Utilities.NumericProcessor":"smart.numeric.js"};return window.NIComplex||(e["Smart.Utilities.Complex"]="smart.complex.js"),e}static get listeners(){return{down:"_downHandler",resize:"_resizeHandler","editorsContainer.keydown":"_editorsContainerKeydownHandler","editorsContainer.keyup":"_editorsContainerKeyUpHandler","conditionsMenu.close":"_menuCloseHandler","conditionsMenu.closing":"_menuClosingHandler","conditionsMenu.itemClick":"_menuItemClickHandler","contentContainer.change":"_contentContainerChangeHandler","contentContainer.itemClick":"_contentContainerChangeHandler","scrollableContainer.touchmove":"_scrollableContainerTouchmoveHandler","document.down":"_documentDownHandler","document.move":"_documentMoveHandler","document.up":"_documentUpHandler"}}static get styleUrls(){return["smart.querybuilder.css"]}template(){return'<div id="container" role="presentation">\n                    <smart-scroll-viewer id="scrollableContainer" class="smart-scrollable-container" animation="[[animation]]" right-to-left="[[rightToLeft]]">\n                        <div id="queryLabel" class="smart-query-builder-label smart-unselectable"></div>\n                        <div id="contentContainer" class="smart-content-container"></div>\n                    </smart-scroll-viewer>\n                    <div id="editorsContainer" class="smart-editors-container" role="presentation">\n                        <div id="customEditor" class="smart-custom-editor smart-hidden"></div>\n                    </div>\n                    <smart-menu id="conditionsMenu" mode="dropDown" class="smart-conditions-menu" theme="[[theme]]" animation="[[animation]]" right-to-left="[[rightToLeft]]"></smart-menu>\n                </div>'}propertyChangedHandler(e,t,n){super.propertyChangedHandler(e,t,n);const a=this;switch(e){case"animation":case"theme":["textBoxEditor","numericTextBoxEditor","comboBoxEditor","dateTimePickerEditor","checkBoxEditor"].forEach(i=>a.$[i]&&(a.$[i][e]=n));break;case"formatStringDate":case"formatStringDateTime":case"valueFormatFunction":a._refresh();break;case"operatorPlaceholder":Array.from((a.shadowRoot||a).querySelectorAll(".smart-filter-operation[placeholder]")).forEach(i=>i.firstElementChild.innerHTML=n);break;case"propertyPlaceholder":Array.from((a.shadowRoot||a).querySelectorAll(".smart-filter-field-name[placeholder]")).forEach(i=>i.firstElementChild.innerHTML=n);break;case"showIcons":a._closeEditor(),a._filterOperationDescriptions.map(n?i=>i.icon=a.icons[i.value]:i=>delete i.icon);break;case"customOperations":case"fields":case"value":{const i=JSON.stringify(a._validValue),o=a._queryParser;"customOperations"===e?a._handleCustomOperations():""===e&&a._mapFieldsToMenu(),a._applyValue(),"customOperations"!==e&&"fields"!==e||(o[e]=n),a._oldValueAsString!==i&&(a._oldValueAsString=i,a.$.fireEvent("change",{value:JSON.parse(i),linq:o.toLinq(a._validValue)}));break}case"valuePlaceholder":Array.from((a.shadowRoot||a).querySelectorAll(".smart-filter-value[placeholder]")).forEach(i=>i.firstElementChild.innerHTML=n);break;case"locale":case"messages":a._localizeInitialValues(),a._refresh(),a._handleCustomOperations(),a.$.dateTimePickerEditor&&(a.$.dateTimePickerEditor.messages[a.locale]||(a.$.dateTimePickerEditor.messages[a.locale]={}),a.$.dateTimePickerEditor.messages[a.locale].dateTabLabel=a.localize("dateTabLabel"),a.$.dateTimePickerEditor.messages[a.locale].timeTabLabel=a.localize("timeTabLabel"),"locale"===e?a.$.dateTimePickerEditor.locale=a.locale:"messages"===e&&(a.$.dateTimePickerEditor.$.selectDate.innerHTML=a.$.dateTimePickerEditor.messages[a.locale].dateTabLabel,a.$.dateTimePickerEditor.$.selectTime.innerHTML=a.$.dateTimePickerEditor.messages[a.locale].timeTabLabel));break;case"icons":a._closeEditor()}}ready(){super.ready();const e=this;e.$.queryLabel.id||(e.$.queryLabel.id=e.id+"Label"),e.setAttribute("role","dialog"),e.setAttribute("aria-labelledby",e.$.queryLabel.id),-1!==navigator.platform.toLowerCase().lastIndexOf("mac")&&e.$.contentContainer.classList.add("mac"),e._queryParser=new Smart.Utilities.QueryParser,e._setInitialValues(),e._handleCustomOperations(),e._applyValue(),Object.defineProperty(e,"value",{get:function(){return e.context===e?e.properties.value.value:e._validValue},set(t){e.updateProperty(e,e._properties.value,t)}})}getLinq(){const e=this;if(e._validValue)return e._queryParser.toLinq(e._validValue)}get validationStatus(){const e=this;return!e.isReady||void 0===e._validationStatus||e._validationStatus}_setInitialValues(){const e=this;e._autoScrollCoefficient=Smart.Utilities.Core.Browser.Firefox?4:Smart.Utilities.Core.Browser.Edge?8:2,e._isMobile=Smart.Utilities.Core.isMobile,e._manuallyAddedFields=[],e._localizeInitialValues(),e.$.conditionsMenu.dropDownAppendTo=e.$.container,e.$.conditionsMenu.dataSource=e._groupOperationDescriptions,e._valueFlat=[],e._lastProcessedItemInCurrentGroup={parentId:null,id:null,position:null}}_applyValue(){const e=this;e._emptyElementsStructure(!0),e._validateValue(),e._convertValueToFlat(e.value),e._getFieldsFromValue(),e._mapFieldsToMenu(),e._validateValueByType(),e._generateHTMLStructureFromFlatValue(!0),e._restrictNesting(),e._validValue=e._getValidValue(),e._oldValueAsString=JSON.stringify(e._validValue)}_validateValueByType(){const e=this;if(!e._valueFlat||!e._valueFlat.length)return;const t=e._valueFlat;for(let n=0;n<t.length;n++){const a=t[n];if("condition"!==a.type)continue;const i=a.data[0];!i||a.data.length<3||(a.data[2]=e._validateStoredValue(a.data[2],i))}e._generateValue(!0)}_contentContainerChangeHandler(e){const t=this,n=e.target,a=t.applyMode;if(e.stopPropagation(),"itemClick"===e.type&&n.value!==e.detail.label||"immediately"!==a||!t._editorIsOpen||!t._editor||"immediately"===a&&n!==t._editor)return;const i=t._editor.closest(".filter-builder-item");i.classList.contains("smart-filter-value")||(t._closeEditor(),t._handleAutoPrompt(i))}_handleAutoPrompt(e){const t=this;if(e&&t.autoPrompt&&"immediately"===t.applyMode&&!e.classList.contains("smart-filter-value")){const n=e.closest(".smart-filter-group-condition")||e.closest(".smart-filter-nested-operator")||e.closest(".smart-filter-group");if(!n)return;const a=t._getItemById(n.getAttribute("node-id")),i=n.querySelector(".smart-filter-value");if(!a||!i)return;t._clickHandlerFilterButton(e.classList,a.nodeId,i)}}_mapFieldsToMenu(){const e=this;(e.fields||e._valueFields)&&(e._fields=(e.fields||e._valueFields).concat(e._manuallyAddedFields).map(t=>({label:t.label,value:t.dataField,dataType:t.dataType,filterOperations:t.filterOperations,lookup:t.lookup})))}_localizeInitialValues(){const e=this;e.$.queryLabel.innerHTML=e.localize("queryLabel"),e._addOptions=[{label:e.localize("addCondition"),value:"addCondition"},{label:e.localize("addGroup"),value:"addGroup"}],e._groupOperationDescriptions=[{label:e.localize("and"),value:"and"},{label:e.localize("or"),value:"or"}],e._defaultFilterOperationDescriptions=e._filterOperationDescriptions=[{label:e.localize("="),value:"=",custom:!1},{label:e.localize("<>"),value:"<>",custom:!1},{label:e.localize(">"),value:">",custom:!1},{label:e.localize(">="),value:">=",custom:!1},{label:e.localize("<"),value:"<",custom:!1},{label:e.localize("<="),value:"<=",custom:!1},{label:e.localize("startswith"),value:"startswith",custom:!1},{label:e.localize("endswith"),value:"endswith",custom:!1},{label:e.localize("contains"),value:"contains",custom:!1},{label:e.localize("notcontains"),value:"notcontains",custom:!1},{label:e.localize("isblank"),value:"isblank",custom:!1},{label:e.localize("isnotblank"),value:"isnotblank",custom:!1}];const t=Smart.Utilities.DateTime.getLocalizedNames(e.locale);e._localizedDays=t.days,e._localizedMonths=t.months}_handleCustomOperations(){const e=this;e._filterOperationDescriptions=e._defaultFilterOperationDescriptions.slice(0);for(let t=0;t<e.customOperations.length;t++){let n=e.customOperations[t],a=e._filterOperationDescriptions.findIndex(o=>o.value===n.name),i={label:n.label,value:n.name,custom:!0,index:t,editorTemplate:n.editorTemplate,valueTemplate:n.valueTemplate,handleValue:n.handleValue,hideValue:n.hideValue,validateValue:n.validateValue};a>-1?e._filterOperationDescriptions[a]=i:e._filterOperationDescriptions.push(i)}}_editorsContainerKeydownHandler(e){const t=this;if(t._editorIsOpen&&("Escape"===e.key||"Enter"===e.key)){t._closeEditor();const n=t._editor.closest(".filter-builder-item");n&&!n.classList.contains("smart-filter-value")&&t._handleAutoPrompt(n)}}_editorsContainerKeyUpHandler(e){const t=this,n=t._editor;if(!(t._editor&&t._editor.contains(e.target)&&t._editorIsOpen&&t.validateOnInput))return;const a=t._editor.closest(".filter-builder-item"),i=t._editor.closest(".smart-filter-group-condition");a&&a.classList.contains("smart-filter-value")&&(clearTimeout(t._valueValidationTimeout),t._valueValidationTimeout=setTimeout(()=>{const o=i.getAttribute("node-id");clearTimeout(t._valueValidationTimeout),t._closeEditor(),t._generateValue();const r=t._getItemById(o);r&&(n.setAttribute("focus",""),t._openEditor(r.htmlNode.querySelector(".smart-filter-value"))),delete t._valueValidationTimeout},t.validationTimeout))}_documentDownHandler(e){const t=this,n=t.shadowRoot||t.isInShadowDOM?e.originalEvent.composedPath()[0]:e.originalEvent.target;if(n.shadowParent&&n.shadowParent.closest(".smart-input-drop-down-menu")||n.closest(".smart-input-drop-down-menu")||t.$.conditionsMenu.contains(n))return;const a=n.closest(".smart-drop-down");if(n.getRootNode().host===t||n.closest("smart-query-builder")===t||a&&t.contains(a.ownerElement))if(t._isMobile){const i=t.$.scrollableContainer.scrollTop,o=t.getBoundingClientRect().top;setTimeout(function(){if(t.$.scrollableContainer.scrollTop===i&&t.getBoundingClientRect().top===o){const r=t.context;t.context=t,t._clickHandler(e.originalEvent),t.context=r}},250)}else t._clickHandler(e.originalEvent);else t._editorIsOpen&&!t._scrollBarDown&&t._closeEditor(),delete t._scrollBarDown}_emptyElementsStructure(e){const t=this,n=t.$.contentContainer;for(;n.firstChild;)n.removeChild(n.firstChild);t._valueFlat=e?[]:t._valueFlat,t._lastProcessedItemInCurrentGroup={parentId:null,id:null,position:null}}_resizeHandler(){this.$.scrollableContainer.refresh()}_getTotalConditions(){return this.getElementsByClassName("smart-filter-group-condition").length}_parseLinqToValue(){const e=this,t=e._queryParser;t&&(t.customOperations=e.customOperations,t.fields=e.fields,t.dynamicField="dynamic"===e.fieldsMode?e.getDynamicField:void 0,e.set("value",t.toValue(e.value)))}_validateValue(){const e=this;"string"==typeof e.value&&e._parseLinqToValue();const t=e.value;if(Array.isArray(t)&&""!==JSON.stringify(t).replace(/[\[\]]/g,"")){for(3===t.length&&"string"==typeof t[0]&&(e.value=[[t]]),Array.isArray(t[0])&&3===t[0].length&&"string"==typeof t[0][0]&&(e.value=[t]);"string"==typeof t[0];)t.shift();for(;"string"==typeof t[t.length-1];)t.pop();e.value.forEach(n=>{Array.isArray(n)&&0===n.length&&n.push([])})}else e.value=[[[]]]}_convertValueToFlat(e){const t=this,n=["and","or","notAnd","notOr"];if(!e)return;let a=0,i=0;t._valueFlat=[],function o(r,l){let s;for(let c=0;c<r.length;c++){const u=r[c];let p={htmlNode:null};if("string"==typeof u&&(n.indexOf(u)>-1||t.customOperators[u]))s=(t.customOperators[u]||u).trim();else if(s=s||"and",Array.isArray(u)){let g=t._valueFlat.filter(b=>b.parentId+""==l+"").length;if(u.find(b=>Array.isArray(b)))p.nodeId=(i+=1)+"",p.type="group",p.data=s,t._valueFlat.push(p),o(u,p.nodeId),s="";else{if(t.maxConditions&&a>=t.maxConditions||t.maxConditionsPerGroup&&g>=t.maxConditionsPerGroup)continue;0!==c&&(t._valueFlat.push({nodeId:l+"."+g,type:"operator",data:s,parentId:l+""}),s="",g++),p.nodeId=l+"."+g,p.parentId=l+"",p.type="condition",p.data=u,a++,t._valueFlat.push(p)}}}}(e,0),delete t._totalGroups}_getFieldsFromValue(){const e=this._valueFlat,t=[],n=[];for(let i=0;i<e.length;i++){const o=e[i];if("condition"===o.type){const r=o.data[0];if(r&&-1===t.indexOf(r)){const l={label:r,dataField:r,dataType:(a=o.data[2],"boolean"==typeof a?"boolean":a instanceof Date?a.getHours()>0||a.getMinutes()>0||a.getSeconds()>0?"dateTime":"date":isNaN(a)?"string":"number"),format:null};t.push(r),n.push(l)}}}var a;this._valueFields=n}_addElement(e,t,n,a){const i=this,o=i._valueFlat.filter(b=>b.parentId===t);let r=0,l="";if(n=n||("group"===e?"or":[]),o.length){let b=o.map(v=>{const y=v.nodeId.split(".");return parseInt(y[y.length-1])});b=0===b.length?[0]:b,r=b.reduce((v,y)=>Math.max(v,y))+1}t&&t.length>0&&(l=".");let s=(t||"")+l+("group"===e?i._valueFlat.filter(b=>"group"===b.type).length+1:r),c=o[0];if(o.length)for(let b=0;b<o.length;b++){const v=o[b],y=v.nodeId.split(".").pop();parseInt(y)>parseInt(c.nodeId.split(".").pop())&&(c=v)}else c=i._valueFlat.find(b=>b.nodeId===t);let u=c?i._valueFlat.indexOf(c)+1:i._valueFlat.length;"condition"===e&&o.length>0&&(i._valueFlat.splice(u,0,{nodeId:s,parentId:t,type:"operator",data:["and"],htmlNode:null}),s=(t||"")+l+(r+1),u++);const p={nodeId:s,parentId:t,type:e,data:n,htmlNode:null},g=i.autoPrompt;if("condition"===e&&g&&i._fields.length){const b=i._fields[0];if(b){const v=i._getFilterOperations(b);n[0]=b.value||b.label||"",v.length&&(n[1]=v[0].value)}}if(i._valueFlat.splice(u,0,p),"group"===e&&i._addElement("condition",s,[],!0),!a&&(i._refresh(),g&&p.htmlNode)){const b=p.htmlNode,v=b.querySelector(".smart-filter-value");v&&i._clickHandlerFilterButton(b.classList,p.nodeId,v)}}_deleteElement(e,t){const n=this,a="string"==typeof e?e:e.getAttribute("node-id");if(a&&1!==a.length&&("group"===t?r(a):o(a),!t||"condition"===t)){let l=a.split(".");if(l.pop(),l=l.join("."),!n._valueFlat.filter(s=>s.parentId===l).length&&(n._valueFlat.filter(s=>"group"===s.type).length>1&&r(l),"0"===l)){const s=n._valueFlat.find(p=>"group"===p.type),c=s.nodeId;s.nodeId="0",s.htmlNode.setAttribute("node-id","0");const u=n._valueFlat.filter(p=>p.parentId===c);for(let p=0;p<u.length;p++){const g=u[p];g.parentId="0",g.nodeId="0."+p,g.htmlNode.setAttribute("node-id",g.nodeId)}}n._generateValue()}function i(l){const s=n._valueFlat[l];if(s&&"operator"===s.type)return n._valueFlat.splice(l,1),s.htmlNode.parentElement.removeChild(s.htmlNode),!0}function o(l){let s,c=0,u=l.split(".");u.pop(),u=u.join(".");for(let v=0;v<n._valueFlat.length;v++){const y=n._valueFlat[v];if("condition"===y.type){if(y.nodeId===l){s=y;break}y.parentId===u&&c++}}const p=n._valueFlat.indexOf(s);n._valueFlat.splice(p,1),s.htmlNode.parentElement.removeChild(s.htmlNode);const g=i(p-1);c||i(p-(g?1:0));const b=n._valueFlat.filter(v=>v.nodeId===u)[0].htmlNode;b.children[1].childElementCount>0&&b.children[2].hasAttribute("limit-selection")&&!b.children[1].lastElementChild.hasAttribute("limit-selection")&&b.children[2].removeAttribute("limit-selection")}function r(l){const s=n._valueFlat.filter(c=>l===c.nodeId&&"group"===c.type)[0];for(let c=0;c<n._valueFlat.length;c++){const u=n._valueFlat[c],p=u.nodeId;u.parentId===l&&("group"===u.type?r(p):o(p))}n._valueFlat.indexOf(s)>-1&&n._valueFlat.splice(n._valueFlat.indexOf(s),1),s.htmlNode.parentElement.removeChild(s.htmlNode)}}_generateHTMLStructureFromFlatValue(e){const t=this,n=document.createDocumentFragment();if(t._valueFlat&&0!==t._valueFlat.length){for(let a=0;a<t._valueFlat.length;a++){const i=t._valueFlat[a],o=!!t.customOperations&&t.customOperations.find(l=>l.name===i.data[1]),r=i.parentId?(t.shadowRoot||t).querySelector('[node-id="'+i.parentId+'"]').querySelector(".smart-filter-group-condition-container"):t.$.contentContainer;if("group"===i.type){const l=document.createElement("div"),s=t.localize(i.data)||"";l.className="smart-filter-group",l.innerHTML='<div class="smart-filter-group-operator" role="button" aria-expanded="false" aria-haspopup="menu">'+s+'</div><div class="smart-filter-group-condition-container" role="group"></div><div class="smart-filter-add-condition-btn" role="button" aria-label="Add condition"><div>'+t.localize("add")+'</div></div><div class="smart-filter-add-btn" role="button" aria-expanded="false" aria-haspopup="menu" aria-label="Add group"></div>',l.firstElementChild.data=s,n.appendChild(l),l.setAttribute("node-id",i.nodeId),t._valueFlat[a].htmlNode=l}else if("condition"===i.type){const l=t._newFilterConditionRow(i.data);if(l.setAttribute("node-id",i.nodeId),n.appendChild(l),t._valueFlat[a].htmlNode=l,void 0!==i.data[0]&&void 0===i.data[1]){const s=t._getFilterOperations(t._fields.find(c=>c.value===i.data[0]));t._handleOnlyOperation(s,i.data,l)}else(-1!==["isblank","isnotblank"].indexOf(i.data[1])||o&&o.hideValue)&&(i.data.splice(2,1),l.children[2].classList.add("smart-visibility-hidden"))}else{const l=document.createElement("div");l.className="smart-filter-nested-operator",l.setAttribute("node-id",i.nodeId),l.setAttribute("role","button"),l.setAttribute("aria-expanded",!1),l.setAttribute("aria-haspopup","menu"),l.innerHTML=t.localize(i.data),n.appendChild(l),t._valueFlat[a].htmlNode=l}r.appendChild(n)}e&&t._validateValueAdvanced(),t.$.scrollableContainer.refresh()}}_validateValueAdvanced(){const e=this,t=e.value;let n=!1,a=!1,i=0;for(let o=0;o<t.length;o++){const r=t[o];if("string"!=typeof r)for(let l=r.length-1;l>=0;l--){let s=r[l];if(Array.isArray(s)&&0===s.length&&l!==r.length-1)r.splice(l,1),0===l&&r.splice(0,1),n=!0;else if("string"==typeof s){s=s.toLowerCase(),i++,(i>1||"and"!==s&&"or"!==s)&&(a=!0);continue}i=0}}n&&(e._emptyElementsStructure(!0),e._convertValueToFlat(e.value),e._generateHTMLStructureFromFlatValue()),a&&e._generateValue(!0)}_restrictNesting(){Array.from(this.getElementsByClassName("smart-filter-add-condition-btn")).forEach(e=>{const t=e.previousElementSibling.lastElementChild;t&&t.hasAttribute("limit-selection")&&e.setAttribute("limit-selection","")})}_clickHandler(e){const t=this,n=t.shadowRoot||t.isInShadowDOM?e.composedPath()[0]:e.target;if(t.disabled||!n||!n.closest||!t._isMobile&&0!==e.button)return;if(t._scrollBarDown)return void delete t._scrollBarDown;const a=n.closest(".smart-drop-down"),i=t._editor&&t._editor.contains(n)||a&&(t._editor.contains(a.ownerElement)||t._editor===a.ownerElement)||n.closest(".smart-custom-editor");t._editor&&t._editorIsOpen&&!i&&t._closeEditor();const o=n.closest(".smart-filter-group-condition")||n.closest(".smart-filter-nested-operator")||n.closest(".smart-filter-group");if(!o)return;const r=t._getItemById(o.getAttribute("node-id"));if(!r)return;if(t.$.fireEvent("itemClick",{id:r.nodeId,type:r.type,data:r.data}),n.closest(".smart-filter-delete-btn"))return void t._clickHandlerDeleteButton(r.htmlNode);const l=n.closest(".smart-filter-add-btn")||n.closest(".smart-filter-add-condition-btn");if(l){const c=l.closest(".smart-filter-group").getAttribute("node-id");return void(l.classList.contains("smart-filter-add-condition-btn")&&(t.maxConditions&&t._getTotalConditions()<t.maxConditions||!t.maxConditions)?t._addElement("condition",c,[]):t._clickHandlerFilterButton(l.classList,r.nodeId,n))}const s=n.closest(".filter-builder-item")||n.closest(".smart-filter-group-operator")||n.closest(".smart-filter-nested-operator");s&&t._clickHandlerFilterButton(s.classList,r.nodeId,n)}_downHandler(e){const t=this;if(!e.originalEvent||!t._isMobile&&0!==e.button)return;const n=t.shadowRoot||t.isInShadowDOM?e.originalEvent.composedPath()[0]:e.originalEvent.target,a=t.rightToLeft?e.pageX>n.getBoundingClientRect().right:e.pageX<n.getBoundingClientRect().left;if(t.allowDrag&&n.classList.contains("smart-filter-group-condition")&&a){const i=t._valueFlat.filter(o=>"condition"===o.type);return 1===i.length||2===i.length&&i[0].parentId===i[1].parentId&&i[1].htmlNode.hasAttribute("limit-selection")?void 0:(t._dragDetails={coords:{x:e.pageX,y:e.pageY},item:n,originalEvent:e},t.$.scrollableContainer._scrollView.disableSwipeScroll=!0,t._hoveredCondition=n,void window.getSelection().removeAllRanges())}this._scrollBarDown=n.closest("smart-scroll-bar"),e.stopPropagation(),e.preventDefault()}_scrollableContainerTouchmoveHandler(e){this._dragDetails&&e.cancelable&&(e.preventDefault(),e.stopPropagation())}_documentMoveHandler(e){const t=this,n=t._dragDetails;if(!n)return;const a=n.item;if(!n.feedbackShown){if(!(Math.abs(n.coords.x-e.pageX)>5||Math.abs(n.coords.y-e.pageY)>5))return;{const c=t._valueFlat.filter(u=>u.htmlNode===a)[0];if(t.$.fireEvent("dragStart",{data:c.data,item:a,originalEvent:e}).defaultPrevented)return delete t._dragDetails,delete t._hoveredCondition,void(t.$.scrollableContainer._scrollView.disableSwipeScroll=!1);n.allConditions=Array.from((t.shadowRoot||t).querySelectorAll(".smart-filter-group-condition")),n.data=c,n.feedback=t._addDragFeedback(),n.feedbackShown=!0,a.classList.add("dragged")}}const i=e.clientY;let o,r=t.shadowRoot||t.isInShadowDOM?e.originalEvent.composedPath()[0]:e.originalEvent.target;if(t.$.fireEvent("dragging",{data:n.data,item:a,originalEvent:e}),t.setAttribute("dragging",""),n.feedback.style.left=e.pageX+10+"px",n.feedback.style.top=e.pageY+10+"px",t._isMobile){const c=t._hoveredCondition;c&&(c.classList.remove("drop-target","top","bottom"),delete t._hoveredCondition);const u=document.elementFromPoint(e.clientX,i);u&&(r=u)}let l,s=r.closest(".smart-filter-group-condition");if(s){o=s;const c=o.getBoundingClientRect(),u=Math.abs(i-c.top),p=Math.abs(i-c.bottom);l=u<p?"top":"bottom"}else{let c,u;n.allConditions.forEach(p=>{const g=p.getBoundingClientRect(),b=Math.abs(i-g.top),v=Math.abs(i-g.bottom),y=Math.min(b,v);(void 0===u||y<u)&&(c=p,u=y,l=b<v?"top":"bottom")}),s=c}if(s===a||s.hasAttribute("limit-selection")&&"bottom"===l)s=void 0;else{const c=Array.from(s.parentElement.getElementsByClassName("smart-filter-group-condition")),u=c.indexOf(a);-1!==u&&("top"===l&&s===c[u+1]||"bottom"===l&&s===c[u-1])&&(s=void 0)}if(o=s,n.side=l,clearInterval(t._dragInterval),t._dragInterval=setInterval(function(){const c=t.getBoundingClientRect();t.$.scrollableContainer.scrollHeight>0&&c.left<=e.clientX&&c.left+c.width>=e.clientX?i>=c.top&&i<=c.top+36?t.$.scrollableContainer.scrollTop-=t._autoScrollCoefficient:i>=c.top+c.height-36&&i<=c.top+c.height?t.$.scrollableContainer.scrollTop+=t._autoScrollCoefficient:clearInterval(t._dragInterval):clearInterval(t._dragInterval)},1),o){t._hoveredCondition&&o!==t._hoveredCondition&&t._hoveredCondition.classList.remove("drop-target","top","bottom");const c=o.closest(".smart-filter-group");if(c&&c.hasAttribute("restricted"))return void(t._hoveredCondition=void 0);t._hoveredCondition=o,o.classList.remove("top","bottom"),o.classList.add(l,"drop-target")}else t._hoveredCondition&&(t._hoveredCondition.classList.remove("drop-target","top","bottom"),delete t._hoveredCondition)}_addDragFeedback(){const e=this,t=document.createElement("div");return e.rightToLeft?t.setAttribute("right-to-left",""):t.removeAttribute("right-to-left"),t.className="smart-query-builder-drag-feedback",e.theme&&t.setAttribute("theme",e.theme),document.body.appendChild(t),t}_documentUpHandler(e){const t=this,n=t._dragDetails;if(!n)return void(t.$.conditionsMenu.opened&&t._selectedElement&&!t._selectedElement.classList.contains("smart-filter-add-btn")&&t.$.conditionsMenu._hoverViaKeyboard(t.$.conditionsMenu.querySelector('smart-menu-item[value="'+t._editedItem.data+'"]')));const a=n.item,i=n.data,o=t._hoveredCondition;if(delete t._dragDetails,delete t._hoveredCondition,t.$.scrollableContainer._scrollView.disableSwipeScroll=!1,!t.hasAttribute("dragging"))return;if(clearInterval(t._dragInterval),window.getSelection().removeAllRanges(),t.removeAttribute("dragging"),a.classList.remove("dragged"),n.feedback.remove(),!o)return void t.$.fireEvent("dragEnd",{data:i.data,item:a,originalEvent:e,target:null,targetData:null,targetSide:null});const r=t._valueFlat.filter(y=>y.htmlNode===o)[0],l=t.$.fireEvent("dragEnd",{data:i.data,item:a,originalEvent:e,target:o,targetData:r.data,targetSide:n.side});if(o.classList.remove("drop-target","top","bottom"),l.defaultPrevented)return;const s=t.value,c=i.nodeId.split(".").map(y=>parseFloat(y)),u=s[2*(c[0]-1)],p=r.nodeId.split(".").map(y=>parseFloat(y)),g=s[2*(p[0]-1)];let b="and";u.length>1&&(0===c[1]?(b=u[1],u[1]="!remove!"):(b=u[c[1]-1],u[c[1]-1]="!remove!")),u[c[1]]="!remove!","top"===n.side?g.splice(p[1],0,i.data,b):g.splice(p[1]+1,0,b,i.data);for(let y=0;y<s.length;y++)Array.isArray(s[y])&&(s[y]=s[y].filter(x=>"!remove!"!==x));for(let y=s.length-1;y>=0;y--)Array.isArray(s[y])&&0===s[y].length&&(0===y?s.splice(0,2):(s.splice(y-1,2),y--));t._emptyElementsStructure(!0),t._convertValueToFlat(s),t._generateHTMLStructureFromFlatValue(),t._validValue=t._getValidValue();const v=JSON.stringify(t._validValue);t._oldValueAsString!==v&&(t._oldValueAsString=v,t.$.fireEvent("change",{value:JSON.parse(v),linq:t._queryParser.toLinq(t._validValue)}))}_clickHandlerDeleteButton(e,t){const n=this;if(e&&e.classList){if(n._closeEditor(),1===n.getElementsByClassName("smart-filter-group-condition").length){const a=n._valueFlat[1].htmlNode.children;n.value=[[[]]],n._validValue=n._getValidValue(),n._valueFlat[1].data=[],n._valueFlat[1].htmlNode.setAttribute("limit-selection",""),a[0].setAttribute("placeholder",""),a[1].setAttribute("placeholder",""),a[2].setAttribute("placeholder",""),a[2].removeAttribute("invalid-value"),a[0].firstElementChild.innerHTML=n.propertyPlaceholder,a[1].firstElementChild.innerHTML=n.operatorPlaceholder,a[2].firstElementChild.innerHTML=n.valuePlaceholder;const i=JSON.stringify(n._validValue);return n._oldValueAsString!==i&&(n._oldValueAsString=i,n.$.fireEvent("change",{value:JSON.parse(i),linq:n._queryParser.toLinq(n._validValue)})),void n._restrictNesting()}if(e.classList.contains("smart-filter-group")){if(t&&n._valueFlat.filter(a=>a.parentId===e.getAttribute("node-id")).length>0)return;n._deleteElement(e,"group")}else n._deleteElement(e);n._generateValue(),n.$.scrollableContainer.refresh(),Array.from(n.$.contentContainer.children).forEach((a,i)=>{const o=(i+1).toString();a.setAttribute("node-id",o),n._valueFlat.filter(r=>r.htmlNode===a)[0].nodeId=o,Array.from(a.children[1].children).forEach((r,l)=>{const s=n._valueFlat.filter(u=>u.htmlNode===r)[0],c=o+"."+l;r.setAttribute("node-id",c),s.parentId=o,s.nodeId=c})})}}_menuCloseHandler(){const e=this.$.conditionsMenu.controlledBy;e.setAttribute("aria-expanded",!1),e.removeAttribute("aria-controls"),delete this.$.conditionsMenu.controlledBy}_menuClosingHandler(e){const t=e.detail;"interaction"===t.trigger&&this._selectedElement===t.target&&e.preventDefault()}_menuItemClickHandler(e){const t=this,n=t._selectedElement.closest(".smart-filter-group-operator, .smart-filter-nested-operator"),a=e.detail,i=a.value;let o;if(n){n.innerHTML=t.localize(i)||a.label,n.value=i,o=n.classList.contains("smart-filter-nested-operator")?n.getAttribute("node-id"):n.parentElement.getAttribute("node-id");for(let r=0;r<t._valueFlat.length;r++)if(t._valueFlat[r].nodeId===o){t._valueFlat[r].data=n.value;break}t._generateValue()}else o=t._selectedElement.parentElement.getAttribute("node-id"),t._addElement("group",null,i);t.$.scrollableContainer.refresh()}_newFilterConditionRow(e=[]){const t=this,n=e[0];let a,i=t._fields.find(p=>p.value===n),o=i?i.label:void 0;void 0===n||!o&&"static"===t.fieldsMode?e.length=0:(o||(i=t._getDynamicFieldInfo(n),o=i.label,e[0]=i.dataField),a=t._getFilterOperations(i).find(p=>p.value===e[1]),a&&(a=a.label));const r=t._formatValueStringRepresentation(e[2],e),l=t._validateValueField(void 0,e[1],e[2]);let s=document.createElement("div"),c="condition"+Math.floor(65536*(1+Math.random())).toString(16).substring(1),u='<div class="filter-builder-item smart-filter-field-name" id="'+c+'Field" '+(o?'><div class="smart-value-container" role="presentation">'+o:'placeholder><div class="smart-value-container" role="presentation">'+t.propertyPlaceholder)+'</div></div><div class="filter-builder-item smart-filter-operation" id="'+c+'Operation" '+(a?'><div class="smart-value-container" role="presentation">'+a:'placeholder><div class="smart-value-container" role="presentation">'+t.operatorPlaceholder)+'</div></div><div class="filter-builder-item smart-filter-value" id="'+c+'Value" '+(l?"":"invalid-value")+(void 0!==e[2]?'><div class="smart-value-container" role="presentation">'+r:'placeholder><div class="smart-value-container" role="presentation">'+t.valuePlaceholder)+'</div></div><div class="smart-filter-delete-btn" role="button" aria-label="Close"></div>';return s.className="smart-filter-group-condition",s.setAttribute("role","group"),s.innerHTML=u,t._setAriaLabel(s),e.length||s.setAttribute("limit-selection",""),s}_setAriaLabel(e){const t=[];for(let n=0;n<e.children.length-1;n++){const a=e.children[n];a.classList.contains("smart-visibility-hidden")||a.hasAttribute("placeholder")||t.push(e.children[n].innerText)}e.setAttribute("aria-label",0!==t.length?t.join(" "):"Empty condition row")}_formatValueStringRepresentation(e,t){const n=this,a=t[2],i=t[0],o=n._getFieldByFieldName(i);let r,l=t[1];if(!o)return e;if(null==e)return n.valuePlaceholder;if(void 0!==l&&n.customOperations&&n.customOperations.length>0&&(l=n.customOperations.find(c=>c.name===l),l&&l.valueTemplate))return"<span>"+l.valueTemplate(n._editor,e)+"</span>";switch(o.dataType.toLowerCase()){case"date":case"datetime":(e=e instanceof Date||"string"==typeof e||"number"==typeof e&&!isNaN(e)?new Smart.Utilities.DateTime(e):e).calendar.days=n._localizedDays,e.calendar.months=n._localizedMonths,e.calendar.locale=n.locale,r=e.toString("date"===o.dataType?n.formatStringDate:n.formatStringDateTime);break;case"array":r="string"==typeof e?e.split(","):e;break;case"object":r="string"==typeof e?e:JSON.stringify(e);break;case"number":r=e;break;case"boolean":r=!!e;break;default:r=e+""}return n.valueFormatFunction?"<span>"+n.valueFormatFunction({label:r,value:a,dataField:i,dataType:o.dataType||"string"})+"</span>":"<span>"+r+"</span>"}_getFieldByFieldName(e){return Object.assign({},this._fields.find(t=>t.value===e))}_refresh(){const e=this;e._generateValue(),e._emptyElementsStructure(),e._generateHTMLStructureFromFlatValue(),e._restrictNesting()}_generateValue(e){const t=this;let n=[],a=t._valueFlat.slice(0),i=[];for(let o=0;o<a.length;o++){const r=a[o];let l={};"group"===r.type&&(l.nodeId=r.nodeId,l.parentId=r.parentId,l.data=r.data,l.structure=[],n.push(l))}for(let o=0;o<n.length;o++){const r=n[o];for(let l=0;l<a.length;l++){const s=a[l];if(s.parentId===r.nodeId&&"condition"===s.type){const c=a[l-1];c&&c.parentId===r.nodeId&&"operator"===c.type&&r.structure.push(c.data.toString()),r.structure.push(s.data)}}}n=n.filter(o=>o.structure.length>0),n.sort(function(o,r){return r.nodeId.split(".").length-o.nodeId.split(".").length});for(let o=0;o<n.length;o++){const r=n[o],l=n.filter(s=>s.nodeId===r.parentId)[0];l&&l.structure?l.structure.push(r.structure):"0"!==r.nodeId?r.data&&(o>0&&i.push(r.data),i.push(r.structure)):i=i.concat(r.structure)}if(t.value=i,t._validateValue(),t._validValue=t._getValidValue(),t._updateValidationStatus(),!e){const o=JSON.stringify(t._validValue);t._oldValueAsString!==o&&(t._oldValueAsString=o,t.$.fireEvent("change",{value:JSON.parse(o),linq:t._queryParser.toLinq(t._validValue)}))}}_updateValidationStatus(){const e=this,t=e.customOperations.filter(o=>"function"==typeof o.validateValue),n=e._valueFlat,a=!!e._validationStatus;let i=!0;for(let o=0,r=n.length;o<r;o+=1){const l=n[o];if("condition"!==l.type)continue;const s=l.data[1],c=t.find(u=>u.name===s);if(c&&0==!!c.validateValue(l.data[2])){i=!1;break}}if(e._validationStatus!==i){const o=void 0!==e._validationStatus;e._validationStatus=i,o&&e.$.fireEvent("validationChange",{oldValue:a,newValue:i})}}_getItemById(e,t){const n=this._valueFlat.filter(a=>t?a.parentId===e:a.nodeId===e);return n.length>0?n[0]:null}_validateStoredValue(e,t){const n=this;if(!t&&!n._editedItem||!t&&!(t=n._editedItem.data[0]))return e;const a=n._getFieldByFieldName(t).dataType;if(void 0===a)return e+"";switch(a.toLowerCase()){case"date":case"datetime":e=new Smart.Utilities.DateTime(e).toDate();break;case"number":"number"!=typeof e&&(e=parseFloat(e));break;case"boolean":"boolean"!=typeof e&&(e=!!e);break;case"object":"object"!=typeof e&&(e={});break;case"array":Array.isArray(e)||(e=[e]);break;default:"string"!=typeof e&&(e+="")}return e}_closeEditor(e){const t=this;let n;if(!t._editedItem||!t._editorIsOpen)return;const a=t._editedItem,i=t._editor.closest(".filter-builder-item"),o=i.querySelector(".smart-value-container"),r=i.parentElement,l=r.children[2];if(t._editor===t.$.dateTimePickerEditor)t._editor._inputChangeHandler(),n=t._editor.value,n&&(n=n.toDate());else if(t._editor===t.$.checkBoxEditor)n=t._editor.checked;else if(t._editor===t.$.customEditor)t._editor&&Array.from(t._editor.getElementsByTagName("smart-numeric-text-box")).forEach(s=>s._inputBlurHandler()),n=t._validateStoredValue(t._selectedCustomCondition.handleValue(t._editor));else if(t._editor===t.$.numericTextBoxEditor)t._editor._inputBlurHandler(),n=t._editor.value;else if(i.classList.contains("smart-filter-value")){const s=t._getFieldByFieldName(t._editedItem.data[0]);if("array"===s.dataType)n=t._editor.value.split(",");else if("object"===s.dataType)n=JSON.parse(t._editor.value);else{const c=t._editor.value;n=s.lookup&&s.lookup.dataSource?{label:c,value:t._editor.dataset.value||c}:c}}else n=t._editor.value;if(i.classList.contains("smart-filter-field-name")){if(""===n.trim())return void t._hideEditor(i,void 0===a.data[0]);r.hasAttribute("limit-selection")&&(r.removeAttribute("limit-selection"),r.parentElement.nextElementSibling.removeAttribute("limit-selection"));const s=t._fields.find(u=>u.label===n),c=a.data[0];if(s)a.data[0]=s.value;else{if("dynamic"!==t.fieldsMode){const u=t._fields.find(p=>p.value===c);return u&&(o.innerHTML=u.label),void t._hideEditor(i)}{const u=t._getDynamicFieldInfo(n);n=u.label,a.data[0]=u.dataField}}o.innerHTML=n,t._handleFieldChange([c,a.data[0]],[l,a,r])}else if(i.classList.contains("smart-filter-operation"))t._handleOperationChange([a,n,t._editor.$.input.dataValue],[o,l]);else{let s,c;"object"==typeof n&&void 0!==n.value?(s=n.label,c=n.value,void 0===s&&(s=c)):s=c=n,a.data[2]=c,o.innerHTML=t._formatValueStringRepresentation(s,a.data)}t._validateValueField(l,a.data[1],a.data[2]),t._generateValue(e),t._hideEditor(i)}_validateValueField(e,t,n){const a=this.customOperations;let i=!0;if(e&&e.removeAttribute("invalid-value"),a&&a.length>0){const o=a.find(r=>r.name===t);o&&"function"==typeof o.validateValue&&(i=!!o.validateValue(n),!i&&e&&e.setAttribute("invalid-value",""))}return i}_getDynamicFieldInfo(e){const t=this,n={label:e,dataField:e,dataType:"string"};if(t.getDynamicField){const a=t.getDynamicField(e);a.label&&(n.label=a.label),a.dataField&&(n.dataField=a.dataField),a.dataType&&(n.dataType=a.dataType),a.filterOperations&&Array.isArray(a.filterOperations)&&a.filterOperations.length>0&&(n.filterOperations=a.filterOperations),a.lookup&&(n.lookup=a.lookup)}return t._manuallyAddedFields.push(n),t._mapFieldsToMenu(),n}_handleFieldChange(e,t){const n=this,a=e[0],i=t[1],o=t[2],r=t[0],l=n._fields.find(b=>b.value===e[1]),s=n._getFilterOperations(l),c=function(){l.value!==a&&n.$.fireEvent("propertySelected",{label:l.label,value:l.value})};if(!a||void 0===i.data[1])return n._handleOnlyOperation(s,i.data,o),void c();const u=n._fields.find(b=>b.value===a),p=u.dataType,g=l.dataType;if(l!==u&&(g!==p||"enum"===g||l.filterOperations||u.filterOperations)){if(s.find(b=>b.value===i.data[1]))return g===p&&"enum"!==g?void 0:"date"===g&&"dateTime"===p||"dateTime"===g&&"date"===p?(r.firstElementChild.innerHTML=n._formatValueStringRepresentation(i.data),void c()):(i.data.splice(2,1),r.setAttribute("placeholder",""),r.firstElementChild.innerHTML=n.valuePlaceholder,void c());i.data.splice(1,2),o.children[1].setAttribute("placeholder",""),o.children[1].firstElementChild.innerHTML=n.operatorPlaceholder,r.setAttribute("placeholder",""),r.firstElementChild.innerHTML=n.valuePlaceholder,r.classList.remove("smart-visibility-hidden"),n._handleOnlyOperation(s,i.data,o),c()}}_handleOnlyOperation(e,t,n){if(1===e.length||this.autoPrompt&&"immediately"===this.applyMode&&e.length>1){const i=e[0];t[1]=i.value,n.children[1].removeAttribute("placeholder",""),n.children[1].firstElementChild.innerHTML=e[0].label,("isblank"===i.value||"isnotblank"===i.value||i.custom&&i.hideValue)&&(t.splice(2,1),n.children[2].classList.add("smart-visibility-hidden"))}}_handleOperationChange(e,t){const n=this,a=e[0],i=e[1],o=e[2],r=t[0],l=t[1],s=void 0!==a.data[1]?n._filterOperationDescriptions.find(v=>v.value===a.data[1]):void 0,c=n._filterOperationDescriptions.find(v=>v.value===o);if(!c||c===s)return;const u=a.data[0],p=a.data[1],g=a.data[2],b=c.value;if(a.data[1]=b,r.innerHTML=i,"isblank"===b||"isnotblank"===b||c.custom&&c.hideValue)a.data.splice(2,1),l.classList.add("smart-visibility-hidden");else if(l.classList.contains("smart-visibility-hidden"))l.setAttribute("placeholder",""),l.classList.remove("smart-visibility-hidden"),l.firstElementChild.innerHTML=n.valuePlaceholder;else if(c.custom){const v=n._getFieldByFieldName(u);if(c.editorTemplate){const y=c.editorTemplate(v.dataType,p,v);y&&(n.$.customEditor.innerHTML="",n.$.customEditor.appendChild(y))}c.valueTemplate?l.firstElementChild.innerHTML=c.valueTemplate(n.$.customEditor,g):void 0===g?(l.setAttribute("placeholder",""),l.firstElementChild.innerHTML=n.valuePlaceholder):l.firstElementChild.innerHTML=g}else void 0===g?(a.data.splice(2,1),l.setAttribute("placeholder",""),l.firstElementChild.innerHTML=n.valuePlaceholder):c.custom||(l.firstElementChild.innerHTML=n._formatValueStringRepresentation(g,a.data))}_hideEditor(e,t){const n=this;t&&e.setAttribute("placeholder",""),e.removeAttribute("edited"),n.$.editorsContainer.removeAttribute("open"),n._editor.close&&n._editor.close(),n._editor.classList.add("smart-hidden"),n._editorIsOpen=n._enterIsPressedInEditor=!1,n.$.scrollableContainer.refresh(),n._setAriaLabel(e.parentElement)}_clickHandlerFilterButton(e,t,n){const a=this;function i(o,r,l){a._contextMenuOptions=0===r.length?a._defaultFilterOperationDescriptions:r,a._handleContextMenu(o),a.$.conditionsMenu.opened&&(a.$.conditionsMenu._discardKeyboardHover(),a.$.conditionsMenu._hoverViaKeyboard(a.$.conditionsMenu.querySelector('smart-menu-item[value="'+l+'"]')))}n.closest(".smart-editors-container")||(a._closeEditor(),a._editedItem=a._getItemById(t),e.contains("smart-filter-add-btn")?i(n,a._groupOperationDescriptions):(e.contains("smart-filter-field-name")||a._editedItem.data&&a._editedItem.data.length)&&(e.contains("smart-filter-group-operator")||e.contains("smart-filter-nested-operator")?i(n,a._groupOperationDescriptions,a._editedItem.data):(n.closest(".filter-builder-item").removeAttribute("placeholder"),a._openEditor(n))))}_handleContextMenu(e){const t=this;if(t._selectedElement===e&&t.$.conditionsMenu.opened)return void t.$.conditionsMenu.close();if(t._closeEditor(),t.disableContextMenu)return void(t._selectedElement=e);const n=e.getBoundingClientRect(),a=t.getBoundingClientRect(),i=n.left+t.$.contentContainer.scrollLeft-a.left,o=n.top+t.$.contentContainer.scrollTop-a.top+n.height;e.hasAttribute("aria-haspopup")&&(t.$.conditionsMenu.controlledBy&&(t.$.conditionsMenu.controlledBy.setAttribute("aria-expanded",!1),t.$.conditionsMenu.controlledBy.removeAttribute("aria-controls")),e.setAttribute("aria-controls",t.$.conditionsMenu.id),e.setAttribute("aria-expanded",!0),t.$.conditionsMenu.controlledBy=e),t.$.conditionsMenu.dataSource=t._contextMenuOptions,t.$.conditionsMenu.open(i,o+3),t._selectedElement=e,t.$.scrollableContainer.refresh()}_openEditor(e){const t=this,n=e&&e.closest(".smart-filter-group-condition")?e.closest(".smart-filter-group-condition").getAttribute("node-id"):null,a=e.closest(".filter-builder-item"),i=t._getItemById(n);let o="";void 0!==i.data[0]?o=i.data[0]:t._fields.length&&(o=t._fields[0].value);let r,l,s=t._getFieldByFieldName(o),c="";if(a.classList.contains("smart-filter-field-name"))l=0,t._fields||t._mapFieldsToMenu(),s.lookup={dataSource:t._fields.slice(),readonly:!1},c=s.label||"",r=s.value;else if(a.classList.contains("smart-filter-operation")){l=1;let v=t._getFilterOperations(s);s.lookup={dataSource:v,readonly:!0};let y=v.find(x=>x.value===i.data[l])||v[0];c=y.label,r=y.value}else l=2,c=i.data[l],void 0===c&&(c="");t._editorIsOpen&&t._closeEditor(),a.setAttribute("edited",""),t._editedItem=i;const u=t._fields.filter(v=>v.value===o),p=t._filterOperationDescriptions.filter(v=>v.value===i.data[1]&&v.custom),g=u.length>0?u[0]:null,b=s.lookup&&s.lookup.dataSource?"lookup":g?g.dataType:void 0;2===l&&0!==p.length&&p[0].editorTemplate?(t._selectedCustomCondition=p[0],t._openCustomEditor(b,c,s)):t._openEditorByFieldType(b,c,s,r),a.appendChild(t.$.editorsContainer),t._editor.classList.remove("smart-hidden"),t._editorIsOpen=!0,t.$.editorsContainer.setAttribute("open",""),t.$.scrollableContainer.refresh(),t._editor.classList.contains("smart-custom-editor")||requestAnimationFrame(()=>t._editor.focus()),s.lookup&&t._editor.open()}_getFilterOperations(e){const t=this;let n=t._filterOperationDescriptions.slice();if(e.filterOperations)n=t._filterOperationDescriptions.filter(a=>e.filterOperations.indexOf(a.value)>-1);else{let a;switch(e.dataType){case"date":case"dateTime":case"number":a=["=","<>","<",">","<=",">=","isblank","isnotblank"];break;case"boolean":a=["=","<>","isblank","isnotblank"];break;case"object":a=["isblank","isnotblank"];break;case"string":a=["contains","notcontains","startswith","endswith","=","<>","isblank","isnotblank"];break;default:a=["contains","notcontains","startswith","endswith","=","<>","<",">","<=",">=","isblank","isnotblank"]}n=t._filterOperationDescriptions.filter(i=>a.indexOf(i.value)>-1)}return t.showIcons&&n.map(a=>a.icon=t.icons[a.value]),n}_openCustomEditor(e,t,n){const a=this,i=a.customOperations[a._selectedCustomCondition.index].editorTemplate(e,t,n);a.$.customEditor.innerHTML="",i&&a.$.customEditor.appendChild(i),a._editor=a.$.customEditor}_openEditorByFieldType(e,t,n,a){const i=this;if(e)switch(e.toLowerCase()){case"boolean":return i._initializeEditor("checkBox"),void(i._editor.checked=!!t);case"date":case"datetime":return i._initializeEditor("dateTimePicker"),i._editor.formatString="date"===e?i.formatStringDate:i.formatStringDateTime,void(i._editor.value=t);case"number":return i._initializeEditor("numericTextBox"),void(i._editor.value=t||0)}if(i._initializeEditor("input"),i._editor.dropDownWidth=i.dropDownWidth,"lookup"===e){const o=n.lookup.minLength,r=n.lookup.dataSource;if(i._editor.autoCompleteDelay=n.lookup.autoCompleteDelay||100,i._editor.dropDownAppendTo=i.$.container,i._editor.dropDownButtonPosition=i.rightToLeft?"left":"right",i._editor.minLength=isNaN(o)||null===o?1:o,i._editor.readonly=!!n.lookup.readonly,"function"==typeof r?i._editor.dataSource=r:r instanceof Promise?r.then(l=>{if(!(i._editor instanceof Smart.Input))return;const s=i._editor.opened;i._editor.dataSource=l,s&&(i._editor.open(),""===t&&i._editor.readonly&&l.length&&(i._editor.value=l[0].label||l[0]))}):i._editor.dataSource=r,"object"===e)t=JSON.stringify(t||{});else if(""===t&&i._editor.readonly){const l=i._editor.dataSource;if(Array.isArray(l)){const s=l[0];t=s&&(s.value||s.label)||""}else t=""}if(i._editor.isRendered){const l=i._editor.$.input.dataValue;null!=l&&l===t||(i._editor.value=void 0!==t?t+"":"")}else i._editor.value=void 0!==t?t+"":""}else i._editor.dataSource=[],i._editor.dropDownButtonPosition="none",i._editor.readonly=!1,i._editor.value=void 0!==t?t+"":"";a&&"object"!==e&&i._editor.isRendered&&(i._editor.$.input.dataValue=a)}_initializeEditor(e){const t=this;if(t.$[e+"Editor"])return void(t._editor=t.$[e+"Editor"]);const n=document.createElement("smart-"+Smart.Utilities.Core.toDash(e));"numericTextBox"===e?(n.spinButtons=!0,n.inputFormat="floatingPoint"):"dateTimePicker"===e&&(n.dropDownAppendTo=t.$.container,n.calendarButton=!0,n.dropDownDisplayMode="auto",n.enableMouseWheelAction=!0,n.locale=t.locale,n.autoClose=!0,n.messages[t.locale]||(n.messages[t.locale]={}),n.messages[t.locale].dateTabLabel=t.localize("dateTabLabel"),n.messages[t.locale].timeTabLabel=t.localize("timeTabLabel")),n.rightToLeft=t.rightToLeft,n.theme=t.theme,n.animation=t.animation,n.$.addClass("smart-hidden underlined"),t.$.editorsContainer.appendChild(n),t._editor=t.$[e+"Editor"]=n}_getValidValue(){const e=this,n=[];let a=!1;return e.properties.value.value.forEach(i=>{if(Array.isArray(i)){let o=!1,r=!1;const l=[];i.forEach(s=>{if(Array.isArray(s)){const u=s[1];if(void 0===s[0]||void 0===u)return void(r=!0);if(void 0!==s[2]||"isblank"===u||"isnotblank"===u)return o=!0,void l.push(s);const g=e._filterOperationDescriptions.find(b=>b.value===u);g.custom&&g.hideValue?(o=!0,l.push(s)):r=!0}else r?r=!1:l.push(s)}),o?("string"==typeof l[l.length-1]&&l.pop(),n.push(l)):a=!0}else a?a=!1:n.push(i)}),"string"==typeof n[n.length-1]&&n.pop(),n}}),Smart.Utilities.Assign("QueryParser",class{constructor(e,t,n){const a=this;a.customOperations=t||[],a.fields=e||[],a.dynamicField=n}toLinq(e){return Array.isArray(e)&&this._arePropertiesValid()?this._parseQueryToLinq(e):""}toValue(e){return"string"==typeof e&&this._arePropertiesValid()?this._parseLinqToValue(e):[]}_arePropertiesValid(){return Array.isArray(this.customOperations)?!!Array.isArray(this.fields)||(console.log('Invalid "fields" property.'),!1):(console.log('Invalid "customOperations" property.'),!1)}_parseQueryToLinq(e){const t=this,n={and:"&&",or:"||"};let a="";for(let i=0;i<e.length;i++){const o=e[i];if(Array.isArray(o))if(o.indexOf("and")>-1||o.indexOf("or")>-1||1===o.length&&Array.isArray(o[0])){const r=t._parseQueryToLinq(o);r?a+=o.length>1?"("+r+")":r:/\s(&|\|){2}\s$/gm.test(a)&&(a=a.replace(/\s(&|\|){2}\s$/gm,""))}else a+=t._getExpressionFromQuery(o)||"";else a&&(a+=" "+n[o]+" ")}return a}_getExpressionFromQuery(e){const t=e[0],n=e[1];let a=e[2];const i=this.customOperations.find(o=>o.name===n);return i&&i.expressionTemplate?("string"==typeof a&&a.includes('"')&&i.expressionTemplate.includes('"')&&(a=JSON.stringify(a).slice(1,-1)),i.expressionBuilderCallback?i.expressionBuilderCallback(t,n,a):i.expressionTemplate.replace("{0}",t).replace("{1}",a)):""}_parseLinqToValue(e){const t=this;let n,a=0,i=[];for(let l=0;l<e.length;l++)if("("===e[l])a++,void 0===n&&(n=l);else if(")"===e[l]&&a>0&&(a--,0===a)){let s=e.substring(n,l+1).trim();s.length&&(s.includes("&&")||s.includes("||"))&&i.push({expr:s}),n=void 0}let o,r=[];if(i.length)for(let l=0;l<i.length;l++){let s;i[l].query=t._getQueryFromExpression(i[l].expr),s=o?e.substring(e.indexOf(o)+o.length,e.indexOf(i[l].expr)).trim():e.substring(0,e.indexOf(i[l].expr)).trim(),s&&r.push(s),o=i[l].expr}r.push(o?e.substring(e.indexOf(o)+o.length).trim():e.trim());for(let l=0;l<r.length;l++){const s=r[l].replace(/^&{2}|^\|{2}|&{2}$|\|{2}$/gm,"").trim();s.length&&i.push({expr:s,query:t._getQueryFromExpression(s),outher:!0})}return t._constructValueFromQueries(e,i)}_getQueryFromExpression(e){const t=this,n=t.fields,a=t.dynamicField;let i=[],o=e;const r=function(l){let s=[];const c=t.customOperations.filter(p=>p.expressionTemplate);c.sort((p,g)=>g.expressionTemplate.length-p.expressionTemplate.length);for(let p=0;p<c.length;p++){const g=c[p],b=new RegExp(g.expressionTemplate.replace(/\(/gm,"\\(").replace(/\)/gm,"\\)").replace(/\[/gm,"\\[").replace(/\]/gm,"\\]").replace(/"{\d+}"/gm,'\\W*"([^"]*)[^a-zA-Z0-9-\\s\\)]+').replace(/{\d+}/gm,"([@|$]*\\w+[.]*\\w+(?!\\s)*)\\s{0}").replace(/ /gm,"\\s"),"gm");if(b.test(l)){b.lastIndex=0;let v,y,x=b.exec(l);if(x=x.filter((D,T)=>x.indexOf(D)===T),g.expressionReaderCallback){let D=g.expressionReaderCallback(x[0],x.slice(1));D&&(v=D.fieldName,y=D.value)}void 0===v&&(v=x[1]||""),void 0===y&&(y=x[2]||""),s.push({operator:g.name,field:v,value:y,query:x[0]})}}let u=s.find(p=>n.find(g=>g.filterOperations.indexOf(p.operator)>-1&&g.dataField===p.field));if(!u&&a)for(let p=0;p<s.length;p++){const g=s[p],b=a(g.field);if(b&&Array.isArray(b.filterOperations)&&b.filterOperations.indexOf(g.operator)>-1){u=g;break}}if(u)return i.push({expr:u.query,query:[u.field,u.operator,u.value]}),u.query};if(o){for(;o.length;){o&&(o=o.trim(),"("===o[0]&&")"===o[o.length-1]&&(o=o.trim().replace(/^\(|\)$/gm,"")),o=o.replace(/^&{2}|^\|{2}|&{2}$|\|{2}$/gm,"").trim());const l=r(o);if(!l)break;o=o.replace(l,"").trim()}return t._constructValueFromQueries(e,i)}}_constructValueFromQueries(e,t){let n=[];t.sort((a,i)=>e.indexOf(a.expr)-e.indexOf(i.expr));for(let a=0;a<t.length;a++){let i=t[a-1];if(i){const o=e.substring(e.indexOf(i.expr)+i.expr.length,e.indexOf(t[a].expr)).trim();n.push("||"===o?"or":"and")}t[a].outher?t[a].query.forEach(o=>n.push(Array.isArray(o)?[o]:o)):n.push(t[a].query)}return n}})},5766:()=>{Smart("smart-filter-panel",class extends Smart.BaseElement{static get properties(){return{buttons:{value:["clear","filter"],type:"array"},data:{value:null,type:"array?",reflectToAttribute:!1},dataField:{value:null,type:"string?"},dataSource:{value:null,type:"any",reflectToAttribute:!1},evaluateFilterExpression:{value:null,type:"function?",reflectToAttribute:!1},filterType:{value:"string",allowedValues:["numeric","string","date","boolean"],type:"string"},formatString:{value:"d",type:"string"},messages:{value:{en:{addCondition:"Add Condition",addGroup:"Add Group",and:"and",blanks:"(Blanks)",cancel:"Cancel",clear:"Clear",contains:"contains",containsCaseSensitive:"contains (case sensitive)",dateTabLabel:"DATE",doesNotContain:"does not contain",doesNotContainCaseSensitive:"does not contain (case sensitive)",empty:"empty",endsWith:"ends with",endsWithCaseSensitive:"ends with (case sensitive)",equal:"equal",equalCaseSensitive:"equal (case sensitive)",filter:"Filter",greaterThan:"greater than",greaterThanOrEqual:"greater than or equal",lessThan:"less than",lessThanOrEqual:"less than or equal",mismatchedProperties:'smartFilterPanel: The "filterType" and the data type of the selected "dataField" are mismatched.',missingProperty:'smartFilterPanel: When mode is \'excel\', either "data" and "dataField" or "dataSource" of type Array have to be set.',notEmpty:"not empty",notEqual:"not equal",notNull:"not null",null:"null ",or:"or",placeholderBoolean:"Select value",placeholderDate:"Enter date",placeholderNumber:"Enter number",placeholderTime:"Enter time",placeholderValue:"Enter value",selectAll:"(Select All)",showRows:"Show rows where:",startsWith:"starts with",startsWithCaseSensitive:"starts with (case sensitive)",matchCase:"Match Case",timeTabLabel:"TIME"}},type:"object",extend:!0},mode:{value:"default",allowedValues:["basic","default","excel"],type:"string"}}}static get listeners(){return{"cancelButton.click":"cancel","clearButton.click":"clear","filterButton.click":"filter"}}template(){return'<div id="container" class="smart-container" role="presentation">\n                <div id="label" class="smart-filter-panel-label"></div>\n                <div id="mainContainer" role="presentation"></div>\n                <div id="buttonContainer" class="smart-filter-panel-button-container" role="presentation">\n                    <smart-button id="filterButton" class="primary" animation="[[animation]]" disabled="[[disabled]]" right-to-left="[[rightToLeft]]" theme="[[theme]]" unfocusable="[[unfocusable]]"></smart-button>\n                    <smart-button id="clearButton" animation="[[animation]]" disabled="[[disabled]]" right-to-left="[[rightToLeft]]" theme="[[theme]]" unfocusable="[[unfocusable]]"></smart-button>\n                    <smart-button id="cancelButton" animation="[[animation]]" disabled="[[disabled]]" right-to-left="[[rightToLeft]]" theme="[[theme]]" unfocusable="[[unfocusable]]"></smart-button>\n                </div>\n            </div>'}static get styleUrls(){return["smart.grid.css","smart.dropdownlist.css","smart.menu.css","smart.filterpanel.css","smart.textbox.css"]}ready(){super.ready()}render(){const e=this,t=e.filterType;e.$.label.id||(e.$.label.id=e.id+"Label"),e.setAttribute("role","dialog"),e.setAttribute("aria-labelledby",e.$.label.id),e._localize(),e._setButtonsVisibility(),e._filterType=t+"Filter",e._filterHandler=new(Smart.Utilities[t.slice(0,1).toUpperCase()+t.slice(1)+"FilterHandler"])(e),super.render()}cancel(){const e=this;e._filterHandler[e.mode+"Cancel"](),e.$.fireEvent("cancel")}clear(){const e=this;e._filterHandler[e.mode+"Clear"](),e.$.fireEvent("clear")}reset(){const e=this;e.$.clearButton.removeAttribute("hover"),e.$.filterButton.removeAttribute("hover"),e.$.cancelButton.removeAttribute("hover"),e._filterHandler.firstInputMatchCase&&e._filterHandler.firstInputMatchCase.classList.remove("active"),e._filterHandler.secondInputMatchCase&&e._filterHandler.secondInputMatchCase.classList.remove("active"),e._filterHandler[e.mode+"Clear"](),e._filterHandler.filterObject=new Smart.Utilities.FilterGroup}getFilter(){if(this._filterHandler){const e=new Smart.Utilities.FilterGroup;for(let t in this._filterHandler.filterObject)e[t]=this._filterHandler.filterObject[t];return e}return null}evaluate(e){try{return this._filterHandler.evaluate(e)}catch(t){return!1}}filter(){const e=this;e._filterHandler[e.mode+"Filter"](),e.$.fireEvent("filter")}getState(){return this._filterHandler.cachedFilter}loadState(e){try{const t=this;t._filterHandler.cachedFilter=e,t._filterHandler[t.mode+"Cancel"]()}catch(t){}}propertyChangedHandler(e,t,n){super.propertyChangedHandler(e,t,n);const a=this,i=a._filterHandler;function o(){a.$.mainContainer.innerHTML="",function(){const r=["cachedFilter","caseSensitive","customExcelFilterObjects","customItems","dataSource","defaultListSelection","defaultListSource","displayMode","filterBuilder","filterBuilderObject","filterBuilderOperations","filterObject","firstInput","firstList","operationsMapping","operatorList","secondInput","secondList","timeOnly","tree"];r.forEach(function(l){delete i[r[l]]}),delete a._filterHandler}(),a._filterHandler=new(Smart.Utilities[a.filterType.slice(0,1).toUpperCase()+a.filterType.slice(1)+"FilterHandler"])(a)}switch(e){case"animation":case"disabled":case"rightToLeft":case"unfocusable":switch(a.mode){case"default":case"basic":[i.firstList,i.firstInput,i.logicalOperatorList,i.secondList,i.secondInput].forEach(function(r){r[e]=n});break;case"excel":i.tree[e]=n;break;case"filterBuilder":i.filterBuilder[e]=n,i.caseSensitive&&(i.caseSensitive[e]=n)}break;case"buttons":a._setButtonsVisibility();break;case"data":case"dataField":"excel"!==a.mode||Array.isArray(a.dataSource)||o();break;case"dataSource":"excel"===a.mode&&o();break;case"filterType":a._filterType=n+"Filter",o();break;case"mode":o();break;case"formatString":if("date"!==a.filterType)return;switch(a.mode){case"default":case"basic":i.firstInput.formatString=n,i.secondInput.formatString=n;break;case"excel":o();break;case"filterBuilder":i.filterBuilder.formatStringDate=n,i.filterBuilder.formatStringDateTime=n}break;case"locale":case"messages":switch(a._localize(),a.mode){case"default":case"basic":{const r=i.firstList.selectedIndexes,l=i.logicalOperatorList.selectedIndexes,s=i.secondList.selectedIndexes,c=[i.firstInput,i.secondInput];switch(i.setDefaults(),i.firstList.dataSource=i.defaultListSource,i.logicalOperatorList.dataSource=[{value:0,label:a.localize("and")},{value:1,label:a.localize("or")}],i.secondList.dataSource=i.defaultListSource,a.filterType){case"date":c.forEach(function(u){u.messages[a.locale]||(u.messages[a.locale]={});const p=a.localize("dateTabLabel");p&&(u.messages[a.locale].dateTabLabel=p);const g=a.localize("timeTabLabel");if(g&&(u.messages[a.locale].timeTabLabel=g),"locale"===e&&(u.locale=a.locale),"timePicker"===u._dropDownDisplayMode){const b=a.localize("placeholderTime");b&&(u.placeholder=b,u.placeholder=b)}else{const b=a.localize("placeholderDate");b&&(u.placeholder=b,u.placeholder=b)}});break;case"numeric":c[0].placeholder=a.localize("placeholderNumber"),c[1].placeholder=a.localize("placeholderNumber");break;case"string":c[0].placeholder=a.localize("placeholderValue"),c[1].placeholder=a.localize("placeholderValue");break;case"boolean":c[0].placeholder=a.localize("placeholderBoolean"),c[1].placeholder=a.localize("placeholderBoolean")}i.firstList.selectedIndexes=r,i.logicalOperatorList.selectedIndexes=l,i.secondList.selectedIndexes=s;break}case"excel":i.tree.selectAll.label=a.localize("selectAll"),i.tree.blanks&&(i.tree.blanks.label=a.localize("blanks"));break;case"filterBuilder":i.localizeFilterBuilder(),"messages"===e&&(i.filterBuilder._localizeInitialValues(),i.filterBuilder._refresh()),i.filterBuilder.$.scrollableContainer.refresh()}}}_localize(){const e=this;e.localize("showRows")&&(e.$.label.innerHTML=e.localize("showRows")),e.localize("filter")&&(e.$.filterButton.innerHTML=e.localize("filter")),e.localize("clear")&&(e.$.clearButton.innerHTML=e.localize("clear")),e.localize("cancel")&&(e.$.cancelButton.innerHTML=e.localize("cancel"))}_setButtonsVisibility(){const e=this,t=e.buttons;["cancel","clear","filter"].forEach(function(n){-1!==t.indexOf(n)?e["$"+n+"Button"].removeClass("smart-hidden"):e["$"+n+"Button"].addClass("smart-hidden")})}}),Smart.Utilities.Assign("BaseFilterHandler",class{constructor(e){const t=this;if(t.basicFilter=t.defaultFilter,t.basicClear=t.defaultClear,t.basicCancel=t.defaultCancel,t.context=e,t.filterObject=new Smart.Utilities.FilterGroup,t.setDefaults(),"date"===e.filterType){const n=new Smart.Utilities.DateTime,a=e.formatString,i=n.getParseRegExp(n.calendar,a.replace(/y+/g,"yyyyy"));t.displayMode=Smart.Utilities.DateTime.detectDisplayMode(n,a,i),t.timeOnly="timePicker"===t.displayMode}"default"!==e.mode&&"basic"!==e.mode?(t.operationsMapping={"=":"EQUAL","<>":"NOT_EQUAL","<":"LESS_THAN",">":"GREATER_THAN","<=":"LESS_THAN_OR_EQUAL",">=":"GREATER_THAN_OR_EQUAL",isblank:"EMPTY",isnotblank:"NOT_EMPTY",contains:"CONTAINS",notcontains:"DOES_NOT_CONTAIN",startswith:"STARTS_WITH",endswith:"ENDS_WITH",NULL:"NULL",NOT_NULL:"NOT_NULL"},"excel"===e.mode?t.createExcelHTMLStructure():"filterBuilder"===e.mode&&t.createBuilderHTMLStructure()):t.createDefaultHTMLStructure()}setDefaults(){const e=this,t=e.context;e.defaultListSource=[{prefix:'<span class="smart-icon smart-icon-equal"></span>',value:"EQUAL",label:t.localize("equal")},{prefix:'<span class="smart-icon smart-icon-not-equal"></span>',value:"NOT_EQUAL",label:t.localize("notEqual")},{prefix:'<span class="smart-icon smart-icon-less-than"></span>',value:"LESS_THAN",label:t.localize("lessThan")},{prefix:'<span class="smart-icon smart-icon-less-than-equal"></span>',value:"LESS_THAN_OR_EQUAL",label:t.localize("lessThanOrEqual")},{prefix:'<span class="smart-icon smart-icon-greater-than"></span>',value:"GREATER_THAN",label:t.localize("greaterThan")},{prefix:'<span class="smart-icon smart-icon-greater-than-equal"></span>',value:"GREATER_THAN_OR_EQUAL",label:t.localize("greaterThanOrEqual")},{prefix:'<span class="smart-icon smart-icon-null"></span>',value:"NULL",label:t.localize("null")},{prefix:'<span class="smart-icon smart-icon-not-null"></span>',value:"NOT_NULL",label:t.localize("notNull")}],e.filterBuilderOperations=["<","=","<>","<=",">",">=","NULL","NOT_NULL"],e.defaultListSelection=2}createDefaultHTMLStructure(){const e=this,t=e.context,n=document.createElement("smart-input"),a=document.createElement("smart-input"),i=document.createElement("smart-input"),o=document.createDocumentFragment(),r=c=>{c.readonly=!0,c.dropDownButtonPosition="right"};n.classList.add("smart-filter-panel-list"),n.dataSource=e.defaultListSource,n.selectedIndex=e.defaultListSelection,r(n),a.classList.add("smart-filter-panel-operator-list"),a.dataSource=[{value:0,label:t.localize("and")},{value:1,label:t.localize("or")}],r(a),i.classList.add("smart-filter-panel-list"),i.dataSource=e.defaultListSource,i.selectedIndex=e.defaultListSelection,r(i),e.firstList=n,e.logicalOperatorList=a,e.secondList=i;const l=document.createElement("span");l.classList.add("smart-icon","smart-icon-font-size"),l.title=t.localize("matchCase");const s=document.createElement("span");s.classList.add("smart-icon","smart-icon-font-size"),s.title=t.localize("matchCase"),e.firstInputMatchCase=l,e.secondInputMatchCase=s,e.appendInputs(),e.firstInput.classList.add("smart-filter-panel-input"),e.secondInput.classList.add("smart-filter-panel-input"),"basic"===t.mode&&(e.secondList.classList.add("smart-hidden"),e.secondInput.classList.add("smart-hidden"),e.logicalOperatorList.classList.add("smart-hidden"),e.secondInputMatchCase.classList.add("smart-hidden")),a.dropDownHeight="auto",a.selectedIndex=0,[n,e.firstInput,e.firstInputMatchCase,a,i,e.secondInput,e.secondInputMatchCase].forEach(function(c){c.animation=t.animation,c.disabled=t.disabled,c.unfocusable=t.unfocusable,c.dropDownPosition="bottom",c.dropDownAppendTo="body",c.dropDownMaxHeight=200,c.rightToLeft=t.rightToLeft,o.appendChild(c)}),e.context.$.mainContainer.appendChild(o),e.cacheFilter(e.defaultListSelection,0,e.defaultListSelection)}cacheFilter(e,t,n){const a=this;a.cachedFilter={firstFilterComparison:e,firstFilterValue:a.firstInput.value,firstFilterCaseSensitive:a.firstInputMatchCase.classList.contains("active"),logicalOperator:t,secondFilterComparison:n,secondFilterValue:a.secondInput.value,secondFilterCaseSensitive:a.secondInputMatchCase.classList.contains("active")}}defaultFilter(){const e=this,t=e.context,n=e.getFilterInputValue(e.firstInput),a=parseFloat(e.logicalOperatorList.selectedValues[0]),i=e.getFilterInputValue(e.secondInput),o=e.filterObject;let r=e.firstList.selectedValues[0],l=e.secondList.selectedValues[0];o.clear();const s=c=>"CONTAINS"===c?"CONTAINS_CASE_SENSITIVE":"DOES_NOT_CONTAIN"===c?"DOES_NOT_CONTAIN_CASE_SENSITIVE":"STARTS_WITH"===c?"STARTS_WITH_CASE_SENSITIVE":"ENDS_WITH"===c?"ENDS_WITH_CASE_SENSITIVE":"EQUAL"===c?"EQUAL_CASE_SENSITIVE":"NOT_EQUAL"===c?"NOT_EQUAL_CASE_SENSITIVE":void 0;if(e.firstInputMatchCase.classList.contains("active")&&(r=s(r)),e.secondInputMatchCase.classList.contains("active")&&(l=s(l)),""!==n||-1!==["NULL","NOT_NULL","EMPTY","NOT_EMPTY"].indexOf(r)){const c=o.createFilter(t._filterType,n,r,void 0,t.formatString,t.locale,"timePicker"===e.firstInput._dropDownDisplayMode);o.addFilter(a,c)}if(""!==i||-1!==["NULL","NOT_NULL","EMPTY","NOT_EMPTY"].indexOf(l)){const c=o.createFilter(t._filterType,i,l,void 0,t.formatString,t.locale,"timePicker"===e.secondInput._dropDownDisplayMode);o.addFilter(a,c)}e.cacheFilter(e.firstList.selectedIndexes[0],e.logicalOperatorList.selectedIndexes[0],e.secondList.selectedIndexes[0])}getFilterInputValue(e){return e.value}excelFilter(){const e=this,t=e.context;if(Array.isArray(t.dataSource))return void e.customExcelFilter();const n=e.tree,a=e.filterObject;if(a.clear(),e.customItems=[],n._menuItems[0].selected)return void e.excelClear();const i=n.selectedIndexes;if(i.forEach(function(o){const r=n._menuItems[o];if(r instanceof Smart.TreeItem){const l=r.value;if(r.hasAttribute("default-item"))if(l instanceof Date){const s=new Smart.FilterGroup,c=new Date(l.getFullYear(),l.getMonth(),1),u=new Date(l.getFullYear(),l.getMonth()+1,0),p=s.createFilter(t._filterType,c,"GREATER_THAN_OR_EQUAL",void 0,t.formatString,t.locale,e.timeOnly),g=s.createFilter(t._filterType,u,"LESS_THAN_OR_EQUAL",void 0,t.formatString,t.locale,e.timeOnly);s.addFilter("and",p),s.addFilter("and",g),a.addFilter("or",s)}else{const s=e.getExcelComparison(l),c=a.createFilter(t._filterType,l,s,void 0,t.formatString,t.locale,e.timeOnly);a.addFilter("or",c)}else e.customItems.push(r)}}),0===i.length){const o=e.getExcelComparison("Empty Filter"),r=a.createFilter(t._filterType,"Empty Filter",o,void 0,t.formatString,t.locale,e.timeOnly);a.addFilter("or",r)}e.cachedFilter=i.slice(0)}customExcelFilter(){const e=this,t=e.tree;if(delete e.customExcelFilterObjects,t._menuItems[0].selected)return;const n=e.context,a=[],i=t.selectedIndexes;i.forEach(function(o){const r=t._menuItems[o];if(r instanceof Smart.TreeItem){let l=r.value;if(!Array.isArray(l))return;Array.isArray(l[0])||(l=[l]);const s=new Smart.Utilities.FilterGroup;for(let c=0;c<l.length;c++){const u=l[c],g=s.createFilter(n._filterType,u[2],e.operationsMapping[u[1]],void 0,n.formatString,n.locale,e.timeOnly);s.addFilter("and",g)}a.push(s)}}),e.customExcelFilterObjects=a,e.cachedFilter=i.slice(0)}getExcelComparison(e){return""===e?"NULL":"EQUAL"}filterBuilderFilter(){const e=this,n="string"===e.context.filterType&&e.caseSensitive.checked,a={filters:[]};(function i(o,r){const l=new Smart.Utilities.FilterGroup,s=o[1];r.logicalOperator=s;for(let c=0;c<o.length;c++){if(1===c)continue;const u=o[c];if(Array.isArray(u))if(Array.isArray(u[0])){const p={filters:[]};r.filters.push(p),i(u,p)}else l.addFilter(s,e.createFilterBuilderFilter(l,u,n))}l.filters.length>0&&r.filters.push(l)})(e.filterBuilder.value,a),e.filterBuilderObject=a,e.cachedFilter={filterBuilder:JSON.parse(JSON.stringify(e.filterBuilder.value),function(i,o){return/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}).(\d{3})Z$/.test(o)?new Date(o):o}),caseSensitive:n}}createFilterBuilderFilter(e,t,n){const a=this.context;let i=this.operationsMapping[t[1]];return n&&-1!==["CONTAINS","DOES_NOT_CONTAIN","STARTS_WITH","ENDS_WITH","EQUAL"].indexOf(i)&&(i+="_CASE_SENSITIVE"),e.createFilter(a._filterType,t[2],i,void 0,a.formatString,a.locale,!1)}defaultClear(){const e=this;e.firstList.selectedIndexes=[e.defaultListSelection],e.firstInput.value="",e.logicalOperatorList.selectedIndexes=[0],e.secondList.selectedIndexes=[e.defaultListSelection],e.secondInput.value="",e.filterObject.clear(),e.cacheFilter(e.defaultListSelection,0,e.defaultListSelection)}excelClear(){const e=this;0!==e.tree.offsetHeight&&e.tree.select("0"),e.filterObject.clear(),e.cachedFilter=e.tree.selectedIndexes.slice(0)}filterBuilderClear(){const e=this;e.filterBuilder.value=["and"],"string"===e.context.filterType&&(e.caseSensitive.checked=!1),e.cachedFilter={filterBuilder:["and"],caseSensitive:!1}}defaultCancel(){const e=this;e.firstList.selectedIndexes=[e.cachedFilter.firstFilterComparison],e.firstInput.value=e.cachedFilter.firstFilterValue,e.cachedFilter.firstFilterCaseSensitive&&e.firstInputMatchCase.classList.add("active"),e.logicalOperatorList.selectedIndexes=[e.cachedFilter.logicalOperator],e.secondList.selectedIndexes=[e.cachedFilter.secondFilterComparison],e.secondInput.value=e.cachedFilter.secondFilterValue,e.cachedFilter.firstFilterCaseSensitive&&e.firstInputMatchCase.classList.add("active"),e.cachedFilter.secondFilterCaseSensitive&&e.secondInputMatchCase.classList.add("active")}excelCancel(){this.tree.selectedIndexes=this.cachedFilter.slice(0)}filterBuilderCancel(){const e=this;e.filterBuilder.value=e.cachedFilter.filterBuilder,"string"===e.context.filterType&&(e.caseSensitive.checked=e.cachedFilter.caseSensitive)}createExcelHTMLStructure(){const e=this,t=e.context,n=document.createElement("smart-tree"),a={data:t.data,dataField:t.dataField,filterType:t._filterType};if(t.dataSource&&Array.isArray(t.dataSource))e.processCustomDataSource(n);else{if(t.data&&t.dataField||t.error(t.localize("missingProperty")),"date"===t.filterType){a.formatString=t.formatString,a.displayMode=e.displayMode,e.dataSource=e.filterObject.getUniqueValues(a,t);try{e.getHierarchicalDataSource(e.displayMode)}catch(i){t.error(t.localize("mismatchedProperties"))}n.classList.add(e.timeOnly?"standard-excel":"date-excel")}else e.dataSource=e.filterObject.getUniqueValues(a,t),n.classList.add("standard-excel");"function"==typeof t.dataSource&&(e.dataSource=t.dataSource(e.dataSource)||e.dataSource)}n.animation=t.animation,n.disabled=t.disabled,n.unfocusable=t.unfocusable,n.dataSource=[{label:t.localize("selectAll"),value:"",items:e.dataSource,expanded:!0,selected:!0}],n.selectionMode="checkBox",n.hasThreeStates=!0,n.theme=t.theme,n.animation="none",n.toggleMode="arrow",n.rightToLeft=t.rightToLeft,n.addEventListener("collapsing",function(i){1===i.detail.item.level&&i.preventDefault()}),n._onCompleted=function(){if(e.cachedFilter=n.selectedIndexes.slice(0),n.classList.contains("date-excel"))for(let i in n._menuItems){if("0"===i)continue;const o=n._menuItems[i];o.firstElementChild.style.paddingLeft=20*(o.level-1)-10+"px"}else n._menuItems[0].firstElementChild.style.paddingLeft=0;n.selectAll=n._menuItems[0],n.blanks=n.querySelector('[label="'+t.localize("blanks")+'"]')},e.tree=n,t.$.mainContainer.appendChild(n)}processCustomDataSource(e){const t=this.context.dataSource;e.classList.add("standard-excel"),this.dataSource=t}createBuilderHTMLStructure(){const e=this,t=e.context,n=document.createElement("smart-filter-builder"),a=t.dataField,i="numeric"===t.filterType?"number":t.filterType;if(e.filterBuilder=n,n.animation=t.animation,n.disabled=t.disabled,n.unfocusable=t.unfocusable,n.value=["and"],n.fields=[{label:a,dataField:a,dataType:i,filterOperations:e.filterBuilderOperations}],e.localizeFilterBuilder(),t.$.mainContainer.appendChild(n),"string"===i){const o=document.createElement("smart-check-box");o.classList.add("case-sensitive"),o.innerHTML="Case sensitive",o.animation=t.animation,o.disabled=t.disabled,o.unfocusable=t.unfocusable,o.checked=!1,e.caseSensitive=o,t.$.mainContainer.appendChild(o)}e.filterBuilderObject={filters:[]},e.cachedFilter={filterBuilder:["and"],caseSensitive:!1}}localizeFilterBuilder(){const e=this.context,t=this.filterBuilder;let n=t.messages[e.locale];n||(n={},t.messages[e.locale]=n),t.customOperations=[{name:"NULL",label:e.localize("null"),hideValue:!0},{name:"NOT_NULL",label:e.localize("notNull"),hideValue:!0}],n.addCondition=e.localize("addCondition"),n.addGroup=e.localize("addGroup"),n["<"]=e.localize("lessThan"),n["<="]=e.localize("lessThanOrEqual"),n["<>"]=e.localize("notEqual"),n["="]=e.localize("equal"),n[">"]=e.localize("greaterThan"),n[">="]=e.localize("greaterThanOrEqual"),n.and=e.localize("and"),n.contains=e.localize("contains"),n.endswith=e.localize("endsWith"),n.isblank=e.localize("empty"),n.isnotblank=e.localize("notEmpty"),n.notcontains=e.localize("doesNotContain"),n.or=e.localize("or"),n.startswith=e.localize("startsWith"),n.dateTabLabel=e.localize("dateTabLabel"),n.timeTabLabel=e.localize("timeTabLabel"),t.formatStringDate=e.formatString,t.formatStringDateTime=e.formatString,t.locale=e.locale,t.valuePlaceholder=e.localize("filterBuilderPlaceholder")}evaluate(e){const t=this,n=t.context;if("default"===n.mode||"basic"===n.mode)return t.filterObject.evaluate(e);if("excel"===n.mode){let a=!1;if(Array.isArray(n.dataSource)){if(!t.customExcelFilterObjects||0===t.customExcelFilterObjects.length)return!0;for(let i=0;i<t.customExcelFilterObjects.length;i++)a=a||t.customExcelFilterObjects[i].evaluate(e);return a}if(t.customItems&&t.customItems.length>0){if(t.filterObject.filters.length>0&&(a=t.filterObject.evaluate(e)),t.customItems&&n.evaluateFilterExpression)for(let i=0;i<t.customItems.length;i++){const o=n.evaluateFilterExpression(e,t.customItems[i].value);void 0!==o&&(a=a||o)}}else a=t.filterObject.evaluate(e);return a}return!t.filterBuilderObject.logicalOperator||function a(i){let o="and"===i.logicalOperator;for(let r=0;r<i.filters.length;r++){let l;l=i.filters[r]instanceof Smart.Utilities.FilterGroup?i.filters[r].evaluate(e):a(i.filters[r]),o="and"===i.logicalOperator?o&&l:o||l}return o}(t.filterBuilderObject)}}),Smart.Utilities.Assign("NumericFilterHandler",class extends Smart.Utilities.BaseFilterHandler{appendInputs(){let e=this,t=document.createElement("smart-number-input"),n=document.createElement("smart-number-input");t.placeholder=e.context.localize("placeholderNumber"),n.placeholder=e.context.localize("placeholderNumber"),t.nullable=!0,t.spinButtons=!0,t.value=null,n.nullable=!0,n.spinButtons=!0,n.value=null,e.firstInput=t,e.secondInput=n}getFilterInputValue(e){return null===e.value||""===e.value?"":parseFloat(e.value)}}),Smart.Utilities.Assign("StringFilterHandler",class extends Smart.Utilities.BaseFilterHandler{setDefaults(){const e=this,t=e.context;e.defaultListSource=[{prefix:'<span class="smart-icon smart-icon-empty"></span>',value:"EMPTY",label:t.localize("empty")},{prefix:'<span class="smart-icon smart-icon-not-empty"></span>',value:"NOT_EMPTY",label:t.localize("notEmpty")},{prefix:'<span class="smart-icon smart-icon-contains"></span>',value:"CONTAINS",label:t.localize("contains")},{prefix:'<span class="smart-icon smart-icon-does-not-contain"></span>',value:"DOES_NOT_CONTAIN",label:t.localize("doesNotContain")},{prefix:'<span class="smart-icon smart-icon-starts-with"></span>',value:"STARTS_WITH",label:t.localize("startsWith")},{prefix:'<span class="smart-icon smart-icon-ends-with"></span>',value:"ENDS_WITH",label:t.localize("endsWith")},{prefix:'<span class="smart-icon smart-icon-equal"></span>',value:"EQUAL",label:t.localize("equal")},{prefix:'<span class="smart-icon smart-icon-not-equal"></span>',value:"NOT_EQUAL",label:t.localize("notEqual")},{prefix:'<span class="smart-icon smart-icon-null"></span>',value:"NULL",label:t.localize("null")},{prefix:'<span class="smart-icon smart-icon-not-null"></span>',value:"NOT_NULL",label:t.localize("notNull")}],e.filterBuilderOperations=["contains","isblank","isnotblank","notcontains","startswith","endswith","=","NULL","NOT_NULL"],e.defaultListSelection=2}appendInputs(){const e=this,t=document.createElement("input"),n=document.createElement("input");t.placeholder=e.context.localize("placeholderValue"),t.setAttribute("aria-label",t.placeholder),n.placeholder=e.context.localize("placeholderValue"),n.setAttribute("aria-label",n.placeholder),t.classList.add("smart-input"),n.classList.add("smart-input"),e.firstInput=t,e.secondInput=n,e.firstInputMatchCase.onclick=()=>{e.firstInputMatchCase.classList.toggle("active")},e.secondInputMatchCase.onclick=()=>{e.secondInputMatchCase.classList.toggle("active")};const a=(i,o,r)=>{if(0===i.selectedValues.length)return o.classList.remove("case-sensitive"),void r.classList.remove("case-sensitive");const l=i.selectedValues[0];o.classList.remove("case-sensitive"),r.classList.remove("case-sensitive"),["EQUAL","NOT_EQUAL","CONTAINS","DOES_NOT_CONTAIN","STARTS_WITH","ENDS_WITH"].indexOf(l)>=0&&(o.classList.add("case-sensitive"),r.classList.add("case-sensitive"))};e.firstList.onchange=()=>{a(e.firstList,e.firstInput,e.firstInputMatchCase)},e.secondList.onchange=()=>{a(e.secondList,e.secondInput,e.secondInputMatchCase)},setTimeout(()=>{a(e.firstList,e.firstInput,e.firstInputMatchCase),a(e.secondList,e.secondInput,e.secondInputMatchCase)},50)}getExcelComparison(e){return""===e?"EMPTY":"EQUAL_CASE_SENSITIVE"}}),Smart.Utilities.Assign("DateFilterHandler",class extends Smart.Utilities.BaseFilterHandler{appendInputs(){let e=this,t=e.context,n=document.createElement("smart-date-input"),a=document.createElement("smart-date-input");t.formatString&&!(t.formatString.indexOf("d")>=0||t.formatString.indexOf("M")>=0||t.formatString.indexOf("y")>=0)&&(n=document.createElement("smart-time-input"),a=document.createElement("smart-time-input")),n.calendarButton=!0,n.editMode="partial",n.formatString=t.formatString,n.dropDownDisplayMode="auto",n.locale=t.locale,n.autoClose=!0,n.messages[t.locale]||(n.messages[t.locale]={}),n.messages[t.locale].dateTabLabel=t.localize("dateTabLabel"),n.messages[t.locale].timeTabLabel=t.localize("timeTabLabel"),n.nullable=!0,n.value=null,a.autoClose=!0,a.calendarButton=!0,a.formatString=t.formatString,a.dropDownDisplayMode="auto",a.locale=t.locale,a.messages[t.locale]||(a.messages[t.locale]={}),a.messages[t.locale].dateTabLabel=t.localize("dateTabLabel"),a.messages[t.locale].timeTabLabel=t.localize("timeTabLabel"),a.nullable=!0,a.value=null,e.firstInput=n,e.secondInput=a}getFilterInputValue(e){if(null===e.value)return"";const t=e.getDate();return"calendar"===this.displayMode&&t.setHours(0,0,0),t}defaultClear(){const e=this;e.firstList.selectedIndexes=[e.defaultListSelection],e.firstInput.value=null,e.logicalOperatorList.selectedIndexes=[0],e.secondList.selectedIndexes=[e.defaultListSelection],e.secondInput.value=null,e.filterObject.clear(),e.cacheFilter(e.defaultListSelection,0,e.defaultListSelection)}getHierarchicalDataSource(e){const t=this,n=t.dataSource,a={},i=[];let o;if("timePicker"!==e){""===n[n.length-1].value&&(o=n[n.length-1],n.pop()),n.forEach(function(r){const l=r.value,s=l.getFullYear(),c=new Intl.DateTimeFormat(t.context.locale,{month:"long"}).format(l);a[s]||(a[s]={}),a[s][c]||(a[s][c]=r.value)});for(let r in a){const l={expanded:!0,label:r,items:[],customAttribute:"default-item"};i.push(l);for(let s in a[r])l.items.push({value:a[r][s],expanded:!0,label:s,items:[],customAttribute:"default-item"})}o&&i.push(o),t.dataSource=i}}}),Smart.Utilities.Assign("BooleanFilterHandler",class extends Smart.Utilities.BaseFilterHandler{cacheFilter(e,t,n){const a=this;a.cachedFilter={firstFilterComparison:e,firstFilterValue:a.firstInput.selectedIndexes.slice(0),logicalOperator:t,secondFilterComparison:n,secondFilterValue:a.secondInput.selectedIndexes.slice(0)}}setDefaults(){const e=this,t=e.context;e.defaultListSource=[{prefix:'<span class="smart-icon smart-icon-equal"></span>',value:"EQUAL",label:t.localize("equal")},{prefix:'<span class="smart-icon smart-icon-not-equal"></span>',value:"NOT_EQUAL",label:t.localize("notEqual")},{prefix:'<span class="smart-icon smart-icon-null"></span>',value:"NULL",label:t.localize("null")},{prefix:'<span class="smart-icon smart-icon-not-null"></span>',value:"NOT_NULL",label:t.localize("notNull")}],e.filterBuilderOperations=["=","<>","NULL","NOT_NULL"],e.defaultListSelection=0}appendInputs(){const e=this,t=document.createElement("smart-input"),n=document.createElement("smart-input");t.dataSource=[{value:!0,label:"true"},{value:!1,label:"false"}],t.placeholder=e.context.localize("placeholderBoolean"),t.selectedIndexes=[],t.selectionMode="zeroOrOne",t.readonly=!0,t.dropDownButtonPosition="right",n.dataSource=[{value:!0,label:"true"},{value:!1,label:"false"}],n.placeholder=e.context.localize("placeholderBoolean"),n.selectedIndexes=[],n.selectionMode="zeroOrOne",n.readonly=!0,n.dropDownButtonPosition="right",e.firstInput=t,e.secondInput=n}getFilterInputValue(e){return 0===e.selectedValues.length?"":!0===e.selectedValues[0]}defaultClear(){const e=this;e.firstList.selectedIndexes=[e.defaultListSelection],e.firstInput.selectedIndexes=[],e.logicalOperatorList.selectedIndexes=[0],e.secondList.selectedIndexes=[e.defaultListSelection],e.secondInput.selectedIndexes=[],e.filterObject.clear(),e.cacheFilter(e.defaultListSelection,0,e.defaultListSelection)}defaultCancel(){const e=this;e.firstList.selectedIndexes=[e.cachedFilter.firstFilterComparison],e.firstInput.selectedIndexes=e.cachedFilter.firstFilterValue,e.logicalOperatorList.selectedIndexes=[e.cachedFilter.logicalOperator],e.secondList.selectedIndexes=[e.cachedFilter.secondFilterComparison],e.secondInput.selectedIndexes=e.cachedFilter.secondFilterValue}})},2515:()=>{Smart.Utilities.Assign("ConditionalFormatter",class{constructor(e){const t=this;t.data=e||[],t._allowedDateComparators=["yesterday","today","tomorrow","last7Days","lastWeek","thisWeek","nextWeek","lastMonth","thisMonth","nextMonth","lastYear","thisYear","nextYear"],t._colorSchemes=[{name:"scheme01",colors:["#307DD7","#AA4643","#89A54E","#71588F","#4198AF"]},{name:"scheme02",colors:["#7FD13B","#EA157A","#FEB80A","#00ADDC","#738AC8"]},{name:"scheme03",colors:["#E8601A","#FF9639","#F5BD6A","#599994","#115D6E"]},{name:"scheme04",colors:["#D02841","#FF7C41","#FFC051","#5B5F4D","#364651"]},{name:"scheme05",colors:["#25A0DA","#309B46","#8EBC00","#FF7515","#FFAE00"]},{name:"scheme06",colors:["#0A3A4A","#196674","#33A6B2","#9AC836","#D0E64B"]},{name:"scheme07",colors:["#CC6B32","#FFAB48","#FFE7AD","#A7C9AE","#888A63"]},{name:"scheme08",colors:["#3F3943","#01A2A6","#29D9C2","#BDF271","#FFFFA6"]},{name:"scheme09",colors:["#1B2B32","#37646F","#A3ABAF","#E1E7E8","#B22E2F"]},{name:"scheme10",colors:["#5A4B53","#9C3C58","#DE2B5B","#D86A41","#D2A825"]},{name:"scheme11",colors:["#993144","#FFA257","#CCA56A","#ADA072","#949681"]},{name:"scheme12",colors:["#105B63","#EEEAC5","#FFD34E","#DB9E36","#BD4932"]},{name:"scheme13",colors:["#BBEBBC","#F0EE94","#F5C465","#FA7642","#FF1E54"]},{name:"scheme14",colors:["#60573E","#F2EEAC","#BFA575","#A63841","#BFB8A3"]},{name:"scheme15",colors:["#444546","#FFBB6E","#F28D00","#D94F00","#7F203B"]},{name:"scheme16",colors:["#583C39","#674E49","#948658","#F0E99A","#564E49"]},{name:"scheme17",colors:["#142D58","#447F6E","#E1B65B","#C8782A","#9E3E17"]},{name:"scheme18",colors:["#4D2B1F","#635D61","#7992A2","#97BFD5","#BFDCF5"]},{name:"scheme19",colors:["#844341","#D5CC92","#BBA146","#897B26","#55591C"]},{name:"scheme20",colors:["#56626B","#6C9380","#C0CA55","#F07C6C","#AD5472"]},{name:"scheme21",colors:["#96003A","#FF7347","#FFBC7B","#FF4154","#642223"]},{name:"scheme22",colors:["#5D7359","#E0D697","#D6AA5C","#8C5430","#661C0E"]},{name:"scheme23",colors:["#16193B","#35478C","#4E7AC7","#7FB2F0","#ADD5F7"]},{name:"scheme24",colors:["#7B1A25","#BF5322","#9DA860","#CEA457","#B67818"]},{name:"scheme25",colors:["#0081DA","#3AAFFF","#99C900","#FFEB3D","#309B46"]},{name:"scheme26",colors:["#0069A5","#0098EE","#7BD2F6","#FFB800","#FF6800"]},{name:"scheme27",colors:["#FF6800","#A0A700","#FF8D00","#678900","#0069A5"]},{name:"scheme28",colors:["#63BE7B","#FDD17F","#F8696B"]},{name:"scheme29",colors:["#F8696B","#FDD17F","#63BE7B"]},{name:"scheme30",colors:["#63BE7B","#FCFCFF","#F8696B"]},{name:"scheme31",colors:["#F8696B","#FCFCFF","#63BE7B"]},{name:"scheme32",colors:["#5A8AC6","#FCFCFF","#F8696B"]},{name:"scheme33",colors:["#F8696B","#FCFCFF","#5A8AC6"]},{name:"scheme34",colors:["#FCFCFF","#F8696B"]},{name:"scheme35",colors:["#F8696B","#FCFCFF"]},{name:"scheme36",colors:["#63BE7B","#FCFCFF"]},{name:"scheme37",colors:["#FCFCFF","#63BE7B"]},{name:"scheme38",colors:["#63BE7B","#FFEF9C"]},{name:"scheme39",colors:["#FFEF9C","#63BE7B"]},{name:"scheme40",colors:["#000000","#8b0000 ","#FFFF00","#FFFFFF"]},{name:"scheme41",colors:["#63BE7B","#FDD17F ","#F8696B","#FF69B4"]},{name:"scheme42",colors:["#63BE7B","#FDD17F ","#FDD17F","#F8696B"]},{name:"scheme00",colors:["#63BE7B","#FDD17F","#FDD17F","#FDD17F","#F8696B"]}]}format(e,t,n){const a=this,i=a.data;if(0===i.length||(e?a.condition=e:e=a.condition,!e))return;null!=a.comparator||(a.comparator=n),t?a.columns=t:t=a.columns,a.color&&(a.color=/^#[0-9A-F]{6}$/i.test(a.color)?a.color:void 0),(!t||!Array.isArray(t)||Array.isArray(t)&&0===t.length)&&(t=a.columns=[]);let o={};for(let r=0;r<t.length;r++){const l=t[r];void 0!==i[0][l]&&(o[l]=a._validateColumnData(l))}return 0!==Object.keys(o).length?o:void 0}_applyColorScale(e){const t=this,n=e.length;function a(b){let v=0;for(;v<c;){if(b<=s[v].max)return v;v++}return Math.max(0,Math.min(c-1,v))}if(0===n)return;const i=void 0!==t.colorScheme?t._getSchemeColors():[t.color];if(0===i.length||null==i[0])return;let o,r,l={},s={};const c=i.length-("iconSet"===t.condition?0:1),u=t._getColumnRange(e),p=parseFloat(t.min)||u.min,g=Math.max(p,parseFloat(t.max)||u.max);for(let b=0;b<c;b++)s[b]={min:s[b-1]?s[b-1].max:p,max:p+(b+1)/c*(g-p)};0===c&&(s[0]={min:p,max:g});for(let b=0;b<n;b++){let v=e[b]instanceof Date?e[b].getTime():e[b];v=Math.min(g,Math.max(p,v)),"number"==typeof v&&(o=a(v)||0,"iconSet"===t.condition?l[b]={"--icon-set":" ","--icon-set-color":i[o],"--icon-set-rotation-angle":t._getRotationAngle(o/(c-1)||0)+"deg"}:(r=1-((v-s[o].min)/(s[o].max-s[o].min)||0),l[b]=t._getCellStyle(t._mixColors(i[o],i[Math.min(o+1,c)],r))))}return l}_applyColorBar(e){const t=this,n=e.length,a=t._getColumnRange(e),i=t.min?parseFloat(t.min)||0:a.min,o=t.max?parseFloat(t.max)||0:a.max,r=void 0!==t.colorScheme?t._getSchemeColors():[t.color];let l,s="",c={};for(let u=0;u<r.length;u++)null!=r[u]&&(s+=r[u]+",");if(s){s=s.slice(0,-1),l=1===r.length?r[0]:"-webkit-linear-gradient(left,"+s+")";for(let u=0;u<n;u++){let p=e[u]instanceof Date?e[u].getTime():e[u];p=Math.min(o,Math.max(i,e[u])),"number"==typeof p&&(c[u]={"--color-bar":" ","--bar-width":((p-i)/(o-i)*100||0)+"%","--bar-color":l})}return c}console.log("Invalid color/colorScheme detected.")}_applyRule(e){const t=this,n=e.length,a="string"==typeof t.condition?t.condition.trim():"";let i,o,r,l=parseFloat(t.min)||0,s=Math.max(l,parseFloat(t.max)||0);function c(g){switch(a){case"between":if(g instanceof Date&&(g=g.getTime()),g>=l&&g<=s)return g;break;case"contains":if((g+"").indexOf(i)>-1)return g;break;case"duplicate":{let b=0;for(let v=0;v<n;v++)if(e[v]===g&&b++,b>1)return g;break}case"dateOccur":{const b=t._getDateRange(g,i);if(!b||(g=new Date(g),isNaN(g.getTime())))break;const v=g.getTime(),y=b.min.getTime(),x=b.max.getTime();if(v>=y&&v<=x)return g;break}case"doesNotContain":if((g+"").indexOf(i)<0)return g;break;case"equal":if("number"==typeof g&&g===parseFloat(i)||"string"==typeof g&&0===g.localeCompare(i+"")||"boolean"==typeof g&&g+""==i+""||g instanceof Date&&g.getTime()===new Date(i).getTime())return g;break;case"greaterThan":if(g>parseFloat(i))return g;break;case"lessThan":if(g<parseFloat(i))return g;break;case"notEqual":if("number"==typeof g&&g!==parseFloat(i)||"string"==typeof g&&0!==g.localeCompare(i+"")||"boolean"==typeof g&&g+""!=i+""||g instanceof Date&&g.getTime()!==new Date(i).getTime())return g;break;case"topNItems":case"bottomNItems":case"topNPercent":case"bottomNPercent":if(o||(o=e.slice(0).sort(0===a.indexOf("top")?(b,v)=>b<v?1:b>v?-1:0:(b,v)=>b>v?1:b<v?-1:0).slice(0,parseInt(a.indexOf("Percent")>0?n*i/100:i))),o.indexOf(g)>-1)return g;break;case"aboveAverage":case"belowAverage":if(!r){let b=0;e.map(v=>b+=parseFloat(v)),r=b/n}if("aboveAverage"===a&&g>r||"belowAverage"===a&&g<r)return g}return null}if(i="dateOccur"===a?"string"==typeof t.comparator&&t._allowedDateComparators.indexOf(t.comparator.trim())>-1?t.comparator.trim():void 0:Array.isArray(t.comparator)?t.comparator[0].trim():t.comparator,!e||0===e.length)return;if(["odd","even","duplicate","dateOccur","between","aboveAverage","belowAverage"].indexOf(a)<0&&0!==a.indexOf("everyN")&&null==i)return console.warn(t.condition+" requires a comparator."),[];if("odd"===a||"even"===a||0===a.indexOf("everyN"))return t._getAlternateItems(e);let u,p=[];for(let g=0;g<n;g++)u=c(e[g]),null!=u&&p.push(g);return p}_getAlternateItems(e){const t=this,n=e.length,a="string"==typeof t.condition?t.condition.trim():"",i=parseInt(t.min)||0,o=Math.max(i,parseInt(t.max)||n)-1,r=parseInt(t.comparator);let l=[],s=0;for(let c=0;c<=n;c++)if(!(c<i)){if(c>o)break;"even"===a&&(c+1)%2==0||"odd"===a&&(c+1)%2!=0?l.push(c):void 0===r||isNaN(r)||(s===r?(l.push(c),s=0):s++)}return l}_getColumnRange(e){const t=e.length;let n,a,i=0;for(let o=0;o<t;o++)a=e[o],a instanceof Date&&(a=a.getTime()),a>i&&(i=a),void 0===n&&(n=a),a<n&&(n=a);return{min:parseFloat(n)||0,max:parseFloat(i)||0}}_getCellStyle(e,t){var n=e;return{background:this._hexToRgba(e,t).toString(),color:this._getTextElementByColor(this._hexToRgba(e,.7)),border:n}}_getDateRange(e,t){let n,a;if(!(new Date(e)instanceof Date&&t))return;const i=new Date;switch(t){case"yesterday":case"today":case"tomorrow":"yesterday"===t?a=new Date(i.getFullYear(),i.getMonth(),i.getDate()-1):"today"===t?(a=new Date,a.setHours(0,0,0,0)):a=new Date(i.getFullYear(),i.getMonth(),i.getDate()+1),n=a;break;case"last7Days":a=new Date(i.getFullYear(),i.getMonth(),i.getDate()-6),n=new Date(i);break;case"lastWeek":case"thisWeek":case"nextWeek":a="lastWeek"===t?new Date(i.getFullYear(),i.getMonth(),i.getDate()-6-i.getDay()):"thisWeek"===t?new Date(i.getFullYear(),i.getMonth(),i.getDate()-Math.abs(1-i.getDay())):new Date(i.getFullYear(),i.getMonth(),i.getDate()+Math.abs(7-i.getDay())),n=new Date(a.getFullYear(),a.getMonth(),a.getDate()+6);break;case"lastMonth":case"thisMonth":case"nextMonth":"lastMonth"===t?(n=new Date(i.getFullYear(),i.getMonth(),0),a=new Date(n.getFullYear(),n.getMonth(),1)):"thisMonth"===t?(a=new Date(i.getFullYear(),i.getMonth(),1),n=new Date(i.getFullYear(),i.getMonth()+1,0)):(a=new Date(i.getFullYear(),i.getMonth()+1,1),n=new Date(i.getFullYear(),i.getMonth()+2,0));break;case"lastYear":case"thisYear":case"nextYear":"lastYear"===t?(a=new Date(i.getFullYear()-1,0,1),n=new Date(i.getFullYear()-1,12,0)):"thisYear"===t?(a=new Date(i.getFullYear(),0,1),n=new Date(i.getFullYear(),12,0)):(a=new Date(i.getFullYear()+1,0,1),n=new Date(i.getFullYear()+1,12,0))}return{min:a,max:n}}_getRotationAngle(e){let t=e;return e<.25?t=Math.round(e)?.25:0:e>.25&&e<.5?t=Math.round(e)?.5:.25:e>.5&&e<.75?t=Math.round(e)?.75:.5:e>.75&&e<1&&(t=Math.round(e)?1:.75),180*t}_getSchemeColors(){const e=this;let t;if("string"==typeof e.colorScheme)t=0===e.colorScheme.indexOf("scheme")?e._colorSchemes.filter(n=>n.name===e.colorScheme)[0]:void 0;else{if("number"!=typeof e.colorScheme)return[];t=e._colorSchemes[e.colorScheme]?e._colorSchemes[e.colorScheme]:void 0}return"object"==typeof t?t.colors:e._colorSchemes[0].colors}_getTextElementByColor(e){return.299*e.r+.587*e.g+.114*e.b>=125?"Black":"White"}_hexToRgba(e,t){const n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);var a=function(){return this.alpha>1||null==this.alpha?this.alpha=1:this.alpha<0&&(this.alpha=0),"rgba("+this.r+", "+this.g+", "+this.b+", "+this.alpha+")"};return void 0===t?n?{r:parseInt(n[1],16),g:parseInt(n[2],16),b:parseInt(n[3],16),toString:a}:null:(t>1?t=1:t<0&&(t=0),n?{r:parseInt(n[1],16),g:parseInt(n[2],16),b:parseInt(n[3],16),alpha:t,toString:a}:null)}_mixColors(e,t,n){const a=r=>parseInt(r,16);let i,o="#";n=void 0!==n?n:.5,e=e.replace(/#/g,""),t=t.replace(/#/g,"");for(let r=0;r<=5;r+=2){const l=a(e.substr(r,2)),s=a(t.substr(r,2));for(i=Math.floor(s+(l-s)*n).toString(16);i.length<2;)i="0"+i;o+=i}return o}_shadeColor(e,t){var n=parseInt(e.slice(1),16),a=t<0?0:255,i=t<0?-1*t:t,o=n>>16,r=n>>8&255,l=255&n;return"#"+(16777216+65536*(Math.round((a-o)*i)+o)+256*(Math.round((a-r)*i)+r)+(Math.round((a-l)*i)+l)).toString(16).slice(1)}_validateColumnData(e){const t=this,n=[],a=t.data;let i,o={};for(let r=0;r<a.length;r++)a[r]&&n.push(a[r][e]);if("colorScale"===t.condition||"iconSet"===t.condition)return t._applyColorScale(n);if("colorBar"===t.condition)return t._applyColorBar(n);if(i=t._applyRule(n),i){if(t.color){for(let r=0;r<i.length;r++)o[i[r]]=t._getCellStyle(t.color);return o}console.warn('No color is provided. "color" property is not set.')}}})},9719:()=>{Smart.Utilities.Assign("Grid.Cell",class{constructor(e,t){const n=this;if(n.row=e,n.column=t,n.grid=e.grid,n.rowSpan=1,n.colSpan=1,n.value=void 0,n.fontSize=null,n.fontWeight=null,n.fontFamily=null,n.fontStyle=null,n.color=null,n.background=null,n.borderColor=null,n.textDecoration=null,n.tooltip=null,n.align=null,n.verticalAlign=null,n.readonly=!1,n.oldValue=void 0,n._updating=!1,n.styleChanged=!0,n.editor=null,n.template=null,n.isEditing=!1,n.canNotify=!0,n.selected=!1,n.focused=!1,n.error=!1,e._userData){const a=e._userData;n.color=a.color,n.background=a.background,n.fontFamily=a.fontFamily,n.fontSize=a.fontSize,n.fontStyle=a.fontStyle,n.textDecoration=a.textDecoration,n.fontWeight=a.fontWeight}return new Proxy(n,{deleteProperty:function(a,i){return delete a[i],!0},get:function(a,i){if("value"===i)return n.column.displayField?n.row.data[n.column.displayField]:n.row.data[n.column.dataField];if("editor"===i||"template"===i)return a[i]||n.column[i];if("focused"===i){if(n.grid.selection.allowCellSelection&&n.grid._selection.focusedCell&&n.grid._selection.focusedCell.id===n.row.id&&n.grid._selection.focusedCell.dataField===n.column.dataField||n.grid.selection.allowRowSelection&&n.grid._selection.focusedCell&&n.grid._selection.focusedCell.id===n.row.id&&n.grid._selection.focusedCell.dataField===n.column.dataField)return!0;const o=n.parent();return!!(o&&n.grid.selection.allowCellSelection&&n.grid._selection.focusedCell&&n.grid._selection.focusedCell.id===o.row.id&&n.grid._selection.focusedCell.dataField===o.column.dataField)}if("selected"===i)return!0===n.row.getProperty("selected")||!0===n.column.getProperty("selected")||!!n.grid._selection.cells["row"+n.row.id]&&n.grid._selection.cells["row"+n.row.id][n.column.dataField];if("modifiedValue"===i){const o=n.grid._cellsUpdatedValues[n.row.id+"_"+n.column.dataField];return void 0!==o?o:a.value}return a[i]},set:function(a,i,o){const r=this.get(a,i);return r===o||(a[i]=o,!("element"!==i&&"isEditing"!==i&&"oldValue"!==i&&"_updating"!==i&&"notifyFn"!==i&&!i.startsWith("_")&&"canNotify"!==i&&"error"!==i&&("focused"===i&&(n.grid._selection.focusedCell={id:n.row.id,dataField:n.column.dataField,value:n.value,index:n.row.index}),"colSpan"!==i&&"rowSpan"!==i||o>=0&&-1===n.grid._cellsMerge.indexOf(n)&&n.grid._cellsMerge.push(n),"row"!==i&&"column"!==i&&"grid"!==i&&"styleChanged"!==i&&("background"!==i&&"fontSize"!==i&&"fontWeight"!==i&&"fontFamily"!==i&&"textDecoration"!==i&&"color"!==i&&"borderColor"!==i&&"fontStyle"!==i||(n._styleChanged=!0),"value"===i&&(void 0===n.oldValue&&(n.oldValue=r),(()=>{n.grid.dataSource.boundSource.canNotify=!1,null===o&&(n.column.allowNull||(o="number"===n.column.dataType||"int"===n.column.dataType||"float"===n.column.dataType||"integer"===n.column.dataType?0:"date"===n.column.dataType?new Date:"boolean"!==n.column.dataType&&"")),null!==o&&o.label&&o.value?(n.row.data[n.column.displayField]=o.label,n.row.data[n.column.dataField]=o.value):(n.column.valueField&&(n.row.data[n.column.valueField]=o),n.row.data[n.column.dataField]=o);const l=n.grid.dataSource.dataItemById[n.row.id];if(l){const s=l.$.index;n.grid.dataSource&&o!==n.grid.dataSource.boundSource[s][n.column.dataField]&&(n.grid.dataSource.boundSource[s][n.column.dataField]=o)}n.grid.dataSource.boundSource.canNotify=!0})()),"selected"===i&&(n.grid._selection.cells["row"+n.row.id]&&(delete n.grid._selection.cells["row"+n.row.id][n.column.dataField],1===Object.getOwnPropertyNames(n.grid._selection.cells["row"+n.row.id]).length&&delete n.grid._selection.cells["row"+n.row.id]),n.grid._selection.cells["column"+n.column.dataField]&&(delete n.grid._selection.cells["column"+n.column.dataField][n.row.id],1===Object.getOwnPropertyNames(n.grid._selection.cells["column"+n.column.dataField]).length&&delete n.grid._selection.cells["column"+n.column.dataField]),o&&(n.grid._selection.cells["row"+n.row.id]||(n.grid._selection.cells["row"+n.row.id]=[]),n.grid._selection.cells["column"+n.column.dataField]||(n.grid._selection.cells["column"+n.column.dataField]=[]),n.grid._selection.cells["row"+n.row.id][n.column.dataField]=!0,n.grid._selection.cells["column"+n.column.dataField][n.row.id]=!0)),!n._updating&&n.canNotify&&(n.grid._recycle(),n.row.canNotify&&(n.propertyChanged&&n.propertyChanged(name.substring(1),r),0))))))}})}setStyle(e){this.setProperties(e)}_setStyle(e){const t=this;t._styleChanged&&(e.style.background=t.background,e.style.borderColor=t.borderColor,e.style.color=t.color,e.style.fontSize=t.fontSize,e.style.fontFamily=t.fontFamily,e.style.fontWeight=t.fontWeight,e.style.fontStyle=t.fontStyle,e.style.textDecoration=t.textDecoration,e.style.paddingBottom="",t._styleChanged=!1),t.selected&&(t.background||t.color)&&(e.style.background="",e.style.color="")}getFormattedValue(e,t){const n=this;return null==e||""===e?e:t?"date"===n.column.dataType||"datetime"===n.column.dataType||"time"===n.column.dataType?"dateRangeInput"===n.column.editor.template?Array.isArray(e)?n.formatDate(e[0],t)+" - "+n.formatDate(e[1],t):n.formatDate(e,t)+" - "+n.formatDate(e,t):n.formatDate(e,t):"int"===n.column.dataType||"int64"===n.column.dataType||"float"===n.column.dataType||"number"===n.column.dataType?n.formatNumber(e,t):e:""+e}formatDate(e,t){if(!Smart.Utilities.DateTime)return e;const n=this,a=n.grid;if(n.column.formatSettings.Intl&&n.column.formatSettings.Intl.DateTimeFormat)return new Intl.DateTimeFormat(this.grid.locale,n.column.formatSettings.Intl.DateTimeFormat).format(e);!t&&n.column.formatSettings.dateFormat&&(t=n.column.formatSettings.dateFormat);try{const i=new Smart.Utilities.DateTime(e);return i.calendar.locale=a.locale,a.messages[a.locale]&&a.messages[a.locale].calendar&&(a.messages[a.locale].calendar.months&&(i.calendar.months=a.messages[a.locale].calendar.months),a.messages[a.locale].calendar.days&&(i.calendar.days=a.messages[a.locale].calendar.days),void 0!==a.messages[a.locale].calendar.firstDay&&(i.calendar.firstDay=a.messages[a.locale].calendar.firstDay),void 0!==a.messages[a.locale].calendar.eras&&(i.calendar.eras=a.messages[a.locale].calendar.eras),void 0!==a.messages[a.locale].calendar.AM&&(i.calendar.AM=a.messages[a.locale].calendar.AM),void 0!==a.messages[a.locale].calendar.PM&&(i.calendar.PM=a.messages[a.locale].calendar.PM),void 0!==a.messages[a.locale].calendar["/"]&&(i.calendar["/"]=a.messages[a.locale].calendar["/"]),void 0!==a.messages[a.locale].calendar[":"]&&(i.calendar[":"]=a.messages[a.locale].calendar[":"])),i.toString(t)}catch(i){return e}}formatNumber(e,t){if(!Smart.Utilities.NumberRenderer)return e;const n=this,a=n.grid;if(n.column.formatSettings.Intl&&n.column.formatSettings.Intl.NumberFormat)return new Intl.NumberFormat(this.grid.locale,n.column.formatSettings.Intl.NumberFormat).format(e);const i=new Smart.Utilities.NumberRenderer;if(i.localizationObject){const r=n.column.formatSettings,l=a.messages[a.locale]?a.messages[a.locale].calendar:{};r.decimalPlaces&&(i.localizationObject.decimalPlaces=r.decimalPlaces),(r.decimalSeparator||l.decimalSeparator)&&(i.localizationObject.decimalSeparator=r.decimalSeparator||l.decimalSeparator,i.localizationObject.decimalseparator=i.localizationObject.decimalSeparator),(r.thousandsSeparator||l.thousandsSeparator)&&(i.localizationObject.thousandsSeparator=r.thousandsSeparator||l.thousandsSeparator,i.localizationObject.thousandsseparator=i.localizationObject.thousandsSeparator),i.localizationObject.currencysymbol=l.currencySymbol,i.localizationObject.currencysymbolposition=l.currencySymbolPosition,r.prefix&&(i.localizationObject.currencysymbol=r.prefix),r.sufix&&(i.localizationObject.currencysymbol=r.sufix,i.localizationObject.currencysymbolposition="after")}const o=i.formatNumber(e,t);return void 0===o?e:e<0&&n.column.formatSettings.negativeWithBrackets?"("+o+")":o}refresh(){const e=this;e.element&&e._setStyle(e.element.firstChild)}autoWrap(){this.element&&this.element._autoWrap()}setProperties(e){const t=this;t._updating=!0;for(let n in e)t[n]=e[n];t._updating=!1,t.grid._recycle()}createElement(){const e=document.createElement("smart-grid-cell");return e.setAttribute("role","gridcell"),this.element=e,e._initialize(this),e}render(){this.element&&this.element._render()}parent(e){const t=this,n=t.row,a=t.column.dataField,i=t.grid;if(!i._cellsMerge.length)return null;if(t.__parentCells&&void 0!==t.__parentCells["row"+n.id+"_column_"+a])return t.__parentCells["row"+n.id+"_column_"+a];let o=i.getVisibleRows();i.paging.enabled&&"page"===i.selection.selectAllMode&&(o=o.slice(i.paging.pageIndex*i.paging.pageSize,(i.paging.pageIndex+1)*i.paging.pageSize)),t.__parentCells||(t.__parentCells=[]);for(let r=0;r<i._cellsMerge.length;r++){const l=i._cellsMerge[r];let s=[],c=[];if(s.push(l.row),l.rowSpan>1){const u=o.indexOf(l.row);if(u>=0)for(let p=u;p<u+l.rowSpan;p++)o[p]&&-1===s.indexOf(o[p])&&s.push(o[p])}if(c.push(l.column.dataField),l.colSpan>1){const u=i.columns.indexOf(i.columnByDataField[l.column.dataField]);for(let p=u;p<u+l.colSpan;p++)i.columns[p]&&-1===c.indexOf(i.columns[p].dataField)&&c.push(i.columns[p].dataField)}if(s.indexOf(n)>=0&&c.indexOf(a)>=0){if(e){const p={cell:l.row.getCell(l.column.dataField),rows:s,columns:c,row:l.row,column:l.column,endRow:s[s.length-1],endColumn:i.columnByDataField[c[c.length-1]]};return t.__parentCells["row"+n.id+"_column_"+a]=p,p}const u=l.row.getCell(l.column.dataField);return t.__parentCells["row"+n.id+"_column_"+a]=u,u}}return t.__parentCells["row"+n.id+"_column_"+a]=null,null}}),Smart("smart-grid-cell",class extends Smart.BaseElement{static get properties(){return{}}get hasStyleObserver(){return!1}get enableShadowDOM(){return!1}addThemeClass(){}addDefaultClass(){}get isUtilityElement(){return!0}_refresh(){const e=this;e.innerHTML="",e._initialize(e.cell)}_initialize(e){const t=this,n=document.createElement("div"),a=e.column,i=e.row,o=e.grid;t._properties=[],t.cell=e,t.appendChild(n);let r=!1;if(a&&a._treeColumn&&o.dataSource.boundHierarchy&&(r=!0,!o.grouping.enabled&&o.dataSource.groupBy&&o.dataSource.groupBy.length>0&&(r=!1),o.grouping.enabled&&o.dataSource.groupBy&&0===o.dataSource.groupBy.length&&(r=!1)),r){const l=document.createElement("div"),s=document.createElement("button"),c=document.createElement("div"),u=document.createElement("div"),p=document.createElement("div"),g=document.createElement("span");return i.expanded?s.setAttribute("toggled",""):s.removeAttribute("toggled",""),s.tabIndex=-1,t.toggleButton=s,t.checkbox=p,n.appendChild(l),n.appendChild(u),u.setAttribute("content",""),l.setAttribute("indent",""),c.setAttribute("label",""),s.setAttribute("toggle-button",""),p.setAttribute("checkbox",""),p.setAttribute("role","checkbox"),t.setAttribute("has-toggle-button",""),u.appendChild(s),u.appendChild(p),g.classList.add("smart-input"),p.appendChild(g),o.checkBoxes.visible?g.classList.remove("smart-hidden"):g.classList.add("smart-hidden"),u.appendChild(c),t.content=c,void(t.isRendered=!0)}{const l=document.createElement("div");n.appendChild(l)}t.content=n,t.isRendered=!0}_renderCommands(){const e=this,t=e.cell.grid;if(t.__cellsCommandTemplate)return e.firstChild.innerHTML=t.__cellsCommandTemplate,void t._updateCommandColumnCommandsVisibility(e.firstChild,e.cell.row);const n=t._getCommandColumnCommandsTemplate();e.firstChild.innerHTML=n,t._updateCommandColumnCommandsVisibility(e.firstChild,e.cell.row),t.__cellsCommandTemplate=n}_renderGroupCell(){const e=this,t=e.cell.grid,n=e.cell.column,a=e.cell.row;[...e.attributes].forEach(s=>e.removeAttribute(s.name)),e.setAttribute("group",""),e.style.width!==n.computedWidth+"px"&&(e.style.width=n.computedWidth+"px"),t.rightToLeft?e.style.right!==n.left+"px"&&(e.style.right=n.left+"px"):e.style.left!==n.left+"px"&&(e.style.left=n.left+"px"),e.classList.contains("smart-hidden")&&e.classList.remove("smart-hidden"),n.autoGenerated&&(e.style.width="0px");let i=a.label;const o=function(s,c,u){for(let p=0;p<c.length;p++){const g=c[p];g.$&&!1===g.$.filtered||(void 0!==g[s]&&u.push(g),g.summaryRow||(g.children||g.data&&g.data.children)&&o(s,g.children,u))}return u};if(void 0!==a.label){let s="",c=[];if(t.grouping.summaryRow.visible){const u=o(n.dataField,a.summaryRow?a.parent.data.children:a.data.children,[]),p={},g=n._treeColumn?n.summary.length>0?n.summary:["count"]:n.summary;p[n.dataField]=g;const b=g.length>0?t.dataSource.summarize([p],u):null;if(b)for(let v=0;v<g.length;v++){const y=g[v];if("advanced"===t.grouping.renderMode)s+="<span summary>"+t.localize(y,{value:b[n.dataField][y]});else{v>0&&(s+=", ");let x=b[n.dataField][y];const D=n.cellsFormat;D&&(x=e.cell.getFormattedValue(x,D)),s+=t.localize(y,{value:x})}c.push(b[n.dataField][y])}}if(t.dataSource.virtualDataSourceOnExpand&&(s=""),n._treeColumn){const u=t.columnByDataField[a.groupDataField],p=u?u.label:"";"advanced"===t.grouping.renderMode?(i=a.summaryRow?"<div header><span group></span><span value></span></div>":"<div header><span group>"+p+"</span><span value>"+a.label+"</span></div>",s&&(i+="<div summary>",i+=s,i+="</div>")):"compact"===t.grouping.renderMode?(a.summaryRow?(i="<div header><span group></span><span value></span>",s&&(i+="<div summary>",i+=s,i+="</div>")):(i="<div header><span group>"+p+": </span><span value>"+a.label+"</span>",s&&t.grouping.summaryRow.inline&&(i+="<span summary>",i+="  ("+c+")",i+="</span>")),i+="</div>",e.classList.add("smart-grid-column-border-collapse")):"basic"===t.grouping.renderMode&&(i=a.label,a.summaryRow?s&&(i+="<div summary>",i+=s,i+="</div>"):s&&t.grouping.summaryRow.inline&&(i+="<span summary>",i+="  ("+c+")",i+="</span>"),e.classList.add("smart-grid-column-border-collapse")),e.setAttribute("has-toggle-button","")}else e.removeAttribute("has-toggle-button",""),"advanced"===t.grouping.renderMode?(i="<div content><div label><div header><span group></span><span value></span></div>",s&&(i+="<div summary>",i+=s,i+="</div>"),i+="</div></div>"):i=s}const r=e.firstChild;if(t.dataSource.boundHierarchy&&n._treeColumn){const s=r.children[0],c=r.children[1].children[0],u=r.children[1].children[1].firstChild,p=r.children[1].children[2];s.setAttribute("indent",""),a.checked?u.setAttribute("checked",""):!1===a.checked?u.removeAttribute("checked"):null===a.checked&&u.setAttribute("checked","indeterminate"),a.leaf?c.classList.add("smart-visibility-hidden"):(c.classList.remove("smart-visibility-hidden"),a.expanded?c.setAttribute("toggled",""):c.removeAttribute("toggled",""));let g="";if(n._treeColumn?e.toggleButton.classList.remove("smart-hidden"):e.toggleButton.classList.add("smart-hidden"),n._treeColumn)if(t.grouping.enabled&&t.dataSource.groupBy.length>0&&"advanced"===t.grouping.renderMode){let b=a.level;void 0===a.label&&b--,g+='<div style="width: '+(1+b)*t.grouping.groupIndent+'px;"></div>'}else for(let b=0;b<a.level;b++)g+="<div class='smart-indent'></div>";void 0===a.label?c.classList.add("smart-hidden"):(c.classList.remove("smart-hidden"),c.style.marginLeft="",n._treeColumn&&t.grouping.enabled&&t.grouping.toggleButtonIndent>0&&"advanced"===t.grouping.renderMode&&(c.style.marginLeft=a.level*(t.grouping.toggleButtonIndent-t.grouping.groupIndent)+"px")),s.innerHTML=g,p.innerHTML=i,t.appearance.showTooltips?p.setAttribute("title",a.label?a.label:i):p.hasAttribute("title")&&p.removeAttribute("title")}else void 0!==a.label&&t.grouping.enabled&&!n._treeColumn&&(r.innerHTML=i);if(t.grouping.enabled&&t.dataSource.groupBy&&t.dataSource.groupBy.length>0&&"advanced"===t.grouping.renderMode){const s=t.grouping.groupIndent*(1+a.level);n.dataField===t.columns[t.columns.length-1].dataField&&(e.style.width=n.computedWidth-s+"px",t.appearance.showColumnLines&&r.firstChild.classList.add("smart-grid-column-border"))}let l="smart-label";if(e.style.zIndex="","advanced"!==t.grouping.renderMode&&n._treeColumn){const s=t.columnByDataField[a.groupDataField];s.cellsAlign&&(l+=" align-"+s.cellsAlign),s.cellsVerticalAlign&&(l+=" align-"+s.cellsVerticalAlign),e.setAttribute("header",""),a.summaryRow||(e.style.width="100%"),e.style.zIndex=100}if(a.summaryRow&&(e.setAttribute("header",""),e.classList.add("smart-grid-column-border-collapse"),n.cellsAlign&&(l+=" align-"+n.cellsAlign),n.cellsVerticalAlign&&(l+=" align-"+n.cellsVerticalAlign)),r.className!==l&&(r.className=l),n.formatFunction){const s={row:a,column:n,cell:e.cell,value:null,template:null,group:{value:i,template:null}};n.formatFunction(s),s.group.value!==i&&(r.innerHTML=s.group.value),null!==s.group.template&&(r.innerHTML=s.group.template)}}_renderFilterCell(e){const t=this,n=t.cell.grid,a=t.cell.column;let i;const o=(c,u)=>{n._handleFilterMenuClick(c,u)};n._filterInfo||(n._filterInfo={},n._filterInfo.stringConditions=[{icon:"smart-icon-contains",command:o,value:"CONTAINS",label:n.localize("CONTAINS")},{icon:"smart-icon-does-not-contain",command:o,value:"DOES_NOT_CONTAIN",label:n.localize("DOES_NOT_CONTAIN")},{icon:"smart-icon-starts-with",command:o,value:"STARTS_WITH",label:n.localize("STARTS_WITH")},{icon:"smart-icon-ends-with",command:o,value:"ENDS_WITH",label:n.localize("ENDS_WITH")},{icon:"smart-icon-equals",command:o,value:"EQUAL",label:n.localize("EQUAL")},{icon:"smart-icon-delete",command:o,value:"CLEAR_FILTER",label:n.localize("CLEAR_FILTER")}],n._filterInfo.numberAndDateConditions=[{icon:"smart-icon-equals",command:o,value:"EQUAL",label:n.localize("EQUAL")},{icon:"smart-icon-not-equal",command:o,value:"NOT_EQUAL",label:n.localize("NOT_EQUAL")},{icon:"smart-icon-less-than",command:o,value:"LESS_THAN",label:n.localize("LESS_THAN")},{icon:"smart-icon-less-than-equal",command:o,value:"LESS_THAN_OR_EQUAL",label:n.localize("LESS_THAN_OR_EQUAL")},{icon:"smart-icon-greater-than",command:o,value:"GREATER_THAN",label:n.localize("GREATER_THAN")},{icon:"smart-icon-greater-than-equal",command:o,value:"GREATER_THAN_OR_EQUAL",label:n.localize("GREATER_THAN_OR_EQUAL")},{icon:"smart-icon-between",command:o,value:"RANGE",label:n.localize("RANGE")},{icon:"smart-icon-delete",command:o,value:"CLEAR_FILTER",label:n.localize("CLEAR_FILTER")}]),i="string"===a.dataType?n._filterInfo.stringConditions:n._filterInfo.numberAndDateConditions;let r="smart-icon-search";switch(a._filterInfo||(a._filterInfo={condition:""}),a.filterEditor&&a.filterEditor.condition&&(a._filterInfo.condition=a.filterEditor.condition),a.filterEditor&&a.filterEditor.value&&(a._filterInfo.value=a.filterEditor.value),a._filterInfo.dataSource=i,a._filterInfo.condition.toLowerCase()){case"equal":r="smart-icon-equals";break;case"starts_with":r="smart-icon-starts-with";break;case"ends_with":r="smart-icon-ends-with";break;case"not_equal":r="smart-icon-not-equal";break;case"less_than":r="smart-icon-less-than";break;case"less_than_or_equal":r="smart-icon-less-than-or-equal";break;case"greater_than":r="smart-icon-greater-than";break;case"greater_than_or_equal":r="smart-icon-greater-than-or-equal";break;case"contains":r="smart-icon-contains";break;case"does_not_contain":r="smart-icon-does-not-contain";break;case"range":r="smart-icon-between";break;default:r="smart-icon-search"}let l=`<div class="smart-filter-input-type"><i class="smart-grid-icon ${r} show"></i></div>`;if("string"===a.dataType)l+=`<input class="smart-filter-input-value" data-type="${a.dataType}"/>`,e.innerHTML=l;else if("date"===a.dataType){const c=new Smart.Utilities.DateTime;l+=`<input placeholder="${c.expandFormat(c.calendar,a.cellsFormat||"d")}" class="smart-filter-input-value" data-type="${a.dataType}"/><div class="smart-filter-input-type"><i class="smart-grid-icon smart-icon-calendar show"></i></div>`,e.innerHTML=l,e.lastElementChild.onpointerdown=function(){n._handleFilterCalendarCellClick(t.cell)}}else if("number"===a.dataType)l+='<div class="smart-grid-cell-editor smart-filter-input-value smart-grid-number-input-cell-editor"><input class="smart-input" type="number"><div tabindex="-1" class="nav"><div tabindex="-1" class="up"></div><div tabindex="-1" class="down"></div></div></div>',e.innerHTML=l,n._handleFilterNumberCellEditor(this.cell,e);else if("boolean"===a.dataType){const c=document.createElement("div");c.classList.add("smart-input"),c.classList.add("smart-grid-check-box-cell-editor"),c.classList.add("smart-filter-input-value"),e.tabIndex=0,e.style.outline="none",t.setAttribute("template","checkBox"),c.setAttribute("checked","indeterminate"),l=c.outerHTML,e.innerHTML=l,e.classList.add("align-center"),e.classList.add("smart-label"),e.onfocus=()=>{e.setAttribute("focus","")},e.onblur=()=>{e.removeAttribute("focus","")},e.onclick=u=>{u.target.classList.contains("smart-input")&&n._handleFilterCellCheckBoxClick(this.cell)}}const s=e.querySelector("input");if(s&&(e.firstElementChild.onpointerdown=function(){n._handleFilterCellIconClick(this.cell)}.bind(this),s.onfocus=function(){n._handleFilterCellFocus(this.cell)}.bind(this),s.onblur=function(){n._handleFilterCellBlur(this.cell)}.bind(this),s.onkeyup=function(c){n._handleFilterCellKeyUp(this.cell,c)}.bind(this),s.onkeydown=function(c){n._handleFilterCellKeyDown(this.cell,c)}.bind(this)),e.classList.add("smart-filter-input-container"),a._filterInfo.input=s,a._filterInfo.cell=t.cell,a._filterInfo.editor=e,a._filterInfo.value&&(s.value=a._filterInfo.value,"date"===a.dataType&&(s.value=t.cell.getFormattedValue(a._filterInfo.value,a.cellsFormat))),a.allowFilter||(s.disabled=!0),a.filterEditor)if(a.filterEditor.template){const c=a.filterEditor.template,u=document.createElement("div");a.filterTemplate instanceof HTMLTemplateElement?u.appendChild(c.content.cloneNode(!0)):c instanceof HTMLElement?u.appendChild(c):u.innerHTML=c,e.innerHTML="",e.appendChild(u),u.style.height="100%",u.style.width="100%";const p=e.querySelector("input");p&&(p.onfocus=()=>{e.setAttribute("focus","")},p.onblur=()=>{e.removeAttribute("focus","")}),a.filterEditor.onInit&&a.filterEditor.onInit(a,u)}else void 0!==a.filterEditor.min&&(s.min=a.filterEditor.min),void 0!==a.filterEditor.max&&(s.max=a.filterEditor.max),void 0!==a.filterEditor.minLength&&(s.minLength=a.filterEditor.minLength),void 0!==a.filterEditor.maxLength&&(s.maxLength=a.filterEditor.maxLength),void 0!==a.filterEditor.placeholder&&(s.placeholder=a.filterEditor.placeholder),void 0!==a.filterEditor.value&&(s.value=a.filterEditor.value),void 0!==a.filterEditor.step&&(s.step=a.filterEditor.step),void 0!==a.filterEditor.disabled&&(s.disabled=a.filterEditor.disabled),void 0!==a.filterEditor.condition&&(a._filterInfo.condition=a.filterEditor.condition),a.filterEditor.onInit&&a.filterEditor.onInit(a,e)}_render(){var e=this;return H(function*(){const t=e,n=t.cell.grid,a=t.cell.column,i=t.cell.row,o=i.data,r=i._isMeasureRow?null:a.cellsFormat;if(n.grouping.enabled&&n.dataSource.groupBy.length>0&&void 0!==i.label)return t._renderGroupCell(),void(i.summaryRow&&(t.cell.canNotify=!1,i.canNotify=!1,t.cell._styleChanged=!0,t.cell.background=null,t.cell.color=null,t.cell.fontFamily=null,t.cell.fontSize=null,t.cell.element&&t.cell.element.firstElementChild&&t.cell._setStyle(t.cell.element.firstElementChild),t.cell.canNotify=!0,i.canNotify=!0));if(n.grouping.enabled&&n.dataSource.groupBy.length>0&&t.toggleButton&&(t.toggleButton.classList.remove("smart-hidden"),t.toggleButton.classList.remove("smart-visibility-hidden"),t.toggleButton.style.marginLeft="",a._treeColumn&&n.grouping.enabled&&n.grouping.toggleButtonIndent>0&&(t.toggleButton.style.marginLeft=i.level*(n.grouping.toggleButtonIndent-n.grouping.groupIndent)+"px")),n.grouping.enabled&&n.dataSource.groupBy.length>0&&(t.removeAttribute("header"),t.removeAttribute("group")),!a.visible)return void(t.style.width="0px");n.appearance.showSortColumnBackground?a.sorted?t.setAttribute("sort",""):t.removeAttribute("sort"):a.sorted&&t.hasAttribute("sort")&&t.removeAttribute("sort"),n.appearance.showFilterColumnBackground?a.filtered?t.setAttribute("filter",""):t.removeAttribute("filter"):a.filtered&&t.hasAttribute("filter")&&t.removeAttribute("filter"),n.dataSource.boundHierarchy&&t.hasAttribute("has-toggle-button")&&!a._treeColumn&&t.removeAttribute("has-toggle-button");let l=a.displayField?o[a.displayField]:o[a.dataField];null!==l||a.allowNull||("int"!==a.dataType&&"number"!==a.dataType||(l=0),"string"===a.dataType&&(l=""),"boolean"!==a.dataType&&"bool"!==a.dataType||(l=!1),"date"===a.dataType&&(l=new Date)),t.removeAttribute("highlight"),n.highlighted!==i.id||a.autoGenerated||t.setAttribute("highlight","");const s=y=>y?y.startsWith("off_")?(t.classList.remove(y.substring(4)),!1):(t.classList.add(y),t.setAttribute("customCSS",y),!0):(t.setAttribute("highlight",""),!0);if((n.highlightedRows||n.highlightedCells)&&t.hasAttribute("customCSS")){const y=t.getAttribute("customCSS");t.removeAttribute("customCSS"),t.classList.remove(y)}if(a.highlight&&!i.summaryRow&&(s(),t.setAttribute("highlight-data-field",a.dataField)),n.highlightedCells&&n.highlightedCells[i.id]&&!i.summaryRow&&void 0!==n.highlightedCells[i.id][a.dataField]&&s(n.highlightedCells[i.id][a.dataField]),n.highlightedRows&&!i.summaryRow&&void 0!==n.highlightedRows[i.id]&&s(n.highlightedRows[i.id]),n.editing.batch){if(n._cellsUpdatedValues){t.removeAttribute("update");const y=n._cellsUpdatedValues[i.id+"_"+a.dataField];void 0!==y&&(t.setAttribute("update",""),l=y)}n._rowsDeleted&&(n._rowsDeleted.indexOf(i)>=0?t.setAttribute("delete",""):t.removeAttribute("delete")),n._rowsAdded&&(n._rowsAdded.indexOf(i.id)>=0?t.setAttribute("add",""):t.removeAttribute("add"))}!n.onCellValue||a.rowHeaderColumn||a.selectionColumn||(t.cell._updating=!0,n.onCellValue(t.cell),t.cell._updating=!1,l=t.cell.value),void 0===l&&(l="");let c=l;r&&(c=t.cell.getFormattedValue(l,r));const u=t.firstChild;if(n.onCellRender||a.onCellRender)if(a._cellsCachedValues||(a._cellsCachedValues=[]),a._cellsCachedValues[i.index]){const y=a._cellsCachedValues[i.index];u.firstChild&&u.removeChild(u.firstChild),t.cell.template instanceof HTMLTemplateElement||"string"==typeof t.cell.template?u.appendChild(y):u.innerHTML=y.innerHTML}else{if(t.cell._updating=!0,n.onCellRender?n.onCellRender(t.cell):a.onCellRender(t.cell),t.cell._updating=!1,t.cell.template!==a.template){const y=document.createElement("div");return u.firstChild&&u.removeChild(u.firstChild),t.cell.template instanceof HTMLTemplateElement?(y.appendChild(t.cell.template.content.cloneNode(!0)),a._cellsCachedValues[i.index]=y):y.appendChild(t.cell.template),void u.appendChild(y)}t.cell.value!==l&&(c=t.cell.value)}if(a.autoGenerated||t.setAttribute("data-field",a.dataField),t.cell.focused?(n.selection.allowCellSelection&&t.setAttribute("focus",""),i.element.setAttribute("focus",""),i.element.toggleDetailButton&&(i.element.toggleDetailButton.classList.remove("smart-visibility-hidden"),i.element.star.classList.add("smart-hidden")),t.cell.id||(t.id="gridcell_"+Math.floor(65536*(1+Math.random())).toString(16).substring(1)),n.setAttribute("aria-activedescendant",t.id)):t.removeAttribute("focus"),t.cell.selected?(t.setAttribute("selected",""),t.setAttribute("aria-selected",!0)):(t.removeAttribute("selected"),t.removeAttribute("aria-selected")),n.dragDrop&&n.dragDrop.row===i?t.classList.add("dragged"):t.classList.remove("dragged"),a.cellsClassName){const y=a.cellsClassName.trim().split(" ");for(let x=0;x<y.length;x++)t.classList.add(y[x])}n.rowDetail.enabled&&i.showDetail&&!1===n.rowDetail.dialog.enabled&&(t.style.height=i.cellHeight+"px",t.style.lineHeight=i.cellHeight+"px"),i.expanded&&i.expandHeight>0&&(t.style.height=i.cellHeight+"px",t.style.lineHeight=i.cellHeight+"px");const p=t._getCellAlignment(i,a),g=""!==t.cell.template&&n.isInitialized&&!i._isMeasureRow;let b="";if(p.align&&(b+=p.align+" "),p.verticalAlign&&(b+=p.verticalAlign+" "),a.cellsWrap&&(b+="wrap "),b+="smart-label",t.style.width!==a.computedWidth+"px"){const y=n._isLastVisibleColumn(a);t.style.width=a.autoGenerated||y?a.computedWidth+"px":a.computedWidth-n._columnGap+"px"}if(n.grouping.enabled&&n.dataSource.groupBy&&n.dataSource.groupBy.length>0&&"advanced"===n.grouping.renderMode){const y=n.grouping.groupIndent*(1+i.level);a.dataField===n.columns[n.columns.length-1].dataField&&(t.style.width=a.computedWidth-y+n.grouping.groupIndent+"px",n.appearance.showColumnLines&&t.classList.add("smart-grid-column-border"))}a===n._firstVisibleColumn?t.classList.add("smart-grid-column-border-collapse"):t.classList.remove("smart-grid-column-border-collapse"),n._columnGap>0&&n.appearance.showColumnLines&&t.classList.add("smart-grid-column-border"),n._rowGap>0&&t.classList.add("smart-grid-row-border"),n.appearance.showColumnLines?t.classList.remove("smart-grid-vertical-border-collapse"):t.classList.add("smart-grid-vertical-border-collapse"),n.appearance.showRowLines?t.classList.remove("smart-grid-horizontal-border-collapse"):t.classList.add("smart-grid-horizontal-border-collapse");let v=a.left;if(n.rightToLeft?t.style.right!==v+"px"&&(t.style.right=v+"px"):t.style.left!==v+"px"&&(t.style.left=v+"px"),t.classList.contains("smart-hidden")&&t.classList.remove("smart-hidden"),t.hasAttribute("template")&&t.removeAttribute("template"),t.hasAttribute("freeze")&&t.removeAttribute("freeze"),t.hasAttribute("detail")&&t.removeAttribute("detail"),t.hasAttribute("error")&&t.removeAttribute("error"),t.cell.error&&t.setAttribute("error",t.cell.error),i.filterRow?t.classList.add("smart-grid-filter-row-cell"):i.summaryRow?t.classList.add("smart-grid-summary-row-cell"):(a.freeze||i.freeze)&&(a.selectionColumn&&(t.setAttribute("checkbox",""),b+=" smart-input",a.grid.selection.checkBoxes.enabled&&a.grid.selection.checkBoxes.autoShow?t.setAttribute("auto-show",""):t.removeAttribute("auto-show")),(a.rowHeaderColumn||a.selectionColumn)&&(t.setAttribute("header",""),t.setAttribute("role","rowheader")),a.rowDetailColumn&&(t.setAttribute("header",""),t.setAttribute("detail",""),t.setAttribute("has-toggle-button",""),t.classList.add("smart-grid-column-border-collapse")),a.commandColumn&&t.setAttribute("command",""),n.appearance.showFrozenColumnBackground&&a.freeze&&t.setAttribute("freeze",""),n.appearance.showFrozenRowBackground&&i.freeze&&t.setAttribute("freeze","")),a.cellsRotationAngle){if(!t._rotateCellContent(u,a,l))return}else if(i.filterRow){if(!a.toggleColumn&&!a.rowHeaderColumn)return a._filterEditorInitialized?void("boolean"===a.dataType&&t.setAttribute("template","checkBox")):(a._filterEditorInitialized=!0,void t._renderFilterCell(u));u.innerHTML=""}else if(i.summaryRow){if(a.toggleColumn||a.rowHeaderColumn)u.innerHTML="";else if(u.innerHTML="",a.summary.length>0&&n._summaryItems){const y=n._summaryItems[a.dataField];let x=0;for(let D in y){if(x===i.summaryRowIndex){const T=a.cellsFormat;let M=y[D];T&&(M=t.cell.getFormattedValue(M,T)),u.innerHTML=n.localize(D,{value:M})}x++}}}else if(n.rowDetail.enabled&&a.rowDetailColumn){if(""!==u.innerHTML){if(u.innerHTML=i.showDetail?'<button tabindex="-1" class="smart-visibility-hidden smart-animate" toggled toggle-button></button>':'<button tabindex="-1" class="smart-visibility-hidden smart-animate" toggle-button></button>',n.appearance.showRowStatus){u.innerHTML=i._userData&&i._userData.status?`<span class="row-status custom" style="color: ${i._userData.status};"></span>`+u.innerHTML:'<span class="row-status"></span>'+u.innerHTML;const y=()=>{if(i._userData&&i._userData.comments.length>0){const x=i._userData.comments.length;i.element.star.classList.add("comments"),i.element.star.setAttribute("title",n.localize(i.starred?"starred":"notStarred",{elementType:"Grid"})+", "+x+" "+n.localize("comments"))}};i.element.star=t.querySelector("span"),i.element.star.onpointerdown=x=>{i.canNotify=!1,i.starred=!i.starred,i.canNotify=!0,i.starred?i.element.star.classList.add("starred"):i.element.star.classList.remove("starred"),i.element.star.setAttribute("title",n.localize(i.starred?"starred":"notStarred",{elementType:"Grid"})),y(),x.stopPropagation(),x.preventDefault()},i.element.star.setAttribute("title",n.localize(i.starred?"starred":"notStarred",{elementType:"Grid"})),i.starred&&i.element.star.classList.add("starred"),y()}if(i.element.toggleDetailButton=t.querySelector("button"),i.element.toggleDetailButton.setAttribute("title",n.localize(i.showDetail?"collapseRow":"expandRow",{elementType:"Grid"})),i._userData&&i._userData.comments.length>0){const y=i._userData.comments.length;i.element.toggleDetailButton.classList.remove("smart-visibility-hidden"),n.appearance.showRowStatus?i.element.toggleDetailButton.innerHTML+=`<div>${y}</div>`:i.element.toggleDetailButton.innerHTML=`<div>${y}</div>`,i.starred&&i.element.toggleDetailButton.classList.add("starred"),i.element.toggleDetailButton.classList.add("row-comments"),i.element.toggleDetailButton.setAttribute("title",n.localize(i.showDetail?"collapseRow":"expandRowComments",{value:y,elementType:"Grid"}))}n.rowDetail.dialog.enabled&&i.element.toggleDetailButton.classList.add("row-detail")}}else if(a.commandColumn)t._renderCommands();else if(n.appearance.showRowHeaderNumber&&a.rowHeaderColumn)if(i.addNewRow)u.textContent="";else{const y=x=>{if(t.cell.value)return t.cell.value;if("number"===n.appearance.autoGenerateRowLabelMode)return x.visibleIndex+1;{const D=x.visibleIndex%26,T=Math.floor(x.visibleIndex/26),M="A".charCodeAt(0),A=String.fromCharCode(M+D);let B="";for(let O=0;O<T;O++)B+="A";return B+A}};u.textContent=n._rowsAdded&&n._rowsAdded.indexOf(i.id)>=0?"":y(i)}else if(g)switch(t.removeAttribute("readonly"),t.cell.template){case"checkBox":case"switchButton":case"radioButton":""!==u.textContent&&(u.textContent=""),(!n.editing.enabled||!a.allowEdit||t.cell.readonly||n.editing.enabled&&n.editing.commandColumn.visible&&n.editing.editRow!==t.cell.row)&&t.setAttribute("readonly",""),'<span class="smart-input"></span>'!==u.innerHTML&&(u.innerHTML='<span class="smart-input"></span>'),l?u.firstChild.setAttribute("checked",""):null===l?u.firstChild.setAttribute("checked","indeterminate"):u.firstChild.removeAttribute("checked"),t.setAttribute("template",t.cell.template);break;case"email":""!==u.textContent&&(u.textContent=""),(!n.editing.enabled||!a.allowEdit||t.cell.readonly||n.editing.enabled&&n.editing.commandColumn.visible&&n.editing.editRow!==t.cell.row)&&t.setAttribute("readonly",""),Smart.Validator&&(u.innerHTML=Smart.Validator.email(l)?l:'<span class="url"><a href="mailto:'+l+'" target="_blank" contenteditable="false" rel="noreferrer noopener">'+l+"</a></span>");break;case"url":""!==u.textContent&&(u.textContent=""),(!n.editing.enabled||!a.allowEdit||t.cell.readonly||n.editing.enabled&&n.editing.commandColumn.visible&&n.editing.editRow!==t.cell.row)&&t.setAttribute("readonly",""),Smart.Validator&&(u.innerHTML=Smart.Validator.url(l)?'<span class="url"><a href="http://'+l+'" target="_blank" contenteditable="false" rel="noreferrer noopener">'+l+"</a></span>":'<span class="url"><a href="'+l+'" target="_blank" contenteditable="false" rel="noreferrer noopener">'+l+"</a></span>");break;default:{let y=null;if(t.setAttribute("template",""),"function"==typeof t.cell.template){const x={row:i,column:a,cell:t.cell,oldValue:t.cell.oldValue,value:l,template:null};let D=u.querySelector(".smart-grid-cell-template");D&&D.getAttribute("column")===a.dataField?x.template=D.firstElementChild:D=null,t.formattedValue!==c&&(D=null),t.cell.canNotify=!1,i.canNotify=!1;const T=Object.assign({},{background:t.cell.background,borderColor:t.cell.borderColor,color:t.cell.color,fontSize:t.cell.fontSize,fontFamily:t.cell.fontFamily,fontWeight:t.cell.fontWeight,textDecoration:t.cell.textDecoration,fontStyle:t.cell.fontStyle});if(t.cell.template(x),!D&&x.template)if(x.template instanceof HTMLElement){const M=document.createElement("div");M.classList.add("smart-grid-cell-template"),M.setAttribute("column",a.dataField),u.innerHTML="",u.appendChild(M),M.appendChild(x.template)}else u.innerHTML='<div column="'+a.dataField+'" class="smart-grid-cell-template">'+x.template+"</div>";else D||null!==x.template||(u.innerHTML=l);u.style.background===T.background&&u.style.borderColor===T.borderColor&&u.style.color===T.color&&u.style.fontSize===T.fontSize&&u.style.fontWeight===T.fontWeight&&u.style.fontStyle===T.fontStyle||(t.cell._styleChanged=!0,t.cell._setStyle(u)),t.cell.background!==T.background||t.cell.borderColor!==T.borderColor||t.cell.color!==T.color||t.cell.fontSize!==T.fontSize||t.cell.fontWeight!==T.fontWeight||t.cell.fontStyle!==T.fontStyle?(t.cell._styleChanged=!0,t.cell._setStyle(u)):t.cell._styleChanged&&t.cell._setStyle(u),void 0===t.cell.oldValue&&(t.cell.oldValue=l),t.formattedValue=c,t.cell.canNotify=!0,i.canNotify=!0}else{if(""!==u.textContent&&(u.textContent=""),t.cell.template instanceof HTMLTemplateElement)y=t.cell.template;else if(t.cell.template instanceof HTMLElement){const x=t.cell.template.innerHTML.replace(/{{value}}/gi,l).replace(/{{id}}/gi,i.id);u.innerHTML!==x&&(u.innerHTML=x)}if(t.cell.template.startsWith&&t.cell.template.startsWith("#")&&(y=document.querySelector(t.cell.template)),y){let x=y.content.cloneNode(!0).firstElementChild;const D=l;if(l=l.toString(),l=l.replace(/'/gi,"\\'"),l=l.replace(/"/gi,'\\"'),x.querySelector("[smart-if]")){const M=x.querySelector("[smart-else]"),A=x.querySelectorAll("[smart-if]");let B=!1;for(let O=0;O<A.length;O++){const N=A[O],P=N.getAttribute("smart-if").split(" "),V=P[1].trim();let Y=P[2].trim(),K=l;switch("Today"===Y&&(Y=new Date),"date"===a.dataType&&(l=new Date(D).getTime(),Y=new Date(Y).getTime()),V){case">":l>parseFloat(Y)&&(x=N,B=!0);break;case">=":l>=parseFloat(Y)&&(x=N,B=!0);break;case"=":case"==":case"===":l===Y&&(x=N,B=!0);break;case"<":l<parseFloat(Y)&&(x=N,B=!0);break;case"<=":l<=parseFloat(Y)&&(x=N,B=!0)}if(l=K,B)break}!B&&M&&(x=M)}let T=x.outerHTML.replace(/{{value}}/gi,l).replace(/{{id}}/gi,i.id);for(T.indexOf("{{value=")>=0&&(l?(T=T.substring(0,T.indexOf("{{value="))+l+T.substring(T.indexOf("}")),T=T.replace(/}/gi,""),T=T.replace(/{/gi,"")):(T=T.replace(/{{value=/gi,""),T=T.replace(/}}/gi,"")));T.indexOf("{{value::")>=0;){const M=T.indexOf("{{value::"),A=T.substring(M+9,T.indexOf("}}")),B=t.cell.getFormattedValue(l,A);T=T.replace(`{{value::${A}}}`,B)}if(a._treeColumn){const M=u.firstChild;if(M&&M.classList&&t.toggleButton&&a._treeColumn&&u.children[1]){const A=u.children[0],B=u.children[1].children[0],O=u.children[1].children[1].firstChild,N=u.children[1].children[2];let P="";if(a._treeColumn){if(n.grouping.enabled)P+='<div style="width: '+(i.level-1+1)*n.grouping.groupIndent+'px;"></div>';else for(let V=0;V<i.level;V++)P+="<div class='smart-indent'></div>";i.checked?O.setAttribute("checked",""):!1===i.checked?O.removeAttribute("checked"):null===i.checked&&O.setAttribute("checked","indeterminate"),i.leaf?i.allowCheck?O.classList.remove("smart-visibility-hidden"):O.classList.add("smart-visibility-hidden"):i.allowCheck?O.classList.remove("smart-hidden"):O.classList.add("smart-hidden")}i.allowCheck?n.checkBoxes.visible?O.classList.remove("smart-hidden"):O.classList.add("smart-hidden"):n.checkBoxes.visible||O.classList.add("smart-hidden"),A.innerHTML=P,B.classList.add("smart-visibility-hidden"),i.leaf?B.classList.add("smart-visibility-hidden"):(B.classList.remove("smart-visibility-hidden"),i.expanded?B.setAttribute("toggled",""):B.removeAttribute("toggled","")),i.data.isEmpty&&B.classList.add("smart-visibility-hidden"),N.innerHTML=T,n.appearance.showRowHeaderNumber&&n.grouping.enabled&&n.dataSource.groupBy.length>0&&"advanced"===n.grouping.renderMode&&(c="<span visible-index>"+(1+i.visibleIndex)+"</span> "+c),n.rowDetail.enabled&&n.grouping.enabled&&n.dataSource.groupBy.length>0&&"advanced"===n.grouping.renderMode&&(N.innerHTML='<button tabindex="-1" class="row-detail inline smart-animate" toggled toggle-button></button>'+c,i.element.toggleDetailButton=t.querySelector("button.inline"),i.element.toggleDetailButton.setAttribute("title",n.localize(i.showDetail?"collapseRow":"expandRow",{elementType:"Grid"})),i.element.toggleDetailButton.onpointerdown=function(){i.showDetail=!i.showDetail}),n.appearance.showTooltips?N.setAttribute("title",c):N.hasAttribute("title")&&N.removeAttribute("title")}}else u.innerHTML!==T&&(u.innerHTML=T)}else if("string"==typeof t.cell.template){""===l&&(l="&nbsp;");const x=t.cell.template.replace(/{{value}}/gi,l).replace(/{{id}}/gi,i.id);u.innerHTML!==x&&(u.innerHTML=x)}}}}else if(a.selectionColumn)"checkBox"===n.selectionMode&&(i.getProperty("selected")?(t.setAttribute("selected",""),t.element.setAttribute("aria-selected",!0)):t.getAttribute("selected")&&(t.removeAttribute("selected"),t.element.removeAttribute("aria-selected")));else{const y=u.firstChild;if(y&&y.classList&&t.toggleButton&&a._treeColumn&&u.children[1]){const x=u.children[0],D=u.children[1].children[0],T=u.children[1].children[1].firstChild,M=u.children[1].children[2];let A="";if(a._treeColumn){if(n.grouping.enabled)A+='<div style="width: '+(i.level-1+1)*n.grouping.groupIndent+'px;"></div>';else for(let B=0;B<i.level;B++)A+="<div class='smart-indent'></div>";i.checked?T.setAttribute("checked",""):!1===i.checked?T.removeAttribute("checked"):null===i.checked&&T.setAttribute("checked","indeterminate"),i.leaf?i.allowCheck?T.classList.remove("smart-visibility-hidden"):T.classList.add("smart-visibility-hidden"):i.allowCheck?T.classList.remove("smart-hidden"):T.classList.add("smart-hidden")}i.allowCheck?n.checkBoxes.visible?T.classList.remove("smart-hidden"):T.classList.add("smart-hidden"):n.checkBoxes.visible||T.classList.add("smart-hidden"),x.innerHTML=A,D.classList.add("smart-visibility-hidden"),i.leaf?D.classList.add("smart-visibility-hidden"):(D.classList.remove("smart-visibility-hidden"),i.expanded?D.setAttribute("toggled",""):D.removeAttribute("toggled","")),i.data.isEmpty&&D.classList.add("smart-visibility-hidden"),M.innerHTML=c,n.appearance.showRowHeaderNumber&&n.grouping.enabled&&n.dataSource.groupBy.length>0&&"advanced"===n.grouping.renderMode&&(c="<span visible-index>"+(1+i.visibleIndex)+"</span> "+c),n.rowDetail.enabled&&n.grouping.enabled&&n.dataSource.groupBy.length>0&&"advanced"===n.grouping.renderMode&&(M.innerHTML='<button tabindex="-1" class="row-detail inline smart-animate" toggled toggle-button></button>'+c,i.element.toggleDetailButton=t.querySelector("button.inline"),i.element.toggleDetailButton.setAttribute("title",n.localize(i.showDetail?"collapseRow":"expandRow",{elementType:"Grid"})),i.element.toggleDetailButton.onpointerdown=function(){i.showDetail=!i.showDetail}),n.appearance.showTooltips?M.setAttribute("title",c):M.hasAttribute("title")&&M.removeAttribute("title")}else{const x=i["column_"+a.dataField];if(t.getAttribute("rowspan")&&(t.removeAttribute("rowspan"),t.removeAttribute("aria-rowspan"),t.style.height=""),t.getAttribute("colspan")&&(t.removeAttribute("colspan"),t.removeAttribute("aria-colspan")),x){if(x.colSpan>1){const D=n.columns.indexOf(a);let T=0;for(let M=D;M<D+x.colSpan;M++){const A=n.columns[M];A&&A.visible&&(T+=A.computedWidth)}t.style.width=T+"px",t.setAttribute("colspan",""),t.setAttribute("aria-colspan",x.colSpan),x._styleChanged=!0}if(x.rowSpan>1){const D=n.rows.indexOf(i);let T=0;i.element.setAttribute("rowspan","");for(let M=D;M<=D+x.rowSpan-1;M++){const A=n.rows[M];A&&A.visible&&A.filtered&&(T+=A.cellHeight)}t.style.height=T+"px",t.setAttribute("rowspan",""),t.setAttribute("aria-rowspan",x.rowSpan),x._styleChanged=!0}1===x.colSpan&&t.hasAttribute("colspan")&&(t.style.width="",t.removeAttribute("colspan"),t.removeAttribute("aria-colspan"),x._styleChanged=!0),t.hasAttribute("rowspan")&&1===x.rowSpan&&(t.style.height="",t.removeAttribute("rowspan"),t.removeAttribute("aria-rowspan"),x._styleChanged=!0),u.textContent===c||a.formatFunction||(u.textContent=c),x._setStyle(u),n.appearance.showTooltips?u.setAttribute("title",x.tooltip||c):u.hasAttribute("title")&&u.removeAttribute("title")}else u.textContent=c}}if(u.className!==b&&(u.className=b),n.appearance.displayLoadingIndicator&&!a.autoGenerated&&(i.element.removeAttribute("focus"),u.innerHTML='<div class="smart-grid-cell-loading"></div>'),a.formatFunction&&!i.data.isEmpty&&n.isInitialized){const y={row:i,column:a,cell:t.cell,oldValue:t.cell.oldValue,value:l,formattedValue:c,template:null};t.cell.canNotify=!1,i.canNotify=!1;const x=Object.assign({},{background:t.cell.background,borderColor:t.cell.borderColor,color:t.cell.color,fontSize:t.cell.fontSize,fontFamily:t.cell.fontFamily,textDecoration:t.cell.textDecoration,fontWeight:t.cell.fontWeight,fontStyle:t.cell.fontStyle});yield a.formatFunction(y),u.style.background===x.background&&u.style.borderColor===x.borderColor&&u.style.color===x.color&&u.style.fontSize===x.fontSize&&u.style.fontFamily===x.fontFamily&&u.style.textDecoration===x.textDecoration&&u.style.fontWeight===x.fontWeight&&u.style.fontStyle===x.fontStyle||(t.cell._styleChanged=!0,t.cell._setStyle(u)),t.cell.background===x.background&&t.cell.borderColor===x.borderColor&&t.cell.color===x.color&&t.cell.fontSize===x.fontSize&&t.cell.fontWeight===x.fontWeight&&t.cell.textDecoration===x.textDecoration&&t.cell.fontFamily===x.fontFamily&&t.cell.fontStyle===x.fontStyle||(t.cell._styleChanged=!0,t.cell._setStyle(u));let D=!0;if(y.value!==l&&(t.toggleButton?u.children[1].children[2].innerHTML=y.value:u.innerHTML=y.value,D=!1),null!==y.template){if(t.toggleButton){const T=u.children[1].children[2];T.innerHTML!==y.template&&(T.innerHTML=y.template)}else if(u.innerHTML!==y.template){const T=document.createElement("div");T.innerHTML=y.template,T.innerHTML!==u.innerHTML&&(u.innerHTML=y.template)}D=!1}D&&(u.textContent=a.cellsFormat?c:l),t.cell.canNotify=!0,i.canNotify=!0}if(!i.data.isEmpty&&n.isInitialized&&t._applyConditionalFormattingToCell(t.cell,n,u),n.grouping.enabled&&"advanced"!==n.grouping.renderMode&&n.dataSource&&n.dataSource.groupBy.length>0&&a===n._firstVisibleColumn&&n.rowDetail.enabled&&n.rowDetail.visible&&u.querySelector("[toggle-button]")){const y=u.querySelector("[toggle-button]");y.classList.remove("smart-visibility-hidden"),y.classList.add("row-detail"),i.element.toggleDetailButton=y,i.element.toggleDetailButton.setAttribute("title",n.localize(i.showDetail?"collapseRow":"expandRow",{elementType:"Grid"})),y.onpointerdown=function(x){i.showDetail=!i.showDetail,x.stopPropagation(),x.preventDefault()}}})()}_autoWrap(){const e=this,t=e.firstChild,n=e.cell.grid;n.layout.allowCellsWrapShortcut&&e.hasAttribute("focus")&&e.hasAttribute("selected")&&(t.offsetWidth<t.scrollWidth?e._popupCellContent(t.innerHTML,e.cell):n._cellContentPopup&&n._cellContentPopup.remove())}_popupCellContent(e,t){const n=this,a=t.grid;let i=a._cellContentPopup;if(!a._cellContentPopup){i=document.createElement("div");const r=document.createElement("span"),l=document.createElement("div"),s=document.createElement("div");i.style.minHeight="0px",i.style.minWidth="0px",i.setAttribute("theme",a.theme),i.classList.add("smart-grid-cell-content-popup"),s.appendChild(l),s.classList.add("smart-grid-text-area-container"),l.innerHTML=e,l.classList.add("smart-grid-cell-content-popup-content"),r.classList.add("smart-hidden"),r.classList.add("close-button"),r.classList.add("smart-grid-icon"),r.classList.add("smart-icon-cancel-circled"),r.onclick=function(){a._cellContentPopup.parentNode.removeChild(a._cellContentPopup)},i.classList.add("smart-grid-text-area-dialog"),i.appendChild(s),i.appendChild(r),a._cellContentPopup=i}i.querySelector(".smart-grid-cell-content-popup-content").innerHTML=e;const o=a.offset(a.$.scrollView);i.style.top=a._offsetTop(n)-o.top+"px",i.style.left=a._offsetLeft(n)-o.left+"px",i.style.width=n.offsetWidth-4+"px",a.$.scrollView.appendChild(i)}_applyConditionalFormattingToCell(e,t,n){const a=this,i=e.column.dataField,o=e.row,l=o._userData;if(t._conditionalFormatting&&t._conditionalFormatting[i]){const s=t._conditionalFormatting[i][e.row.index];a.cell.canNotify=!1,o.canNotify=!1,s?(a.cell._styleChanged=!0,a.cell.background=s.background,a.cell.color=s.color,a.cell.fontFamily=s.fontFamily,a.cell.fontSize=s.fontSize,a.cell._setStyle(n)):a.cell._styleChanged||(l&&l._changed?(a.cell._styleChanged=!0,a.cell.background=l.background,a.cell.color=l.color,a.cell.fontFamily=l.fontFamily,a.cell.fontSize=l.fontSize,a.cell._setStyle(n)):(a.cell._styleChanged=!0,a.cell.background=null,a.cell.color=null,a.cell.fontFamily=null,a.cell.fontSize=null,a.cell._setStyle(n))),a.cell.canNotify=!0,o.canNotify=!0}else t._conditionalFormattingChanged&&!a.cell._styleChanged&&(a.cell.canNotify=!1,o.canNotify=!1,l&&l._changed?(a.cell._styleChanged=!0,a.cell.background=l.background,a.cell.color=l.color,a.cell.fontFamily=l.fontFamily,a.cell.fontSize=l.fontSize,a.cell._setStyle(n)):(a.cell._styleChanged=!0,a.cell.background=null,a.cell.color=null,a.cell.fontFamily=null,a.cell.fontSize=null,a.cell._setStyle(n)),a.cell.canNotify=!0,o.canNotify=!0)}_rotateCellContent(e,t,n){const a=document.createElement("span");return e.innerHTML="",a.innerHTML=n,e.appendChild(a),a.className="rotate",a.style.transform="rotate("+t.cellsRotationAngle+"deg)",this.grid._recycleRotate(e,a,t.cellsAlign,t.cellsVerticalAlign,n)}_getCellAlignment(e,t){const n=e["column_"+t.dataField],a=n&&n.verticalAlign||t.cellsVerticalAlign;let i=n&&n.align||t.cellsAlign;const o={align:"",verticalAlign:""};switch(n.grid.rightToLeft&&("left"===i?i="right":"right"===i&&(i="left")),i){case"left":o.align="align-left";break;case"center":case"middle":o.align="align-center";break;case"right":o.align="align-right"}switch(a){case"top":o.verticalAlign="align-top";break;case"center":case"middle":o.verticalAlign="align-middle";break;case"bottom":o.verticalAlign="align-bottom"}return o}template(){return""}_detach(){this.element=null,this.cell=null}onDetached(){this._detach()}})},8587:()=>{Smart.Utilities.Assign("Grid.Chart",class{_getChartDataFields(e){const t=this,n=e[0];let a,i=!0,o=[];for(let r in n)"$"!==r&&("string"===t.dataSource.dataFields.find(l=>l.name===r).dataType?0===t.columns.findIndex(l=>l.dataField===r)&&(a=r):(i=!1,o.push({dataField:r,displayText:r})));return{xAxisDataField:a,series:o,stringOnly:i}}createChart(e,t){const n=this,a=n.getSelection(),i=a.rows,o=a.columns,r=a.cells,l=document.createElement("smart-chart"),s=[],c={};let u,p=[],g=[];if(r&&r.length>1&&r.forEach(v=>{-1===p.indexOf(v.row.index)&&p.push(v.row.index),-1===g.indexOf(v.dataField)&&g.push(v.dataField)}),t)s.concat(t);else for(let v=0;v<n.dataSource.length;v++){const y={};if(i){if(!i.find(x=>x.row.index===v))continue}else{if(o){o.forEach(x=>{y[x.dataField]=n.dataSource[v][x.dataField]}),s.push(y);continue}if(r&&r.length>1){if(-1===p.indexOf(v))continue;g.forEach(x=>{y[x]=n.dataSource[v][x]}),s.push(y);continue}}n.columns.forEach(x=>y[x.dataField]=n.dataSource[v][x.dataField]),s.push(y)}const b=n._getChartDataFields(s);if(b.stringOnly){if(n.header.visible&&n.$.header.firstElementChild){const v=n.enableShadowDOM?n.shadowRoot.getElementById(e):n.querySelector("#"+e);n.$.header.firstElementChild.classList.add("warning"),v&&v.classList.add("warning"),setTimeout(function(){n.$.header.firstElementChild.classList.remove("warning"),v&&v.classList.remove("warning")},1e3)}}else{if(u=b.series,l.caption="",l.description="",l.clip=!1,l.showLegend=!0,l.showBorderLine=!1,l.padding={left:5,top:10,right:5,bottom:5},l.dataSource=s,l.xAxis={dataField:b.xAxisDataField,gridLines:{visible:!0}},l.valueAxis={displayValueAxis:!0,description:n.charting.description,axisSize:"auto",formatSettings:n.charting.formatSettings},l.colorScheme=n.charting.colorScheme,l.seriesGroups=[c],c.formatSettings=n.charting.formatSettings,c.series=u,"line"===e)u.forEach(function(v){v.symbolSize=8,v.symbolType="square"});else if("pie"===e){const v=u[0].dataField;delete c.formatSettings,c.formatFunction=function(y,x){return isNaN(y)&&"object"==typeof y?x:y},c.showLabels=!0,u.length=0,u.push({dataField:v,displayText:b.xAxisDataField,initialAngle:0})}else if("bar"===e)e="column",c.orientation="horizontal",l.xAxis.textRotationAngle=90,l.valueAxis.textRotationAngle=30,l.valueAxis.flip=!0;else if("area"===e){let v=1;for(let y=0;y<u.length;y++)u[y].opacity=v,v-=.2,v=Math.max(.3,v)}if(c.type=e,n.onChartInit&&n.onChartInit(l),n.charting.appendTo){const v="string"===n.charting.appendTo?document.querySelector(n.charting.appendTo):n.charting.appendTo;v&&v.appendChild(l)}else n._openChartDialog(l,e)}}_openChartDialog(e,t){const n=this;if(!n.charting.dialog.enabled)return!1;const a=n._dialogChart||n._createDialog(n.charting.dialog),i=t.substring(0,1).toUpperCase()+t.substring(1),o="{{message}}"===n.charting.dialog.header?n.localize("dialogChartHeader",{value:i}):n.charting.dialog.header;e.style.width="100%",e.style.height="100%",a.header.innerHTML=o,a.content.innerHTML="",a.content.style.width="100%",a.content.style.height="100%",a.btnCancel.classList.add("smart-hidden"),n._dialogChart||(a.modal=!0,a.onOpen=function(){n.charting.dialog.visible=!0},a.onClose=function(){n.charting.dialog.visible=!1},a.btnConfirm.onclick=function(){a.close()},a.btnClose.onclick=function(){a.close()},a.onkeydown=function(r){"Escape"===r.key&&a.close()},n._dialogChart=a),a.open(),setTimeout(function(){a.btnConfirm.focus(),a.content.appendChild(e)},100)}})},8228:()=>{Smart.Utilities.Assign("Grid.Column",class{constructor(e){const t=this;"string"!=typeof e?Object.assign(t,e):(t.label=e,t.dataField=e),t._state=Object.assign({},e),t.dataType||(t.dataType="string"),t.title||(t.title=""),t.columnGroup||(t.columnGroup=""),t.canNotify=!0,(!e||e&&!e.properties)&&(t.data=e);let n="left";switch(t.dataType){case"string":case"date":n="left";break;case"number":n="right";break;case"boolean":n="center"}t.highlight||(t.highlight=!1),void 0===t.index&&(t.index=-1),void 0===t.visibleIndex&&(t.visibleIndex=-1),void 0===t.selected&&(t.selected=!1),t.label||(t.label=""),t.menuItems||(t.menuItems=null),t.displayField||(t.displayField=t.dataField),t.template||(t.template=""),t.editor||(t.editor="input"),"string"==typeof t.editor?(t.editor={template:t.editor,autoFocus:!0},"number"===t.dataType||"int"===t.dataType||"float"===t.dataType?t.editor.template="numberInput":"date"===t.dataType?t.editor.template="dateInput":"time"===t.dataType?t.editor.template="timeInput":"boolean"===t.dataType&&(t.editor.template="checkBox")):void 0===t.editor.autoFocus&&(t.editor.autoFocus=!0),t.icon||(t.icon="smart-icon-font","textArea"===t.editor.template?t.icon="smart-icon-fontsize":"checkBox"===t.editor.template||"boolean"===t.dataType?t.icon="smart-icon-ok-squared":"numberInput"===t.editor.template||"number"===t.dataType||"int"===t.dataType||"float"===t.dataType?t.icon="smart-icon-number":"dateInput"===t.editor.template||"dateTimePicker"===t.editor.template||"date"===t.dataType?t.icon="smart-icon-calendar":"timeInput"!==t.editor.template&&"time"!==t.dataType||(t.icon="smart-icon-clock")),t.menu=null,void 0===t.allowActionButtonAnimation&&(t.allowActionButtonAnimation=!!t.grid&&t.grid.appearance.allowColumnActionButtonAnimation),void 0===t.allowSortButtonAnimation&&(t.allowSortButtonAnimation=!!t.grid&&t.grid.appearance.allowColumnSortButtonAnimation),void 0===t.autoShowActionButton&&(t.autoShowActionButton=!!t.grid&&t.grid.appearance.autoShowColumnActionButton),void 0===t.autoShowSortButton&&(t.autoShowSortButton=!t.grid||t.grid.appearance.autoShowColumnSortButton),void 0===t.showSortButton&&(t.showSortButton=!!t.grid&&t.grid.appearance.showColumnSortButton),void 0===t.showIcon&&(t.showIcon=!(!t.grid||t.autoGenerated)&&t.grid.appearance.showColumnIcon),void 0===t.showDescriptionButton&&(t.showDescriptionButton=!!t.grid&&t.grid.appearance.showColumnDescriptionButton),void 0===t.showCustomButton&&(t.showCustomButton=!!t.grid&&t.grid.appearance.showColumnCustomButton),void 0===t.showActionButton&&(t.showActionButton=!!t.grid&&t.grid.appearance.showColumnActionButton),void 0===t.allowLabelAnimation&&(t.allowLabelAnimation=!!t.grid&&t.grid.appearance.allowColumnLabelAnimation),void 0===t.autoShowFilterButton&&(t.autoShowFilterButton=!!t.grid&&t.grid.appearance.autoShowColumnFilterButton),void 0===t.showFilterButton&&(t.showFilterButton=!!t.grid&&t.grid.appearance.showColumnFilterButton),void 0===t.autoCloseMenu&&(t.autoCloseMenu=!t.grid||t.grid.columnMenu.autoClose),void 0===t.allowNull&&(t.allowNull=!0),t.formatFunction||(t.formatFunction=null),t.sortOrder||(t.sortOrder=null),t.sortIndex||(t.sortIndex=null),t.filter||(t.filter=null),t.className||(t.className=""),t.cellsClassName||(t.cellsClassName=""),t.filterMenuMode||(t.filterMenuMode="default",t.grid&&"excel"===t.grid.filtering.filterMenu.mode&&(t.filterMenuMode="excel"),t.autoGenerated&&(t.filterMenuMode="none")),t.align||(t.align=n),t.cellsAlign||(t.cellsAlign=n),t.cellsWrap||(t.cellsWrap=!1,t.grid&&t.grid.layout.allowCellsWrap&&(t.cellsWrap=t.grid.layout.allowCellsWrap)),t.minWidth||(t.minWidth=30),t.width||(t.width=null),t.grid&&t.grid.columnWidth&&(t.width=t.grid.columnWidth),void 0===t.visible&&(t.visible=!0),void 0===t.allowResize&&(t.allowResize=!0),void 0===t.allowReorder&&(t.allowReorder=!0),void 0===t.allowHide&&(t.allowHide=!0),void 0===t.allowSort&&(t.allowSort=!0),void 0===t.allowSelect&&(t.allowSelect=!0),void 0===t.allowSortToggleOnClick&&(t.allowSortToggleOnClick=!0),void 0===t.allowGroup&&(t.allowGroup=!0),void 0===t.allowFilter&&(t.allowFilter=!0),void 0===t.allowEdit&&(t.allowEdit=!0),void 0===t.allowHeaderEdit&&(t.allowHeaderEdit=!0),void 0===t.allowExport&&(t.allowExport=!0),void 0===t.description&&(t.description=""),void 0===t.group&&(t.group=!1),t.summary||(t.summary=[]),"false"===t.freeze&&(t.freeze=!1),"true"===t.freeze&&(t.freeze=!0),t.formatSettings||(t.formatSettings={decimalPlaces:null,decimalSeparator:null,negativeWithBrackets:null,prefix:null,sufix:null,thousandsSeparator:null,dateFormat:"d"}),this.validationRules||(this.validationRules=[]),t.selected=!1,t.sorted=!1,t.filtered=!1,t.parent=null,t.children=[]}refresh(){this.element&&this.element._refresh()}render(){const e=this;e.element.column=e,e.element&&e.element._render()}getState(){const e=this;e._state||(e._state={label:e.label,dataField:e.dataField,dataType:e.dataType});const t={};for(let n in e._state)"computedWidth"===n||"computedHeight"===n||"left"===n||"top"===n||"level"===n||"parent"===n||"menu"===n||"index"===n||n.startsWith("_")||"element"===n||"grid"===n||"groups"===n&&(!e._state[n]||e._state[n]&&0===e._state[n].length)||(t[n]=e._state[n]);return t}setProperty(e,t){const n=this,a=n.getProperty(e);a!==t&&(n.canNotify=!1,n[e]=t,n.propertyChanged(e,a,t),n.canNotify=!0)}getProperty(e){const t=this;if("selected"===e){let n=!1;return t.grid._selection.cells["column"+t.dataField]&&(n=null),t.grid&&t.grid._selection.columns[t.dataField]&&(n=!0),t.grid.columns.canNotify=!1,t[e]=n,t.grid.columns.canNotify=!0,n}return"group"===e?!(!t.dataSource||!t.dataSource.groupBy)&&t.dataSource.groupBy.indexOf(t.dataField)>=0:t[e]}get properties(){return["allowExport","allowNull","allowGroup","allowSelect","verticalAlign","columnGroup","cellsVerticalAlign","autoCloseMenu","autoShowActionButton","autoShowSortButton","autoShowFilterButton","allowLabelAnimation","allowActionButtonAnimation","allowSortButtonAnimation","allowHide","allowEdit","allowHeaderEdit","allowFilter","allowSort","allowSortToggleOnClick","allowResize","allowReorder","canNotify","data","description","grid","icon","menuItems","menu","summary","cellsFormat","className","cellsClassName","formatSettings","formatFunction","index","sortIndex","sortOrder","sorted","groups","element","level","group","filtered","filterEditor","filter","filterMenuMode","dataField","displayField","label","dataType","align","cellsWrap","cellsAlign","minWidth","width","visible","freeze","showActionButton","selected","showIcon","highlight","showDescriptionButton","treeColumn","computedWidth","computedHeight","overflowWidth","parent","children","value","thHierarchy","valueField","onAction","left","top","title","showCustomButton","showFilterButton","showSortButton","editor","template","visibleIndex","validationRules"]}propertyChanged(e,t,n){const a=this;if(a.data&&void 0!==a.data[e]&&(a.data[e]=n),a._state&&n!==t&&(a._state[e]=n),"highlight"!==e)if("className"!==e)if("editor"!==e)if("allowSort"!==e&&"allowFilter"!==e)if("showIcon"!==e)if("visible"!==e){if("showCustomButton"===e&&(n?a.element._showCustomButton():a.element._hideCustomButton()),"showDescriptionButton"===e)return n?a.element._showDescriptionButton():a.element._hideDescriptionButton(),void a.refresh();if("description"!==e){if("filter"===e&&(a.filter?(a.grid.addFilter(a.dataField,a.filter),a.filtered=!0):(a.grid.removeFilter(a.dataField),a.filtered=!1),(a.autoShowFilterButton||a.showFilterButton)&&(n?a.element._showFilterButton():a.element._hideFilterButton())),"sortIndex"===e)return"many"===a.grid.sorting.mode&&a.grid.context===document&&a.grid.sortBy(a.dataField,a.sortOrder),null!==a.sortIndex?a.element.setAttribute("sort-index",a.sortIndex):a.element.removeAttribute("sort-index"),void a.element._updateSortOrder();if("selected"===e){if(!1===a.allowSelect)return;a.selectionColumn&&a.refresh(),n?a.grid._selection.columns[a.dataField]||(a.grid._selection.columns[a.dataField]=!0):!1===n&&a.grid._selection.columns[a.dataField]&&delete a.grid._selection.columns[a.dataField],a.grid._recycle(!1)}if("formatSettings"===e&&a.grid._recycle(!1),"sortOrder"===e)return a.sorted=!1,null===n?a.element._hideSortButton():(a.element._showSortButton(),a.sorted=!0),a.grid.context===document&&a.grid.sortBy(a.dataField,a.sortOrder),void(a.sorted?a.element.setAttribute("aria-sort","asc"===a.sortOrder?"ascending":"descenting"):(a.element.removeAttribute("aria-sort"),a.element.removeAttribute("sort-index")));if("group"!==e){if("showActionButton"===e&&(a.element.allowAnimations=!1,n?a.element._showActionButton():a.element._hideActionButton(),a.element.allowAnimations=!0),"autoShowActionButton"===e&&(a.element.allowAnimations=!1,n?a.element._hideActionButton():a.element._showActionButton(),a.element.allowAnimations=!0),"showFilterButton"===e&&(a.element.allowAnimations=!1,void 0===a._autoShowFilterButton&&(a._autoShowFilterButton=a.autoShowFilterButton),n?(a.autoShowFilterButton=!1,a.element._showFilterButton()):(a.element._hideFilterButton(),a.autoShowFilterButton=a._autoShowFilterButton),a.element.allowAnimations=!0),"showSortButton"===e&&(a.element.allowAnimations=!1,void 0===a._autoShowSortButton&&(a._autoShowSortButton=a.autoShowSortButton),n?(a.autoShowSortButton=!1,a.element._showSortButton()):(a.element._hideSortButton(),a.autoShowSortButton=a._autoShowSortButton),a.element.allowAnimations=!0),"autoShowSortButton"===e&&(a.element.allowAnimations=!1,a._autoShowSortButton=a.autoShowSortButton,n?a.element._hideSortButton():a.element._showSortButton(),a.element.allowAnimations=!0),"menu"===e&&(n?a.element.setAttribute("aria-controls",a.menu.id):(a.element.removeAttribute("aria-controls"),a.autoShowActionButton&&a.element._hideActionButton())),"cellsFormat"!==e&&"formatSettings"!==e&&"dataField"!==e&&"displayField"!==e||a.grid._recycle(),"label"!==e&&"width"!==e&&"minWidth"!==e||a.grid.refresh(),"freeze"===e){const i=()=>{const o=a.grid.context;a.grid.context=a.grid,a.grid._renderColumns(),a.grid.refresh(),a.grid.context=o};if(a.grid.columnGroups&&a.grid.columnGroups.length>0&&a.columnGroup)return void i();i()}}else a.grid.context===document&&(n?a.grid.addGroup(a.dataField):a.grid.removeGroup(a.dataField))}else a.refresh()}else a.grid.refresh(a.grid.grouping.enabled);else a.refresh();else a.refresh();else a._editorId="_"+Math.floor(65536*(1+Math.random())).toString(16).substring(1);else a.refresh();else this.refresh()}_measureSize(e){const t=this.grid,n=function(){const a=[],i=document.createElement("div"),o=document.createElement("div"),r=Array.isArray(e)?e:[e];o.classList.add("smart-label"),i.appendChild(o),i.style.width="auto",i.style.position="static",t.$.columnHeader.appendChild(i);for(let l=0;l<r.length;l++){o.innerHTML="<span>"+r[l]+"</span>";const c=Math.max(30,20+o.firstChild.offsetWidth);a.push(c)}return t.$.columnHeader.removeChild(i),a}();return 1===n.length?n[0]:n}_autoSize(e){const t=this,n=t.grid;let a=t.label.toString();if(!e){const i=n.isInitialized?n._recyclingRows:[];for(let o=0;o<i.length;o++){const r=""+i[o].data[t.dataField];r&&r.length>a.length&&(a=r)}}return t._measureSize(a)}autoSize(e){const t=this._autoSize(e);this.width=t}createElement(){const e=this,t=document.createElement("smart-grid-column");return t._initialize(e),t.setAttribute("role","columnheader"),t.setAttribute("aria-haspopup",""),e.element=t,e.grid.notify(function(n,a,i){switch(n){case"appearance_allowColumnLabelAnimation":e.setProperty("allowLabelAnimation",i);break;case"appearance_allowColumnSortAnimation":e.setProperty("allowSortAnimation",i);break;case"appearance_allowColumnSortButtonAnimation":e.setProperty("allowSortButtonAnimation",i);break;case"appearance_allowColumnActionButtonAnimation":e.setProperty("allowActionButtonAnimation",i);break;case"appearance_allowColumnFilterButtonAnimation":e.setProperty("allowFilterButtonAnimation",i);break;case"appearance_autoShowColumnActionButton":e.setProperty("autoShowActionButton",i);break;case"appearance_autoShowColumnSortButton":e.setProperty("autoShowSortButton",i);break;case"appearance_autoShowColumnFilterButton":e.setProperty("autoShowFilterButton",i);break;case"appearance_showColumnActionButton":e.setProperty("showActionButton",i);break;case"appearance_showColumnFilterButton":e.setProperty("showFilterButton",i);break;case"appearance_showColumnCustomButton":e.setProperty("showCustomButton",i);break;case"appearance_showColumnDescriptionButton":e.setProperty("showDescriptionButton",i);break;case"appearance_showColumnSortButton":e.setProperty("showSortButton",i);break;case"appearance_showFrozenColumnBackground":case"appearance_showSortColumnBackground":case"appearance_showFilterColumnBackground":e.grid._recycle(!1)}}),t}}),Smart("smart-grid-column",class extends Smart.BaseElement{_showSortButton(e){const t=this;t.column&&(t.column.autoGenerated||(t.sortButton.classList.remove("asc"),t.sortButton.classList.remove("desc"),t.column.autoShowSortButton||t.column.allowSort&&t.sortButton.classList.add("smart-icon-sort","smart-grid-icon"),"asc"===t.column.sortOrder?t.sortButton.classList.add("asc"):"desc"===t.column.sortOrder&&t.sortButton.classList.add("desc"),t.column.showSortButton&&(t.sortButton.classList.add("show"),!1!==e&&t._refresh()),null!==t.column.sortIndex?t.sortButton.setAttribute("order",1+t.column.sortIndex):t.sortButton.removeAttribute("order")))}_updateSortOrder(){const e=this;null!==e.column.sortIndex?(e.setAttribute("sort-index",e.column.sortIndex),e.sortButton.setAttribute("order",1+e.column.sortIndex)):(e.removeAttribute("sort-index"),e.sortButton.removeAttribute("order"))}_hideSortButton(e){const t=this;t.column&&(t.sortButton.classList.remove("asc"),t.sortButton.classList.remove("desc"),t.sortButton.removeAttribute("order"),t.column.showSortButton&&!t.column.autoShowSortButton||(t.sortButton.classList.remove("show"),t.sortButton.classList.remove("smart-icon-sort"),!1!==e&&t._refresh()))}_showFilterButton(){const e=this;e.column&&!e.column.autoGenerated&&(e.filterButton.classList.add("show"),e._refresh())}_hideFilterButton(){const e=this;e.column&&(e.filterButton.classList.remove("show"),e._refresh())}_showDescriptionButton(){const e=this;e.column&&!e.column.autoGenerated&&(e.hasAttribute("columnHeader")||(e.column.description?(e.descriptionButton.setAttribute("title",e.column.description),e.descriptionButton.classList.add("show")):e.descriptionButton.classList.remove("show"),e._refresh()))}_hideDescriptionButton(){const e=this;e.column&&(e.descriptionButton.classList.remove("show"),e._refresh())}_showIcon(){const e=this;e.column&&!e.column.autoGenerated&&(e.icon.classList.add("show"),e._refresh())}_hideIcon(){this.icon.classList.remove("show"),this._refresh()}_showCustomButton(){const e=this;e.column&&!e.column.autoGenerated&&(e.customButton.classList.add("show"),e._refresh())}_hideCustomButton(){const e=this;e.column&&(e.customButton.classList.remove("show"),e._refresh())}_showActionButton(){const e=this;e.column&&e.column.showActionButton&&e.column.grid.hasColumnMenu(e.column)&&!e.column.autoGenerated&&e.actionButton&&(e.actionButton.classList.add("show"),e._refresh())}_hideActionButton(){const e=this;e.column&&e.column.showActionButton&&e.actionButton&&!e.hasAttribute("aria-controls")&&e.actionButton.classList.contains("show")&&(e.actionButton.classList.remove("show"),e._refresh())}_rotate(){const e=this,t=document.createElement("span");return e.label.innerHTML="",t.innerHTML=e.column.label,e.label.appendChild(t),t.className="rotate",t.style.transform="rotate("+e.column.rotationAngle+"deg)",e.column.grid._recycleRotate(e.label,t,e.column.align,e.column.verticalAlign,e.column.label)}_align(){const e=this;let t=e.column.align;switch(e.column.grid.rightToLeft&&("left"===t?t="right":"right"===t&&(t="left")),t){case"left":e.label.classList.add("align-left");break;case"center":e.label.classList.add("align-center");break;case"right":e.label.classList.add("align-right")}switch(e.column.verticalAlign){case"top":e.label.classList.add("align-top");break;case"middle":e.label.classList.add("align-middle");break;case"bottom":e.label.classList.add("align-bottom")}}_refresh(){const e=this,t=e.column.grid;if(e.sortButton.classList.remove("filter"),e.sortButton.classList.remove("action"),e.label.className="smart-label",e.column.className&&(e.label.firstElementChild.className+=" "+e.column.className),e.descriptionButton&&e.descriptionButton.setAttribute("title",e.column.description),!0===e.column.autoGenerated||e.hasAttribute("columnHeader")||(e.column.showDescriptionButton&&e.column.description?e.descriptionButton.classList.add("show"):e.descriptionButton.classList.remove("show")),e.column.highlight?e.setAttribute("highlight",""):e.removeAttribute("highlight"),e.column.visible&&"_checkBoxColumn"===e.column.dataField){const i=e.column.grid;let o=i.getVisibleRows();i.paging.enabled&&"page"===i.selection.checkBoxes.selectAllMode&&(o=o.slice(i.paging.pageIndex*i.paging.pageSize,(i.paging.pageIndex+1)*i.paging.pageSize));const r=i._getSelectedRows(!0,!(!i.paging.enabled||"page"!==i.selection.checkBoxes.selectAllMode));return i.selection.checkBoxes.autoShow?e.setAttribute("auto-show",""):e.removeAttribute("auto-show"),r.length>0&&r.length===o.length?e.setAttribute("selected",""):r.length>0&&r.length<o.length?e.setAttribute("selected","indeterminate"):0!==r.length&&0!==o.length||e.removeAttribute("selected"),e.removeAttribute("checkbox"),e.label.classList.remove("smart-input"),void("none"!==i.selection.checkBoxes.selectAllMode&&(e.setAttribute("checkbox",""),e.label.classList.add("smart-input")))}if("_rowHeaderColumn"===this.column.dataField){const i=e.column.grid;if(i.selection.enabled&&i.selection.allowRowHeaderSelection&&i.appearance.showRowHeaderSelectIcon){let o='<div class="smart-grid-command-item">',r=i.areAllRowsSelected()?"smart-icon-check-squared":"smart-icon-check-empty";i.isEmpty()&&(r=""),o+='<span class="smart-grid-icon '+r+'"></span>',o+="</div>",e.label.style.paddingLeft="0px",e.label.style.paddingRight="0px",e.label.innerHTML=o}}if("_commandColumn"===e.column.dataField){const i=e.column.grid,o="icon"!==i.editing.commandColumn.displayMode,r="label"!==i.editing.commandColumn.displayMode,l=i.editing.commandColumn.dataSource.commandColumnMenu;let s='<div class="smart-grid-command-item">';const c="{{messages}}"===l.label?i.localize("commandColumnMenu"):l.label,u=l.icon;r&&o?(s+='<span class="smart-grid-icon '+u+'"></span>',s+='<span class="smart-grid-label">'+c+"</span>"):r&&!o?s+='<span class="smart-grid-icon '+u+'"></span>':o&&!r&&(s+='<span class="smart-grid-label">'+c+"</span>"),s+="</div>",l.visible&&(e.label.innerHTML=s)}const n=e.column.getProperty("selected");!1===n&&e.hasAttribute("selected")?e.removeAttribute("selected"):!0===n?e.setAttribute("selected",""):null===n&&e.setAttribute("selected","indeterminate"),e.column.allowSortButtonAnimation?e.sortButton.classList.add("smart-animate"):e.sortButton.classList.remove("smart-animate"),t.dragDrop&&t.dragDrop.column===e.column?e.classList.add("dragged"):e.classList.remove("dragged"),e.column.sorted?e._showSortButton(!1):e._hideSortButton(!1),e.column.sorted?(e.setAttribute("aria-sort","asc"===e.column.sortOrder?"ascending":"descenting"),e._updateSortOrder()):(e.removeAttribute("aria-sort"),e.removeAttribute("sort-index")),e.column.allowFilterButtonAnimation?e.filterButton.classList.add("smart-animate"):e.filterButton.classList.remove("smart-animate"),e.column.allowActionButtonAnimation&&!1!==e.allowAnimations?e.buttonsGroup.classList.add("smart-animate"):e.buttonsGroup.classList.remove("smart-animate"),e.column.allowLabelAnimation&&!1!==e.allowAnimations?e.label.classList.add("smart-animate"):e.label.classList.remove("smart-animate"),e.buttonsGroup.classList.remove("action"),e.actionButton.classList.contains("show")&&e.buttonsGroup.classList.add("action"),e.column.showIcon?e.icon.classList.add("show"):e.icon.classList.remove("show"),e.icon.classList.contains("show")&&(e.icon.className="smart-grid-icon show",e.icon.classList.add(e.column.icon));let a=e.column.showIcon?1:0;for(let i=0;i<e.buttonsGroup.children.length;i++)e.buttonsGroup.children[i].classList.contains("show")&&a++;switch(a){case 1:e.label.classList.add("one");break;case 2:e.label.classList.add("two");break;case 3:e.label.classList.add("three");break;case 4:e.label.classList.add("four");break;case 5:e.label.classList.add("five");break;case 6:e.label.classList.add("six")}e.classList.remove("smart-visibility-hidden"),e.column.grid._columnGap>0?e.classList.add("smart-grid-column-border"):e.classList.remove("smart-grid-column-border"),e.column.grid.appearance.showColumnHeaderLines?e.classList.remove("smart-grid-vertical-border-collapse"):e.classList.add("smart-grid-vertical-border-collapse"),(!e.column.rotationAngle||e._rotate())&&e._align()}_render(){const e=this,t=e.column.dataField?e.column.dataField:"",n=e.column===e.column.grid._lastVisibleColumn;e.label.firstChild?e.label.firstChild.textContent!==e.column.label&&(e.label.firstChild.textContent=e.column.label):e.label.innerHTML="<span>"+e.column.label+"</span>",e.column.title?e.setAttribute("title",e.column.title):e.removeAttribute("title"),e._refresh(),e.style.width=e.column.autoGenerated||n?e.column.computedWidth+"px":e.column.computedWidth-e.column.grid._columnGap+"px",e.style.height!==e.column.computedHeight+"px"&&(e.style.height=e.column.computedHeight+"px"),e.style.lineHeight!==e.column.computedHeight+"px"&&(e.style.lineHeight=e.column.computedHeight+"px"),e.column.grid.rightToLeft?e.style.right!==e.column.left+"px"&&(e.style.right=e.column.left+"px"):e.style.left!==e.column.left+"px"&&(e.style.left=e.column.left+"px"),e.style.top!==e.column.top+"px"&&(e.style.top=e.column.top+"px"),e.getAttribute("data-field")!==t&&e.setAttribute("data-field",t),e.setAttribute("header",""),e.column.freeze&&e.setAttribute("freeze",""),e.column.level>0&&(e.style.top=e.column.top+"px")}get hasStyleObserver(){return!1}get enableShadowDOM(){return!1}addThemeClass(){}addDefaultClass(){}get isUtilityElement(){return!0}_initialize(e){const t=this,n=document.createElement("div"),a=document.createElement("div"),i=document.createElement("div"),o=document.createElement("div"),r=document.createElement("div"),l=document.createElement("div"),s=document.createElement("div"),c=document.createElement("div");t.column=e,t.classList.add("smart-visibility-hidden"),s.classList.add("smart-icon","smart-grid-icon"),n.classList.add("smart-label"),a.classList.add("smart-sort-button","smart-grid-icon"),i.classList.add("smart-filter-button","smart-icon-filter","smart-grid-icon"),o.classList.add("smart-action-button","smart-grid-icon"),o.setAttribute("aria-haspopup",""),r.classList.add("smart-description-button","smart-icon-help-circled","smart-grid-icon"),l.classList.add("smart-custom-button",e.customButtonIcon?e.customButtonIcon:"smart-icon-tools","smart-grid-icon"),c.classList.add("smart-buttons-group"),o.innerHTML="<div></div>",t.style.width=t.column.computedWidth+"px",t.appendChild(s),t.appendChild(n),t.appendChild(c),c.appendChild(a),c.appendChild(i),c.appendChild(r),c.appendChild(l),c.appendChild(o),t.icon=s,t.label=n,t.sortButton=a,t.filterButton=i,t.actionButton=o,t.descriptionButton=r,t.customButton=l,t.buttonsGroup=c,t._properties=[];const u=window.PointerEvent?"pointerdown":"mousedown",p=window.PointerEvent?"pointerup":"mouseup";t._filterDownEvent=function(g){g.preventDefault(),g.stopPropagation(),t.column.onAction&&t.column.onAction(g)}.bind(t),t._filterUpEvent=function(g){g.preventDefault(),g.stopPropagation()},t._actionUpEvent=function(g){g.preventDefault(),g.stopPropagation()},t._actionDownEvent=function(g){g.preventDefault(),g.stopPropagation(),t.column.onAction&&t.column.onAction(g)}.bind(t),t.filterButton.addEventListener(u,t._filterDownEvent),t.filterButton.addEventListener(p,t._filterUpEvent),t.actionButton.addEventListener(p,t._actionUpEvent),t.actionButton.addEventListener(u,t._actionDownEvent),!t.column.autoShowActionButton&&t.column.showActionButton&&t._showActionButton(),!t.column.autoShowSortButton&&t.column.showSortButton&&t._showSortButton(),!t.column.autoShowFilterButton&&t.column.showFilterButton&&t._showFilterButton(),t.column.showDescriptionButton&&t._showDescriptionButton(),t.column.showCustomButton&&t._showCustomButton(),t.column.showIcon&&t._showIcon(),"_rowHeaderColumn"===t.column.dataField&&t.classList.add("top-near-corner"),t.customButton.onclick=function(g){t.column.onCustomButtonClick&&t.column.onCustomButtonClick(g)}.bind(t),t.column.sorted?(t.setAttribute("aria-sort","asc"===t.column.sortOrder?"ascending":"descenting"),t._updateSortOrder()):(t.removeAttribute("aria-sort"),t.removeAttribute("sort-index")),t._properties=[]}template(){return""}_detach(){const e=this,t=window.PointerEvent?"pointerdown":"mousedown",n=window.PointerEvent?"pointerup":"mouseup";e.filterButton.removeEventListener(t,e._filterDownEven),e.filterButton.removeEventListener(n,e._filterUpEvent),e.actionButton.removeEventListener(n,e._actionUpEvent),e.actionButton.removeEventListener(t,e._actionDownEvent),e.element=null,e.column&&(e.column.grid=null,e.column.element=null),e.icon=null,e.label=null,e.sortButton=null,e.filterButton=null,e.actionButton=null,e.descriptionButton=null,e.customButton=null,e.buttonsGroup=null,e.column=null,delete e.grid,delete e.column,delete e.icon,delete e.label,delete e.sortButton,delete e.filterButton,delete e.actionButton,delete e.descriptionButton,delete e.customButton,delete e.buttonsGroup}onDetached(){this._detach()}})},5306:()=>{Smart("smart-grid",class extends Smart.ScrollViewer{static get properties(){return{appearance:{value:{allowColumnFixing:{value:!1,type:"boolean"},alternationStart:{value:0,type:"int"},alternationEnd:{value:0,type:"int"},alternationCount:{value:0,type:"int"},allowHover:{value:!1,type:"boolean",defaultReflectToAttribute:!0},allowHeaderHover:{value:!0,type:"boolean",defaultReflectToAttribute:!0},allowRowToggleAnimation:{value:!1,type:"boolean"},allowRowDetailToggleAnimation:{value:!1,type:"boolean"},allowSortAnimation:{value:!1,type:"boolean"},allowColumnLabelAnimation:{value:!0,type:"boolean"},allowCheckBoxesSelectionAnimation:{value:!0,type:"boolean"},allowColumnMenuAnimation:{value:!0,type:"boolean"},allowColumnSortButtonAnimation:{value:!0,type:"boolean"},allowColumnActionButtonAnimation:{value:!0,type:"boolean"},allowColumnFilterButtonAnimation:{value:!0,type:"boolean"},allowColumnStickyPosition:{value:!1,type:"boolean"},autoShowColumnSortButton:{value:!0,type:"boolean"},autoShowColumnActionButton:{value:!0,type:"boolean"},autoGenerateRowLabelMode:{value:"number",type:"string"},autoGenerateColumnLabelMode:{value:"letter",type:"string"},autoShowColumnFilterButton:{value:!0,type:"boolean"},displayLoadingIndicator:{value:!1,type:"boolean"},loadingIndicatorPlaceholder:{value:"Loading...",type:"string"},placeholder:{value:"No Rows",type:"string"},sortAnimationDuration:{value:500,type:"number"},showRowHeader:{value:!1,type:"boolean"},showRowStatus:{value:!1,type:"boolean"},showRowHeaderNumber:{value:!1,type:"boolean"},showRowHeaderEditIcon:{value:!0,type:"boolean",defaultReflectToAttribute:!0},showRowHeaderDragIcon:{value:!1,type:"boolean"},showRowHeaderSelectIcon:{value:!1,type:"boolean"},showRowHeaderFocusIcon:{value:!1,type:"boolean"},showColumnHeaderLines:{value:!0,type:"boolean",defaultReflectToAttribute:!0},showColumnLines:{value:!0,type:"boolean",defaultReflectToAttribute:!0},showRowLines:{value:!0,type:"boolean",defaultReflectToAttribute:!0},showFilterColumnBackground:{value:!0,type:"boolean"},showSortColumnBackground:{value:!0,type:"boolean"},showFrozenColumnBackground:{value:!0,type:"boolean"},showFrozenRowBackground:{value:!0,type:"boolean"},showColumnSortButton:{value:!0,type:"boolean"},showColumnFilterButton:{value:!0,type:"boolean"},showColumnDescriptionButton:{value:!1,type:"boolean"},showColumnIcon:{value:!1,type:"boolean"},showColumnCustomButton:{value:!1,type:"boolean"},showColumnActionButton:{value:!0,type:"boolean"},showTooltips:{value:!1,type:"boolean"},showResizeTooltips:{value:!0,type:"boolean"},showHorizontalScrollBarOnFixedColumns:{value:!1,type:"boolean"},showVerticalScrollBarOnFixedColumns:{value:!1,type:"boolean"}},type:"object"},behavior:{value:{allowColumnAutoSizeOnDoubleClick:{value:!0,type:"boolean"},allowRowAutoSizeOnDoubleClick:{value:!0,type:"boolean"},allowColumnReorder:{value:!1,type:"boolean"},allowRowReorder:{value:!1,type:"boolean"},doubleClickTimingDelay:{value:300,type:"number"},columnResizeMode:{value:"none",type:"string",allowedValues:["none","split","growAndShrink"]},rowResizeMode:{value:"none",type:"string",allowedValues:["none","split","growAndShrink"]}},type:"object"},layout:{value:{allowCellsWrap:{value:!1,type:"boolean"},allowCellsWrapShortcut:{value:!0,type:"boolean"},autoGenerateColumnWidth:{value:null,type:"number?"},columnWidth:{value:null,type:"any",reflectToAttribute:!1},columnHeight:{value:null,type:"any",reflectToAttribute:!1},columnMinHeight:{value:30,type:"any",reflectToAttribute:!1},isDirty:{value:!1,type:"boolean"},loadingIndicatorPosition:{value:"center",allowedValues:["bottom","center","top"],type:"string"},rowMinHeight:{value:30,type:"number"},rowHeight:{value:null,type:"any",reflectToAttribute:!1}},type:"object"},dataExport:{value:{header:{value:!0,type:"boolean"},filterBy:{value:null,type:"object"},groupBy:{value:null,type:"object"},style:{value:null,type:"object"},fileName:{value:"smartGrid",type:"string?"},pageOrientation:{value:"portrait",type:"string"},expandChar:{value:"+",type:"string"},collapseChar:{value:"-",type:"string"},view:{value:!1,type:"boolean"},viewStart:{value:null,type:"number?"},viewEnd:{value:null,type:"number?"},rowIds:{value:null,type:"array?"}},type:"object"},clipboard:{value:{enabled:{value:!0,type:"boolean"},autoFillMode:{value:"copy",allowedValues:["none","copy","fillSeries"],type:"string"},onPasteValue:{value:null,type:"any"}},type:"object"},conditionalFormatting:{value:null,type:"array?",reflectToAttribute:!1},columns:{value:[],type:"any",reflectToAttribute:!1},columnMenu:{value:{autoClose:{value:!0,type:"boolean"},dataSource:{value:{columnMenuCustomizeType:{value:{command:{value:"customizeTypeCommand",type:"any"},enabled:{value:!0,type:"boolean"},visible:{value:!1,type:"any"},icon:{value:"smart-icon-ellipsis-vert",type:"string"},label:{value:"{{messages}}",type:"string"}},type:"object",reflectToAttribute:!1},columnMenuItemRename:{value:{command:{value:"renameCommand",type:"any"},enabled:{value:!0,type:"boolean"},visible:{value:!1,type:"any"},icon:{value:"smart-icon-mode-edit",type:"string"},label:{value:"{{messages}}",type:"string"}},type:"object",reflectToAttribute:!1},columnMenuItemEditDescription:{value:{command:{value:"editDescriptionCommand",type:"any"},enabled:{value:!0,type:"boolean"},visible:{value:!1,type:"any"},icon:{value:"smart-icon-help-circled",type:"string"},label:{value:"{{messages}}",type:"string"}},type:"object",reflectToAttribute:!1},columnMenuItemDuplicate:{value:{command:{value:"duplicateCommand",type:"any"},enabled:{value:!0,type:"boolean"},visible:{value:!1,type:"any"},icon:{value:"smart-icon-duplicate",type:"string"},label:{value:"{{messages}}",type:"string"}},type:"object",reflectToAttribute:!1},columnMenuItemInsertLeft:{value:{command:{value:"insertLeftCommand",type:"any"},enabled:{value:!0,type:"boolean"},visible:{value:!1,type:"any"},icon:{value:"smart-icon-insert-left",type:"string"},label:{value:"{{messages}}",type:"string"}},type:"object",reflectToAttribute:!1},columnMenuItemInsertRight:{value:{command:{value:"insertRightCommand",type:"any"},enabled:{value:!0,type:"boolean"},visible:{value:!1,type:"any"},icon:{value:"smart-icon-insert-right",type:"string"},label:{value:"{{messages}}",type:"string"}},type:"object",reflectToAttribute:!1},columnMenuItemSortAsc:{value:{command:{value:"sortAscCommand",type:"any"},enabled:{value:!0,type:"boolean"},visible:{value:"auto",type:"any"},icon:{value:"smart-icon-sort-name-up",type:"string"},iconAlt:{value:"smart-icon-sort-number-up",type:"string"},label:{value:"{{messages}}",type:"string"}},type:"object",reflectToAttribute:!1},columnMenuItemSortDesc:{value:{command:{value:"sortDescCommand",type:"any"},enabled:{value:!0,type:"boolean"},visible:{value:"auto",type:"any"},icon:{value:"smart-icon-sort-name-down",type:"string"},iconAlt:{value:"smart-icon-sort-number-down",type:"string"},label:{value:"{{messages}}",type:"string"}},type:"object",reflectToAttribute:!1},columnMenuItemRemoveSort:{value:{command:{value:"removeSortCommand",type:"any"},enabled:{value:!0,type:"boolean"},visible:{value:"auto",type:"any"},icon:{value:"smart-icon-cancel-circled",type:"string"},label:{value:"{{messages}}",type:"string"}},type:"object",reflectToAttribute:!1},columnMenuItemFilter:{value:{command:{value:"addFilterCommand",type:"any"},enabled:{value:!0,type:"boolean"},visible:{value:"auto",type:"any"},icon:{value:"smart-icon-add-filter",type:"string"},label:{value:"{{messages}}",type:"string"}},type:"object",reflectToAttribute:!1},columnMenuItemRemoveFilter:{value:{command:{value:"removeFilterCommand",type:"any"},enabled:{value:!0,type:"boolean"},visible:{value:"auto",type:"any"},icon:{value:"smart-icon-cancel-circled",type:"string"},label:{value:"{{messages}}",type:"string"}},type:"object",reflectToAttribute:!1},columnMenuItemGroupBy:{value:{command:{value:"groupByCommand",type:"any"},enabled:{value:!0,type:"boolean"},visible:{value:"auto",type:"any"},icon:{value:"smart-icon-group",type:"string"},label:{value:"{{messages}}",type:"string"}},type:"object",reflectToAttribute:!1},columnMenuItemRemoveGroupBy:{value:{command:{value:"removeGroupByCommand",type:"any"},enabled:{value:!0,type:"boolean"},visible:{value:"auto",type:"any"},icon:{value:"smart-icon-ungroup",type:"string"},label:{value:"{{messages}}",type:"string"}},type:"object",reflectToAttribute:!1},columnMenuItemHide:{value:{command:{value:"hideColumnCommand",type:"any"},enabled:{value:!0,type:"boolean"},visible:{value:!1,type:"any"},icon:{value:"smart-icon-visibility-off",type:"string"},label:{value:"{{messages}}",type:"string"}},type:"object",reflectToAttribute:!1},columnMenuItemDelete:{value:{command:{value:"deleteColumnCommand",type:"any"},enabled:{value:!0,type:"boolean"},visible:{value:!1,type:"any"},icon:{value:"smart-icon-delete",type:"string"},label:{value:"{{messages}}",type:"string"}},type:"object",reflectToAttribute:!1}},type:"object",reflectToAttribute:!1},visible:{value:!1,type:"boolean"},enabled:{value:!0,type:"boolean"},width:{value:250,type:"number"},height:{value:null,type:"number?"}},type:"object",reflectToAttribute:!1},columnGroups:{value:[],type:"array",reflectToAttribute:!1},charting:{value:{appendTo:{value:null,type:"any"},enabled:{value:!1,type:"boolean"},colorScheme:{value:"scheme01",type:"string"},description:{value:"",type:"string"},dialog:{value:{header:{value:"{{message}}",type:"string"},height:{value:400,type:"any"},width:{value:400,type:"any"},left:{value:"center",type:"any"},top:{value:"center",type:"any"},enabled:{value:!0,type:"boolean"},visible:{value:!1,type:"boolean"}},type:"object"},formatSettings:{value:{},type:"object"}},type:"object"},currentUser:{value:null,type:"any"},dataSource:{value:null,type:"any",reflectToAttribute:!1},dataSourceSettings:{value:{autoGenerateColumns:{value:!1,type:"boolean"},sanitizeHTML:{value:"blackList",allowedValues:["all","blackList","none"],type:"string"},root:{value:"",type:"string"},record:{value:"",type:"string"},keyDataField:{value:"",type:"string"},parentDataField:{value:"",type:"string"},childrenDataField:{value:"",type:"string"},groupBy:{value:[],type:"array"},dataFields:{value:[],type:"array"},mapChar:{value:".",type:"string"},id:{value:"",type:"string"},virtualDataSource:{value:null,type:"any"},virtualDataSourceOnExpand:{value:null,type:"any"}},type:"object"},grouping:{value:{enabled:{value:!1,type:"boolean",reflectToAttribute:!1},allowCollapse:{value:!1,type:"boolean",reflectToAttribute:!1},autoExpandAll:{value:!1,type:"boolean",reflectToAttribute:!1},expandMode:{value:"buttonClick",type:"string",allowedValues:["buttonClick","rowClick"],reflectToAttribute:!1},renderMode:{type:"string",value:"advanced",allowedValues:["basic","compact","advanced"]},groupRowHeight:{value:50,type:"any",reflectToAttribute:!1},toggleButtonIndent:{value:16,type:"number",reflectToAttribute:!1},groupIndent:{value:16,type:"number",reflectToAttribute:!1},groupBar:{value:{visible:{value:!1,type:"boolean",reflectToAttribute:!1},allowColumnDragDrop:{value:!0,type:"boolean",reflectToAttribute:!0},allowColumnCloseButtons:{value:!0,type:"boolean",reflectToAttribute:!0}},type:"object"},summaryRow:{value:{inline:{value:!0,type:"boolean"},visible:{value:!0,type:"boolean"}},type:"object"}},type:"object"},messages:{extend:!0,value:{en:{invalidColumnProperty:'{{elementType}}: Invalid property name "{{propertyName}}" set for Column: "{{type}}"',invalidRowProperty:'{{elementType}}: Invalid property name "{{propertyName}}" set for Row"',invalidCellValue:'Invalid cell value "{{value}}", Validation rule: "{{validationRule}}"',invalidValue:"Invalid value",invalidMinValue:"{{value}} above {{min}} must be filled out",invalidMaxValue:"{{value}} below {{max}} must be filled out",invalidMinLengthValue:"{{value}} is shorter than the minimum length of {{min}} characters",invalidMaxLengthValue:"{{value}} is longer than the maximum length of {{max}} characters",requiredValue:"{{value}} must be filled out",frozenColumns:"{{elementType}}: To Pin/Freeze a column group, all columns within it should be frozen.",frozenRows:"{{elementType}}: To Pin/Freeze a special cell, all rows within it should be frozen.",columnGroups:"{{elementType}}: Please, check the initialization of the smartGrid's columns array. The columns in a column group are expected to be siblings in the columns array.",min:"Min: {{value}}",max:"Max: {{value}} ",sum:"Sum: {{value}} ",avg:"Avg: {{value}} ",count:"Count: {{value}} ",pagerFirstButton:"First",pagerLastButton:"Last",pagerPreviousButton:"Previous",pagerNextButton:"Next",pagerNavigateToLabel:"Go to:",pagerPageSizeLabel:"Show:",pagerNavigateToInputPlaceholder:"",pagerEllipsis:"...",pagerSummaryString:"of",pagerSummaryPrefix:"of",pagerSummarySuffix:"",columnMenuCustomizeType:"Customize",columnMenuItemRename:"Rename",columnMenuItemEditDescription:"Edit description",columnMenuItemDuplicate:"Duplicate",columnMenuItemInsertLeft:"Insert left",columnMenuItemInsertRight:"Insert right",columnMenuItemSortAsc:"Sort {{mode}}",columnMenuItemSortDesc:"Sort {{mode}}",columnMenuItemRemoveSort:"Remove Sort",columnMenuItemFilter:"Filter",columnMenuItemRemoveFilter:"Remove Filter",columnMenuItemGroupBy:"Group by this column",columnMenuItemRemoveGroupBy:"Remove Group",columnMenuItemHide:"Hide",columnMenuItemShow:"Show",columnMenuItemDelete:"Delete",columnResizeTooltip:"width: {{value}}px",rowResizeTooltip:"height: {{value}}px",commandBarAddRow:"Add",commandBarDeleteRow:"Delete",commandBarBatchRevert:"Revert",commandBarBatchSave:"Save",commandBarFilter:"Filter",commandBarSort:"Sort",commandBarSearch:"Search",commandBarCustomize:"Customize",commandBarGroup:"Group",commandColumnEdit:"Edit",commandColumnDelete:"Delete",commandColumnCancel:"Cancel",commandColumnUpdate:"Update",commandColumnMenu:"",expandRow:"Expand row",expandRowComments:"Expand row and see {{value}} comments",collapseRow:"Collapse row",addNewRow:"Click here to add a new row",addNewColumn:"Click here to add a new column",dialogChartHeader:"{{value}} Chart",dialogRowDetailHeader:"Row Id: {{value}}",dialogDescriptionHeader:"Column: {{value}}",dialogRowDetailButtonConfirm:"OK",dialogRowDetailButtonCancel:"CANCEL",dialogEditHeader:"Edit Record with Id: {{value}}",dialogExpandRowHeader:"Edit Record",dialogAddButtonConfirm:"ADD",dialogAddButtonCancel:"CANCEL",dialogEditButtonConfirm:"OK",dialogEditButtonCancel:"CANCEL",dialogFilterButtonConfirm:"FILTER",dialogFilterButtonCancel:"CLEAR",dialogDeleteButtonConfirm:"DELETE",dialogDeleteButtonCancel:"CANCEL",dialogEditColumn:"Column: {{value}}",dialogAddColumn:"Add Column",dialogAddHeader:"Add Row",dialogDeleteHeader:"Delete Row",dialogFilterHeader:"Filter by",dialogFilterMinLabel:"Min",dialogFilterMaxLabel:"Max",dialogImageHeader:"Image",dialogImageDrop:"or drag and drop file(s) to upload",dialogImageUpload:"Select File(s) to Upload",dialogImageURL:"You can also provide the URL to an image",dialogImageURLUpload:"Upload",dialogImageLink:"Link (URL)",dialogImageDevice:"My Device",bold:"Bold",fontStyle:"Font Style",italic:"Italic",send:"Send",status:"Status",underline:"Underline",comments:"Comments",comment:"Comment",noComments:"No comments to this record yet",guestUser:"Guest",background:"Background",starred:"Starred",resetFormat:"Reset Format",notStarred:"Not starred",color:"Color",conditionalFormatting:"Conditional Formatting",groupBarLabel:"Drag a column header here to group by that column",dialogDeleteContent:"Are you sure you want to delete this row?",calendar:{"/":"/",":":":",firstDay:0,days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December",""],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]},AM:["AM","am","AM"],PM:["PM","pm","PM"],eras:[{name:"A.D.",start:null,offset:0}],currencySymbol:"$",currency:"USD",currencySymbolPosition:"before",decimalSeparator:".",thousandsSeparator:","},CONTAINS:"Contains",DOES_NOT_CONTAIN:"Does not contain",ENDS_WITH:"Ends with",EQUAL:"Equal",GREATER_THAN:"Greater than",GREATER_THAN_OR_EQUAL:"Greater than or equal",LESS_THAN:"Less than",LESS_THAN_OR_EQUAL:"Less than or equal",NOT_EQUAL:"Not equal",RANGE:"Range",CLEAR_FILTER:"Clear Filter",STARTS_WITH:"Starts with",addFilter:"+ Add filter",and:"And",apply:"Apply",booleanFirst:"\u2610",booleanLast:"\u2611",cancel:"Cancel",CONTAINS_CASE_SENSITIVE:"Contains (case sensitive)",dateFirst:"1",dateLast:"9",DOES_NOT_CONTAIN_CASE_SENSITIVE:"does not contain (case sensitive)",EMPTY:"empty",ENDS_WITH_CASE_SENSITIVE:"ends with (case sensitive)",EQUAL_CASE_SENSITIVE:"equal (case sensitive)",filter:"Filter",customize:"Customize Columns",filteredByMultiple:"{{n}} filters",filteredByOne:"1 filter",filterValuePlaceholder:"Value",find:"Find a field",findInView:"Find in view",firstBy:"Sort by",found:"{{nth}} of {{n}}",from:"from",noFilters:"No filters applied",noResults:"No results",noSorting:"No sorting applied",NOT_EMPTY:"not empty",NOT_NULL:"not null",NULL:"null",numberFirst:"1",numberLast:"9",ok:"OK",or:"Or",pickAnother:"Pick another field to sort by",sort:"Sort",group:"Group",sortedByMultiple:"Sorted by {{n}} fields",sortedByOne:"Sorted by 1 field",STARTS_WITH_CASE_SENSITIVE:"starts with (case sensitive)",stringFirst:"A",stringLast:"Z",thenBy:"then by",where:"Where",collapseAll:"Collapse all",expandAll:"Expand all",noGrouping:"No grouping",groupedByMultiple:"{{n}} groups",groupedByOne:"1 group",deleteByMultiple:"Delete {{n}} records",deleteByOne:"Delete 1 record",download:"Download",firstByGroup:"Group by",expandRecord:"Expand record",pickAnotherGroupBy:"Pick another field to group by",add:"Add condition",all:"All columns",between:"Between",close:"Close",column:"Column:",condition:"Condition:",equal:"equal",fontFamily:"Font family:",fontSize:"Font size:",format:"Format:",greaterThan:"greater than",highlight:"Highlight",lessThan:"less Than",notEqual:"not equal",remove:"Remove condition",secondValue:"Second value:",text:"Text",value:"Value:",addCondition:"Add Condition",addGroup:"Add Group",blanks:"(Blanks)",clear:"Clear",contains:"contains",containsCaseSensitive:"contains (case sensitive)",dateTabLabel:"DATE",doesNotContain:"does not contain",doesNotContainCaseSensitive:"does not contain (case sensitive)",empty:"empty",endsWith:"ends with",endsWithCaseSensitive:"ends with (case sensitive)",equalCaseSensitive:"equal (case sensitive)",greaterThanOrEqual:"greater than or equal",lessThanOrEqual:"less than or equal",mismatchedProperties:'smartFilterPanel: The "filterType" and the data type of the selected "dataField" are mismatched.',missingProperty:'smartFilterPanel: When mode is \'excel\', either "data" and "dataField" or "dataSource" of type Array have to be set.',notEmpty:"not empty",notNull:"not null",null:"null ",placeholderBoolean:"Select value",placeholderDate:"Enter date",placeholderNumber:"Enter number",placeholderTime:"Enter time",placeholderValue:"Enter value",selectAll:"(Select All)",showRows:"Show rows where:",startsWith:"starts with",startsWithCaseSensitive:"starts with (case sensitive)",matchCase:"Match Case",timeTabLabel:"TIME"}},type:"object"},onCellValue:{value:null,type:"any",reflectToAttribute:!1},onCellUpdate:{value:null,type:"any",reflectToAttribute:!1},onCellRender:{value:null,type:"any",reflectToAttribute:!1},onBeforeInit:{value:null,type:"any",reflectToAttribute:!1},onInit:{value:null,type:"any",reflectToAttribute:!1},onAfterInit:{value:null,type:"any",reflectToAttribute:!1},onKey:{value:null,type:"any",reflectToAttribute:!1},onRender:{value:null,type:"any",reflectToAttribute:!1},onChartInit:{value:null,type:"any",reflectToAttribute:!1},onRowInit:{value:null,type:"any",reflectToAttribute:!1},onRowDetailInit:{value:null,type:"any",reflectToAttribute:!1},onRowDetailUpdated:{value:null,type:"any",reflectToAttribute:!1},onRowInserted:{value:null,type:"any",reflectToAttribute:!1},onRowRemoved:{value:null,type:"any",reflectToAttribute:!1},onRowUpdate:{value:null,type:"any",reflectToAttribute:!1},onRowUpdated:{value:null,type:"any",reflectToAttribute:!1},onColumnInit:{value:null,type:"any",reflectToAttribute:!1},onColumnInserted:{value:null,type:"any",reflectToAttribute:!1},onColumnRemoved:{value:null,type:"any",reflectToAttribute:!1},onColumnUpdated:{value:null,type:"any",reflectToAttribute:!1},onCommand:{value:null,reflectToAttribute:!1,type:"any"},filtering:{value:{enabled:{value:!1,type:"boolean"},filter:{value:[],type:"array",reflectToAttribute:!1},filterRow:{value:{visible:{value:!1,type:"boolean"},menuVisible:{value:!1,type:"boolean"},applyMode:{value:"auto",type:"string",allowedValues:["auto","click"]},autoApplyModeDelay:{value:500,type:"number"}},type:"object"},filterMenu:{value:{visible:{value:!0,type:"boolean"},buttons:{value:["cancel","clear","filter"],type:"array"},dataSource:{value:null,type:"any"},width:{value:250,type:"number"},height:{value:200,type:"number"},mode:{value:"default",allowedValues:["default","excel"],type:"string"},messages:{value:null,type:"object"}},type:"object"}},type:"object"},editing:{value:{allowRowHeaderEdit:{value:!1,type:"any"},allowColumnHeaderEdit:{value:!1,type:"any"},active:{value:!1,readonly:!0,type:"boolean"},enabled:{value:!1,type:"boolean"},batch:{value:!1,type:"any"},action:{value:"click",type:"string",allowedValues:["none","click","doubleClick"]},commandKeys:{value:{commandKeyEdit:{value:{command:"commandKeyEditCommand",key:"F2"},type:"object"},commandKeyCancel:{value:{command:"commandKeyCancelCommand",key:"Escape"},type:"object"},commandKeyUpdate:{value:{command:"commandKeyUpdateCommand",key:"Enter | Tab"},type:"object"}},type:"object"},commandBar:{value:{visible:{value:!1,type:"boolean"},position:{value:"near",allowedValues:["near","far","both"],type:"string"},displayMode:{value:"labelAndIcon",allowedValues:["label","icon","labelAndIcon"],type:"string"},dataSource:{value:{commandBarSearch:{value:{command:{value:"commandBarSearchCommand",type:"any"},icon:{value:"smart-icon-search",type:"string"},label:{value:"{{messages}}",type:"string"},visible:{value:!1,type:"any"}},type:"object"},commandBarAddRow:{value:{command:{value:"commandBarAddRowCommand",type:"any"},icon:{value:"smart-icon-plus",type:"string"},label:{value:"{{messages}}",type:"string"},visible:{value:!1,type:"any"}},type:"object"},commandBarDeleteRow:{value:{command:{value:"commandBarDeleteRowCommand",type:"any"},icon:{value:"smart-icon-delete",type:"string"},label:{value:"{{messages}}",type:"string"},visible:{value:!1,type:"any"}},type:"object"},commandBarBatchSave:{value:{command:{value:"commandBarBatchSaveCommand",type:"any"},icon:{value:"smart-icon-ok-squared",type:"string"},label:{value:"{{messages}}",type:"string"},visible:{value:!0,type:"any"}},type:"object"},commandBarBatchRevert:{value:{command:{value:"commandBarBatchRevertCommand",type:"any"},icon:{value:"smart-icon-reload",type:"string"},label:{value:"{{messages}}",type:"string"},visible:{value:!0,type:"any"}},type:"object"}},type:"object"}},type:"object"},commandColumn:{value:{visible:{value:!1,type:"boolean"},inline:{value:!1,type:"boolean"},position:{value:"far",allowedValues:["near","far"],type:"string"},displayMode:{value:"icon",allowedValues:["label","icon","labelAndIcon"],type:"string"},dataSource:{value:{commandColumnMenu:{value:{command:{value:"commandColumnMenuCommand",type:"any"},icon:{value:"smart-icon-menu",type:"string"},label:{value:"{{messages}}",type:"string"},visible:{value:!1,type:"any"}},type:"object"},commandColumnEdit:{value:{command:{value:"commandColumnEditCommand",type:"any"},icon:{value:"smart-icon-mode-edit",type:"string"},label:{value:"{{messages}}",type:"string"},visible:{value:"auto",type:"any"}},type:"object"},commandColumnDelete:{value:{command:{value:"commandColumnDeleteCommand",type:"any"},icon:{value:"smart-icon-delete",type:"string"},label:{value:"{{messages}}",type:"string"},visible:{value:!0,type:"any"}},type:"object"},commandColumnUpdate:{value:{command:{value:"commandColumnUpdateCommand",type:"any"},icon:{value:"smart-icon-ok-squared",type:"string"},label:{value:"{{messages}}",type:"string"},visible:{value:"auto",type:"any"}},type:"object"},commandColumnCancel:{value:{command:{value:"commandColumnCancelCommand",type:"any"},icon:{value:"smart-icon-cancel-circled",type:"string"},label:{value:"{{messages}}",type:"string"},visible:{value:"auto",type:"any"}},type:"object"},commandColumnRowMenu:{value:{command:{value:"commandColumnRowMenuCommand",type:"any",reflectToAttribute:!1},icon:{value:"smart-icon-ellipsis-vert",type:"string"},label:{value:"{{messages}}",type:"string"},visible:{value:!1,type:"any"}},type:"object"},commandColumnCustom:{value:{command:{value:"",type:"any"},icon:{value:"smart-icon-ellipsis-vert",type:"string"},label:{value:"",type:"string"},visible:{value:!1,type:"any"}},type:"object"}},type:"object"},width:{value:null,type:"number?"}},reflectToAttribute:!1,type:"object"},mode:{value:"cell",allowedValues:["cell","row"],type:"string"},addNewColumn:{value:{visible:{value:!1,type:"boolean"}},type:"object"},addNewRow:{value:{position:{value:"both",allowedValues:["near","far","both"],type:"string"},visible:{value:!1,type:"boolean"},autoEdit:{value:!0,type:"boolean"},autoCreate:{value:!1,type:"boolean"},autoSave:{value:!0,type:"boolean"},label:{value:"{{message}}",type:"string"},displayMode:{value:"row",allowedValues:["row","button"],type:"string"}},type:"object"},dialog:{value:{header:{value:"{{message}}",type:"string"},height:{value:"auto",type:"any"},width:{value:"auto",type:"any"},left:{value:"center",type:"any"},top:{value:"center",type:"any"},enabled:{value:!1,type:"boolean"},visible:{value:!1,type:"boolean"}},type:"object"},addDialog:{value:{header:{value:"{{message}}",type:"string"},height:{value:"auto",type:"any"},width:{value:"auto",type:"any"},left:{value:"center",type:"any"},top:{value:"center",type:"any"},enabled:{value:!1,type:"boolean"},visible:{value:!1,type:"boolean"}},type:"object"},addColumnDialog:{value:{header:{value:"{{message}}",type:"string"},height:{value:"auto",type:"any"},width:{value:400,type:"any"},left:{value:"center",type:"any"},top:{value:"center",type:"any"},enabled:{value:!1,type:"boolean"},visible:{value:!1,type:"boolean"}},type:"object"},deleteDialog:{value:{header:{value:"{{message}}",type:"string"},height:{value:"auto",type:"any"},width:{value:"auto",type:"any"},left:{value:"center",type:"any"},top:{value:"center",type:"any"},enabled:{value:!1,type:"boolean"},visible:{value:!1,type:"boolean"}},type:"object"}},type:"object"},paging:{value:{enabled:{value:!1,type:"boolean"},spinner:{value:{enabled:{value:!1,type:"boolean"},step:{value:1,type:"number"}},type:"object"},pageHierarchySize:{value:2,type:"int"},pageSize:{value:10,type:"int"},pageIndex:{value:0,type:"int",validator:"pageIndexValidator"}},type:"object"},pager:{value:{autoEllipsis:{value:"both",allowedValues:["none","before","after","both"],type:"string"},position:{value:"far",allowedValues:["near","far","both"],type:"string"},template:{value:"",type:"string"},pageSizeSelector:{value:{visible:{value:!1,type:"boolean"},dataSource:{value:[10,20,50],type:"object"},position:{value:"far",allowedValues:["near","far"],type:"string"}},type:"object"},summary:{value:{position:{value:"far",allowedValues:["near","far"],type:"string"},visible:{value:!1,type:"boolean"}},type:"object"},navigationButtons:{value:{position:{value:"both",allowedValues:["near","far","both"],type:"string"},prevNextButtons:{value:{visible:{value:!0,type:"boolean"}},type:"object"},firstLastButtons:{value:{visible:{value:!0,type:"boolean"}},type:"object"},labels:{value:{visible:{value:!1,type:"boolean"}},type:"object"}},type:"object"},navigationInput:{value:{position:{value:"far",allowedValues:["near","far"],type:"string"},visible:{value:!1,type:"boolean"}},type:"object"},pageIndexSelectors:{value:{visible:{value:!0,type:"boolean"},dataSource:{value:10,type:"any"}},type:"object"},visible:{value:!1,type:"boolean"}},type:"object",reflectToAttribute:!1},rowDetail:{value:{enabled:{value:!1,type:"boolean"},height:{value:200,type:"number"},position:{value:"near",allowedValues:["near","far"],type:"string"},template:{value:"",type:"any",reflectToAttribute:!1},visible:{value:!0,type:"boolean"},dialog:{value:{header:{value:"{{message}}",type:"string"},height:{value:300,type:"any"},width:{value:360,type:"any"},left:{value:"center",type:"any"},top:{value:"center",type:"any"},enabled:{value:!1,type:"boolean"},visible:{value:!1,type:"boolean"}},type:"object"}},type:"object"},summaryRow:{value:{position:{value:"far",allowedValues:["near","far"],type:"string"},visible:{value:!1,type:"boolean"},template:{value:"",type:"string"}},type:"object"},scrolling:{value:"physical",allowedValues:["physical","virtual","infinite","deferred"],type:"string"},columnHeader:{value:{visible:{value:!0,type:"boolean"}},type:"object"},groupHeader:{value:{visible:{value:!1,type:"boolean"},template:{value:"",type:"string"}},type:"object"},header:{value:{visible:{value:!1,type:"boolean"},template:{value:"",type:"string"},buttons:{value:["columns","filter","group","sort","format","search"],type:"array"},onInit:{value:null,type:"any"}},type:"object"},footer:{value:{visible:{value:!1,type:"boolean"},template:{value:"",type:"string"}},type:"object"},checkBoxes:{value:{visible:{value:!1,type:"boolean"},hasThreeStates:{value:!1,type:"boolean"}},type:"object"},selection:{value:{enabled:{value:!1,type:"boolean"},allowRowHeaderSelection:{value:!1,type:"boolean"},allowColumnHeaderSelection:{value:!1,type:"boolean"},allowRowSelection:{value:!0,type:"boolean"},allowCellSelection:{value:!1,type:"boolean"},allowDragSelection:{value:!0,type:"boolean"},allowDragSelectionAutoScroll:{value:!0,type:"boolean"},allowCellDragSelectionHandle:{value:!0,type:"boolean"},allowCellDragDropSelectionHandle:{value:!0,type:"boolean"},allowCellDragSelectionAutoFill:{value:!0,type:"boolean"},selectAllMode:{value:"page",allowedValues:["none","page","all"],type:"string"},mode:{value:"many",type:"string",allowedValues:["one","many","extended"]},action:{value:"click",type:"string",allowedValues:["none","click","doubleClick"]},checkBoxes:{value:{enabled:{value:!1,type:"boolean"},autoShow:{value:!1,type:"boolean"},action:{value:"click",type:"string",allowedValues:["none","click","doubleClick"]},selectAllMode:{value:"page",allowedValues:["none","page","all"],type:"string"},position:{value:"near",allowedValues:["near","far"],type:"string"}},type:"object"},selected:{value:"",type:"string"},tabKeyBehavior:{value:"default",allowedValues:["none","default"],type:"string"},defaultSelection:{value:!1,type:"boolean"}},type:"object"},sorting:{value:{enabled:{value:!1,type:"boolean"},sort:{value:[],type:"array"},mode:{value:"one",allowedValues:["one","many"],type:"string"},sortToggleThreeStates:{value:!0,type:"boolean"}},type:"object"},users:{value:[],type:"array",reflectToAttribute:!1},virtualModeCachedRowsCount:{value:100,type:"int"}}}static get requires(){return{}}static get styleUrls(){return["smart.menu.css","smart.filterpanel.css","smart.pager.css","smart.grid.css","smart.textbox.css"]}template(){return"<div class='smart-container'id='container' disabled='[[disabled]]' role='grid'>\n                <div id='header' role=\"toolbar\" class='smart-grid-header smart-hidden'>\n                </div>\n                <div id='groupHeader' role=\"presentation\" class='smart-grid-group-header smart-hidden'></div>\n                <div id='headerPager' top class='smart-grid-pager smart-hidden'></div>\n                <div id='headerCommandBar' header top class='smart-grid-header smart-grid-command-bar smart-hidden'></div>\n                 <div id='content' class='smart-grid-content'>\n                    <div id='columnHeader' role=\"rowgroup\" class='smart-grid-column-header'>\n                        <div id='columnNearContainer' role=\"row\" class='near smart-hidden smart-grid-column-header-cell-container'>\n                       </div>\n                       <div id='columnContainer' role=\"row\" class='center smart-grid-column-header-cell-container'>\n                       </div>\n                        <div id='columnFarContainer' role=\"row\" class='far smart-hidden smart-grid-column-header-cell-container'>\n                       </div>\n                    </div>\n                    <div id='scrollView' role=\"rowgroup\" class ='smart-grid-scroll-view'>\n                        <div id='rowNearContainer' role=\"presentation\" class='near smart-hidden smart-grid-row-container'>\n                        </div>\n                         <div id='rowContainer' role=\"presentation\" class='center smart-grid-row-container'>\n                        </div>\n                        <div id='rowFarContainer' role=\"presentation\" class='far smart-hidden smart-grid-row-container'>\n                        </div>\n                        <div id='placeholder' class ='smart-hidden smart-placeholder smart-grid-placeholder'></div>\n                        <smart-scroll-bar right-to-left=\"[[rightToLeft]]\" theme=\"[[theme]]\" id='verticalScrollBar' class='smart-grid-scroll-bar' wait disabled='[[disabled]]' orientation='vertical'></smart-scroll-bar>\n                        <smart-scroll-bar right-to-left=\"[[rightToLeft]]\" theme=\"[[theme]]\" id='horizontalScrollBar' class='smart-grid-scroll-bar' wait disabled='[[disabled]]'></smart-scroll-bar>\n                    </div>\n                  <div id='filterFooter' class='smart-grid-filter-footer smart-hidden'></div>\n                </div>\n                <div id='loadingIndicatorContainer' class='smart-loader-container'>\n                    <span id='loadingIndicator' class='smart-grid-loader smart-loader'></span>\n                    <span id='loadingIndicatorPlaceholder' class ='smart-loader-label smart-hidden'></span>\n                </div>\n                <div id='footerCommandBar' footer class='smart-grid-footer smart-grid-command-bar smart-hidden'></div>\n                <div id='footerPager' class='smart-grid-pager smart-hidden'></div>\n                <div id='footer' class='smart-grid-footer smart-hidden'></div>\n            </div>"}static get listeners(){return{focus:"_focusHandler",blur:"_blurHandler",wheel:"_mouseWheelHandler","document.up":"_upHandler","document.down":"_downHandler","document.move":"_moveHandler","document.scroll":"_scrollHandler",keydown:"_keyDownHandler",keyup:"_keyUpHandler",resize:"_resizeHandler","header.click":"_headerClickHandler","columnHeader.down":"_columnDownHandler","columnHeader.click":"_columnClickHandler","columnHeader.move":"_columnMoveHandler","columnHeader.mouseleave":"_columnMouseLeaveHandler","rowNearContainer.down":"_rowDownHandler","rowContainer.down":"_rowDownHandler","rowFarContainer.down":"_rowDownHandler","container.selectstart":"_selectStartHandler",styleChanged:"_styleChangedHandler",swipeleft:"_swipeLeftHandler",swiperight:"_swipeRightHandler"}}get _tabindex(){return this.disabled||this.unfocusable?"":' tabindex="0"'}pageIndexValidator(e,t){const n=this;if(t<0)return 0;if(n.dataSource){if(n.dataSource.virtualDataSource)return t;const a=Math.ceil(n.dataSource.length/n._pageSize);if(t>a-1)return a-1}}_offsetTop(e){return e?e.offsetTop+this._offsetTop(e.offsetParent):0}_offsetLeft(e){return e?e.offsetLeft+this._offsetLeft(e.offsetParent):0}offset(e){return{left:this._offsetLeft(e),top:this._offsetTop(e)}}getBoundingRect(e){const t=this;let n=window.pageXOffset,a=window.pageYOffset,i=e.getBoundingClientRect();if(e!==document.body){let o=e.parentNode;for(;o!==document.body&&o;){o&&(n+=o.scrollLeft,a+=o.scrollTop);let r=o;o?(o=o.parentNode,t.enableShadowDOM&&o===t.shadowRoot?o=t:!t.isInShadowDOM||o!==t.getRootNode()&&r!==t.getRootNode()||(o=t.getRootNode().host)):t.isInShadowDOM&&(o=t.getRootNode().host)}}return{bottom:i.bottom+a,height:i.height,left:i.left+n,right:i.right+n,top:i.top+a,width:i.width}}_downHandler(e){this._downTarget=e.originalEvent.target}_removeCellContentPopup(){const e=this;e._cellContentPopup&&(e._cellContentPopup.remove(),e._cellContentPopup=null),e._cellContentPopupTimer&&(clearTimeout(e._cellContentPopupTimer),e._cellContentPopupTimer=null)}_upHandler(e){const t=this,n=t.getBoundingRect(t);super._upHandler(),t._tapTimer&&clearTimeout(t._tapTimer);const a=()=>{t.editing.isEditing&&!t.editing.dialog.enabled&&setTimeout(()=>{if(!e.defaultPrevented){if(t.editing.editCell&&t.editing.editCell.editor.instance){const i=t.editing.editCell.editor.instance;if(i.element&&i.element.hasAttribute("aria-owns")){const o=i.element.getAttribute("aria-owns"),r=document.getElementById(o);if(r&&r.contains(e.originalEvent.target))return}if(t.editing.editCell.editor.instance.blur(e),e.defaultPrevented)return}t.endEdit()}},50)};if(!e.originalEvent||(e.originalEvent.target===t.$.scrollView&&t._downTarget===e.originalEvent.target&&a(),!e.originalEvent.target.closest(".smart-grid-dialog"))){if(e.pageX<n.left||e.pageX>n.right||e.pageY<n.top||e.pageY>n.bottom){let i=!1,o=e.originalEvent.target;for(;o;)if(o=o.parentNode,o===t){i=!0;break}if(i)return t._dragSelectionEnd(e),t._endResize(e),void t._endDrag(e);if(t._inputOverlay&&(t._inputOverlay.classList.remove("smart-input-overlay-on"),setTimeout(()=>{t._inputOverlay&&(t._inputOverlay.parentNode&&t._inputOverlay.parentNode.removeChild(t._inputOverlay),t._inputOverlay=null)},t.behavior.doubleClickTimingDelay)),a(),t.menu){let r,l,s,c;if(t.enableShadowDOM||t.isInShadowDOM?(r=e.originalEvent.composedPath()[0],l=function(){let u=r.getRootNode().host;for(;u;){if(u===t)return u;u=u.getRootNode().host}}(),s=t.menu.contains(r)||t.menu.firstElementChild.shadowRoot.contains(r),c=t.menu.firstElementChild.shadowRoot):(r=e.originalEvent.target,l=t.contains(r),s=t.menu.contains(r),c=t.menu),!l&&!s){const u=c.querySelectorAll("smart-drop-down-list"),p=c.querySelectorAll("smart-date-time-picker"),g=c.querySelectorAll("smart-date-input"),b=c.querySelectorAll("smart-input");for(let v=0;v<u.length;v++)if(u[v].$.dropDownContainer.contains(r))return;for(let v=0;v<p.length;v++)if(p[v].$.dropDownContainer.contains(r))return;for(let v=0;v<g.length;v++)if(g[v].$.scrollView.contains(r))return;for(let v=0;v<b.length;v++)if(b[v].$.scrollView.contains(r))return;return void t.closeMenu()}}}t._dragSelectionEnd(e),t._endResize(e),t._endDrag(e)}}_nextColumn(e){const t=this;for(let n=0;n<t.viewColumns.length;n++){const a=t.viewColumns[n];if(a.visibleIndex===e.visibleIndex+1)return a}return null}_nextRow(e){const t=this._recyclingRows,n=t.indexOf(e);return n>=0?t[n+1]:null}_moveHandler(e){const t=this;if(t.isInitialized&&t._selection){if(t.selection.enabled&&t.selection.allowDragSelection&&!t.editing.isEditing&&(!t._selection.selectionRect||t._selection.selectionRect&&!t._selection.selectionRect.captured)&&(t._dragSelection(e),e.originalEvent)){const n=e.originalEvent.target.closest?e.originalEvent.target:void 0;Smart.Utilities.Core.isMobile&&n&&n.closest("smart-grid")===t&&e.originalEvent.preventDefault()}t.isScrolling||("none"===t.behavior.columnResizeMode||t.classList.contains("smart-grid-row-resize-mode")||t._columnMoveResizeHandler(e),"none"===t.behavior.rowResizeMode||t.classList.contains("smart-grid-column-resize-mode")||t._rowMoveResizeHandler(e),t._drag(e))}}_columnMouseLeaveHandler(){const e=this;if(e._columnElements){for(let t=0;t<e._columnElements.length;t++){const n=e._columnElements[t],a=n.column;a&&a.autoShowActionButton&&n._hideActionButton()}for(let t=0;t<e._frozenNearColumns.length;t++){const n=e._frozenNearColumns[t],a=n.element;n&&n.autoShowActionButton&&a._hideActionButton()}}}_columnMoveHandler(e){const t=this;if(!t.isInitialized||t._columnResizeStartLine||t._rowResizeStartLine)return;const n=(a,i)=>{if(a&&a.autoShowActionButton){const o=i.getBoundingClientRect(),r=t.offset(i);if(r.left<=e.pageX&&r.left+o.width-6>=e.pageX)if(r.top<=e.pageY&&r.top+o.height>=e.pageY){if(!t.hasColumnMenu(a))return;i._showActionButton()}else i._hideActionButton();else i._hideActionButton()}};for(let a=0;a<t._columnElements.length;a++){const i=t._columnElements[a];n(i.column,i)}for(let a=0;a<t._frozenNearColumns.length;a++){const i=t._frozenNearColumns[a];n(i,i.element)}}_headerClickHandler(e){const t=this;if(t.$.headerBar){const n=t.isInShadowDOM||t.shadowRoot?e.composedPath()[0]:e.target;t.$.headerBar._headerClickHandler(n,t)}}_columnClickHandler(e){const t=this;if(t._overlay)return;const n=(t.enableShadowDOM?t.shadowRoot:t.getRootNode()).elementsFromPoint(e.clientX,e.clientY);let a=null,i=null;const o=new Date-t._columnClickTime<t.behavior.doubleClickTimingDelay;t._columnClickTime=new Date;for(let r=0;r<n.length;r++){const l=n[r];if(l.classList.contains("smart-action-button"))return;if(l.getAttribute("data-field")){a=l.getAttribute("data-field"),i=l;break}}if(a){const r=i.column;if(!r||e.srcElement.classList.contains("smart-filter-button"))return;if("_addNewColumn"===r.dataField)return void t._openAddColumnDialog();if(Smart.Utilities.Core.isMobile)o&&r.allowSortToggleOnClick&&t.sorting.enabled&&t.sortBy(a),t._columnMoveHandler(e),e.originalEvent&&e.originalEvent.preventDefault();else if(!o&&r.allowSortToggleOnClick&&t.sorting.enabled){if("none"!==t.behavior.columnResizeMode&&"col-resize"===r.element.style.cursor)return;t.sortBy(a)}}}_columnDownHandler(e){const t=this,n=(t.enableShadowDOM?t.shadowRoot:t.getRootNode()).elementsFromPoint(e.clientX,e.clientY);let a=null,i=null;const o=new Date-t._clickTime<t.behavior.doubleClickTimingDelay;t.$.headerBar&&t.$.headerBar.closePanel(),t._doubleClickHandler(e);for(let r=0;r<n.length;r++){const l=n[r];if(l.classList.contains("smart-action-button"))return;if(l.getAttribute("data-field")){a=l.getAttribute("data-field"),i=l;break}}if(a){const r=i.column;if(!r)return;if("_commandColumn"===a)return void t._applyCommand(t.editing.commandColumn.dataSource.commandColumnMenu.command);const l=function(s){if("col-resize"!==r.element.style.cursor&&(r.selectionColumn?t.selection.checkBoxes.action===s&&t.selection.enabled:t.selection.action===s&&t.selection.enabled)){if(t.editing.enabled&&t.editing.editColumn===r)return;if(t._dragSelectionStartDataField=e.shiftKey||e.ctrlKey?null:a,"_checkBoxColumn"===a)return void t._toggleColumnSelection(r);"_rowHeaderColumn"===a&&t.selection.enabled&&t.selection.allowRowHeaderSelection&&t.appearance.showRowHeaderSelectIcon&&(t.areAllRowsSelected()?t.clearSelection():t.selectAllRows(),r.refresh()),t.selection.allowColumnHeaderSelection&&r.allowSelect&&t._setSelection(null,r.dataField,e)}};if(t.editing.isEditing&&t.endEdit(),l("click"),t.$.fireEvent("columnClick",{column:r,dataField:r.dataField}),o&&(t.$.fireEvent("columnDoubleClick",{column:r,dataField:r.dataField}),l("doubleClick"),t._onColumnDoubleClick(r,e)),t._columnToResizeElement&&!t._columnResizeLine)return t._columnDownResizeHandler(e),void(t._clickTime=new Date);t._beginDrag(e,r)}t.closeMenu(),t._clickTime=new Date}addTransformMoveStyle(e,t,n,a,i,o){e.style.opacity=o,e.style["transition-duration"]=t,e.style.transform="translate3d("+n+"px,"+a+"px,"+i+"px)"}removeTransformMoveStyle(e){e.style.opacity="",e.style["transition-duration"]="",e.style.transform=""}_rowDownHandler(e){const t=this;if(t._inputOverlay&&t._inputOverlay.classList.remove("smart-input-overlay-on"),t._doubleClickHandler(e),t._closeMenu(t.menu),t._rowResizeHandler(e),t._removeCellContentPopup(),t._toggledRow&&t.appearance.allowRowToggleAnimation||e.target&&!e.target.classList.contains("smart-grid-row-container")&&!e.target.classList.contains("smart-grid-selection-overlay")&&!e.target.classList.contains("smart-selection-overlay-content"))return;let n=e.clientX,a=e.clientY;e.touches&&(n=e.touches[0].clientX,a=e.touches[0].clientY);const i=(t.enableShadowDOM?t.shadowRoot:t.getRootNode()).elementsFromPoint(n,a);let o=null,r=null,l=null,s=null;t._lastPointerDownTime=new Date;for(let c=0;c<i.length;c++){const u=i[c];if(u.hasAttribute("toggle-button")&&(r=u),u.hasAttribute("checkbox")&&(l=u),s||"smart-grid-cell"!==u.nodeName.toLowerCase()||(s=u),!o&&"smart-grid-row"===u.nodeName.toLowerCase()){o=u;break}}if(o&&s){const c=s?s.cell:null;if(c.row.filterRow||t._closeMenu(t.filterRowMenu),r&&c&&!c.column.rowDetailColumn&&r!==c.row.toggleDetailButton)o.row.toggle(e);else if(t.rowDetail.enabled&&t.rowDetail.visible&&r&&c&&c.column.rowDetailColumn){const u=o.row;u.showDetail?t.hideDetail(u.id):t.showDetail(u.id)}else{const u=o.row,p=s?s.cell:null;p.column._treeColumn&&l&&(u.checked=!u.checked),p.element===u.header&&t.behavior.allowRowReorder&&t._beginDrag(e,u),t._tapTimer&&clearTimeout(t._tapTimer),t._tapTimer=setTimeout(function(){t._clickedRow===o&&t.$.fireEvent("rowTap",{row:u,id:u.id,originalEvent:e.originalEvent}),t._clickedCell===s&&t.$.fireEvent("cellTap",{cell:p,id:u.id,dataField:p.column.dataField,originalEvent:e.originalEvent})},t.behavior.doubleClickTimingDelay);const g=function(D){if(!t.selection.enabled||u.autoGenerated||!0!==u.allowSelect)return void delete t.__selectionStarted;if(u.header&&"row-resize"===u.header.style.cursor)return;const T=t.editing.isEditing;if(T&&t.editing.editCell&&t.editing.editCell.row.id===u.id&&t.editing.editCell.column.dataField===p.column.dataField||T&&t.editing.editRow&&t.editing.editRow.id===u.id)return;const M=()=>{t.focus(),setTimeout(function(){t.focus()},50)};if(t.selection.action===D){if(t._dragSelectionStartRow=e.shiftKey||e.ctrlKey||!t.selection.allowRowHeaderSelection&&p.column.autoGenerated?null:o.row,t._dragSelectionStartDataField=e.shiftKey||e.ctrlKey?null:p.column.dataField,p.column.rowHeaderColumn&&!t.selection.allowRowHeaderSelection)return t._dragSelectionStartRow=null,void M();t._setSelection(u.id,p.column.dataField,e),M()}else p.column.selectionColumn&&t.selection.checkBoxes.enabled&&t.selection.checkBoxes.action===D&&(t._setSelection(u.id,p.column.dataField,e),M())},b=p.selected;t._clickTime||(t._clickTime=new Date);const v=t._clickedCell===s&&new Date-t._clickTime<t.behavior.doubleClickTimingDelay,y=e.originalEvent?e.originalEvent:e,x=3===y.which;if(x||"_commandColumn"===p.column.dataField||g("click"),t.$.fireEvent("rowClick",{row:u,id:u.id,isRightClick:x,originalEvent:y,pageX:parseInt(y.pageX),pageY:parseInt(y.pageY)}),t.$.fireEvent("cellClick",{cell:p,id:u.id,dataField:p.column.dataField,isRightClick:x,originalEvent:y,pageX:parseInt(y.pageX),pageY:parseInt(y.pageY)}),u.autoGenerated||p.column.autoGenerated)t._onRowClick(u.index,u,e),t._onCellClick(p,e);else if(t.selection.enabled)if(t.selection.allowCellSelection)if("extended"===t.selection.mode){if(!0===b&&b===p.selected&&!t.selection.isDragging){const D=t._selection.focusedCell;t._clickedCell&&D.id===p.row.id&&D.dataField===p.column.dataField&&D.id===t._clickedCell.cell.row.id&&D.dataField===t._clickedCell.cell.column.dataField&&(t._onRowClick(u.index,u,e),t._onCellClick(p,e))}}else v||(t._onRowClick(u.index,u,e),t._onCellClick(p,e));else if(t.selection.allowRowSelection)if("extended"===t.selection.mode){if(!0===b&&b===p.selected&&!t.selection.isDragging){const D=t._selection.focusedCell;t._clickedCell&&D.id===p.row.id&&D.id===t._clickedCell.cell.row.id&&(t._onRowClick(u.index,u,e),t._onCellClick(p,e))}}else v||(t._onRowClick(u.index,u,e),t._onCellClick(p,e));else t._onRowClick(u.index,u,e),t._onCellClick(p,e);else t._onRowClick(u.index,u,e),t._onCellClick(p,e);new Date-t._clickTime<t.behavior.doubleClickTimingDelay&&(t._clickedRow===o&&(t._onRowDoubleClick(u.index,u,e,e),t.$.fireEvent("rowDoubleClick",{row:u,id:u.id,isRightClick:x,originalEvent:e.originalEvent,pageX:parseInt(y.pageX),pageY:parseInt(y.pageY)}),g("doubleClick")),t._clickedCell===s&&(t._onCellDoubleClick(p,e),t.$.fireEvent("cellDoubleClick",{cell:p,id:u.id,dataField:p.column.dataField,isRightClick:x,originalEvent:e.originalEvent,pageX:parseInt(y.pageX),pageY:parseInt(y.pageY)}))),t._clickedRow=o,t._clickedCell=s,t._clickTime=new Date,t.layout.allowCellsWrapShortcut&&t._clickedCell.hasAttribute("focus")&&t._clickedCell.hasAttribute("selected")&&e.shiftKey&&(t._cellContentPopupTimer&&clearTimeout(t._cellContentPopupTimer),t.selection.isDragging?t._removeCellContentPopup():p.autoWrap())}}}showDetail(e){const t=this.rowById[e];t&&(t.showDetail=!0)}hideDetail(e){const t=this.rowById[e];t&&(t.showDetail=!1)}_focusHandler(){this._focused=!0}_blurHandler(){this._focused=!1}_notify(e,t,n){const a=this;if(a.notifyFn)for(let i=0;i<a.notifyFn.length;i++)a.notifyFn[i](e,t,n)}notify(e){const t=this;e&&(t.notifyFn||(t.notifyFn=[]),t.notifyFn.push(e))}_applyTemplate(e,t){let n=null;if(null!==e&&""!==e)if((e.startsWith("#")||e.startsWith("."))&&(n=document.querySelector(e)),n)t.innerHTML="",n instanceof HTMLElement&&!(n instanceof HTMLTemplateElement)?t.appendChild(n):t.appendChild(n.content.cloneNode(!0).firstElementChild);else{const a=function(i){const o=document.createElement("template");return i=i.trim(),o.innerHTML=i,o.content.firstChild}(e);a&&(t.innerHTML="",t.appendChild(a))}else t.innerHTML=""}propertyChangedHandler(e,t,n){const a=this;if(a.isInitialized){switch(a._notify(e,t,n),e){case"summaryRow_visible":for(let i=0;i<a.columns.length;i++)a._summaryRowCount=Math.max(a._summaryRowCount,a.columns[i].summary.length);a._renderRows(!0);break;case"conditionalFormatting":return a._renderConditionalFormatting(),void a.refresh();case"appearance_displayLoadingIndicator":return void a._setLoadingIndicatorVisibility();case"appearance_placeholder":return void(a.$.placeholder.innerHTML=n);case"appearance_showColumnHeaderLines":case"appearance_showColumnLines":case"appearance_showRowLines":return void a._recycle();case"appearance_allowColumnStickyPosition":n?a._stickHeader():a._unstickHeader();break;case"appearance_showColumnIcon":for(let i=0;i<a.columns.length;i++)a.columns[i].setProperty("showIcon",a.appearance.showColumnIcon);a._recycle();break;case"appearance_showRowHeaderNumber":case"appearance_showRowHeader":{a._initializeRowNumberColumn();const i=a._frozenNearColumns[0];i.rowHeaderColumn&&i.element&&!i.element.parentNode&&a.$.columnNearContainer.appendChild(i.element),a.refresh();break}case"header_visible":a.header.visible&&""===a.header.template&&(a.$.header.innerHTML='<smart-grid-toolbar header-position="top"></smart-grid-toolbar>',a.$.headerBar=a.$.header.firstElementChild,a.$.headerBar._init(a),a.header.onInit&&a.header.onInit(a.$.headerBar));break;case"header_template":a._applyTemplate(n,a.$.header);break;case"footer_template":a._applyTemplate(n,a.$.footer);break;case"columnWidth":{a.columns.canNotify=!1;let i=parseInt(n);if(isNaN(i)&&(i=null),i>=30||null===i)for(let o=0;o<a.columns.length;o++)a.columns[o].width=i;a.columns.canNotify=!0,a.refresh();break}case"checkBoxes_visible":return void a._recycle();case"checkBoxes_hasThreeStates":return a.rows.canNotify=!1,a._applyThreeStates(a.rowHierarchy),a.rows.canNotify=!0,void a._recycle();case"columnHeader_visible":a.__columnHeaderHeight=null,a.refresh();break;case"selection_checkBoxes_enabled":a._selectionColumn.visible=n;break;case"selection_checkBoxes_autoShow":a._selectionColumn.element&&(n?a._selectionColumn.element.setAttribute("auto-show",""):a._selectionColumn.element.removeAttribute("auto-show"));break;case"selection_checkBoxes_position":{let i=a.viewColumns.indexOf(a._selectionColumn);a.viewColumns.canNotify=!1,a.viewColumns.splice(i,1);const o=a._frozenNearColumns.indexOf(a._selectionColumn),r=a._frozenFarColumns.indexOf(a._selectionColumn);if(o>=0&&a._frozenNearColumns.splice(o,1),r>=0&&a._frozenFarColumns.splice(r,1),"far"===n)a._selectionColumn.canNotify=!1,a._selectionColumn.freeze="far",a._selectionColumn.canNotify=!0,a._frozenFarColumns.splice(0,0,a._selectionColumn),a.viewColumns.push(a._selectionColumn),a.$.columnFarContainer.appendChild(a._selectionColumn.element);else{let l=0,s=0;for(let c=0;c<a.viewColumns.length&&(a.viewColumns[c].autoGenerated||a.viewColumns[c].dataField!==a.columns[s++].dataField);c++)a.viewColumns[c].autoGenerated&&l++;a._selectionColumn.canNotify=!1,a._selectionColumn.freeze="near",a._selectionColumn.canNotify=!0,a._frozenNearColumns.splice(l,0,a._selectionColumn),a.viewColumns.splice(l,0,a._selectionColumn),a.$.columnNearContainer.appendChild(a._selectionColumn.element)}a.viewColumns.canNotify=!0;break}case"selection_mode":if(a._selection&&(a._selection.focusedCell=null),a.selection.allowCellSelection)a.clearSelection();else if("one"===n){const i=a.getSelection();if(a.clearSelection(),i.rows&&i.rows[0]){i.rows[0].row.selected=!0;const o=a.rowById[i.rows[0].row.id].getCell(a.columns[0].dataField);a._selection.focusedCell={id:o.row.id,dataField:o.column.dataField,value:o.value,index:o.row.index}}}break;case"filtering_enabled":return void(n&&0===a._filterPanels.length&&a._createFilterPanels());case"filtering_filterRow_visible":return a._initializeRows(),a._initializeRowElements(),void a.refresh();case"filtering_filter":for(let i=0;i<a.columns.length;i++){const o=a.columns[i];o.canNotify=!1,o.setProperty("filter",null),o.canNotify=!0}for(let i=0;i<a.filtering.filter.length;i++){const o=a.filtering.filter[i];if(o){const r=o[0],l=o.splice(1);let s=null;if(l instanceof Smart.FilterGroup)s=l;else{const c=a.columnByDataField[r];c&&(s=a.dataSource._createFilter(c.dataType,l))}s&&a.addFilter(r,s,!1)}}return void a.refreshFilters();case"messages":case"locale":{a._dialogEdit&&(a._dialogEdit.close(),a._dialogEdit=null),a._dialogDelete&&(a._dialogDelete.close(),a._dialogDelete=null),a._dialogAddRow&&(a._dialogAddRow.close(),a._dialogAddRow=null);const i=a.$.headerPager.querySelector("smart-pager"),o=a.$.footerPager.querySelector("smart-pager");i&&(i.locale=a.locale),o&&(o.locale=a.locale);const r=(l,s)=>{a._handleFilterMenuClick(l,s)};a._filterInfo||(a._filterInfo={}),a._filterInfo.stringConditions=[{icon:"smart-icon-contains",command:r,value:"CONTAINS",label:a.localize("CONTAINS")},{icon:"smart-icon-does-not-contain",command:r,value:"DOES_NOT_CONTAIN",label:a.localize("DOES_NOT_CONTAIN")},{icon:"smart-icon-starts-with",command:r,value:"STARTS_WITH",label:a.localize("STARTS_WITH")},{icon:"smart-icon-ends-with",command:r,value:"ENDS_WITH",label:a.localize("ENDS_WITH")},{icon:"smart-icon-equals",command:r,value:"EQUAL",label:a.localize("EQUAL")},{icon:"smart-icon-delete",command:r,value:"CLEAR_FILTER",label:a.localize("CLEAR_FILTER")}],a._filterInfo.numberAndDateConditions=[{icon:"smart-icon-equals",command:r,value:"EQUAL",label:a.localize("EQUAL")},{icon:"smart-icon-not-equal",command:r,value:"NOT_EQUAL",label:a.localize("NOT_EQUAL")},{icon:"smart-icon-less-than",command:r,value:"LESS_THAN",label:a.localize("LESS_THAN")},{icon:"smart-icon-less-than-equal",command:r,value:"LESS_THAN_OR_EQUAL",label:a.localize("LESS_THAN_OR_EQUAL")},{icon:"smart-icon-greater-than",command:r,value:"GREATER_THAN",label:a.localize("GREATER_THAN")},{icon:"smart-icon-greater-than-equal",command:r,value:"GREATER_THAN_OR_EQUAL",label:a.localize("GREATER_THAN_OR_EQUAL")},{icon:"smart-icon-between",command:r,value:"RANGE",label:a.localize("RANGE")},{icon:"smart-icon-delete",command:r,value:"CLEAR_FILTER",label:a.localize("CLEAR_FILTER")}],a._recycle();break}case"paging_spinner_enabled":a._refresh();break;case"pager_visible":return a._renderPagers(),void a._refreshPaging(!1);case"paging_pageIndex":case"pager_position":case"paging_enabled":return void a._refreshPaging(!0);case"paging_pageSize":return void a._refreshPaging(!1);case"columns":return a.__measuredColumnHeight=null,a._cellEditors=[],void a._renderColumns();case"columnGroups":if(a._columnGroups=[],a._columnHeights=0,a.viewColumns)for(let i=0;i<a.viewColumns.length;i++){const o=a.viewColumns[i],r=o.element;o.top=0,o.level=0,r&&(r.style.top="",r.style.height="",r.style.lineHeight="")}return a.columns.canNotify=!1,a.columns=a._initColumns,a._renderColumns(),a.columns.canNotify=!0,a.__columnHeaderHeight=null,void a.refresh();case"dataSource":return delete a._isFirstVirtualDataSourceRequest,a.dataBind(),void(a.header.visible&&""===a.header.template&&a.$.headerBar._init(a));case"rowDetail_dialog_width":case"rowDetail_dialog_height":case"rowDetail_dialog_enabled":case"rowDetail_dialog_visible":return;case"rowDetail_height":case"rowDetail_enabled":{a.beginUpdate(),a.rows.canNotify=!1;const i=a.appearance.allowRowDetailToggleAnimation;a.appearance.allowRowDetailToggleAnimation=!1;for(let o=0;o<a._recyclingRows.length;o++){const r=a._recyclingRows[o];r.height=null,r.setProperty("showDetail",!1),r.detailHeight=a.rowDetail.height}if(a.rows.canNotify=!0,a.rowDetail.enabled){let o=!1;for(let r=0;r<a.viewColumns.length;r++)if(a.viewColumns[r].rowDetailColumn){o=!0;break}if(!o)return a.appearance.allowRowDetailToggleAnimation=i,a.endUpdate(),void a._renderColumns(!0)}else for(let o=0;o<a.viewColumns.length;o++){const r=a.viewColumns[o];if(r.rowDetailColumn){r.visible=!1;break}}return a.appearance.allowRowDetailToggleAnimation=i,void a.endUpdate()}case"rowDetail_visible":for(let i=0;i<a.viewColumns.length;i++){const o=a.viewColumns[i];if(o.rowDetailColumn){o.visible=n;break}}return;case"displayLoadingIndicator":return void a._setLoadingIndicatorVisibility();case"filterable":return void a._refreshLayout();case"layout_columnMinHeight":case"layout_rowMinHeight":case"layout_columnHeight":case"layout_rowHeight":return a.layout.isDirty=!0,a._resetCachedLayout(),a._refreshLayout(),void a.refresh();case"rightToLeft":return void a.refresh();case"selectionMode":return;case"editing_addNewColumn_visible":a._addNewColumn&&(a._addNewColumn.visible=n),a.refresh();break;case"editing_addNewRow_visible":a._renderAddNewRow(),a.refresh();break;case"editing_addNewRow_position":return a._renderAddNewRow(),void a.refresh();case"editing_enabled":n?a.removeAttribute("aria-readonly"):a.setAttribute("aria-readonly",!0);break;case"editing_dialog_visible":return;case"editing_commandBar_visible":case"editing_commandBar_position":a._renderCommandBar();break;case"editing_commandColumn_visible":return void a.refresh(!0);case"editing_commandColumn_displayMode":return delete a.__cellsCommandTemplate,void a.refresh(!0)}a.refresh()}}ready(){super.ready();const e=this,t=e._scrollView.vScrollBar,n=e._scrollView.hScrollBar;t.hasStyleObserver=!1,n.hasStyleObserver=!1,t.hasResizeObserver=!1,n.hasResizeObserver=!1,t.wait=!1,n.wait=!1,t.onChange=e._verticalScrollbarHandler.bind(e),n.onChange=e._horizontalScrollbarHandler.bind(e),e.setFocusable(!0),e.$.loadingIndicatorPlaceholder.innerHTML=e.appearance.loadingIndicatorPlaceholder,e.$.placeholder.innerHTML=e.appearance.placeholder,e._setLoadingIndicatorVisibility(),e._cellsMerge=[],e.checkLicense()}checkLicense(e){const t=this;(t.grouping.enabled||t.selection.enabled&&t.selection.allowCellSelection||t.rowDetail.enabled||t.charting.enabled||t.editing.enabled&&t.editing.batch||t.editing.enabled&&"row"===t.editing.mode||t.editing.enabled&&t.editing.addNewRow.visible||t.editing.enabled&&t.editing.commandColumn.visible||"virtual"===t.scrolling||t.sorting.enabled&&"many"===t.sorting.mode||!0===e)&&super.checkLicense()}_createFilterPanels(){const e=this;if(e._filterPanels){if(e._filterPanels.length>0)return}else e._filterPanels=[];e.filtering.enabled&&0===e._filterPanels.length&&requestAnimationFrame(()=>{const t=document.createElement("smart-filter-panel"),n=document.createElement("smart-filter-panel"),a=document.createElement("smart-filter-panel"),i=document.createElement("smart-filter-panel");n.filterType="boolean",a.filterType="numeric",i.filterType="date",e._filterPanels.bool=n,e._filterPanels.date=i,e._filterPanels.numeric=a,e._filterPanels.string=t;for(let o in e._filterPanels){const r=e._filterPanels[o];r.rightToLeft=e.rightToLeft,r.classList.add("smart-hidden"),e.$.content.appendChild(r),r.parentNode.removeChild(r)}})}_applyScrolling(){const e=this,t=e._scrollView.vScrollBar;requestAnimationFrame(()=>{switch(t.largeStep=e.$.scrollView.offsetHeight,e.scrolling){case"physical":case"infinite":case"virtual":t.step=e.layout.rowMinHeight,t.mechanicalAction="switchWhileDragging";break;case"deferred":t.step=10,t.mechanicalAction="switchWhenReleased";break;case"logical":t.step=e.layout.rowMinHeight,t.mechanicalAction="switchWhileDragging"}})}get _autoRowHeight(){const e=this;if(e.__autoRowHeight)return e.__autoRowHeight;let t=e.layout.rowMinHeight;if(!e.dataSource||e.dataSource&&0===e.dataSource.length)return t;const n=new Smart.Grid.Row({index:0,grid:e}),a=n.createElement();e.$.scrollView.appendChild(a),e.removeAttribute("grouped"),e.removeAttribute("tree"),e.grouping.enabled&&e.dataSource.groupBy&&e.dataSource.groupBy.length>0&&"advanced"===e.grouping.renderMode?e.setAttribute("grouped",""):e.dataSource.boundHierarchy&&e.setAttribute("tree","");const i={};for(let o=0;o<e.dataSource.dataFields.length;o++)i[e.dataSource.dataFields[o].name]="ABCDEFHIJLMNOPQRSTUVWXYZ1234567910|";n.data=i,n._isMeasureRow=!0,n.render(),a.style.height="",a.style.lineHeight="",t=Math.max(a.offsetHeight,t);for(let o=0;o<a.children.length;o++)a.children[o].style.height="";for(let o=0;o<a.children[1].children.length;o++){a.children[1].children[o].style.height="auto",n.getCell(e.columns[0].dataField).render(),t=Math.max(t,8+a.children[1].children[o].offsetHeight);break}return e.$.scrollView.removeChild(a),e.__autoRowHeight=t,e.layout.rowMinHeight&&t<e.layout.rowMinHeight&&(e.__autoRowHeight=e.layout.rowMinHeight),t}get _scrollHeight(){const e=this;let t=e._recyclingRows,n=0,a=e._autoRowHeight,i=0,o=0;if(e.__scrollHeight)return e.__scrollHeight;if(0===t.length||0===e.columns.length||!e.hasVisibleColumn())return 0;e.rows.canNotify=!1;const r=t.length;for(let l=0;l<r;l++){let s=t[l];if(s.visible&&!1!==s.filtered){if((!s.height||!s.cellHeight||s.showDetail||"auto"===s.height||"auto"===s._height||"auto"===e.layout.rowHeight||e.layout.isDirty)&&!s.expandHeight){if(s.detailHeight||(s.detailHeight=200),e.layout.rowHeight){if(e.layout.rowHeight)if("number"==typeof e.layout.rowHeight)e.layout.rowHeight<e.layout.rowMinHeight&&(e.layout.rowHeight=e.layout.rowMinHeight),s.height=e.layout.rowHeight,s.computedHeight&&(s.height=s.computedHeight),void 0!==s.label&&"advanced"===e.grouping.renderMode&&(s.height=e.grouping.groupRowHeight),s.cellHeight=s.height,e.rowDetail.enabled&&s.showDetail&&!e.rowDetail.dialog.enabled&&(s.height+=s.detailHeight);else if("auto"===e.layout.rowHeight){e.layout.rowHeight<e.layout.rowMinHeight&&(e.layout.rowHeight=e.layout.rowMinHeight),s.element=e._rowElements[0],s.element&&s.element.classList.contains("smart-hidden")&&s.element.classList.remove("smart-hidden");const c=s.data&&e.isRendered?s._autoSize(s):a;s.height=c,s.computedHeight&&(s.height=s.computedHeight),void 0!==s.label&&"advanced"===e.grouping.renderMode&&(s.height=e.grouping.groupRowHeight),s.cellHeight=s.height,e.rowDetail.enabled&&s.showDetail&&!e.rowDetail.dialog.enabled&&(s.height+=s.detailHeight)}else e.layout.rowHeight(l,s),s.height||(s.height=a),s.cellHeight=s.height,e.rowDetail.enabled&&s.showDetail&&!e.rowDetail.dialog.enabled&&(s.height+=s.detailHeight)}else{if("auto"===s.height||"auto"===s._height){s.element=e._rowElements[0],s.element&&s.element.classList.contains("smart-hidden")&&s.element.classList.remove("smart-hidden");const c=s.data&&e.isRendered?s._autoSize(s):a;s.height=c,s._height="auto"}else s.height=a;void 0===s.label||s.summaryRow||"advanced"!==e.grouping.renderMode||(s.height=e.grouping.groupRowHeight),s.computedHeight&&(s.height=s.computedHeight),s.cellHeight=s.height,e.rowDetail.enabled&&s.showDetail&&!e.rowDetail.dialog.enabled&&(s.height+=s.detailHeight)}e._rowGap&&l<e.rows.length-1&&(s.height+=e._rowGap)}!0===s.freeze||"near"===s.freeze?i+=s.height:"far"===s.freeze&&(o+=s.height),s.freeze?s.top=n:(s.top!==n&&(s.top=n),n+=s.expandHeight?s.cellHeight:s.height)}else s.height=0,s.cellHeight=0,s.top=n}if(e._summaryRowCount&&e.summaryRow.visible&&(n+=e._summaryRowCount*a),e.filtering&&e.filtering.filterRow.visible&&(i+=a),e.dataSource&&e.dataSource.virtualDataSource&&!1===e.paging.enabled){let l=e.dataSource.length>e.virtualModeCachedRowsCount?e.virtualModeCachedRowsCount:e.dataSource.length;"infinite"===e.scrolling&&(l=e.dataSource.length),l>=e.virtualModeCachedRowsCount&&(n=e.rows[0].height*e.dataSource.length)}return e.__scrollHeight=n,e.__frozenNearHeight=i,e.__frozenFarHeight=o,e._scrollView.scrollHeight=n-e.$.scrollView.offsetHeight+i+o,n=e.__scrollHeight+i+o-1,e.grouping.enabled&&e.dataSource.groupBy.length>0&&e.grouping.groupIndent>0&&"advanced"===e.grouping.renderMode&&(n+=parseInt(e.grouping.groupIndent/2)),e.__scrollHeight=n,e.rows.canNotify=!0,n}_measureColumnHeight(){const e=this;if(e.__measuredColumnHeight)return e.__measuredColumnHeight;const t=document.createElement("smart-grid-column");t.style.height="auto",t.style.position="static";const n=document.createElement("div");n.classList.add("smart-label"),n.innerHTML="aAbBcCdDeEfFgGhHiIjJkKlLmMnNoOpPqQrRwWxXyYzZ1234567890",t.appendChild(n),e.$.columnHeader.appendChild(t);let a=e.$.columnHeader.offsetHeight;return e.$.columnHeader.removeChild(t),e._columnHeights&&e._columnHeights.length>1&&(a=e._columnHeights[0]),a<e.layout.columnMinHeight&&(a=e.layout.columnMinHeight),e.__measuredColumnHeight=a,a}_initializeColumnGroupsHierarchy(){const e=this;let t=0;e.$.columnContainer.innerHTML="";const n=JSON.parse(JSON.stringify(e.columnGroups));if(n.length>0){for(let o=0;o<n.length;o++)n[o].parent=null,n[o].groups=null;for(let o=0;o<e.viewColumns.length;o++)e.viewColumns[o].parent=null,e.viewColumns[o].groups=null;const a=function(o){for(let r=0;r<n.length;r++){let l=n[r];if(l.name===o)return l}return null},i=function(o){let r=new Array;if(o.columnGroup&&r.push(o),o.groups)for(let l=0;l<o.groups.length;l++)if(o.groups[l].columnGroup)r.push(o.groups[l]);else if(o.groups[l].groups){let s=i(o.groups[l]);for(let c=0;c<s.length;c++)r.push(s[c])}return r};for(let o=0;o<n.length;o++){let r=n[o];if(r.groups||(r.groups=null),r.parentGroup){let l=a(r.parentGroup);l&&(r.parent=l,l.groups||(l.groups=new Array),-1===l.groups.indexOf(r)&&l.groups.push(r))}}for(let o=0;o<e.viewColumns.length;o++){let r=e.viewColumns[o];if(r.columnGroup){let l=a(r.columnGroup);l&&(l.groups||(l.groups=new Array),r.parent=l,-1===l.groups.indexOf(r)&&l.groups.push(r))}}for(let o=0;o<e.viewColumns.length;o++){const r=e.viewColumns[o];let l=r;for(r.level=0;l.parent;)l=l.parent,r.level++;l=r;let s=r.level;for(t=Math.max(t,r.level);l.parent;)l=l.parent,l&&(l.level=--s)}for(let o=0;o<n.length;o++){const r=n[o],l=i(r);r.columns=l;let s=new Array,c=0,u="near";0===l.length&&(c=-1,r.visible=!1);for(let p=0;p<l.length;p++)s.push(e.viewColumns.indexOf(l[p])),l[p].freeze&&("far"===l[p].freeze&&(u="far"),c++);c===l.length?r.freeze=u:c>0&&c<l.length&&(e.classList.add("smart-visibility-hidden"),e.error(e.localize("frozenColumns",{elementType:"Grid"}))),s.sort(function(p,g){return(p=parseInt(p))<(g=parseInt(g))?-1:p>g?1:0});for(let p=1;p<s.length;p++)s[p]!==s[p-1]+1&&(e.classList.add("smart-visibility-hidden"),e.error(e.localize("columnGroups",{elementType:"Grid"})))}}e._columnGroupsLevel=1+t,e._columnGroups=n}_refreshColumnHeights(){const e=this;e.$.columnHeader.style.height="",e._viewColumnsHeight=e._measureColumnHeight(),e._columnHeights=[];let t=0;for(let i=0;i<e._columnGroupsLevel;i++){let o=e._viewColumnsHeight;e.layout.columnHeight&&(o="number"==typeof e.layout.columnHeight?e.layout.columnHeight?e.layout.columnHeight:e._viewColumnsHeight:e.layout.columnHeight?e.columnHeight(i):e._viewColumnsHeight),o<e.layout.columnMinHeight&&(o=e.layout.columnMinHeight),o?(e._columnHeights.push(o),t+=o):(t+=e._viewColumnsHeight,e._columnHeights.push(e._viewColumnsHeight))}e._columnHeaderHeight=e._columnGroupsLevel*e._viewColumnsHeight,e._columnHeaderHeight=t,e.$.columnHeader.style.height=e._columnHeaderHeight+"px";const n=function(i){let o=0;for(let r=0;r<i.level;r++)o+=e._columnHeights[r];return o},a=function(i){let o=n(i),r=e._columnHeaderHeight-o;for(let l=i.level+1;l<e._columnHeights.length;l++){const s=l;for(let c=0;c<e.viewColumns.length;c++){const u=e.viewColumns[c];let p=!1;if(u.level===s){let g=u;for(;g.parent;){if(g.parent===i){r=e._columnHeights[s],p=!0;break}g=g.parent}if(p)break}}}return r};for(let i=0;i<e.viewColumns.length;i++){const o=e.viewColumns[i],r=a(o);o.computedHeight=r,o.top=n(o)}for(let i=0;i<e._columnGroupsLevel-1;i++)for(let o=0;o<e._columnGroups.length;o++){const r=e._columnGroups[o];if(r.level!==i)continue;if(r.groups){const s=a(r),c=n(r);r.top=c,r.computedHeight=s}const l=r.element;l&&(l.style.width=r.computedWidth+"px",e.rightToLeft?l.style.right=r.left+"px":l.style.left=r.left+"px",l.style.top=r.top+"px",l.style.height=r.computedHeight+"px",l.style.lineHeight=r.computedHeight+"px")}}_refreshColumnWidths(){const e=this;e.__clientSize=null;let a=e.grouping.enabled&&"advanced"===e.grouping.renderMode?e.grouping.groupIndent*(1+(e.dataSource.groupBy||[]).length):0,i=0;e.selection.checkBoxes.enabled&&(i=e._selectionColumn.computedWidth?e._selectionColumn.computedWidth:e._selectionColumn.minWidth);const o=e._clientSize.width-(e.$.verticalScrollBar.offsetWidth>0?e.$.verticalScrollBar.offsetWidth:0)-a;let r=0,l=[],s=0,c=0,u=0;if(e.editing.enabled&&!e.editing.commandColumn.inline){const p=function(){const g=document.createElement("div"),b=document.createElement("div"),v=e.editing.commandColumn.dataSource;let y=0,x="",D=0;b.classList.add("smart-label");for(let T in v){const M=v[T];let A=!1;if("commandColumnMenu"===T)continue;let B=!1;A||(!0===M.visible?(D++,B=!0):"auto"===M.visible&&((e.editing.editRow||e.editing.editCell)&&!e.editing.dialog.enabled||"commandColumnEdit"!==T?!e.editing.editRow&&!e.editing.editCell||e.editing.dialog.enabled||("commandColumnUpdate"===T||"commandColumnCancel"===T)&&(D++,B=!0):(D++,B=!0)),A=!0),B&&"icon"!==e.editing.commandColumn.displayMode&&(x+="<span>"+("{{messages}}"===M.label?e.localize(T):M.label)+"</span>")}return b.innerHTML="<span>"+x+"</span>",g.appendChild(b),g.style.width="auto",g.style.position="static",e.$.columnHeader.appendChild(g),y=10+b.firstChild.offsetWidth,e.$.columnHeader.removeChild(g),"icon"===e.editing.commandColumn.displayMode?y=20+20*D:y+="labelAndIcon"===e.editing.commandColumn.displayMode?25*D:10*D,y};if(e._commandColumn.visible=e.editing.commandColumn.visible,e.editing.commandColumn.visible){const g=e.editing.commandColumn.width?e.editing.commandColumn.width:p();e.columns.canNotify=!1,e._commandColumn.width=g,e.columns.canNotify=!0}}for(let p=0;p<e.viewColumns.length;p++){const g=e.viewColumns[p];let b;"number"==typeof g.width?b=g.width:g.width&&g.width.toString().indexOf("%")>=0?(b=parseFloat(g.width)/100,b*=o-i):g.width&&(g.width.toString().indexOf("em")>=0||g.width.toString().indexOf("pt")>=0||g.width.toString().indexOf("fr")>=0)?(b=parseFloat(g.width),b*=16):"auto"===g.width?b=g._autoSize():g.visible&&(l.push(g),b=0),g.overflowWidth&&(b-=g.overflowWidth),g.visible&&(r+=b),b<g.minWidth&&(b=g.minWidth),g.computedWidth=b}if(l){let p=o-r,g=0;p<0&&(p=60*l.length);for(let b=0;b<l.length;b++){const v=l[b];let y;y=p/l.length,b===l.length-1&&(y=p-g),v.overflowWidth&&(y-=v.overflowWidth),y<v.minWidth&&(y=v.minWidth),v.computedWidth=y,g+=y}}for(let p=0;p<e.viewColumns.length;p++){let g=e.viewColumns[p];g.visible&&(a>0&&!g.autoGenerated&&(g.computedWidth+=a,a=0),g.freeze?!0===g.freeze||"near"===g.freeze?(g.left=s,u+=g.computedWidth,s+=g.computedWidth):"far"===g.freeze&&(g.left=c,c+=g.computedWidth):(g.left=u,u+=g.computedWidth))}for(let p=0;p<e._columnGroupsLevel-1;p++)for(let g=0;g<e._columnGroups.length;g++){const b=e._columnGroups[g];if(b.level!==p)continue;let v=99999;if(b.groups){const y=function(x){let D=0;for(let T=0;T<x.groups.length;T++){let M=x.groups[T];M.groups?D+=y(M):M.visible&&(v=Math.min(M.left,v),D+=M.computedWidth)}return D};b.computedWidth=y(b),b.left=v}}}_createColumnHeaderCellElements(){const e=this,t=e.$.columnContainer,n=document.createDocumentFragment();let a=0;e._columnElements=[],e.$.columnContainer.innerHTML="",e.$.columnNearContainer.innerHTML="",e.$.columnFarContainer.innerHTML="",e.rightToLeft?(e.$.columnNearContainer.classList.remove("near"),e.$.columnNearContainer.classList.add("far"),e.$.columnFarContainer.classList.remove("far"),e.$.columnFarContainer.classList.add("near")):(e.$.columnNearContainer.classList.remove("far"),e.$.columnNearContainer.classList.add("near"),e.$.columnFarContainer.classList.remove("near"),e.$.columnFarContainer.classList.add("far"));for(let i=0;i<e._frozenNearColumns.length;i++)e._frozenNearColumns[i].createElement();for(let i=0;i<e._frozenFarColumns.length;i++)e._frozenFarColumns[i].createElement();for(let i=0;i<e.viewColumns.length;i++){const o=e.viewColumns[i];if(o.freeze)continue;const r=o.createElement();void 0!==o.computedWidth?(a+=o.computedWidth,e._columnElements.push(r),a<2*e._clientSize.width&&n.appendChild(r)):(e._columnElements.push(r),n.appendChild(r))}for(let i=0;i<e._columnGroups.length;i++){const o=e._columnGroups[i],r=new Smart.Grid.Column({visible:void 0===o.visible||o.visible,allowSort:!1,allowFilter:!1,allowSelect:!1,grid:e,dataField:o.name,label:o.label,align:o.align,verticalAlign:o.verticalAlign,showIcon:!1});o.column=r;const l=r.createElement();l.style.width=o.computedWidth+"px",e.rightToLeft?l.style.right=o.right+"px":l.style.left=o.left+"px",l.style.top=o.top+"px",l.style.height=o.computedHeight+"px",l.style.lineHeight=o.computedHeight+"px",n.appendChild(l),o.element=l,o.grid=this}e.htmlColumnLastChild||(e.htmlColumnLastChild=document.createElement("smart-grid-column"),e.htmlColumnLastChild.classList.add("top-far-corner"),e.htmlColumnLastChild.onpointerdown=i=>{i.stopPropagation(),i.preventDefault()},e.$.columnHeader.appendChild(e.htmlColumnLastChild)),t.appendChild(n),t.style.width=e._computedColumnsWidth+"px",e._refreshFrozenColumns()}_refreshFrozenColumns(){const e=this;e.$.columnNearContainer.style.width=e._frozenColumnsNearWidth+"px",e.$.columnFarContainer.style.width=e._frozenColumnsFarWidth+"px";for(let t=0;t<e._columnGroups.length;t++){const n=e._columnGroups[t];n.freeze&&n.element&&(!0===n.freeze||"near"===n.freeze?e.$.columnNearContainer.appendChild(n.element):"far"===n.freeze&&e.$.columnFarContainer.appendChild(n.element))}for(let t=0;t<e.viewColumns.length;t++){const n=e.viewColumns[t];n.freeze&&n.element&&(!0===n.freeze||"near"===n.freeze?e.$.columnNearContainer.appendChild(n.element):"far"===n.freeze&&e.$.columnFarContainer.appendChild(n.element))}}get _clientSize(){const e=this;if(e.__clientSize)return e.__clientSize;const t=getComputedStyle(e.$.container),n=parseFloat(t.paddingLeft)+parseFloat(t.paddingRight),a=parseFloat(t.paddingTop)+parseFloat(t.paddingBottom),i=parseFloat(t.borderLeftWidth)+parseFloat(t.borderRightWidth),o=parseFloat(t.borderTopWidth)+parseFloat(t.borderBottomWidth);return e.__clientSize={width:e.$.container.offsetWidth-n-i,height:e.$.container.offsetHeight-a-o},e.__clientSize}_initializeRowElements(){const e=this;if(!e.rows)return;e.rows.canNotify=!1;let t=0,n=e._clientSize.height;e.$.rowNearContainer.innerHTML="",e.$.rowFarContainer.innerHTML="",e.$.rowContainer.innerHTML="",e._rowElements=[],e._overflowOffset=Math.max(n,300),e.rightToLeft?(e.$.rowNearContainer.classList.remove("near"),e.$.rowNearContainer.classList.add("far"),e.$.rowFarContainer.classList.remove("far"),e.$.rowFarContainer.classList.add("near")):(e.$.rowFarContainer.classList.remove("near"),e.$.rowFarContainer.classList.add("far"),e.$.rowNearContainer.classList.remove("far"),e.$.rowNearContainer.classList.add("near"));const a=e.offsetHeight;e.$.container.classList.add("smart-hidden");const i=e.offsetHeight;e.$.container.classList.remove("smart-hidden"),"hidden"!==e.verticalScrollBarVisibility&&a===i||(n=e._scrollHeight);const o=function(){const l=document.createDocumentFragment();if(e.rows&&0===e.rows.length)return;for(let c=0;c<e.rows.length;c++){const u=e.rows[c];if(u.freeze)continue;const p=u.createElement();if(l.appendChild(p),t+=e.layout.rowMinHeight,t>e._overflowOffset+n)break}e.$.rowContainer.appendChild(l);const s=e.$.rowContainer.children;for(let c=0;c<s.length;c++){const u=s[c];e.rows[c]&&(e.rows[c].element=u),e._rowElements[c]=u}};for(let l=0;l<e._frozenNearRows.length;l++){const s=e._frozenNearRows[l];s.grid=e;const c=s.createElement();s.element=c,e.$.rowNearContainer.appendChild(c)}for(let l=0;l<e._frozenFarRows.length;l++){const s=e._frozenFarRows[l];s.grid=e;const c=s.createElement();s.element=c,e.$.rowFarContainer.appendChild(c)}o();let r=0;for(;t<1.5*n&&++r<50;)o();e.rows.canNotify=!0}_initializeRows(){const e=this;let t=0;e._frozenNearDefaultRows=[],e._frozenFarDefaultRows=[],e.rows=[],e.rowById=[],e._frozenFarRows=[],e._frozenNearRows=[];const n=function(){let l=[],s=!1;for(let c=0;c<e.columns.length;c++){const u=e.columns[c];let p={};u.summary&&u.summary.length>0&&(s=!0),p[u.dataField]=u.summary,l.push(p)}e._summaryItems=s?e.dataSource.summarize(l):[]},a=function(l,s){let c=null;if(c=l?l.grid?l:new Smart.Grid.Row({data:l,index:s,grid:e}):new Smart.Grid.Row({data:{},index:s,grid:e}),e.onRowInit){e.onRowInit(s,c);for(let u in c)-1!==c.properties.indexOf(u)||u.startsWith("_")||e.error(e.localize("invalidRowProperty",{elementType:"Grid",propertyName:u}))}if(c.selected&&(e._selection.rows[c.id]=!0),c.freeze){if(!0===c.freeze||"near"===c.freeze){e.rows.splice(t++,0,c);const u=e.rows[t-1];-1===e._frozenNearRows.indexOf(u)&&e._frozenNearRows.push(u)}else if("far"===c.freeze){e.rows.push(c);const u=e.rows[e.rows.length-1];-1===e._frozenFarRows.indexOf(u)&&e._frozenFarRows.push(u)}}else e.rows[s]?e.rows.splice(s,0,c):e.rows.push(c);if(!("virtual"===e.scrolling||e.paging.enabled&&e.dataSource&&e.dataSource.virtualDataSource)&&e.onRowInserted){const u=void 0===s?e.rows[e.rows.length-1]:e.rows[s],p=g=>{const b=u;void 0===g||(b.id=b.data.id=g),e.rowById[b.id]=b,-1!==b.index&&void 0!==b.index||(b.index=e.rows.length),e._recycle(!1,!0)};e.onRowInserted(s,u,p)}},i=function(){const l=e.rows[e.rows.length-1];e.rows.pop(),e.onRowRemoved&&e.onRowRemoved(e.rows.length,l)},o=function(l){const s=e.rows[l];s.selected&&s.setProperty("selected",!1),e.rows.splice(l,1),e.onRowRemoved&&e.onRowRemoved(l,s)};e._add=a,e._removeLastRow=i,e._removeAt=o,e._rowHeight=e._autoRowHeight;const r=e.dataSource.length;if(e.setAttribute("aria-rowcount",r),e.dataSource&&e.dataSource.virtualDataSource){let l=e.dataSource.length>e.virtualModeCachedRowsCount?e.virtualModeCachedRowsCount:e.dataSource.length;"infinite"===e.scrolling&&(l=e.dataSource.length);for(let s=0;s<l;s++)a(e.dataSource[s],s)}else for(let l=0;l<e.dataSource.length;l++)a(e.dataSource[l],l);for(let l=0;l<e._frozenFarRows.length;l++){const s=e._frozenFarRows[l];e.rows.splice(e.rows.indexOf(s),1),e.rows.push(s)}if(n(),e.dataSource.notify(function(l){if(e.dataSource._updating)return;const s=l.data;e.rows.canNotify=!1;let c=!1;switch(l.action){case"add":if(!s)return;if(void 0!==s.length)for(let u=0;u<s.length;u++)a(s[u],e.dataSource.length-s.length+u);else a(s,e.dataSource.length-1);break;case"update":if(s.length)for(let u=0;u<s.length;u++){const p=l.index[u];e.rows[p]?(e.rows[p].data=s[u],e.onRowUpdated&&e.onRowUpdated(p,e.rows[p],e.rows[p].data)):(a(s[u],s[u].$.index),c=!0)}else{const u=l.index;e.rows[u]?e.rows[u].data=s:a(s,e.dataSource.length-1),e.onRowUpdated&&e.onRowUpdated(u,e.rows[u],e.rows[u].data)}break;case"insert":a(s,l.index);for(let u=0;u<e.rows.length;u++)e.rows[u].index=u;break;case"remove":o(l.index);break;case"removeLast":i();break;case"bindingComplete":if(e.dataSource&&e.dataSource.url||e.dataSource&&!e.dataSource.virtualDataSource){if(e.appearance.displayLoadingIndicator=!1,e._setLoadingIndicatorVisibility(),e._toggledRow=null,e.dataSource.length!==r){if(e.paging.enabled){const u=e.$.headerPager.querySelector("smart-pager"),p=e.$.footerPager.querySelector("smart-pager");u&&(u.pagesCount=Math.ceil(e.dataSource.length/e._pageSize)),p&&(p.pagesCount=Math.ceil(e.dataSource.length/e._pageSize))}e._initializeRows(),e._initializeRowElements(),e.refresh()}e._recycle()}}n(),("update"!==l.action||c)&&e._refreshLayout(),e._recycle(),e.rows.canNotify=!0}),e._observeRows(),e.summaryRow.visible)for(let l=0;l<e._summaryRowCount;l++){const s=new Smart.Grid.Row({height:e.layout.rowMinHeight,freeze:"near",visible:"near"===e.summaryRow.position,summaryRowIndex:l,summaryRow:!0}),c=new Smart.Grid.Row({height:e.layout.rowMinHeight,freeze:"far",visible:"far"===e.summaryRow.position,summaryRowIndex:l,summaryRow:!0});e._frozenNearRows.splice(0,0,s),e._frozenFarRows.push(c)}if(e.filtering.enabled&&e.filtering.filterRow.visible){const l=new Smart.Grid.Row({freeze:!0,autoGenerated:!0,filterRow:!0});e._frozenNearRows.splice(0,0,l)}e._renderAddNewRow()}_observeRows(){const e=this;e._frozenNearRows=[],e._frozenFarRows=[],e.rows=new Smart.ObservableArray(e.rows,null,{allowToggle:!0,allowResize:!0,allowCheck:!0,allowSelect:!0,allowReorder:!0,expanded:!0,selected:!0,checked:!0,visible:!0,enabled:!0,minHeight:!0,height:!0,freeze:!0,showDetail:!0,data:!0,visibleIndex:!0,index:!0});for(let t=0;t<e.rows.length;t++){const n=e.rows[t];!0===n.freeze||"near"===n.freeze?e._frozenNearRows.push(n):"far"===n.freeze&&e._frozenFarRows.push(n),e.rowById[e.rows[t].id]=n}e.rows.notify(function(t){if(!e.rows.canNotify)return;const n=t.action;if("length"!==n){if(t.path)return e.rows.canNotify=!1,e.rowById[t.target.id]&&(i=t.propertyName,(o=t.oldValue)===(r=t.newValue)&&"selected"!==i&&"showDetail"!==i||t.target.propertyChanged(i,o,r)),void(e.rows.canNotify=!0);var i,o,r;if(e.rows.canNotify=!1,e.dataSource){switch(e.dataSource.canNotify=!1,n){case"add":{const l=function(s){let c=e.rows[s];if(c instanceof Smart.Grid.Row==0){c=new Smart.Grid.Row(c);const u=e.rows.canNotify;e.rows.canNotify=!1,t.object[s]=c,c=t.object[s],e.rows.canNotify=u}if(c.grid=e,e.dataSource&&e.dataSource.virtualDataSource){e.rows.canNotify=!1;for(let u=0;u<e.rows.length;u++){const p=e.dataSource.boundSource[u],g=e.rows[u];g.data=p,g.id=p.$.id,e.rowById[g.id]=g}e.rows.canNotify=!0}else s<e.dataSource.length?e.dataSource.insert(s,e.rows[s].data):e.dataSource.add(e.rows[s].data),c.data=e.dataSource[s],e.rowById[c.id]=c,c.selected&&(e._selection.rows[c.id]=!0),c.freeze&&(!0===c.freeze||"near"===c.freeze?e._frozenNearRows.push(c):"far"===c.freeze&&e._frozenFarRows.push(c))};for(let s=0;s<t.addedCount;s++)l(t.index+s);break}case"update":{const l=e.rowById[t.target.id],s=e.rows.indexOf(l);e.dataSource.update(s,l);break}case"remove":{if(e.dataSource&&e.dataSource.virtualDataSource){e.rows.canNotify=!1;const s=t.removed&&t.removed.length>0?t.removed[0]:null;s&&delete e.rowById[s.id];for(let c=0;c<e.dataSource.boundSource.length;c++){const u=e.dataSource.boundSource[c],p=e.rows[c];p.data=u,p.id=u.$.id,e.rowById[p.id]=p}return e.rows.canNotify=!0,void e.refresh()}const l=t.removed&&t.removed.length>0?t.removed[0]:null;l&&delete e.rowById[l.id],e.dataSource.removeAt(t.index);break}}e.dataSource.canNotify=!0,e.rows.canNotify=!0,n&&(e.isInitialized&&e._rowElements&&e._rowElements.length<e.rows.length&&e._initializeRowElements(),e.refresh(),e._refreshPagesCount(),e._sortedColumns&&e._sortedColumns.length>0&&e.refreshSort())}}})}render(){const e=this,t=()=>0===e.offsetWidth||0===e.offsetHeight;if(t())return requestAnimationFrame(()=>{e.isInitialized||t()||e._render()}),e.setAttribute("role","grid"),e.editing.enabled||e.setAttribute("aria-readonly",!0),void super.render();const n=e.context;e.context=e,e.setAttribute("role","grid"),e.editing.enabled||e.setAttribute("aria-readonly",!0),e._render(),e.context=n,super.render()}_renderColumns(e){const t=this;t._initializeColumns(),t._initializeColumnGroupsHierarchy(),t._refreshColumnsResponsiveVisibility(),t._createColumnHeaderCellElements(),t._renderColumnGroupHeaders(),!1!==e&&t._refresh()}_renderRows(e){const t=this;t._initializeRows(),t._initializeRowElements(),!1!==e&&t._refresh()}_render(){const e=this;if(e.isInitialized||(e.onBeforeInit&&(e.onBeforeInit(),e.onBeforeInit=null),e.$.fireEvent("beforeInit",{grid:e})),(()=>{if(null===e.dataSource)e.dataSource=new Smart.DataAdapter;else if(Array.isArray(e.dataSource)||"string"==typeof e.dataSource){let n=[];if(e.dataSourceSettings.dataFields&&e.dataSourceSettings.dataFields.length>0)e.dataSource=new Smart.DataAdapter({dataSource:e.dataSource,dataSourceType:e.dataSourceSettings.dataSourceType,dataFields:e.dataSourceSettings.dataFields,keyDataField:e.dataSourceSettings.keyDataField,parentDataField:e.dataSourceSettings.parentDataField,childrenDataField:e.dataSourceSettings.childrenDataField,groupBy:e.dataSourceSettings.groupBy,mapChar:e.dataSourceSettings.mapChar,root:e.dataSourceSettings.root,record:e.dataSourceSettings.record,autoGenerateColumns:e.autoGenerateColumns,id:e.dataSourceSettings.id,virtualDataSource:e.dataSourceSettings.virtualDataSource,virtualDataSourceOnExpand:e.dataSourceSettings.virtualDataSourceOnExpand});else if(e.columns&&e.columns.length){for(let a=0;a<e.columns.length;a++){const i=e.columns[a];n.push({name:i.dataField,dataType:i.dataType||"string"})}e.dataSource=new Smart.DataAdapter({dataSource:e.dataSource,dataFields:n,dataSourceType:e.dataSourceSettings.dataSourceType,keyDataField:e.dataSourceSettings.keyDataField,parentDataField:e.dataSourceSettings.parentDataField,childrenDataField:e.dataSourceSettings.childrenDataField,groupBy:e.dataSourceSettings.groupBy,mapChar:e.dataSourceSettings.mapChar,root:e.dataSourceSettings.root,record:e.dataSourceSettings.record,autoGenerateColumns:e.autoGenerateColumns,id:e.dataSourceSettings.id,virtualDataSource:e.dataSourceSettings.virtualDataSource,virtualDataSourceOnExpand:e.dataSourceSettings.virtualDataSourceOnExpand})}else e.dataSource=new Smart.DataAdapter({dataSource:e.dataSource})}})(),e._selection={rows:[],columns:[],cells:[]},e.dataSource&&e.dataSource.url&&(e.appearance.displayLoadingIndicator=!0,e._setLoadingIndicatorVisibility(),e.dataSource.data={sorting:e.getSortedColumns(),filtering:e.getFilteredColumns(),grouping:[]}),e.filtering.filterRow)for(let n=0;n<e.columns.length;n++)e.columns[n]._filterEditorInitialized&&(e.columns[n]._filterEditorInitialized=!1);const t=!e.isInitialized;if(t&&(e.onInit&&(e.onInit(),e.onInit=null),e.$.fireEvent("init",{grid:e})),e._renderColumns(!1),e._renderRows(!1),e._renderPagers(),e._renderCommandBar(),e._renderConditionalFormatting(),e.appearance.allowColumnStickyPosition&&e._stickHeader(),e.header.visible&&""===e.header.template&&(e.$.header.innerHTML='<smart-grid-toolbar header-position="top"></smart-grid-toolbar>',e.$.headerBar=e.$.header.firstElementChild,e.$.headerBar._init(e)),e.isInitialized)e.refreshFilters();else{for(let n=0;n<e.viewColumns.length;n++){const a=e.viewColumns[n];if(!a.allowSort||!a.sortOrder)continue;const i=e.appearance.allowSortAnimation;e.appearance.allowSortAnimation=!1,e.sortBy(a.dataField,a.sortOrder),e.appearance.allowSortAnimation=i}if(e.filtering.filter.length>0){for(let n=0;n<e.filtering.filter.length;n++){const a=e.filtering.filter[n];if(a){const i=a[0],o=a.splice(1);let r=null;if(o instanceof Smart.FilterGroup)r=o;else{const l=e.columnByDataField[i];l&&(r=e.dataSource._createFilter(l.dataType,o))}r&&e.addFilter(i,r,!1)}}e.refreshFilters()}}if(e.viewColumns.canNotify=!0,e.isInitialized=!0,("virtual"===e.scrolling||e.paging.enabled&&e.dataSource&&e.dataSource.virtualDataSource||e.dataSource&&e.dataSource.virtualDataSource)&&e._virtualDataRequest("dataBind"),""!==e.header.template&&e._applyTemplate(e.header.template,e.$.header),""!==e.footer.template&&e._applyTemplate(e.footer.template,e.$.footer),e._createFilterPanels(),e._refresh(),e._applyScrolling(),e.grouping.enabled&&e.grouping.autoExpandAll&&e.rowHierarchy&&e.expandAllRows(),e.onRender&&(e.onRender(t),e.onRender=null),e.isRendered=!0,"auto"===e.layout.rowHeight&&(e._refreshLayout(),e._recycle()),t&&(e.onAfterInit&&(e.onAfterInit(),e.onAfterInit=null),e.$.fireEvent("afterInit",{grid:e}),e.isRendering=!1,e.whenRenderedCallbacks)){for(let n=0;n<e.whenRenderedCallbacks.length;n++)e.whenRenderedCallbacks[n]();e.whenRenderedCallbacks=[]}}get _viewRows(){const e=this;if(e.__viewRows)return e.__viewRows;e._nearRowsAdded||(e._nearRowsAdded=[],e._farRowsAdded=[]);const t=e.rowHierarchy?e.rowHierarchy:e.rows.toArray(),n=[].concat(e._frozenNearDefaultRows,e._nearRowsAdded,t,e._farRowsAdded,e._frozenFarDefaultRows);return e.__viewRows=n,n}_toHex(e){if(-1!==e.indexOf("#"))return e;const t=/rgb\((\d+), (\d+), (\d+)\)/g.exec(e);return t?"#"+(parseFloat(t[1]).toString(16).padStart(2,"0")+parseFloat(t[2]).toString(16).padStart(2,"0")+parseFloat(t[3]).toString(16).padStart(2,"0")).toUpperCase():"#FFFFFF"}_renderConditionalFormatting(){const e=this,t=e.conditionalFormatting;if(!t||0===t.length)return;const n=getComputedStyle(e);e._defaults={fontFamily:n.fontFamily,fontSize:n.fontSize,text:e._toHex(n.color),highlight:e._toHex(n.backgroundColor)};const a=e._defaults,i=new Smart.Utilities.ConditionalFormatter(e.dataSource),o=[];for(let s=0;s<t.length;s++){t[s]=Object.assign({column:"all",condition:"lessThan",firstValue:0,secondValue:1,fontFamily:a.fontFamily,fontSize:a.fontSize,text:a.text,highlight:a.highlight},t[s]);const c=t[s],u="all"===(r=c.column)?e.columns&&e.columns.map?e.columns.map(b=>b.dataField):[]:[r],p=c.condition;i.color=c.highlight,i.comparator=c.firstValue,i.min=c.firstValue,i.max=c.secondValue;const g=i.format(p,u);for(let b in g){const v=g[b];for(let y in v){const x=v[y];x.color=c.text,x.fontFamily=c.fontFamily,x.fontSize=c.fontSize}}o.push(g)}var r;if(e._formattingPanel&&(e._formattingPanel.items=t),0===o.length)return o[0];const l={};for(let s=0;s<o.length;s++){const c=o[s];for(let u in c){const p=c[u];l[u]||(l[u]={});for(let g in p)l[u][g]=Object.assign({},l[u][g],p[g])}}e._conditionalFormatting=l}_stickHeader(){const e=this;e._stickyHeaderHandler=function(){e._handleStickyHeader()},e.$.columnHeader.style.top="",e.$.columnHeader.classList.remove("smart-columns-sticky");let t=e.parentNode;for(e.isInShadowDOM&&t===e.getRootNode()&&(t=e.getRootNode().host);t!==document&&t;)t.addEventListener("scroll",e._stickyHeaderHandler),t=t.parentNode,e.isInShadowDOM&&t===e.getRootNode()&&(t=e.getRootNode().host);try{null!==window.top&&window.top!==window.self&&window.top.document.addEventListener("scroll",e._stickyHeaderHandler)}catch(n){}e._handleStickyHeader()}_unstickHeader(){const e=this;e.$.columnHeader.style.top="",e.$.columnHeader.classList.remove("smart-columns-sticky");let t=e.parentNode;for(;t!==document.body;)t.removeEventListener("scroll",e._stickyHeaderHandler),t=t.parentNode,e.isInShadowDOM&&t===e.getRootNode()&&(t=e.getRootNode().host);try{(""!==document.referrer||window.frameElement)&&null!==window.top&&window.top!==window.self&&window.top.document.removeEventListener("scroll",e._stickyHeaderHandler)}catch(n){}}_handleStickyHeader(){const e=this;if(e.appearance.allowColumnStickyPosition)if(e.$.columnHeader.classList.add("smart-columns-sticky"),0===document.scrollTop&&0===e.parentElement.scrollTop)e.$.columnHeader.style.top="";else{let t=e.parentNode,n=0;for(;t!==document.body;)n+=parseInt(t.scrollTop),t=t.parentNode,e.isInShadowDOM&&t===e.getRootNode()&&(t=e.getRootNode().host);const a=parseInt(e.clientTop+n);e.$.columnHeader.style.top=a+"px";let i=0;window.top!==window.self&&parseInt(window.top.scrollY)>parseInt(e._offsetTop(window.frameElement))&&(i=parseInt(window.top.scrollY)-parseInt(e._offsetTop(window.frameElement))),window.scrollY+i>e.offsetTop&&(e.$.columnHeader.style.top=parseInt(window.scrollY)-parseInt(e.offsetTop)+a+i+"px")}}_scrollHandler(){this._handleStickyHeader()}_initializeRowNumberColumn(){const e=this;if(e._frozenNearColumns&&e._frozenNearColumns.length>0&&e._frozenNearColumns[0].rowHeaderColumn)return void(e._frozenNearColumns[0].visible=e.appearance.showRowHeaderNumber||e.appearance.showRowHeader);const t=new Smart.Grid.Column({dataField:"_rowHeaderColumn",label:"",allowSelect:!1,freeze:!0,visible:!0,grid:e,autoGenerated:!0,rowHeaderColumn:!0,cellsAlign:"center"});let a=e.appearance.showRowHeaderNumber?t._measureSize(e.rows?e.rows.length:e.dataSource?e.dataSource.length:0):30;e.layout.autoGenerateColumnWidth&&(a=e.layout.autoGenerateColumnWidth),t.width=a,t.createElement();const i=new Smart.Observable(t,t.observables);e.viewColumns.splice(0,0,i),e._frozenNearColumns.splice(0,0,i)}_initializeColumns(){const e=this;if("number"==typeof e.columns){const u=[],p="A".charCodeAt(0);let g="",b=0;for(let v=0;v<e.columns;v++){let y=v+1;const x=String.fromCharCode(p+b);b++,"number"!==e.appearance.autoGenerateColumnLabelMode&&(y=g+x),u.push({align:"center",label:y,dataField:g+x,width:100}),b>=26&&(b=0,g+="A")}e._boundColumns=u}else e._boundColumns=Array.isArray(e.columns)?[...e.columns]:[...e.columns.toArray()];e._initColumns=e.columns,e.columnByDataField=[],e.viewColumns=[],e.columns=new Smart.ObservableArray,e._frozenFarColumns=[],e._frozenNearColumns=[],e._summaryRowCount=0;let t=0;const n=function(u){if(e.dataSource.dataFields){const p=e.dataSource.dataFields.find(b=>{if(b.name===u.dataField)return b}),g=p&&p.dataType||"string";u.dataType||(u.dataType=g)}};if(0===e._boundColumns.length&&e.dataSource&&e.dataSource[0]&&!1!==e.dataSource.autoGenerateColumns){const u=e.dataSource[0];if(u.$&&u.$.isEmpty&&e.dataSource.dataFields)for(let p=0;p<e.dataSource.dataFields.length;p++){const g=e.dataSource.dataFields[p],b=e._boundColumns.length;e._boundColumns.push({index:b,visibleIndex:b,label:g.name,dataField:g.name,dataType:g.dataType})}else for(let p in u){if(p.startsWith("_")||"$"===p)continue;const g=e._boundColumns.length,b={index:g,visibleIndex:g,label:p,dataField:p};n(b),e._boundColumns.push(b)}}for(let u=0;u<e._boundColumns.length;u++){let p=e._boundColumns[u];if("string"==typeof p){if(e.dataSource.dataFields){const v=e.dataSource.dataFields.find(y=>{if(y.name===p)return y});p={label:p,dataField:p,dataType:v&&v.dataType||"string"}}}else n(p);p.visibleIndex=u,p.index=u,p.grid=e;const g=new Smart.Grid.Column(p);e.onColumnInit&&e.onColumnInit(u,g);for(let v in g)-1!==g.properties.indexOf(v)||v.startsWith("_")||e.error(e.localize("invalidColumnProperty",{elementType:"Grid",propertyName:v,type:g.dataField||"Column"}));g.grid=e,e.columns.push(g);const b=e.columns[e.columns.length-1];e._summaryRowCount=Math.max(e._summaryRowCount,g.summary.length),g.freeze?!0===g.freeze||"near"===g.freeze?(e.viewColumns.splice(t++,0,b),e._frozenNearColumns.push(b)):"far"===g.freeze&&e._frozenFarColumns.push(b):e.viewColumns.push(b),e.columnByDataField[g.dataField]&&(b.parent=e.columnByDataField[g.dataField],e.columnByDataField[g.dataField].children||(e.columnByDataField[g.dataField].children=[]),e.columnByDataField[g.dataField].children.push(b),g.valueField=g.dataField,g.dataField+="_"+e.columnByDataField[g.dataField].children.length,g.displayField=g.valueField),e.columnByDataField[g.dataField]=b,e.onColumnInserted&&e.onColumnInserted(u,g)}e.viewColumns=e.viewColumns.concat(e._frozenFarColumns),e.setAttribute("aria-colcount",e._boundColumns.length);let a=0;if((e.appearance.showRowHeaderNumber||e.appearance.showRowHeader)&&(e._initializeRowNumberColumn(),a++),e.rowDetail.enabled){const u=20,p=new Smart.Grid.Column({dataField:"_rowDetailColumn",allowSelect:!1,visible:e.rowDetail.visible,label:"",grid:e,freeze:!0,rowDetailColumn:!0,autoGenerated:!0,cellsAlign:"center",width:u,minWidth:u}),g=new Smart.Observable(p,p.observables);"near"===e.rowDetail.position?(p.freeze="near",g.freeze="near",e.viewColumns.splice(a,0,g),e._frozenNearColumns.splice(a,0,g)):(e.viewColumns.push(g),e._frozenFarColumns.splice(0,0,g)),a++}const i=new Smart.Grid.Column({dataField:"_adaptiveColumn",allowSelect:!1,visible:!1,label:"",grid:e,freeze:"far",adaptiveColumn:!0,autoGenerated:!0,cellsAlign:"center",width:30}),o=new Smart.Observable(i,i.observables);o.canNotify=!1,e.viewColumns.push(o),e._frozenFarColumns.splice(0,0,o);const r=new Smart.Grid.Column({dataField:"_commandColumn",allowSelect:!1,visible:e.editing.enabled&&e.editing.commandColumn.visible&&!e.editing.commandColumn.inline,label:"",grid:e,freeze:"far",commandColumn:!0,autoGenerated:!0,align:"center",cellsAlign:"center",width:""}),l=new Smart.Observable(r,r.observables);l.canNotify=!1,"near"===e.editing.commandColumn.position?(r.freeze="near",l.freeze="near",e.viewColumns.splice(a,0,l),e._frozenNearColumns.splice(a,0,l)):(e.viewColumns.push(l),e._frozenFarColumns.splice(0,0,l)),e._commandColumn=l;const s=new Smart.Grid.Column({allowSelect:!1,visible:e.selection.enabled&&e.selection.checkBoxes.enabled,dataField:"_checkBoxColumn",label:"",freeze:e.selection.checkBoxes.position,grid:e,selectionColumn:!0,autoGenerated:!0,cellsAlign:"center",width:32}),c=new Smart.Observable(s,s.observables);if("near"===s.freeze?(e.viewColumns.splice(a,0,c),e._frozenNearColumns.splice(a,0,c)):(e.viewColumns.push(c),e._frozenFarColumns.splice(0,0,c)),e._selectionColumn=c,e._selectionColumn.canNotify=!1,e.editing.addNewColumn.visible){const u=new Smart.Grid.Column({dataField:"_addNewColumn",freeze:"far",allowSelect:!1,visible:!0,title:e.localize("addNewColumn"),label:"",cellsClassName:"smart-add-new-column",className:"smart-add-new-column smart-icon smart-grid-icon show smart-icon-plus",grid:e,adaptiveColumn:!1,autoGenerated:!0,cellsAlign:"center",width:50}),p=new Smart.Observable(u,u.observables);e.viewColumns.push(p),e._frozenFarColumns.splice(0,0,p),e._addNewColumn=p,e._addNewColumn.canNotify=!1}e._observeColumns(),e._templateColumns()}get styleProperties(){return["grid-template-columns","--smart-grid-row-height","--smart-grid-column-header-height","--smart-grid-group-header-height","--smart-grid-filter-footer-height","--smart-grid-group-row-vertical","--smart-grid-group-row-horizontal-offset","--smart-grid-freeze-splitter-size","--smart-grid-resize-line-size","--smart-grid-footer-height","--smart-grid-header-height"]}_templateColumns(){const e=this,t=getComputedStyle(e),n=t.getPropertyValue("--smart-grid-template-columns").trim(),a=t.getPropertyValue("--smart-grid-column-gap").trim(),i=t.getPropertyValue("--smart-grid-row-gap").trim();if(e._rowGap=parseInt(i),e._columnGap=parseInt(a),e._maxHeight=parseInt(t.maxHeight),e._minHeight=parseInt(t.minHeight),"none"!==n){let o=0;for(let u=0;u<e.viewColumns.length;u++)e.viewColumns[u].autoGenerated&&(o+=e.viewColumns[u].visible?e.viewColumns[u].width:0);let r=[];const l=document.createElement("div");l.style.display="grid",l.style.gridTemplateColumns=n;for(let u=0;u<e.columns.length;u++)l.innerHTML+="<div></div>";l.style.width=e.clientWidth-o+"px",e.$.root.appendChild(l);const s=n.split(" ");for(let u=0;u<e.columns.length;u++)r[u]=l.children[u].offsetWidth,"auto"===s[u]&&(r[u]=null);l.parentNode.removeChild(l);let c=0;for(let u=0;u<e.viewColumns.length;u++){const p=e.viewColumns[u];p.autoGenerated||r[c]&&(p.width=p.templateWidth=r[c++])}}else for(let o=0;o<e.viewColumns.length;o++){const r=e.viewColumns[o];r.autoGenerated||r.templateWidth&&(r.width=r.templateWidth=null)}}onAttached(){const e=this;e._scrollView||(e._scrollView=new Smart.Utilities.Scroll(e,e.$.horizontalScrollBar,e.$.verticalScrollBar)),e.isRendered&&e.isCompleted&&e._render()}onDetached(){const e=this;if(!e.isRendered)return;["_dialogChart","_dialogAddRow","_dialogEdit","_dialogDelete","_dialogRowDetail"].forEach(i=>{e[i]&&(e[i].close(),e[i]=null)}),e.menu&&(e.menu.ownerElement=null,e.menu.remove(),e.menu=null),e._resetCachedLayout();const t=e._scrollView.hScrollBar,n=e._scrollView.vScrollBar;if(n.ownerElement=null,t.ownerElement=null,n.onChange=null,t.onChange=null,e._scrollView&&(e._scrollView.unlisten(),delete e._scrollView),e._columnElements)for(let i=0;i<e._columnElements.length;i++)e._columnElements[i]._detach();if(e._columnElements=null,e._rowElements)for(let i=0;i<e._rowElements.length;i++)e._rowElements[i]._detach();e._rowElements=null,e.rows=[],e.rowById=[],e._initColumns=[],e.columnByDataField=[],e.viewColumns=[],e._columnToResizeElement=null;let a=Array.isArray(e.columns)?[...e.columns]:[...e.columns.toArray()];a=a.map(i=>i.data?(void 0!==i.data.visibleIndex&&delete i.data.visibleIndex,void 0!==i.data.index&&delete i.data.index,void 0!==i.data.grid&&delete i.data.grid,i.data):i),e.rows.notifyFn=null,e.columns.notifyFn=null,e.columns.notify=null,e.columns._array=[],e.columns=a,e._boundColumns=[],e._filterPanels=[],e._frozenFarColumns=[],e._frozenNearColumns=[],e._frozenNearDefaultRows=[],e._frozenFarDefaultRows=[],e._frozenFarRows=[],e._frozenNearRows=[],e._selection={rows:[],columns:[],cells:[]},e.__autoHeightRows=null,e._visibleRows=null,e.__viewRows=null,e.__clientSize=null,e.__scrollHeight=null,e.__scrollWidth=null,e.__parentCells=null,e._selectionColumn=null,e._adaptiveColumn=null,e._commandColumn=null,delete e._columnFarContainerComputedStyle,delete e._columnContainerComputedStyle,delete e._columnNearContainerComputedStyle,e._inputOverlay&&(e._inputOverlay.parentNode&&e._inputOverlay.parentNode.removeChild(e._inputOverlay),e._inputOverlay=null),e._firstVisibleColumn=null,e._lastVisibleColumn=null,e._toggledRow=null,Smart(e._selector)&&(delete Smart(e._selector)._properties,Smart(e._selector)),delete e._selector,delete e._initProperties}_observeColumns(){const e=this,t=function(n,a,i,o){i===o&&"selected"!==a||n.propertyChanged(a,i,o)};for(let n=0;n<e.viewColumns.length;n++){const a=e.viewColumns[n];a.rowHeaderColumn||(a.onAction=function(){e._openMenu(this)}),a.autoGenerated&&a.notify(function(i){a.canNotify=!1,t(a,i.propertyName,i.oldValue,i.newValue),a.canNotify=!0})}e.columns.notify(function(n){let a=null;if(n.path)return e.columns.canNotify=!1,t(n.target,n.propertyName,n.oldValue,n.newValue),void(e.columns.canNotify=!0);e.columns.canNotify=!1;let i=0;switch(n.action){case"length":return void(e.columns.canNotify=!0);case"add":{const o=function(r){if(a=n.object[r],a instanceof Smart.Grid.Column==0){a=new Smart.Grid.Column(a);const s=e.columns.canNotify;e.columns.canNotify=!1,n.object[r]=a,a=n.object[r],e.columns.canNotify=s}if(a.grid=e,a.onAction=function(){e._openMenu(this)},a.freeze?e._frozenNearColumns.push(a):"far"===a.freeze&&e._frozenFarColumns.push(a),e.viewColumns.splice(r<e.columns.length?r+e._frozenNearColumns.length:e.viewColumns.length-e._frozenFarColumns.length,0,a),e.columnByDataField[a.dataField]){e.columnByDataField[a.dataField].children.push(a),a.parent=e.columnByDataField[a.dataField],a.valueField=a.dataField;const s=a.dataField+"_"+a.parent.children.length;e.columnByDataField[s]=a,a.dataField=s}else e.columnByDataField[a.dataField]=a;e._dragDrop||e.onColumnInserted&&e.onColumnInserted(r,a)};for(let r=0;r<n.addedCount;r++)o(n.index+r);break}case"update":a=n.object[n.index],a instanceof Smart.Grid.Column==0&&(a=new Smart.Grid.Column(a)),a.grid=e;for(let o=0;o<n.index;o++)e.viewColumns[o].autoGenerated&&i++;e.viewColumns[i+n.index]=a,e.columnByDataField[a.dataField]=a,e.onColumnUpdated&&e.onColumnUpdated(n.index,a);break;case"remove":{a=n.removed[0];let o=n.index,r=e.viewColumns.indexOf(a);if(-1===r){for(let l=0;l<=o;l++)e.viewColumns[l].autoGenerated&&i++;e.viewColumns.splice(i+o,1)}else e.viewColumns.splice(r,1);if(a&&delete e.columnByDataField[a.dataField],e._dragDrop||e.onColumnRemoved&&e.onColumnRemoved(n.index,a),e.columnGroups&&(e._columnGroups=[],e._columnHeights=0,e.viewColumns))for(let l=0;l<e.viewColumns.length;l++){const s=e.viewColumns[l],c=s.element;s.top=0,s.level=0,c&&(c.style.top="",c.style.height="",c.style.lineHeight="")}break}}e._initializeColumnGroupsHierarchy(),e._refreshColumnsResponsiveVisibility(),e._createColumnHeaderCellElements(),e._templateColumns(),e.refresh(),e.columnGroups&&e._columnGroups.length>0&&e._renderColumnGroupHeaders(),e.columns.canNotify=!0})}get _scrollWidth(){const e=this;if(e.__scrollWidth)return e.__scrollWidth;let t=0;for(let n=0;n<e.viewColumns.length;n++){const a=e.viewColumns[n];a.visible&&(t+=a.computedWidth)}return t=parseInt(t),e.__scrollWidth=t,e._scrollView.scrollWidth=t-e._clientSize.width,e.__scrollWidth}_horizontalScrollbarHandler(){const e=this;e.closeMenu(),e.isScrolling=!0,e.isHScrolling=!0,requestAnimationFrame(()=>{e._recycle(),e.isScrolling=!1,e.isHScrolling=!1})}_mouseWheelHandler(e){const t=this;if(t._scrollView.hScrollBar.$.hasClass("smart-hidden")&&t._scrollView.vScrollBar.$.hasClass("smart-hidden")||t._isUpdating||t.editing.isEditing)return;const n=t.querySelector("smart-grid-toolbar");if(!n||!n.$.headerDropDown.classList.contains("open"))if(t.disabled||t._scrollView.vScrollBar.$.hasClass("smart-hidden")||e.shiftKey){if(!t.disabled&&!t._scrollView.hScrollBar.$.hasClass("smart-hidden")){const a=t.scrollLeft;if(0===a&&e.deltaY<0||a===t.scrollWidth&&e.deltaY>0)return;e.stopPropagation(),e.preventDefault(),t._scrollView.scrollTo(t._scrollView.scrollLeft+t._getScrollCoefficient(e,t._clientSize.width),!1)}}else{const a=t.scrollTop;if(0===a&&e.deltaY<0||a===t.scrollHeight&&e.deltaY>0)return;e.stopPropagation(),e.preventDefault();let i=3*t.layout.rowMinHeight;e.deltaY<=0&&(i=-3*t.layout.rowMinHeight),Math.abs(e.deltaY)>=100?t._scrollView.scrollTop+=i:t._scrollView.scrollTop+=e.deltaY}}_refresh(){const e=this;if(e._isUpdating)return;const t=e.$.verticalScrollBar.offsetWidth;e.removeAttribute("grouped"),e.removeAttribute("tree");let n=!0;e.__autoHeightRows&&(e.__autoHeightRows=null,e._refreshColumnsResponsiveVisibility(),e._recycle(),n=!1),e._groups||(e._groups=[]),e.grouping.enabled&&e.dataSource.groupBy&&e.dataSource.groupBy.length>=0&&(e.setAttribute("advanced"===e.grouping.renderMode?"grouped":"tree",""),e._groups||(e._groups=[].concat(e.dataSource.groupBy.toArray())||[]),e._renderGroupBar()),e.grouping.enabled&&e.dataSource.groupBy&&0===e.dataSource.groupBy.length?e.$.breadcrumb&&(e.$.breadcrumb.dataSource=[]):e.dataSource.boundHierarchy&&(e.setAttribute("tree",""),e.setAttribute("role","treegrid")),(e.isInitialized||n)&&e._refreshColumnsResponsiveVisibility(),e._refreshLayout(),t!==e.$.verticalScrollBar.offsetWidth&&(e.__scrollWidth=null,e._refreshColumnsResponsiveVisibility(),e._refreshScrollBars(),0===e.$.verticalScrollBar.offsetWidth&&e.isRendered&&requestAnimationFrame(()=>{e._refreshScrollBars()})),e._refreshSelection(),e._recycle(),e._refreshHeaderBar(),e._recyclingRows&&0===e._recyclingRows.length&&(e.$.placeholder.classList.remove("smart-hidden"),e.scrollWidth=0,e.scrollHeight=0),requestAnimationFrame(()=>{e._width=e.offsetWidth,e._height=e.offsetHeight})}_refreshHeaderBar(){const e=this;e.$.headerBar&&e.header.visible&&e.$.headerBar._refresh()}_resizeHandler(e){const t=this;if((t.enableShadowDOM?e.composedPath()[0]:e.target)===t&&!t._isUpdatingScrollBars){if(!t.isInitialized)return void t._render();if(!1===t._resizeHandling||!t.offsetHeight)return;t._isUpdatingScrollBars=!0,t._autoHeight=!1,t.$.content&&t.$.content.classList.remove("auto-height");const n=t._rowElements?t._rowElements.length*t.layout.rowMinHeight:0;n>0&&t.offsetHeight>=n&&(t._refreshLayout(),t._initializeRowElements()),t.refresh(),t.$.headerBar&&t.$.headerBar.refreshTools(),t._isUpdatingScrollBars=!1}}_refreshColumnsResponsiveVisibility(){const e=this,t=e.$.columnContainer,n=e.$.columnNearContainer,a=e.$.columnFarContainer;let i=0,o=0,r=0,l=!1;for(let u=0;u<e.viewColumns.length;u++){const p=e.viewColumns[u];p._treeColumn=!1,e.grouping.enabled&&p.rowDetailColumn&&(p.canNotify=!1,p.visible=0===e.dataSource.groupBy.length,p.canNotify=!0),p.visible&&!p.autoGenerated&&!l&&e.dataSource.boundHierarchy&&(p._treeColumn=!0,l=!0)}e._refreshColumnWidths();let s=0,c=0;for(let u=0;u<e.viewColumns.length;u++){const p=e.viewColumns[u];p.visible&&(p.freeze&&(!0===p.freeze||"near"===p.freeze?(i+=p.computedWidth,p.autoGenerated&&(s+=p.computedWidth)):"far"===p.freeze&&(o+=p.computedWidth,p.autoGenerated&&(c+=p.computedWidth))),r+=p.computedWidth)}t.style.width=r+"px",n.style.width=i+"px",a.style.width=o+"px",a.classList.remove("smart-hidden"),n.classList.remove("smart-hidden"),0===o&&a.classList.add("smart-hidden"),0===i&&n.classList.add("smart-hidden"),a.classList.remove("border-collapse"),o===c&&a.classList.add("border-collapse"),e._autoGeneratedColumnsNearWidth=s,e._autoGeneratedColumnsFarWidth=c,e._computedColumnsWidth=r,e._frozenColumnsNearWidth=i,e._frozenColumnsFarWidth=o}_selectStartHandler(e){const t=this;t.isScrolling||t.editing.isEditing||t.selection.defaultSelection||e.preventDefault()}setFocusable(e){const t=this;!t.disabled&&e?t.tabIndex=0:t.removeAttribute("tabindex")}_setLoadingIndicatorVisibility(){const e=this;e.appearance.displayLoadingIndicator?e.$.loadingIndicatorContainer.classList.remove("smart-visibility-hidden"):e.$.loadingIndicatorContainer.classList.add("smart-visibility-hidden")}_refreshElementsVisibility(){const e=this,t=function(n,a){n&&(a?n.classList.remove("smart-hidden"):n.classList.add("smart-hidden"))};if(t(e.$.placeholder,!e.rows||e.rows&&0===e.rows.length||0===e.columns.length),t(e.$.footer,e.footer.visible),t(e.$.header,e.header.visible),t(e.$.groupHeader,e.groupHeader.visible||e.grouping.groupBar.visible),t(e.$.columnHeader,e.columnHeader.visible&&e.columns.length>0),t(e.$.headerCommandBar,e.editing.commandBar.visible&&"far"!==e.editing.commandBar.position),t(e.$.footerCommandBar,e.editing.commandBar.visible&&"near"!==e.editing.commandBar.position),t(e.$.breadcrumb,e.groupHeader.visible||e.grouping.groupBar.visible),e.htmlColumnLastChild.classList.add("smart-visibility-hidden"),e.pager&&e.pager.visible&&e.paging.enabled)switch(e.pager.position){case"near":t(e.$.headerPager,!0),t(e.$.footerPager,!1);break;case"far":t(e.$.headerPager,!1),t(e.$.footerPager,!0);break;case"both":t(e.$.headerPager,!0),t(e.$.footerPager,!0)}else t(e.$.footerPager,!1),t(e.$.headerPager,!1);e._refreshRowHierarchy()}_refreshRowHierarchy(e,t=!1){const n=this;n.rowHierarchy=null;let a=0,i=!1;if(!n.grouping.enabled&&n.dataSource.groupBy&&n.dataSource.groupBy.length>0&&(i=!0),(!n.grouping.enabled||!n.dataSource.groupBy||0!==n.dataSource.groupBy.length)&&n.dataSource.boundHierarchy){const o=n.dataSource.reservedNames,r=function(u){const p=new Smart.Grid.Row({data:u,index:n.rows.length});return n.rowById[p.id]=p,p},l=function(u,p){for(let g=0;g<u.length;g++){const b=u[g];let v=n.rowById[b.$.id];v||(v=r(b)),v.data=b,v.leaf=b[o.leaf]||!1,v.level=b[o.level],v.groupDataField=b.groupDataField,v.label=b.label,v.children=[],v.data&&(v.filtered=void 0===v.data.$.filtered||v.data.$.filtered),b.summaryRow&&(v.summaryRow=!0),(null===n._toggledRow||n._toggledRow&&n._toggledRow.id!==v.id)&&(v.expandHeight=0),b.parent?(v.parent=n.rowById[b.parent.$.id],v.parentId=b.parent.$.id):(v.parent=null,v.parentId=null);let y=!!e||v.expanded;if(i&&(y=!0),!0===v.visible&&!1!==v.filtered)if(y||b[o.leaf])if(p.push(v),b.children&&b.children.length>0){const x=l(b.children,new Array);0===x.length&&(v.leaf=!0);for(let D=0;D<x.length;D++)p.push(x[D]);v.children=x}else b.children&&0===b.children.length&&(n.dataSource.virtualDataSource&&n.dataSource.virtualDataSourceOnExpand?v.data._loaded&&(v.leaf=!0):v.leaf=!0);else if(p.push(v),b.children&&b.children.length>0){const x=l(b.children,new Array);0===x.length&&(v.leaf=!0),v.children=x}else b.children&&0===b.children.length&&(n.dataSource.virtualDataSource&&n.dataSource.virtualDataSourceOnExpand?v.data._loaded&&(v.leaf=!0):v.leaf=!0)}return p};let s=n.dataSource.boundHierarchy;if(n.paging.enabled&&!t){let u=[];const p=g=>{let b=[];if(0===n.dataSource.groupBy.length)return g;for(let v=0;v<g.length;v++){const y=g[v];(!y.$||void 0===y.$.filtered||y.$.filtered)&&(b.push(y),y.children&&(b=b.concat(p(y.children))))}return b};if(n.dataSource&&!n.dataSource.virtualDataSource){for(let g=0;g<s.length;g++){let b=s[g];if((!b.$||void 0===b.$.filtered||b.$.filtered)&&0===b.level&&!b.parent){if(0===p(b.children).length)continue;u.push(b)}}s=u.slice(n.paging.pageIndex*n._pageSize,(n.paging.pageIndex+1)*n._pageSize)}}n.rowHierarchy=l(s,new Array);let c=[];for(let u=0;u<n.rowHierarchy.length;u++){const p=n.rowHierarchy[u],g=p.canNotify;p.leaf&&c.push(p),p.canNotify=!1,p.visibleIndex=a++,p.canNotify=g}if(i&&(n.rowHierarchy=c),n._rowElements.length<n.rowHierarchy.length&&!n._toggledRow&&n._initializeRowElements(),n.grouping.summaryRow.visible&&!n.grouping.summaryRow.inline){const u=function(p,g,b,v){if(0!==p&&g.length>0&&g[g.length-1]&&!g[g.length-1].summaryRow){let y={label:" ",boundSource:[],groupDataField:b.data.groupDataField,$:{},summaryRow:!0,leaf:!0,level:p,expandHeight:0,siblings:g};y.$.id="SubRow"+v+"_"+b.data.$.id,b&&(y.parent=b.data,y.parentId=b.data.$.id),y.data=Object.assign(y),g.push(y)}for(let y=0;y<g.length;y++)g[y]&&g[y].data&&g[y].data.children&&u(p+1,g[y].data.children,g[y],y)};u(0,n.rowHierarchy,null,0)}}}applyContent(){}_refreshContentHeight(){const e=this;let t=e._clientSize.height;const n=window.scrollY,a=e.offsetHeight;e.$.container.classList.add("smart-hidden");const i=e.offsetHeight;if(e.$.container.classList.remove("smart-hidden"),window.scrollY!==n&&window.scrollTo(window.scrollX,n),"hidden"===e.verticalScrollBarVisibility||a!==i||e._minHeight&&e._minHeight===a)return t=e._scrollHeight+e.$.columnHeader.offsetHeight+e.$.filterFooter.offsetHeight,0===e._recyclingRows.length&&0===e._scrollHeight&&(t+=e.$.scrollView.offsetTop),e.editing.addNewRow.visible&&1===e._recyclingRows.length&&(t+=e.$.scrollView.offsetTop),e._minHeight>t&&(t=e._minHeight),e.$.content.style.height=t+"px",e._contentHeight=t,void(e._maxHeight<t?(e._autoHeight=!1,e.$.content.classList.remove("auto-height"),e.$.content.style.height=e._maxHeight+"px",e._contentHeight=e._maxHeight):(e._autoHeight=!0,e.$.content.classList.add("auto-height")));e.header.visible&&(t-=e.$.header.offsetHeight),(e.groupHeader.visible||e.grouping.groupBar.visible)&&(t-=e.$.groupHeader.offsetHeight),e.footer.visible&&(t-=e.$.footer.offsetHeight),e.pager.visible&&(t-=e.$.headerPager.offsetHeight,t-=e.$.footerPager.offsetHeight),e.editing.enabled&&e.editing.commandBar.visible&&(t-=e.$.headerCommandBar.offsetHeight,t-=e.$.footerCommandBar.offsetHeight),e.$.content.style.height=t+"px",e._contentHeight=t}appendChild(){const e=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.appendChild.apply(this,e.concat(Array.prototype.slice.call(arguments)))}removeChild(){const e=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.removeChild.apply(this,e.concat(Array.prototype.slice.call(arguments)))}get _contentBorder(){const e=this;if(e.__contentBorder)return e.__contentBorder;const t=getComputedStyle(e.$.content),n={left:parseFloat(t.borderLeftWidth)+parseFloat(t.borderRightWidth),top:parseFloat(t.borderTopWidth)+parseFloat(t.borderBottomWidth)};return e.__contentBorder=n,n}_refreshLayout(){const e=this,t=e.rows;if(e._layoutSuspended)return;e._visibleRows=null,e.__viewRows=null,e.__clientSize=null,e.__scrollHeight=null,e.__scrollWidth=null,e.__parentCells=null,e.$.columnFarContainer.classList.remove("vscroll"),e.$.columnNearContainer.classList.remove("vscroll"),e.$.scrollView.classList.remove("hscroll"),e.$.scrollView.classList.remove("vscroll"),e._refreshElementsVisibility(),e._refreshColumnHeights(),e._refreshContentHeight();const n=()=>{e.$.placeholder.classList.remove("smart-hidden"),e.__filterFooterOffsetHeight||(e.__filterFooterOffsetHeight=e.$.filterFooter.classList.contains("smart-hidden")?0:e.$.filterFooter.offsetHeight),e.__columnHeaderHeight||(e.__columnHeaderHeight=e.$.columnHeader.offsetHeight);const i=e._contentHeight-e.__filterFooterOffsetHeight-e.__columnHeaderHeight;e.$.scrollView.style.height=i+"px",e.scrollWidth=0,e.scrollHeight=0,e.clearSelection(),e._showAddNewRowButton("float"),e.$.content.classList.contains("auto-height")&&(e.$.placeholder.style.height=i+"px")};if(t&&t.url)e._showAddNewRowButton("float");else{if(!t||null===t||0===t.length||0===e.columns.length)return void n();e._showAddNewRowButton("float")}if(0!==e.columns.length&&e.hasVisibleColumn()||n(),e.__columnHeaderHeight||(e.__columnHeaderHeight=e.$.columnHeader.offsetHeight),e.__filterFooterOffsetHeight||(e.__filterFooterOffsetHeight=e.$.filterFooter.classList.contains("smart-hidden")?0:e.$.filterFooter.offsetHeight),e.$.scrollView.style.height=e._contentHeight-e.__filterFooterOffsetHeight-e.__columnHeaderHeight+"px",e.htmlColumnLastChild.style.height=e.__columnHeaderHeight+"px",e.paging.spinner.enabled&&e.paging.enabled){if(!e.pageScroll){const i=document.createElement("smart-scroll-bar");i.orientation="vertical",i.style.height="100%",i.style.width="100%",i.max=Math.ceil(e.dataSource.length/e._pageSize),i.step=e.paging.spinner.step,i.largeStep=e.paging.spinner.step,i.setAttribute("spinner",""),i.setAttribute("smart-id","spinner"),i.ownerElement=e,e.addPropertyBinding("[[paging_spinner_step]]","step",i,e.$.columnHeader),i.addEventListener("change",function(o){e.paging.pageIndex=o.detail.value}),e.pageScroll=i}e.htmlColumnLastChild.appendChild(e.pageScroll)}else e.htmlColumnLastChild.innerHTML="";e._refreshScrollBars()}_refreshScrollBars(){const e=this;if(!e._scrollView)return;const t=e._scrollView.vScrollBar,n=e._scrollView.hScrollBar,a=e._contentHeight-e.__filterFooterOffsetHeight-e.__columnHeaderHeight,i=e.$.scrollView.offsetWidth,o=e._scrollWidth-i-e._contentBorder.left,r=e._scrollHeight-a-e._contentBorder.top,l=e._columnNearContainerComputedStyle?e._columnNearContainerComputedStyle:getComputedStyle(e.$.columnNearContainer),s=e._columnFarContainerComputedStyle?e._columnFarContainerComputedStyle:getComputedStyle(e.$.columnFarContainer),c=parseInt(e.$.columnNearContainer.style.width)+parseInt(l.borderRightWidth),u=parseInt(e.$.columnFarContainer.style.width)+parseInt(s.borderLeftWidth);if(e.__frozenNearWidth=c,e.__frozenFarWidth=u,e._columnNearContainerComputedStyle=l,e._columnFarContainerComputedStyle=s,e._refreshHorizontalScrollBarVisibility(o),e._refreshVerticalScrollBarVisibility(r),t.style.height=a+"px",e.computedVerticalScrollBarVisibility&&(e.__scrollBarSize||(e.__scrollBarSize=t.offsetWidth),e.__scrollWidth+=e.__scrollBarSize,e._refreshHorizontalScrollBarVisibility(e._scrollWidth-i-1),e.rightToLeft?e.$.columnNearContainer.classList.add("vscroll"):e.$.columnFarContainer.classList.add("vscroll"),e._refreshVerticalScrollBarVisibility(r),e.htmlColumnLastChild.classList.remove("smart-visibility-hidden")),n.style.width=i+"px",e.rightToLeft?n.style.right="0px":n.style.left="0px",e.computedVerticalScrollBarVisibility&&e.computedHorizontalScrollBarVisibility&&(n.style.width=i-t.offsetWidth+"px",t.style.height=a-n.offsetHeight+"px"),e.computedHorizontalScrollBarVisibility?(e.$.scrollView.classList.add("hscroll"),e._autoHeight?(e.$.content.style.height="auto",e.$.scrollView.style.height="auto",e.$.scrollView.style.paddingBottom=n.offsetHeight+"px",e.$.placeholder.style.marginTop=n.offsetHeight+"px"):(e.$.scrollView.style.paddingBottom="",e.$.placeholder.style.marginTop="")):e.$.scrollView.classList.remove("hscroll"),(e.__frozenNearHeight>0||e._frozenNearRows&&e._frozenNearRows.length>0)&&!e.appearance.showVerticalScrollBarOnFixedColumns){const p=getComputedStyle(e.$.rowNearContainer),g=e.__frozenNearHeight+parseInt(p.borderBottomWidth);t.style.height=parseInt(t.style.height)-g+"px",t.style.top=g+"px",t.style.setProperty("--smart-scroll-bar-near-size",g+"px")}else e.appearance.showVerticalScrollBarOnFixedColumns&&(t.style.top="0px");if((e.__frozenFarHeight>0||e._frozenFarRows&&e._frozenFarRows.length>0)&&!e.appearance.showVerticalScrollBarOnFixedColumns){const p=getComputedStyle(e.$.rowFarContainer),g=-2+e.__frozenFarHeight+parseInt(p.borderTopWidth);t.style.height=parseInt(t.style.height)-g+"px",t.style.setProperty("--smart-scroll-bar-far-size",g+"px"),0===e.__frozenNearHeight&&(t.style.top="0px")}(c>0||u>0)&&!e.appearance.showHorizontalScrollBarOnFixedColumns&&(n.style.width=parseInt(n.style.width)-c-u+"px",e.rightToLeft?n.style.right=c+"px":n.style.left=c+"px",n.style.setProperty("--smart-scroll-bar-near-size",c+parseInt(l.borderRightWidth)+"px"),n.style.setProperty("--smart-scroll-bar-far-size",u+parseInt(l.borderLeftWidth)+"px"),e.computedVerticalScrollBarVisibility&&(e.__scrollBarSize||(e.__scrollBarSize=t.offsetWidth),n.style.setProperty("--smart-scroll-bar-far-size",u+e.__scrollBarSize+"px"))),t.refresh(),n.refresh()}_refreshHorizontalScrollBarVisibility(e){const t=this;t.scrollWidth=e,t.computedHorizontalScrollBarVisibility||(t.scrollLeft=0)}_refreshVerticalScrollBarVisibility(e){const t=this;if(t._autoHeight)return t.scrollTop=0,void(t.scrollHeight=0);t.computedHorizontalScrollBarVisibility&&(e+=t.$.horizontalScrollBar.offsetHeight),t.scrollHeight=e,t.paging.enabled&&t.paging.spinner.visible&&t.$.verticalScrollBarVisibility.classList.remove("smart-hidden"),t.computedVerticalScrollBarVisibility||(t.scrollTop=0)}_styleChangedHandler(e){const t=this;if(!e.detail.styleProperties.overflow&&!t.classList.contains("smart-grid-resize-mode")){if(e.detail.styleProperties["grid-template-columns"])return t._templateColumns(),void t.refresh();if(e.detail.styleProperties["font-size"])return t.layout.isDirty=!0,t._resetCachedLayout(),void t.refresh();(e.detail.styleProperties["--smart-grid-row-height"]||e.detail.styleProperties["--smart-font-size"]||e.detail.styleProperties["--smart-grid-column-header-height"]||e.detail.styleProperties["--smart-grid-group-header-height"]||e.detail.styleProperties["--smart-grid-filter-footer-height"]||e.detail.styleProperties["--smart-grid-group-row-vertical"]||e.detail.styleProperties["--smart-grid-group-row-horizontal-offset"]||e.detail.styleProperties["--smart-grid-freeze-splitter-size"]||e.detail.styleProperties["--smart-grid-resize-line-size"]||e.detail.styleProperties["--smart-grid-footer-height"]||e.detail.styleProperties["--smart-grid-header-height"])&&(t.layout.isDirty=!0),t.offsetWidth&&t.offsetHeight>0&&(t._resetCachedLayout(),t._refreshLayout(),t._recycle())}}_resetCachedLayout(){const e=this;e.__cellsCommandTemplate=null,e.__autoRowHeight=null,e.__autoHeightRows=null,e.__measuredColumnHeight=null,e.__columnHeaderHeight=null,e.__filterFooterOffsetHeight=null}_swipeLeftHandler(){}_swipeRightHandler(){}_getRowIndexByPosition(e){const t=this;return(n=>{let a=0,i=n.length-1;if(e<=0)return 0;const o=n[n.length-1];if(-1!==o.top&&o.top<=e)return n.length-1;for(;;){const r=Math.floor((a+i)/2),l=n[r];if(t._isRowInPosition(l,e))return r;l.top<e?a=r+1:l.top>e?i=r-1:a=r+1}})(t._recyclingRows)}_getVirtualRowIndexByPosition(e){let t=this.rows[0].height;const n=(a,i)=>0!==t&&a<=i&&a+t>i;return(a=>{let i=0,o=a.length-1;if(e<=0)return 0;const r=(a.length-1)*t;if(-1!==r&&r<=e)return a.length-1;for(;;){const l=Math.floor((i+o)/2),s=l*t;if(n(s,e))return l;s<e?i=l+1:s>e?o=l-1:i=l+1}})(this.dataSource)}getViewRows(){const e=this;return e.rowHierarchy?e.rowHierarchy:e.getVisibleRows()}getColumns(){const e=this,t=[];if(e.columns)for(let n=0;n<e.columns.length;n++){const a=e.columns[n].getState();t.push(a)}return t}getState(){const e=this,t=e.getSortedColumns(),n=e.getFilteredColumns(),a=e.getGroups(),i=e.getSelectedCells(),o=e.getSelectedRows(),r=e.$.headerPager.querySelector("smart-pager");let l=0;return r&&(l=r.pagesCount),{sort:t,filter:n,groups:a,paging:{count:l,index:e.paging.pageIndex,size:e._pageSize},selectedCells:i,selectedRows:o}}get _pageSize(){const e=this;return e.dataSource&&e.grouping.enabled&&e.dataSource.groupBy.length>0?e.paging.pageHierarchySize:e.paging.pageSize}get _recyclingRows(){const e=this;if(e.rowHierarchy)return e.rowHierarchy;let t=e.getVisibleRows();if(e.paging.enabled)if(e.dataSource.virtualDataSource)t=t.slice(0,e._pageSize);else if(t=t.slice(e.paging.pageIndex*e._pageSize,(e.paging.pageIndex+1)*e._pageSize),e.editing.addNewRow&&e.editing.addNewRow.visible&&"button"!==e.editing.addNewRow.displayMode){let n=e.getVisibleRows();return n=n.slice(0===e.paging.pageIndex&&"far"!==e.editing.addNewRow.position?1+e.paging.pageIndex*e._pageSize:0===e.paging.pageIndex&&"far"===e.editing.addNewRow.position?e.paging.pageIndex*e._pageSize:1+e.paging.pageIndex*e._pageSize,1+(e.paging.pageIndex+1)*e._pageSize),[].concat(e._frozenNearDefaultRows,e._nearRowsAdded,n,e._farRowsAdded,e._frozenFarDefaultRows)}return t}_isRowInPosition(e,t){return 0!==e.height&&e.top<=t&&e.top+e.height>t}_renderColumnGroupHeaders(){const e=this;for(let t=0;t<e._columnGroups.length;t++){const n=e._columnGroups[t];n.column.render(),n.column.allowReorder=!1,n.column.element.setAttribute("columnHeader",""),0===n.columns.length&&n.column.element.classList.add("smart-hidden"),0===t&&n.column.element.classList.add("smart-grid-column-border-collapse")}}hasVisibleColumn(){const e=this;for(let t=e.viewColumns.length-1;t>=0;t--){const n=e.viewColumns[t];if(n.visible&&!n.autoGenerated)return!0}return!1}_isLastVisibleColumn(e){const t=this;for(let n=t.viewColumns.length-1;n>=0;n--){const a=t.viewColumns[n];if(a.visible)return a===e}return!1}_recycle(e,t){const n=this;if(n._layoutSuspended||!1===n.isAttached||n._isUpdating||n.editing.isEditing&&(n.endEdit(),n._isUpdating))return;n._removeCellContentPopup(),n._inputOverlay&&(n._inputOverlay.parentNode&&n._inputOverlay.parentNode.removeChild(n._inputOverlay),n._inputOverlay=null),n._selection.selectionRect&&n._refreshCellSelectionRect();const a=n._scrollView.scrollTop;let i,o=n._getRowIndexByPosition(a),r=n._recyclingRows,l=r[o],s=l?l.top:0,c=0,u=0,p=0,g=0;for(let v=0;v<n._cellsMerge.length;v++){const y=n._cellsMerge[v],x=r.indexOf(y.row);if(o>x&&o<=x+y.rowSpan&&(o=x,l=y.row,p=Math.max(p,s-l.top),s=l.top,n.$.rowContainer.style.top=n.__frozenNearHeight-a+s+"px"),y.colSpan>1)for(let D=0;D<n.viewColumns.length;D++){const T=n.viewColumns[D];let M=T.autoGenerated?T:n.columnByDataField[T.dataField];if(M.visible&&M.left+M.computedWidth-n._scrollView.scrollLeft>=c&&M.left-M.computedWidth-n._scrollView.scrollLeft<n._clientSize.width){g=Math.max(g,M.left-n.columnByDataField[y.column.dataField].left+M.computedWidth);break}}}if(!1!==e||n._cellsMerge.length>0){for(let v=0;v<n._columnElements.length;v++){const y=n._columnElements[v];if(!y.parentNode)break;y.set("column",null,!1),y.classList.add("smart-visibility-hidden")}for(let v=0;v<n._columnGroups.length;v++){const y=n._columnGroups[v],x=y.element;n.rightToLeft?x.style.right=y.right+"px":x.style.left=y.left+"px",x.style.width=y.computedWidth+"px"}n._firstVisibleColumn=null,n._lastVisibleColumn=null;for(let v=0;v<n.viewColumns.length;v++){let y=n.viewColumns[v];if(y.visible&&(n._firstVisibleColumn||(n._firstVisibleColumn=y),n._lastVisibleColumn=y),y.element&&(y===n._firstVisibleColumn||y.rowDetailColumn?y.element.classList.add("smart-grid-column-border-collapse"):y.element.classList.remove("smart-grid-column-border-collapse"),y.element.removeAttribute("aria-colindex")),y.freeze){if(!0!==y.freeze&&"near"!==y.freeze||y.visible&&(c+=y.computedWidth),!y.element)continue;y.visible?(y.element.classList.remove("smart-visibility-hidden"),y.render()):y.element.classList.add("smart-visibility-hidden")}else if(y.visible&&y.left+y.computedWidth-n._scrollView.scrollLeft>=c-g&&y.left-y.computedWidth-n._scrollView.scrollLeft<n._clientSize.width){const x=n._columnElements[u++];x.set("column",y,!1),x.parentNode||n.$.columnContainer.appendChild(x),y.element=x,y.render(),x.setAttribute("aria-colindex",v+1),void 0===i&&(i=y.left)}}}if(void 0===i&&(i=0),n.rightToLeft?n.$.columnContainer.style.right=n._scrollView.scrollWidth-n._scrollView.scrollLeft-n._scrollView.vScrollBar.offsetWidth+"px":n.$.columnContainer.style.left=-n._scrollView.scrollLeft+"px",n.$.rowContainer.style.top=n.__frozenNearHeight-a+s+"px",n.isScrolling&&!n.isHScrolling&&(n._scrollUpdate&&clearTimeout(n._scrollUpdate),n._scrollUpdate=setTimeout(function(){n.isScrolling||(n.$.rowContainer.style.top=parseInt(n.$.rowContainer.style.top)+.01+"px")},50)),!1===t||!n._rowElements)return;const b=n.dataSource&&n.dataSource.virtualDataSource&&!n.dataSource.virtualDataSourceOnExpand&&n.dataSource.length>n.virtualModeCachedRowsCount&&"infinite"!==n.scrolling;if(o>=0){u=0;let v=Math.max(n._clientSize.height,n._overflowOffset),y=0;b&&(n.rowById=[],void 0===n.rows[n.rows.length-1].top&&(n.rows[n.rows.length-1].top=(n.rows.length-1)*n.rows[0].height),n.rows&&n.rows.length>0&&(y=n._getVirtualRowIndexByPosition(a),s=y*n.rows[0].height,n.$.rowContainer.style.top=n.__frozenNearHeight-a+s+"px",n.paging.enabled||(o=0)),n.paging.enabled&&(y=n.paging.pageIndex*n._pageSize));for(let x=o;x<r.length;x++){const D=r[x];if(0===D.height||!D.visible||!1===D.filtered||D.freeze)continue;const T=D.height;if(D.expandHeight&&(v+=n.offsetHeight+D.expandHeight),!(s+T>=a-p&&s<=a+v||n._autoHeight))break;{const M=n._rowElements[u++];if(!M)break;M.setAttribute("aria-rowindex",y+x+1),D.element=M,D.grid=n,b&&(D.index=x+y,D.visibleIndex=x+y,n.paging.enabled?(D.data=n.dataSource[o+u-1],D.data&&(D.id=D.data.$.id,n.rowById[D.id]=D)):(D.data=n.dataSource[u-1],D.data&&(D.id=D.data.$.id,n.rowById[D.id]=D))),D.render()}s+=T}}if(n._renderFrozenRows(),u<n._rowElements.length)for(let v=u;v<n._rowElements.length;v++){const y=n._rowElements[u++];y.classList.add("smart-hidden"),y.removeAttribute("aria-rowindex")}b&&n._selection.selectionRect&&n._refreshCellSelectionRect()}_renderFrozenRows(){const e=this;let t=!1,n=!1;0===e._frozenNearRows.length?e.$.rowNearContainer.classList.add("smart-hidden"):e.$.rowNearContainer.classList.remove("smart-hidden");for(let a=0;a<e._frozenNearRows.length;a++){const i=e._frozenNearRows[a];i.visible&&i.filtered&&(t=!0,i.element=e.$.rowNearContainer.children[a],i.element||(i.element=i.createElement(),e.$.rowNearContainer.appendChild(i.element)),i.render())}t||e.$.rowNearContainer.classList.add("smart-hidden"),0===e._frozenFarRows.length?e.$.rowFarContainer.classList.add("smart-hidden"):e.$.rowFarContainer.classList.remove("smart-hidden");for(let a=0;a<e._frozenFarRows.length;a++){const i=e._frozenFarRows[a];i.visible&&(n=!0),i.element=e.$.rowFarContainer.children[a],i.element||(i.element=i.createElement(),e.$.rowFarContainer.appendChild(i.element)),i.render()}n||e.$.rowFarContainer.classList.add("smart-hidden")}_recycleRotate(e,t,n,a,i){const o=t.getBoundingClientRect(),r=e.getBoundingClientRect();let l=0,s=0;return 0===r.width?(e.innerHTML=i,!1):(o.left>r.left&&(l=r.left-o.left),o.top<r.top&&(s=r.top-o.top),"left"!==n&&""!==n||(l=4),"center"===n&&(l+=r.width/2-o.width/2),"right"===n&&(l+=r.width-o.width-4),"top"!==a&&""!==a||(s=4),"center"!==a&&"middle"!==a||(s+=r.height/2-o.height/2),"bottom"===a&&(s+=r.height-o.height-4),t.style.left=l+"px",t.style.top=s+"px",!0)}_virtualDataRequest(e,t){const n=this;let a=-1,i=-1;if(!n._rowElements&&"infinite"!==n.scrolling)return;if("virtual"===n.scrolling){for(let s=0;s<n._rowElements.length;s++){const c=n._rowElements[s],u=c.row,p=0===s?u.visibleIndex:a+s;c.classList.contains("smart-hidden")||(-1===a&&(a=p),-1!==p&&(i=1+p))}0===n._rowElements.length&&(a=0,i=Math.max(20,parseInt(n.offsetHeight/n.layout.rowMinHeight*1.5)))}else"infinite"===n.scrolling?(a=1/0,i=1/0):(a=0,i=n.dataSource.length);i!==1/0&&(n.dataSource.virtualDataSourceLength||n.dataSource.length)&&(i=Math.min(i,n.dataSource.length)),n.paging.enabled&&(a=n.paging.pageIndex*n._pageSize,i=a+n._pageSize),n.appearance.displayLoadingIndicator=!0,n._setLoadingIndicatorVisibility(),n._groups||(n._groups=[].concat(n.dataSource.groupBy.toArray())||[]);const o={first:a,last:i,edit:n._editInfo,sorting:n.getSortedColumns(),filtering:n.getFilteredColumns(),grouping:n._groups,row:n._toggledRow?n._toggledRow.data:null,action:e},r=n.dataSource.length,l=n.dataSource.boundSource.length;void 0===n._isFirstVirtualDataSourceRequest&&(n._isFirstVirtualDataSourceRequest=!0),n.dataSource.onVirtualDataSourceRequested(function(s){if(n.appearance.displayLoadingIndicator=!1,n._setLoadingIndicatorVisibility(),n._toggledRow=null,"add"===s.action||"update"===s.action||"remove"===s.action)return void(t&&t(s.result));const c=n.context;if(n.context=n,n._isFirstVirtualDataSourceRequest&&0===n._initColumns.length&&(n.columns.canNotify=!1,n.columns=[],n._renderColumns(),n.columns.canNotify=!0),"expand"===s.action)n.refresh();else if("scroll"===s.action)if("infinite"===n.scrolling)n._recycle(!1,!1);else{const p=s.last!==1/0?s.last:0;let g=0;for(let b=s.first>=0?s.first:0;b<p;b++)n.rows[b]&&(n.rows[b].data=n.dataSource[g++]);n._recycle(!1,!1)}else n.dataSource.length!==r||n.dataSource.boundSource.length!==l||n._isFirstVirtualDataSourceRequest||"expand"===s.action||"filter"===s.action||"sort"===s.action||"pageIndexChange"===s.action||"pageSizeChange"===s.action||"sort"===s.action||"group"===s.action?(n.paging.enabled&&n.$.headerPager.querySelector("smart-pager")&&(n.$.headerPager.querySelector("smart-pager").pagesCount=Math.ceil(n.dataSource.length/n._pageSize),n.$.footerPager.querySelector("smart-pager").pagesCount=Math.ceil(n.dataSource.length/n._pageSize)),n._initializeRows(),n._initializeRowElements(),n.refresh(),n._refreshPagesCount(),n._autoHeight&&n._initializeRowElements()):n.dataSource.virtualDataSourceOnExpand&&n.refresh();n._isFirstVirtualDataSourceRequest=!1,n._recycle(),n.context=c,n._onDataUpdated&&n._onDataUpdated()},o)}_createAddNewRowButton(){const e=this,t=document.createElement("div");return t.className="smart-grid-add-row-button smart-grid-icon smart-icon-plus",t.title=e.localize("addNewRow"),t.onclick=()=>{e._add({}),e._scrollView.vScrollBar.value=e._scrollView.vScrollBar.max},t}_showAddNewRowButton(e){const t=this;t.editing.addNewRow.visible&&"button"===t.editing.addNewRow.displayMode&&(t.editing.addNewRow._addButton||(t.editing.addNewRow._addButton=t._createAddNewRowButton(),t.appendChild(t.editing.addNewRow._addButton)),requestAnimationFrame(()=>{t.editing.addNewRow._addButton.classList.add("show"),"float"!==e&&t.appearance.showRowHeader?t.editing.addNewRow._addButton.classList.remove("float"):t.computedVerticalScrollBarVisibility||t.editing.addNewRow._addButton.classList.add("float"),t.editing.addNewRow._addButton.style.bottom=t.computedHorizontalScrollBarVisibility?"20px":""}))}_verticalScrollbarHandler(e){const t=this;t.menu&&t.menu.column&&t.closeMenu(),t.isScrolling=!0,t._scrollTimer&&clearTimeout(t._scrollTimer),t._layoutSuspended||(t._scrollTimer=setTimeout(()=>{if(t._recycle(!1),t.isScrolling=!1,e.max===e.value&&e.max>0){if(t.$.fireEvent("scrollBottomReached"),"infinite"===t.scrolling)return t.appearance.displayLoadingIndicator=!0,t._setLoadingIndicatorVisibility(),t._virtualScrollTimer&&clearTimeout(t._virtualScrollTimer),void(t._virtualScrollTimer=setTimeout(()=>{t._virtualDataRequest("scroll"),t.appearance.displayLoadingIndicator=!1,t._setLoadingIndicatorVisibility()},50));t._showAddNewRowButton("scroll")}else t.editing.addNewRow.visible&&"button"===t.editing.addNewRow.displayMode&&t.appearance.showRowHeader&&t.editing.addNewRow._addButton&&e.max>0&&t.editing.addNewRow._addButton.classList.remove("show");"virtual"===t.scrolling&&(t.appearance.displayLoadingIndicator=!0,t._setLoadingIndicatorVisibility(),t._virtualScrollTimer&&clearTimeout(t._virtualScrollTimer),t._virtualScrollTimer=setTimeout(()=>{t._virtualDataRequest("scroll"),t.appearance.displayLoadingIndicator=!1,t._setLoadingIndicatorVisibility()},50)),e.min===e.value&&t.$.fireEvent("scrollTopReached")}))}getVerticalScrollMax(){return this.scrollHeight}getHorizontalScrollMax(){return this.scrollWidth}setHorizontalScrollValue(e){this.scrollLeft=e}setVerticalScrollValue(e){this.scrollTop=e}clearRows(){const e=this;e.dataSource=new Smart.DataAdapter({dataSource:[]}),e.rowHierarchy=null,e._visibleRows=null,e.__viewRows=null,e.rows.canNotify=!1,e.rows.length=0,e.rows.canNotify=!0,e.clearSelection(),e._refresh()}isEmpty(){const e=this;return!!(null===e.dataSource||e.dataSource&&e.dataSource.dataFields&&0===e.dataSource.length&&0===e.dataSource.dataSource.length&&!e.dataSource.virtualDataSource)}dataBind(){const e=this;delete e.__autoRowHeight,e._virtualOnExpandCache=[],e._cellsMerge=[],null===e.dataSource||e.dataSource&&e.dataSource.dataFields&&0===e.dataSource.length&&0===e.dataSource.dataSource.length&&!e.dataSource.virtualDataSource?e.clearRows():Array.isArray(e.dataSource)&&(e.dataSource=new Smart.DataAdapter({dataSource:e.dataSource}));const t=e._filters,n=e._sortedColumns;if(e.clearSort(),e.filtering.filterRow)for(let a=0;a<e.columns.length;a++)e.columns[a]._filterEditorInitialized=!1;for(let a=0;a<e.columns.length;a++)delete e.columns[a]._cellsCachedValues;e._initColumns&&0===e._initColumns.length&&(e.columns=[],e._renderColumns(!0)),e._renderRows(),"virtual"===e.scrolling||e.paging.enabled&&e.dataSource&&e.dataSource.virtualDataSource||e.dataSource&&e.dataSource.virtualDataSource?e._virtualDataRequest("dataBind"):e.paging.enabled&&(!e.dataSource||e.dataSource&&!e.dataSource.url)&&e._refreshPagesCount(),n&&e._refreshSort(n),t&&t.length>0&&(e._filters=null,e.refreshFilters())}refresh(e){const t=this;t.isInitialized&&(e&&(t._initializeRows(),t._initializeRowElements()),t._refresh())}refreshView(){this._recycle()}beginUpdate(){const e=this;e._isUpdating||(e._isUpdating=0),e._isUpdating++}endUpdate(e){const t=this;t._isUpdating--,t._isUpdating<0&&(t._isUpdating=0),!1!==e?t.refresh():t.refreshView()}}),Smart.Grid.Extend=function(e){if(!e)return;const t=Object.getOwnPropertyNames(e.prototype);for(let n in t){const a=t[n];"constructor"!==a&&(Smart.Grid.prototype[a]=e.prototype[a])}},Smart.Grid.Extend(Smart.Utilities.Grid.Resize),Smart.Grid.Extend(Smart.Utilities.Grid.Reorder),Smart.Grid.Extend(Smart.Utilities.Grid.Pager),Smart.Grid.Extend(Smart.Utilities.Grid.Filter),Smart.Grid.Extend(Smart.Utilities.Grid.Sort),Smart.Grid.Extend(Smart.Utilities.Grid.Menu),Smart.Grid.Extend(Smart.Utilities.Grid.Select),Smart.Grid.Extend(Smart.Utilities.Grid.Edit),Smart.Grid.Extend(Smart.Utilities.Grid.Group),Smart.Grid.Extend(Smart.Utilities.Grid.Tree),Smart.Grid.Extend(Smart.Utilities.Grid.Export),Smart.Grid.Extend(Smart.Utilities.Grid.Chart),Smart.Grid.Cell=Smart.Utilities.Grid.Cell,Smart.Grid.Row=Smart.Utilities.Grid.Row,Smart.Grid.Column=Smart.Utilities.Grid.Column},7422:()=>{(()=>{Smart.Utilities.Assign("Grid.Edit",class{_renderCommandBar(){const a=this,i=a.editing.commandBar.dataSource,o=r=>{for(let l in i){const s=i[l],c=document.createElement("div");c.classList.add("smart-grid-command-item"),c.label=a.localize(l),s.icon&&(c.innerHTML='<span class="smart-grid-icon '+s.icon+'"></span><span class="smart-grid-label">'+c.label+"</span>"),s.visible||c.classList.add("smart-hidden"),c.command=s.command,c.onclick=function(){a._applyCommand(c.command,[])},r.appendChild(c)}};a.editing.enabled&&a.editing.commandBar.visible&&(a.$.headerCommandBar.innerHTML="",a.$.footerCommandBar.innerHTML="","far"!==a.editing.commandBar.position&&o(a.$.headerCommandBar),"near"!==a.editing.commandBar.position&&o(a.$.footerCommandBar))}commandKeyEditCommand(){const a=this;a._selection&&a._selection.focusedCell&&a._selection.focusedCell.id&&a.beginEdit(a.rowById[a._selection.focusedCell.id].id)}commandKeyCancelCommand(){this.cancelEdit()}commandKeyUpdateCommand(){this.endEdit()}commandColumnMenuCommand(){this._openColumnChooserMenu(this._commandColumn)}commandColumnEditCommand(a){this.beginEdit(a.id)}commandColumnUpdateCommand(){this.endEdit()}commandColumnRowMenuCommand(){}commandColumnCancelCommand(a){const i=this;if(i.editing.batch){const o=i._rowsDeleted?i._rowsDeleted.indexOf(a):-1;o>=0&&i._rowsDeleted.splice(o,1);for(let r=0;r<i.columns.length;r++){const l=i.columns[r].dataField;i._cellsUpdatedValues&&i._cellsUpdatedValues[a.id+"_"+l]&&(delete i._cellsUpdatedValues[a.id+"_"+l],i._cellsUpdatedValues.length--)}i._recycle(!1)}i.cancelEdit()}commandColumnDeleteCommand(a){this.deleteRow(a.id)}_renderAddNewRow(){const a=this;a._frozenNearDefaultRows=[],a._frozenFarDefaultRows=[];const i=new Smart.Grid.Row({data:{},index:-1,grid:a,freeze:"near",visible:"far"!==a.editing.addNewRow.position,autoGenerated:!0,addNewRow:!0}),o=new Smart.Grid.Row({data:{},index:-2,grid:a,freeze:"far",visible:"near"!==a.editing.addNewRow.position,autoGenerated:!0,addNewRow:!0});if(a._newNearRow){const l=a._frozenNearRows.indexOf(a._newNearRow);if(l>=0&&(a._frozenNearRows.splice(l,1),a.$.rowNearContainer.children.length>0)){const s=a.$.rowNearContainer.children[0];s.parentNode.removeChild(s)}}if(a._newFarRow){const l=a._frozenFarRows.indexOf(a._newFarRow);if(l>=0&&(a._frozenFarRows.splice(l,1),a.$.rowFarContainer.children.length>0)){const s=a.$.rowFarContainer.children[a.$.rowFarContainer.children.length-1];s.parentNode.removeChild(s)}}if(a.editing.addNewRow.visible&&"button"!==a.editing.addNewRow.displayMode&&(a._frozenNearDefaultRows.push(i),a._frozenFarDefaultRows.push(o),a._frozenNearRows.splice(0,0,i),a._frozenFarRows.push(o)),a._addRowOnButtonClickHandler||(a._addRowOnButtonClickHandler=()=>{a.editing.addNewRow.autoCreate&&a._scrollView.vScrollBar.value===a._scrollView.vScrollBar.max&&(a.addUnboundRow(1),a._scrollView.vScrollBar.value=a._scrollView.vScrollBar.max),"button"===a.editing.addNewRow.displayMode&&a._scrollView.vScrollBar.value===a._scrollView.vScrollBar.max&&(a._add({}),a._scrollView.vScrollBar.value=a._scrollView.vScrollBar.max)}),a._scrollView.vScrollBar.$.farButton.removeEventListener("click",a._addRowOnButtonClickHandler),a._scrollView.vScrollBar.$.farButton.addEventListener("click",a._addRowOnButtonClickHandler),a._newNearRow=i,a._newFarRow=o,a.editing.addNewRow.visible&&"button"!==a.editing.addNewRow.displayMode){if(!a._newNearRow.element){const l=a._newNearRow,s=l.createElement();l.visible="far"!==a.editing.addNewRow.position,l.element=s,a.$.rowNearContainer.children.length>0?a.$.rowNearContainer.insertBefore(s,a.$.rowNearContainer.children[0]):a.$.rowNearContainer.appendChild(s)}if(!a._newFarRow.element){const l=a._newFarRow,s=l.createElement();l.visible="near"!==a.editing.addNewRow.position,l.element=s,a.$.rowFarContainer.children.length>0?a.$.rowFarContainer.insertBefore(s,a.$.rowFarContainer.children[0]):a.$.rowFarContainer.appendChild(s)}}}_insertNewRowAfter(a){return this._insertNewRowBefore(a,!0)}_insertNewRowBefore(a,i=!1){const o=this,r=new Smart.Grid.Row({index:i?0:-1,id:Smart.Utilities.Core.createGUID(),grid:o}),l=function(s,c){const u=p=>{o.scrollTop=c?o.scrollHeight:0,o.editing.addDialog.enabled||setTimeout(function(){o.editing.enabled&&o.editing.addNewRow.autoEdit&&(o.ensureVisible(p.id),o.paging.enabled?setTimeout(()=>{if(!p.element){const g=p.createElement();p.element=g}o._beginEdit(p)},200):o._beginEdit(p))},100)};!0===o.editing.batch||o.editing.batch&&o.editing.batch.indexOf("add")>=0?(o._batchAddRow(s,c?o.rows.length:0),u(s),a&&a(s)):o.addRow(s.data,c,p=>{u(p),a&&a(p)})}.bind(this);return o.editing.addDialog.enabled?o._openAddRowDialog(r,l):l(r,i),!0}commandBarBatchSaveCommand(){this._saveBatchEdit()}commandBarAddRowCommand(){this._insertNewRowAfter()}commandBarAddTopRowCommand(){this._insertNewRowBefore()}commandBarDeleteRowCommand(){const a=this;let i=1,o=a.rows[a.rows.length-i];for(a._rowsDeleted||(a._rowsDeleted=[]);a._rowsDeleted.indexOf(a.rows[a.rows.length-i])>=0;)i++;o=a.rows[a.rows.length-i],o&&a.commandColumnDeleteCommand(o)}commandBarBatchRevertCommand(){this.revertBatchEdit()}_beginEdit(a,i){const o=this;if(!i)if(o.columns[0]&&o.columns[0].allowEdit)i=o.columns[0].dataField;else for(let s=0;s<o.columns.length;s++)if(o.columns[s].allowEdit){i=o.columns[s].dataField;break}const r=o.columnByDataField[i];if(o.editing.allowColumnHeaderEdit&&!a&&r)return void o._beginColumnEdit(r);if(!a||!r||r&&r.autoGenerated)return!1;const l=a.getCell(i);if(!l)return!1;"cell"===o.editing.mode?o._beginCellEdit(l):"row"===o.editing.mode&&o._beginRowEdit(a,l),o.$.fireEvent("beginEdit",{id:a.id,dataField:r.dataField,row:a,column:r,cell:l})}_saveUnboundRows(a){const i=this;if(i._unboundRows&&i._unboundRows.length>0&&i.editing.addNewRow.autoSave){const o=i.rowById[a];if(!o.unbound)return;const r=i._unboundRows.indexOf(o);if(r<0)return;const l=r+1;i.beginUpdate();for(let s=0;s<l;s++){const c=i._unboundRows[s];if(!c)continue;delete i.rowById[c.id],c.unbound=!1;let u=!1;i._selection.focusedCell&&i._selection.focusedCell.id===c.id&&(u=!0),i._nearRowsAdded&&i._nearRowsAdded.indexOf(c)>=0?(i._nearRowsAdded.splice(i._nearRowsAdded.indexOf(c),1),i._add(0,c.data),u&&(i._selection.focusedCell.id=i.rows[0].id,i._selection.focusedCell.index=i.rows[0].index)):i._farRowsAdded&&i._farRowsAdded.indexOf(c)>=0&&(i._farRowsAdded.splice(i._farRowsAdded.indexOf(c),1),i._add(c.data),u&&(i._selection.focusedCell.id=i.rows[i.rows.length-1].id,i._selection.focusedCell.id=i.rows[i.rows.length-1].index))}i._unboundRows.splice(0,l),i.endUpdate()}}_validateCell(a,i,o){const r=this;if(r._errorOverlay&&(r._errorOverlay.remove(),r._errorMessage.remove(),r._isUpdating=!1),a.column.validationRules||o){let l={},s=a._updating;if(a._updating=!0,a.error="",o){for(let c in o)o[c]&&"valid"!==c&&(a.error=o.message),"custom"===c&&o[c].minLength?a.error=r.localize("invalidCellValue",{value:i,validationRule:"minLength: "+o[c].value}):"custom"===c&&o[c].maxLength&&(a.error=r.localize("invalidCellValue",{value:i,validationRule:"maxLength: "+o[c].value}));a.error&&(r._isUpdating=!0)}for(let c of a.column.validationRules){switch(c.type){case"min":l.min=n.min(i,c.value);break;case"max":l.max=n.max(i,c.value);break;case"minLength":l.minLength=n.minLength(i,c.value);break;case"maxLength":l.maxLength=n.maxLength(i,c.value);break;case"minDate":l.minDate=n.minDate(i,c.value);break;case"maxDate":l.maxDate=n.maxDate(i,c.value);break;case"required":l.required=n.required(i);break;case"requiredTrue":l.requiredTrue=n.requiredTrue(i);break;case"pattern":l.pattern=n.pattern(i,c.value);break;case"email":l.email=n.email(i);break;case"null":l.null=n.null(i)}l[c.type]&&(a.error=c.message?c.message:r.localize("invalidCellValue",{value:i,validationRule:void 0!==c.value?c.type+": "+c.value:c.type}),a._updating=s,r._isUpdating=!0,a.element.setAttribute("error",a.error),a.row.element.setAttribute("error",""),r.clearSelection())}if(a._updating=s,a.error){r._errorOverlay=r._createOverlay(),r._errorOverlay.onpointerdown=function(){r.endEdit()};const c=document.createElement("div");c.innerHTML=a.error,c.classList.add("smart-grid-validation-error");const u=r.offset(a.element),p=a.element.getBoundingClientRect();return c.style.top=u.top+p.height+5-r.offsetTop>r.offsetHeight?u.top-p.height-5-r.offsetTop+"px":u.top+p.height+5-r.offsetTop+"px",c.style.left=u.left-r.offsetLeft+"px",r._errorMessage=c,r.$.root.appendChild(r._errorOverlay),r.$.root.appendChild(r._errorMessage),!1}r._isUpdating=!1}return!0}_endCellEdit(a){const i=this,o=a||i.editing.editCell;if(!o||o&&!o.isEditing)return null;let r=i._getEditorValue(o),l=null;r&&r.error&&(o.canNotify=!1,o.element.setAttribute("error",""),o.row.element.setAttribute("error",""),o.error=!0,o.canNotify=!0,l=r.validity,r=r.value);const s=function(){const c=i._getEditorId(o);i._cellEditors[c].detach(),o.row.element.removeAttribute("edit"),o.element.removeAttribute("editor"),o.element.removeAttribute("error"),o.row.element.removeAttribute("error"),o.isEditing=!1,o.element.content.innerHTML="";const u=function(){i.editing.editRow||(i.dataSource&&i.dataSource.boundHierarchy?(i._refreshRowHierarchy(),i.refresh()):i.layout.allowCellsWrap?i.refresh():i._recycle(!1))},p=i._cellsUpdatedValues?i._cellsUpdatedValues[o.row.id+"_"+o.column.dataField]:void 0;if(b=r,v=void 0!==p?p:o.value,"date"===o.column.dataType?b&&v&&b.valueOf()===v.valueOf():b===v)i.editing.editCell=null,i.editing.editRow||(i.editing.isEditing=!1,u());else{const b=function(){i.editing.editCell=null,i.editing.editRow||(i.editing.isEditing=!1),delete i._editInfo};if(!0===i.editing.batch||i.editing.batch&&i.editing.batch.indexOf("update")>=0)b(),i._batchUpdateCell(o.row,o.column,r,o.value),u();else{const v=function(){b(),o._updating=!0,o.value=r,o._updating=!1,u(),i.$.fireEvent("endEdit",{id:o.row.id,dataField:o.column.dataField,row:o.row,column:o.column,cell:o}),i._fireEndEdit=!1};if(!i.editing.editRow&&i.dataSource&&i.dataSource.virtualDataSource){const y={};y[o.column.dataField]=r,i.updateRow(o.row.id,y,()=>{v()})}else v()}}var b,v;return i.editing.commandColumn.visible&&!i.editing.commandColumn.width&&"cell"===i.editing.mode&&i.refresh(),i.focus(),!0};if(!i._validateCell(o,r,l))return o.editor.instance&&setTimeout(()=>{o.editor.instance.focus()},50),!1;if(i.onCellUpdate&&!i.editing.editRow){i.beginUpdate(),i.appearance.displayLoadingIndicator=!0,i._setLoadingIndicatorVisibility();const c=i._createOverlay();i.$.root.appendChild(c),i.onCellUpdate(o,i.oldValue,r,function(u){u?s():i.cancelEdit(),i.appearance.displayLoadingIndicator=!1,i._setLoadingIndicatorVisibility(),c.parentNode.removeChild(c),i.endUpdate()})}else if(i.onRowUpdate){i.beginUpdate(),i.appearance.displayLoadingIndicator=!0,i._setLoadingIndicatorVisibility();const c=i._createOverlay();i.$.root.appendChild(c);const u=o.column.dataField,p=Object.assign({},o.row.data),g=Object.assign({},o.row.data);g[u]=r,i.onRowUpdate(o.row.index,o.row,p,g,function(b){b?s():i.cancelEdit(),i.appearance.displayLoadingIndicator=!1,i._setLoadingIndicatorVisibility(),c.parentNode.removeChild(c),i.endUpdate(),i.onRowUpdated&&i.onRowUpdated(o.row.index,o.row,o.row.data)})}else s()}_endRowEdit(){const a=this,i=a.editing.editRow;if(!i)return!1;let o=!0;const r=i.cells;let l={},s={};i.element.removeAttribute("error");for(let c=0;c<r.length;c++){const u=r[c],p=a._getEditorValue(u);if(l[u.column.dataField]=u.value,s[u.column.dataField]=p,!a._validateCell(u,p))return o=!1,i.element.setAttribute("error",""),a._isUpdating=!0,u.editor.instance&&setTimeout(()=>{u.editor.instance.focus()},50),!1}if(o){const c=function(){for(let u=0;u<r.length;u++)a._endCellEdit(r[u]);a.editing.isEditing=!1,a.editing.editRow=null,a.editing.commandColumn.visible&&!a.editing.commandColumn.width?a.refresh():a._recycle(!1)};if(!0===a.editing.batch||a.editing.batch&&a.editing.batch.indexOf("update")>=0)c();else if(a.onRowUpdate){a.beginUpdate(),a.appearance.displayLoadingIndicator=!0,a._setLoadingIndicatorVisibility();const u=a._createOverlay();a.$.root.appendChild(u),a.onRowUpdate(i.index,i,l,s,function(p){p?c():a.cancelEdit(),a.appearance.displayLoadingIndicator=!1,a._setLoadingIndicatorVisibility(),u.parentNode.removeChild(u),a.endUpdate(),a.onRowUpdated&&a.onRowUpdated(i.index,i,i.data)})}else if(a.dataSource&&a.dataSource.virtualDataSource&&a.editing.isEditing){a.beginUpdate(),a.appearance.displayLoadingIndicator=!0,a._setLoadingIndicatorVisibility();const u=a._createOverlay();a.$.root.appendChild(u);let p=Object.assign({},a.editing.editRow.data);for(let g=0;g<a.editing.editRow.cells.length;g++){const b=a.editing.editRow.cells[g];if(!b.column.allowEdit)continue;const v=a._getEditorValue(b);void 0!==v&&(p[b.column.dataField]=v)}a._editInfo={row:p},a._virtualDataRequest("update",function(g){g?c():a.cancelEdit(),a.appearance.displayLoadingIndicator=!1,a._setLoadingIndicatorVisibility(),u.parentNode.removeChild(u),a.endUpdate()})}else c();return!0}return a.focus(),!1}_batchDeleteRow(a){const i=this;i._rowsDeleted||(i._rowsDeleted=[]),i._rowsDeleted.push(a),i._recycle(!1)}_batchAddRow(a,i){const o=this;o._rowsAdded||(o._rowsAdded=[]),o._rowsAdded.push(a.id),o.rowById[a.id]=a,a.index=o.rows.length+(o._rowsAdded?o._rowsAdded.length:0),0===i?o._nearRowsAdded.splice(0,0,a):o._farRowsAdded.push(a),o.isInitialized&&o._rowElements&&o._rowElements.length<o.rows.length+o._rowsAdded.length&&o._initializeRowElements(),o.refresh()}_batchUpdateCell(a,i,o,r){const l=this;var s,c;l._cellsUpdatedValues||(l._cellsUpdatedValues=[]),s=o,c=r,("date"===i.dataType?s.valueOf()===c.valueOf():s===c)?delete l._cellsUpdatedValues[a.id+"_"+i.dataField]:l._cellsUpdatedValues[a.id+"_"+i.dataField]=o,l._cellsUpdatedValues.length++}_saveBatchEdit(){const a=this;for(let o in a._cellsUpdatedValues){const r=a._cellsUpdatedValues[o],l=o.substring(0,o.indexOf("_")),s=o.substring(o.indexOf("_")+1),c=a.rowById[l],u=c.getCell(s);if(a.dataSource.virtualDataSource){const p={};p[u.column.dataField]=r,c.data.$&&c.data.$.id?a.updateRow(c.data.$.id,p):(u._updating=!0,u.value=r,u._updating=!1)}else u._updating=!0,u.value=r,u._updating=!1}const i=a._rowsDeleted&&a._rowsDeleted.length>0||a._rowsAdded&&a._rowsAdded.length>0;if(i&&a.beginUpdate(),a._rowsAdded&&a._rowsAdded.length>0)for(let o in a._rowsAdded){const r=a._rowsAdded[o],l=a.rowById[r];if(l){if(a._rowsDeleted&&a._rowsDeleted.length>0){let s=!1;for(let c=0;c<a._rowsDeleted.length;c++)if(a._rowsDeleted[c].id===r){s=!0;break}if(s)continue}a.dataSource.virtualDataSource?a.addRow(l.data,!0):a._nearRowsAdded.indexOf(l)>=0?a.rows.splice(0,0,l):a._farRowsAdded.indexOf(l)>=0&&a.rows.push(l)}}if(a._rowsDeleted&&a._rowsDeleted.length>0)for(let o=0;o<a._rowsDeleted.length;o++){const r=a._rowsDeleted[o],l=a.rows.indexOf(r);l<0||(a.dataSource&&a.dataSource.virtualDataSource?(a._editInfo={row:r.data},a._virtualDataRequest("remove",function(s){if(s){const c=a.rows.indexOf(r);a.rows.splice(c,1),delete a.rowById[r.id]}})):a.rows.splice(l,1))}i&&a.endUpdate(),a._clearBatchEdit(!1),a.$.fireEvent("saveBatchEdit")}_clearBatchEdit(){const a=this;let i=!1;a._rowsAdded&&a._rowsAdded.length>0&&(i=!0),a._cellsUpdatedValues=[],a._rowsAdded=[],a._rowsDeleted=[],a._nearRowsAdded=[],a._farRowsAdded=[],i?a.refresh():a._recycle(!1),a.$.fireEvent("clearBatchEdit")}_getEditorId(a){const i=a.column._editorId?a.column._editorId:"";return a.editor!==a.column.editor?a.editor.template+"_"+a.column.dataField+"_"+a.row.id+i:a.editor.template+"_"+a.column.dataField+i}_applyCommand(a,i){const o=this;i||(i=[]);const r=function(){"function"==typeof a?a.apply(o,i):o[a]?o[a].apply(o,i):Smart[a]?Smart[a].apply(o,i):window[a]&&window[a].apply(o,i)};if(o.onCommand){i||(i=[]),i[1]||(i[1]=null);const l={name:a,command:r,details:i[0],event:i[1],handled:!1};setTimeout(()=>{o.onCommand.apply(o,[l]),l.handled||r()},200)}else r()}_getCommandColumnCommandsTemplate(){const a=this,i=a.editing.commandColumn.dataSource,o="icon"!==a.editing.commandColumn.displayMode,r="label"!==a.editing.commandColumn.displayMode;let l="";for(let s in i){const c=i[s];let u="<div",p=!1;if("commandColumnMenu"===s)continue;p||(u+=' item="'+s+'" command="'+c.command+'" class="smart-grid-command-item">',p=!0);const g="{{messages}}"===c.label?a.localize(s):c.label;r&&o?(u+='<span class="smart-grid-icon '+c.icon+'"></span>',u+='<span class="smart-grid-label">'+g+"</span>"):r&&!o?u+='<span title="'+g+'" class="smart-grid-icon '+c.icon+'"></span>':o&&!r&&(u+='<span class="smart-grid-label">'+g+"</span>"),u+="</div>",l+=u}return l}_updateCommandColumnCommandsVisibility(a,i){const o=this,r=a.children,l=o.editing.commandColumn.dataSource;for(let s=0;s<r.length;s++){const c=r[s],u=c.getAttribute("item"),p=l[u].visible;!0===p?c.classList.remove("smart-hidden"):!1===p?c.classList.add("smart-hidden"):"auto"===p&&(!o.editing.dialog.enabled&&(o.editing.editRow===i||o.editing.editCell&&o.editing.editCell.row===i)?"commandColumnEdit"===u?c.classList.add("smart-hidden"):"commandColumnUpdate"!==u&&"commandColumnCancel"!==u||r[s].classList.remove("smart-hidden"):"commandColumnEdit"===u?c.classList.remove("smart-hidden"):"commandColumnUpdate"!==u&&"commandColumnCancel"!==u||r[s].classList.add("smart-hidden"))}}_handleEditKeyDown(a){const i=this,o=a.key,r=i.editing.commandKeys;if(!i.editing.dialog.enabled)for(let l in r){const s=r[l],c=s.key.replace(/ /gi,"").split("|");if(("Tab"!==o||!i.editing.editRow)&&c.indexOf(o)>=0){"Enter"===o&&a&&a.stopPropagation(),i._applyCommand(s.command);break}}}_getCustomCellEditor(a){const i=this;a.editor.selector=a.editor.template,a.editor.template="custom";const o=i._getEditorId(a);if(!i._cellEditors[o]){const r=document.createElement("div");i._applyCellEditorUserSettings(r,a),r.classList.add("smart-grid-cell-editor");const l=function(y){"keydown"!==y.type||i._handleEditKeyDown(y)},s=function(){const y=a.editor.instance.element.firstElementChild;a.editor.focus?setTimeout(function(){a.editor.focus.apply(a.editor.instance.element,[])},50):setTimeout(function(){y.focus()},50)},c=function(y){const x=a.editor.instance.element.firstElementChild;a.editor.blur?a.editor.blur.apply(a.editor.instance.element,[y]):x.blur()},u=function(y){const x=a.editor.instance.element.firstElementChild;if(!a.editor.isInitialized&&a.editor.settings&&x)for(let D in a.editor.settings)x[D]=a.editor.settings[D];if(a.editor.setValue)a.editor.setValue.apply(a.editor.instance.element,[y]);else{if(x.innerHTML.indexOf("{{")>=0){const D=x.innerHTML.replace(/{{value}}/gi,y).replace(/{{id}}/gi,a.row.id);x.innerHTML=D}x.value=y,y instanceof Date&&(x.value=y.toISOString().split("T")[0]),a.editor.instance.element.value=x.value}},p=function(){const y=a.editor.instance.element.firstElementChild;if(a.editor.getValue){const D=y.querySelector("input");return D&&D.blur(),a.editor.getValue.apply(a.editor.instance.element,[y.value])}const x=y.value;return a.editor.settings&&a.editor.settings.valueProperty?x?Array.isArray(x)&&x.length>0?x[0][a.editor.settings.valueProperty]:x[a.editor.settings.valueProperty]:"":x||""},g=function(){r.removeEventListener("keydown",l),a.editor.detach&&a.editor.detach.apply(r,[])},b=function(){r.addEventListener("keydown",l),a.editor.attach&&a.editor.attach.apply(r,[])};let v=null;if((a.editor.selector.startsWith("#")||a.editor.selector.startsWith("."))&&(v=document.querySelector(a.editor.selector)),v)r.appendChild(v.content.cloneNode(!0).firstElementChild);else{const y=function(x){const D=document.createElement("template");return x=x.trim(),D.innerHTML=x,D.content.firstChild}(a.editor.selector);y&&r.appendChild(y)}i._cellEditors[o]={element:r,focus:s,blur:c,getValue:p,setValue:u,attach:b,detach:g}}return i._cellEditors[o]}_getTextAreaCellEditor(a){const i=this,o=i._getEditorId(a),r=document.createElement("div"),l=document.createElement("textarea"),s=document.createElement("div");i._applyCellEditorUserSettings(r,a),l.style.direction="",i.rightToLeft&&(l.style.direction="rtl"),l.classList.add("smart-input"),r.classList.add("smart-grid-cell-editor"),r.classList.add("smart-grid-text-area-cell-editor"),s.classList.add("nav"),s.classList.add("smart-icon-resize-full","smart-grid-icon");const c=function(u){if("keydown"===u.type&&(i._handleEditKeyDown(u),"Backspace"!==u.key&&"Delete"!==u.key))return s.click(),void u.preventDefault()};return s.onclick=function(){const u=document.createElement("div"),p=document.createElement("textarea"),g=a.editor.instance.element,b=document.createElement("div"),v=document.createElement("smart-scroll-bar");v.orientation="vertical",u.setAttribute("theme",i.theme),b.appendChild(p),b.classList.add("smart-grid-text-area-container"),b.appendChild(v),p.value=l.value,p.classList.add("smart-input"),s.textAreaEditorDialog=u,s.popupTextArea=p;const y=function(){v.value=p.scrollTop,v.max=p.scrollHeight-p.offsetHeight,v.onChange=null,p.offsetHeight>=p.scrollHeight?v.classList.add("smart-hidden"):v.classList.remove("smart-hidden"),v.onChange=function(){p.scrollTop=v.value}};p.onscroll=function(){y()},p.onkeydown=function(x){"Escape"===x.key&&(u.parentNode.removeChild(u),i.cancelEdit()),"Enter"===x.key&&x.shiftKey&&(u.parentNode.removeChild(u),l.value=p.value,i.endEdit())},u.classList.add("smart-grid-text-area-dialog"),u.appendChild(b),document.body.appendChild(u),setTimeout(function(){p.select(),y()},50),y(),u.style.top=i._offsetTop(g)+"px",u.style.left=i._offsetLeft(g)+"px",u.style.width=g.offsetWidth+"px"},r.appendChild(l),i._cellEditors[o]={element:r,focus:function(){s.click()},blur:function(){},setValue:function(u){l.value=u},getValue:function(){const u=l.value;return s.textAreaEditorDialog&&s.textAreaEditorDialog.parentNode?(l.value=s.popupTextArea.value,l.value):u},attach:function(){l.addEventListener("keydown",c)},detach:function(){l.removeEventListener("keydown",c),s.textAreaEditorDialog&&s.textAreaEditorDialog.parentNode&&(l.value=s.popupTextArea.value,s.textAreaEditorDialog.parentNode.removeChild(s.textAreaEditorDialog))}},i._cellEditors[o]}_getInputCellEditor(a){const i=this,o=i._getEditorId(a);if(!i._cellEditors[o]){const r=document.createElement("input");i._applyCellEditorUserSettings(r,a),a.editor.min&&(r.minLength=a.editor.min),a.editor.max&&(r.maxLength=a.editor.max),r.classList.add("smart-input"),r.classList.add("smart-grid-cell-editor"),r.classList.add("smart-grid-input-cell-editor"),r.autocomplete="off",r.style.direction="",i.rightToLeft&&(r.style.direction="rtl");const l=function(v){if("keydown"===v.type)return"number"!==a.column.dataType&&"int"!==a.column.dataType&&"float"!==a.column.dataType||i.editing.editColumn||v.key.match(/[0-9]/)||"-"===v.key||1!==v.key.length?void i._handleEditKeyDown(v):(v.preventDefault(),void v.stopPropagation())},s=function(){setTimeout(function(){r.select()},50)},u=function(v){if(!a.column.rowHeaderColumn||v){if(("number"===a.column.dataType||"int"===a.column.dataType||"float"===a.column.dataType)&&(""===v||v&&!v.toString().match(/[0-9]/)&&"-"!==v))return;r.value=v}else r.value=a.editor.row.visibleIndex+1},g=function(){r.removeEventListener("keydown",l)},b=function(){r.addEventListener("keydown",l)};i._cellEditors[o]={element:r,focus:s,blur:function(){},getValue:function(){return r.value},setValue:u,attach:b,detach:g}}return i._cellEditors[o]}_applyCellEditorUserSettings(a,i){for(let o in i.editor)"template"!==o&&("list"!==o?"onInit"!==o&&"onRender"!==o&&(a[o]=i.editor[o]):a.setAttribute(o,i.editor[o]));if(i.editor.settings)for(let o in i.editor.settings)a[o]=i.editor.settings[o]}_getCheckInputCellEditor(a){return this._getAutoCompleteCellEditor(a,"smart-check-input")}_getMultiInputCellEditor(a){return this._getAutoCompleteCellEditor(a,"smart-multi-input")}_getMultiComboInputCellEditor(a){return this._getAutoCompleteCellEditor(a,"smart-multi-combo-input")}_getAutoCompleteCellEditor(a,i){const o=this,r=o._getEditorId(a);if(!o._cellEditors[r]){let l=document.createElement("smart-input");i&&(l=document.createElement(i)),o._applyCellEditorUserSettings(l,a),l.readonly&&(l.dropDownButtonPosition="right");const s=function(y){l.opened||"keydown"!==y.type||o._handleEditKeyDown(y)};l.rightToLeft=o.rightToLeft,l.classList.add("smart-grid-cell-editor"),l.classList.add("smart-grid-auto-complete-cell-editor");const c=function(){setTimeout(()=>{l&&l.select&&l.select()},50)},u=function(y){l.value=y},g=function(){l&&l.close&&(l.value="",l.close(),l.removeEventListener("keydown",s))},v=function(){l.addEventListener("keydown",s)};o._cellEditors[r]={element:l,focus:c,blur:function(){},setValue:u,getValue:function(){return l.value},attach:v,detach:g}}if(!a.editor.dataSource){const l=o.getVisibleRows(),s=[];for(let c=0;c<l.length;c++){let u=o.dataSource[l[c].index];u&&(u=u[a.column.dataField],-1===s.indexOf(u)&&s.push(u))}o._cellEditors[r].element.dataSource=s}return o._cellEditors[r]}_getDateRangeInputCellEditor(a){const i=this,o=i._getEditorId(a);if(!i._cellEditors[o]){const r=document.createElement("smart-date-range-input");r.dropDownButtonPosition="right",r.dropDownAppendTo="body",r.autoClose=!0,r.selectionMode="default",r.rightToLeft=i.rightToLeft,r.timepicker=!0,i._applyCellEditorUserSettings(r,a);const l=function(v){r.opened||"keydown"!==v.type||i._handleEditKeyDown(v)};r.classList.add("smart-grid-cell-editor"),r.classList.add("smart-grid-date-time-picker-cell-editor");const s=function(){setTimeout(()=>{r.select()},50)},c=function(v){r.value=v},u=function(){return r._performSelect(),r.selectedDates},p=function(){r.value="",r.close(),r.removeEventListener("keydown",l)},g=function(v){const y=r.getAttribute("aria-controls");if(y&&r.opened){const x=i.getBoundingRect(document.getElementById(y));v.pageX<x.left||v.pageX>x.right||v.pageY<x.top||v.pageY>x.bottom||v.preventDefault()}},b=function(){r.addEventListener("keydown",l)};i._cellEditors[o]={element:r,focus:s,blur:g,setValue:c,getValue:u,attach:b,detach:p}}return i._cellEditors[o]}_getDateTimePickerCellEditor(a){const i=this,o=i._getEditorId(a);if(!i._cellEditors[o]){const r=document.createElement("smart-date-time-picker");r.calendarButton=!0,r.dropDownAppendTo="body",r.autoClose=!0,r.dropDownDisplayMode="calendar",r.rightToLeft=i.rightToLeft,i._applyCellEditorUserSettings(r,a);const l=function(v){r.opened||"keydown"!==v.type||i._handleEditKeyDown(v)};r.classList.add("smart-grid-cell-editor"),r.classList.add("smart-grid-date-time-picker-cell-editor");const s=function(){setTimeout(()=>{r.select()},50)},c=function(v){r.value=v},p=function(){r.value="",r.close(),r.removeEventListener("keydown",l)},g=function(v){const y=r.getAttribute("aria-controls");if(y&&r.opened){const x=i.getBoundingRect(document.getElementById(y));v.pageX<x.left||v.pageX>x.right||v.pageY<x.top||v.pageY>x.bottom||v.preventDefault()}},b=function(){r.addEventListener("keydown",l)};i._cellEditors[o]={element:r,focus:s,blur:g,setValue:c,getValue:function(){return r.value},attach:b,detach:p}}return i._cellEditors[o]}_getTimeInputCellEditor(a){const i=this,o=i._getEditorId(a);if(!i._cellEditors[o]){const r=document.createElement("smart-time-input");r.calendarButton=!0,r.dropDownAppendTo="body",r.autoClose=!0,r.dropDownDisplayMode="calendar",r.rightToLeft=i.rightToLeft,i._applyCellEditorUserSettings(r,a);const l=function(v){r.opened||"keydown"!==v.type||i._handleEditKeyDown(v)};r.classList.add("smart-grid-cell-editor"),r.classList.add("smart-grid-date-time-picker-cell-editor");const s=function(){setTimeout(()=>{r.select()},50)},c=function(v){r.value=v},p=function(){r.value="",r.close(),r.removeEventListener("keydown",l)},g=function(v){const y=r.getAttribute("aria-controls");if(y&&r.opened){const x=i.getBoundingRect(document.getElementById(y));v.pageX<x.left||v.pageX>x.right||v.pageY<x.top||v.pageY>x.bottom||v.preventDefault()}},b=function(){r.addEventListener("keydown",l)};i._cellEditors[o]={element:r,focus:s,blur:g,setValue:c,getValue:function(){const v=new Date;return v.setHours(r.value[0]),v.setMinutes(r.value[1]),"Invalid Date"===v.toString()?new Date:v},attach:b,detach:p}}return i._cellEditors[o]}_getDateInputCellEditor(a){const i=this,o=i._getEditorId(a);if(!i._cellEditors[o]){const r=document.createElement("smart-date-input");r.calendarButton=!0,r.dropDownAppendTo="body",r.autoClose=!0,r.dropDownDisplayMode="calendar",r.rightToLeft=i.rightToLeft,r.formatString=(!a.column.cellsFormat||1!==a.column.cellsFormat.length&&"d"!==a.column.cellsFormat)&&a.column.cellsFormat?a.column.cellsFormat:"MM/dd/yyyy",i._applyCellEditorUserSettings(r,a);const l=function(v){r.opened||"keydown"!==v.type||i._handleEditKeyDown(v)};r.classList.add("smart-grid-cell-editor"),r.classList.add("smart-grid-date-time-picker-cell-editor");const s=function(){setTimeout(()=>{r.select()},50)},c=function(v){r.value=v},u=function(){return r.getValue()},p=function(){r.value="",r.close(),r.removeEventListener("keydown",l)},g=function(v){const y=r.getAttribute("aria-controls");if(y&&r.opened){const x=i.getBoundingRect(document.getElementById(y));v.pageX<x.left||v.pageX>x.right||v.pageY<x.top||v.pageY>x.bottom||v.preventDefault()}},b=function(){r.addEventListener("keydown",l)};i._cellEditors[o]={element:r,focus:s,blur:g,setValue:c,getValue:u,attach:b,detach:p}}return i._cellEditors[o]}_openImageDialog(a,i){const o=this,r=o._dialogImage||o._createDialog(),l='<span class="smart-grid-icon smart-icon-image show"></span>'+o.localize("dialogImageHeader");if(r.cell||(r.cell=a),r.header.innerHTML=l,r.column=a.column,r.command=i,r.classList.add("smart-grid-image-dialog"),!o._dialogImage){r.modal=!0,r.btnConfirm.innerHTML=o.localize("dialogEditButtonConfirm"),r.btnCancel.innerHTML=o.localize("dialogEditButtonCancel"),r.onOpen=function(){r.fileUpload.value="",r.input.value="";const p=r.cell.editor.instance.getValue();p.startsWith("http")?(r.input.value=p,r.tabs[1].click()):r.tabs[0].click()},r.onClose=function(){},r.btnCancel.onclick=function(){r.close()},r.btnClose.onclick=function(){r.close()},r.btnConfirm.onclick=function(){r.tabs[1].classList.contains("active")?a.editor.instance.setValue(r.input.value):a.editor.instance.setValue("file"),o._endCellEdit(r.cell),r.close()},r.onkeydown=function(p){"Escape"===p.key&&r.close()},o._dialogImage=r,r.content.innerHTML=`\n                <div>\n                    <div>\n                        <div class="tabs">\n                            <div class="active tab">\n                                <span class="smart-grid-icon smart-icon-plus show"></span><label>${o.localize("dialogImageDevice")}</label>\n                            </div>\n                            <div class="tab">\n                                <span class="smart-grid-icon smart-icon-link show"></span><label>${o.localize("dialogImageLink")}</label>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="smart-grid-drop-zone">\n                         <div>\n                            <div class="title"><span class="smart-grid-icon smart-icon-plus show"></span><label>${o.localize("dialogImageUpload")}</label></div>\n                            <div class="subtitle"><span class="smart-grid-icon smart-icon-docs show"></span><label>${o.localize("dialogImageDrop")}</label></div>\n                         </div> \n                         <input accept=".jpg, .jpeg, .png" type="file" multiple="multiple" style="display: none;">\n                    </div>\n                    <div class="smart-hidden url-zone">\n                        <div class="url-title">\n                        ${o.localize("dialogImageURL")}\n                        </div>\n                        <div class="upload">\n                            <smart-input placeholder="https://example.com/image.png" class="underlined"></smart-input>\n                            <br/>\n                            <smart-button disabled class="success">${o.localize("dialogImageURLUpload")}</smart-button>\n                        </div>\n                    </div>\n                    <div class="preview">\n                    </div>\n                    <br/>\n                </div>`,r.input=r.querySelector("smart-input"),r.dropZone=r.querySelector(".smart-grid-drop-zone"),r.upload=r.querySelector(".title"),r.fileUpload=r.querySelector("input"),r.preview=r.querySelector(".preview"),r.tabs=r.querySelectorAll(".tab"),r.urlZone=r.querySelector(".url-zone"),r.uploadButton=r.querySelector("smart-button");const s=["image/apng","image/bmp","image/gif","image/jpeg","image/pjpeg","image/png","image/svg+xml","image/tiff","image/webp","image/x-icon"],c=p=>s.includes(p.type);r.dropZone.ondrop=p=>{if(p.preventDefault(),p.dataTransfer.items){let g=0;for(let b=0;b<p.dataTransfer.items.length;b++)if("file"===p.dataTransfer.items[b].kind){const v=p.dataTransfer.items[b].getAsFile();c(v)&&g++}g===p.dataTransfer.files.length&&(r.fileUpload.files=p.dataTransfer.files,u())}else r.fileUpload.files=p.dataTransfer.files,u()},r.dropZone.ondragover=p=>{p.preventDefault()},r.tabs[0].onclick=()=>{r.tabs[0].classList.add("active"),r.tabs[1].classList.remove("active"),r.dropZone.classList.remove("smart-hidden"),r.urlZone.classList.add("smart-hidden"),r.updatePreview()},r.tabs[1].onclick=()=>{r.tabs[0].classList.remove("active"),r.tabs[1].classList.add("active"),r.dropZone.classList.add("smart-hidden"),r.urlZone.classList.remove("smart-hidden"),r.updatePreview("input")},r.uploadButton.onclick=()=>{r.updatePreview("input")};const u=p=>{const g=r.preview,b=r.fileUpload;function v(D){return D<1024?D+"bytes":D>=1024&&D<1048576?(D/1024).toFixed(1)+"KB":D>=1048576?(D/1048576).toFixed(1)+"MB":void 0}for(;g.firstChild;)g.removeChild(g.firstChild);const y=()=>{const D=document.createElement("div");return D.classList.add("item"),D.onpointerdown=T=>{const M=D.getBoundingClientRect();if(r.input.value="",T.clientY>=M.bottom-12){if(T.clientX>M.left+M.width/2-13&&T.clientX<M.left+M.width/2+13){D.remove();const A=r.preview.querySelectorAll(".item"),B=new DataTransfer;A.forEach(O=>{B.items.add(O.file)}),b.files=B.files,r.clearButton&&0===A.length&&r.clearButton.classList.remove("show")}}else{const A=D.querySelector("img").cloneNode();o._imagePreviewDialog||(o._imagePreviewDialog=o._createDialog({modal:!0,screenModal:!0,left:"screenMiddle",top:"screenCenter",width:"80%",height:"80%"})),o._imagePreviewDialog.content.innerHTML="",o._imagePreviewDialog.content.appendChild(A),o._imagePreviewDialog.btnClose.onclick=B=>{o._imagePreviewDialog.close(),B.preventDefault(),B.stopPropagation()},A.style.marginLeft="auto",A.style.marginRight="auto",A.style.maxWidth="",A.onload=()=>{A.width=A.naturalWidth,A.height=A.naturalHeight,o._imagePreviewDialog.style.width=150+Math.min(850,A.width)+"px",o._imagePreviewDialog.style.height=150+Math.min(650,A.height)+"px",o._imagePreviewDialog.style.left="calc(50% - "+Math.min(850,o._imagePreviewDialog.offsetWidth/2)+"px)",o._imagePreviewDialog.style.top="calc(50% - "+Math.min(650,o._imagePreviewDialog.offsetHeight/2)+"px)",A.style.maxWidth="100%"},o._imagePreviewDialog.content.onpointerdown=o._imagePreviewDialog.content.onpointerup=B=>{B.preventDefault(),B.stopPropagation()},o._imagePreviewDialog.footer.remove(),o._imagePreviewDialog.header.parentNode.style.backgroundColor="var(--smart-background)",o._imagePreviewDialog.open(),o._imagePreviewDialog.focus()}},D},x=()=>{const D=document.createElement("div");D.classList.add("list");const T=document.createElement("div");T.classList.add("smart-grid-icon","show","smart-icon-delete"),T.title=o.localize("clear"),g.appendChild(T),T.onclick=()=>{b.value="",r.input.value="",u()},r.clearButton=T,g.appendChild(D)};if("input"===p){const D=r.input.value;if(D){const T=y();if(x(),D.endsWith("png")||D.endsWith("jpeg")||D.endsWith("jpg")){const M=document.createElement("img");M.src=D,T.appendChild(M)}r.preview.lastChild.appendChild(T)}else{const T=document.createElement("p");T.textContent="No files currently selected for upload",g.appendChild(T)}}else{const D=b.files;if(0===D.length){const T=document.createElement("p");T.textContent="No files currently selected for upload",g.appendChild(T)}else{x();for(const T of D){const M=y(),A=document.createElement("div");if(c(T)){A.textContent=`${T.name}, ${v(T.size)}.`,A.textContent.length>20&&(A.textContent=`${T.name.substring(0,5)}...${T.name.substring(T.name.length-4)}, ${v(T.size)}.`);const B=document.createElement("img");if(B.src=URL.createObjectURL(T),T.size>2097152){const O=document.createElement("p");O.textContent="No files currently added. Maximum file size is 2MB.",g.appendChild(O),r.clearButton.classList.remove("show");break}M.file=T,M.appendChild(B),M.appendChild(A)}r.preview.lastChild.appendChild(M)}}}};r.updatePreview=u,r.fileUpload.onchange=()=>{0===r.fileUpload.files.length&&r._tempFiles&&(r.fileUpload.files=r._tempFiles),u()},r.input.onchange=r.input.onblur=r.input.onkeyup=()=>{r.uploadButton.disabled=!r.input.value||!r.input.value.startsWith("https://")},r.upload.onclick=()=>{r._tempFiles=[];const p=new DataTransfer;[...r.fileUpload.files].forEach(g=>{p.items.add(g)}),r._tempFiles=p.files,r.fileUpload.click()}}r.open(),setTimeout(function(){r.btnConfirm.focus()},100)}_getImageCellEditor(a){const i=this,o=i._getEditorId(a);if(i._dialogImage&&(i._dialogImage.cell=a),!i._cellEditors[o]){const r=document.createElement("div");r.innerHTML='\n                <div style="display: grid;"><div class="smart-grid-icon smart-icon-plus show"></div><div class="images"></div></div>\n            ',r.rightToLeft=i.rightToLeft,r.firstElementChild.style.gridTemplateColumns="25px 1fr",r.querySelector(".smart-grid-icon").onpointerdown=()=>{i._openImageDialog(i._dialogImage?i._dialogImage.cell:a)},i._applyCellEditorUserSettings(r,a),r.classList.add("smart-grid-cell-editor");const s=function(b){r.value=b},u=function(){r.value="",i._dialogImage.close()};i._cellEditors[o]={element:r,focus:function(){},blur:function(){},setValue:s,getValue:function(){return r.value},attach:function(){},detach:u}}return i._cellEditors[o]}_getMaskCellEditor(a){const i=this,o=i._getEditorId(a);if(!i._cellEditors[o]){const r=document.createElement("smart-masked-text-box");r.rightToLeft=i.rightToLeft,i._applyCellEditorUserSettings(r,a);const l=function(v){r.opened||"keydown"!==v.type||i._handleEditKeyDown(v)};r.classList.add("smart-grid-cell-editor"),r.classList.add("smart-grid-masked-text-box-cell-editor");const s=function(){setTimeout(()=>{r.select()},50)},c=function(v){r.value=v,1===v.length&&(r.$.input.selectionStart=r.$.input.selectionEnd=r.$.input.value.indexOf(v)+1)},p=function(){r.value="",r.removeEventListener("keydown",l)},b=function(){r.addEventListener("keydown",l)};i._cellEditors[o]={element:r,focus:s,blur:function(){},setValue:c,getValue:function(){return r.value},attach:b,detach:p}}return i._cellEditors[o]}_getNumberInputCellEditor(a){const i=this,o=i._getEditorId(a);if(!i._cellEditors[o]){const r=document.createElement("smart-number-input");if(i._applyCellEditorUserSettings(r,a),"{}"===JSON.stringify(r.numberFormat)){let v={};if(a.column.cellsFormat)if(a.column.cellsFormat.indexOf("c")>=0){v={style:"currency",currency:i.messages[i.locale].calendar.currency};let y=parseInt(a.column.cellsFormat.substring(1));isNaN(y)||(v.maximumFractionDigits=y)}else if(a.column.cellsFormat.indexOf("p")>=0){v={style:"percent"};let y=parseInt(a.column.cellsFormat.substring(1));isNaN(y)||(v.maximumFractionDigits=y)}else a.column.Intl&&a.column.Intl.NumberFormat&&(v=a.column.Intl.NumberFormat);r.numberFormat=v}r.classList.add("smart-grid-cell-editor"),r.classList.add("smart-grid-number-input-cell-editor");const l=function(v){i._handleEditKeyDown(v)},s=function(){setTimeout(function(){r.focus()},50)},u=function(v){r.isReady&&r.setValue(v)},p=function(){return r.getValue()},g=function(){r.removeEventListener("keydown",l)},b=function(){r.addEventListener("keydown",l)};i._cellEditors[o]={element:r,focus:s,blur:function(){},getValue:p,setValue:u,attach:b,detach:g}}return i._cellEditors[o]}_getCheckBoxCellEditor(a){const i=this,o=i._getEditorId(a);if(!i._cellEditors[o]){const r=document.createElement("div");r.classList.add("smart-input"),r.classList.add("smart-grid-cell-editor"),r.classList.add("smart-grid-check-box-cell-editor"),r.tabIndex=0;const l=function(){!0!==r.value&&!1!==r.value&&null!==r.value&&(r.value=!1),r.value=null!==r.value&&!r.value,!1===r.value?r.removeAttribute("checked"):r.setAttribute("checked",r.value?"":"indeterminate")},s=function(y){if(" "!==y.key){switch(y.key){case"ArrowLeft":case"ArrowDown":case"ArrowRight":case"ArrowUp":if(i.editing.dialog.enabled)return;i.endEdit()}i._handleEditKeyDown(y)}else l()},g=function(){r.value=!1,r.removeEventListener("click",l),r.removeEventListener("keydown",s)},v=function(){r.addEventListener("keydown",s),r.addEventListener("click",l)};i._cellEditors[o]={getValue:function(){return r.value},setValue:function(y){r.value=y,!1===r.value?r.removeAttribute("checked"):r.setAttribute("checked",r.value?"":"indeterminate")},focus:function(){r.focus(),setTimeout(function(){r.focus()},25)},blur:function(){},element:r,detach:g,attach:v}}return i._cellEditors[o]}_getEditorValue(a){const i=this,o=i._getEditorId(a);if(!i._cellEditors)return;const r=i._cellEditors[o];if(!r)return;const l=function(v){switch(a.column.dataType){case"string":v=v.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;");break;case"float":case"int":case"number":v="int"===a.column.dataType?parseInt(v):parseFloat(v),isNaN(v)&&(v=0);break;case"bool":case"boolean":"true"!==v&&"1"!==v||(v=!0),"false"!==v&&"0"!==v||(v=!1);break;case"date":if(v instanceof Date)return v;"string"==typeof v&&(v=new Date(v));break;case"dateTime":v=new Smart.Utilities.DateTime(v)}return v};let s=null;switch(a.editor.template){case"dateRangeInput":try{s=r.getValue()}catch(v){s=a.value}if(a.editor.getValue){const v=a.editor.getValue(a,s);void 0!==v&&(s=v)}break;case"input":case"autoComplete":case"numberInput":case"dateInput":case"timeInput":case"deteTimePicker":case"checkBox":try{s=l(r.getValue())}catch(v){s=a.value}if(a.editor.getValue){const v=a.editor.getValue(a,s);void 0!==v&&(s=v)}break;default:s=l(r.getValue())}let c=!0,u=!1,p=!1;if(a.column.validator)c=a.column.validator.evaluate(s);else if("string"==typeof s){const v=a.editor.minLength||a.editor.min||0,y=a.editor.maxLength||a.editor.max||999999;(s.length<v||s>y)&&(c=!1),s.length<v&&(u=!0),s.length>y&&(p=!0),a.editor.instance.element&&a.editor.instance.element.checkValidity&&(c=a.editor.instance.element.checkValidity())}if(c)return s;let g=null;const b=a.editor.instance.element;return b&&(g=b.validity,g&&(g.custom&&delete g.custom,u&&(g.custom={minLength:!0,value:a.editor.min}),p&&(g.custom={maxLength:!0,value:a.editor.max}),g.message=b.validationMessage)),{error:!0,validity:g,value:s}}_beginRowEdit(a,i){const o=this;if(a===o.editing.editRow||o.editing.editRow&&!o.endEdit())return!1;const r=a.cells;o.editing.editRow=a,o.editing.commandColumn.visible&&(o.editing.isEditing=!1,o.refresh(),o.editing.isEditing=!0),a.isEditing=!0;let l=!1;for(let s=0;s<r.length;s++){const c=r[s],u=o._beginCellEdit(c);u&&(!0!==o.editing.recordNavigation&&(i?c===i&&c.editor.instance.focus():u&&!l&&(l=!0,c.editor.instance.focus())),o.editing.commandColumn.visible&&c.column.commandColumn&&c.render())}return!0}_createOverlay(){const a=document.createElement("div");return a.onpointerdown=function(){return!1},a.onmousedown=function(){return!1},a.onclick=function(){},a.classList.add("smart-grid-dialog-overlay"),a}_createDialog(a){const i=this;let o=document.createElement("div");a||(a=i.editing.dialog),void 0!==a.modal&&(o.modal=a.modal),void 0!==a.screenModal&&(o.screenModal=a.screenModal),o.setAttribute("animation","none"),o.classList.add("smart-window","smart-grid-dialog"),o.style.width="auto"===a.width?a.width:a.width+"px",o.style.height="auto"===a.height?a.height:a.height+"px",a.width&&"string"==typeof a.width&&(o.style.width=a.width),a.height&&"string"==typeof a.height&&(o.style.height=a.height),o.style.left="",o.style.top="",o.innerHTML='<div class="smart-container">\n                   <div class ="smart-content-container" smart-id="container">\n                        <div id="headerSection" class="smart-header-section">\n                            <div class="smart-header"></div>\n                            <div class="smart-buttons-container">\n                            <button tabindex=-1 class ="smart-hidden smart-button smart-element smart-prev-button" aria-label="Previous Record" smart-id="prevButton"></button>\n                            <button tabindex=-1 class ="smart-hidden smart-button smart-element smart-next-button" aria-label="Next Record" smart-id="nextButton"></button>\n                            <button class ="smart-button smart-element smart-close-button" aria-label="Close" smart-id="closeButton"></button>\n                            </div>\n                        </div>\n                        <div class="smart-content"><div class="smart-content-container"></div></div>\n                        <div class ="smart-footer">\n                            <div class ="smart-stack-layout right spacing">\n                                <smart-button class ="smart-confirm-button item primary">Ok</smart-button>\n                                <smart-button class ="smart-cancel-button item">Cancel</smart-button>\n                            </div>\n                        </div>\n                    </div>\n              </div>\n            ',o.querySelector&&o.querySelector(".smart-content")&&(o.content=o.querySelector(".smart-content").firstChild),o.footer=o.querySelector(".smart-footer"),o.header=o.querySelector(".smart-header"),o.btnConfirm=o.querySelector(".smart-confirm-button"),o.btnCancel=o.querySelector(".smart-cancel-button"),o.btnClose=o.querySelector(".smart-close-button"),o.btnNext=o.querySelector(".smart-next-button"),o.btnPrev=o.querySelector(".smart-prev-button");const r=document.createElement("div");return r.classList.add("smart-grid-dialog-overlay"),r.onclick=function(){},o.overlay=r,o.remove=function(){o.parentNode&&o.parentNode.removeChild(o)},o.close=function(){o.classList.remove("open"),o.addEventListener("transitionend",o.remove),o.addEventListener("transitioncancel",o.remove),o.modal&&o.overlay.parentNode&&o.overlay.parentNode.removeChild(o.overlay),o.onClose&&o.onClose()},o.open=function(l,s){o.removeEventListener("transitionend",o.remove),o.removeEventListener("transitioncancel",o.remove),document.body.appendChild(o),l||(l=a.left),s||(s=a.top),requestAnimationFrame(function(){o.classList.add("open");const c=function(u,p){const g=i.offset(i);switch("center"===u&&"horizontal"===p&&(u="middle"),u){case"top":return g.top;case"bottom":return Math.max(g.top,g.top+i.offsetHeight-o.offsetHeight);case"center":return Math.max(g.top,g.top+i.offsetHeight/2-o.offsetHeight/2);case"left":return g.left;case"middle":return g.left+i.offsetWidth/2-o.offsetWidth/2;case"right":return g.left+i.offsetWidth-o.offsetWidth}return"horizontal"===p?parseInt(u)+g.left:"vertical"===p?parseInt(u)+g.top:"number"==typeof u?u:parseInt(u)};o.style.left=c(l,"horizontal")+"px",o.style.top=c(s,"vertical")+"px","screenMiddle"===l&&(o.style.left="calc(50% - "+o.offsetWidth/2+"px)"),"screenCenter"===s&&(o.style.top="calc(50% - "+o.offsetHeight/2+"px)")}),o.modal&&(o.screenModal?document.body.appendChild(o.overlay):i.appendChild(o.overlay)),o.onOpen&&o.onOpen()},o}_openAddRowDialog(a,i){const o=this;if(!o.editing.addDialog.enabled)return!1;const r=o._dialogAddRow||o._createDialog(),l="{{message}}"===o.editing.dialog.header?o.localize("dialogAddHeader"):o.editing.dialog.header,s=r.content;r.header.innerHTML=l,a.grid=o,void 0===a.index&&(a.index=o.rows.length,o._rowsAdded&&(a.index+=o._rowsAdded.length));const c=a.cells;let u=null,p=0;if(o._cellEditors||(o._cellEditors=[]),!o._dialogAddRow){r.modal=!0,r.btnConfirm.innerHTML=o.localize("dialogAddButtonConfirm"),r.btnCancel.innerHTML=o.localize("dialogAddButtonCancel"),r.onOpen=function(){o.editing.dialog.visible=!0},r.onClose=function(){o.editing.dialog.visible=!1},r.btnCancel.onclick=function(){r.close()},r.btnClose.onclick=function(){r.close()},r.btnConfirm.onclick=function(){const b={};for(let x=0;x<c.length;x++){const D=c[x],T=o._getEditorValue(D),M=o._getEditorId(D),A=o._cellEditors[M];A&&(T&&T.error?(b[D.column.dataField]=T.value,A.detach()):(b[D.column.dataField]=T,A.detach()))}const y=new Smart.Grid.Row({index:o.rows.length+(o._rowsAdded?o._rowsAdded.length:0),id:Smart.Utilities.Core.createGUID(),grid:o,data:b});r.close(),i(y,0===r.index)},r.onkeydown=function(b){const v=b.key;"Enter"===v?r.btnConfirm.onclick():"Escape"===v&&r.close()},s.classList.add("smart-grid-layout");for(let b=0;b<o.columns.length;b++){const v=o.columns[b];if(!v.allowEdit)continue;p%2==0&&(u=document.createElement("div"),u.classList.add("row"),s.appendChild(u));const y=document.createElement("div");y.classList.add("col-sm-6");const x=document.createElement("div");x.classList.add("column");const D=document.createElement("label");D.innerHTML=o.columns[b].label;const T=document.createElement("div");T.classList.add("smart-grid-dialog-editor"),T.setAttribute("editor",v.dataField),T.setAttribute("template",v.editor.template),y.appendChild(x),u.appendChild(y),x.appendChild(D),x.appendChild(T),p++}}r.open(),r.index=a.index;let g=0;for(let b=0;b<c.length;b++){const v=c[b],y=v.column,D=r.querySelector("[editor="+y.dataField+"]");if(!D)continue;D.innerHTML="";let T="";void 0!==v.value&&(T=v.value),"int64"!==y.dataType&&"number"!==y.dataType&&"int"!==y.dataType&&"float"!==y.dataType||(T=0),"date"===y.dataType&&(T=new Date),"bool"!==y.dataType&&"boolean"!==y.dataType||(T=!1);let M=null;switch(v.editor.template){default:case"custom":M=o._getCustomCellEditor(v);break;case"image":M=o._getImageCellEditor(v);break;case"checkBox":M=o._getCheckBoxCellEditor(v);break;case"autoComplete":M=o._getAutoCompleteCellEditor(v);break;case"dropDownList":M=o._getAutoCompleteCellEditor(v),M.readonly=!0,M.dropDownButtonPosition="right";break;case"comboBox":M=o._getAutoCompleteCellEditor(v),M.readonly=!1,M.dropDownButtonPosition="right";break;case"maskedTextBox":M=o._getMaskCellEditor(v);break;case"checkInput":M=o._getCheckInputCellEditor(v),M.readonly=!0,M.dropDownButtonPosition="right";break;case"multiInput":M=o._getMultiInputCellEditor(v),M.readonly=!0,M.dropDownButtonPosition="right";break;case"multiComboInput":M=o._getMultiComboInputCellEditor(v),M.readonly=!0,M.dropDownButtonPosition="right";break;case"time":case"timeInput":M=o._getTimeInputCellEditor(v);break;case"date":case"dateInput":M=o._getDateInputCellEditor(v);break;case"dateRangeInput":M=o._getDateRangeInputCellEditor(v);break;case"dateTimePicker":M=o._getDateTimePickerCellEditor(v);break;case"textArea":case"textarea":M=o._getTextAreaCellEditor(v);break;case"numberInput":case"text":case"input":M="numberInput"===v.editor.template?o._getNumberInputCellEditor(v):o._getInputCellEditor(v)}if(M.attach(),v.editor.instance=M,M.setValue(T),0===g&&setTimeout(()=>{M.focus()},100),!v.editor.isInitialized&&(v.editor.isInitialized=!0,v.editor.onInit)){const A=v.editor.onInit(v.row.index,v.column.dataField,v.editor.instance.element,v.row.data);if(A&&A instanceof Promise)A.then(B=>{const O="custom"===v.editor.template?v.editor.instance.element.firstElementChild:v.editor.instance.element;for(let N in B)O[N]=B[N]});else if(A){const B=A,O="custom"===v.editor.template?v.editor.instance.element.firstElementChild:v.editor.instance.element;for(let N in B)O[N]=B[N]}}if(v.editor.onRender){const A=v.editor.onRender(v.row.index,v.column.dataField,v.editor.instance.element,v.row.data);if(A&&A instanceof Promise)A.then(B=>{const O="custom"===v.editor.template?v.editor.instance.element.firstElementChild:v.editor.instance.element;for(let N in B)O[N]=B[N]});else if(A){const B=A,O="custom"===v.editor.template?v.editor.instance.element.firstElementChild:v.editor.instance.element;for(let N in B)O[N]=B[N]}}D.appendChild(M.element),M.element.onfocus=()=>{D.setAttribute("focus","")},M.element.onblur=()=>{D.removeAttribute("focus")},g++}o._dialogAddRow=r}_openEditDialog(a,i){const o=this;if(!o.editing.dialog.enabled)return!1;const r=o._dialogEdit||o._createDialog(),l="{{message}}"===o.editing.dialog.header?o.localize("dialogEditHeader",{value:o.editing.editRow?a.row.visibleIndex+1:a.column.label}):o.editing.dialog.header,s=r.content;r.header.innerHTML=l,r.row=o.editing.editRow,o.editing.recordNavigation&&r.classList.add("disable-animation");let c=null,u=0;if(void 0!==o._settingsDialogRowId){r.btnPrev.classList.remove("smart-hidden"),r.btnNext.classList.remove("smart-hidden");const p=g=>{const v=o._recyclingRows.indexOf(o.editing.editRow),y=g?o._recyclingRows[v+1]:o._recyclingRows[v-1];if(y){r.classList.add("disable-animation"),o.editing.recordNavigation=!0;const x=r.querySelector("[focus]");if(x){const D=x.closest(".row"),T=D.closest(".smart-grid-edit-dialog-editors-container");let M=-1;if(T&&(M=[...T.children].indexOf(D)),o.cancelEdit(),o._openRowSettingsDialog(y.id),o._dialogEdit&&M>=0){const A=o._dialogEdit.querySelectorAll(".row")[M];if(A){const B=A.querySelector(".smart-grid-dialog-editor");B.setAttribute("focus",""),B.querySelector(".smart-grid-cell-editor").focus()}}}else o.cancelEdit(),o._openRowSettingsDialog(y.id)}};r.btnNext.onmousedown=g=>{p(!0),g.preventDefault(),g.stopPropagation()},r.btnPrev.onmousedown=g=>{p(!1),g.preventDefault(),g.stopPropagation()}}if(!o._dialogEdit)if(r.modal=!0,r.btnConfirm.innerHTML=o.localize("dialogEditButtonConfirm"),r.btnCancel.innerHTML=o.localize("dialogEditButtonCancel"),r.onOpen=function(){o.editing.dialog.visible=!0},r.onClose=function(){o.editing.dialog.visible=!1,r.row.showDetail=!1},r.btnCancel.onclick=function(){o.cancelEdit()},r.btnClose.onclick=function(){o.cancelEdit()},r.btnConfirm.onclick=function(){if(void 0!==o._settingsDialogRowId){if(o.rowById[o._settingsDialogRowId]){const p=o.editing.editRow;if(!p)return!1;const g=p.cells;let b={};p.element.removeAttribute("error");for(let y=0;y<g.length;y++){const x=g[y],D=o._getEditorValue(x);b[x.column.dataField]=D}const v=o.validateRow(p.id,b);if(Object.keys(v).length>0){let y=!0;for(let x=0;x<g.length;x++){const D=g[x],T=v[D.column.dataField],M=r.querySelector(`[label-for="${D.column.dataField}"]`);if(M&&(M.innerHTML=""),T)for(let A in T){const B=T[A];let O="";if(!B)continue;let N=B[A];"minLength"!==A&&"maxLength"!==A||(N=B[A.toLowerCase()]),O=B.message?B.message:"required"===A?o.localize("requiredValue",{value:D.column.label}):"min"===A?o.localize("invalidMinValue",{value:D.column.label,min:N.min}):"max"===A?o.localize("invalidMaxValue",{value:D.column.label,max:N.max}):"minLength"===A?o.localize("invalidMinLengthValue",{value:D.column.label,min:N.requiredLength}):"maxLength"===A?o.localize("invalidMaxLengthValue",{value:D.column.label,max:N.requiredLength}):o.localize("invalidValue"),y=!1,M&&(M.innerHTML=O)}}if(!y)return}r._userData._changed=!0,p._userData=r._userData}if(r.columnVisibility){let p=!1;const g=o.columns.canNotify;o.columns.canNotify=!1;for(let b in r.columnVisibility){const v=o.columnByDataField[b];v.visible!==r.columnVisibility[b]&&(v.visible=r.columnVisibility[b],p=!0)}if(o.columns.canNotify=g,p)return o.endEdit(),void o.refresh(!1)}}o.endEdit()},r.onkeydown=function(p){const g=p.key,b=o.editing.commandKeys;for(let v in b){const y=b[v];if(g===y.key){o._applyCommand(y.command);break}}},o.editing.editRow)if(void 0!==o._settingsDialogRowId)o._applySettingsDialogLayout(r,s,o.editing.editRow);else{s.classList.add("smart-grid-layout");for(let p=0;p<o.columns.length;p++){const g=o.columns[p];if(!g.allowEdit)continue;u%2==0&&(c=document.createElement("div"),c.classList.add("row"),s.appendChild(c));const b=document.createElement("div");b.classList.add("col-sm-6");const v=document.createElement("div");v.classList.add("column");const y=o._settingsDialogRowId?document.createElement("div"):document.createElement("label");y.innerHTML=o.columns[p].label;const x=document.createElement("div");x.classList.add("smart-grid-dialog-editor"),x.setAttribute("editor",g.dataField),x.setAttribute("template",g.editor.template),b.appendChild(v),c.appendChild(b),v.appendChild(y),v.appendChild(x),u++}}else{const p=a.column,g=document.createElement("div");g.classList.add("smart-grid-dialog-editor"),g.setAttribute("editor",""),g.setAttribute("template",p.editor.template),s.appendChild(g)}if(r.open(),o.editing.editRow){const p=r.querySelector("[editor="+a.column.dataField+"]");p.innerHTML="",p.appendChild(i.element),i.element.onfocus=()=>{p.setAttribute("focus","")},i.element.onblur=()=>{p.removeAttribute("focus")}}else{const p=a.column,g=r.querySelector("[editor]");g.innerHTML="",g.setAttribute("template",p.editor.template),g.appendChild(i.element),i.element.onfocus=()=>{g.setAttribute("focus","")},i.element.onblur=()=>{g.removeAttribute("focus")}}o._dialogEdit=r}_refreshCurrentUser(){const a=this,i=a.users;let o=a.currentUser,r=!0,l=!0,s=a.editing.enabled,c=!0;i&&null!==o&&(o=i.find(u=>u.id===o),o&&(r=!1!==o.allowAdd,l=!1!==o.allowComment,s=s&&!1!==o.allowEdit,c=!1!==o.allowRemove)),a._currentUser={allowAdd:r,allowComment:l,allowEdit:s,allowRemove:c,info:o}}_applySettingsDialogLayout(a,i,o){const r=this;a.classList.add("smart-grid-dialog-expand-row");const l=[];a.columnVisibility=l;const s=document.createElement("div"),c=document.createElement("div"),u=document.createElement("div");u.appendChild(s),u.appendChild(c),i.appendChild(u),u.classList.add("smart-grid-edit-dialog-layout"),s.classList.add("smart-grid-edit-dialog-editors-container"),c.classList.add("smart-grid-edit-dialog-activity-container");const p=document.createElement("div"),g=document.createElement("div");c.appendChild(p),c.appendChild(g);const b=()=>{const W=document.createElement("smart-color-input");return W.dataSource=["#D50000","#E67C73","#F4511E","#F6BF26","#33B679","#0B8043","#039BE5","#3F51B5","#7986CB","#8E24AA","#616161","#FFFFFF","#000000",""],W.valueDisplayMode="colorBox",W.classList.add("underlined","smart-grid-color-input"),W.style.width="auto",W.onRender=()=>{const Z=W.$.scrollView;Z&&Z.classList.add("smart-grid-color-input")},W};p.innerHTML=`\n            <div class="row"><div class="column"><div class="header smart-grid-edit-dialog-column-info">${r.localize("format").replace(":","")}\n            <span title="${r.localize("resetFormat")}" class="reset-format smart-grid-icon smart-icon-reload show"></span>\n            </div>\n             </div>\n            <div class="format-layout">\n                    <div title="${r.localize("background")}" class="format smart-grid-edit-dialog-column-info">\n                        <span class="smart-grid-icon smart-icon-color-background show"></span><div class="background"></div>\n                    </div>\n                    <div title="${r.localize("color")}" class="format smart-grid-edit-dialog-column-info">\n                        <span style="border-bottom: 2px solid #46CA78;" color="#46CA78" class="format smart-grid-icon smart-icon-font show"></span><div class="color"></div>\n                    </div>\n                    <div class="format-layout button-group">\n                        <span title="${r.localize("bold")}" class="formatbtn bold smart-grid-icon smart-icon-bold show"></span>\n                        <span title="${r.localize("italic")}" class="formatbtn italic smart-grid-icon smart-icon-italic show"></span>\n                        <span title="${r.localize("underline")}" class="formatbtn underline smart-grid-icon smart-icon-underline show"></span>\n                    </div>\n            </div>\n           <div class="format-layout font-group">\n                <div title="${r.localize("fontFamily").replace(":","")}" class="format smart-grid-edit-dialog-column-info">\n                <span class="smart-grid-icon smart-icon-font show"></span><div class="font-family"></div>\n                </div>\n                <div title="${r.localize("fontSize").replace(":","")}" class="format smart-grid-edit-dialog-column-info">\n                    <span class="smart-grid-icon smart-icon-fontsize show"></span><div class="font-size"></div>\n                </div>\n           </div>\n            <div class="format-layout font-group">\n                <div title="${r.localize("status").replace(":","")}" class="format smart-grid-edit-dialog-column-info">\n                <span color="#F1C58B" class="smart-grid-icon smart-icon-star show"></span><div class="status"></div>\n                </div>\n            </div>\n            <div class="column"><div class="comments-header smart-grid-edit-dialog-column-info">${r.localize("comments").replace(":","")}</div></div>\n            <div class="comments-layout">\n                <div class="comments"><span class="no-comments">${r.localize("noComments")}</span></div>\n                <div class="footer">\n                    <smart-text-area hint="${r.localize("comment")}" placeholder="${r.localize("comment")}" class="success underlined"></smart-text-area>\n                    <smart-button class="success">${r.localize("send")}</smart-button>\n                </div>\n            </div>\n        `;const v=a._userData=JSON.parse(JSON.stringify(o._userData)),y=b();p.querySelector(".background").appendChild(y),y.onchange=()=>{v.background=y.value},v.background&&(y.value=v.background);const x=b();p.querySelector(".color").appendChild(x),x.onchange=()=>{v.color=x.value},v.color&&(x.value=v.color);const D=b();p.querySelector(".status").appendChild(D),D.onchange=()=>{v.status=D.value},v.status&&(D.value=v.status);const T=document.createElement("smart-input");T.style.width="auto",T.classList.add("underlined"),T.dropDownButtonPosition="right",T.readonly=!0,T.dropDownHeight="auto",T.dataSource=["-","Segoe UI","Arial","Georgia","Impact","Tahoma","Times New Roman","Verdana"],T.onchange=()=>{v.fontFamily=T.value},v.fontFamily?T.value=v.fontFamily:T.selectedIndex=0,p.querySelector(".font-family").appendChild(T);const M=document.createElement("smart-input");M.style.width="auto",M.classList.add("underlined"),M.dropDownButtonPosition="right",M.readonly=!0,M.dropDownHeight="auto",M.dataSource=["-","8px","10px","12px","14px","18px","24px","36px"],M.onchange=()=>{v.fontSize=M.value},v.fontSize?M.value=v.fontSize:M.selectedIndex=0,p.querySelector(".font-size").appendChild(M);const A=p.querySelector(".button-group");A.onclick=W=>{const Z=W.target.closest(".formatbtn");let te;Z.classList.contains("checked")?(Z.classList.remove("checked"),te=!1):(Z.classList.add("checked"),te=!0),Z.classList.contains("bold")?v.fontWeight=te?"bold":null:Z.classList.contains("italic")?v.fontStyle=te?"italic":null:Z.classList.contains("underline")&&(v.textDecoration=te?"underline":null)},v.fontWeight?A.children[0].classList.add("checked"):A.children[0].classList.remove("checked"),v.fontStyle?A.children[1].classList.add("checked"):A.children[1].classList.remove("checked"),v.textDecoration?A.children[2].classList.add("checked"):A.children[2].classList.remove("checked"),p.querySelector(".reset-format").onclick=()=>{for(let W=0;W<A.children.length;W++)A.children[W].classList.remove("checked");T.selectedIndex=0,M.selectedIndex=0,x.value="",y.value="",D.value="",v.fontWeight=null,v.fontStyle=null,v.textDecoration=null,v.fontSize=null,v.fontFamily=null};const B=p.querySelector(".comments-header"),O=p.querySelector(".comments-layout smart-text-area"),N=p.querySelector(".comments-layout smart-button"),P=p.querySelector(".comments-layout .footer"),V=p.querySelector(".comments-layout .comments");N.disabled=!0,V.innerHTML=`<span class="no-comments">${r.localize("noComments")}</span>`;const Y=()=>{const W=V.querySelector(".no-comments");0===v.comments.length?W.classList.remove("smart-hidden"):W.classList.add("smart-hidden")},K=W=>{W.querySelector(".remove-button").onclick=Z=>{const te=Z.target,re=v.comments.indexOf(te.comment);re>-1&&(v.comments.splice(re,1),te.element.remove(),B.innerHTML=`${r.localize("comments").replace(":","")} (${v.comments.length})`)}};for(let W=0;W<v.comments.length;W++){const te=r._createComment(v.comments[W]);K(te),V.appendChild(te)}B.innerHTML=`${r.localize("comments").replace(":","")} (${v.comments.length})`,Y(),O.onfocus=()=>{P.classList.add("focus")},O.onblur=()=>{P.classList.remove("focus")},O.onkeyup=()=>{N.disabled=""===O.value},N.onclick=()=>{if(""===O.value)return;r._refreshCurrentUser();const W={text:O.value,userId:r._currentUser.info?r._currentUser.info.id:-1,time:new Date},Z=r._createComment(W);K(Z),v.comments.push(W),O.value="",N.disabled=!0,Y(),V.appendChild(Z),B.innerHTML=`${r.localize("comments").replace(":","")} (${v.comments.length})`};for(let W=0;W<r.columns.length;W++){const Z=r.columns[W];if(!Z.allowEdit)continue;const te=document.createElement("div");te.classList.add("row"),s.appendChild(te);const re=document.createElement("div"),C=r._settingsDialogRowId?document.createElement("div"):document.createElement("label");C.innerHTML=`<div class="smart-grid-edit-dialog-column-info"><span class="smart-grid-icon ${r.columns[W].icon} show"></span><label>`+r.columns[W].label+(Z.validationRules&&Z.validationRules.length>0?"*":"")+'</label><span toggle class="smart-grid-icon smart-icon-visibility-on show"</div>';const m=document.createElement("div");m.classList.add("smart-grid-dialog-editor"),m.setAttribute("editor",Z.dataField),m.setAttribute("template",Z.editor.template);const h=C.querySelector("[toggle]");h.column=Z,l[Z.dataField]=Z.visible,h.title=r.localize("columnMenuItemHide"),h.onclick=()=>{l[h.column.dataField]=!h.column.visible,h.classList.contains("smart-icon-visibility-on")?(h.classList.remove("smart-icon-visibility-on"),h.classList.add("smart-icon-visibility-off"),h.title=r.localize("columnMenuItemShow")):(h.classList.add("smart-icon-visibility-on"),h.classList.remove("smart-icon-visibility-off"),h.title=r.localize("columnMenuItemHide"))},Z.visible||(h.classList.remove("smart-icon-visibility-on"),h.title=r.localize("columnMenuItemShow")),h.classList.add(Z.visible?"smart-icon-visibility-on":"smart-icon-visibility-off"),re.appendChild(C),re.appendChild(m);const f=document.createElement("label");f.classList.add("smart-field-editor-error-label"),f.setAttribute("label-for",Z.dataField),re.appendChild(f),te.appendChild(re)}}_createComment(a){const i=this,o=i._currentUser.info,r=document.createElement("div"),l=o?o.image:"smart-icon",s=o?o.name||o.id:i.localize("guestUser"),c=o?o.name:i.localize("guestUser");r.className="comment",r.setAttribute("role","listitem"),r.innerHTML=`<div class="comment-indent" role="presentation">\n<div class="user-icon ${l}" role="img" aria-label="Icon of user ${s}"></div>\n</div>\n<div class="comment-main" role="presentation">\n<div class="comment-header" role="presentation">\n    <div class="user-name" aria-label="User name">${c}</div>\n    <div class="time" aria-label="Comment time">${a.time?new Smart.Utilities.DateTime(a.time).toString(i.formatStringTime):""}</div>\n    <div class="remove-button${i._currentUser.info&&o.id===i._currentUser.info.id&&i._currentUser.allowComment?" enabled":""}" role="button" aria-haspopup="menu" aria-label="Comment settings"></div>\n</div>\n<div class="comment-body" aria-label="Comment text">${a.text||""}</div >\n</div>`,r.comment=a;const u=r.querySelector(".remove-button");return u.comment=a,u.element=r,r}_openDeleteRowDialog(a,i){const o=this;if(!o.editing.deleteDialog.enabled)return!1;const r=o._dialogDelete||o._createDialog(),l="{{message}}"===o.editing.dialog.header?o.localize("dialogDeleteHeader",{value:a.visibleIndex+1}):o.editing.dialog.header;r.header.innerHTML=l,r.content.innerHTML=o.localize("dialogDeleteContent"),r.row=a,o._dialogDelete||(r.modal=!0,r.btnConfirm.innerHTML=o.localize("dialogDeleteButtonConfirm"),r.btnCancel.innerHTML=o.localize("dialogDeleteButtonCancel"),r.onOpen=function(){o.editing.dialog.visible=!0},r.onClose=function(){o.editing.dialog.visible=!1},r.btnCancel.onclick=function(){r.close()},r.btnClose.onclick=function(){r.close()},r.btnConfirm.onclick=function(){i(r.row),r.close()},r.onkeydown=function(s){"Escape"===s.key&&r.close()},o._dialogDelete=r),r.open(),setTimeout(function(){r.btnConfirm.focus()},100)}_getAddColumnDataFieldsEditorDataSource(){const a=this;let i=a.dataSource?[...a.dataSource.dataFields].map(o=>(o.value=o.label=o.name,o)):[];return i=i.filter(o=>{let r=!0;return a.columns.forEach(l=>{if(l.dataField===o.name)return r=!1,!0}),r}),i}_getAddColumnDialogTemplate(){const a=this,i=(new Date).getFullYear().toString();return[{bind:"name",type:"input",label:"Name",filter:"any",info:"Name of the column"},{bind:"dataField",type:"dropDownList",label:"Data field",filter:"any",info:"Bind the column",options:a._getAddColumnDataFieldsEditorDataSource()},{bind:"type",name:"typeslist",type:"dropDownList",filter:"any",label:"Type",options:[{value:"string",label:"Text"},{value:"number",label:"Number"},{value:"option",label:"List"},{value:"multioption",label:"List with multiple selections"},{value:"boolean",label:"CheckBox"},{value:"date",label:"Date"},{value:"time",label:"Time"},{value:"datetime",label:"Date and Time"}],info:"Type of the data in the column"},{bind:"dateFormat",name:"dateformat",type:"dropDownList",label:"Date format",options:[{value:"M/d/yyyy",dateTimeFormat:{year:"numeric",day:"numeric",month:"numeric"},label:"7/3/"+i},{value:"MM/dd/yyyy",dateTimeFormat:{year:"numeric",day:"numeric",month:"numeric"},label:"07/03/"+i},{value:"ddd, MMM dd, yyyy",dateTimeFormat:{year:"numeric",day:"numeric",month:"numeric"},label:"Tuesday, July 03, "+i},{value:"M/d",label:"7/3",dateTimeFormat:{day:"numeric",month:"numeric"}},{value:"MM/dd",label:"07/03",dateTimeFormat:{day:"numeric",month:"numeric"}},{value:"M/d/yy",label:"7/3/"+i.substring(2),dateTimeFormat:{year:"2-digit",day:"numeric",month:"numeric"}},{value:"MM/dd/yy",label:"07/03/"+i.substring(2),dateTimeFormat:{year:"2-digit",day:"2-digit",month:"2-digit"}},{value:"dd-MMM",label:"03-Jul",dateTimeFormat:{day:"numeric",month:"numeric"}},{value:"dd-MMM-yy",label:"03-Jul-"+i.substring(2),dateTimeFormat:{day:"numeric",month:"numeric",year:"numeric"}},{value:"d/M/yyyy",label:"3/7/"+i,dateTimeFormat:{day:"numeric",month:"numeric",year:"numeric"}},{value:"dd/MM/yyyy",label:"03/07"+i,dateTimeFormat:{day:"numeric",month:"numeric",year:"numeric"}},{value:"d/M",label:"3/"+i.substring(2),dateTimeFormat:{day:"numeric",month:"numeric"}},{value:"dd/MM",label:"03/"+i.substring(2),dateTimeFormat:{day:"numeric",month:"numeric"}},{value:"d/M/yy",label:"3/7/"+i.substring(2),dateTimeFormat:{day:"numeric",month:"numeric",year:"numeric"}},{value:"dd/MM/yy",label:"03/07/"+i.substring(2),dateTimeFormat:{day:"numeric",month:"numeric",year:"numeric"}}],filter:"date",info:"Choose the dates display format"},{bind:"timeFormat",name:"timeformat",type:"dropDownList",label:"Time format",filter:"time",options:[{value:"HH:mm:ss",label:"14:10:55"},{value:"hh:mm:ss tt",label:"02:10:55 PM"},{value:"h:m:ss tt",label:"2:5:55 PM"},{value:"h:m tt",label:"2:15 PM"},{value:"HH:mm",label:"14:31"}],info:"Choose the time display format"},{bind:"numberFormat",name:"numberFormat",type:"dropDownList",label:"Number Format",filter:"number",options:[{value:{style:"decimal",maximumFractionDigits:0},label:"Integer 1,000"},{value:{style:"decimal",minimumFractionDigits:2},label:"Number 1,000.12"},{value:{style:"percent",minimumFractionDigits:2},label:"Percent 10.12%"},{value:{style:"percent",maximumFractionDigits:0,minimumFractionDigits:0},label:"Percent(rounded) 10%"},{value:{style:"decimal",notation:"scientific"},label:"Scientific 1.01E+03"},{value:{style:"decimal",notation:"engineering"},label:"Engineering 34.284 x 10^9"},{value:{style:"currency",currency:a.messages[a.locale].calendar.currency,currencySign:"accounting"},label:"Accounting $(1,000.12)"},{value:{currencySign:"accounting"},label:"Financial (1,000.12)"},{value:{style:"currency",currency:a.messages[a.locale].calendar.currency},label:"Currency $1,000.12"},{value:{style:"currency",currency:a.messages[a.locale].calendar.currency,maximumFractionDigits:0,minimumFractionDigits:0},label:"Currency(rounded) $1,000"}],required:!1,info:"Choose the number display format"},{bind:"minLength",name:"minlength",type:"number",filter:"text",label:"Minimum length",required:!1,info:"Minimum text length"},{bind:"maxLength",name:"maxlength",filter:"text",type:"number",label:"Maximum length",required:!1,info:"Maximum text length"},{bind:"minValue",name:"minvalue",filter:"number",type:"number",label:"Minimum value",required:!1,info:"Minimum number"},{bind:"maxValue",name:"maxvalue",filter:"number",type:"number",label:"Maximum value",required:!1,info:"Maximum number"},{bind:"minDateTime",name:"mindatetime",type:"datetime",filter:"date",label:"Minimum date",info:"Minimum date"},{bind:"maxDateTime",name:"maxdatetime",type:"datetime",filter:"date",label:"Maximum date",info:"Maximum date"},{bind:"options",name:"listitems",type:"textArea",label:"List items",filter:"list",info:"Enter a list of items separated by comma"},{name:"align",bind:"cellsAlign",type:"dropDownList",label:"Align",required:!1,options:[{value:"left",label:"Left"},{value:"right",label:"Right"},{value:"center",label:"Center"}],filter:"any",info:"Cells text alignment"},{bind:"allowResize",type:"boolean",label:"Resizable",filter:"any",info:"Select if you want to make the column resizable"},{bind:"required",type:"boolean",label:"Required",filter:"text",info:"Select if you want to make the column required"},{bind:"allowSort",type:"boolean",label:"Sortable",filter:"any",info:"Select if you want to sort by this column"},{bind:"allowFilter",type:"boolean",label:"Filterable",align:"left",filter:"any",info:"Select if you want to filter by this column"},{bind:"allowEdit",type:"boolean",label:"Editable",filter:"any",info:"Select if you want to make the column editable"}]}_addColumnDialogShowHideEditors(){const a=this,i=a._dialogAddColumn.querySelector('[bind="type"]').querySelector("smart-input").getSelectedItem().value,o=a._dialogAddColumn.querySelectorAll(".smart-grid-dialog-editor");let r=!1;for(let l=0;l<o.length;l++){const s=o[l],c=s.getAttribute("filter"),u=s.getAttribute("bind"),p=s.parentNode;if(p.classList.add("smart-hidden"),"dataField"===u){const g=s.querySelector("smart-input"),b=g.getSelectedItem().value;let v=null;if(a.dataSource&&a.dataSource.dataFields&&(v=a.dataSource.dataFields.find(y=>{if(y.name===b)return!0})),v&&(r=!0),a._dialogAddColumn.editColumn){p.classList.add("smart-hidden"),r=!0;continue}if(!g.dataSource||0===g.dataSource.length){p.classList.add("smart-hidden");continue}}if("cellsAlign"!==u||"boolean"!==i)if("type"===u&&r)p.classList.add("smart-hidden");else if("any"!==c)if("allowResize"!==u||"none"!==a.behavior.columnResizeMode)if("allowFilter"!==u||!1!==a.filtering.enabled)if("allowSort"!==u||!1!==a.sorting.enabled)if("allowEdit"!==u||!1!==a.editing.enabled)if("required"!==u||!1!==a.editing.enabled)switch(i){default:case"text":"text"===c&&p.classList.remove("smart-hidden");break;case"number":"number"===c&&p.classList.remove("smart-hidden");break;case"option":case"multioption":"list"===c&&p.classList.remove("smart-hidden");break;case"boolean":break;case"date":"date"===c&&p.classList.remove("smart-hidden");break;case"time":"time"===c&&p.classList.remove("smart-hidden");break;case"datetime":"date"===c&&p.classList.remove("smart-hidden"),"time"===c&&p.classList.remove("smart-hidden")}else p.classList.add("smart-hidden");else p.classList.add("smart-hidden");else p.classList.add("smart-hidden");else p.classList.add("smart-hidden");else p.classList.add("smart-hidden");else p.classList.remove("smart-hidden");else p.classList.add("smart-hidden")}}_addColumnDialogInitEditors(){const a=this,i=a._addColumnDialogEditors.dataField.querySelector("smart-input"),o=a._dialogAddColumn.editColumn;i.value="",i.dataSource=a._getAddColumnDataFieldsEditorDataSource();for(let r in a._addColumnDialogEditors){const l=a._addColumnDialogEditors[r],s=l.querySelector("input"),c=l.querySelector("smart-input");switch(r){case"allowResize":case"allowSort":case"allowEdit":case"allowFilter":case"required":{const u=l.querySelector(".smart-input");o?o[r]?(u.value=!0,u.setAttribute("checked","")):!1===o[r]&&(u.value=!1,u.removeAttribute("checked")):(u.value=!0,u.setAttribute("checked",""));break}}o&&"type"===r&&("number"===o.dataType||"int"===o.dataType?c.selectedIndex=1:"date"===o.dataType?c.selectedIndex=5:"bool"!==o.dataType&&"boolean"!==o.dataType||(c.selectedIndex=4)),"cellsAlign"===r&&o&&("center"===o.cellsAlign||"middle"===o.cellsAlign?c.selectedIndex=2:"right"===o.cellsAlign&&(c.selectedIndex=1)),s&&("dataField"!==r&&"type"!==r&&c&&(c.selectedIndex=0),"name"===r&&(c.value=o?o.label:""),"dataField"===r&&(c.value=o?o.dataField:""),"minValue"===r?s.value=0:"maxValue"===r?s.value=100:"minLength"===r?s.value=0:"maxLength"===r&&(s.value=500),"minDateTime"===r?l.querySelector("smart-date-input").value=new Date(1900,0,1):"maxDateTime"===r&&(l.querySelector("smart-date-input").value=new Date(2100,0,1)))}}_openAddColumnDialog(a){const i=this,o=i._dialogAddColumn||i._createDialog(i.editing.addColumnDialog),r=a?i.localize("dialogEditColumn",{value:a.label}):i.localize("dialogAddColumn"),l=o.querySelector(".smart-footer").querySelector(".smart-stack-layout");o.classList.add("smart-grid-dialog-add-column"),o.type=a?"customize":"add",o.editColumn=a||null,l.classList.remove("right"),l.classList.add("center"),i._cellEditors||(i._cellEditors=[]);const s=i._getAddColumnDialogTemplate();if(o.header.innerHTML=r,!i._dialogAddColumn){o.modal=!0,o.btnConfirm.innerHTML=i.localize("dialogEditButtonConfirm"),o.btnCancel.innerHTML=i.localize("dialogEditButtonCancel"),o.onOpen=function(){i._addColumnDialogInitEditors(),i._addColumnDialogShowHideEditors(),i.$.fireEvent("openColumnDialog",{dataField:o.editColumn.dataField})},o.onClose=function(){},o.btnCancel.onclick=function(){o.close()},o.btnClose.onclick=function(){o.close()},o.btnConfirm.onclick=function(){const u=i._dialogAddColumn.querySelectorAll(".smart-grid-dialog-editor"),p=[];let g,b,v={};for(let T=0;T<u.length;T++){const M=u[T],A=M.querySelector(".smart-input"),B=M.getAttribute("bind");v[B]="minLength"!==B&&"maxLength"!==B&&"minValue"!==B&&"maxValue"!==B&&"minDateTime"!==B&&"maxDateTime"!==B?A.getSelectedItem?A.getSelectedItem().value:A.value:A.getValue()}o.data=v;let y={},x={},D="";if(g=v.minDateTime,b=v.maxDateTime,"time"===v.type?(y={template:"timeInput",min:g,max:b},D=v.timeFormat,p.push({type:"minDate",value:g}),p.push({type:"maxDate",value:b})):"date"===v.type||"datetime"===v.type?(y={template:"dateInput",min:g,max:b},D=v.dateFormat,"datetime"===v.type&&(D+=" "+v.timeFormat),p.push({type:"minDate",value:g}),p.push({type:"maxDate",value:b})):"number"===v.type?(g=parseInt(v.minValue),b=parseInt(v.maxValue),y={template:"numberInput",min:g,max:b,numberFormat:v.numberFormat},x={Intl:{NumberFormat:v.numberFormat}},D="d",p.push({type:"min",value:g}),p.push({type:"max",value:b})):"boolean"===v.type?y={template:"checkBox"}:"option"===v.type?y={template:"dropDownList",readonly:!0,dropDownButtonPosition:"right",autoOpen:!0,dataSource:v.options.split(",").map(T=>T.trim())}:"multioption"===v.type?y={template:"multiInput",readonly:!0,dropDownButtonPosition:"right",autoOpen:!0,dataSource:v.options.split(",").map(T=>T.trim())}:(g=v.minLength,b=v.maxLength,y={template:"input",min:g,max:b,required:v.required},p.push({type:"minLength",value:g}),p.push({type:"maxLength",value:b})),i._dialogAddColumn.editColumn){const T=i._dialogAddColumn.editColumn;T.canNotify=!1,T.label=v.name,T.allowResize=v.allowResize,T.allowSort=v.allowSort,T.allowFilter=v.allowFilter,T.allowEdit=v.allowEdit,T.align=T.cellsAlign=v.cellsAlign,T.cellsFormat=D,T.editor=y,T.formatSettings=x,v.required&&p.push({type:"required"}),T.validationRules=p,T.canNotify=!0,i.$.fireEvent("closeColumnDialog",{dataField:T.dataField}),i._recycle(!0)}else{const T=new Smart.Grid.Column({label:v.name,dataField:v.dataField||"dataField"+Math.floor(65536*(1+Math.random())).toString(16).substring(1),allowResize:v.allowResize,allowSort:v.allowSort,allowFilter:v.allowFilter,allowEdit:v.allowEdit,dataType:v.type,editor:y,formatSettings:x,cellsAlign:v.cellsAlign,align:v.cellsAlign,cellsFormat:D,grid:i});"boolean"===v.type&&(T.template="checkBox"),i.$.fireEvent("closeColumnDialog",{dataField:T.dataField}),i.columns.push(T)}o.close()},o.onkeydown=function(u){"Escape"===u.key&&o.close()},i._dialogAddColumn=o;const c=document.createElement("div");c.classList.add("smart-content-layout-container"),o.content.appendChild(c),i._addColumnDialogEditors=[];for(let u=0;u<s.length;u++){const p=s[u],g=document.createElement("div"),b=document.createElement("label");b.innerHTML=p.label;const v=document.createElement("div");if(v.classList.add("smart-grid-dialog-editor","add-column"),v.innerHTML="",v.setAttribute("filter",p.filter),v.setAttribute("bind",p.bind),g.setAttribute("field-name",p.bind),i._addColumnDialogEditors[p.bind]=v,"type"===p.bind&&v.addEventListener("change",()=>{i._addColumnDialogShowHideEditors()}),"boolean"===p.type){v.setAttribute("template","checkBox"),v.setAttribute("editor","");const y=document.createElement("div");y.classList.add("smart-input"),y.classList.add("smart-grid-cell-editor"),y.classList.add("smart-grid-check-box-cell-editor"),y.setAttribute("checked",""),y.value=!0,v.appendChild(y),y.onclick=function(){!0!==y.value&&!1!==y.value&&null!==y.value&&(y.value=!1),y.value=null!==y.value&&!y.value,!1===y.value?y.removeAttribute("checked"):y.setAttribute("checked",y.value?"":"indeterminate")},c.appendChild(g),g.classList.add("smart-grid-dialog-boolean-field"),g.appendChild(v),g.appendChild(b)}else{let y=document.createElement("smart-input");if(y.classList.add("underlined"),y.style.width="100%",y.style.height="30px","textArea"===p.type?(y=document.createElement("smart-text-area"),y.classList.add("outlined"),y.style.width="100%",y.style.height="80px",y.placeholder=p.label,v.style.height="80px"):"number"===p.type?(y=document.createElement("smart-number-input"),y.classList.add("underlined"),y.style.width="100%",y.style.height="30px","minValue"===p.bind?(y.value=0,y.min=-9999999,y.max=9999999):"maxValue"===p.bind?(y.value=1e6,y.min=-9999999,y.max=9999999):"minLength"===p.bind?y.value=0:"maxLength"===p.bind&&(y.value=500)):"datetime"===p.type&&(y=document.createElement("smart-date-input"),y.classList.add("underlined"),y.style.width="100%",y.style.height="30px","minDateTime"===p.bind?y.value=new Date(1900,0,1):"maxDateTime"===p.bind&&(y.value=new Date(2100,0,1))),p.options&&(y.readonly=!0,y.dataSource=p.options,y.dropDownButtonPosition="right","dataField"!==p.bind&&(y.selectedIndex=0),"dataField"===p.bind&&(y.readonly=!1),p.options.length<15&&(y.dropDownHeight="auto")),v.appendChild(y),p.info){const x=document.createElement("span");x.classList.add("smart-grid-icon","smart-icon-attention-circled","show","smart-description-button"),x.title=p.info,v.appendChild(x),y.style.width="calc(100% - 25px)"}c.appendChild(g),g.classList.add("smart-grid-dialog-field"),g.appendChild(b),g.appendChild(v)}if("dataField"===p.bind){const y=v.querySelector("smart-input");v.addEventListener("change",()=>{let x="";const D=y.getSelectedItem().value,T=i._addColumnDialogEditors.type.querySelector(".smart-input");let M=null;i.dataSource&&i.dataSource.dataFields&&(M=i.dataSource.dataFields.find(A=>{if(A.name===D)return!0})),M?("number"===M.dataType||"int"===M.dataType?x=M.dataType:"string"===M.dataType?x="text":"date"===M.dataType?x="date":"bool"!==M.dataType&&"boolean"!==M.dataType||(x="boolean"),T.selectItem(x)):T.selectItem("text"),i._addColumnDialogShowHideEditors()})}}}if(a){const c=a.element,u=i.offset(c),p=i.offset(i);o.open(u.left-p.left,u.top+c.offsetHeight-p.top)}else o.open("middle","center");setTimeout(function(){o.btnConfirm.focus()},100)}_openDescriptionDialog(a,i){const o=this,r=o._dialogDescription||o._createDialog(),l=o.localize("dialogDescriptionHeader",{value:a.label});if(r.header.innerHTML=l,r.column=a,r.command=i,!o._dialogDescription){r.modal=!0,r.btnConfirm.innerHTML=o.localize("dialogEditButtonConfirm"),r.btnCancel.innerHTML=o.localize("dialogEditButtonCancel"),r.onOpen=function(){const b=r.querySelector("smart-input");setTimeout(()=>{b.select()},250)},r.onClose=function(){},r.btnCancel.onclick=function(){r.close()},r.btnClose.onclick=function(){r.close()},r.btnConfirm.onclick=function(){const b=r.querySelector("smart-input");let v=r.column.label;switch(r.command){case"rename":r.column.label=b.value;break;case"editDescription":v=r.column.description,r.column.description=b.value}o.$.fireEvent("endEdit",{dataField:a.dataField,column:a,oldValue:v,value:b.value,action:r.command}),r.close()},r.onkeydown=function(b){"Escape"===b.key&&r.close()},o._dialogDescription=r;const g=document.createElement("smart-input");g.classList.add("underlined"),r.content.appendChild(g)}const s=a.element,c=o.offset(s),u=o.offset(o);r.open(c.left-u.left,c.top+s.offsetHeight-u.top);const p=r.querySelector("smart-input");switch(i){case"rename":p.value=a.label;break;case"editDescription":p.value=a.description}setTimeout(function(){r.btnConfirm.focus()},100)}_beginCellEdit(a,i){const o=this;if(a.isEditing||o._isUpdating)return!1;let r=!1;if(a.column.autoGenerated&&a.column.rowHeaderColumn&&o.editing.allowRowHeaderEdit&&new Date-o._clickTime<o.behavior.doubleClickTimingDelay&&o._clickedCell===a.element&&(r=!0),(!a.column.allowEdit||a.column.autoGenerated||a.readonly)&&!r||o.editing.editCell&&!o.editing.editRow&&!1===o._endCellEdit())return!1;o._cellEditors||(o._cellEditors=[]),o.editing.editRow||(o.editing.editCell=a),o.editing.commandColumn.visible&&!o.editing.editRow&&(o.editing.isEditing=!1,o.refresh(),o.editing.isEditing=!0),a.row.element.setAttribute("edit",""),o.editing.isEditing=!0,o._selection.selectionRect&&o._selection.selectionRect.classList.add("smart-visibility-hidden");const l=u=>{const p=u.element;o.editing.dialog.enabled?o._openEditDialog(a,u):(a.element||a.createElement(),a.element.setAttribute("editor","string"==typeof a.editor.template?a.editor.template:"template"),a.element.content.innerHTML="",a.element.content.appendChild(p),o.editing.editRow&&a.element.setAttribute("row-editor","")),u.attach(),a.editor.row=a.row,a.editor.column=a.column,a.editor.cell=a,a.editor.instance=u,a.isEditing=!0},s=o._cellsUpdatedValues?o._cellsUpdatedValues[a.row.id+"_"+a.column.dataField]:void 0;let c=void 0!==s?s:a.value;if(void 0===c){c="";const u=a.column;"number"===u.dataType||"int"===u.dataType||"float"===u.dataType?c=0:"date"===u.dataType&&(c=new Date,c.setHours(0,0,0))}switch(a.editor||(a.editor="input"),"string"==typeof a.editor&&(a.canNotify=!1,a.editor={template:a.editor,autoFocus:!0},a.canNotify=!0),a.editor.template){default:case"custom":{const u=o._getCustomCellEditor(a);l(u),u.setValue(c);break}case"image":{const u=o._getImageCellEditor(a);l(u),u.setValue(c);break}case"checkBox":{const u=o._getCheckBoxCellEditor(a);l(u);const p=!0===c||1===c;"checkBox"===a.template&&i&&(o.enableShadowDOM?o.shadowRoot:o.getRootNode()).elementsFromPoint(i.clientX,i.clientY)[0].classList.contains("smart-input")?u.setValue(!p):u.setValue(p);break}case"autoComplete":{const u=o._getAutoCompleteCellEditor(a);l(u),u.setValue(c),a.editor.autoOpen&&u.element.open();break}case"dropDownList":{a.editor.autoOpen=!0,a.editor.readonly=!0,a.editor.dropDownButtonPosition="right";const u=o._getAutoCompleteCellEditor(a);l(u),u.setValue(c),a.editor.autoOpen&&u.element.open();break}case"comboBox":{a.editor.readonly=!1,a.editor.dropDownButtonPosition="right";const u=o._getAutoCompleteCellEditor(a);l(u),u.setValue(c),a.editor.autoOpen&&u.element.open();break}case"maskedTextBox":{const u=o._getMaskCellEditor(a);l(u),u.setValue(c);break}case"multiInput":{const u=o._getAutoCompleteCellEditor(a,"smart-multi-input");l(u),u.setValue(c),a.editor.autoOpen&&u.element.open();break}case"checkInput":{const u=o._getAutoCompleteCellEditor(a,"smart-check-input");l(u),u.setValue(c),a.editor.autoOpen&&u.element.open();break}case"multiComboInput":{const u=o._getAutoCompleteCellEditor(a,"smart-multi-combo-input");l(u),u.setValue(c),a.editor.autoOpen&&u.element.open();break}case"timeInput":{const u=o._getTimeInputCellEditor(a);l(u),u.setValue(c),a.editor.autoOpen&&u.element.open();break}case"dateInput":{const u=o._getDateInputCellEditor(a);l(u),u.setValue(c),a.editor.autoOpen&&u.element.open();break}case"dateRangeInput":{const u=o._getDateRangeInputCellEditor(a);l(u),u.setValue(c),a.editor.autoOpen&&u.element.open();break}case"dateTimePicker":{const u=o._getDateTimePickerCellEditor(a);l(u),u.setValue(c),a.editor.autoOpen&&u.element.open();break}case"textArea":{const u=o._getTextAreaCellEditor(a);l(u),u.setValue(c);break}case"numberInput":case"text":case"input":{const u="numberInput"===a.editor.template?o._getNumberInputCellEditor(a):o._getInputCellEditor(a);l(u),u.setValue(c);break}}if(!a.editor.isInitialized&&(a.editor.isInitialized=!0,a.editor.onInit)){const u=a.editor.onInit(a.row.index,a.column.dataField,a.editor.instance.element,a.row.data);if(u&&u instanceof Promise)u.then(p=>{const g="custom"===a.editor.template?a.editor.instance.element.firstElementChild:a.editor.instance.element;for(let b in p)g[b]=p[b]});else if(u){const p=u,g="custom"===a.editor.template?a.editor.instance.element.firstElementChild:a.editor.instance.element;for(let b in p)g[b]=p[b]}}if(a.editor.onRender){const u=a.editor.onRender(a.row.index,a.column.dataField,a.editor.instance.element,a.row.data);if(u&&u instanceof Promise)u.then(p=>{const g="custom"===a.editor.template?a.editor.instance.element.firstElementChild:a.editor.instance.element;for(let b in p)g[b]=p[b]});else if(u){const p=u,g="custom"===a.editor.template?a.editor.instance.element.firstElementChild:a.editor.instance.element;for(let b in p)g[b]=p[b]}}return o.editing.editCell&&a.editor.instance.focus(),!0}_onColumnDoubleClick(a){this._beginColumnEdit(a)}_beginColumnEdit(a){const i=this;if(i.editing.enabled&&i.editing.allowColumnHeaderEdit&&a.allowHeaderEdit){i.editing.isEditing&&i.endEdit(),i.editing.editColumn=a,i._cellEditors||(i._cellEditors=[]);const o=i._getInputCellEditor({column:a,row:i.rows[0],editor:{template:"input"}});o.element.value=a.label,o.focus(),a.headerEditor=o,a.element.setAttribute("edit",""),a.element.label.appendChild(o.element),o.attach(),i.editing.isEditing=!0,i.$.fireEvent("beginEdit",{id:null,dataField:a.dataField,row:null,column:a,cell:null})}}_endColumnEdit(a){const i=this;if(!1===i.editing.isEditing||i.editing.isEditing&&null===i.editing.editColumn)return!1;const o=i.editing.editColumn;return o.canNotify=!1,o.headerEditor.detach(),o.headerEditor.element.parentNode.removeChild(o.headerEditor.element),!0!==a&&(o.label=o.headerEditor.getValue()),o.headerEditor=null,i.editing.isEditing=!1,o.element.removeAttribute("edit"),o.element.scrollLeft=0,i.editing.editColumn=null,o.canNotify=!0,o.refresh(),i._recycle(),!0}_cancelColumnEdit(){this._endColumnEdit(!0)}_onCellClick(a,i){const o=this;if(a.row.addNewRow)"far"===a.row.freeze?o._insertNewRowAfter():o._insertNewRowBefore();else if(!a.row.filterRow&&o.editing.enabled)if(o.editing.editColumn)o.endEdit();else{if(o.editing.commandColumn.visible)if(a.column.commandColumn){const r=(o.enableShadowDOM?o.shadowRoot:o.getRootNode()).elementsFromPoint(i.clientX,i.clientY);let l=null;for(let s=0;s<r.length;s++)if(r[s].classList.contains("smart-grid-command-item")){l=r[s];break}if(l||(l=a.element.querySelector(".smart-grid-command-item")),l&&!l.classList.contains("smart-hidden")){const s=l.getAttribute("command");return void o._applyCommand(s,[a.row,i])}}else if(o.editing.commandColumn.inline){const r=(o.enableShadowDOM?o.shadowRoot:o.getRootNode()).elementsFromPoint(i.pageX,i.pageY);for(let l=0;l<r.length;l++)if(r[l].classList.contains("smart-grid-command-item"))return}if("none"===o.editing.action&&o.editing.isEditing){let r=!1;o.editing.editCell&&o.editing.editCell.row!==a.row&&(r=!0),o.editing.editRow&&o.editing.editRow!==a.row&&(r=!0),o.editing.editColumn&&(r=!0),r&&o.endEdit()}if(a.column.autoGenerated)o.editing.allowRowHeaderEdit&&a.column.rowHeaderColumn&&(o.editing.isEditing&&o.endEdit(),o._beginCellEdit(a,i),o.$.fireEvent("beginEdit",{id:a.row.id,dataField:a.column.dataField,row:a.row,column:a.column,cell:a}));else if("click"===o.editing.action&&(!o.selection.enabled||a.selected||"extended"!==o.selection.mode))if("cell"===o.editing.mode){const r=a.parent();o.ensureVisible(a.row.id,a.column.dataField),setTimeout(function(){r?(o._beginCellEdit(r,i),o.$.fireEvent("beginEdit",{id:r.row.id,dataField:r.column.dataField,row:r.row,column:r.column,cell:r})):(o._beginCellEdit(a,i),o.$.fireEvent("beginEdit",{id:a.row.id,dataField:a.column.dataField,row:a.row,column:a.column,cell:a}))},25)}else"row"===o.editing.mode&&(o._beginRowEdit(a.row,a,i),o.$.fireEvent("beginEdit",{id:a.row.id,dataField:a.column.dataField,row:a.row,column:a.column,cell:a}))}}_onCellDoubleClick(a,i){const o=this;o.editing.enabled&&("doubleClick"!==o.editing.action||o.editing.isEditing||a.column.autoGenerated||("cell"===o.editing.mode?o._beginCellEdit(a,i):"row"===o.editing.mode&&o._beginRowEdit(a.row,a,i)))}_onRowClick(){}_onRowDoubleClick(){}beginEdit(a,i){const r=this.rowById[a];r&&this._beginEdit(r,i)}cancelEdit(){const a=this;if(a._errorOverlay){if(a._errorOverlay.remove(),a._errorMessage.remove(),a.editing.editCell&&(a.editing.editCell.error=""),a.editing.editRow){const i=a.editing.editRow.cells;for(let o=0;o<i.length;o++)i[o].error="";a.editing.editRow.element.removeAttribute("error"),a.editing.editRow.error=null}a._isUpdating=!1}if(a.editing.editRow){const i=a.editing.editRow.cells;for(let o=0;o<i.length;o++){const r=i[o],l=r.element;0===o&&r.row.element.removeAttribute("edit"),l&&(l.removeAttribute("editor"),l.removeAttribute("error"),l.content.innerHTML=""),r.isEditing=!1}a.editing.editRow=null}else a.editing.editCell?(a.editing.editCell.row.element.removeAttribute("edit"),a.editing.editCell.row.element.removeAttribute("error"),a.editing.editCell.element.removeAttribute("editor"),a.editing.editCell.element.removeAttribute("error"),a.editing.editCell.element.content.innerHTML="",a.editing.editCell.isEditing=!1,a.editing.editCell=null):a.editing.editColumn&&a._cancelColumnEdit();a.editing.dialog.visible&&a.editing.dialog.enabled&&a._dialogEdit.close(),a.editing.isEditing=!1,a._recycle(!1),a.editing.commandColumn.visible&&a.refresh(),a.$.fireEvent("cancelEdit"),a.focus()}removeRow(a,i){return this.deleteRow(a,i)}deleteRow(a,i){const o=this;if(a&&Array.isArray(a)){o.beginUpdate();const s=o.rows.canNotify;o.rows.canNotify=!1;for(let c in a)o.deleteRow(a[c],i);return o.rows.canNotify=s,void o.endUpdate()}const r=o.rowById[a];if(!r)return!1;const l=function(s){if(!0===o.editing.batch||o.editing.batch&&o.editing.batch.indexOf("delete")>=0)o._batchDeleteRow(s);else{if(o.dataSource&&o.dataSource.virtualDataSource)return o._editInfo={row:s.data},void o._virtualDataRequest("remove",function(u){if(u){const p=o.rows.indexOf(s);o.rows.splice(p,1),delete o.rowById[s.id],i&&i(s)}});const c=o.rows.indexOf(s);o._removeAt(c)}i&&i(s)};return o.editing.deleteDialog.enabled?o._openDeleteRowDialog(r,l):l(r),!0}addRow(a,i,o){const r=this;if(a||(a={}),void 0===i&&(i=!0),r.dataSource&&r.dataSource.virtualDataSource)r._editInfo={row:a},r._virtualDataRequest("add",l=>{l&&(r._add(a,i?r.rows.length:0),o&&o(i?r.rows[r.rows.length-1]:r.rows[0]))});else{if(r.editing.batch)return void(i?r.commandBarAddRowCommand():r.commandBarAddTopRowCommand());r._add(a,i?r.rows.length:0);const l=i?r.rows[r.rows.length-1]:r.rows[0];o&&o(l)}}highlightCell(a,i,o){const r=this;r.rowById[a]&&r.columnByDataField[i]&&(r.highlightedCells||(r.highlightedCells=[]),r.highlightedCells[a]||(r.highlightedCells[a]=[]),void 0!==r.highlightedCells[a][i]?o?r.highlightedCells[a][i]=r.highlightedCells[a][i].startsWith("off")?o||"":"off_"+o:delete r.highlightedCells[a][i]:r.highlightedCells[a][i]=o||"",r._recycle(!1))}highlightRow(a,i){const o=this;o.rowById[a]&&(o.highlightedRows||(o.highlightedRows=[]),void 0!==o.highlightedRows[a]?i?o.highlightedRows[a]=o.highlightedRows[a].startsWith("off")?i||"":"off_"+i:delete o.highlightedRows[a]:o.highlightedRows[a]=i||"",o._recycle(!1))}highlightColumn(a,i){const o=this.columnByDataField[a];o.highlight=!o.highlight,o._highlightCSS=i,this._recycle(!1)}setRowProperty(a,i,o){const r=this.rowById[a];r&&(r[i]=o)}getRowProperty(a,i){const o=this.rowById[a];if(o)return o[i]}getColumnProperty(a,i){const o=this.columnByDataField[a];if(o)return o[i]}setColumnProperty(a,i,o){const r=this.columnByDataField[a];r&&(r[i]=o)}getCellValue(a,i){const o=this.rowById[a];if(o&&this.columnByDataField[i])return o.getCell(i).value}setCellValue(a,i,o,r){const l=this,s=l.rowById[a],c=l.columnByDataField[i];if(!s||!c)return!1;let u=[];if(c.validationRules&&c.validationRules.length>0&&(u=((g,b)=>{let v=[];for(let y of g)switch(y.type){case"min":v.min=n.min(b,y.value);break;case"max":v.max=n.max(b,y.value);break;case"minLength":v.minLength=n.minLength(b,y.value);break;case"maxLength":v.maxLength=n.maxLength(b,y.value);break;case"minDate":v.minDate=n.minDate(b,y.value);break;case"maxDate":v.maxDate=n.maxDate(b,y.value);break;case"required":v.required=n.required(b);break;case"requiredTrue":v.requiredTrue=n.requiredTrue(b);break;case"pattern":v.pattern=n.pattern(b,y.value);break;case"email":v.email=n.email(b);break;case"null":v.null=n.null(b)}return v})(c.validationRules,o),Object.keys(u)>0))return!1;const p=()=>{l.beginUpdate(),s.getCell(i).value=o,l.endUpdate(),r&&r(s)};if(l.dataSource&&l.dataSource.virtualDataSource){l.dataSource.id?s[l.dataSource.id]=a:s.id||(s.id=a);const g={};for(let b=0;b<l.columns.length;b++){const v=l.columns[b],y=s.getCell(v.dataField);g[v.dataField]=y.value,v.dataField===i&&(g[v.dataField]=o)}l._editInfo={row:g},l._virtualDataRequest("update",function(b){b&&p(),l.appearance.displayLoadingIndicator=!1,l._setLoadingIndicatorVisibility()})}else p()}getRowData(a){const i=this.rowById[a];if(!i)return null;const o=JSON.parse(JSON.stringify(i.data));return delete o.$,o}getRowId(a){const i=this.rows[a];return i?i.id:null}validateRow(a,i){const o=this;if(!o.rowById[a])return!1;const r=(s,c)=>{let u=[];for(let p of s)switch(p.type){case"min":u.min=n.min(c,p.value);break;case"max":u.max=n.max(c,p.value);break;case"minLength":u.minLength=n.minLength(c,p.value);break;case"maxLength":u.maxLength=n.maxLength(c,p.value);break;case"minDate":u.minDate=n.minDate(c,p.value);break;case"maxDate":u.maxDate=n.maxDate(c,p.value);break;case"required":u.required=n.required(c);break;case"requiredTrue":u.requiredTrue=n.requiredTrue(c);break;case"pattern":u.pattern=n.pattern(c,p.value);break;case"email":u.email=n.email(c);break;case"null":u.null=n.null(c)}return u},l=[];for(let s=0;s<o.columns.length;s++){const c=o.columns[s];let u=[];void 0!==i[c.dataField]&&c.validationRules&&c.validationRules.length>0&&(u=r(c.validationRules,i[c.dataField]),Object.keys(u).length>0&&(l[c.dataField]=u))}return l}updateRow(a,i,o){const r=this,l=r.rowById[a];if(!l)return!1;const s=r.validateRow(a,i);if(Object.keys(s).length>0)return!1;const c=()=>{r.beginUpdate();for(let u in i){if("$"===u)continue;const p=l.getCell(u);p?p.value=i[u]:l.data[u]&&(l.data[u]=i[u])}r.endUpdate(),o&&o(l)};r.dataSource&&r.dataSource.virtualDataSource?(r.dataSource.id?i[r.dataSource.id]=a:i.id||(i.id=a),r._editInfo={row:i},r._virtualDataRequest("update",function(u){u&&c(),r.appearance.displayLoadingIndicator=!1,r._setLoadingIndicatorVisibility()})):c()}addUnboundRow(a,i){const o=this;void 0===a&&(a=1),void 0===i&&(i="far"),o._nearRowsAdded||(o._nearRowsAdded=[],o._farRowsAdded=[]),o._unboundRows||(o._unboundRows=[]),o.beginUpdate();for(let r=0;r<a;r++){const l=Smart.Utilities.Core.createGUID().replace(/-/gi,""),s=new Smart.Grid.Row({index:-1,unbound:!0,id:l,grid:o});o.rowById[s.id]=s,"far"===i?o._farRowsAdded.push(s):o._nearRowsAdded.push(s),o._unboundRows.push(s)}o.endUpdate()}addNewRow(a){"near"===a?this._insertNewRowBefore():this._insertNewRowAfter()}endEdit(){const a=this;let i=!1,o=null;a.editing.dialog.enabled&&a.editing.dialog.visible&&a._dialogEdit&&a._dialogEdit.close();let r=null,l=null,s=null;return a._fireEndEdit=!0,a.editing.editRow?(l=a.editing.editRow,o=a.editing.editRow.id,i=a._endRowEdit()):a.editing.editCell?(l=a.editing.editCell.row,s=a.editing.editCell.column,r=a.editing.editCell,o=a.editing.editCell.row.id,i=a._endCellEdit()):a.editing.editColumn&&(o=null,s=a.editing.editColumn,i=a._endColumnEdit()),a._saveUnboundRows(o),a._selection.selectionRect&&a._selection.selectionRect.classList.remove("smart-visibility-hidden"),a.$.scrollView.scrollTop=0,a._fireEndEdit&&a.$.fireEvent("endEdit",{id:l?l.id:null,dataField:s?s.dataField:null,row:l,column:s,cell:r}),i}getBatchEditChanges(){const a=this,i=[],o=[],r=[];for(let l in a._cellsUpdatedValues){const s=a._cellsUpdatedValues[l],c=l.substring(0,l.indexOf("_")),u=l.substring(l.indexOf("_")+1),p=a.rowById[c].getCell(u);i.push({id:c,dataField:u,oldValue:p.value,newValue:s})}if(a._rowsDeleted&&a._rowsDeleted.length>0)for(let l=0;l<a._rowsDeleted.length;l++){const s=a._rowsDeleted[l];o.push({id:s.id,data:s})}if(a._rowsAdded&&a._rowsAdded.length>0)for(let l=0;l<a._rowsAdded.length;l++){const s=a._rowsAdded[l];r.push({id:s.id,data:s})}return{updated:i,deleted:o,added:r}}saveBatchEdit(){this._saveBatchEdit()}revertBatchEdit(){this._clearBatchEdit(!0)}});const e=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/;function t(a){return null===a||0===a.length}class n{static null(i){return null===i}static email(i){return t(i)||e.test(i)?null:{email:!0}}static min(i,o){return(r=>{if(t(r)||t(o))return null;const l=parseFloat(r);return!isNaN(l)&&l<o?{min:{min:o,actual:l}}:null})(i)}static max(i,o){return(r=>{if(t(r)||t(o))return null;const l=parseFloat(r);return!isNaN(l)&&l>o?{max:{max:o,actual:l}}:null})(i)}static minDate(i,o){return(r=>{if(t(r)||t(o))return null;const l=r;return!isNaN(l)&&l<o?{min:{min:o,actual:l}}:null})(i)}static maxDate(i,o){return(r=>{if(t(r)||t(o))return null;const l=r;return!isNaN(l)&&l>o?{max:{max:o,actual:l}}:null})(i)}static required(i){return t(i)?{required:!0}:null}static requiredTrue(i){return!0===i?null:{required:!0}}static minLength(i,o){return(r=>{if(t(r))return null;const l=r?r.length:0;return l<o?{minlength:{requiredLength:o,actualLength:l}}:null})(i)}static maxLength(i,o){return(r=>{const l=r?r.length:0;return l>o?{maxlength:{requiredLength:o,actualLength:l}}:null})(i)}static url(i){return/^(ftp|http|https):\/\/[^ "]+$/.test(i)?null:{pattern:{requiredPattern:'^(ftp|http|https)://[^ "]+$',actualValue:i}}}static pattern(i,o){if(!o)return n.null;let r,l;return"string"==typeof o?(l="","^"!==o.charAt(0)&&(l+="^"),l+=o,"$"!==o.charAt(o.length-1)&&(l+="$"),r=new RegExp(l)):(l=o.toString(),r=o),t(s=i)||r.test(s)?null:{pattern:{requiredPattern:l,actualValue:s}};var s}}window.Smart.Validator=n})()},1378:()=>{Smart.Utilities.Assign("Grid.Export",class{exportData(e,t){const n=this,a=new Smart.Utilities.DataExporter({exportHeader:n.dataExport.header}),i=[];if(a.expandChar=n.dataExport.expandChar,a.collapseChar=n.dataExport.collapseChar,a.pageOrientation=n.dataExport.pageOrientation,a.style=n.dataExport.style,a.filterBy=n.dataExport.filterBy,a.groupBy=n.dataExport.groupBy,a.header={columns:n.columns.toArray().slice(0),columngroups:n.columnGroups.slice(0)},!n.dataExport.style){const u=window.getComputedStyle(n),p=window.getComputedStyle(n.columns.length>0&&n.columns[0].element?n.columns[0].element:n.$.columnHeader),g=window.getComputedStyle(n.$.columnHeader);if(0!==n.offsetWidth&&0!==n.offsetHeight){const b=A=>{const B=A.fontSize,O=A.borderRightColor,N=A.backgroundColor,P=A.color,V=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");function Y(W){return(W=W.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/))?"#"+K(W[1])+K(W[2])+K(W[3]).toUpperCase():"#ffffff"}function K(W){return isNaN(W)?"00":V[(W-W%16)/16]+V[W%16]}return{borderColor:Y(O),fontSize:B,fontFamily:"Helvetica",color:Y(P),backgroundColor:Y(N)}},v=b(u),y=b(p),x=b(g),D={height:n.$.columnHeader.offsetHeight+"px",border:"1px solid "+v.borderColor,fontFamily:x.fontFamily,fontSize:x.fontSize,color:x.color,backgroundColor:y.backgroundColor,fontWeight:"400"},T={border:"1px solid "+v.borderColor,fontFamily:v.fontFamily,fontSize:v.fontSize},M={height:n.rowMinHeight+"px"};for(let A=0;A<n.columns.length;A++){const B=n.columns[A];if(!B.allowExport||!B.visible)continue;D[B.dataField]={textAlign:B.align,width:B.computedWidth+"px",format:B.cellsFormat||""};let O=B.cellsFormat||"";"date"===B.dataType?O="d":"dateTime"===B.dataType?O="D":"time"===B.dataType&&(O="t");const N={textAlign:B.cellsAlign,format:O};if(T[B.dataField]=N,n.dataExport.view&&-1!==["html","jpeg","pdf","png"].indexOf(e)&&(B.template||B.formatFunction))for(let P=0;P<n.rows.length;P++){const V=n.rows[P];let Y=n.rows[P]["column_"+B.dataField];if(n.dataExport.viewStart&&P<n.dataExport.viewStart||n.dataExport.viewEnd&&P>n.dataExport.viewEnd)continue;if(!Y||V&&V.element&&V.element.classList.contains("smart-hidden")){const Z=n._rowElements[0];if(!Z||(V.element=Z,V.grid=n,V.render(),Y=V["column_"+B.dataField],!Y))continue}const K={};K.border=Y.borderColor,K.background=Y.background,K.color=Y.color;const W=void 0!==n.dataExport.viewStart?P-n.dataExport.viewStart:P;i[P]=Object.assign({},V.data),i[P][B.dataField]=Y.element.textContent,N[W]=K}}n.appearance.alternationCount>0&&(M.alternationCount=n.appearance.alternationCount,M.alternationStart=n.appearance.alternationStart,M.alternationEnd=n.appearance.alternationEnd,M.alternationIndex0Color=v.color,M.alternationIndex0BackgroundColor=v.backgroundColor,M.alternationIndex1Color=v.color,M.alternationIndex1BackgroundColor="#F5F5F5"),a.style={border:"1px solid "+v.borderColor,borderCollapse:"collapse",header:D,columns:T,rows:M}}}const o=!n.rowHierarchy||n.grouping.enabled?n.rows.toArray():n.rowHierarchy,r=n.dataExport.rowIds,l=null!==r;let s=[];if(n.dataExport.view)n._recyclingRows.forEach((u,p)=>{if(n.dataExport.viewStart&&p<n.dataExport.viewStart||n.dataExport.viewEnd&&p>n.dataExport.viewEnd)return!0;s.push(i[p]?i[p]:u.data)});else{for(let u=0;u<o.length;u++){const p=o[u];if(p.visible&&(!1!==p.filtered||void 0===p.filtered)){if(l&&-1===r.indexOf(p.id))continue;s.push(p.data)}}o!==n.rowHierarchy||l||(s=n.dataSource.boundHierarchy,a.hierarchical=!0)}!n.dataExport.groupBy&&n.grouping.enabled&&n.dataSource&&n.dataSource.groupBy&&(a.groupBy=n.dataSource.groupBy&&n.dataSource.groupBy.toArray?n.dataSource.groupBy.toArray():null),n.checkLicense(!0);const c=a.exportData(s,e,n.dataExport.fileName,t);return n.dataExport.view&&n._recycle(!1),c}print(){const e=this,t=e.dataExport.fileName;e.dataExport.fileName=null;const n=e.exportData("html"),a=window.open("","","width=800,height=500"),i=a.document.open(),o='<!DOCTYPE html><html><head><meta charset="utf-8" /><title>'+t+"</title></head><body>"+n+"</body></html>";try{i.write(o),i.close(),setTimeout(function(){a.print(),a.close()},100)}catch(r){}e.dataExport.fileName=t}})},884:()=>{Smart.Utilities.Assign("Grid.Filter",class{addFilter(e,t,n){const a=this,i=a.columnByDataField[e];if("string"==typeof t&&(t=a.dataSource._createFilter(i.dataType,[t])),i&&i.canNotify){if(i.setProperty("filter",t),a._isUpdating)return;!1!==n&&a.refreshFilters()}}removeFilter(e,t){const n=this,a=n.columnByDataField[e];if(a&&a.canNotify){if(a.setProperty("filter",null),n._isUpdating)return;!1!==t&&n.refreshFilters()}}clearFilter(){const e=this;for(let t=0;t<e.columns.length;t++)e.columns[t].setProperty("filter",null);e.refreshFilters()}getFilteredColumns(){const e=this;if(e._filters){const t=[];for(let n=0;n<e._filters.length;n++){const a=e._filters[n];t[a[0]]=a[1],t.length++}return t}return[]}getVisibleRows(){const e=this;if(e._visibleRows)return e._visibleRows;const t=[],n=e._viewRows,a=e.editing.addNewRow.visible&&"far"!==e.editing.addNewRow.position&&"button"!==e.editing.addNewRow.displayMode?1:0;for(let i=0;i<n.length;i++){const o=n[i];o.canNotify=!1,o.visibleIndex=-1,!o.visible||!1===o.filtered&&void 0!==o.filtered||(o.visibleIndex=t.length-a,t.push(o)),o.canNotify=!0}return e._visibleRows=t,t}refreshFilters(){const e=this,t=[];e._filters||(e._filters=[]);for(let i=0;i<e.columns.length;i++){const o=e.columns[i];o.filter&&t.push([o.dataField,o.filter])}if(e.scrollTop=0,e.closeMenu(),e.dataSource&&!e.dataSource.onFilter&&(e.dataSource.onFilter=function(){const i=e._viewRows;for(let o=0;o<i.length;o++){const r=i[o];if(r.data&&!r.addNewRow){if(!r.data.$){r.filtered=!1;continue}r.filtered=void 0===r.data.$.filtered||r.data.$.filtered}}e.refresh()}),JSON.stringify(e._filters)===JSON.stringify(t))return void(e._visibleRows=null);e._filters=t,e._visibleRows=null,e.dataSource&&e.dataSource.virtualDataSource?(e.closeMenu(),e._virtualDataRequest("filter")):e.dataSource._filter(t,e._filterOperator||"and"),e.paging.enabled&&e.dataSource&&!e.dataSource.virtualDataSource&&e._refreshPagesCount();let n=[];for(let i=0;i<e.columns.length;i++){const o=e.columns[i];o.filter&&n.push(o)}let a=[];if(e._filters)for(let i=0;i<e._filters.length;i++){const o=e._filters[i];a.push({dataField:o[0],filter:o[1]})}e.$.fireEvent("filter",{columns:n,data:a})}_handleFilterCellFocus(e){const t=this,n=e.column._filterInfo,i=n.input,o=e.column,r=o.dataType;n.editor.setAttribute("focus",""),t.filtering.filterRow.cell=e,"RANGE"===n.condition?t._openFilterCellDialog(e,l=>{const s=l._filterInfo,c=s.editor,u=s.range,p=s.input,g=s.cell;if(u){const b=new Smart.FilterGroup;b.addFilter("and",b.createFilter(l.dataType,u.min,"GREATER_THAN_OR_EQUAL")),b.addFilter("and",b.createFilter(l.dataType,u.max,"LESS_THAN_OR_EQUAL")),t.addFilter(l.dataField,b)}else t.removeFilter(l.dataField);if(c&&p)if(p.type="",u){const b=g.getFormattedValue(u.min,l.cellsFormat),v=g.getFormattedValue(u.max,l.cellsFormat);p.value=b+" - "+v}else p.value=""}):(i.type="number"===r||"int"===r||"float"===r?"number":"",n.value&&(i.value=n.value,"date"===r&&(i.value=e.getFormattedValue(n.value,o.cellsFormat))))}_handleFilterCellBlur(e){const t=this,n=e.column._filterInfo,a=n.editor,i=n.input,o=e.column,r=n.condition;t.filtering.filterRow.cell=null,o.filterRowMenu&&o.filterRowMenu.classList.contains("open")||(""!==i.value&&"RANGE"!==r&&("date"===o.dataType?(n.value=new Date(i.value),i.value=e.getFormattedValue(n.value,o.cellsFormat)):"number"===o.dataType||"int"===o.dataType||"float"===o.dataType?(n.value=parseFloat(i.value),i.type="",i.value=e.getFormattedValue(n.value,o.cellsFormat)):n.value=i.value),"auto"===t.filtering.filterRow.applyMode&&t._handleFilterCellValue(e)),a.removeAttribute("focus")}_handleFilterCellValue(e){const t=this,n=e.column._filterInfo,a=e.column;if("RANGE"===n.condition){const i=n.range;if(i){const o=new Smart.FilterGroup;o.addFilter("and",o.createFilter(a.dataType,i.min,"GREATER_THAN_OR_EQUAL")),o.addFilter("and",o.createFilter(a.dataType,i.max,"LESS_THAN_OR_EQUAL")),t.addFilter(a.dataField,o)}else t.removeFilter(a.dataField)}else{const i=n.value;if(""!==i&&void 0!==i){const o=new Smart.FilterGroup;o.addFilter("and",o.createFilter(a.dataType,i,n.condition||("string"===a.dataType?"CONTAINS":"EQUAL"))),t.addFilter(a.dataField,o)}else t.removeFilter(a.dataField)}}_handleFilterCellKeyDown(e,t){t.ctrlKey&&"a"===t.key?e.column._filterInfo.input.select():t.altKey&&"ArrowDown"===t.key&&this._handleFilterCellIconClick(e)}_handleFilterCellKeyUp(e,t){const n=e.column,a=n._filterInfo.input,i=this,o=n._filterInfo,r=t.key;o.value=a.value,"Escape"===r&&(o.value="",o.range=null,a.value=""),"Enter"===r||"Escape"===r||""===a.value?i._handleFilterCellValue(e):"auto"===i.filtering.filterRow.applyMode&&"Ctrl"!==r&&"Shift"!==r&&(i._filterRowTimer&&clearTimeout(i._filterRowTimer),i._filterRowTimer=setTimeout(()=>{i._handleFilterCellValue(e)},i.filtering.filterRow.autoApplyModeDelay)),t.ctrlKey&&"a"===r&&a.select()}_handleFilterCellCheckBoxClick(e){const n=e.column,a=n._filterInfo;void 0===a.value&&(a.value=null),!0===a.value?a.value=!1:!1===a.value?a.value=null:null===a.value&&(a.value=!0);const i=e.element.querySelector(".smart-input");if(a.value?i.setAttribute("checked",a.value):null===a.value?i.setAttribute("checked","indeterminate"):i.removeAttribute("checked"),null===a.value)return void this.removeFilter(n.dataField);const o=new Smart.FilterGroup;o.addFilter("and",o.createFilter(n.dataType,!0===a.value,"EQUAL")),this.addFilter(n.dataField,o)}_handleFilterCellIconClick(e){const n=e.column;n.filterRowMenu&&n.filterRowMenu.classList.contains("open")?this._closeMenu(n.filterRowMenu):this._openColumnFilterMenu(n)}_handleFilterCalendarCellClick(e){const t=this;t._openFilterCellDialog(e,n=>{const a=n._filterInfo,i=a.editor.querySelector("input"),o=a.value;if(i)if(o){i.value=e.getFormattedValue(o,n.cellsFormat||"");const r=new Smart.FilterGroup;r.addFilter("and",r.createFilter(n.dataType,o,a.condition||"EQUAL")),t.addFilter(n.dataField,r)}else i.value="",t.removeFilter(n.dataField)})}_handleFilterMenuClick(e,t){const n=this,a=e._filterInfo,i=a.editor,o=a.input;if(i.firstElementChild.innerHTML=`<i class="smart-grid-icon ${t.icon} show"></i>`,"CLEAR_FILTER"===t.value&&(o.value="",i.firstElementChild.innerHTML='<i class="smart-grid-icon smart-icon-search show"></i>',a.condition=null,a.value="",a.range=null),o.type="","RANGE"===a.condition&&"RANGE"!==t.value)a.value=a.range.min;else if("RANGE"===t.value&&"RANGE"!==a.condition&&null!==a.condition){let r=a.range;a.value&&(r={min:a.value,max:a.value},a.range=r)}if("RANGE"!==t.value){if(o.readonly=!1,"CLEAR_FILTER"!==t.value&&(a.condition=t.value),""===o.value)n.removeFilter(e.dataField);else{const r=new Smart.FilterGroup,l=a.value;r.addFilter("and",r.createFilter(e.dataType,l,a.condition||"EQUAL")),n.addFilter(e.dataField,r),o.value=a.cell.getFormattedValue(l,e.cellsFormat)}setTimeout(()=>{o.focus()},25)}else{o.readonly=!0;const r=new Smart.FilterGroup,l=a.range;if(l){r.addFilter("and",r.createFilter(e.dataType,l.min,"GREATER_THAN_OR_EQUAL")),r.addFilter("and",r.createFilter(e.dataType,l.max,"LESS_THAN_OR_EQUAL")),n.addFilter(e.dataField,r);const s=a.cell.getFormattedValue(l.min,e.cellsFormat),c=a.cell.getFormattedValue(l.max,e.cellsFormat);o.value=s+" - "+c}else o.value="";a.condition=t.value}}_handleFilterNumberCellEditor(e,t,n){const a=t.querySelector("input"),i=t.querySelector(".up"),o=t.querySelector(".down"),r=e.column,l=this;let s=u=>{const p=r._filterInfo;if("RANGE"===p.condition)return void a.focus();let g=parseFloat(p.value);if(isNaN(g))return p.value=0,void(a.value=0);(u<0?g>a.min||""===a.min:g<a.max||""===a.max)&&(a.value=g+u,p.value=a.value,a.focus(),l._handleFilterCellValue(e))};n&&(s=n);const c=(u,p)=>{let g,b;u.onpointerdown=function(v){s(p),g&&clearTimeout(g),g=setTimeout(()=>{b&&clearInterval(b),b=setInterval(()=>{s(p)},50)},300),v.preventDefault(),v.stopPropagation()},u.onpointerup=()=>{b&&clearInterval(b),g&&clearTimeout(g),b=null},u.onpointerenter=()=>{b&&(clearInterval(b),b=setInterval(()=>{s(1)},50))},u.onpointerleave=()=>{clearInterval(b)},document.addEventListener("pointerup",()=>{b&&clearInterval(b),b=null,g&&clearTimeout(g)})};c(i,1),c(o,-1)}_openFilterCellDialog(e,t){const n=this,a=n._dialogFilter||n._createDialog(),i=n.localize("dialogFilterHeader")+" "+e.column.label,o=a.content;a.header.innerHTML=i,a.confirm=t;let r=null,l=0;n._cellEditors||(n._cellEditors=[]),n._dialogFilter||(a.modal=!0,a.btnConfirm.innerHTML=n.localize("dialogFilterButtonConfirm"),a.btnCancel.innerHTML=n.localize("dialogFilterButtonCancel"),a.onOpen=function(){a.focus();const b=n._dialogFilterCell,v=b.column._filterInfo.range,y=b.column._filterInfo.value;if("date"===b.column.dataType){const x=o.querySelector("smart-calendar");x.locale=n.locale,setTimeout(()=>{"RANGE"===b.column._filterInfo.condition&&v?(x.selectedDates=[new Date(v.min.getTime()),new Date(v.max.getTime())],x._selectMultipleDates(new Date(v.min.getTime()),new Date(v.max.getTime()))):y&&(x.selectedDates=[new Date(y.getTime())]),x.focus()},100),x.focus()}else{const x=o.querySelectorAll("input");x[0].focus(),v&&(x[0].value=v.min,x[1].value=v.max)}},a.onClose=function(){},a.btnCancel.onclick=function(){a.close();const b=n._dialogFilterCell;b.column._filterInfo.range=null,b.column._filterInfo.value=null,a.confirm(b.column)},a.btnClose.onclick=function(){a.close()},a.btnConfirm.onclick=function(){const b=n._dialogFilterCell;if(b.column._filterInfo.range=null,b.column._filterInfo.value=null,"date"===b.column.dataType){const v=o.querySelector("smart-calendar"),y=v.selectedDates;"range"===v.selectionMode?b.column._filterInfo.range={min:new Date(y[0].getTime()),max:new Date(y[y.length-1].getTime())}:b.column._filterInfo.value=new Date(y[0].getTime())}else{const v=o.querySelectorAll("input");let y=v[0].value,x=v[1].value;""===x&&(x=100),""===y&&(y=0),b.column._filterInfo.range={min:y,max:x}}a.confirm(b.column),a.close()},a.onkeydown=function(b){const v=b.key;"Enter"===v?a.btnConfirm.onclick():"Escape"===v&&a.close()}),o.classList.remove("smart-grid-layout"),o.innerHTML="";const s=()=>{const b=o.querySelectorAll("input");a.btnConfirm.disabled=!0,""===b[0].value&&(b[0].value=0),""===b[1].value&&(b[1].value=100),parseFloat(b[0].value)<=parseFloat(b[1].value)&&(a.btnConfirm.disabled=!1)};"date"!==e.column.dataType&&o.classList.add("smart-grid-layout");for(let b=0;b<2;b++){const v=e.column;if("date"===v.dataType){const A=document.createElement("div");A.innerHTML="RANGE"===v._filterInfo.condition?'<smart-calendar selection-mode="range"></smart-calendar>':"<smart-calendar></smart-calendar>",o.appendChild(A);break}l%2==0&&(r=document.createElement("div"),r.classList.add("row"),o.appendChild(r));const y=document.createElement("div");y.classList.add("col-sm-6");const x=document.createElement("div");x.classList.add("column");const D=document.createElement("label");D.innerHTML=n.localize(0===b?"dialogFilterMinLabel":"dialogFilterMaxLabel");const T=document.createElement("div");T.classList.add("smart-grid-dialog-editor"),T.setAttribute("editor",v.dataField),T.setAttribute("template",v.editor.template),y.appendChild(x),r.appendChild(y),x.appendChild(D),x.appendChild(T),l++,T.innerHTML='<div class="smart-grid-cell-editor smart-filter-input-value smart-grid-number-input-cell-editor"><input class="smart-input" type="number"><div class="nav"><div tabindex="-1" class="up"></div><div tabindex="-1" class="down"></div></div></div>';const M=T.querySelector("input");M.onchange=()=>{s()},n._handleFilterNumberCellEditor(e,T,A=>{let B=parseFloat(M.value);isNaN(B)?M.value=0:((A<0?B>M.min||""===M.min:B<M.max||""===M.max)&&(M.value=B+A),s())})}n._dialogFilter=a,n._dialogFilterCell=e;const c=e.column.element.getBoundingClientRect(),u=n.offset(n);let p=c.left+window.pageXOffset-u.left,g=c.bottom+n.layout.rowMinHeight+window.pageYOffset-u.top;a.open(p,g)}})},9278:()=>{Smart.Utilities.Assign("Grid.Group",class{_renderGroupBar(){const e=this;if(!e.grouping.groupBar.visible)return;const t=e.$.groupHeader;if(!t.firstElementChild){const i=document.createElement("smart-breadcrumb"),o=e.localize("groupBarLabel");t.appendChild(i),e.$.breadcrumb=i,i.placeholder=o,i.classList.add("smart-hidden")}const n=e.dataSource.groupBy,a=[];for(let i=0;i<n.length;i++){const o=n[i],r=e.columns.find(s=>s.dataField===o);if(!r)continue;let l="";r.sortOrder&&(l+='<span class="smart-grid-icon show '+("asc"===r.sortOrder?"smart-icon-sort-up":"smart-icon-sort-down")+'"></span>'),r.filter&&(l+='<span class="smart-grid-icon smart-icon-filter show"></span>'),a.push({label:r.label+l,value:r.dataField})}e.$.breadcrumb.closeButtons=e.grouping.groupBar.allowColumnCloseButtons,e.$.breadcrumb.allowDrag=e.$.breadcrumb.allowDrop=e.grouping.groupBar.allowColumnDragDrop,e.$.breadcrumb.dataSource=a,e.$.breadcrumb.minimizeWidth=350,e.offsetWidth<350&&(e.$.breadcrumb.parentElement.style.zIndex=9999,e.$.breadcrumb.parentElement.style.overflow="visible"),e.$.breadcrumb.onminimize=()=>{e.$.breadcrumb.parentElement.style.zIndex=9999,e.$.breadcrumb.parentElement.style.overflow="visible"},e.$.breadcrumb.onitemclick=i=>{const o=i.detail.item;if(!o)return;const r=e.columnByDataField[o.value];r.allowSortToggleOnClick&&e.sorting.enabled&&e.sortBy(r.dataField)},e.$.breadcrumb.onmaximize=()=>{e.$.breadcrumb.parentElement.style.zIndex="",e.$.breadcrumb.parentElement.style.overflow=""},e.$.breadcrumb.ondragstart=function(i){const o=e.$.breadcrumb._dragDrop,r=e.$.breadcrumb._items.indexOf(i.detail.item),l=e.columnByDataField[e.$.breadcrumb.dataSource[r].value];if(e.$.fireEvent("columnDragStart",{column:l,dataField:l.dataField,index:e.columns.indexOf(l),data:o,originalEvent:i.detail.originalEvent}).defaultPrevented)return;const s=e.columns.map(c=>(c.dataField===a[r].value&&c.element.classList.add("dragged"),c.element));o.items=o.items.concat(s),o.getItemCoordinates(o.items),o.column=l,e._overlay=document.createElement("div"),e._overlay.classList.add("smart-grid-overlay"),e._overlay.style.cursor="",e.$.root.appendChild(e._overlay),e._dragLine=e._createLine(o.dragDetails.item),e.$.root.appendChild(e._dragLine),e._dragLine.style.height=o.dragDetails.item.offsetHeight+"px",requestAnimationFrame(()=>{e._dragLine.style.opacity=1})},e.$.breadcrumb.ondragging=function(i){const o=e.$.breadcrumb._dragDrop,r=o.dragDetails;if(e._dragLine&&r.target){const l=e.getBoundingRect(r.target),s=e.getBoundingRect(e),c=e.getBoundingRect(e.$.columnHeader);e._dragLine.style.left=r.before?-c.left+l.left+"px":-c.left+l.right+"px",parseInt(e._dragLine.style.left)<3&&(e._dragLine.style.left="3px"),e._dragLine.style.top=l.top-s.top+"px",e._dragLine.style.height=r.target.classList.contains("smart-breadcrumb-item")?l.height+"px":"calc(100% - 7px - "+e._dragLine.style.top+")",e.$.fireEvent("columnDragging",{column:o.column,dataField:o.column.dataField,index:e.columns.indexOf(o.column),data:o,originalEvent:i.detail.originalEvent})}},e.$.breadcrumb.ondragcancel=function(){e._dragLine&&e._dragLine.parentNode.removeChild(e._dragLine),e.columns.forEach(o=>{o.element&&o.element.classList.remove("dragged")});const i=e.$.breadcrumb._dragDrop;e.$.fireEvent("columnDragCancel",{column:i.column,dataField:i.column.dataField,index:e.columns.indexOf(i.column),data:i})},e.$.breadcrumb.ondragend=function(i){e.beginUpdate();const o=e.getBoundingRect(e.$.breadcrumb);if(i.detail.originalEvent.pageY>o.bottom){const l=e.$.breadcrumb._dragDrop,c=l.dragDetails.target,u=e.columnByDataField[i.detail.item.data.value],p=e.$.breadcrumb.dataSource.findIndex(b=>b.value===u.dataField),g=e.$.breadcrumb.dataSource.slice(0);if(g.splice(p,1),e.$.breadcrumb.dataSource=g,c&&c.column&&!e.$.fireEvent("columnDragEnd",{column:l.column,dataField:l.column.dataField,index:e.columns.indexOf(l.column),newIndex:e.columns.indexOf(c.column),data:l,originalEvent:i.detail.originalEvent}).defaultPrevented){const b=e.columns.indexOf(u),v=e.columns.indexOf(c.column);e.columns.move(b,v)}}const r=e.$.breadcrumb.dataSource.map(l=>l.value);e._dragLine&&e._dragLine.parentNode.removeChild(e._dragLine),e.columns.forEach(l=>{l.element&&l.element.classList.remove("dragged")}),e.dataSource.groupBy=r,e.refresh(!0),e.refreshFilters(),e.refreshSort(),e._refreshPagesCount(),e.endUpdate()},e.$.breadcrumb.onclose=function(i){e.removeGroup(i.detail.item.value)}}getGroups(){return this.dataSource.groupBy.toArray()}addGroup(e){const t=this;t.dataSource&&t.grouping.enabled&&-1===t.dataSource.groupBy.indexOf(e)&&(t._groups.push(e),t.dataSource&&t.dataSource.virtualDataSource?(t.dataSource.groupBy.push(e),t._virtualDataRequest("group")):t.dataSource.groupBy.push(e),t.refresh(!0),t.refreshFilters(),t.refreshSort(),t._refreshPagesCount())}removeGroup(e){const t=this;if(!t.dataSource||!t.grouping.enabled)return;const n=t.dataSource.groupBy.indexOf(e);n>=0&&(t._groups.splice(n,1),t.dataSource&&t.dataSource.virtualDataSource?(t.dataSource.groupBy.splice(n,1),t._virtualDataRequest("group")):t.dataSource.groupBy.splice(n,1),t.refresh(!0),t.refreshFilters(),t.refreshSort(),t._refreshPagesCount())}clearGroups(){const e=this;e.dataSource&&e.grouping.enabled&&(e._groups=[],e.dataSource&&e.dataSource.virtualDataSource?(e.dataSource.clearGroup(),e._virtualDataRequest("group")):e.dataSource.clearGroup(),e.refresh(!0),e.refreshFilters(),e.refreshSort(),e._refreshPagesCount())}})},7333:()=>{Smart.Utilities.Assign("Grid.Menu",class{_openColumnChooserMenu(e){const t=this;if(e||(e=t._commandColumn),!e||t.menu&&t.menu.column===e&&e.element.hasAttribute("aria-controls"))return void t.closeMenu();t.menu||(t.menu=document.createElement("div"),t.menu.classList.add("smart-grid-column-menu"),t.menu.setAttribute("theme",t.getAttribute("theme")),t.menu.id=t.id+"_"+t.tagName.toLowerCase()+"_menu_"+Math.floor(65536*(1+Math.random())).toString(16).substring(1)),t.appearance.allowColumnMenuAnimation?t.menu.classList.add("smart-animate"):t.menu.classList.remove("smart-animate"),t._createColumnChooserMenuItems(e),t.menu.style.height=t.columnMenu.height?t.columnMenu.height+"px":"auto",t.menu.column&&t.menu.column!==e&&(t.menu.column.setProperty("menu",null),t.menu.column=null),t.isInShadowDOM?t.getRootNode().appendChild(t.menu):document.body.appendChild(t.menu),e.setProperty("menu",t.menu);const n=e.element.getBoundingClientRect();t.menu.column=e,t._filterContainer&&("none"!==e.filterMenuMode&&t.filtering.filterMenu.visible&&Smart.FilterPanel?t._filterContainer.classList.remove("smart-hidden"):t._filterContainer.classList.add("smart-hidden"));let a=n.right-e.element.actionButton.getBoundingClientRect().width+window.pageXOffset,i=n.bottom+window.pageYOffset;a+t.menu.offsetWidth>window.innerWidth&&(a=n.right+window.pageXOffset-t.menu.offsetWidth,a+t.menu.offsetWidth>window.innerWidth&&(a=window.innerWidth-t.menu.offsetWidth)),t.menu.style.left=a+"px",t.menu.style.top=i+"px",t.menu.classList.remove("smart-hidden"),t.menu.classList.add("open")}_openColumnFilterMenu(e){const t=this;if(!e||t.filterRowMenu&&t.filterRowMenu.column===e&&e.element.hasAttribute("aria-controls"))return void t.closeMenu();t.filterRowMenu||(t.filterRowMenu=document.createElement("div"),t.filterRowMenu.classList.add("smart-grid-column-menu"),t.filterRowMenu.setAttribute("theme",t.getAttribute("theme")),t.filterRowMenu.id=t.id+"_"+t.tagName.toLowerCase()+"_menu_"+Math.floor(65536*(1+Math.random())).toString(16).substring(1)),t.appearance.allowColumnMenuAnimation?t.filterRowMenu.classList.add("smart-animate"):t.filterRowMenu.classList.remove("smart-animate"),t._createColumnFilterMenuItems(e),t.filterRowMenu.style.height=t.columnMenu.height?t.columnMenu.height+"px":"auto",t.filterRowMenu.column&&t.filterRowMenu.column!==e&&(t.filterRowMenu.column.setProperty("menu",null),t.filterRowMenu.column=null),t.isInShadowDOM?t.getRootNode().appendChild(t.filterRowMenu):document.body.appendChild(t.filterRowMenu),e.setProperty("filterRowMenu",t.filterRowMenu);const n=e.element.getBoundingClientRect();t.filterRowMenu.column=e;let a=n.left+window.pageXOffset,i=n.bottom+t.layout.rowMinHeight+window.pageYOffset;return a+t.filterRowMenu.offsetWidth>window.innerWidth&&(a=n.right+window.pageXOffset-t.filterRowMenu.offsetWidth,a+t.filterRowMenu.offsetWidth>window.innerWidth&&(a=window.innerWidth-t.filterRowMenu.offsetWidth)),t.filterRowMenu.style.left=a+"px",t.filterRowMenu.style.top=i+"px",t.filterRowMenu.classList.remove("smart-hidden"),t.filterRowMenu.classList.add("open"),setTimeout(()=>{t.filterRowMenu.querySelector("smart-menu").focus()},50),t.filterRowMenu}_openMenu(e){const t=this;if(!e||t.menu&&t.menu.column===e&&e.element.hasAttribute("aria-controls")||!1===t.columnMenu.enabled)return void t.closeMenu();t._closeMenu(t.filterRowMenu),t.menu||(t.menu=document.createElement("div"),t.menu.classList.add("smart-grid-column-menu"),t.menu.setAttribute("theme",t.getAttribute("theme")),t.menu.id=t.id+"_"+t.tagName.toLowerCase()+"_menu_"+Math.floor(65536*(1+Math.random())).toString(16).substring(1)),t.appearance.allowColumnMenuAnimation?t.menu.classList.add("smart-animate"):t.menu.classList.remove("smart-animate"),t.rightToLeft?t.menu.setAttribute("right-to-left",""):t.menu.removeAttribute("right-to-left"),t._createMenuItems(e),t._createFilterPanel(e),t._filterMenuItemsVisibility(e),t.menu.style.height=t.columnMenu.height?t.columnMenu.height+"px":"auto",t.menu.column&&t.menu.column!==e&&(t.menu.column.setProperty("menu",null),t.menu.column=null),t.isInShadowDOM?t.getRootNode().appendChild(t.menu):document.body.appendChild(t.menu),e.setProperty("menu",t.menu);const n=e.element.getBoundingClientRect();t.menu.column=e;let a=n.right-e.element.actionButton.getBoundingClientRect().width+window.pageXOffset,i=n.bottom+window.pageYOffset;t.rightToLeft&&(a=n.left+window.pageXOffset-t.menu.offsetWidth+e.element.actionButton.getBoundingClientRect().width,a<0&&(a=n.left+window.pageXOffset)),a+t.menu.offsetWidth>window.innerWidth&&(a=n.right+window.pageXOffset-t.menu.offsetWidth,a+t.menu.offsetWidth>window.innerWidth&&(a=window.innerWidth-t.menu.offsetWidth)),t.menu.style.left=a+"px",t.menu.style.top=i+"px",t.hasColumnMenu(e)?t.menu.classList.remove("smart-hidden"):t.closeMenu(),t.menu.classList.add("open"),setTimeout(()=>{t.menu&&(t.menu.querySelector(".smart-filter-panel-input")?t.menu.querySelector(".smart-filter-panel-input").focus():t.menu.querySelector("smart-menu").focus())},50)}_menuItemClick(e){const t=this,n=e.detail.value;if(n&&n.properties){const a=n.properties.command;"function"==typeof a?a.apply(t,[n.column,n.properties]):t[a]&&t[a].apply(t,[n.column,n.properties]),n.column.autoCloseMenu&&t.closeMenu()}}removeGroupByCommand(e){this.removeGroup(e.dataField)}groupByCommand(e){this.dataSource&&this.addGroup(e.dataField)}sortAscCommand(e){this.sortBy(e.dataField,"asc")}sortDescCommand(e){this.sortBy(e.dataField,"desc")}removeSortCommand(e){this.sortBy(e.dataField,null)}addFilterCommand(e){this.$.headerBar&&this.$.headerBar.openFilterPanel(e)}removeFilterCommand(e){this.removeFilter(e.dataField)}renameCommand(e){this._openDescriptionDialog(e,"rename")}customizeTypeCommand(e){this._openAddColumnDialog(e,"rename")}editDescriptionCommand(e){this._openDescriptionDialog(e,"editDescription")}hideColumnCommand(e){e.visible=!1}deleteColumnCommand(e){this.columns.splice(this.columns.indexOf(e),1)}_removeMenu(){const e=this;if(e.menu){const t=e.menu.querySelector("smart-menu");t&&e.menu.removeChild(t)}if(e.filterRowMenu){const t=e.filterRowMenu.querySelector("smart-menu");t&&e.filterRowMenu.removeChild(t)}}_createColumnChooserMenuItems(){const e=this;e._removeMenu();const t=document.createElement("smart-menu"),n=document.createDocumentFragment();t.mode="vertical",t.dropDownAppendTo="body",t.checkboxes=!0,t.checkable=!0,t.classList.add("smart-grid-column-chooser-menu"),t.rightToLeft=e.rightToLeft;for(let a=0;a<e.columns.length;a++){const i=e.columns[a],o=document.createElement("smart-menu-item"),r=i.showIcon?i.icon:i.visible?"smart-icon-eye":"smart-icon-eye-off";o.checked=i.visible,i.allowHide&&(i.command=function(l){l.visible=!l.visible},o.label=e.localize(i.label)||i.label||i.dataField,o.value={column:i,properties:i},r&&(o.label='<span class="smart-grid-icon '+r+'"></span>'+o.label),n.appendChild(o))}t.appendChild(n),e.menu.appendChild(t),e.menu.itemCheckChange=e._menuItemClick.bind(e),e.menu.addEventListener("itemCheckChange",e.menu.itemCheckChange),e.menu.addEventListener("keydown",e._keyDownHandler.bind(e))}_createColumnFilterMenuItems(e){const t=this;t._removeMenu();const n=document.createElement("smart-menu"),a=document.createDocumentFragment();n.mode="vertical",n.dropDownAppendTo="body",n.classList.add("smart-grid-column-filter-menu"),n.rightToLeft=t.rightToLeft;const i=e._filterInfo.dataSource;for(let o=0;o<i.length;o++){const r=i[o],l=document.createElement("smart-menu-item"),s=r.icon;l.label=r.label,l.value={column:e,properties:r},s&&(l.label='<span class="smart-grid-icon '+s+'"></span>'+l.label),e._filterInfo.condition===r.value&&l.setAttribute("focus",""),a.appendChild(l)}n.appendChild(a),t.filterRowMenu.appendChild(n),t.filterRowMenu.itemClick=t._menuItemClick.bind(t),t.filterRowMenu.addEventListener("itemClick",t.filterRowMenu.itemClick),t.filterRowMenu.addEventListener("keydown",o=>{"Escape"===o.key&&t._closeMenu(t.filterRowMenu)})}_createMenuItems(e){const t=this;t._removeMenu();const n=document.createElement("smart-menu"),a=document.createDocumentFragment(),i=e.menuItems||t.columnMenu.dataSource;n.mode="vertical",n.dropDownAppendTo="body",n.rightToLeft=t.rightToLeft;for(let o in i){const r=i[o],l=document.createElement("smart-menu-item");let s=r.icon;l.label=t.localize(o),l.value={column:e,properties:r};const c=u=>{if(u){if("string"===e.dataType)return"A \u2192 Z";if("number"===e.dataType||"date"===e.dataType||"time"===e.dataType)return"1 \u2192 9";if("bool"===e.dataType||"boolean"===e.dataType)return"0 \u2192 1"}else{if("string"===e.dataType)return"Z \u2192 A";if("number"===e.dataType||"date"===e.dataType||"time"===e.dataType)return"9 \u2192 1";if("bool"===e.dataType||"boolean"===e.dataType)return"1 \u2192 0"}};"columnMenuItemSortAsc"===o?(l.label=t.localize(o,{mode:c(!0)}),"string"!==e.dataType&&r.iconAlt&&(s=r.iconAlt)):"columnMenuItemSortDesc"===o&&(l.label=t.localize(o,{mode:c(!1)}),"string"!==e.dataType&&r.iconAlt&&(s=r.iconAlt)),s&&(l.label='<span class="smart-grid-icon '+s+'"></span>'+l.label),a.appendChild(l)}n.appendChild(a),t._filterContainer?t.menu.insertBefore(n,t._filterContainer):t.menu.appendChild(n),t.menu.itemClick=t._menuItemClick.bind(t),t.menu.addEventListener("itemClick",t.menu.itemClick),t.menu.addEventListener("keydown",t._keyDownHandler.bind(t))}_getFilterType(e){let t="string";switch(e.dataType.endsWith("?")?e.dataType.substring(0,e.dataType.length-1):e.dataType){case"number":case"int":case"float":case"int64":t="numeric";break;case"bool":case"boolean":t="bool";break;case"date":case"time":case"datetime":t="date";break;case"any":t="any"}return t}_createFilterPanel(e){const t=this;if(Smart.FilterPanel)if(t.filtering.enabled&&t.filtering.filterMenu.visible&&e.allowFilter&&!t.filtering.filterRow.visible&&(!t.header.visible||t.header.visible&&-1===t.header.buttons.indexOf("filter"))){const n=t._getFilterType(e);t._filterPanel&&t._filterPanel.parentNode&&t._filterPanel.parentNode.removeChild(t._filterPanel),t._filterPanel=t._filterPanels[n],t._filterPanel.dataField=e.dataField,t._filterPanel.rightToLeft=t.rightToLeft,t._filterPanel.messages=t.filtering.filterMenu.messages?t.filtering.filterMenu.messages:t.messages,"excel"===e.filterMenuMode&&(t._filterPanel.dataField=e.dataField,t.dataSource&&t.dataSource.boundSource&&(t._filterPanel.data=t.dataSource.boundSource.toArray?t.dataSource.boundSource.toArray():t.dataSource.boundSource)),t._filterPanel.mode=e.filterMenuMode,t._filterPanel.locale=t.locale;const a=t._filterPanel.querySelectorAll(".smart-filter-panel-input");for(let i=0;i<a.length;i++)a[i].onkeydown=o=>{"Enter"===o.key&&t._filterPanel.filter()};if(!t._filterContainer){const i=document.createElement("div");i.classList.add("smart-filter-container"),t._filterContainer=i,requestAnimationFrame(function(){t.menu.appendChild(i)}),t._applyFilterHandler=function(){t.addFilter(t._filterPanel.dataField,t._filterPanel.getFilter()),t.columnByDataField[t._filterPanel.dataField]._filterState=t._filterPanel.getState()},t._clearFilterHandler=function(){requestAnimationFrame(()=>{t.removeFilter(t._filterPanel.dataField),t.columnByDataField[t._filterPanel.dataField]._filterState=null})}}if(t._filterContainer.appendChild(t._filterPanel),t._filterPanel.classList.remove("smart-hidden"),t._filterPanel.removeEventListener("filter",t._applyFilterHandler),t._filterPanel.removeEventListener("clear",t._clearFilterHandler),t._filterPanel.addEventListener("filter",t._applyFilterHandler),t._filterPanel.addEventListener("clear",t._clearFilterHandler),"none"!==e.filterMenuMode&&t.filtering.filterMenu.visible&&Smart.FilterPanel?t._filterContainer.classList.remove("smart-hidden"):t._filterContainer.classList.add("smart-hidden"),t._filterPanel.reset(),e._filterState)t._filterPanel.loadState(e._filterState);else if(e.filter){const i=e.filter,o=t._getFilterType(e);let r=i.getFilters();for(;r.length>0&&"FilterGroup"===r[0].type;)r=r[0].value;const l=i.getConditions(o),s=r.length>0?l.indexOf(r[0].condition):-1,c=r.length>1?l.indexOf(r[1].condition):-1,u=r.length>0?r[0].value:"",p=r.length>1?r[1].value:"",g=r.length>1?["and","or"].indexOf(r[1].logicalOperator):0;e._filterState={firstFilterComparison:s,firstFilterValue:u,logicalOperator:g,secondFilterComparison:c,secondFilterValue:p},t._filterPanel.loadState(e._filterState)}}else t._filterPanel&&(t._filterPanel.parentNode&&t._filterPanel.parentNode.removeChild(t._filterPanel),e._filterState=null)}hasColumnMenu(e){const t=this;if(!1===t.columnMenu.enabled)return!1;const n=e.menuItems||t.columnMenu.dataSource;let a=0,i=0;for(let o in n){const r=n[o];i++,!1===r.visible?a++:"auto"===r.visible&&("columnMenuItemFilter"!==o&&"columnMenuItemRemoveFilter"!==o||(t.filtering.filterMenu.visible||t.filtering.filterRow.visible)&&(!t.header.visible||t.header.visible&&-1===t.header.buttons.indexOf("filter"))&&a++,"columnMenuItemGroupBy"!==o&&"columnMenuItemRemoveGroupBy"!==o||e.allowGroup&&t.grouping.enabled||a++,"columnMenuItemFilter"!==o||e.allowFilter||a++,"columnMenuItemRemoveFilter"!==o||e.allowFilter||a++,"columnMenuItemGroupBy"!==o||e.allowGroup||a++,"columnMenuItemSortAsc"!==o&&"columnMenuItemSortDesc"!==o&&"columnMenuItemRemoveSort"!==o||e.allowSort&&t.sorting.enabled||a++)}return!!(t.filtering.enabled&&t.filtering.filterMenu.visible&&"none"!==e.filterMenuMode&&Smart.FilterPanel||Smart.Menu&&!(a>=i))}_filterMenuItemsVisibility(e){const t=this,n=(t.menu.parentElement&&(t.enableShadowDOM||t.isInShadowDOM)?t.menu.firstElementChild.shadowRoot:t.menu).querySelectorAll("smart-menu-item"),a=e.menuItems||t.columnMenu.dataSource;let i=0;for(let o in a){const r=n[i++],l=a[o];if(r.disabled=!l.enabled,r.classList.remove("smart-hidden"),"columnMenuItemRemoveSort"===o&&(r.disabled=!e.sortOrder),("columnMenuItemSortAsc"===o&&"asc"===e.sortOrder||"columnMenuItemSortDesc"===o&&"desc"===e.sortOrder)&&(r.disabled=!0),!0===l.visible)r.classList.remove("smart-hidden");else if(!1===l.visible)r.classList.add("smart-hidden");else if("auto"===l.visible){if("columnMenuItemFilter"!==o&&"columnMenuItemRemoveFilter"!==o||(!1===t.filtering.enabled?r.classList.add("smart-hidden"):((t.filtering.filterMenu.visible||t.filtering.filterRow.visible)&&r.classList.add("smart-hidden"),t.header.visible&&t.header.buttons.indexOf("filter")>=0&&r.classList.remove("smart-hidden"))),"columnMenuItemGroupBy"===o){t.grouping.enabled&&e.allowGroup?r.classList.remove("smart-hidden"):r.classList.add("smart-hidden");const s=t.dataSource.groupBy.indexOf(e.dataField);r.disabled=s>=0}if("columnMenuItemRemoveGroupBy"===o){t.grouping.enabled&&e.allowGroup?r.classList.remove("smart-hidden"):r.classList.add("smart-hidden");const s=t.dataSource.groupBy.indexOf(e.dataField);r.disabled=s<0}"columnMenuItemFilter"!==o||e.allowFilter||r.classList.add("smart-hidden"),"columnMenuItemRemoveFilter"!==o||e.allowFilter||r.classList.add("smart-hidden"),"columnMenuItemSortAsc"!==o&&"columnMenuItemSortDesc"!==o&&"columnMenuItemRemoveSort"!==o||(e.allowSort&&t.sorting.enabled?r.classList.remove("smart-hidden"):r.classList.add("smart-hidden"))}}}openMenu(e){const t=this.columnByDataField[e];t&&this._openMenu(t)}hasMenu(){const e=this;return!!(e.menu&&e.menu.column&&e.menu.parentNode)}_closeMenu(e){const t=this;var n;(n=e)&&n.column&&(n.column&&(n.column.setProperty("menu",null),n.column=null),n.parentNode&&(n.classList.remove("open"),t.appearance.allowColumnMenuAnimation||n.parentNode.removeChild(n)),n.removeEventListener("keydown",t._keyDownHandler.bind(t)),n.removeEventListener("itemClick",n.itemClick),n.removeEventListener("itemCheckChange",n.itemCheckChange),t.focus())}closeMenu(){const e=this;if(e._closeMenu(e.menu),e._closeMenu(e.filterRowMenu),e._filterPanel){const n=e._filterPanel.querySelectorAll("smart-drop-down-list");for(let a=0;a<n.length;a++){const i=n[a];i.opened&&i.close()}}}})},9325:()=>{Smart.Utilities.Assign("Grid.Pager",class{_refreshPaging(e){const t=this;requestAnimationFrame(()=>{if(t.filtering.filterRow)for(let i=0;i<t.columns.length;i++)t.columns[i]._filterEditorInitialized=!1;t._refreshLayout(),t._refreshSelection(),e||(t._initializeRowElements(),t._refreshLayout()),t.dataSource&&t.dataSource.virtualDataSource?t._virtualDataRequest(e?"pageIndexChange":"pageSizeChange"):(t._recycle(),t._scrollUpdate&&clearTimeout(t._scrollUpdate),t._scrollUpdate=setTimeout(function(){t.isScrolling||(t.$.rowContainer.style.top=parseInt(t.$.rowContainer.style.top)+.01+"px")},50));const n=t.paging.pageIndex*t._pageSize,a=n+t._pageSize;t.$.fireEvent("page",{data:{first:n,last:a,size:a-n}})})}firstPage(){const e=this;e.paging.enabled&&(e.paging.pageIndex>0&&(e.paging.pageIndex=0),e._refreshPaging(!0))}lastPage(){const e=this;if(!e.paging.enabled)return;const t=e.$.headerPager.querySelector("smart-pager");e.paging.pageIndex<t.pagesCount-1&&(e.paging.pageIndex=t.pagesCount-1),e._refreshPaging(!0)}prevPage(){const e=this;e.paging.enabled&&(e.paging.pageIndex>0&&e.paging.pageIndex--,e._refreshPaging(!0))}nextPage(){const e=this,t=e.$.headerPager.querySelector("smart-pager");e.paging.enabled&&(e.paging.pageIndex<t.pagesCount-1&&e.paging.pageIndex++,e._refreshPaging(!0))}goToPage(e){const t=this,n=t.$.headerPager.querySelector("smart-pager");!t.paging.enabled||e<0||e>n.pagesCount-1||(t.paging.pageIndex=e,t._refreshPaging(!0))}_refreshPagesCount(){const e=this;if(!e.paging.enabled)return;const t=e.$.headerPager.querySelector("smart-pager"),n=function(){const i=e.getVisibleRows();let o=i.length;if(void 0!==e.dataSource.virtualDataSourceLength&&(o=e.dataSource.virtualDataSourceLength),e.rowHierarchy){o=0;for(let r=0;r<i.length;r++){const l=i[r];0!==l.level||l.parent||o++}if(void 0!==e.dataSource.virtualDataSourceLength)o=e.dataSource.virtualDataSourceLength;else{e._refreshRowHierarchy(!1,!0),o=0;const r=l=>{let s=[];if(0===e.dataSource.groupBy.length)return l;for(let c=0;c<l.length;c++){const u=l[c];(!u.$||void 0===u.$.filtered||u.$.filtered)&&(s.push(u),u.children&&(s=s.concat(r(u.children))))}return s};for(let l=0;l<e.rowHierarchy.length;l++){const s=e.rowHierarchy[l];if(0===s.level&&!s.parent){if(0===r(s.children).length)continue;o++}}e._refreshRowHierarchy(),e._recycle(!1)}}return{pagesCount:Math.ceil(o/e._pageSize),totalRecords:o}}();t&&(t.pagesCount=n.pagesCount,t.totalRecords=n.totalRecords);const a=e.$.footerPager.querySelector("smart-pager");t&&(a.pagesCount=n.pagesCount,a.totalRecords=n.totalRecords,t.$.pageSizeSelector.disabled=n.totalRecords<e.pager.pageSizeSelector.dataSource[0],a.$.pageSizeSelector.disabled=n.totalRecords<e.pager.pageSizeSelector.dataSource[0]),e.paging.pageIndex>=n.pagesCount&&n.pagesCount>0&&(e.paging.pageIndex=n.pagesCount-1,e._refreshPaging(e.paging.pageIndex))}_renderPagers(){const e=this;e.pager.visible&&requestAnimationFrame(()=>{const t=document.createElement("smart-pager"),n=document.createElement("smart-pager");e.$.headerPager.innerHTML="",e.$.footerPager.innerHTML="",e.$.headerPager.appendChild(t),e.$.footerPager.appendChild(n);const a=function(r){r.messages[e.locale]||(r.messages[e.locale]={}),Object.assign(r.messages[e.locale],{firstButton:e.localize("pagerFirstButton"),lastButton:e.localize("pagerLastButton"),previousButton:e.localize("pagerPreviousButton"),nextButton:e.localize("pagerNextButton"),navigateToLabel:e.localize("pagerNavigateToLabel"),pageSizeLabel:e.localize("pagerPageSizeLabel"),navigateToInputPlaceholder:e.localize("pagerNavigateToInputPlaceholder"),ellipsis:e.localize("pagerEllipsis"),summaryString:e.localize("pagerSummaryString"),summaryPrefix:e.localize("pagerSummaryPrefix"),summarySuffix:e.localize("pagerSummarySuffix")}),r.locale=e.locale},i=function(){const r=e.getVisibleRows();let l=r.length;if(void 0!==e.dataSource.virtualDataSourceLength&&(l=e.dataSource.virtualDataSourceLength),e.rowHierarchy){l=0;for(let s=0;s<r.length;s++){const c=r[s];0!==c.level||c.parent||l++}if(void 0!==e.dataSource.virtualDataSourceLength)l=e.dataSource.virtualDataSourceLength;else{e._refreshRowHierarchy(!1,!0),l=0;const s=c=>{let u=[];if(0===e.dataSource.groupBy.length)return c;for(let p=0;p<c.length;p++){const g=c[p];(!g.$||void 0===g.$.filtered||g.$.filtered)&&(u.push(g),g.children&&(u=u.concat(s(g.children))))}return u};for(let c=0;c<e.rowHierarchy.length;c++){const u=e.rowHierarchy[c];if(0===u.level&&!u.parent){if(0===s(u.children).length)continue;l++}}e._refreshRowHierarchy(),e._recycle(!1)}}return{pagesCount:Math.ceil(l/e._pageSize),totalRecords:l}},o=function(r,l){const s=l+"GridPager",c=i();r.setAttribute("smart-id",s),e.$[s]=r,e["$"+s]=Smart.Utilities.Extend(r),r.beginUpdate(),e.addPropertyBinding("[[pager_navigationButtons_position]]","navigationButtonsPosition",r),e.addPropertyBinding("[[pager_navigationButtons_firstLastButtons_visible]]","showFirstLastNavigationButtons",r),e.addPropertyBinding("[[pager_navigationButtons_prevNextButtons_visible]]","showPrevNextNavigationButtons",r),e.addPropertyBinding("[[pager_navigationButtons_labels_visible]]","showNavigationButtonLabels",r),e.addPropertyBinding("[[pager_pageIndexSelectors_visible]]","showPageIndexSelectors",r),e.addPropertyBinding("[[pager_pageIndexSelectors_dataSource]]","pageIndexSelectors",r),e.addPropertyBinding("[[pager_summary_visible]]","showSummary",r),e.addPropertyBinding("[[pager_summary_position]]","summaryPosition",r),e.addPropertyBinding("[[pager_navigationInput_visible]]","showNavigationInput",r),e.addPropertyBinding("[[pager_navigationInput_position]]","navigationInputPosition",r),e.addPropertyBinding("[[pager_pageSizeSelector_visible]]","showPageSizeSelector",r),e.addPropertyBinding("[[pager_pageSizeSelector_dataSource]]","pageSizeSelectorDataSource",r),e.addPropertyBinding("[[pager_pageSizeSelector_position]]","pageSizeSelectorPosition",r),e.addPropertyBinding("[[pager_autoEllipsis]]","autoEllipsis",r),e.addPropertyBinding("[[!paging_enabled]]","disabled",r),e.addPropertyBinding("{{paging_pageIndex}}","pageIndex",r),e.addPropertyBinding("{{paging_pageSize}}","pageSize",r),e.addPropertyBinding("{{rightToLeft}}","rightToLeft",r),r.pagesCount=c.pagesCount,r.totalRecords=c.totalRecords,r.$.pageSizeSelector.dropDownAppendTo="body",r.$.pageSizeSelector.selectedIndexes=[0],r.totalRecords<e.pager.pageSizeSelector.dataSource[0]&&(r.$.pageSizeSelector.disabled=!0),e["$"+s].listen("change",function(u){const p=i();r.pagesCount=p.pagesCount,r.totalRecords=p.totalRecords,e.paging.pageIndex>r.pagesCount&&(e.paging.pageIndex=r.pagesCount-1),t.refresh(),n.refresh(),e._refreshPaging(u.detail&&void 0!==u.detail.index||void 0!==u.target.value)}),r.endUpdate()};o(t,"header"),o(n,"footer"),a(t),a(n)})}})},7343:()=>{Smart.Utilities.Assign("Grid.Reorder",class{reorderColumns(e,t,n=!1){const a=this;if(void 0===e||void 0===t)return;const i=a.columnByDataField[e],o=a.columnByDataField[t],r="string"==typeof e?a.columns.indexOf(i):e,l="string"==typeof t?a.columns.indexOf(o):t;"string"==typeof e&&"string"===t?i.columnGroup=o.columnGroup:a.columns[r].columnGroup=a.columns[l].columnGroup,a.columns.move(r,n&&l+1<=a.columns.length?l:l-1)}swapColumns(e,t){const n=this;if(void 0===e||void 0===t)return;const a=n.columnByDataField[e],i=n.columnByDataField[t],o="string"==typeof e?n.columns.indexOf(a):e,r="string"==typeof t?n.columns.indexOf(i):t,l="string"==typeof e?a.columnGroup:n.columns[o].columnGroup;"string"==typeof e&&"string"===t?a.columnGroup=i.columnGroup:n.columns[o].columnGroup=n.columns[r].columnGroup,n.columns.move(o,r),"string"==typeof e&&"string"===t?i.columnGroup=l:n.columns[r-1].columnGroup=l,n.columns.move(r-1,o)}_createLine(e){const t=this;return e.classList.contains("smart-breadcrumb-item")||e.column?function(){const n=document.createElement("div"),a=t.getBoundingRect(e),i=t.getBoundingRect(t.$.columnHeader),o=t.getBoundingRect(t),r=t.$.content.offsetHeight-7-t._scrollView.hScrollBar.offsetHeight-a.top+o.top;return n.classList.add("smart-grid-drag-line"),n.style.left=t.rightToLeft?-i.left+a.left+"px":-i.left+a.right+"px",n.style.top=a.top-o.top+"px",n.style.height=r+"px",n.style.opacity=0,n}():function(){const n=document.createElement("div"),a=t.getBoundingRect(e);return n.classList.add("smart-grid-drag-line","row"),n.style.width=t.$.scrollView.offsetWidth-e.offsetLeft-e.row.header.offsetWidth-t._scrollView.vScrollBar.offsetWidth+"px",n.style.left=e.row.header.offsetWidth+"px",n.style.top=a.bottom-t.offsetTop+"px",n.style.opacity=0,n}()}_drag(e){const t=this,n=e.originalEvent;if(!t._dragDrop)return;let a=t._dragDrop.dragDetails.feedback;if(!a&&t._dragDrop.showFeedback){if(a=t._dragDrop.createFeedback(n),!a)return;if(t._overlay=document.createElement("div"),t._overlay.classList.add("smart-grid-overlay"),t._overlay.style.cursor="",t.$.root.appendChild(t._overlay),t._dragDrop.column)t._dragLine=t._createLine(t._dragDrop.column.element),t.$.root.appendChild(t._dragLine),requestAnimationFrame(()=>{t._dragLine&&(t._dragLine.style.opacity=1)}),t._dragDrop.feedbackLine=t._dragLine;else{const i=t._dragDrop.row;let o="<div>";for(let r=0;r<t.columns.length;r++){const l=t.columns[r];o+="<div>"+l.label+": "+i["column_"+l.dataField].value+"</div>"}t._dragDrop.items=t._rowElements,t._dragDrop.getItemCoordinates(t._rowElements),o+="</div>",a.innerHTML=o,t._dragLine=t._createLine(t._dragDrop.row.element),t.$.root.appendChild(t._dragLine),requestAnimationFrame(()=>{t._dragLine.style.opacity=1}),a.classList.add("smart-grid-row-drag-feedback"),t._dragDrop.feedbackLine=t._dragLine}}t._dragDrop.drag(e),t._dragDrop.column?t._dragColumn(e):t._dragRow(e),n.preventDefault()}_dragRow(e){const t=this,n=t._dragDrop.dragDetails,a=t._dragLine,i=e.originalEvent,o=t.getBoundingRect(t);if(e.pageY<o.top||e.pageY>o.bottom||e.pageX<o.left||e.pageX>o.right||n.target&&!n.target.row||!n.target)t._dragDrop.error(),a.style.opacity=0;else{if(t._dragDrop.getItemCoordinates(t._dragDrop.items),a.style.opacity=1,t._dragDrop.success(),!n.target)return;let r=t.getBoundingRect(n.target);a.style.width=t.$.scrollView.offsetWidth-t._dragDrop.row.offsetLeft-t._dragDrop.row.header.offsetWidth-t._scrollView.vScrollBar.offsetWidth+"px",a.style.left=t._dragDrop.row.header.offsetWidth+"px";let l=r.top-t.offsetTop-t.scrollTop;t._recyclingRows[t._recyclingRows.length-1].element===n.target&&e.pageY>o.bottom-10&&(n.before=!1),e.pageY>l+t.offsetTop+r.height-7&&(n.before=!1),a.style.top=n.before?l+"px":l+r.height-7+"px"}t.$.fireEvent("rowDragging",{row:t._dragDrop.row,id:t._dragDrop.row.id,index:t._dragDrop.visibleIndex,data:t._dragDrop,originalEvent:i})}_dragColumn(e){const t=this,n=t._dragDrop.dragDetails,a=t.getBoundingRect(t),i=e.originalEvent;if(e.pageY<a.top||e.pageY>a.bottom||e.pageX<a.left||e.pageX>a.right?(t._dragDrop.error(),t._dragLine.style.opacity=0):t._dragLine.style.opacity=1,n.target&&t._dragDrop.feedback&&!t._dragDrop.feedback.classList.contains("error")){t._dragDrop.getItemCoordinates(t._dragDrop.items);const o=t.getBoundingRect(n.target),r=t.getBoundingRect(t.$.content);t._dragDrop.column&&(t._dragLine.style.opacity=1,t._dragLine.style.left=!1===n.before?-t.offsetLeft+o.right-t.scrollLeft+"px":-t.offsetLeft+o.left-t.scrollLeft+"px",n.target.classList.contains("smart-breadcrumb-item")?(t._dragLine.style.top=o.top-a.top-t.scrollTop+"px",t._dragLine.style.height=o.height+"px",t.$.breadcrumb.dataSource.forEach(l=>{l.value===n.item.column.dataField&&(t._dragLine.style.opacity=0,t._dragDrop.error())})):(t._dragLine.style.top=o.top-a.top-t.scrollTop+"px",t._dragLine.style.height=t.$.content.offsetHeight-7-t._scrollView.hScrollBar.offsetHeight-o.top+r.top+"px"),parseInt(t._dragLine.style.left)<3?t._dragLine.style.left="3px":parseInt(t._dragLine.style.left)>=t.offsetWidth-3&&(t._dragLine.style.left=t.offsetWidth-7+"px"))}else t._dragLine.style.opacity=0;t.$.fireEvent("columnDragging",{column:t._dragDrop.column,dataField:t._dragDrop.column.dataField,index:t.columns.indexOf(t._dragDrop.column),data:t._dragDrop,originalEvent:i})}_beginRowDrag(e,t){const n=this;let a=!1;n.behavior.allowRowReorder&&t.allowReorder&&(a=!0),a&&(n.$.fireEvent("rowDragStart",{row:t,id:t.id,index:t.visibleIndex,data:null,originalEvent:e.originalEvent}).defaultPrevented||(n._dragDrop=new Smart.Utilities.DragDrop(n),n._dragDrop.capture(t.element,e),n._dragDrop.row=t,n._recycle(!1),n._dragInterval&&clearInterval(n._dragInterval),n._dragInterval=setInterval(function(){const i=n._dragDrop.dragDetails;if(!i.feedback)return;const o=parseInt(i.feedback.style.left),r=parseInt(i.feedback.style.top),l=n.getBoundingClientRect();n._dragLine&&l.left<=o&&l.left+l.width>=o&&(r>=l.top&&r<=l.top+20?n.scrollTop-=5:r>=l.top+l.height+5&&r<=l.top+l.height+20&&(n.scrollTop+=5))},10)))}_beginDrag(e,t){const n=this;if(!t.dataField)return void n._beginRowDrag(e,t);const a=t;if(n.behavior.allowColumnReorder&&a.allowReorder&&!n.$.fireEvent("columnDragStart",{column:a,dataField:a.dataField,index:n.columns.indexOf(a),data:null,originalEvent:e.originalEvent}).defaultPrevented){n._dragDrop=new Smart.Utilities.DragDrop(n),n._dragDrop.capture(a.element,e),n._dragDrop.column=a;const i=n.columns.map(o=>o.element);n._dragDrop.items=n.$.breadcrumb?i.concat(n.$.breadcrumb._items):i,n._dragInterval&&clearInterval(n._dragInterval),n._dragInterval=setInterval(function(){const o=n._dragDrop.dragDetails;if(!o.feedback)return;const r=parseInt(o.feedback.style.left),l=n.getBoundingClientRect();n._dragLine&&l.left<=r&&l.left+l.width>=r&&(r>=l.left&&r<=l.left+20?n.scrollLeft-=5:r>=l.left+l.width-20&&r<=l.left+l.width&&(n.scrollLeft+=5))},3)}}_cancelDrag(){const e=this;e._dragLine&&(e._dragLine.parentNode&&e._dragLine.parentNode.removeChild(e._dragLine),e._dragLine=null),e._dragDrop&&(e._dragDrop.removeFeedback(),e._dragDrop=null),e._dragInterval&&clearInterval(e._dragInterval),e._recycle()}_endDrag(e){const t=this;if(t._dragDrop){const n=t._dragDrop.dragDetails;if(!n.feedback||n.feedback&&n.feedback.classList.contains("error")&&!n.feedback.classList.contains("data"))return void t._cancelDrag();if(e.key&&"Escape"===e.key)return t._dragDrop.column?t.$.fireEvent("columnDragCancel",{column:n.item.column,dataField:n.item.column.dataField,index:t.columns.indexOf(t._dragDrop.column),data:t._dragDrop}):t._dragDrop.row&&t.$.fireEvent("rowDragCancel",{row:t._dragDrop.row,id:t._dragDrop.row.id,index:t._dragDrop.row.visibleIndex,data:t._dragDrop}),void t._cancelDrag();t.beginUpdate();let a=n.target;const i=n.before;if(t._dragDrop.column){if(t.filtering.filterRow)for(let o=0;o<t.columns.length;o++)t.columns[o]._filterEditorInitialized=!1;if(a&&a.column&&"Escape"!==e.key&&!n.feedback.classList.contains("data")){if(!t.$.fireEvent("columnDragEnd",{column:t._dragDrop.column,dataField:t._dragDrop.column.dataField,index:t.columns.indexOf(t._dragDrop.column),newIndex:t.columns.indexOf(a.column),data:t._dragDrop,originalEvent:e.originalEvent}).defaultPrevented){const o=t.columns.indexOf(t._dragDrop.column),r=t.columns.indexOf(a.column);t._dragDrop.column.columnGroup=a.column.columnGroup,t.columns.move(o,r),t.$.fireEvent("columnReorder",{column:t._dragDrop.column,dataField:t._dragDrop.column.dataField,index:o,newIndex:r,data:t._dragDrop,originalEvent:e.originalEvent})}}else t.$.fireEvent("columnDragEnd",{column:t._dragDrop.column,dataField:t._dragDrop.column.dataField,index:t.columns.indexOf(t._dragDrop.column),newIndex:-1,data:t._dragDrop,originalEvent:e.originalEvent});if("Escape"!==e.key&&t.$.breadcrumb){const o=t.getBoundingRect(t.$.breadcrumb);if(e.originalEvent.pageY>=o.top-t.scrollTop&&e.originalEvent.pageY<=o.bottom-t.scrollTop){const r=t.$.breadcrumb._items.indexOf(a),l=t._dragDrop.dragDetails.item.column,s=t.$.breadcrumb.dataSource.slice(0);s.splice(Math.max(0,r+(i?0:1)),0,{label:l.label,value:l.dataField}),t.$.breadcrumb.dataSource=s;const c=t.$.breadcrumb.dataSource.map(u=>u.value);t.dataSource.groupBy=c,t.refresh(!0),t.refreshFilters()}}}else if(t._dragDrop.row)if(a&&a.row&&"Escape"!==e.key&&!n.feedback.classList.contains("data")){if(!t.$.fireEvent("rowDragEnd",{row:t._dragDrop.row,id:t._dragDrop.row.id,index:t._dragDrop.row.visibleIndex,newIndex:a.row.visibleIndex,data:t._dragDrop,originalEvent:e.originalEvent}).defaultPrevented){const o=t._dragDrop.row.visibleIndex;let r=a.row.visibleIndex;n.before||r++,o<r&&r--,t.rows.move(o,r),t.$.fireEvent("rowReorder",{row:t._dragDrop.row,id:t._dragDrop.row.id,index:o,newIndex:r,data:t._dragDrop,originalEvent:e.originalEvent})}}else t.$.fireEvent("rowDragEnd",{row:t._dragDrop.row,id:t._dragDrop.row.id,index:t._dragDrop.row.visibleIndex,newIndex:-1,data:t._dragDrop,originalEvent:e.originalEvent});t._cancelDrag(),t.endUpdate(),t.columnGroups&&t.columnGroups.length>0&&t._renderColumns(!0),t.paging.enabled&&t.grouping.enabled&&t._refreshPagesCount()}}})},4045:()=>{Smart.Utilities.Assign("Grid.Resize",class{autoSizeRows(e){const t=this,n=e||t._recyclingRows;t.rows.canNotify=!1;for(let a=0;a<n.length;a++){const i=n[a];i.element=t._rowElements[1],i.grid=t;const o=i._autoSize(i);i.cellHeight!==o&&(i.cellHeight=o),i.height=o}t.rows.canNotify=!0,t.refresh()}autoSizeColumns(e,t){const n=this,a=t||n.columns;let i=[];if(!e){const l=n._recyclingRows;for(let s=0;s<l.length;s++){const c=l[s];for(let u=0;u<a.length;u++){const p=a[u],g=c.getCell(p.dataField);i[p.dataField]||(i[p.dataField]=p.label),g.value&&g.value.toString().length>i[p.dataField].length&&(i[p.dataField]=g.value)}}}const o=[];for(let l=0;l<a.length;l++){const s=a[l];o.push(i[s.dataField]?i[s.dataField]:s.label)}const r=a[0]._measureSize(o);n.columns.canNotify=!1;for(let l=0;l<a.length;l++)a[l].width=r[l];n.columns.canNotify=!0,n.refresh()}_doubleClickHandler(e){const t=this;if("none"!==t.behavior.rowResizeMode||"none"!==t.behavior.columnResizeMode){if(t._downTime&&new Date-t._downTime<300){const n=(t.enableShadowDOM?t.shadowRoot:t.getRootNode()).elementsFromPoint(e.clientX,e.clientY);let a=null,i=null,o=null,r=null;for(let c=0;c<n.length;c++){const u=n[c];if(u.getAttribute("data-field")){a=u.getAttribute("data-field"),i=u;break}if(u.getAttribute("data-id")){o=u.getAttribute("data-id"),r=u;break}}const l=t.columnByDataField[a],s=t.rowById[o];if(t.behavior.allowColumnAutoSizeOnDoubleClick&&l&&l.allowResize&&"none"!==t.behavior.columnResizeMode){const c=i.getBoundingClientRect().right,u=10;c-u<=e.clientX&&e.clientX<=c+u&&(l.autoSize(),e.preventDefault(),e.originalEvent&&(e.originalEvent.preventDefault(),e.originalEvent.stopPropagation()))}if(t.behavior.allowRowAutoSizeOnDoubleClick&&s&&s.allowResize&&"none"!==t.behavior.rowResizeMode){const c=r.getBoundingClientRect().bottom,u=10;c-u<=e.clientY&&e.clientY<=c+u&&(s.computedHeight=null,s.autoSize(),e.preventDefault(),e.originalEvent&&(e.originalEvent.preventDefault(),e.originalEvent.stopPropagation()))}}t._downTime=new Date}}_endResize(){const e=this;e._overlay&&setTimeout(()=>{e._overlay&&(e._overlay.parentNode.removeChild(e._overlay),e._overlay=null)},100);const t=e.getBoundingRect(e);if(delete e._columnDownPosition,delete e._rowDownPosition,e.classList.remove("smart-grid-resize-mode"),e.$.root.classList.remove("smart-grid-resize-mode"),e.classList.remove("smart-grid-row-resize-mode"),e.classList.remove("smart-grid-column-resize-mode"),e._rowToResize&&e._rowResizeStartLine&&e._rowResizeLine){const r=e.rowById[e._rowToResizeId],l=r.cellHeight+parseFloat(e._rowResizeLine.style.top)-parseFloat(e._rowResizeStartLine.style.top),s=r.cellHeight;if(e.rows.canNotify=!1,r.height=null,"split"===e.behavior.rowResizeMode){const c=e._nextRow(r),u=parseInt(r.height-l+r.cellHeight);r.computedHeight=l,c.computedHeight=parseInt(c.height)+u,c.height=null}else r.computedHeight=l;return e.rows.canNotify=!0,e._rowResizeStartLine.parentNode.removeChild(e._rowResizeStartLine),e._rowResizeLine.parentNode.removeChild(e._rowResizeLine),e.appearance.showResizeTooltips&&e._rowResizeTooltip.parentNode.removeChild(e._rowResizeTooltip),e._rowToResize.header&&(e._rowToResize.header.style.cursor=""),e._rowResizeLine=null,e._rowToResize=null,e._rowToResizeId=null,e.refresh(),void e.$.fireEvent("rowResize",{row:r,id:r.id,oldHeight:s,height:l})}if(!e._columnToResizeElement||!e._columnResizeLine)return;const n=e.columnByDataField[e._columnToResizeDataField],a=e._columnToResizeRect;let i=t.left+parseInt(e._columnResizeLine.style.left)-a.left+e.scrollLeft;const o=n.width;if(e.rightToLeft&&(i=t.left-parseFloat(e._columnResizeLine.style.left)+a.right-e.scrollLeft-e._scrollView.vScrollBar.offsetWidth),i<n.minWidth&&(i=n.minWidth),e.columns.canNotify=!1,"split"===e.behavior.columnResizeMode){const r=e._nextColumn(n);if(r){const l=parseInt(n.computedWidth-i);n.width=i,r.width=parseInt(r.computedWidth)+l}}else n.width=i;e.columns.canNotify=!0,e._columnResizeLine.parentNode.removeChild(e._columnResizeLine),e._columnResizeLine=null,e._columnResizeStartLine.parentNode.removeChild(e._columnResizeStartLine),e._columnResizeTooltip.parentNode&&e._columnResizeTooltip.parentNode.removeChild(e._columnResizeTooltip),e._columnResizeStartLine=null,e._columnToResizeElement.style.cursor="",e._columnToResizeElement.sortButton.style.cursor="",e._columnToResizeElement.filterButton.style.cursor="",e._columnToResizeElement=null,e._columnToResizeRect=null,e._columnToResizeDataField=null,e._columnResizeTooltip=null,e.refresh(),e.$.fireEvent("columnResize",{column:n,dataField:n.dataField,oldWidth:o,width:i})}_columnResizePrepare(){const e=this,t=e._columnToResizeRect,n=e.getBoundingRect(e.$.columnHeader);if(e._dragDetails)return;const a=function(){const o=document.createElement("div");return o.classList.add("smart-grid-resize-line"),o.style.left=e.rightToLeft?-n.left+t.left+"px":-n.left+t.right+"px",o.style.top=-n.top+t.top+"px",o.style.height="calc(100% - "+o.style.top+")",o.style.cursor="col-resize",o},i=document.createElement("div");i.classList.add("smart-grid-resize-tooltip"),e._columnResizeTooltip=i,e._columnResizeTooltip.style.left=-n.left+t.right+"px",e.rightToLeft&&(e._columnResizeTooltip.style.left=-n.left+t.left+"px"),e._columnResizeTooltip.innerHTML=e.localize("columnResizeTooltip",{value:t.width}),e._columnResizeLine=a(),e._columnResizeStartLine=a(),"growAndShrink"===e.behavior.columnResizeMode&&(e.classList.add("smart-grid-resize-mode"),e.classList.add("smart-grid-column-resize-mode"),e.$.root.classList.add("smart-grid-resize-mode")),e.appearance.showResizeTooltips&&e.$.root.appendChild(e._columnResizeTooltip),e.$.root.appendChild(e._columnResizeLine),e.$.root.appendChild(e._columnResizeStartLine),e._overlay=document.createElement("div"),e._overlay.classList.add("smart-grid-overlay"),e._overlay.style.cursor="col-resize",e.$.root.appendChild(e._overlay)}_columnDownResizeHandler(e){this._columnDownPosition=e.pageX}_columnMoveResizeHandler(e){const t=this;if(t._dragDetails)return;t._columnDownPosition&&Math.abs(e.pageX-t._columnDownPosition)>=3&&!t._columnResizeLine&&t._columnResizePrepare();const n=function(a){const i=t._columnToResizeRect;let o=a.left+parseFloat(t._columnResizeLine.style.left)-i.left+t.scrollLeft;t.rightToLeft&&(o=a.left-parseFloat(t._columnResizeLine.style.left)+i.right-t.scrollLeft-t._scrollView.vScrollBar.offsetWidth);const r=t.columnByDataField[t._columnToResizeDataField];o<r.minWidth&&(o=r.minWidth),t.appearance.showResizeTooltips&&(t._columnResizeTooltip.innerHTML=t.localize("columnResizeTooltip",{value:parseInt(o)}))};if(t._columnResizeLine){const a=t.columnByDataField[t._columnToResizeDataField],i=t._columnToResizeRect,o=a.minWidth,r=a.maxWidth,l=t._nextColumn(a),s=t.getBoundingRect(t);if(t.rightToLeft){if(e.pageX>s.right)return;if("split"===t.behavior.columnResizeMode&&l&&e.pageX<=t.offsetWidth-t.scrollLeft-l.left-l.computedWidth+l.minWidth)return t._columnResizeLine.style.left=t.offsetWidth-t.scrollLeft-l.left-l.computedWidth+l.minWidth+"px",void n(s);if(i.right-o-t.scrollLeft<=e.pageX)return t._columnResizeLine.style.left=-s.left+i.right-o-t.scrollLeft+"px",void n(s);if(i.left+r-t.scrollLeft>=e.pageX)return t._columnResizeLine.style.left=-s.left+i.right-r-t.scrollLeft+"px",void n(s);t._columnResizeLine.style.left=-s.left+e.pageX+"px",n(s)}else{if(e.pageX<s.left)return;if("split"===t.behavior.columnResizeMode&&l&&e.pageX>=s.left+l.left+l.computedWidth-l.minWidth-t.scrollLeft)return t._columnResizeLine.style.left=-s.left+s.left+l.computedWidth+l.left-l.minWidth-t.scrollLeft+"px",void n(s);if(i.left+o-t.scrollLeft>=e.pageX)return t._columnResizeLine.style.left=-s.left+i.left+o-t.scrollLeft+"px",void n(s);if(i.left+r-t.scrollLeft<=e.pageX)return t._columnResizeLine.style.left=-s.left+i.left+r-t.scrollLeft+"px",void n(s);t._columnResizeLine.style.left=-s.left+e.pageX+"px",n(s)}}else if(!t._columnDownPosition){const a=this;if(e.composedPath&&-1===e.composedPath().indexOf(this))return;const i=(a.enableShadowDOM?a.shadowRoot:a.getRootNode()).elementsFromPoint(e.clientX,e.clientY);let o=null,r=null;if(a._columnResizeLine)return;for(let l=0;l<i.length;l++){const s=i[l];if(s.hasAttribute("data-field")&&s.hasAttribute("header")){o=s.getAttribute("data-field"),r=s;break}}if(a._columnToResizeElement&&(a._columnToResizeElement.style.cursor="",a._columnToResizeElement.sortButton.style.cursor="",a._columnToResizeElement.filterButton.style.cursor="",a._columnToResizeElement=null),o){const l=a.rightToLeft?r.getBoundingClientRect().left:r.getBoundingClientRect().right;if(r.style.cursor="",r.sortButton.style.cursor="",r.filterButton.style.cursor="",l-10<=e.clientX&&e.clientX<=l+10){const s=a.columnByDataField[o];if(!s||s&&!s.allowResize)return;const c=a._isLastVisibleColumn(s);if("split"===a.behavior.columnResizeMode&&c)return;r.style.cursor="col-resize",r.sortButton.style.cursor="col-resize",r.filterButton.style.cursor="col-resize",a._columnToResizeRect=a.getBoundingRect(r),a._columnToResizeElement=r,a._columnToResizeDataField=o}}}}_rowMoveResizeHandler(e){const t=this,n=(t.enableShadowDOM?t.shadowRoot:t.getRootNode()).elementsFromPoint(e.clientX,e.clientY);let a=null,i=null;if(t._rowDownPosition&&Math.abs(e.pageY-t._rowDownPosition)>=3&&!t._rowResizeLine&&t._rowDownResizeHandler(e),t._rowResizeLine){const o=t._offsetTop(t.$.scrollView),r={top:o,bottom:t.$.scrollView.offsetHeight+o};if(e.pageY<=r.top||e.pageY>=r.bottom)return;const l=function(){const b=s.cellHeight+parseFloat(t._rowResizeLine.style.top)-parseFloat(t._rowResizeStartLine.style.top);t.appearance.showResizeTooltips&&(t._rowResizeTooltip.innerHTML=t.localize("rowResizeTooltip",{value:parseInt(b)}))},s=t.rowById[t._rowToResizeId],c=t._nextRow(s),u=t._rowToResizeBounds,p=s.minHeight,g=s.maxHeight;return"split"===t.behavior.rowResizeMode&&c&&u.bottom+c.height-c.minHeight<=e.pageY?(t._rowResizeLine.style.top=u.bottom+c.height-c.minHeight-o+"px",void l()):u.top+p+10>=e.pageY?(t._rowResizeLine.style.top=u.top+p-o+"px",void l()):u.top+g>=e.pageY-o?(t._rowResizeLine.style.top=u.top+g+10-o+"px",void l()):(t._rowResizeLine.style.top=-o+e.pageY-1+"px",void l())}if(!t._rowDownPosition){for(let o=0;o<n.length;o++){const r=n[o];if(r.hasAttribute("data-id")&&r.hasAttribute("header")){i=r,a=r.getAttribute("data-id");break}}if(t._rowToResize&&(t._rowToResize.style.cursor="",t._rowToResize=null),null!==a){const o=t._offsetTop(i)+i.offsetHeight;if(i.style.cursor="",o-10<=e.clientY&&e.clientY<=o+10){const r=t.rowById[a];if(!r||r&&!r.allowResize)return;r.header&&(r.header.style.cursor="row-resize");const l=t._offsetTop(i);t._rowToResizeBounds={top:l,bottom:i.offsetHeight+l,height:i.offsetHeight},t._rowToResize=i,t._rowToResizeId=a}}}}_rowDownResizeHandler(){const e=this,t=e._rowToResizeBounds,n=function(){const i=document.createElement("div");return i.classList.add("smart-grid-resize-line","row"),i.style.width=e.$.scrollView.offsetWidth-e._rowToResize.offsetLeft+"px",i.style.left="0px",i.style.top=-e._offsetTop(e.$.scrollView)+t.bottom+"px",i.style.cursor="row-resize",i},a=document.createElement("div");a.classList.add("smart-grid-resize-tooltip"),e._rowResizeTooltip=a,e._rowResizeTooltip.style.top=-e._offsetTop(e.$.scrollView)+t.bottom+"px",e._rowResizeTooltip.innerHTML=e.localize("rowResizeTooltip",{value:t.height}),e._rowResizeTooltip.style.right="20px",e._rowResizeTooltip.style.bottom="initial","growAndShrink"===e.behavior.rowResizeMode&&(e.classList.add("smart-grid-resize-mode"),e.classList.add("smart-grid-row-resize-mode"),e.$.root.classList.add("smart-grid-resize-mode")),e._rowResizeLine=n(),e._rowResizeStartLine=n(),e._overlay=document.createElement("div"),e._overlay.classList.add("smart-grid-overlay"),e._overlay.style.cursor="row-resize",e.$.root.appendChild(e._overlay),e.$.scrollView.appendChild(e._rowResizeLine),e.$.scrollView.appendChild(e._rowResizeStartLine),e.appearance.showResizeTooltips&&e.$.scrollView.appendChild(e._rowResizeTooltip)}_rowResizeHandler(e){const t=this;let n=e.clientX,a=e.clientY;void 0!==n&&void 0!==a||(n=e.touches[0].clientX,a=e.touches[0].clientY);const i=(t.enableShadowDOM?t.shadowRoot:t.getRootNode()).elementsFromPoint(n,a);let o=null;for(let r=0;r<i.length;r++){const l=i[r];l.getAttribute("data-id")&&(o=l.getAttribute("data-id"))}null===o||!t._rowToResize||t._rowResizeLine||(t._rowDownPosition=e.pageY)}})},1193:()=>{Smart.Utilities.Assign("Grid.Row",class{constructor(e){const t=this;if(e||(e={}),Object.assign(t,e),e){if(void 0===t.data){const n={$:{}};if(e.grid&&e.grid.dataSource){const a=e.grid.dataSource;for(let i=0;i<a.dataFields.length;i++)n[(a.dataFields?a.dataFields[i]:{}).name]=""}else Object.assign(n,e);e.id&&(n.$.id=e.id),t.data=n}(void 0===e.$||e.$&&void 0===e.$.id)&&(e.data?(e.data.$&&e.data.$.id&&(t.id=e.data.$.id),t.id||(t.id=e.index)):void 0===t.id&&(t.id=e.index),void 0===t.id&&(t.id=Smart.Utilities.Core.createGUID())),void 0===t.detailHeight&&(t.detailHeight=t.grid?t.grid.rowDetail.height:200),void 0===t.height&&t.grid&&(t.height=t.grid.layout.rowMinHeight,t.grid.__autoRowHeight&&(t.height=t.grid.__autoRowHeight),t.grid.layout.rowHeight&&(t.height=t.grid.layout.rowHeight)),void 0===t.cellHeight&&(t.cellHeight=t.height),void 0===t.showDetail&&(t.showDetail=!1),void 0===t.index&&(t.index=-1),void 0===t.visibleIndex&&(t.visibleIndex=-1),void 0===t.freeze&&(t.freeze=!1),void 0===t.height&&(t.height=null),void 0===t.minHeight&&(t.minHeight=25,t.grid&&(t.minHeight=t.grid.layout.rowMinHeight)),void 0===t.checked&&(t.checked=!1),void 0===t.selected?(t.selected=!1,t.grid&&t.grid._selection.rows[t.id]&&(t.selected=!0)):t.selected&&t.grid&&(t.grid._selection.rows[t.id]=!0),void 0===t.enabled&&(t.enabled=!0),void 0===t.visible&&(t.visible=!0),void 0===t.allowCheck&&(t.allowCheck=!0),void 0===t.filtered&&(t.filtered=!0),void 0===t.allowResize&&(t.allowResize=!0),void 0===t.allowReorder&&(t.allowReorder=!0),void 0===t.allowToggle&&(t.allowToggle=!0),void 0===t.allowSelect&&(t.allowSelect=!0),void 0===t.starred&&(t.starred=!1),void 0===t.expanded&&(t.expanded=!(!e.data||void 0===e.data.expanded)&&e.data.expanded),t._addUserData(),t.headerCell=null,t._cells=[]}}_addUserData(){this._userData={comments:[],background:null,color:null,status:null,fontSize:null,fontFamily:null,fontWeight:null,textDecoration:null,fontStyle:null}}setStyle(e){const t=this;t._userData||t._addUserData(),["background","color","fontSize","status","fontFamily","fontWeight","textDecoration","fontStyle"].forEach(n=>{e[n]&&(t._userData[n]=e[n])}),t.grid&&(t._userData._changed=!0,t.grid._recycle())}get properties(){return["allowToggle","allowResize","allowSelect","allowReorder","allowCheck","canNotify","children","starred","checked","cells","detailHeight","detailTemplate","cellHeight","expandHeight","data","enabled","expanded","filtered","freeze","grid","headerCell","height","index","id","minHeight","unbound","selected","showDetail","visible","parent","leaf","visibleIndex"]}createElement(){const e=document.createElement("smart-grid-row");return this.element=e,e.setAttribute("role","row"),e._initialize(this),e}_autoSize(e){const t=this,n=t.grid;if(!n)return;let a=n.layout.rowMinHeight;const i=t.element;if(e||(e=t),e&&(t.data=e.data),!i)return t.height;n.__autoHeightRows||(n.__autoHeightRows=[]);const o=(r,l,s)=>{if(!s||!l||l.autoGenerated)return 0;n.__autoHeightRows[l.dataField]||(n.__autoHeightRows[l.dataField]=[]);const c=(""+r.data[l.dataField]).length,u=n.__autoHeightRows[l.dataField][c],p=u||(()=>{s.style.height="auto",s.content.classList.add(l.cellsWrap?"wrap":"nowrap"),r&&l&&(s.content.textContent=r.data[l.dataField]);const g=s.offsetHeight;return s.style.height="",s.content.classList.remove("wrap"),s.content.classList.remove("nowrap"),g})();a=Math.max(a,p),u||(n.__autoHeightRows[l.dataField][c]=p)};for(let r=0;r<n._frozenNearColumns.length;r++)o(e,n._frozenNearColumns[r],i.children[0].children[r]);for(let r=0;r<n._frozenFarColumns.length;r++)o(e,n._frozenFarColumns[r],i.children[2].children[r]);for(let r=0;r<i.children[1].children.length;r++)o(e,n._columnElements[r].column,i.children[1].children[r]);return a}autoSize(){const e=this._autoSize();this.height=e}getCell(e){const t=this,n=t.grid;if(!n||("string"!=typeof e&&"number"!=typeof e||(e=n.columnByDataField[e]),!e))return null;if(t["column_"+e.dataField]){const a=t["column_"+e.dataField];return a.column=e,a}{const a=new Smart.Grid.Cell(t,e,n);return t["column_"+e.dataField]=a,a}}get cells(){const e=this;return e._cells&&e.grid&&e._cells.length===e.grid.columns.length||e.createCells(),e._cells}get viewCells(){const e=this,t=[];for(let n=0;n<e.grid.viewColumns.length;n++){const a=e.grid.viewColumns[n];if(e["column_"+a.dataField])t.push(e["column_"+a.dataField]);else{const i=new Smart.Grid.Cell(e,a,e.grid);e["column_"+a.dataField]=i,t.push(i)}}return e._viewCells=t,t}createCells(){const e=this,t=e.grid;e._cells=[];for(let n=0;n<t.viewColumns.length;n++){const a=t.viewColumns[n];if(!a.autoGenerated)if(e["column_"+a.dataField])e._cells.push(e["column_"+a.dataField]);else{const i=new Smart.Grid.Cell(e,a,t);e["column_"+a.dataField]=i,e._cells.push(i)}}}toggle(e){this.element._handleExpandCollapse(!this.expanded,e)}select(){this.setProperty("selected",!0)}unselect(){this.setProperty("selected",!1)}expand(){this.element._handleExpandCollapse(!0)}collapse(){this.element._handleExpandCollapse(!1)}render(){const e=this;e.element.row=e,e.element._render()}setProperty(e,t){const n=this,a=n.getProperty(e);n[e]=t,a!==t&&(n.canNotify=!1,n.propertyChanged(e,a,t),n.canNotify=!0)}getProperty(e){const t=this;if("selected"===e&&t.grid){let n=!1;return t.grid._selection.cells["row"+t.id]&&(n=null),t.grid&&t.grid._selection.rows[t.id]&&(n=!0),t.grid.rows.canNotify=!1,t[e]=n,t.grid.rows.canNotify=!0,n}return t[e]}propertyChanged(e,t,n){const a=this;if("showDetail"===e){a.height=0;const i=a.element.rowDetail;if(a.grid.appearance.allowRowDetailToggleAnimation&&!a.grid.rowDetail.dialog.enabled){a.grid._resizeHandling=!1;const o=function(l){const s=a.grid._toggledRow;!s||"transform"!==l.propertyName&&"height"!==l.propertyName||r(s)},r=function(l){l.grid.$.content.style.transition="",l.element.rowDetail.removeEventListener("transitionend",o),l.element.rowDetail.removeEventListener("transitioncancel",o),l.grid._toggledRow=null,l.element.removeAttribute("has-detail"),a.grid._refresh(),setTimeout(()=>{a.grid._resizeHandling=!0},50)};a.grid._toggledRow=a,i.addEventListener("transitionend",o),i.addEventListener("transitioncancel",o),n?(a.element.setAttribute("has-detail",""),a.element.toggleDetailButton.removeAttribute("toggled"),a.element.toggleDetailButton.classList.remove("smart-animate"),setTimeout(()=>{a.element.toggleDetailButton.classList.add("smart-animate"),a.element.toggleDetailButton.setAttribute("toggled",""),a.element.setAttribute("show-detail","")}),a.element.style.height=a.cellHeight+a.detailHeight+"px",a.grid._autoHeight&&(a.grid.$.content.style.transition="0.25s height ease-in-out",a.grid.$.content.style.height=parseInt(a.grid.$.content.style.height)+a.detailHeight+"px",a.grid.$.scrollView.style.height="auto"),i.classList.remove("smart-hidden"),i.style.height!==a.detailHeight+"px"&&(i.style.height=a.detailHeight+"px"),i.style.lineHeight!==a.detailHeight+"px"&&(i.style.lineHeight=a.detailHeight+"px"),i.style.top!==a.cellHeight+"px"&&(i.style.top=a.cellHeight+"px")):(a.element.setAttribute("has-detail",""),a.element.toggleDetailButton.removeAttribute("toggled"),a.grid._autoHeight&&(a.grid.$.content.style.transition="0.25s height ease-in-out",a.grid.$.content.style.height=parseInt(a.grid.$.content.style.height)-a.detailHeight+"px",a.grid.$.scrollView.style.height="auto"),setTimeout(()=>{a.element.style.height=a.cellHeight+"px",a.element.removeAttribute("show-detail")}))}else a.grid._refresh()}if("allowCheck"!==e&&"allowSelect"!==e||a.grid._recycle(),"checked"===e&&(a.grid.checkBoxes.hasThreeStates&&a.grid._hasThreeStates(a,a),a.grid._recycle()),"selected"===e){if(!1===a.allowSelect||(n?a.grid._selection.rows[a.id]=!0:!1===n&&a.grid._selection.rows[a.id]&&delete a.grid._selection.rows[a.id],!a.element))return;n?a.element.setAttribute("aria-selected",!0):a.element.removeAttribute("aria-selected"),a.grid._recycle()}"visible"===e&&a.grid.refresh(),"expanded"===e&&(a.expandHeight||a.grid.refresh()),"height"===e&&(a.expandHeight||a.cellHeight!==n&&(a.cellHeight=n,a.grid.refresh())),"freeze"===e&&(!0===n||"near"===n?a.grid._frozenNearRows.push(a):"far"===n?a.grid._frozenFarRows.push(a):(a.grid._frozenNearRows.splice(a.grid._frozenNearRows.indexOf(a),1),a.grid._frozenFarRows.splice(a.grid._frozenFarRows.indexOf(a),1)),a.grid.refresh())}}),Smart("smart-grid-row",class extends Smart.BaseElement{static get properties(){return{}}get isUtilityElement(){return!0}get hasStyleObserver(){return!1}addThemeClass(){}addDefaultClass(){}_initialize(e){const t=this,n=e.grid,a=n._columnElements,i=n._frozenNearColumns,o=n._frozenFarColumns,r=document.createElement("div"),l=document.createElement("div"),s=document.createElement("div"),c=document.createDocumentFragment(),u=document.createDocumentFragment(),p=document.createDocumentFragment();n.rightToLeft?(l.classList.add("far","smart-grid-cell-container"),r.classList.add("center","smart-grid-cell-container"),s.classList.add("near","smart-grid-cell-container")):(l.classList.add("near","smart-grid-cell-container"),r.classList.add("center","smart-grid-cell-container"),s.classList.add("far","smart-grid-cell-container")),t._properties=[],t.row=e,e.createCells(),t._mouseEnter=function(){if(!n.isScrolling&&!n.editing.isEditing&&(t.commandBar&&(t.commandBar.parentNode.removeChild(t.commandBar),t.commandBar=null),n.editing.enabled&&n.editing.commandColumn.visible&&n.editing.commandColumn.inline&&!t.commandBar)){const v=document.createElement("div"),y=n._getCommandColumnCommandsTemplate();v.classList.add("smart-grid-command-bar"),v.innerHTML=y,r.appendChild(v),requestAnimationFrame(()=>{v.classList.add("show")}),n._updateCommandColumnCommandsVisibility(v,t.row),v.onmousedown=function(x){const D=x.path;let T=null;for(let M=0;M<D.length;M++)if(D[M].classList.contains("smart-grid-command-item")){T=D[M];break}if(T){const M=T.getAttribute("command");n._applyCommand(M,[t.row]),t.commandBar&&(t.commandBar.parentNode.removeChild(t.commandBar),t.commandBar=null),t.removeAttribute("hover"),x.stopPropagation(),x.preventDefault()}},t.commandBar=v}},t._mouseLeave=function(){n.isScrolling||n.editing.isEditing||t.commandBar&&(t.commandBar.classList.remove("show"),t.commandBar.addEventListener("transitionend",function(){t.commandBar&&(t.commandBar.parentNode.removeChild(t.commandBar),t.commandBar=null)}),t.commandBar.addEventListener("transitioncancel",function(){t.commandBar&&(t.commandBar.parentNode.removeChild(t.commandBar),t.commandBar=null)}))},t.addEventListener("mouseenter",t._mouseEnter),t.addEventListener("mouseleave",t._mouseLeave);for(let v=0;v<i.length;v++){const x=e.getCell(i[v]).createElement();u.appendChild(x)}for(let v=0;v<o.length;v++){const x=e.getCell(o[v]).createElement();p.appendChild(x)}for(let v=0;v<a.length;v++){const y=a[v],x=y.column;if(!y.parentNode||!x)break;const D=e.getCell(x).createElement();x&&x._treeColumn&&(t.toggleButton=D.toggleButton),c.appendChild(D)}l.appendChild(u),r.appendChild(c),s.appendChild(p);const g=document.createElement("div");g.classList.add("smart-grid-row-detail","smart-hidden","smart-animate");const b=document.createElement("div");b.classList.add("smart-grid-row-sub-container","smart-hidden"),t._rowFragment=document.createDocumentFragment(),t._rowFragment.appendChild(l),t._rowFragment.appendChild(r),t._rowFragment.appendChild(s),t._rowFragment.appendChild(g),t._rowFragment.appendChild(b),t.appendChild(t._rowFragment),t.cellsNearContainerElement=t.children[0],t.cellsContainerElement=t.children[1],t.cellsFarContainerElement=t.children[2],t.rowDetail=t.children[3],t.rowContainer=t.children[4],n.layout.rowHeight&&"auto"!==n.layout.rowHeight&&(t.style.height=n.layout.rowHeight+"px"),delete t._rowFragment}get enableShadowDOM(){return!1}_handleExpandCollapse(e,t){const n=this,a=n.row,i=a.grid;if(!a.allowToggle)return null;i._toggledRow=a;let o={row:a,id:a.id};t&&(o.originalEvent=t.originalEvent),i.$.fireEvent(e?"rowExpand":"rowCollapse",o);const r=i.dataSource.virtualDataSourceOnExpand&&e&&!0!==a.data._loaded;if(e?i.dataSource._expandedRowIds[a.data.$.id]=!0:delete i.dataSource._expandedRowIds[a.data.$.id],!i.appearance.allowRowToggleAnimation||r)i.rows.canNotify=!1,a.expanded=e,i.rows.canNotify=!0,a.data.expanded=e,r&&(a.data._loaded=!0,i._virtualDataRequest("expand")),i._toggledRow=null,i._refresh(),r&&i.appearance.allowRowToggleAnimation&&(n.toggleButton.removeAttribute("toggled"),n.toggleButton.classList.remove("smart-animate"),setTimeout(()=>{n.toggleButton.classList.add("smart-animate"),n.toggleButton.setAttribute("toggled","")},50));else{const l=function(c){c.height=c.cellHeight,i.$.content.style.transition="",c.element.rowContainer.innerHTML="",c.element.rowContainer.classList.add("smart-hidden"),c.element.rowContainer.removeEventListener("transitionend",s),c.element.rowContainer.removeEventListener("transitioncancel",s),c.element.rowContainer.style.height="",c.element.rowContainer.style.transform="",c.element.rowContainer.style.transition="",c.element.rowContainer.classList.remove("smart-animate"),c.element.toggleButton&&c.element.toggleButton.classList.remove("smart-animate"),i._refresh()},s=function(c){const u=i._toggledRow;n._toggleTimer=null,i._toggledRow=null,!u||"transform"!==c.propertyName&&"height"!==c.propertyName||setTimeout(()=>{l(u)},50)};if(n._toggleTimer){clearTimeout(n._toggleTimer);const c=i._toggledRow;i._toggledRow=null,l(c)}n._toggleTimer=setTimeout(()=>{const c=function(){(function(){const u=i._toggledRow;i._refresh(),i._refreshRowHierarchy();let p=0;for(let v=0;v<i.rowHierarchy.length;v++){const y=i.rowHierarchy[v];let x=y.parent;for(;x;)x.id===i._toggledRow.id&&(p+=y.height),x=x.parent}u.expandHeight=Math.min(i._contentHeight-(u.cellHeight+u.top-i._scrollView.scrollTop),p),u.height=u.cellHeight+u.expandHeight})(),i._recycle(!1),n.style.overflow="hidden",n.style.height="auto",n.style.lineHeight=a.cellHeight+"px"};e?(a.expanded=!0,c(),n.rowContainer.style.transform="scaleY(0)",n.rowContainer.style.height="0px",n.toggleButton&&n.toggleButton.removeAttribute("toggled"),i._autoHeight&&(i.$.content.style.height=parseInt(i.$.content.style.height)-a.expandHeight+"px"),setTimeout(function(){n.toggleButton&&(n.toggleButton.classList.add("smart-animate"),n.toggleButton.setAttribute("toggled","")),n.rowContainer.addEventListener("transitionend",s),n.rowContainer.addEventListener("transitioncancel",s),i._autoHeight&&(i.$.content.style.transition="0.25s height ease-in-out",i.$.content.style.height=parseInt(i.$.content.style.height)+a.expandHeight+"px"),n.rowContainer.classList.add("smart-animate"),n.rowContainer.style.height=a.expandHeight+"px",n.rowContainer.style.transform="scaleY(1)"})):(c(),a.expanded=!1,n.rowContainer.style.transform="scaleY(0)",n.rowContainer.style.height="0px",i._autoHeight&&(i.$.content.style.height=parseInt(i.$.content.style.height)-a.expandHeight+"px",i.$.content.style.transition="",i.$.content.style.height=parseInt(i.$.content.style.height)+a.expandHeight+"px"),n.rowContainer.style.height=a.expandHeight+"px",n.rowContainer.style.transform="scaleY(1)",n.toggleButton&&(n.toggleButton.setAttribute("toggled",""),n.toggleButton.classList.add("smart-animate")),setTimeout(function(){n.toggleButton&&n.toggleButton.removeAttribute("toggled",""),i._autoHeight&&(i.$.content.style.transition="0.25s height ease-in-out",i.$.content.style.height=parseInt(i.$.content.style.height)-a.expandHeight+"px"),n.rowContainer.addEventListener("transitionend",s),n.rowContainer.addEventListener("transitioncancel",s),n.rowContainer.classList.add("smart-animate"),n.rowContainer.style.transform="scaleY(0)",n.rowContainer.style.height="0px"},0))},50)}}_renderAddNewRow(){const e=this,t=e.row,n=t.grid,a=t.element,i=new Smart.Grid.Cell(t,n.columns[0],n);t.visible?a.classList.remove("smart-hidden"):a.classList.add("smart-hidden"),a.innerHTML="<smart-grid-cell><div>"+n.localize("addNewRow")+"</div></smart-grid-cell>",a.firstChild.firstChild.classList.add("align-center"),a.firstChild.classList.add("smart-grid-column-border-collapse"),a.firstChild.setAttribute("freeze",""),a.firstChild.setAttribute("addNewRow",""),a.firstChild.style.width="100%",n._scrollView.vScrollBar.offsetWidth>0&&(a.firstChild.style.width="calc(100% - "+(-1+n._scrollView.vScrollBar.offsetWidth)+"px)"),a.firstChild.cell=i,n._rowGap>0&&t!==n.rows[n.rows.length-1]?(e.style.marginBottom=n._rowGap+"px",parseInt(e.style.height)-n._rowGap!==t.height&&(e.style.height=t.height-n._rowGap+"px"),parseInt(e.style.lineHeight)-n._rowGap!==t.height&&(e.style.lineHeight=t.height-n._rowGap+"px")):(e.style.marginBottom="",parseInt(e.style.height)!==t.height&&(e.style.height=t.height+"px"),parseInt(e.style.lineHeight)!==t.height&&(e.style.lineHeight=t.height+"px"))}_renderFilterRow(){const e=this,t=e.row,n=t.grid,a=t.element;t.visible?a.classList.remove("smart-hidden"):a.classList.add("smart-hidden"),a.innerHTML="<smart-grid-cell><div>"+n.localize("addNewRow")+"</div></smart-grid-cell>",a.firstChild.firstChild.classList.add("align-center"),a.firstChild.classList.add("smart-grid-column-border-collapse"),a.firstChild.setAttribute("freeze",""),a.firstChild.setAttribute("addNewRow",""),a.firstChild.style.width="100%",n._scrollView.vScrollBar.offsetWidth>0&&(a.firstChild.style.width="calc(100% - "+(-1+n._scrollView.vScrollBar.offsetWidth)+"px)"),e.style.marginBottom="",parseInt(e.style.height)!==t.height&&(e.style.height=t.height+"px"),parseInt(e.style.lineHeight)!==t.height&&(e.style.lineHeight=t.height+"px")}_renderEmpty(){this.classList.add("smart-hidden")}_renderCell(e,t,n){if(!t)return void n.classList.add("smart-hidden");let a=e.getCell(t);if(a.element!==n&&(a._styleChanged=!0),e._userData&&!t.autoGenerated){const i=a._updating;a._updating=!0,e._userData._changed&&(a.color=e._userData.color,a.background=e._userData.background,a.fontFamily=e._userData.fontFamily,a.fontSize=e._userData.fontSize,a.fontStyle=e._userData.fontStyle,a.textDecoration=e._userData.textDecoration,a.fontWeight=e._userData.fontWeight);const o=n.firstElementChild;o.style.backgroundColor===a.background&&o.style.fontFamily===a.fontFamily&&o.style.fontSize===a.fontSize&&o.style.fontStyle===a.fontStyle&&o.style.textDecoration===a.textDecoration&&o.style.fontWeight===a.fontWeight&&o.style.color===a.color||(a._styleChanged=!0),a._updating=i}n.cell!==a&&(n.cell.background===a.background&&n.cell.borderColor===a.borderColor&&n.cell.color===a.color&&n.cell.fontSize===a.fontSize&&n.cell.fontFamily===a.fontFamily&&n.cell.textDecoration===a.textDecoration&&n.cell.fontWeight===a.fontWeight&&n.cell.fontStyle===a.fontStyle||(a._styleChanged=!0)),a.element=n,n.cell=a,t._treeColumn&&a.element.isRendered&&a.element._refresh(),a.render(),t&&t.rowHeaderColumn&&(e.header=n,n.setAttribute("data-id",e.id))}_alternate(){const e=this,t=e.row,n=t.grid,a=n.appearance.alternationStart,i=n.appearance.alternationEnd>0?n.appearance.alternationEnd:1/0;!(n.appearance.alternationCount<=0)&&(e.removeAttribute("alternation-index"),t.visibleIndex>=a&&t.visibleIndex<=i)&&e.setAttribute("alternation-index",(t.visibleIndex-a)%n.appearance.alternationCount)}_openRowDetailDialog(e){const t=this,n=t.row.grid,a=t.row;if(!n.rowDetail.dialog.enabled||!a.showDetail)return!1;const i=n._dialogRowDetail||n._createDialog(n.rowDetail.dialog);if(""===n.rowDetail.template)return void(n.editing.dialog.visible||(t._settingsDialogRowId=a.id,n._openRowSettingsDialog(a.id)));if(n.rowDetail.dialog.visible&&i.row!==a)return void(a.showDetail=!1);const o="{{message}}"===n.rowDetail.dialog.header?n.localize("dialogRowDetailHeader",{value:a.visibleIndex+1}):n.rowDetail.dialog.header;!n.rowDetail.dialog.visible||n.rowDetail.dialog.row!==a||a.showDetail?(i.header.innerHTML=o,i.content.innerHTML="",i.content.style.width="100%",i.content.style.height="100%",i.row=a,i.querySelector(".smart-footer").classList.add("smart-hidden"),n._dialogRowDetail||(i.setAttribute("tabindex",0),i.modal=!0,i.btnConfirm.innerHTML=n.localize("dialogRowDetailButtonConfirm"),i.btnCancel.innerHTML=n.localize("dialogRowDetailButtonCancel"),i.btnCancel.classList.add("smart-hidden"),i.onOpen=function(){n.rowDetail.dialog.visible=!0},i.onClose=function(){n.rowDetail.dialog.visible=!1,i.row.showDetail=!1},i.btnCancel.onclick=function(){i.close()},i.btnClose.onclick=function(){i.close()},i.btnConfirm.onclick=function(){i.close()},i.onkeydown=function(r){"Escape"===r.key&&i.close()},n._dialogRowDetail=i),i.open(),setTimeout(function(){i.focus()},100),i.content.appendChild(e)):i.close()}_renderDetail(e){const t=this,n=t.row.grid,a=t.row;let i=a.id,o=a.detailTemplate||n.rowDetail.template;if(o.startsWith("#")&&(o=document.querySelector(o)),a._detail)return e.firstChild===a._detail||(e.firstChild&&e.removeChild(e.firstChild),e.appendChild(a._detail)),void(n.onRowDetailUpdated&&n.onRowDetailUpdated(a.index,a,e.firstChild));if(o instanceof HTMLTemplateElement){const r=o.content.cloneNode(!0).firstElementChild;i=i.toString(),i=i.replace(/'/gi,"\\'"),i=i.replace(/"/gi,'\\"');let l=r.outerHTML.replace(/{{value}}/gi,i).replace(/{{id}}/gi,a.id);l.indexOf("{{value=")>=0&&(i?(l=l.substring(0,l.indexOf("{{value="))+i+l.substring(l.indexOf("}")),l=l.replace(/}/gi,""),l=l.replace(/{/gi,"")):(l=l.replace(/{{value=/gi,""),l=l.replace(/}}/gi,""))),l="<div>"+l+"</div>";for(let s in a.data)l=l.replace("{{"+s+"}}",a.data[s]);e.innerHTML!==l&&(e.innerHTML=l)}else{let r="<div>"+o.replace(/{{value}}/gi,i).replace(/{{id}}/gi,a.id)+"</div>";for(let l in a.data)r=r.replace("{{"+l+"}}",a.data[l]);e.innerHTML!==r&&(e.innerHTML=r)}n.onRowDetailInit&&n.onRowDetailInit(a.index,a,e.firstChild),n.rowDetail.dialog.enabled?t._openRowDetailDialog(n.rowDetail.dialog.visible?e.firstChild:e.firstChild.firstElementChild):a._detail=e.firstChild}_render(){let e=this;const t=e.row,n=t.grid;if(!n)return;const a=t.getProperty("selected");if(!1===a&&e.hasAttribute("selected")?e.removeAttribute("selected"):!0===a?e.setAttribute("selected",""):null===a&&e.setAttribute("selected","indeterminate"),t.allowSelect||e.setAttribute("selected","none"),e.hasAttribute("unbound")&&e.removeAttribute("unbound"),t.unbound&&e.setAttribute("unbound",""),e.removeAttribute("focus"),n._selection.focusedCell&&n._selection.focusedCell.row&&n._selection.focusedCell.row.id===t.id&&e.setAttribute("focus",""),!n._toggledRow&&e.classList.contains("smart-animate"))return e.classList.remove("smart-animate"),e.rowContainer.innerHTML="",e.rowContainer.classList.add("smart-hidden"),n._refreshLayout(),void n._recycle();if(0===n.columns.length)return void e._renderEmpty();if(t.addNewRow)return void e._renderAddNewRow();if(n._toggledRow&&(t.id===n._toggledRow.id?e.setAttribute("toggle",""):e.hasAttribute("toggle")&&e.removeAttribute("toggle")),n._toggledRow&&n.appearance.allowRowToggleAnimation){let u=t.parent;if(!n._toggledRow.expanded&&n._toggledRow.id===t.id){const p=e.rowContainer;for(let g=0;g<p.children.length;g++){const b=p.children[g],v=b.getAttribute("data-id"),y=n.rowById[v];b.getAttribute("data-rendered")||(b.setAttribute("data-rendered",!0),y.element=b,y.render())}}for(;u;){if(u.id===n._toggledRow.id){const p=u.element.rowContainer;if(n._toggledRow.expanded){e.classList.add("smart-hidden");let g=t.createElement(n);for(let b=0;b<p.children.length;b++){const v=p.children[b];if(v.getAttribute("data-id")===t.id.toString())return void(g=v)}t.element=g,p.appendChild(g),p.classList.remove("smart-hidden"),g.row=t,e=g}break}u=u.parent}}e._alternate();const i=parseFloat(n.$.columnNearContainer.style.width),o=parseFloat(n.$.columnContainer.style.width),r=parseFloat(n.$.columnFarContainer.style.width),l=e.children[1],s=e.children[0],c=e.children[2];if(n.rightToLeft?(s.classList.remove("vscroll"),n.computedVerticalScrollBarVisibility&&s.classList.add("vscroll")):(c.classList.remove("vscroll"),n.computedVerticalScrollBarVisibility&&c.classList.add("vscroll")),e.hasAttribute("group")&&e.removeAttribute("group"),e.hasAttribute("tree")&&e.removeAttribute("tree"),e.hasAttribute("level")&&(e.removeAttribute("level"),e.removeAttribute("aria-level")),e.hasAttribute("leaf")&&e.removeAttribute("leaf"),e.hasAttribute("expanded")&&e.removeAttribute("expanded"),e.hasAttribute("summary")&&e.removeAttribute("summary"),e.hasAttribute("filter")&&e.removeAttribute("filter"),null===t.filtered&&e.setAttribute("filter","indeterminate"),n.dataSource.groupBy&&n.dataSource.groupBy.length>0&&"advanced"===n.grouping.renderMode?(e.setAttribute("level",t.level),e.setAttribute("aria-level",t.level),t.expanded&&e.setAttribute("expanded",""),void 0!==t.label&&t.level===n.dataSource.groupBy.length-1&&e.setAttribute("leaf",""),e.setAttribute(void 0!==t.label?"group":"leaf",""),t.summaryRow&&e.setAttribute("summary",""),e.toggleButton&&e.toggleButton.classList.remove("smart-hidden")):n.dataSource.boundHierarchy?(e.setAttribute("level",t.level),e.setAttribute("aria-level",t.level),t.expanded&&e.setAttribute("expanded",""),t.leaf&&e.setAttribute("leaf",""),t.summaryRow&&e.setAttribute("summary",""),e.toggleButton&&e.toggleButton.classList.remove("smart-hidden")):(t.canNotify=!1,t.leaf=!0,t.expanded=!1,t.summaryRow=!1,t.data||(t.data={}),t.data.summaryRow&&(t.summaryRow=!0),t.level=0,e.toggleButton&&e.toggleButton.classList.add("smart-hidden"),t.canNotify=!0),e.setAttribute("data-id",t.id),e.visible=t.visible,e.cellsNearContainerElement.classList.remove("smart-visibility-hidden"),e.cellsContainerElement.classList.remove("smart-visibility-hidden"),e.cellsFarContainerElement.classList.remove("smart-visibility-hidden"),e.removeAttribute("rowspan"),n._rowGap>0&&t!==n.rows[n.rows.length-1]?(e.style.marginBottom=n._rowGap+"px",parseInt(e.style.height)-n._rowGap!==t.height&&(e.style.height=t.height-n._rowGap+"px"),parseInt(e.style.lineHeight)-n._rowGap!==t.height&&(e.style.lineHeight=t.height-n._rowGap+"px")):(e.style.marginBottom="",parseInt(e.style.height)!==t.height&&(e.style.height=t.height+"px"),parseInt(e.style.lineHeight)!==t.height&&(e.style.lineHeight=t.height+"px")),n.rightToLeft?l.style.right!==n._scrollView.scrollWidth-n._scrollView.scrollLeft-n._scrollView.vScrollBar.offsetWidth+"px"&&(l.style.right=n._scrollView.scrollWidth-n._scrollView.scrollLeft-n._scrollView.vScrollBar.offsetWidth+"px"):l.style.left!==-n._scrollView.scrollLeft+"px"&&(l.style.left=-n._scrollView.scrollLeft+"px"),n.rowDetail.enabled){const u=e.rowDetail;e.removeAttribute("show-detail"),t.showDetail?(u.classList.remove("smart-hidden"),e.setAttribute("show-detail",""),n.rowDetail.dialog.enabled?u.classList.add("smart-hidden"):(u.style.height!==t.detailHeight+"px"&&(u.style.height=t.detailHeight+"px"),u.style.lineHeight!==t.detailHeight+"px"&&(u.style.lineHeight=t.detailHeight+"px"),u.style.top!==t.cellHeight+"px"&&(u.style.top=t.cellHeight+"px")),e._renderDetail(u)):u.classList.add("smart-hidden")}else e.rowDetail&&e.rowDetail.classList.add("smart-hidden");s.classList.remove("smart-hidden"),c.classList.remove("smart-hidden"),s.style.width!==i+"px"&&(s.style.width=i+"px"),l.style.width!==o+"px"&&(l.style.width=o+"px"),c.style.width!==r+"px"&&(c.style.width=r+"px"),s.style.height=t.cellHeight+"px",l.style.height=t.cellHeight+"px",c.style.height=t.cellHeight+"px",0===r&&c.classList.add("smart-hidden"),0===i&&s.classList.add("smart-hidden"),i>0&&(parseInt(i),parseInt(n._autoGeneratedColumnsNearWidth)),r>0&&parseInt(r)===parseInt(n._autoGeneratedColumnsFarWidth)&&c.classList.add("border-collapse");for(let u=0;u<n._frozenNearColumns.length;u++){const p=n._frozenNearColumns[u];let g=e.children[0].children[u];g||(g=t.getCell(p).createElement(),e.children[0].appendChild(g)),e._renderCell(t,p,g)}for(let u=0;u<n._frozenFarColumns.length;u++){const p=n._frozenFarColumns[u];let g=e.children[2].children[u];g||(g=t.getCell(p).createElement(),e.children[2].appendChild(g)),e._renderCell(t,p,g)}for(let u=0;u<l.children.length;u++)n._columnElements[u+n._frozenNearColumns.length]||e._renderCell(t,null,e.children[1].children[u]);for(let u=0;u<n._columnElements.length;u++){const p=n._columnElements[u],g=p.column;if(!p.parentNode||!g){if(p&&!g){let v=e.children[1].children[u];v&&v.classList.add("smart-visibility-hidden")}continue}let b=e.children[1].children[u];b||(p.column||(p.column=g),b=t.getCell(g).createElement(),e.children[1].appendChild(b)),p.classList.contains("smart-visibility-hidden")?b.classList.add("smart-visibility-hidden"):(b.classList.remove("smart-visibility-hidden"),e._renderCell(t,g,b))}t._userData._changed=!1,e.visible?e.classList.remove("smart-hidden"):e.classList.add("smart-hidden")}template(){return""}_detach(){const e=this;e.row.headerCell=null,e.row._cells=[],e.row=null,delete e.row,e.element=null,e.removeEventListener("mouseenter",e._mouseEnter),e.removeEventListener("mouseleave",e._mouseLeave),delete e.element,delete e.grid,delete e._mouseEnter,delete e._mouseLeave,delete e.cellsNearContainerElement,delete e.cellsContainerElement,delete e.cellsFarContainerElement,delete e.rowDetail,delete e.rowContainer}onDetached(){this._detach()}})},8469:()=>{Smart.Utilities.Assign("Grid.Select",class{_refreshSelection(){const e=this;if(e.selection.enabled&&(e._selectionColumn.refresh(),!e._isVirtualMode()&&e._selection&&e._selection.rows))for(let t in e._selection.rows)e.rowById[t]||delete e._selection.rows[t];e._refreshCellSelectionRect()}_toggleColumnSelection(e){const t=this;if(!t.selection.enabled||"none"===t.selection.checkBoxes.selectAllMode)return void(t._inputOverlay&&t._inputOverlay.parentNode&&t._inputOverlay.parentNode.removeChild(t._inputOverlay));let n=e.element.getAttribute("selected");n="indeterminate"===n||""!==n;let a=t._recyclingRows;t._selectionColumn._selecting=!0,t.beginUpdate();for(let i=0;i<a.length;i++)a[i].selected=n;if(t._selectionColumn._selecting=!1,t.endUpdate(!1),t._recycle(!1),t.$.fireEvent("change",{started:!1,finished:!0}),t.selection.enabled&&t.selection.checkBoxes.enabled&&"none"!==t.selection.checkBoxes.selectAllMode){const i=e.element,o=i.querySelector(".smart-input");t._inputOverlay?t._inputOverlay.parentNode!==t.$.columnHeader&&(t._inputOverlay.parentNode&&t._inputOverlay.parentNode.removeChild(t._inputOverlay),t._inputOverlay=document.createElement("div"),t.$.columnHeader.appendChild(t._inputOverlay)):(t._inputOverlay=document.createElement("div"),t.$.columnHeader.appendChild(t._inputOverlay)),t._inputOverlay.column=e,t._inputOverlay.onpointerdown=function(){t._inputOverlay||(t._inputOverlay.onpointerdown=null);const l=t._inputOverlay.column;t._inputOverlay.classList.remove("smart-animate"),t._selectionColumn._selecting=!0,t.beginUpdate();let s=l.element.hasAttribute("selected"),c=t._recyclingRows;for(let p=0;p<c.length;p++)c[p].selected=!s;t._selectionColumn._selecting=!1;const u=t._inputOverlay;return t.endUpdate(!1),t._recycle(),t.$.fireEvent("change",{started:!1,finished:!0}),t.$.fireEvent("columnClick",{column:l,dataField:l.dataField}),t.$.columnHeader.appendChild(u),t._inputOverlay=u,t._inputOverlay.classList.add("smart-animate"),!1},t._inputOverlay.classList.add("smart-input-overlay"),t._inputOverlay.classList.add("smart-input-overlay-column"),t.appearance.allowCheckBoxesSelectionAnimation&&t._inputOverlay.classList.add("smart-animate"),t._inputOverlay.style.top=(i.offsetHeight-o.offsetHeight)/4+1+"px";const r=t._selectionColumn.element.parentElement.offsetLeft+t._selectionColumn.element.offsetLeft;t.rightToLeft?t._inputOverlay.style.right=r+"px":t._inputOverlay.style.left=r+"px",t._inputOverlay.style.height=i.offsetWidth+"px",t._inputOverlay.style.width=i.offsetWidth+"px",t._inputOverlay.onmousedown=null,t._inputOverlay.classList.add("smart-input-overlay-on"),t._selectionColumn.refresh()}}_refreshCheckBoxColumnSelection(){const e=this;if(e.selection.enabled&&e.selection.checkBoxes.enabled){const t=e._selectionColumn.element;"none"===e.selection.checkBoxes.selectAllMode?(t.removeAttribute("checkbox"),t.label.classList.remove("smart-input")):(t.setAttribute("checkbox",""),t.label.classList.add("smart-input")),e._selectionColumn.refresh()}}_handleExtendedRowSelection(e,t){const n=this;if(!e)return;let a=n._recyclingRows;if(n.paging.enabled&&"page"===n.selection.selectAllMode&&(a=a.slice(n.paging.pageIndex*n.paging.pageSize,(n.paging.pageIndex+1)*n.paging.pageSize)),!t||t.ctrlKey||t.metaKey||(n._selection.rows=[]),t&&!t.shiftKey&&(n._rangeSelectionStartRow=e,n._rangeSelectionEndRow=e),t&&t.shiftKey){n._rangeSelectionEndRow=e;const i=a.indexOf(n._rangeSelectionStartRow),o=a.indexOf(n._rangeSelectionEndRow),r=Math.min(i,o),l=Math.max(i,o);if(-1===i||-1===o)return;for(let s=r;s<=l;s++){const c=a[s];c.allowSelect&&c.setProperty("selected",!0)}}else!1!==e.allowSelect&&e.setProperty("selected",!t||!t.ctrlKey&&!t.metaKey||null===e.selected||!e.selected)}_setSelection(e,t,n){const a=this;if(!a.selection.enabled)return;if(a._lastColumnSelectionRange=null,a._lastRowSelectionRange=null,a.closeMenu(),null===e&&null===t)return void a.clearSelection();const i=function(){if(n&&!n.ctrlKey&&!n.metaKey&&!n.shiftKey||"one"===a.selection.mode){if("many"!==a.selection.mode){for(let l in a._selection.rows){const s=a.rowById[l];s&&(s.canNotify=!1,s.selected=!1,s.canNotify=!0)}a._selection.rows=[],a._selection.columns=[],a._selection.cells=[]}a._selection.focusedCell=null}if(a._selection.selectionRect){const l=a._selection.selectionRect;l.parentNode.removeChild(l);const s={down:"pointerdown",move:"pointermove",up:"pointerup"};Smart.Utilities.Core.isMobile&&(s.down="touchstart",s.move="touchmove",s.up="touchend"),document.removeEventListener(s.move,l.onMove),document.removeEventListener(s.up,l.onUp),document.removeEventListener(s.down,l.onDown),a._selection.selectionRect=null}};a.beginUpdate();const o=a.columnByDataField[t],r=()=>{const l=a.rowById[e];l&&(l.allowSelect||null===l.allowSelect&&!n)&&(a.selection.checkBoxes.enabled&&n&&n.originalEvent&&n.originalEvent.target&&n.originalEvent.target.parentNode&&n.originalEvent.target.parentNode.hasAttribute("checkbox")&&(n.ctrlKey=!0),i(),a._selectRow(e,n))};if(a.selection.allowCellSelection&&null!=e&&o&&!o.autoGenerated){const l=a.rowById[e];if(!l)return a.endUpdate(!1),void a._recycle();let s=l.getCell(t);const c=a._getParentCell(l,t);c&&(s=c.row.getCell(c.column.dataField)),s&&s.column.allowSelect&&(i(),!n||n.ctrlKey||n.metaKey||(a._selection.rows=[],a._selection.columns=[],"many"!==a.selection.mode&&(a._selection.cells=[])),s.selected="extended"===a.selection.mode?!n||!n.ctrlKey&&!n.metaKey||!s.selected:"one"===a.selection.mode||!s.selected,(n&&!n.shiftKey||!a._selection.focusedCell)&&(a._selection.focusedCell={id:s.row.id,value:s.value,index:s.row.index,dataField:s.column.dataField}),n&&(n.shiftKey||a._selection.focusedCell.id===s.row.id&&a._selection.focusedCell.dataField===s.column.dataField&&"extended"===a.selection.mode)&&(c?a._renderCellSelectionRect(s.row,s.column,c.endRow,c.endColumn):a._renderCellSelectionRect(s.row,s.column,s.row,s.column)))}else a.selection.allowRowHeaderSelection&&null!=e&&void 0===a.columnByDataField[t]||a.selection.checkBoxes.enabled&&null!=e&&"_checkBoxColumn"===t&&void 0===a.columnByDataField[t]?r():null==e||null!=t&&void 0===a.columnByDataField[t]||!a.selection.allowRowSelection?a.selection.allowColumnHeaderSelection&&o&&(i(),a._selectColumn(t,n||new KeyboardEvent("keydown"))):r();a.endUpdate(!1),a._recycle(),null==e||o||a._renderInputOverlay(e,n),a.__selectionStarted=new Date}_renderCellSelectionRect(e,t,n,a){const i=this;let o=i._recyclingRows;const r=o.indexOf(e),l=o.indexOf(n);if(!(i.grouping.enabled&&"advanced"===i.grouping.renderMode&&i.dataSource&&i.dataSource.groupBy.length>0)&&r>=0&&l>=0){if(!i._selection.selectionRect){const c=function(p){const g=document.createElement("div"),b=document.createElement("div"),v=document.createElement("div");return v.classList.add("smart-selection-overlay"),v.appendChild(b),b.appendChild(g),g.classList.add("smart-selection-overlay-content"),b.classList.add("smart-selection-overlay-border-content"),i.selection.allowCellDragSelectionHandle&&p&&b.classList.add("handle"),i.$.scrollView.appendChild(v),v},u=i._selection.selectionRect=c(!0);if(i.selection.allowCellDragSelectionHandle){let p=null,g=null,b=null;u.onMove=function(y){const x=i._selection.selectionRect;let D=y.clientX,T=y.clientY;y.touches&&(D=y.touches[0].clientX,T=y.touches[0].clientY);const M=function(A){const B=(i.enableShadowDOM?i.shadowRoot:i.getRootNode()).elementsFromPoint(A.clientX,A.clientY);let O=null;for(let P=0;P<B.length;P++){const V=B[P];if(V.getAttribute("data-field")){O=V.getAttribute("data-field");break}}let N=null;for(let P=0;P<B.length;P++){const V=B[P];if(V.getAttribute("data-id")){N=V.row;break}}return{column:i.columnByDataField[O],row:N}};if(x&&x.capturedDrag){let A=M({clientX:D,clientY:T}),B=M({clientX:D,clientY:T+x.top}).row,O=M({clientX:D+x.left,clientY:T}).column;if(B||(B=o[o.length-1]),O||(O=A.column),B&&O&&A.row&&A.column){x.row=A.row,x.rowId=x.row.id,x.column=A.column,x.endDragRow=x.endRow=B,x.endDragColumn=x.endColumn=O,x.endDragRowId=x.endDragRow.id,i._dragSelectionStartDataField=x.column.dataField,i._dragSelectionStartRow=x.row;const N=x.row.getCell(x.column.dataField);i._selection.focusedCell={index:N.row.index,id:N.row.id,dataField:N.column.dataField,value:N.value}}i._resizeSelectionRect(),y.preventDefault()}else if(x&&x.captured)if(i._dragSelectionStartDataField=i._selection.focusedCell.dataField,i._dragSelectionStartRow=i.rowById[i._selection.focusedCell.id],null===g&&null===b&&(Math.abs(D-p.left)>=30?g=!0:Math.abs(T-p.top)>=30&&(b=!0)),x.lastPoint&&Math.abs(x.lastPoint.top-T)>=40?(g=null,b=!0):x.lastPoint&&Math.abs(x.lastPoint.left-D)>=40&&(b=null,g=!0),g){const A=x.endDragColumn.dataField,B=M({clientX:D,clientY:p.top-5});B.row&&B.column&&(x.endDragRow=x.endRow,x.endDragColumn=B.column,x.endDragColumn.dataField!==A&&(x.lastPoint={left:D,top:T}),i._resizeSelectionRect())}else if(b){const A=x.endDragRow,B=M({clientX:p.left-5,clientY:T});B.row&&B.column&&(x.endDragRow=B.row,x.endDragColumn=x.endColumn,x.endDragRow.id&&x.endDragRow.id!==A.id&&(x.lastPoint={left:D,top:T}),i._resizeSelectionRect())}x&&x.captured&&i.selection.allowDragSelectionAutoScroll&&(i._autoScrollSelectionDragInterval&&clearInterval(i._autoScrollSelectionDragInterval),i.selection.isDragging=!0,i._autoScrollSelectionDragInterval=setInterval(function(){const A=i.$.scrollView.getBoundingClientRect();D<=A.left+20?(i.scrollLeft-=15,i._resizeSelectionRect()):D>=A.left+A.width-20&&(i.scrollLeft+=15,i._resizeSelectionRect()),T<=A.top+20?(i.scrollTop-=15,i._resizeSelectionRect()):T>=A.top+A.height-20&&(i.scrollTop+=15,i._resizeSelectionRect())},5))},u.onUp=function(){if(!u.captured)return;i._autoScrollSelectionDragInterval&&clearInterval(i._autoScrollSelectionDragInterval),i.editing.editCell||i.editing.editRow||i.focus(),u.capturedDrag=!1,u.captured=!1,g=null,b=null,p=null,u.lastPoint=null;const y=u.cellValues;u.minRow&&u.maxRow&&u.maxRow&&u.maxColumn&&(i._selectCellsRange(u.minRow,u.maxRow,u.minColumn.dataField,u.maxColumn.dataField),u.row=u.minRow,u.rowId=u.row.id,u.column=u.minColumn,u.endColumn=u.maxColumn,u.endRow=u.maxRow,u.endRowId=u.maxRow.id,u.cellValues=y,i._resizeSelectionRect(),i.selection.allowCellDragSelectionAutoFill&&i._pasteSelectedCells({row:u.row,endRow:u.endDragRow,column:u.column,endColumn:u.endColumn},y)),u.endDragColumn=null,u.endDragRow=null,u.minColumn=null,u.minRow=null,u.maxColumn=null,u.maxRow=null},u.onDown=function(y){if(u.captured&&!p){let x=y.clientX,D=y.clientY;y.touches&&(x=y.touches[0].clientX,D=y.touches[0].clientY),p={left:x,top:D}}};const v={down:"pointerdown",move:"pointermove",up:"pointerup"};Smart.Utilities.Core.isMobile&&(v.down="touchstart",v.move="touchmove",v.up="touchend"),u["on"+v.down]=function(y){const x=u.getBoundingClientRect();let D=y.clientX,T=y.clientY;y.touches&&(D=y.touches[0].clientX,T=y.touches[0].clientY),D>=x.right-5&&T>=x.bottom-5?(u.captured=!0,u.endDragRow=u.endRow,u.endDragColumn=u.endColumn):i.selection.allowCellDragDropSelectionHandle&&T>=x.bottom-5?(u.captured=!0,u.capturedDrag=!0,u.endDragRow=u.endRow,u.endDragColumn=u.endColumn,u.left=u.endColumn.left-u.column.left,u.top=u.endRow.top-u.row.top):u.captured||i._rowDownHandler(y)},document.addEventListener(v.move,u.onMove,{passive:!1}),document.addEventListener(v.up,u.onUp,{passive:!1}),document.addEventListener(v.down,u.onDown,{passive:!1})}}const s=i._selection.selectionRect;s.row=i.rowById[i._selection.focusedCell.id],s.rowId=i._selection.focusedCell.id,s.column=i.columnByDataField[i._selection.focusedCell.dataField],s.endRow=n,s.endRowId=n.id,s.endDragRow=n,s.endColumn=a,s.endDragColumn=a,i._refreshCellSelectionRect()}}_resizeSelectionRect(){const e=this,t=e._selection.selectionRect;if(!t)return;let n=e._recyclingRows,a=t.row,i=t.endDragRow,o=t.column,r=t.endDragColumn;const l=e.viewColumns,s=n.indexOf(a),c=n.indexOf(i),u=n.indexOf(t.endRow),p=l.indexOf(o),g=l.indexOf(r),b=l.indexOf(t.endColumn),v=Math.min(u,Math.min(s,c)),y=Math.max(u,Math.max(s,c)),x=Math.min(b,Math.min(p,g)),D=Math.max(b,Math.max(p,g));t.minRow=u<=Math.min(s,c)?t.endRow:s<=c?a:i,t.maxRow=u>=Math.max(s,c)?t.endRow:s>=c?a:i,t.minColumn=b<=Math.min(p,g)?t.endColumn:p<=g?o:r,t.maxColumn=b>=Math.max(p,g)?t.endColumn:p>=g?o:r;let T=0,M=0,A=0,B=0;for(let O=v;O<=y;O++){const N=n[O];if(N){O===v&&(T=N.top),O===y&&(M=N.top+N.height-T);for(let P=x;P<=D;P++){const Y=N.getCell(l[P].dataField);P===x&&(A=Y.column.left),P===D&&(B=Y.column.left+Y.column.computedWidth-A)}}}t.style.top=T-e.scrollTop-1+"px",e._isVirtualMode()&&(t.style.top=T+parseFloat(e.$.rowContainer.style.top)-1+"px"),e.rightToLeft?t.style.right=A-e.scrollLeft+"px":t.style.left=A-e.scrollLeft+"px",t.style.height=M+1+"px",t.style.width=B+1+"px"}_getPatternValue(e,t,n){let a=[],i=0,o=[],r=[],l=[],s=[];const c={names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},u={names:["January","February","March","April","May","June","July","August","September","October","November","December",""],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]},p=function(b){if(void 0!==b&&!(b.toString().indexOf("GMT+")>=0||b.toString().indexOf("GMT-")>=0)){if(!isNaN(parseFloat(b)))return/[A-Za-z]/.test(b.toString())?void 0:parseFloat(b);if(c.names.indexOf(b)>=0)return s=c.names,c.names.indexOf(b);if(c.namesAbbr.indexOf(b)>=0)return s=c.namesAbbr,c.namesAbbr.indexOf(b);if(c.namesShort.indexOf(b)>=0)return s=c.namesShort,c.namesShort.indexOf(b);if(u.names.indexOf(b)>=0)return s=u.names,u.names.indexOf(b);if(u.namesAbbr.indexOf(b)>=0)return s=u.namesAbbr,u.namesAbbr.indexOf(b);if(void 0!==b&&(null===b&&(b=""),/\d+/.test(b.toString()))){l.push(b.toString().replace(/[0-9]/,"#")),l[l.length-1]=l[l.length-1].replace(/[0-9]/g,"");const v=parseFloat(b.toString().replace(/\D/g,""));return isNaN(v)?0:v}}};let g=0;for(let b in n){let v=n[b];a[i]=[],g=0;for(let D in v){let T=p(v[D]);void 0!==T&&(a[i].push(T),g++)}if(0===a[i].length)continue;let y=a[i][0],x=0;for(let D=0;D<a[i].length;D++){let T=p(a[i][D-1]),M=p(a[i][D]);0===D&&(T=M),y+=M,x+=M-T}y/=a[i].length,y-=a[i][0],y+=a[i][a[i].length-1],0!==x&&(x/=a[i].length-1),(s.length>0||l.length>0)&&(x=1,y=a[i][0]),a[i].length<=2&&(y=a[i][a[i].length-1]+x),o.push({step:x,stepStart:y}),i++}for(let b=0;b<g;b++){let v=a[0][b],y=0;for(let x=1;x<a.length;x++){const D=p(a[x-1][b]),T=p(a[x][b]);v+=T,y+=T-D}v/=a.length,v-=a[0][b],v+=a[a.length-1][b],0!==y&&(y/=a.length-1),(s.length>0||l.length>0)&&(y=1,v=a[0][b]),a.length<=2&&(v=a[a.length-1][b]+y),r.push({step:y,stepStart:v})}if(!a[e]){let b=a.length;for(let v=b;v<=e;v++){a[v]=[];for(let y=0;y<=t;y++)r[y]||(r[y]=r[y-1]),r[y]&&(v===b?a[v][y]=r[y].stepStart:(a[v][y]=a[v-1][y]+r[y].step,s.length>1&&a[v][y]>=s.length&&(a[v][y]=0)))}return s.length>0?s[a[e][t]]:l.length>0?l[e%l.length].replace("#",a[e][t]):a[e][t]}if(!a[e][t]){let b=g;for(let v=b;v<=t;v++)o[e]&&(v===b?a[e].push(o[e].stepStart):(a[e][v]=a[e][v-1]+o[e].step,s.length>1&&a[e][v]>=s.length&&(a[e][v]=0)));return s.length>0?s[a[e][t]]:l.length>0?l[e%l.length].replace("#",a[e][t]):a[e][t]}return a[e]&&a[e][t]?l.length>0?l[e%l.length].replace("#",a[e][t]):a[e][t]:0}_pasteDataType(e){const a=e.value;let i=e.cell.column.dataType;return i&&!(this.dataSource&&"number"==typeof this.dataSource.dataSource)||(i=isNaN(parseFloat(a))?"string":a instanceof Date?"date":"true"===a||"false"===a?"boolean":"number"),i}_pasteModeCopy(e){const t=this,n=t.dataSource&&"number"==typeof t.dataSource.dataSource,a=t._pasteDataType(e),i=e.cell,o=e.value,r=e.dataField;let l=o,s=!1;if("string"===a)l=o,s=!0;else if("bool"===a||"boolean"===a)1!==o&&"1"!==o&&!0!==o&&"true"!==o&&"TRUE"!==o&&"True"!==o||(l=!0,s=!0);else if("date"===a||"time"===a||"dateTime"===a){const c=t.columnByDataField[r];n?(l=o,s=!0):c&&c.dataType!==a?(l=null,s=!0):(l=o,s=!0)}else if("number"===a||"float"===a||"int"===a){const c=t.columnByDataField[r];n?(l=o,s=!0):c&&c.dataType!==a?(l=null,s=!0):null!==o?"int"===a||"integer"===a?(l=parseInt(o),s=!0):(l=parseFloat(o),isNaN(l)&&(l=null),s=!0):(l=null,s=!0)}if(s)if(t.dataSource&&t.dataSource.virtualDataSource){const c={};c[i.column.dataField]=l,t.updateRow(i.row.id,c)}else{const c=i.value;if(t.onCellUpdate)t.onCellUpdate(i,c,l,function(u){u&&(i.value=l)});else if(t.onRowUpdate){const u=Object.assign({},i.row.data),p=Object.assign({},i.row.data);p[i.column.dataField]=l,t.onRowUpdate(i.row.index,i.row,u,p,function(g){g&&(i.value=l)})}else i.value=l}}_pasteModeFill(e){const t=this,n=t.dataSource&&"number"==typeof t.dataSource.dataSource,a=t._pasteDataType(e),i=e.cell,o=e.selectedValues,r=e.minRowIndex,l=e.minColumnIndex,s=e.currentRowIndex,c=e.currentColumnIndex,u=e.dataField;let p=e.value;if("string"===a)/\d+/.test(p.toString())?(p=t._getPatternValue(s-r,c-l,o),void 0===p&&o[s-r]&&o[s-r][c-l]&&(p=o[s-r][c-l])):(p=t._getPatternValue(s-r,c-l,o),p=void 0===p&&o[s-r]?o[s-r][c-l]:e.value),void 0!==p&&(i.value=p);else if("bool"===a||"boolean"===a)1!==p&&"1"!==p&&!0!==p&&"true"!==p&&"TRUE"!==p&&"True"!==p||(i.value=!0);else if("date"===a||"time"===a||"dateTime"===a){const g=t.columnByDataField[u];n?i.value=p:g&&g.dataType!==a&&(i.value=null),o[s-r]&&(p=o[s-r][c-l],void 0!==p&&(i.value=p))}else if("number"===a||"float"===a||"int"===a){p=t._getPatternValue(s-r,c-l,o);const g=t.columnByDataField[u];i.value=n?p:g&&g.dataType!==a?null:null!==p?"int"===a||"integer"===a?parseInt(p):parseFloat(p):null}}_pasteSelectedCells(e,t){const n=this;n.beginUpdate();let a=n._recyclingRows,o=e.endRow,r=e.column,l=e.endColumn;const s=a.indexOf(e.row),c=a.indexOf(o),u=a.indexOf(e.endRow),p=n.viewColumns,g=p.indexOf(r),b=p.indexOf(l),v=p.indexOf(e.endColumn),y=Math.min(u,Math.min(s,c)),x=Math.max(u,Math.max(s,c)),D=Math.min(v,Math.min(g,b)),T=Math.max(v,Math.max(g,b));let M=0,A=0,B=0,O=0;for(let N in t)0===M&&(A+=Object.keys(t[N]).length),M++;for(let N=y;N<=x;N++){const P=a[N];B=0;for(let V=D;V<=T;V++){const Y=p[V].dataField,K=P.getCell(Y);let W=0;for(let Z in t){if(W===O){let te=0,re=t[Z];for(let C in re){if(B===te){let d=re[C],m=!0;if(t[P.id]&&t[P.id][Y]&&(m=!1),m&&"none"!==n.clipboard.autoFillMode){const h={value:d,oldValue:K.value,dataField:C,id:Z};n.clipboard.onPasteValue?(n.clipboard.onPasteValue(h),K.value=h.value):(h.cell=K,h.selectedValues=t,h.minRowIndex=y,h.maxRowIndex=x,h.minColumnIndex=D,h.maxColumnIndex=T,h.currentColumnIndex=V,h.currentRowIndex=N,"copy"===n.clipboard.autoFillMode?n._pasteModeCopy(h):"fillSeries"===n.clipboard.autoFillMode&&n._pasteModeFill(h))}}te++}}W++}B++,B>=A&&(B=0)}O++,O>=M&&(O=0)}n.endUpdate(!1),n._recycle(!1)}_refreshCellSelectionRect(){const e=this,t=e._selection.selectionRect;if(!t||t&&t.captured)return;let n=e._recyclingRows,a=t.row,i=t.endRow,o=t.column,r=t.endColumn;const l=e.viewColumns;if(e._isVirtualMode()){if(a.id!==t.rowId&&!e.rowById[t.rowId])return t.style.height="0px",void(t.style.width="0px");a=e.rowById[t.rowId],i=e.rowById[t.endRowId]}if(!o.allowSelect||!r.allowSelect){if(o===r)return t.style.width="0px",void(t.style.height="0px");{const V=l.indexOf(o),Y=l.indexOf(r);o=null,r=null;for(let K=V;K<Y;K++){const W=l[K];W.allowSelect&&!o&&(o=W),r=W}if(!o||!r)return t.style.width="0px",void(t.style.height="0px")}}const s=n.indexOf(a),c=n.indexOf(i),u=l.indexOf(o),p=l.indexOf(r);let g=Math.min(s,c),b=Math.max(s,c),v=Math.min(u,p),y=Math.max(u,p);v=Math.max(0,v),g=Math.max(0,g);const x=function(V){const Y=n.indexOf(V.row),K=n.indexOf(V.endRow),W=l.indexOf(V.column),Z=l.indexOf(V.endColumn);g=Math.min(g,Y),g=Math.min(g,K),g=Math.max(0,g),b=Math.max(b,Y),b=Math.max(b,K),v=Math.min(v,W),v=Math.min(v,Z),v=Math.max(0,v),y=Math.max(y,W),y=Math.max(y,Z)},D=e._getParentCell(a,o.dataField),T=e._getParentCell(a,r.dataField),M=e._getParentCell(i,r.dataField),A=e._getParentCell(i,o.dataField);D&&x(D),T&&x(T),M&&x(M),A&&x(A);let B=0,O=0,N=0,P=0;t.cellValues=[];for(let V=g;V<=b;V++){const Y=n[V];if(V===g&&(B=Y.top,!0!==Y.freeze&&"near"!==Y.freeze&&(B+=e.__frozenNearHeight),"far"===Y.freeze&&(B=Y.top+e.__scrollHeight+e.scrollTop-e._scrollView.hScrollBar.offsetHeight)),V===b){let W=Y.top;"far"===Y.freeze&&(W=Y.top+e.__scrollHeight+e.scrollTop-e._scrollView.hScrollBar.offsetHeight),O=W+Y.height-B,!0!==Y.freeze&&"near"!==Y.freeze&&(O+=e.__frozenNearHeight)}t.cellValues[Y.id]=[];const K=e._isUpdating;e._isUpdating=!0;for(let W=v;W<=y;W++){const Z=l[W].dataField,te=Y.getCell(Z);if(t.cellValues[Y.id][Z]=te.value,W===v&&(N=te.column.left,te.column.freeze&&"far"===te.column.freeze&&(N=e.__clientSize.width-e.__frozenFarWidth+N+e.scrollLeft-e._scrollView.vScrollBar.offsetWidth)),W===y){let re=te.column.left;te.column.freeze&&"far"===te.column.freeze&&(re=e.__clientSize.width-e.__frozenFarWidth+re+e.scrollLeft-e._scrollView.vScrollBar.offsetWidth),P=re+te.column.computedWidth-N}te.selected=!0}e._isUpdating=K}t.style.top=B-e.scrollTop-1+"px",e._isVirtualMode()&&(t.style.top=B+parseFloat(e.$.rowContainer.style.top)-1+"px"),e.rightToLeft?t.style.right=N-e.scrollLeft+"px":t.style.left=N-e.scrollLeft+"px",t.style.height=O+1+"px",t.style.width=P+1+"px"}_renderInputOverlay(e,t,n){const a=this,i=a.rowById[e];if(i&&!1!==i.allowSelect&&!i.label&&t&&a.selection.checkBoxes.enabled){a._inputOverlay&&a._inputOverlay.classList.contains("smart-input-overlay-column")&&(a._inputOverlay.parentNode&&a._inputOverlay.parentNode.removeChild(a._inputOverlay),a._inputOverlay=null),a._inputOverlay||(a._inputOverlay=document.createElement("div"),a.$.scrollView.appendChild(a._inputOverlay),a._inputOverlay.classList.add("smart-input-overlay"));let o=i.freeze?i.top:a.__frozenNearHeight+i.top;const r=Math.round((i.cellHeight-a._selectionColumn.computedWidth)/2);if(a._inputOverlay.style.left=a._selectionColumn.element.parentElement.offsetLeft+a._selectionColumn.element.offsetLeft+"px",a._inputOverlay.style.height=a._selectionColumn.computedWidth+"px",a._inputOverlay.style.width=a._selectionColumn.computedWidth+"px",a._inputOverlay.style.top=o+r-a.scrollTop+"px",i&&i.element){const s=i.element.querySelector("smart-grid-cell");s&&(a._inputOverlay.cell=s.cell)}a._inputOverlay.row=i,a._inputOverlay.onpointerdown=function(s){a._inputOverlay||(a._inputOverlay.onpointerdown=null);const c=a._inputOverlay.row,u=a._inputOverlay.cell;a.beginUpdate(),c.selected=!c.selected,a.endUpdate(!1),a.$.fireEvent("change",{started:!1,finished:!0});const p=s.originalEvent?s.originalEvent:s,g=3===p.which;a.$.fireEvent("rowClick",{row:c,id:c.id,isRightClick:g,originalEvent:p,pageX:p.pageX,pageY:p.pageY}),u&&a.$.fireEvent("cellClick",{cell:u,id:c.id,dataField:u.column.dataField,isRightClick:g,originalEvent:p,pageX:p.pageX,pageY:p.pageY}),a._recycle(),a._renderInputOverlay(c.id,s,!0)},a.appearance.allowCheckBoxesSelectionAnimation&&void 0===n&&a._inputOverlay.classList.add("smart-animate"),requestAnimationFrame(()=>{a._inputOverlay&&a._inputOverlay.classList.add("smart-input-overlay-on")})}}_selectRow(e,t){const n=this,a=n.rowById[e];if(a&&n.selection.enabled&&(!a.header||"row-resize"!==a.header.style.cursor)){if(t&&(!t.shiftKey||!n._selection.focusedCell)){const i=a.getCell(n.columns[0].dataField);n._selection.focusedCell={index:i.row.index,id:e,dataField:i.column.dataField,value:i.value}}n._lastRowsSelectionRange=null,"extended"===n.selection.mode?n._handleExtendedRowSelection(a,t):a.selected="one"===n.selection.mode||!a.selected}}_getParentCell(e,t){const n=this;let a=n._recyclingRows;for(let i=0;i<n._cellsMerge.length;i++){const o=n._cellsMerge[i];let r=[],l=[];if(r.push(o.row),o.rowSpan>1){const s=a.indexOf(o.row);if(s>=0)for(let c=s;c<s+o.rowSpan;c++)a[c]&&-1===r.indexOf(a[c])&&r.push(a[c])}if(l.push(o.column.dataField),o.colSpan>1){const s=n.viewColumns,c=s.indexOf(n.columnByDataField[o.column.dataField]);for(let u=c;u<c+o.colSpan;u++)s[u]&&-1===s.indexOf(s[u].dataField)&&s.push(s[u].dataField)}if(r.indexOf(e)>=0&&l.indexOf(t)>=0)return{row:o.row,column:o.column,endRow:r[r.length-1],endColumn:n.columnByDataField[l[l.length-1]]}}return null}_selectCellsRange(e,t,n,a){const i=this,o=i._selection.selectionRect;if(i._lastRowsSelectionRange&&i._lastRowsSelectionRange.id===e.id&&i._lastRowsSelectionRange.endId===t.id&&i._lastColumnSelectionRange&&i._lastColumnSelectionRange.dataField===n&&i._lastColumnSelectionRange.endDataField===a)return;i.beginUpdate(),i._clearSelection(),i._lastRowsSelectionRange={id:e.id,endId:t.id},i._lastColumnSelectionRange={dataField:n,endDataField:a},(!o||o&&!o.captured)&&i._selection.focusedCell&&i._renderCellSelectionRect(i.rowById[i._selection.focusedCell.id],i.columnByDataField[i._selection.focusedCell.dataField],i.rowById[i._lastRowsSelectionRange.endId],i.columnByDataField[i._lastColumnSelectionRange.endDataField]);let r=i._recyclingRows;const l=i.viewColumns;let s=-1,c=l.length,u=r.indexOf(e),p=r.indexOf(t);for(let M=0;M<l.length;M++){const A=l[M];A.allowSelect&&(A.dataField===n&&(s=M),A.dataField===a&&(c=M))}let g=Math.min(u,p),b=Math.max(u,p),v=Math.min(s,c),y=Math.max(s,c);const x=function(M){const A=r.indexOf(M.row),B=r.indexOf(M.endRow),O=l.indexOf(M.column),N=l.indexOf(M.endColumn);g=Math.min(g,A),g=Math.min(g,B),b=Math.max(b,A),b=Math.max(b,B),v=Math.min(v,O),v=Math.min(v,N),y=Math.max(y,O),y=Math.max(y,N)},D=i._getParentCell(e,n),T=i._getParentCell(t,a);if(D&&x(D),T&&x(T),b<0||g<0||v<0||y<0)return i.endUpdate(!1),void i._recycle();for(let M=g;M<=b;M++){const A=r[M];if(A.allowSelect)for(let B=0;B<l.length;B++){const O=l[B];O.allowSelect&&B>=v&&B<=y&&(A.getCell(O.dataField).selected=!0)}}i.endUpdate(!1),i._recycle()}_selectRowsRange(e,t,n){const a=this;if(a._lastRowsSelectionRange&&a._lastRowsSelectionRange.id===e.id&&a._lastRowsSelectionRange.endId===t.id||a._dragDrop&&a._dragDrop.dragDetails)return;a.beginUpdate(),a._clearSelection(),a._lastRowsSelectionRange={id:e.id,endId:t.id};let i=a._recyclingRows;const o=i.indexOf(e),r=i.indexOf(t),l=Math.min(o,r),s=Math.max(o,r);if(s<0)return a.endUpdate(!1),void a._recycle();for(let c=l;c<=s;c++){const u=i[c];u&&u.allowSelect&&(u.selected=!1!==n)}a.endUpdate(!1),a._recycle()}_selectColumnsRange(e,t){const n=this;if(n._lastColumnSelectionRange&&n._lastColumnSelectionRange.dataField===e&&n._lastColumnSelectionRange.endDataField===t||n._dragDrop&&n._dragDrop.dragDetails)return;n.beginUpdate(),n._clearSelection(),n._lastColumnSelectionRange={dataField:e,endDataField:t};const a=n.viewColumns;let i=-1,o=a.length;for(let s=0;s<a.length;s++){const c=a[s];c.allowSelect&&(c.dataField===e&&(i=s),c.dataField===t&&(o=s))}const r=Math.min(i,o),l=Math.max(i,o);for(let s=0;s<a.length;s++){const c=a[s];c.allowSelect&&s>=r&&s<=l&&(c.selected=!0)}n.endUpdate(!1),n._recycle()}_selectColumn(e,t){const n=this,a=n.columnByDataField[e],i=n.viewColumns;if(!a||!n.selection.enabled||!1===a.allowSelect||!n.selection.allowColumnHeaderSelection||a&&"col-resize"===a.element.style.cursor)return;let o=!1;if(a&&(a.allowSelect||null===a.allowSelect&&!t)&&(o=!0),o&&t)if("extended"===n.selection.mode){if(t.ctrlKey||t.metaKey||t.shiftKey||(n._rangeSelectionStartColumn=a,n._rangeSelectionEndColumn=a),a.selected=!0,t&&t.shiftKey){n._rangeSelectionStartColumn||(n._rangeSelectionStartColumn=a),n._rangeSelectionEndColumn=a,n._selection.columns=[];const r=i.indexOf(n._rangeSelectionStartColumn),l=i.indexOf(n._rangeSelectionEndColumn),s=Math.min(r,l),c=Math.max(r,l);for(let u=s;u<=c;u++){const p=i[u];!1!==p.allowSelect&&(p.selected=!0)}}}else a.selected="one"===n.selection.mode||null===a.selected||!a.selected}selectAllRows(){const e=this;let t=e.rows;e._selectionColumn._selecting=!0,e.beginUpdate();for(let n=0;n<t.length;n++)t[n].selected=!0;e._selectionColumn._selecting=!1,e.endUpdate(!1),e._recycle(!1),e._refreshCheckBoxColumnSelection(),e.$.fireEvent("change",{started:!1,finished:!0})}hasSelectedRows(){const e=this.getVisibleRows(),t=this._getSelectedRows(!0,!1);return t.length===e.length||t.length>0&&t.length<e.length||0!==t.length&&0!==e.length&&void 0}areAllRowsSelected(){const e=this.getVisibleRows(),t=this._getSelectedRows(!0,!1);return t.length>0&&t.length===e.length}_getSelectedRows(e,t){const n=this,a=[];let i=n.rows;n.rows.canNotify=!1,e&&(i=n.getVisibleRows()),n.paging.enabled&&t&&(i=n._isVirtualMode()?i.slice(0,n.paging.pageSize):i.slice(n.paging.pageIndex*n.paging.pageSize,(n.paging.pageIndex+1)*n.paging.pageSize));for(let o=0;o<i.length;o++){const r=i[o];r.getProperty("selected")?a.push(r):(r.canNotify=!1,r.selected=!1,r.canNotify=!0)}return n.rows.canNotify=!0,a}_dragSelectionEnd(e){const t=this;t._dragSelectionStartDataField=null,t._dragSelectionStartRow=null,t.__selectionStarted&&(t.$.fireEvent("change",{started:!1,finished:!0,originalEvent:e}),delete t.__selectionStarted,delete t.__selectionStartedFired),t.selection.allowDragSelection&&t.selection.isDragging&&(t.selection.isDragging=!1,t._autoScrollSelectionDragInterval&&(clearInterval(t._autoScrollSelectionDragInterval),t.editing.isEditing||t._recycle()))}_dragSelection(e){const t=this;if("extended"!==t.selection.mode||!1===t.selection.allowDragSelection||!t._dragSelectionStartDataField&&!t._dragSelectionStartRow)return;const n=()=>{t.__selectionStarted&&!t.__selectionStartedFired&&(t.$.fireEvent("change",{started:!0,finished:!1,originalEvent:e}),t.__selectionStartedFired=!0),t.$.fireEvent("change",{started:!1,finished:!1,originalEvent:e})};if(!t.selection.allowCellSelection||!t._dragSelectionStartDataField||t._columnResizeLine||t._dragSelectionStartDataField.startsWith("_")||!t._dragSelectionStartRow||t._rowResizeLine){if(t._dragSelectionStartRow&&!t._rowResizeLine&&(t.selection.allowRowSelection&&!t._dragSelectionStartDataField.startsWith("_")||t.selection.allowRowHeaderSelection&&t._dragSelectionStartDataField.startsWith("_"))){const a=(t.enableShadowDOM?t.shadowRoot:t.getRootNode()).elementsFromPoint(e.clientX,e.clientY);let i=null;for(let r=0;r<a.length;r++){const l=a[r];if(l.getAttribute("data-id")){i=l.row,!i&&l.cell&&(i=l.cell.row);break}}let o=!0;t._lastRowsSelectionRange&&t._lastRowsSelectionRange.id===t._dragSelectionStartRow.id&&i&&t._lastRowsSelectionRange.endId===i.id&&(o=!1),i&&!i.allowSelect&&(o=!1),i&&i.allowSelect&&t._selectRowsRange(t._dragSelectionStartRow,i),t._autoScrollSelectionDragInterval&&clearInterval(t._autoScrollSelectionDragInterval),t.selection.isDragging=!0,o&&n(),t._autoScrollSelectionDragInterval=setInterval(function(){const r=t.$.scrollView.getBoundingClientRect();e.clientY<=r.top+20?t.scrollTop-=15:e.clientY>=r.top+r.height-20&&(t.scrollTop+=15)},5)}else if(t._dragSelectionStartDataField&&!t._columnResizeLine&&!t._dragSelectionStartDataField.startsWith("_")&&t.selection.allowColumnHeaderSelection){const a=(t.enableShadowDOM?t.shadowRoot:t.getRootNode()).elementsFromPoint(e.clientX,e.clientY);let i=null;for(let r=0;r<a.length;r++){const l=a[r];if(l.getAttribute("data-field")){i=l.getAttribute("data-field");break}}i&&t._selectColumnsRange(t._dragSelectionStartDataField,i),t._autoScrollSelectionDragInterval&&clearInterval(t._autoScrollSelectionDragInterval);let o=!0;t._lastColumnSelectionRange&&t._lastColumnSelectionRange.dataField===t._dragSelectionStartDataField&&t._lastColumnSelectionRange.endDataField===i&&(o=!1),o&&n(),t.selection.isDragging=!0,t._autoScrollSelectionDragInterval=setInterval(function(){const r=t.$.scrollView.getBoundingClientRect();e.clientX<=r.left+20?t.scrollLeft-=15:e.clientX>=r.left+r.width-20&&(t.scrollLeft+=15)},5)}}else{const a=(t.enableShadowDOM?t.shadowRoot:t.getRootNode()).elementsFromPoint(e.clientX,e.clientY);let i=null;for(let r=0;r<a.length;r++){const l=a[r];if(l.getAttribute("data-field")){i=l.getAttribute("data-field");break}}let o=null;for(let r=0;r<a.length;r++){const l=a[r];if(l.getAttribute("data-id")){o=l.row;break}}if(i&&o){if(o.id===t._dragSelectionStartRow.id&&t._dragSelectionStartDataField===i)return;let r=!0;t._lastRowsSelectionRange&&t._lastRowsSelectionRange.id===t._dragSelectionStartRow.id&&t._lastRowsSelectionRange.endId===o.id&&t._lastColumnSelectionRange&&t._lastColumnSelectionRange.dataField===t._dragSelectionStartDataField&&t._lastColumnSelectionRange.endDataField===i&&(r=!1),t._selectCellsRange(t._dragSelectionStartRow,o,t._dragSelectionStartDataField,i),t._removeCellContentPopup(),r&&n()}t.selection.allowDragSelectionAutoScroll&&(t._autoScrollSelectionDragInterval&&clearInterval(t._autoScrollSelectionDragInterval),t.selection.isDragging=!0,t._autoScrollSelectionDragInterval=setInterval(function(){const r=t.$.scrollView.getBoundingClientRect();e.clientX<=r.left+20?t.scrollLeft-=15:e.clientX>=r.left+r.width-20&&(t.scrollLeft+=15),e.clientY<=r.top+20?t.scrollTop-=15:e.clientY>=r.top+r.height-20&&(t.scrollTop+=15)},5))}}select(e,t){const n=this;n.isInitialized&&(!t&&void 0!==e&&n._selection&&n._selection.rows[e]||(n._setSelection(e,t),n.$.fireEvent("change",{started:!1,finished:!0})))}selectRowsByIndex(e){const t=this;e||(e=[]),requestAnimationFrame(()=>{"extended"!==t.selection.mode&&"many"!==t.selection.mode&&t._clearSelection(),t.beginUpdate();for(let n in e){const a=t.rows[n];a&&t._setSelection(a.id)}t.endUpdate(!1),t._recycle()})}selectRowsRange(e,t){const n=this,a=n.rowById[e],i=n.rowById[t];a&&i&&(n._selectRowsRange(a,i),n.$.fireEvent("change",{started:!1,finished:!0}))}selectRows(e){const t=this;e||(e=[]),requestAnimationFrame(()=>{"extended"!==t.selection.mode&&"many"!==t.selection.mode&&t._clearSelection(),t.beginUpdate();for(let n in e)t._setSelection(e[n]);t.endUpdate(!1),t._recycle()})}selectRange(e,t,n,a){const i=this;(function(){const o=new KeyboardEvent("keydown",{shiftKey:!0});requestAnimationFrame(()=>{"extended"!==i.selection.mode&&"many"!==i.selection.mode&&i._clearSelection(),i.beginUpdate(),i._setSelection(e,t),i._setSelection(n,a,o),i.ensureVisible(e,t),i.endUpdate(!1),i._recycle()})})(),i.$.fireEvent("change",{started:!1,finished:!0})}unselect(e,t){const n=this;n._selection&&(n._selection.rows&&n._selection.rows[e]&&delete n._selection.rows[e],n._selection.columns&&n._selection.columns[t]&&delete n._selection.columns[t],n._selection.cells&&(n._selection.cells["row"+e]&&(delete n._selection.cells["row"+e][t],1===Object.getOwnPropertyNames(n._selection.cells["row"+e]).length&&delete n._selection.cells["row"+e]),n._selection.cells["column"+t]&&(delete n._selection.cells["column"+t][e],1===Object.getOwnPropertyNames(n._selection.cells["column"+t]).length&&delete n._selection.cells["column"+t])),n.$.fireEvent("change",{started:!1,finished:!0}))}getSelectedRows(){const e=this;let t=[];if(e._selection.rows&&Object.keys(e._selection.rows).length>0){const n=Object.keys(e._selection.rows);for(let a in n){const o=e.rowById[n[a]];if(!o)continue;const r={};for(let l in o.data)switch(l){case"$":case"parent":case"level":case"leaf":case"children":continue;default:r[l]=o.data[l]}t.push([o.id,r])}}return t}getSelectedRowIds(){const e=this;let t=[];if(e._selection.rows&&Object.keys(e._selection.rows).length>0){const n=Object.keys(e._selection.rows);for(let a in n){const o=e.rowById[n[a]];o&&t.push(o.id)}}return t}getSelectedCells(){const e=this;let t=[];if(e._selection.cells)for(let n in e._selection.cells)if(n.startsWith("row")){let a=n.replace("row",""),i=null;for(let o in e._selection.cells[n]){i=o.replace("column",""),t||(t=[]);const r=e.getCellValue(a,i);t.push([a,i,r])}}return t}getSelection(){const e=this;let t=null,n=null,a=null,i=null;if(e._selection.rows&&Object.keys(e._selection.rows).length>0){const o=Object.keys(e._selection.rows);t=[];for(let r=0;r<o.length;r++){const l=o[r];t.push({id:l,row:e.rowById[l]})}}if(e._selection.columns&&Object.keys(e._selection.columns).length>0){const o=Object.keys(e._selection.columns);n=[];for(let r=0;r<o.length;r++){const l=o[r];n.push({dataField:l,column:e.columnByDataField[l]})}}if(e._selection.cells)for(let o in e._selection.cells)if(o.startsWith("row")){let r=o.replace("row",""),l=null;for(let s in e._selection.cells[o])l=s.replace("column",""),a||(a=[]),a.push({id:r,dataField:l,column:e.columnByDataField[l],row:e.rowById[r]})}return e._selection.focusedCell&&(e._isVirtualMode(),i={index:e._selection.focusedCell.index,id:e._selection.focusedCell.id,dataField:e._selection.focusedCell.dataField}),{rows:t,columns:n,cells:a,focused:i}}_clearSelection(e){const t=this;if(t._selection.rows=[],t._selection.columns=[],t._selection.cells=[],e&&(t._selection.focusedCell=null,t._selection.selectionRect)){const n=t._selection.selectionRect;n.parentNode.removeChild(n);const a={down:"pointerdown",move:"pointermove",up:"pointerup"};Smart.Utilities.Core.isMobile&&(a.down="touchstart",a.move="touchmove",a.up="touchend"),document.removeEventListener(a.move,n.onMove),document.removeEventListener(a.up,n.onUp),document.removeEventListener(a.down,n.onDown),t._selection.selectionRect=null}t._recycle(),t._refreshCheckBoxColumnSelection()}_getSelectionCellValues(){const e=this;if(e._selection.selectionRect)return e._selection.selectionRect.cellValues;const t=e.viewColumns;if(e._selection.rows.length>0){let n=[];for(let a in e._selection.rows){const i=e.rowById[a];for(let o=0;o<t.length;o++){const r=t[o];r&&(n[a]||(n[a]=[]),n[a][r.dataField]=i.data[r.dataField])}}return n}if(e._selection.columns.length>0){let n=[];for(let a in e._selection.columns){const i=e.columnByDataField[a];if(i)for(let o=0;o<e._recyclingRows.length;o++){const r=e._recyclingRows[o];r&&(n[r.id]||(n[r.id]=[]),n[r.id][i.dataField]=r.data[i.dataField])}}return n}if(e._selection.cells&&Object.keys(e._selection.cells).length>0){const n=e.getSelection();if(n.cells){let a=[];for(let i in n.cells){const o=n.cells[i],r=o.id;a[r]||(a[r]=[]),a[r][o.column.dataField]=o.row.data[o.column.dataField]}return a}}}_clipboardHandler(e,t){const n=this;if(n.clipboard.enabled){if((t.ctrlKey||t.metaKey)&&("c"===e||"x"===e)){const a=n._getSelectionCellValues();let i="",o=Object.keys(a).length,r=0;for(let l in a){let s="",c=Object.keys(a[l]).length,u=0;for(let p in a[l])s+=a[l][p],u++,u<c&&(s+="\t");if(i+=s,r++,r<o&&(i+="\r\n"),"x"===e){const p=n.getSelection();if(p.cells){n.beginUpdate();for(let g=0;g<p.cells.length;g++){const b=p.cells[g],v=n.rowById[b.id];if(v){const y=v.getCell(b.dataField),x=n._pasteDataType({cell:y,value:y.value});let D=null;"int"!==x&&"number"!==x||(D=0),"string"===x&&(D=""),"boolean"!==x&&"bool"!==x||(D=!1),"date"===x&&(D=new Date),y.column.allowNull&&(D=null);const T=y.oldValue;if(n.onCellUpdate)n.onCellUpdate(y,T,D,function(M){M&&(y.value=D)});else if(n.onRowUpdate){const M=Object.assign({},y.row.data),A=Object.assign({},y.row.data);A[y.column.dataField]=D,n.onRowUpdate(y.row.index,y.row,M,A,function(B){B&&(y.value=D)})}else y.value=D}}n.endUpdate(!1),n._recycle()}}}if(navigator.clipboard&&navigator.clipboard.writeText)navigator.clipboard.writeText(i).then(function(){},function(){});else{const l=document.createElement("textarea");l.value=i,l.style.position="fixed",l.style.left="-999999px",l.style.top="-999999px",document.body.appendChild(l),l.focus(),l.select(),setTimeout(()=>{document.execCommand("copy"),l.remove(),n._clipboardText=i},100)}}if((t.ctrlKey||t.metaKey)&&"v"===e){if(navigator.clipboard&&!navigator.clipboard.readText)return;const a=i=>{const o=[],r=i.split("\r");for(let s=0;s<r.length;s++){const c=r[s].split("\t");let u={};for(let p=0;p<c.length;p++)u[p]=c[p].trim();o[s]=u}const l=n._selection.selectionRect;if(l)n._pasteSelectedCells({row:l.row,endRow:l.endDragRow,column:l.column,endColumn:l.endColumn},o);else{let s=null,c=null;for(let u in n._selection.rows){const p=n.rowById[u];s||(s=p),c||(c=p),s.visibleIndex>p.visibleIndex&&(s=p),c.visibleIndex<p.visibleIndex&&(c=p)}s&&c&&n._pasteSelectedCells({row:s,endRow:c,column:n.firstColumn(),endColumn:n.lastColumn()},o)}};if(!window.isSecureContext)return void a(n._clipboardText);navigator.clipboard.readText().then(i=>{a(i)})}}}_keyDownHandler(e){const t=this;if(t.onKey&&(t.onKey(e),e.defaultPrevented))return;let n=e.key;if(t.disabled||0===t.dataSource.length||t.disabled||t.displayLoadingIndicator||t.editing.editRow||t.editing.editCell||t.filtering.filterRow.cell)return;t.rightToLeft&&("ArrowLeft"===n?n="ArrowRight":"ArrowRight"===n&&(n="ArrowLeft")),t._refreshCellSelectionRect();const a=t.getSelection();let i=a.focused;if(!a.focused){if(t.editing.enabled&&!0!==t.editing.isEditing&&("F2"===n||"Enter"===n)&&a.columns&&a.columns.length>0){const l=a.columns[a.columns.length-1];l.column.allowHeaderEdit&&t._beginColumnEdit(l.column)}return void(t.menu&&t.menu.classList.contains("open")&&"Escape"===n&&t.closeMenu())}if(e.shiftKey&&" "===n){const l=t.rowById[i.id];if(l){const s=l.getCell(i.dataField);if(s)return void s.autoWrap()}}const o=t._getParentCell(t.rowById[i.id],i.dataField);if(o&&("ArrowLeft"===n?(i.id=o.row.id,i.dataField=o.column.dataField):"ArrowRight"===n?(i.id=o.row.id,i.dataField=o.endColumn.dataField):"ArrowUp"===n?(i.id=o.row.id,i.dataField=o.column.dataField):"ArrowDown"===n&&(i.id=o.endRow.id,i.dataField=o.column.dataField)),t._selection.selectionRect&&e.shiftKey&&!e.ctrlKey&&!e.metaKey?(t._selection.selectionRect.endRow&&(i.id=t._selection.selectionRect.endRow.id),t._selection.selectionRect.endColumn&&(i.dataField=t._selection.selectionRect.endColumn.dataField)):t.selection.allowRowSelection&&!t.selection.allowCellSelection&&void 0!==t._rangeSelectionEndRow&&(i.id=t._rangeSelectionEndRow.id),t._clipboardHandler(n,e),((e.ctrlKey||e.metaKey)&&"x"!==n&&"c"!==n&&"v"!==n&&"Control"!==n||"Tab"===n)&&(t._selection.rows=[],t._selection.columns=[],t._selection.cells=[]),"Escape"===n)return t.closeMenu(),t.cancelEdit(),void t._setSelection(i.id,i.dataField,e);if(t.hasMenu())return;if(e.altKey){if("ArrowDown"===n){const l=t.columnByDataField[i.dataField];l&&t.hasColumnMenu(l)&&(l.showActionButton=!0,l.onAction(),t.menu&&t.menu.querySelector("smart-menu").$.dispatch(e))}else"ArrowUp"===n&&t.closeMenu();if("s"===n.toLowerCase()){const l=t.columnByDataField[i.dataField];l&&t.sortBy(l.dataField,l.sorted?"asc"===l.sortOrder?"desc":null:"asc")}if("g"===n.toLowerCase()){const l=t.columnByDataField[i.dataField];l&&(l.group=!l.group)}return}const r=function(l,s){const c=(u,p)=>{if("extended"!==t.selection.mode&&"many"!==t.selection.mode&&t._clearSelection(!0),"many"===t.selection.mode){if(" "===e.key)t._setSelection(u,p,e);else{const g=t.rowById[u].getCell(p);t._selection.focusedCell={id:g.row.id,value:g.value,dataField:p,index:g.row.index}}return t.ensureVisible(u,p),void t._recycle()}t.beginUpdate(),t._setSelection(u,p,e),t.ensureVisible(u,p),t.endUpdate(!1),t._recycle(),e.shiftKey?t.__selectionStarted&&!t.__selectionStartedFired?(t.$.fireEvent("change",{started:!0,finished:!1}),t.__selectionStartedFired=!0):t.$.fireEvent("change",{started:!1,finished:!1}):t.$.fireEvent("change",{started:!1,finished:!0})};if(t._isVirtualMode()){t._keyboardNavigationTimer&&clearTimeout(t._keyboardNavigationTimer);const u=T=>{for(let M=0;M<t.rows.length;M++){const A=t.rows[M];if(A.index===T)return A.id}return null},p=JSON.parse(JSON.stringify(t._selection.focusedCell));t._selection.focusedCell.index=l,t._selection.focusedCell.dataField=s;const g=t.rows[0],b=g.height,v=l;if(-1===v)return;const y=t._scrollView.hScrollBar,x="virtual"!==t.scrolling?g.top:v*b;let D=0;if(t.paging.enabled||(x+y.offsetHeight+t.__frozenNearHeight>t._scrollView.scrollTop+t.$.scrollView.offsetHeight-t.__frozenFarHeight?(t._scrollView.scrollTop=x-t.$.scrollView.offsetHeight-t.__frozenFarHeight+y.offsetHeight,D=50):x<=t._scrollView.scrollTop&&(t._scrollView.scrollTop=x,D=50)),t._onDataUpdated||(t._onDataUpdated=()=>{t._recycle();const T=u(t._selection.focusedCell.index);t.rowById[T]?c(T,t._selection.focusedCell.dataField):t.paging.enabled&&(t._selection.focusedCell=p),t._onDataUpdated=null}),t.paging.enabled){const T=u(t._selection.focusedCell.index);t.rowById[T]?c(T,t._selection.focusedCell.dataField):t._selection.focusedCell=p}else t._keyboardNavigationTimer=setTimeout(()=>{const T=u(t._selection.focusedCell.index);t.rowById[T]&&c(T,t._selection.focusedCell.dataField)},D)}else requestAnimationFrame(()=>{c(l,s)}),e.stopPropagation(),e.preventDefault()};switch(n){case"Tab":{if("none"===t.selection.tabKeyBehavior)return;const l=e.shiftKey?t.prevColumn(i.dataField):t.nextColumn(i.dataField);if(l&&t.selection.allowCellSelection){const s=t.rowById[i.id].getCell(l.dataField);t._selection.focusedCell={id:s.row.id,value:s.value,dataField:l.dataField,index:s.row.index},t._setSelection(i.id,l.dataField,e),t.focus(),e.stopPropagation(),e.preventDefault()}else{let s=e.shiftKey?t.prevRow(i.id):t.nextRow(i.id),c=e.shiftKey?t.lastColumn().dataField:t.firstColumn().dataField;if(t.editing.addNewRow.autoCreate&&!e.shiftKey&&i.id===t.lastRow().id&&(t.addUnboundRow(1),s=t.lastRow()),!s)return;e.shiftKey&&(t._selection.focusedCell=null),r(t._isVirtualMode()?s.index:s.id,c)}break}case" ":case"F2":{const l=t.rowById[i.id];if(!l||t.editing.editCell)return;" "===n&&t.dataSource.boundHierarchy&&(l.checked=!l.checked),t.editing.enabled?(t._beginEdit(l,i.dataField),setTimeout(function(){if(t.editing.editCell&&t.editing.editCell.column.dataType.indexOf("bool")>=0){const s=t.editing.editCell.editor.instance,c=s.getValue();" "===n&&s.setValue(!c)}},50)):t.selection.enabled&&"many"===t.selection.mode&&r(i.id,i.dataField);break}case"Delete":case"Backspace":{const l=t.rowById[i.id];if(!l||t.editing.editCell)return;const s=l.getCell(i.dataField),c=s.value;if(a.cells){t.beginUpdate();for(let u=0;u<a.cells.length;u++){const p=a.cells[u],g=t.rowById[p.id];if(g){const b=g.getCell(p.dataField);if(!b.column.allowEdit)continue;const v=t._pasteDataType({cell:b,value:b.value});let y=null;"int"!==v&&"number"!==v||(y=0),"string"===v&&(y=""),"boolean"!==v&&"bool"!==v||(y=!1),"date"===v&&(y=new Date),b.column.allowNull&&(y=null);const x=b.value;if(t.dataSource&&t.dataSource.virtualDataSource){const D={};D[b.column.dataField]=y,t.updateRow(b.row.id,D)}else if(t.onCellUpdate)t.onCellUpdate(b,x,y,function(D){D&&(b.value=y)});else if(t.onRowUpdate){const D=Object.assign({},b.row.data),T=Object.assign({},b.row.data);T[b.column.dataField]=y,t.onRowUpdate(b.row.index,b.row,D,T,function(M){M&&(b.value=y)})}else b.value=y}}t.endUpdate(!1),t._recycle()}"Backspace"===n&&(t._beginEdit(l,i.dataField),s.canNotify=!1,s.value=c,s.canNotify=!0);break}default:if(t.editing.enabled&&!t.editing.editCell&&!e.ctrlKey&&!e.metaKey&&!e.altKey&&!t.editing.editRow){const l=t.rowById[i.id];if(!l||["F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12","Shift","Up","Down","Left","Right","Control","F2","Esc"," ","Home","End","PageUp","PageDown"].indexOf(n)>=0)return;t._beginEdit(l,i.dataField),setTimeout(function(){if(t.editing.editCell)t.editing.editCell.editor.instance.setValue(n);else if(t.editing.editRow){const s=t.editing.editRow.getCell(i.dataField);if(!s)return;s.editor.instance.setValue(n)}},50)}break;case"Home":{const l=t.firstRow();if(t.paging.enabled&&e.shiftKey)return t.firstPage(),e.stopPropagation(),void e.preventDefault();if(!l)return;r(l.id,i.dataField);break}case"End":{if(t.paging.enabled&&e.shiftKey)return t.lastPage(),e.stopPropagation(),void e.preventDefault();const l=t.lastRow();if(!l)return;r(l.id,i.dataField);break}case"PageUp":{const l=t._recyclingRows,s=t.rowById[i.id],c=l.indexOf(s);if(t.paging.enabled&&e.shiftKey)return t.prevPage(),e.stopPropagation(),void e.preventDefault();if(t._isVirtualMode()){const u=Math.round(t.$.scrollView.offsetHeight/t.rows[0].height);r(Math.max(i.index-u,0),i.dataField)}else{for(let u=c;u>=0;u--){const p=l[u];if(s.top-p.top>=t.$.scrollView.offsetHeight)return void r(p.id,i.dataField)}r(t.firstRow().id,i.dataField)}break}case"PageDown":{const l=t._recyclingRows,s=t.rowById[i.id],c=l.indexOf(s);if(t.paging.enabled&&e.shiftKey)return t.nextPage(),e.stopPropagation(),void e.preventDefault();if(t._isVirtualMode()){const u=Math.round(t.$.scrollView.offsetHeight/t.rows[0].height);r(Math.min(i.index+u,t.dataSource.virtualDataSourceLength-1),i.dataField)}else{for(let u=c;u<l.length;u++){const p=l[u];if(p.top-s.top>=t.$.scrollView.offsetHeight)return void r(p.id,i.dataField)}r(t.lastRow().id,i.dataField)}break}case"ArrowDown":case"Enter":if(t._isVirtualMode())r(e.ctrlKey||e.metaKey?t.lastRow():i.index+1,i.dataField);else{let l=e.ctrlKey||e.metaKey?t.lastRow():t.nextRow(i.id);if(t.editing.addNewRow.autoCreate&&"Enter"===n&&i.id===t.lastRow().id&&(t.addUnboundRow(1),l=t.lastRow()),!l)return;r(l.id,i.dataField)}break;case"ArrowUp":if(t._isVirtualMode())r(e.ctrlKey||e.metaKey?t.lastRow():Math.max(0,i.index-1),i.dataField);else{const l=e.ctrlKey||e.metaKey?t.firstRow():t.prevRow(i.id);if(!l)return;r(l.id,i.dataField)}break;case"ArrowRight":{const l=t.rowById[i.id],s=t.columnByDataField[i.dataField]._treeColumn;if((!t.selection.allowCellSelection||s)&&!1===l.leaf){if(!l.expanded)return l.expand(),e.stopPropagation(),void e.preventDefault();{const u=t.nextRow(i.id);if(u)return void r(u.id,i.dataField)}}const c=e.ctrlKey||e.metaKey?t.lastColumn():t.nextColumn(i.dataField);if(!c)return;r(t._isVirtualMode()?i.index:i.id,c.dataField);break}case"ArrowLeft":{const l=t.rowById[i.id],s=t.columnByDataField[i.dataField]._treeColumn;if(!t.selection.allowCellSelection||s){if(!1===l.leaf)return void(l.expanded?(l.collapse(),e.stopPropagation(),e.preventDefault()):l.parent&&r(l.parent.id,i.dataField));if(!0===l.leaf&&l.parent)return void r(l.parent.id,i.dataField)}const c=e.ctrlKey||e.metaKey?t.firstColumn():t.prevColumn(i.dataField);if(!c)return;r(t._isVirtualMode()?i.index:i.id,c.dataField);break}}["Shift","Up","Down","Left","Right","Control","F2","Esc"," ","Home","End","PageUp","PageDown"].indexOf(n)<0||(e.stopPropagation(),e.preventDefault())}_keyUpHandler(e){const t=this;"Escape"===e.key&&t.dragDrop&&t._endDrag(e),t._focused&&"Shift"===e.key&&t.$.fireEvent("change",{started:!1,finished:!0})}firstRow(){const e=this._recyclingRows;if(this._isVirtualMode())return{id:0};if(e&&e.length>0){if(!e[0].autoGenerated&&e[0].allowSelect)return e[0];for(let t=0;t<e.length;t++)if(!e[t].autoGenerated&&e[t].allowSelect)return e[t]}return null}lastRow(){const e=this,t=e._recyclingRows;if(e._isVirtualMode())return{id:e.dataSource.virtualDataSourceLength-1};if(t&&t.length>0){const n=t[t.length-1];if(!n.autoGenerated&&n.allowSelect)return n;for(let a=t.length-1;a>=0;a--)if(!t[a].autoGenerated&&t[a].allowSelect)return t[a]}return null}nextRow(e){const t=this._recyclingRows,a=t.indexOf(this.rowById[e]);if(a>=0&&t[a+1]&&!t[a+1].autoGenerated){const i=t[a+1];if(i.allowSelect&&!i.disabled)return i;for(let o=a+1;o<t.length;o++){const r=t[o];if(r.allowSelect&&!r.disabled)return r}}return null}_isVirtualMode(){const e=this;return e.dataSource&&e.dataSource.virtualDataSource&&!e.dataSource.virtualDataSourceOnExpand&&e.dataSource.length>e.virtualModeCachedRowsCount&&"infinite"!==e.scrolling}prevRow(e){const t=this,n=t._recyclingRows,a=t.rowById[e],i=n.indexOf(a);if(t._isVirtualMode())return 0===e?null:{id:a.index-1};if(i>=0&&n[i-1]&&!n[i-1].autoGenerated){const o=n[i-1];if(o.allowSelect&&!o.disabled)return o;for(let r=i-1;r>=0;r--){const l=n[r];if(l.allowSelect&&!l.disabled)return l}}return null}firstColumn(){const e=this.viewColumns;if(e&&e.length>0)for(let t=0;t<e.length;t++){const n=e[t];if(n.allowSelect&&!n.autoGenerated)return n}return null}lastColumn(){const e=this.viewColumns;if(e&&e.length>0)for(let t=e.length-1;t>=0;t--){const n=e[t];if(n.allowSelect&&!n.autoGenerated)return n}return null}nextColumn(e){const t=this.viewColumns,a=t.indexOf(this.columnByDataField[e]);return t[a+1]&&!t[a+1].autoGenerated?t[a+1]:null}prevColumn(e){const t=this.viewColumns,a=t.indexOf(this.columnByDataField[e]);return t[a-1]&&!t[a-1].autoGenerated?t[a-1]:null}isVisible(e,t){const n=this,a=n._scrollView.vScrollBar,i=n._scrollView.hScrollBar,r=n.columnByDataField[t];return{row:function(l){if(!l)return!1;const s=l.visibleIndex;if(-1===s)return!1;let u=l.top;return n.dataSource&&n.dataSource.virtualDataSource&&!n.dataSource.virtualDataSourceOnExpand&&n.dataSource.length>n.virtualModeCachedRowsCount&&"infinite"!==n.scrolling&&(u=s*n.rows[0].height),!(u+l.height+i.offsetHeight+n.__frozenNearHeight>=n._scrollView.scrollTop+n.$.scrollView.offsetHeight-n.__frozenFarHeight||u<=n._scrollView.scrollTop)}(n.rowById[e]),column:(l=r,!!t&&!(-1===l.visibleIndex||l.left+l.computedWidth+a.offsetWidth>=n._scrollView.scrollLeft+n._clientSize.width||l.left<=n._scrollView.scrollLeft))};var l}_ensureRowVisible(e){const t=this,n=t._scrollView.hScrollBar;if(!e)return;const a=e.visibleIndex;if(-1===a)return;const i="virtual"!==t.scrolling?e.top:a*t.rows[0].height;if(i+e.height+n.offsetHeight+t.__frozenNearHeight>=t._scrollView.scrollTop+t.$.scrollView.offsetHeight-t.__frozenFarHeight&&(t._scrollView.scrollTop=i+e.height-t.$.scrollView.offsetHeight-t.__frozenFarHeight+n.offsetHeight),i<=t._scrollView.scrollTop&&(t._scrollView.scrollTop=i),t.paging.enabled){const r=Math.floor(a/t.paging.pageSize);if(t.paging.pageIndex!==r)return t.goToPage(r),t._scrollView.scrollTop=0,void setTimeout(()=>{e.top+e.height+n.offsetHeight+t.__frozenNearHeight>=t._scrollView.scrollTop+t.$.scrollView.offsetHeight-t.__frozenFarHeight&&(t._scrollView.scrollTop=e.top+e.height),e.top<=t._scrollView.scrollTop&&(t._scrollView.scrollTop=e.top)},50)}0===a?t._scrollView.scrollTop=0:a===t.dataSource.length-1&&(t._scrollView.scrollTop=t._scrollView.scrollHeight)}_ensureColumnVisible(e){const t=this;if(!e)return;const a=e.visibleIndex;-1!==a&&(e.left+e.computedWidth+t._scrollView.vScrollBar.offsetWidth>=t._scrollView.scrollLeft+t._clientSize.width&&(t._scrollView.scrollLeft=t._scrollView.scrollLeft+e.computedWidth),e.left<=t._scrollView.scrollLeft&&(t._scrollView.scrollLeft=e.left),0===a?t._scrollView.scrollLeft=0:a===t.columns.length-1&&(t._scrollView.scrollLeft=t._scrollView.scrollWidth))}ensureVisible(e,t){const n=this,i=n.columnByDataField[t];n._ensureRowVisible(n.rowById[e]),n._ensureColumnVisible(i)}clearSelection(){const e=this;delete e._rangeSelectionStartRow,delete e._rangeSelectionEndRow,e._clearSelection(!0),e.$.fireEvent("change",{started:!1,finished:!0})}})},3637:()=>{Smart.Utilities.Assign("Grid.Sort",class{clearSort(){const e=this;if(!e._isSorting&&e.dataSource){e._isSorting=!0,e.dataSource.clearSort(),e._sortedColumns||(e._sortedColumns=[]);for(let t=0;t<e._sortedColumns.length;t++){const a=e.columnByDataField[e._sortedColumns[t].dataField];a&&(a.setProperty("sortOrder",null),a.setProperty("sortIndex",null))}e._sortedColumns=[],e.rowById=[];for(let t=0;t<e.dataSource.length;t++){const n=e.rows[t],a=e.dataSource[t];n&&(n.data=a,n.id=a.$.id,e.rowById[n.id]=n)}e._recycle(),e._refreshHeaderBar(),e._isSorting=!1}}getSortedColumns(){const e=this,t=[];if(e._sortedColumns)for(let n=0;n<e._sortedColumns.length;n++){const a=e._sortedColumns[n];t[a.dataField]={sortOrder:a.sortOrder,sortIndex:a.sortIndex},t.length++}return t}addSort(e,t){this.sortBy(e,t)}removeSort(e){this.sortBy(e,null)}refreshSort(){this._refreshSort(this._sortedColumns)}_refreshSort(e){const t=this;if(t._isSorting||!e)return;const n=[],a=[],i=[];t._isSorting=!0;for(let o=0;o<e.length;o++){const r=e[o],l=t.columnByDataField[r.dataField];l&&(l.setProperty("sortOrder",r.sortOrder),n.push(r.dataField),a.push(r.sortOrder),i.push(r.dataType))}(function(){if(t.dataSource&&t.dataSource.virtualDataSource)t._virtualDataRequest("sort");else{if(t.dataSource.sortBy(n,i,a),t.dataSource.boundHierarchy)t._refreshRowHierarchy(),t.dataSource.groupBy.length>0&&(t._refreshRowHierarchy(!0,!0),t.refresh());else{t.rowById=[];for(let o=0;o<t.dataSource.length;o++){const r=t.rows[o],l=t.dataSource[o];r.data=l,r.id=l.$.id,t.rowById[r.id]=r}}t._recycle()}})(),t._refreshHeaderBar(),t._isSorting=!1,t._sortedColumns=e}sortBy(e,t){const n=this,a=n.columnByDataField[e],i=[],o=[],r=[],l=void 0===t;if(n._isSorting||!a)return;n._isSorting=!0,"descending"===t&&(t="desc"),void 0!==t&&"ascending"!==t||(t="asc");const s=function(b){b&&(b.setProperty("sortOrder",null),b.setProperty("sortIndex",null))},c=function(){if(n._sortedColumns.length>0)for(let b=0;b<n._sortedColumns.length;b++)s(n.columnByDataField[n._sortedColumns[b].dataField]);n._sortedColumns=[]};if(null===a)return c(),void(n._isSorting=!1);if(!n.sorting.enabled||!n.dataSource||!a.allowSort||n._sortAnimation)return void(n._isSorting=!1);s(a),n._sortedColumns||(n._sortedColumns=[]);let u="string";for(let b=0;b<n.dataSource.dataFields.length;b++){const v=n.dataSource.dataFields[b];if(v.name===e){u=v.dataType;break}}let p=!0;for(let b=0;b<n._sortedColumns.length;b++){const v=n._sortedColumns[b];if(v.dataField===e)if(p=!1,v.sortIndex=a.sortIndex,l){if("asc"===v.sortOrder)v.sortOrder="desc",t="desc";else if("desc"===v.sortOrder){n.sorting.sortToggleThreeStates?(n._sortedColumns.splice(b,1),s(a),t=null):(v.sortOrder="asc",t="asc");break}}else v.sortOrder=t,null===t&&(n._sortedColumns.splice(b,1),s(a))}p&&("one"===n.sorting.mode&&c(),null!==t&&n._sortedColumns.push({dataField:e,sortOrder:t,sortIndex:a.sortIndex,dataType:u})),a.setProperty("sortOrder",t),n._sortedColumns.sort((b,v)=>"string"==typeof b.sortIndex&&"string"==typeof v.sortIndex?0:"number"==typeof b.sortIndex&&"string"==typeof v.sortIndex?-1:"string"==typeof b.sortIndex&&"number"==typeof v.sortIndex?1:"number"==typeof b.sortIndex&&"number"==typeof v.sortIndex?b.sortIndex-v.sortIndex:void 0);for(let b=0;b<n._sortedColumns.length;b++){const v=n._sortedColumns[b];i.push(v.dataField),o.push(v.sortOrder),r.push(v.dataType)}const g=function(){if(n.dataSource&&n.dataSource.virtualDataSource)n._virtualDataRequest("sort");else{if(n.dataSource.sortBy(i,r,o),n.dataSource.boundHierarchy)n._refreshRowHierarchy(),n.dataSource.groupBy.length>0&&(n._refreshRowHierarchy(!0,!0),n.refresh());else{n.rowById=[];for(let v=0;v<n.dataSource.length;v++){const y=n.rows[v],x=n.dataSource[v];y&&(y.data=x,y.id=x.$.id,n._filters&&n._filters.length>0&&(y.filtered=void 0===y.data.$.filtered||y.data.$.filtered),n.rowById[y.id]=y)}n._filters&&n._filters.length>0&&n.refresh()}n._recycle()}const b=[];for(let v=0;v<n._sortedColumns.length;v++){const y=n.columnByDataField[n._sortedColumns[v].dataField];y&&(y.setProperty("sortIndex",v),b.push(y))}n._refreshHeaderBar(),n.$.fireEvent("sort",{columns:b,data:n._sortedColumns})};if(n.appearance.allowSortAnimation){let b=[],v=[];n.rows.canNotify=!1,n._sortAnimation=!0;const y=function(){for(let x=0;x<n._rowElements.length;x++){const D=n._rowElements[x];D.classList.remove("smart-grid-sort-animation"),n.removeTransformMoveStyle(D),D.offsetHeight>0&&b.push(D.offsetTop)}};y(),n._sortTimer=setTimeout(function(){y(),n._sortAnimation=!1,n.rows.canNotify=!0},n.appearance.sortAnimationDuration),n._sortTimer2=setTimeout(function(){g()},n.appearance.sortAnimationDuration/2);for(let x=0;x<b.length;x++){const D=n._rowElements[x];D.classList.remove("smart-grid-sort-animation"),n.removeTransformMoveStyle(D);let T=Math.floor(Math.random()*b.length-1+1);for(;v[T];)T=Math.floor(Math.random()*b.length-1+1);v[T]=!0,n.addTransformMoveStyle(D,"0ms",0,-D.offsetTop+b[T],0,.5),D.classList.add("smart-grid-sort-animation"),setTimeout(function(){n.addTransformMoveStyle(D,n.appearance.sortAnimationDuration+"ms",0,0,0,1)}),setTimeout(function(){D.classList.remove("smart-grid-sort-animation")},n.appearance.sortAnimationDuration)}}else g();n._isSorting=!1}})},238:()=>{Smart("smart-grid-toolbar",class extends Smart.DataView{template(){return'<div id="container" role="presentation">\n                    <div id="header" class="smart-data-view-header" role="toolbar">\n                        <div id="customizeButton" class="smart-data-view-header-button smart-data-view-customize-button smart-unselectable" role="button" aria-expanded="false" aria-haspopup="dialog" aria-label="Customize cards"><div class="smart-tool-label" role="presentation"></div></div>\n                        <div id="filterButton" class="smart-data-view-header-button smart-data-view-filter-button smart-unselectable" role="button" aria-expanded="false" aria-haspopup="dialog" aria-label="Filter"><div class="smart-tool-label" role="presentation"></div></div>\n                        <div id="sortButton" class="smart-data-view-header-button smart-data-view-sort-button smart-unselectable" role="button" aria-expanded="false" aria-haspopup="dialog" aria-label="Sort"><div class="smart-tool-label" role="presentation"></div></div>\n                        <div id="groupButton" class="smart-data-view-header-button smart-data-view-group-button smart-unselectable" role="button" aria-expanded="false" aria-haspopup="dialog" aria-label="Group"><div class="smart-tool-label" role="presentation"></div></div>\n                        <div id="formatButton" class="smart-data-view-header-button smart-data-view-format-button smart-unselectable" role="button" aria-expanded="false" aria-haspopup="dialog" aria-label="Format"><div class="smart-tool-label" role="presentation"></div></div>\n                        <div id="deleteButton" class="smart-data-view-header-button smart-data-view-delete-button smart-unselectable" role="button" aria-expanded="false" aria-haspopup="dialog" aria-label="Delete"><div class="smart-tool-label" role="presentation"></div></div>\n                        <div id="downloadButton" class="smart-data-view-header-button smart-data-view-download-button smart-unselectable" role="button" aria-expanded="false" aria-haspopup="dialog" aria-label="Download"><div class="smart-tool-label" role="presentation"></div></div>\n                        <div id="searchButton" class="smart-data-view-header-button smart-data-view-search-button smart-unselectable" role="button" aria-expanded="false" aria-haspopup="dialog" aria-label="Search"></div>\n                        <div id="headerDropDown" owner class="smart-data-view-header-drop-down smart-visibility-hidden" role="dialog">\n                            <div id="customize" class="smart-hidden" role="presentation"></div>\n                            <div id="filter" class="smart-hidden" role="presentation"></div>\n                            <div id="sort" class="smart-hidden" role="presentation"></div>\n                            <div id="group" class="smart-hidden" role="presentation"></div>\n                            <div id="format" class="smart-hidden" role="presentation"></div>\n                            <div id="search" class="smart-data-view-search-box smart-hidden" role="presentation">\n                                <input type="text" id="searchInput" spellcheck="false" aria-label="Search" />\n                                <div id="searchLabel" class="smart-data-view-search-label smart-unselectable"></div>\n                                <div id="searchPrev" class="smart-data-view-search-prev" role="button" aria-label="Previous"></div>\n                                <div id="searchNext" class="smart-data-view-search-next" role="button" aria-label="Next"></div>\n                                <div id="searchClose" class="smart-data-view-search-close" role="button" aria-label="Close search box"></div>\n                            </div>\n                        </div>\n                    </div>\n                </div>'}refreshTools(){const e=this;if(e.isRendered&&e.grid&&(e.grid.offsetWidth<600?e.querySelectorAll(".smart-tool-label").forEach(t=>{t.classList.add("smart-hidden")}):e.querySelectorAll(".smart-tool-label").forEach(t=>{t.classList.remove("smart-hidden")}),e.refreshHeaderDropDownPosition(),e.grid)){const t=e.grid;if(t.dataSource&&t.dataSource.boundSource){const n=t.dataSource&&t.dataSource.virtualDataSource&&!t.dataSource.virtualDataSourceOnExpand&&t.dataSource.length>t.virtualModeCachedRowsCount&&"infinite"!==t.scrolling;if(e.dataSource&&t.dataSource&&e.dataSource.length!==t.dataSource.length||n){const a=Array.isArray(t.dataSource.boundSource)?t.dataSource.boundSource:t.dataSource.boundSource.toArray();e.dataSource=new Smart.DataAdapter({observable:!1,dataSource:[...a],dataFields:t.dataSource.dataFields})}(a=>{const i=a?"add":"remove";e.$.filterButton.classList[i]("smart-disabled"),e.$.sortButton.classList[i]("smart-disabled"),e.$.groupButton.classList[i]("smart-disabled"),e.$.formatButton.classList[i]("smart-disabled"),e.$.searchButton.classList[i]("smart-disabled")})(e.dataSource&&0===e.dataSource.length),0===t.columns.length?e.$.customizeButton.classList.add("smart-disabled"):e.$.customizeButton.classList.remove("smart-disabled")}}}get hasStyleObserver(){return!1}render(){const e=this;e._appliedFiltering={filters:[],operator:"and"},e._appliedSorting={dataFields:[],dataTypes:[],orderBy:[]},e._localizeHeader(),e._getInnerElementMessages(),super.render()}openFormatPanel(){const e=this,t=e.dataSource;if(!t||0===t.length||e.disabled||"none"===e.headerPosition)return;let n;if(e._editInfo&&e._editInfo.window.close(),e.$.headerDropDown.classList.add("format-panel"),e.$.headerDropDown.classList.remove("customize-panel","sort-panel","search-panel","filter-panel"),e.$.format.classList.remove("smart-hidden"),e.$.customize.classList.add("smart-hidden"),e.$.sort.classList.add("smart-hidden"),e.$.filter.classList.add("smart-hidden"),e.$.group&&e.$.group.classList.add("smart-hidden"),e.$.search.classList.add("smart-hidden"),e._closeSearchPanel(),e._formatPartCreated)n=e.$.format.firstElementChild,n.rightToLeft=e.rightToLeft;else{n=document.createElement("smart-formatting-panel"),n.animation=e.animation,n.columns=e.columns,n.dataSource=e.dataSource,n.locale=e.locale,n.messages=e._innerElementMessages.formattingPanel,n.rightToLeft=e.rightToLeft,n.theme=e.theme,n.unfocusable=!1,n.ownerElement=e,n.dropDownAppendTo="body",e._formattingPanel=n,e.$.format.appendChild(n);const a=document.createElement("div");a.className="smart-format-panel smart-grid-panel-container-footer",a.setAttribute("role","presentation"),a.innerHTML=`<div id="buttonsContainer" class="smart-grid-panel-buttons-container smart-unselectable" role="presentation"><span class="smart-grid-panel-cancel-button" role="button">${e.localize("cancel")}</span><span class="smart-grid-panel-apply-button" role="button">${e.localize("apply")}</span></div>`,e.$.format.appendChild(a),e._formatPartCreated=!0,a.applyButton=a.querySelector(".smart-grid-panel-apply-button"),a.cancelButton=a.querySelector(".smart-grid-panel-cancel-button"),a.applyButton.onclick=()=>{n.$.fireEvent("apply"),e.grid._conditionalFormattingChanged=!0,e.grid._conditionalFormatting=n.apply(),e.grid.conditionalFormatting=n.getItems(),e.grid._recycle(!1),e.grid._conditionalFormattingChanged=!1},a.cancelButton.onclick=()=>{n.$.fireEvent("cancel")},e.grid.conditionalFormatting&&(n.items=e.grid.conditionalFormatting)}n.focus(),e._openHeaderDropDown(e.$.formatButton)}_openHeaderDropDown(e){const t=this;t.$.headerDropDown.parentElement!==document.body&&(document.body.appendChild(t.$.headerDropDown),t.$.headerDropDown.addEventListener("apply",n=>{const a=t._getDropDownType();t._applyHandler(n),t.grid.$.fireEvent("batchChange",{type:a})}),t.$.headerDropDown.addEventListener("cancel",()=>{const n=t._getDropDownType();t.closePanel(),t.grid.$.fireEvent("batchCancel",{type:n})})),super._openHeaderDropDown(e),t.refreshHeaderDropDownPosition(e)}refreshHeaderDropDownPosition(e){const t=this;!t.$.headerDropDown||t.$.headerDropDown&&!t.$.headerDropDown.classList.contains("open")?t._dropDownTarget=e:(e?t._dropDownTarget=e:t._dropDownTarget&&(e=t._dropDownTarget),t.$.headerDropDown.style.top=t.grid.offset(t.grid).top+t.grid.$.header.offsetHeight+"px",t.grid.offsetWidth<600&&t.$.headerDropDown.offsetWidth>t.grid.offsetWidth?(t.$.headerDropDown.style.width="90%",t.$.headerDropDown.style.left=t.grid.offset(t.grid).left+"px"):(t.$.headerDropDown.style.width="",(()=>{if(e){const a=t.grid.offset(e);t.$.headerDropDown.style.left=a.left+t.$.headerDropDown.offsetWidth<document.body.scrollLeft+document.body.offsetWidth?a.left+"px":document.body.scrollLeft+document.body.offsetWidth-t.$.headerDropDown.offsetWidth+"px"}else t.$.headerDropDown.style.left=t.grid.offset(t.grid).left+"px"})()))}openFilterPanel(e){const t=this,n=t.dataSource,a=this.columns.map(i=>{const o=Object.assign({},i),r=n.dataFields.find(l=>l.name===o.dataField);return r&&(o.dataType=r.dataType),o}).filter(i=>i.allowFilter);if(super.openFilterPanel(a,null),e){const i=t.$.headerDropDown.querySelector("smart-multi-column-filter-panel");i.$.itemsContainer.appendChild(i._createItem(t.columns.find(r=>r.dataField===e.dataField),"string"===e.dataType?"CONTAINS":"EQUAL",""));const o=i.querySelectorAll(".smart-grid-panel-item");setTimeout(()=>{o[o.length-1].querySelector(".editor").focus()},50)}}openSortPanel(){const e=this,t=e.dataSource,n=e.columns.map(r=>{const l=Object.assign({},r),s=e._appliedSorting.dataFields.indexOf(l.dataField),c=t.dataFields.find(u=>u.name===l.dataField);return c&&(l.dataType=c.dataType,l.sortIndex=s,-1!==s&&(l.sortDirection=e._appliedSorting.orderBy[s])),l}).filter(r=>r.allowSort);super.openSortPanel(n);const a=e.$.headerDropDown.querySelector("smart-sort-panel");if(!a)return;const i=a.$.inputNotSorted,o=()=>{const r=a.querySelectorAll(".smart-grid-panel-item");"many"===e.grid.sorting.mode||r.length<1?i.classList.remove("smart-visibility-hidden"):r.length>=1&&i.classList.add("smart-visibility-hidden")};a.onDataSourceChange=()=>{o()},o()}openCustomizePanel(){const e=this;if(e.disabled||"none"===e.headerPosition)return;e._refreshColumns();const t=e.$.customize,n=e.columns.map(i=>{const o={};return o.visible=i.visible,o.label=i.label,o.dataField=i.dataField,o.disableToggle=-1!==[e.coverField,e.titleField].indexOf(o.dataField),i.allowHide||(o.disableToggle=!0),o});let a;if(e._closeDialog(),e.$.headerDropDown.classList.add("customize-panel"),e.$.headerDropDown.classList.remove("filter-panel","sort-panel","search-panel","group-panel","format-panel"),t.classList.remove("smart-hidden"),e.$.filter.classList.add("smart-hidden"),e.$.sort.classList.add("smart-hidden"),e.$.search.classList.add("smart-hidden"),e.$.group.classList.add("smart-hidden"),e.$.format.classList.add("smart-hidden"),e._closeSearchPanel(),e._customizePartCreated)a=t.querySelector("smart-column-panel"),a.set("dataSource",n),a.propertyChangedHandler("dataSource",void 0,n),a.rightToLeft=e.rightToLeft;else{const i=document.createDocumentFragment(),o=document.createElement("smart-column-panel");o.rightToLeft=e.rightToLeft,o.animation=e.animation,o.dataSource=n,o.locale=e.locale,o.messages=e._innerElementMessages.columnPanel,o.theme=e.theme,i.appendChild(o),e.$.customize.appendChild(i),e._customizePartCreated=!0}e._changedVisibility=new Map,e._openHeaderDropDown(e.$.customizeButton)}_applyFilter(e,t){const n=this;n.grid.beginUpdate(),n.grid.context=n.grid,n.grid.clearFilter();for(let a=0;a<e.length;a++){const i=e[a];n.grid.columnByDataField[i[0]].filter=i[1]}n.grid._filterOperator=t,n.grid.endUpdate(),n.grid.refreshFilters(),n.grid.context=document}_applySort(){const e=this,t=e._appliedSorting;e.grid.beginUpdate(),e.grid.context=e.grid,e.grid.clearSort();for(let n=0;n<t.dataFields.length;n++)e.grid.sortBy(t.dataFields[n],t.orderBy[n]);e.grid.endUpdate(),e.grid.context=document}_getDropDownType(){const e=this;let t=null;return e.$.headerDropDown.classList.contains("filter-panel")?t="filter":e.$.headerDropDown.classList.contains("sort-panel")?t="sort":e.$.headerDropDown.classList.contains("search-panel")?t="search":e.$.headerDropDown.classList.contains("group-panel")?t="group":e.$.headerDropDown.classList.contains("format-panel")?t="format":e.$.headerDropDown.classList.contains("customize-panel")&&(t="customize"),t}_applyHandler(e){const t=this,n=e.target,a=e.detail;t.$.customize.contains(n)?t._applyColumns(a.value,a.moves):t.$.filter.contains(n)?t.addFilter(a.filters,a.operator,a.value):t.$.sort.contains(n)&&t.addSort(a.sortByInfo),t.closePanel()}_documentUpHandler(e){const t=this;let n=e.originalEvent.target;const a=t.grid.$.header;if(t.shadowRoot&&n===t&&(n=e.originalEvent.composedPath()[0]),!("none"===t.headerPosition||t.$.headerDropDown.classList.contains("smart-visibility-hidden")||t.$.headerDropDown.classList.contains("search-panel")||n!==a&&a.contains(n))){const i=n.closest("smart-scroll-viewer"),o=n.closest(".smart-drop-down");if((!i||!a.contains(i.ownerElement))&&(!o||o.ownerElement&&!a.contains(o.ownerElement))){const r=e.originalEvent.composedPath();for(let l=0;l<r.length;l++){const s=r[l];if(s&&s.classList&&s.classList.contains("smart-data-view-header-drop-down")||s&&s.classList&&s.classList.contains("smart-formatting-panel-popup"))return}if(i&&i.ownerElement){const l=i.ownerElement.parents;for(let s=0;s<l.length;s++){const c=l[s];if(c&&c.classList&&c.classList.contains("smart-data-view-header-drop-down"))return}}if(t.$.headerDropDown.querySelector("[open]"))return;t.closePanel()}}}_refreshColumns(){const e=this.grid;let t=Array.isArray(e.columns)?[...e.columns]:[...e.columns.toArray()],n=new Map;t=t.map(a=>({label:a.label,dataField:a.dataField,dataType:a.dataType||"string",columnGroup:a.columnGroup||null,allowHide:void 0===a.allowHide||a.allowHide,allowSort:void 0===a.allowSort||a.allowSort,allowFilter:void 0===a.allowFilter||a.allowFilter,allowGroup:void 0===a.allowGroup||a.allowGroup,visible:void 0===a.visible||a.visible})),t=JSON.parse(JSON.stringify(t)),t.forEach(a=>{let i=a.columnGroup?a.columnGroup+"."+a.label:a.label,o=1;for(;n.get(i);)i=a.columnGroup?a.columnGroup+"."+a.label+` (${o})`:a.label+` (${o})`,o++;n.set(i,a),a.label=i}),this.columns=t}_init(e){const t=this;if(t.grid=e,e.dataSource&&e.dataSource.boundSource){t._refreshColumns();const n=Array.isArray(e.dataSource.boundSource)?e.dataSource.boundSource:e.dataSource.boundSource.toArray();t.dataSource=new Smart.DataAdapter({observable:!1,dataSource:[...n],dataFields:e.dataSource.dataFields})}t.grid._openRowSettingsDialog=t._openRowSettingsDialog,t.refreshTools(),t.$.headerDropDown.onclick=n=>{t.grid._headerClickHandler(n),n.stopPropagation(),n.preventDefault()},t.grid.removeEventListener("change",t._refreshFromSelection),t.grid.addEventListener("change",t._refreshFromSelection),e.header.onInit&&e.header.onInit(t)}_refresh(){const e=this,t=e.grid;if(t.header.buttons.indexOf("sort")>=0&&t.sorting.enabled?e.$.sortButton.classList.remove("smart-hidden"):e.$.sortButton.classList.add("smart-hidden"),t.header.buttons.indexOf("filter")>=0&&t.filtering.enabled?e.$.filterButton.classList.remove("smart-hidden"):e.$.filterButton.classList.add("smart-hidden"),t.header.buttons.indexOf("group")>=0&&t.grouping.enabled?e.$.groupButton.classList.remove("smart-hidden"):e.$.groupButton.classList.add("smart-hidden"),t.header.buttons.indexOf("columns")>=0?e.$.customizeButton.classList.remove("smart-hidden"):e.$.customizeButton.classList.add("smart-hidden"),t.header.buttons.indexOf("search")>=0?e.$.searchButton.classList.remove("smart-hidden"):e.$.searchButton.classList.add("smart-hidden"),t.header.buttons.indexOf("format")>=0?e.$.formatButton.classList.remove("smart-hidden"):e.$.formatButton.classList.add("smart-hidden"),t.header.buttons.indexOf("delete")>=0?e.$.deleteButton.classList.remove("smart-hidden"):e.$.deleteButton.classList.add("smart-hidden"),t.header.buttons.indexOf("download")>=0?e.$.downloadButton.classList.remove("smart-hidden"):e.$.downloadButton.classList.add("smart-hidden"),t._sortedColumns){const i=[],o=[],r=[];for(let l=0;l<t._sortedColumns.length;l++){const s=t._sortedColumns[l];i.push(s.dataField),o.push(s.sortOrder),r.push(s.dataType)}e._appliedSorting={dataFields:i,dataTypes:r,orderBy:o},e._refreshSortButton()}const n={filters:[],operator:"and"},a=t.getFilteredColumns();if(a)for(let i in a){const o=a[i];for(let r=0;r<o.filters.length;r++){const l=o.filters[r];n.filters.push([i,l.condition,l.value])}}e._appliedFiltering&&(n.operator=e._appliedFiltering.operator),e._appliedFiltering=n,e._refreshFilterButton(),e._appliedGrouping?e._appliedGrouping.dataFields=t.dataSource.groupBy:e._appliedGrouping={dataFields:t.dataSource.groupBy,expandAll:!1,collapseAll:!1},e._refreshGroupButton(),e._refreshDeleteButton(),e.refreshTools()}_openRowSettingsDialog(e){let t=this;t.getSelectedRows||(t=t.grid);const n=t.editing.dialog.enabled,a=t.editing.mode,i=t.context;t.context=t,t.editing.dialog.enabled=!0,t.editing.mode="row",t._settingsDialogRowId=e,t.beginEdit(e),t._endToolbarEdit?(t.removeEventListener("endEdit",t._endToolbarEdit,null),t.removeEventListener("cancelEdit",t._endToolbarEdit,null)):t._endToolbarEdit=()=>{t.context=t,t.editing.dialog.enabled=n,t.editing.mode=a,t.context=i,delete t._settingsDialogRowId,delete t._dialogEdit},t.addEventListener("endEdit",t._endToolbarEdit),t.addEventListener("cancelEdit",t._endToolbarEdit)}_refreshDeleteButton(){let e=this;e.getSelectedRows||(e=e.grid);const t=e.getSelectedRows().length,n=e.querySelector("smart-grid-toolbar").$.deleteButton;0!==t?(n.classList.remove("smart-hidden"),n.firstElementChild.innerHTML=1===t?e.localize("deleteByOne"):e.localize("deleteByMultiple",{n:t}),n.classList.add("selected"),n.onclick=()=>{const a=e.getSelectedRows().map(i=>i[0]);this.grid.removeRow(a)}):n.classList.add("smart-hidden")}_refreshFromSelection(){this.querySelector("smart-grid-toolbar")._refreshDeleteButton()}openGroupPanel(){const e=this;let t;const n=e.grid;e.$.headerDropDown.classList.add("group-panel"),e.$.headerDropDown.classList.remove("customize-panel","filter-panel","sort-panel","search-panel","format-panel"),e.$.group.classList.remove("smart-hidden"),e.$.filter.classList.add("smart-hidden"),e.$.customize.classList.add("smart-hidden"),e.$.sort.classList.add("smart-hidden"),e.$.search.classList.add("smart-hidden"),e.$.format.classList.add("smart-hidden");const a=e.columns.map(i=>{const o=Object.assign({},i);if(e._appliedGrouping&&e._appliedGrouping.dataFields){const r=e._appliedGrouping.dataFields.indexOf(o.dataField);o.groupIndex=r}return o}).filter(i=>i.allowGroup);e._groupPartCreated?(t=e.$.group.firstElementChild,t.rightToLeft=e.rightToLeft,t.dataSource=a):(t=document.createElement("smart-group-panel"),t.rightToLeft=e.rightToLeft,t.animation=e.animation,t.locale=e.locale,t.messages=e._innerElementMessages.groupPanel,t.theme=e.theme,t.dataSource=a,e.$.group.appendChild(t),e._groupPartCreated=!0,t.onExpandAll=()=>{e._appliedGrouping.expandAll=!0,e._appliedGrouping.collapseAll=!1,t.querySelector(".smart-group-panel-expand-button").setAttribute("active",""),t.querySelector(".smart-group-panel-collapse-button").removeAttribute("active")},t.onCollapseAll=()=>{e._appliedGrouping.expandAll=!1,e._appliedGrouping.collapseAll=!0,t.querySelector(".smart-group-panel-collapse-button").setAttribute("active",""),t.querySelector(".smart-group-panel-expand-button").removeAttribute("active")},t.addEventListener("apply",i=>{const o=i.detail.sortByInfo;e._appliedGrouping.dataFields=o.dataFields,n.beginUpdate(),n.clearGroups();for(let r=0;r<o.dataFields.length;r++)n.addGroup(o.dataFields[r]);e._appliedGrouping.expandAll&&n.expandAllRows(),e._appliedGrouping.collapseAll&&n.collapseAllRows(),n.endUpdate(),n.paging.enabled&&n._refreshPagesCount()})),e._refreshGroupButton(),e._openHeaderDropDown(e.$.groupButton)}_refreshGroupButton(){const e=this,t=e._appliedGrouping.dataFields?e._appliedGrouping.dataFields.length:0;if(0===t)return e.$.groupButton.firstElementChild.innerHTML=e.localize("group"),void e.$.groupButton.classList.remove("grouped");e.$.groupButton.firstElementChild.innerHTML=1===t?e.localize("groupedByOne"):e.localize("groupedByMultiple",{n:t}),e.$.groupButton.classList.add("grouped")}openSearchPanel(){this._openSearchPanel()}_openSearchPanel(){const e=this,t=e.grid;e.$.headerDropDown.classList.add("search-panel"),e.$.headerDropDown.classList.remove("customize-panel","filter-panel","sort-panel","group-panel","format-panel"),e.$.search.classList.remove("smart-hidden"),e.$.customize.classList.add("smart-hidden"),e.$.group.classList.add("smart-hidden"),e.$.filter.classList.add("smart-hidden"),e.$.sort.classList.add("smart-hidden"),e.$.format.classList.add("smart-hidden"),e._openHeaderDropDown(e.$.searchButton);const n=[],a=t.getVisibleRows();for(let o=0;o<a.length;o++)n.push(Object.assign(a[o].data));const i=new Smart.DataAdapter({id:"id",observable:!1,dataSource:n,dataFields:t.dataSource.dataFields});e._searchInfo={source:i,stringDataFields:e.dataSource.dataFields.filter(o=>"string"===o.dataType).map(o=>o.name)},""!==e.$.searchInput.value&&e._search(e.$.searchInput.value,!1)}_search(e,t=!0){const n=this;if(n._searchInfo.query=e,""===e)return n.$.search.classList.remove("matches","no-matches"),delete n._searchInfo.foundIdsArray,delete n._searchInfo.foundIdsObject,delete n._searchInfo.highlighted,n.grid.highlighted=null,void n.grid._recycle(!1);const a=n._searchInfo.source,i=[],o=[],r={};n._searchInfo.stringDataFields.forEach(l=>{const s=new Smart.Utilities.FilterGroup,c=s.createFilter("string",e,"CONTAINS");s.addFilter("or",c),i.push([l,s])}),a._filter(i,"or");for(let l=0;l<a.length;l++){const s=a[l];!1!==s.$.filtered&&(o.push(s.$.id),r[s.$.id]=!0)}if(n._searchInfo.foundIdsArray=o,n._searchInfo.foundIdsObject=r,n.grid.highlighted=null,o.length>0)return n.$.search.classList.remove("no-matches"),n.$.search.classList.add("matches"),n.$.searchLabel.innerHTML=n.localize("found",{nth:t?1:0,n:o.length}),n._searchInfo.highlighted=o[0],n.grid.highlighted=n._searchInfo.highlighted,n.grid.ensureVisible(n._searchInfo.highlighted),void n.grid._recycle(!1);n.$.search.classList.remove("matches"),n.$.search.classList.add("no-matches"),n.$.searchLabel.innerHTML=n.localize("found",{nth:0,n:0})}_applyColumns(e,t){const n=this.grid;n.beginUpdate();for(let a in e){const i=e[a];n.columnByDataField[i.dataField].visible=i.visible}for(let a=0;a<t.length;a++){const i=t[a],o=i.oldIndex,r=i.newIndex,l=n.columns[r+1],s=n.columns[r-1],c=n.columns[o];l?c.columnGroup=l.columnGroup:s&&(c.columnGroup=s.columnGroup),n.reorderColumns(o,r,!0)}n.endUpdate()}_conditionalFormattingButtonClickHandler(e,t,n){const a=this;let i;a._formattingPanel?i=a._formattingPanel:(i=document.createElement("smart-formatting-panel"),i.animation=a.animation,i.columns=t||a._columns,i.dataSource=n||a.dataSource,i.locale=a.locale,i.messages=a.messages,i.rightToLeft=a.rightToLeft,i.theme=a.theme,i.unfocusable=!a.keyboardNavigation||a.unfocusable,i.ownerElement=a,a._formattingPanel=i),a.conditionalFormatting&&(i.items=a.conditionalFormatting),i.focus(),a._openDialog(a.localize("conditionalFormatting"),i,"conditional-formatting")}})},3225:()=>{Smart.Utilities.Assign("Grid.Tree",class{_setRowProperty(e,t,n){const a=this.rowById[e];a&&(a[t]=n)}_setRowsProperty(e,t,n){const a=this;a._refreshLayout(),a._refreshRowHierarchy(!0);const i=a._recyclingRows;a.rows.canNotify=!1;for(let o=0;o<i.length;o++){const r=i[o];n&&-1===n.indexOf(r.id)||(r[e]=t)}a.rows.canNotify=!0,a.refresh()}_applyThreeStates(e){const t=this,n=e!==t.rowHierarchy;if(!t.rowHierarchy)return;const a=n?e.children:t.rowHierarchy.filter(r=>{if(0===r.level)return r});let i=0,o=0;for(let r=0;r<a.length;r++){const l=a[r];e.checked&&(l.checked=!0),!1===l.leaf&&t._applyThreeStates(l),n&&(l.checked?i++:null===l.checked&&o++)}n&&(e.checked=i===e.children.length||(0!==i||0!==o)&&!!t.checkBoxes.hasThreeStates&&null)}_hasThreeStates(e,t){const n=this;let a=e;for(e!==t&&(e.checked=!e.checked);a.parent;){const i=a.parent,o=i.children;let r=0,l=0;for(let s=0;s<o.length;s++)o[s].checked?r++:n.checkBoxes.hasThreeStates&&null===o[s].checked&&l++;i.checked=r===i.children.length||(0!==r||0!==l)&&!!n.checkBoxes.hasThreeStates&&null,a=i}e.leaf||function i(o,r){const l=o.children;for(let s=0;s<l.length;s++){const c=l[s];c.checked=r,!1===c.leaf&&i(c,r)}}(e,e.checked)}_expandCollapseGroup(e,t){const n=this;if(!n.grouping.enabled)return;const a=(""+e).split(".");let i=n.rowHierarchy[a[0]];if(!i)return;const o=n.rows.canNotify;n.rows.canNotify=!1,null===t&&(t=!i.expanded),i.expanded=i.data.expanded=t;for(let r=1;r<a.length&&(i=i.children[a[r]],i&&!i.leaf);r++)i.expanded=i.data.expanded=t;n.rows.canNotify=o,n._refresh()}expandRow(e){const t=this;t.grouping.enabled?t._expandCollapseGroup(e,!0):e&&Array.isArray(e)?t._setRowsProperty("expanded",!0,e):t._setRowProperty(e,"expanded",!0)}expandAllRows(){this._setRowsProperty("expanded",!0)}collapseAllRows(){this._setRowsProperty("expanded",!1)}toggleRow(e){const t=this;if(t.grouping.enabled)return void t._expandCollapseGroup(e,null);const n=t.rowById[e];n&&(n.expanded=!n.expanded)}collapseRow(e){const t=this;t.grouping.enabled?t._expandCollapseGroup(e,!1):e&&Array.isArray(e)?t._setRowsProperty("expanded",!1,e):t._setRowProperty(e,"expanded",!1)}checkRow(e){e&&Array.isArray(e)?this._setRowsProperty("checked",!0,e):this._setRowProperty(e,"checked",!0)}uncheckRow(e){e&&Array.isArray(e)?this._setRowsProperty("checked",!1,e):this._setRowProperty(e,"checked",!1)}checkAllRows(){this._setRowsProperty("checked",!0)}uncheckAllRows(){this._setRowsProperty("checked",!1)}})},3176:()=>{Smart("smart-grid-panel",class extends Smart.BaseElement{static get properties(){return{closeButtonPosition:{value:"left",allowedValues:["left","right"],type:"string"},dataSource:{value:[],type:"array",reflectToAttribute:!1},messages:{value:{en:{apply:"Ok",booleanFirst:"\u2610",booleanLast:"\u2611",cancel:"Cancel",dateFirst:"1",dateLast:"9",from:"from",numberFirst:"1",numberLast:"9",stringFirst:"A",stringLast:"Z",thenBy:"then by"}},type:"object",extend:!0}}}static get listeners(){return{change:"_changeHandler",click:"_clickHandler",keydown:"_keydownHandler","sortable.dragEnd":"_sortableDragEndHandler"}}static get requires(){return{"Smart.Input":"smart.input.js","Smart.Sortable":"smart.sortable.js"}}static get styleUrls(){return["smart.gridpanel.css"]}template(){return'<div id="container" role="presentation">\n                    <smart-sortable id="sortable" disable-mode="manual" animation="[[animation]]" disabled="[[readonly]]" right-to-left="[[rightToLeft]]"\n                            drag-mode="handle" handle-position="right" handle-visibility="visible" theme="[[theme]]">\n                    </smart-sortable>\n                    <div id="footer" class="smart-grid-panel-container-footer" role="presentation">\n                        <smart-input id="inputNotSorted" right-to-left="[[rightToLeft]]" animation="[[animation]]" readonly theme="[[theme]]"></smart-input>\n                        <div id="buttonsContainer" class="smart-grid-panel-buttons-container smart-unselectable" role="presentation">\n                            <span class="smart-grid-panel-cancel-button" role="button"></span>\n                            <span class="smart-grid-panel-apply-button primary" role="button"></span>\n                        </div>\n                    </div>\n                </div>'}ready(){super.ready()}render(){const e=this;e.setAttribute("role","dialog"),"right"===e.closeButtonPosition&&(e.$.sortable.handlePosition="left"),e._localize(),e._createSources(),super.render()}propertyChangedHandler(e,t,n){super.propertyChangedHandler(e,t,n);const a=this;switch(e){case"animation":case"theme":Array.from(a.$.sortable.getElementsByTagName("smart-input")).forEach(i=>i[e]=n);break;case"disabled":case"unfocusable":a._setFocusable();break;case"closeButtonPosition":a.$.sortable.handlePosition="right"===a.closeButtonPosition?"left":"right";break;case"dataSource":a.$.sortable.$.container.innerHTML="",a._createSources();break;case"locale":case"messages":{const i=a.$.sortable._items;a._localize(),i.length&&(i[0].children[1].innerHTML=a.localize("firstBy"),i.forEach(function(o,r){0!==r&&(o.children[1].innerHTML=a.localize("thenBy"));const l=a._HTMLToSourceMap.get(o),s=a._ascDescTemplates[l.dataType]||a._ascDescTemplates.string;o.children[3].innerHTML=a.localize("from"),o.children[4].firstElementChild.innerHTML=s[0],o.children[4].children[1].innerHTML=s[1]}));break}case"maxLevel":if(null!=n)for(;a.$.sortable._items.length>0&&a.$.sortable._items.length>n;)a._interactionHandler(a.$.sortable._items[a.$.sortable._items.length-1].firstElementChild);a._disableItemAddition();break;case"rightToLeft":a.$.inputNotSorted.rightToLeft=n,a.$.inputNotSorted.dropDownButtonPosition=n?"left":"right",a.$.sortable._items.forEach(i=>{const o=i.querySelector("smart-input");o.rightToLeft=n,o.dropDownButtonPosition=n?"left":"right"})}}_changeHandler(e){const t=this,n=t.shadowRoot||t.isInShadowDOM?e.composedPath()[0]:e.target;if(t.$.inputNotSorted.contains(n)){const p=t.$.inputNotSorted.value,g=t._labelToSourceMap.get(p);return t._createSortItem(g,t.$.sortable._items.length),t.$.sortable.updateItems(),t._visibleLabels.push(p),t._updateHiddenSource(),t._disableItemAddition(),void(t.$.inputNotSorted.value="")}const a=n.closest("smart-input");if(!a)return;const i=a.parentElement.parentElement,o=i.children[4].firstElementChild,r=i.children[4].children[1],l=a.value,s=t._HTMLToSourceMap.get(i).label,c=t._labelToSourceMap.get(l),u=t._ascDescTemplates[c.dataType]||t._ascDescTemplates.string;t._HTMLToSourceMap.set(i,c),t._visibleLabels.splice(t._visibleLabels.indexOf(s),1,l),t._updateHiddenSource(),o.innerHTML=u[0],r.innerHTML=u[1],c.sortDirection&&-1===c.sortDirection.indexOf("asc")?(r.classList.add("selected"),o.classList.remove("selected")):(o.classList.add("selected"),r.classList.remove("selected"))}_updateHiddenSource(){const e=this;e._hiddenSource=e.dataSource.map(t=>({label:t.label,value:t.dataField,icon:t.icon})).filter(t=>-1===e._visibleLabels.indexOf(t.label)),e.$.inputNotSorted.dataSource=e._hiddenSource,e.$.sortable._items.forEach(t=>t.getElementsByTagName("smart-input")[0].dataSource=e._hiddenSource),e._disableItemAddition(),e.$.fireEvent("dataSourceChange")}_clickHandler(e){const t=this;t._interactionHandler(t.shadowRoot||t.isInShadowDOM?e.composedPath()[0]:e.target,e)}_interactionHandler(e,t){const n=this;if(n.disabled||n.readonly)return!0;const a=e.closest(".smart-grid-panel-item");if(a){if(e===a.firstElementChild){const i=n._HTMLToSourceMap.get(a).label;n.$.sortable.$.container.removeChild(a),n.$.sortable.updateItems(),n._visibleLabels.splice(n._visibleLabels.indexOf(i),1),n._updateHiddenSource(),n._disableItemAddition(),n.$.sortable._items.length&&(n.$.sortable._items[0].children[1].innerHTML=n.localize("firstBy")),n.$.fireEvent("remove")}else if(a.children[4].contains(e)){const i=a.children[4].firstElementChild,o=a.children[4].children[1];"click"===t.type?e.classList.contains("selected")||(e===i?(o.classList.remove("selected"),i.classList.add("selected"),n._HTMLToSourceMap.get(a).sortDirection="ascending"):e===o&&(i.classList.remove("selected"),o.classList.add("selected"),n._HTMLToSourceMap.get(a).sortDirection="descending")):(i.classList.toggle("selected"),o.classList.toggle("selected"),n._HTMLToSourceMap.get(a).sortDirection=i.classList.contains("selected")?"ascending":"descending")}return!0}if(e===n.$.buttonsContainer.firstElementChild)return n.$.fireEvent("cancel"),!0;if(e===n.$.buttonsContainer.children[1]){const i=[],o={dataFields:[],dataTypes:[],orderBy:[]},r={value:i};return n.$.sortable._items.forEach(l=>{const s=n._HTMLToSourceMap.get(l);i.push({dataField:s.dataField,sortDirection:s.sortDirection}),o.dataFields.push(s.dataField),o.dataTypes.push(s.dataType),o.orderBy.push(s.sortDirection)}),(n instanceof Smart.SortPanel||n instanceof Smart.GroupPanel)&&(r.sortByInfo=o),n.$.fireEvent("apply",r),!0}}_keydownHandler(e){const t=this,n=e.key;" "!==n&&"Enter"!==n||(e.preventDefault(),t._interactionHandler((t.shadowRoot||t.getRootNode()).activeElement,e))}_sortableDragEndHandler(e){const t=this,n=e.detail.oldIndex,a=e.detail.newIndex,i=Math.max(n,a),o=t.$.sortable._items;0===(n&&a)&&(o[0].children[1].innerHTML=t.localize("firstBy"),o[1].children[1].innerHTML=t.localize("thenBy"),i>1&&(o[i].children[1].innerHTML=t.localize("thenBy")))}_localize(){const e=this;e.$.inputNotSorted.placeholder=e.localize("pickAnother"),e.$.buttonsContainer.firstElementChild.innerHTML=e.localize("cancel"),e.$.buttonsContainer.children[1].innerHTML=e.localize("apply"),e._ascDescTemplates={boolean:[e.localize("booleanFirst")+" \u2192 "+e.localize("booleanLast"),e.localize("booleanLast")+" \u2192 "+e.localize("booleanFirst")],date:[e.localize("dateFirst")+" \u2192 "+e.localize("dateLast"),e.localize("dateLast")+" \u2192 "+e.localize("dateFirst")],number:[e.localize("numberFirst")+" \u2192 "+e.localize("numberLast"),e.localize("numberLast")+" \u2192 "+e.localize("numberFirst")],string:[e.localize("stringFirst")+" \u2192 "+e.localize("stringLast"),e.localize("stringLast")+" \u2192 "+e.localize("stringFirst")]}}_createSources(){const e=this,t=(e instanceof Smart.SortPanel?"sort":"group")+"Index",n=[],a=[];if(e._HTMLToSourceMap=new Map,e._labelToSourceMap=new Map,e.dataSource.forEach(i=>{e._labelToSourceMap.set(i.label,i),-1!==i[t]&&void 0!==i[t]&&n.push(i)}),n.sort((i,o)=>i[t]-o[t]),null!=e.maxLevel)for(;n.length>0&&n.length>e.maxLevel;)n.pop();e.$.inputNotSorted.dropDownButtonPosition=e.rightToLeft?"left":"right",e.$.inputNotSorted.dropDownHeight=e.$.inputNotSorted.dataSource&&e.$.inputNotSorted.dataSource.length<10&&e.$.inputNotSorted.dataSource.length>0?"auto":250,n.forEach(i=>a.push(i.label)),e._visibleLabels=a,e._updateHiddenSource(),n.forEach((i,o)=>{e._createSortItem(i,o)}),e.$.sortable.updateItems(),e._disableItemAddition(),e._setFocusable()}_createSortItem(e,t){const n=this,a=n.disabled||n.unfocusable?-1:0,i=document.createElement("div"),o=n._ascDescTemplates[e.dataType]||n._ascDescTemplates.string;i.className="smart-grid-panel-item",i.innerHTML=`<div class="smart-grid-panel-item-close-button" tabindex="${a}" role="button" aria-label="Close"></div>\n<div class="smart-grid-panel-label-by smart-unselectable" role="presentation">${n.localize(t>0?"thenBy":"firstBy")}</div>\n<div class="smart-grid-panel-field-container" role="presentation"><smart-input class="smart-grid-panel-field-selection" value="${e.label}" animation="${n.animation}" readonly theme="${n.theme}" aria-label="Field name"></smart-input></div>\n<div class="smart-grid-panel-from smart-unselectable" role="presentation">${n.localize("from")}</div >\n<div class="smart-grid-panel-direction smart-unselectable" tabindex="${a}" role="presentation">\n    <div class="smart-grid-panel-asc" role="button" aria-label="Ascending">${o[0]}</div >\n    <div class="smart-grid-panel-desc" role="button" aria-label="Descending">${o[1]}</div>\n</div>\n`;const r=i.querySelector("smart-input");r.dataSource=n._hiddenSource,r.rightToLeft=n.rightToLeft,r.dropDownButtonPosition=n.rightToLeft?"left":"right",r.dropDownHeight=r.dataSource&&r.dataSource.length<10?"auto":250,n.$.sortable.$.container.appendChild(i),r.tabIndex=a,e.sortDirection&&-1===e.sortDirection.indexOf("asc")?i.children[4].children[1].classList.add("selected"):(e.sortDirection="ascending",i.children[4].firstElementChild.classList.add("selected")),n._HTMLToSourceMap.set(i,e)}_disableItemAddition(){const e=this,t=e.maxLevel,n=0===e._hiddenSource.length||null!=t&&Math.max(0,t)===e.$.sortable._items.length;e.$.inputNotSorted.disabled=n,n&&e.$.inputNotSorted.removeAttribute("focus")}_setFocusable(){const e=this,t=e.disabled||e.unfocusable?-1:0,n=Array.from(e.getElementsByClassName("smart-grid-panel-item-close-button")),a=Array.from(e.getElementsByClassName("smart-grid-panel-direction")),i=Array.from(e.getElementsByTagName("input")),o=n.concat(a).concat(i);e.$.buttonsContainer.firstElementChild.tabIndex=t,e.$.buttonsContainer.children[1].tabIndex=t,o.forEach(r=>r.tabIndex=t)}}),Smart("smart-sort-panel",class extends Smart.GridPanel{static get properties(){return{messages:{value:{en:{firstBy:"Sort by",noSorting:"No sorting applied",pickAnother:"Pick another field to sort by"}},type:"object",extend:!0}}}static get styleUrls(){return["smart.textbox.css"]}_localize(){super._localize(),this.$.sortable.$.container.setAttribute("no-sorting",this.localize("noSorting"))}}),Smart("smart-group-panel",class extends Smart.GridPanel{static get properties(){return{maxLevel:{value:8,type:"number?"},messages:{value:{en:{collapseAll:"Collapse all",expandAll:"Expand all",firstBy:"Group by",noGrouping:"No grouping",pickAnother:"Pick another field to group by"}},type:"object",extend:!0}}}template(){return'<div id="container" role="presentation">\n                    <smart-sortable disable-mode="manual" right-to-left="[[rightToLeft]]" id="sortable" animation="[[animation]]" disabled="[[readonly]]" drag-mode="handle" handle-position="right" handle-visibility="visible" theme="[[theme]]"></smart-sortable>\n                    <div id="expandCollapseContainer" class="smart-grid-panel-buttons-container smart-grid-panel-expand-collapse smart-unselectable" role="presentation">\n                        <span class="smart-group-panel-collapse-button" role="button"></span>\n                        <span class="smart-group-panel-expand-button" role="button"></span>\n                    </div>\n                    <div id="footer" class="smart-grid-panel-container-footer" role="presentation">\n                        <smart-input right-to-left="[[rightToLeft]]" id="inputNotSorted" animation="[[animation]]" readonly theme="[[theme]]"></smart-input>\n                        <div id="buttonsContainer" class="smart-grid-panel-buttons-container smart-unselectable" role="presentation">\n                            <span class="smart-grid-panel-cancel-button" role="button"></span>\n                            <span class="smart-grid-panel-apply-button primary" role="button"></span>\n                        </div>\n                    </div>\n                </div>'}_interactionHandler(e,t){const n=this;super._interactionHandler(e,t)||(e===n.$.expandCollapseContainer.firstElementChild?n.$.fireEvent("collapseAll"):e===n.$.expandCollapseContainer.children[1]&&n.$.fireEvent("expandAll"))}_localize(){super._localize();const e=this;e.$.expandCollapseContainer.firstElementChild.innerHTML=e.localize("collapseAll"),e.$.expandCollapseContainer.children[1].innerHTML=e.localize("expandAll"),e.$.sortable.$.container.setAttribute("no-grouping",e.localize("noGrouping"))}_setFocusable(){super._setFocusable();const e=this,t=e.disabled||e.unfocusable?-1:0;e.$.expandCollapseContainer.firstElementChild.tabIndex=t,e.$.expandCollapseContainer.children[1].tabIndex=t}}),Smart("smart-multi-column-filter-panel",class extends Smart.BaseElement{static get properties(){return{closeButtonPosition:{value:"left",allowedValues:["left","right"],type:"string"},dataSource:{value:[],type:"array",reflectToAttribute:!1},editorCallback:{value:null,type:"function?",reflectToAttribute:!1},editorPlaceholder:{value:"Value",type:"string"},messages:{value:{en:{addFilter:"+ Add filter",and:"And",apply:"Ok",cancel:"Cancel",CONTAINS:"contains",CONTAINS_CASE_SENSITIVE:"contains (case sensitive)",DOES_NOT_CONTAIN:"does not contain",DOES_NOT_CONTAIN_CASE_SENSITIVE:"does not contain (case sensitive)",EMPTY:"empty",ENDS_WITH:"ends with",ENDS_WITH_CASE_SENSITIVE:"ends with (case sensitive)",EQUAL:"equal",EQUAL_CASE_SENSITIVE:"equal (case sensitive)",GREATER_THAN:"greater than",GREATER_THAN_OR_EQUAL:"greater than or equal",LESS_THAN:"less than",LESS_THAN_OR_EQUAL:"less than or equal",noFilters:"No filters applied",NOT_EMPTY:"not empty",NOT_EQUAL:"not equal",NOT_NULL:"not null",NULL:"null",or:"Or",STARTS_WITH:"starts with",STARTS_WITH_CASE_SENSITIVE:"starts with (case sensitive)",where:"Where"}},type:"object",extend:!0},operator:{value:"and",allowedValues:["and","or"],type:"string"},value:{value:[],type:"array"}}}static get listeners(){return{change:"_changeHandler",click:"_interactionHandler",keydown:"_interactionHandler"}}static get requires(){return{"Smart.Button":"smart.button.js","Smart.CheckBox":"smart.checkbox.js","Smart.DateTimePicker":"smart.datetimepicker.js","Smart.FilterGroup":"smart.filter.js","Smart.Input":"smart.input.js","Smart.NumericTextBox":"smart.numerictextbox.js"}}static get styleUrls(){return["smart.gridpanel.css"]}template(){return'<div id="container" role="presentation">\n                    <div id="itemsContainer" class="smart-filter-panel-items-container smart-unselectable"></div>\n                    <div id="footer" class="smart-grid-panel-container-footer" role="presentation">\n                        <div id="addFilterButton" class="smart-filter-panel-add-filter-button smart-unselectable" role="button"></div>\n                        <div id="buttonsContainer" class="smart-grid-panel-buttons-container smart-unselectable" role="presentation">\n                            <span class="smart-grid-panel-cancel-button" role="button"></span>\n                            <span class="smart-grid-panel-apply-button primary" role="button"></span>\n                        </div>\n                    </div>\n                </div>'}ready(){super.ready()}render(){const e=this;e.setAttribute("role","dialog"),e._setFocusable(),e._localize(),e._applyValue(),super.render()}propertyChangedHandler(e,t,n){super.propertyChangedHandler(e,t,n);const a=this;switch(e){case"animation":case"theme":case"rightToLeft":Array.from(a.$.itemsContainer.querySelectorAll("smart-date-time-picker, smart-numeric-text-box, smart-check-box, smart-input")).forEach(i=>{i[e]=n,"smart-input"===i.tagName.toLowerCase()&&"rightToLeft"===e&&"none"!==i.dropDownButtonPosition&&(i.dropDownButtonPosition=n?"left":"right")});break;case"disabled":case"unfocusable":a._setFocusable(!0);break;case"dataSource":case"value":a._applyValue();break;case"editorPlaceholder":Array.from(a.$.itemsContainer.getElementsByClassName("editor")).forEach(i=>i.placeholder=n);break;case"locale":case"messages":a._localize(!0);break;case"operator":a._setOperator()}}_setOperator(){const e=this,t=e.localize(e.operator);for(let n=2;n<e._items.length;n++)e._items[n].children[1].innerHTML=t}_changeHandler(e){const t=this,n=t.shadowRoot||t.isInShadowDOM?e.composedPath()[0]:e.target;if(n instanceof Smart.Input==0)return;const a=n.parentElement,i=a.children;if(n===i[1])t.operator=n.$.input.dataValue,t._setOperator();else if(n===i[2]){const o=t.dataSource.find(p=>p.dataField===e.detail.oldValue).dataType,r=t.dataSource.find(p=>p.dataField===e.detail.value),l=r.dataType;if("enum"!==l&&l===o)return void(t.editorCallback&&t.editorCallback(i[4],r));const s=i[3].value;let c,u;switch(l){case"date":c=t._numberAndDateConditions,u=document.createElement("smart-date-time-picker"),u.calendarButton=!0,u.dropDownAppendTo="body",u.dropDownDisplayMode="auto",u.formatString="M/d/yy H:mm";break;case"number":c=t._numberAndDateConditions,u=document.createElement("smart-numeric-text-box");break;case"boolean":c=t._booleanConditions,u=document.createElement("smart-check-box");break;case"enum":c=t._enumConditions,u=document.createElement("smart-input"),u.dataSource=r.options,u.readonly=!0,u.dropDownButtonPosition="right";break;default:c=t._stringConditions,u=document.createElement("smart-input")}u.rightToLeft=t.rightToLeft,u.animation=t.animation,u.theme=t.theme,u.unfocusable=t.disabled||t.unfocusable,u.classList.add("underlined"),u.dropDownHeight=u.dataSource&&u.dataSource.length<10?"auto":250,"boolean"!==l&&(u.placeholder=t.editorPlaceholder),t.editorCallback&&t.editorCallback(u,r),i[4].remove(),a.appendChild(u),""===s||c.find(p=>p.label===s)||(i[3].value=""),i[3].dataSource=c,i[3].dropDownHeight=c.length>=10?250:"auto",a.dataType=l}else if(n===i[3]){const o=i[4],r=n.$.input.dataValue;-1!==r.indexOf("NULL")||-1!==r.indexOf("EMPTY")?(o.value="",o.checked=!1,o.classList.add("smart-visibility-hidden")):o.classList.remove("smart-visibility-hidden"),n.condition=r}}_interactionHandler(e){const t=this;if(t.disabled||t.readonly)return;if("keydown"===e.type){if("Enter"!==e.key)return;e.preventDefault()}const n=t.shadowRoot||t.isInShadowDOM?e.composedPath()[0]:e.target,a=n.closest(".smart-grid-panel-item");if(a){if(n===a.firstElementChild){const i=t._items.indexOf(a);let o;t._items.splice(i,1),a.remove(),t._items.length>0&&i<2&&(0===i&&(t._items[0].children[1].remove(),o=document.createElement("div"),o.innerHTML=t.localize("where"),t._items[0].insertBefore(o,t._items[0].children[1])),t._items.length>1&&(t._items[1].children[1].remove(),o=document.createElement("smart-input"),o.className="underlined",o.dataSource=[{value:"and",label:t.localize("and")},{value:"or",label:t.localize("or")}],o.dropDownButtonPosition=t.rightToLeft?"left":"right",o.readonly=!0,o.value=t.localize(t.operator),o.animation=t.animation,o.theme=t.theme,o.rightToLeft=t.rightToLeft,o.unfocusable=t.disabled||t.unfocusable,t._items[1].insertBefore(o,t._items[1].children[1])))}}else if(n===t.$.addFilterButton&&t.dataSource.length>0)t.$.itemsContainer.appendChild(t._createItem(t.dataSource[0],"","",t._items.length));else if(n!==t.$.buttonsContainer.firstElementChild){if(n===t.$.buttonsContainer.children[1]){const i=t._stringConditions.concat(t._numberAndDateConditions),o=t.operator,r=[],l={},s=[];t._items.forEach(c=>{const u=t.dataSource.find(x=>x.label===c.children[2].value),p=[];let g=c.children[3].value;if(""===g)return;let b=u.dataType;if(g=i.find(x=>x.label===g).value,p.push(u.dataField,g),-1===g.indexOf("NULL")&&-1===g.indexOf("EMPTY"))if("boolean"===b)p.push(c.children[4].checked);else if("date"===b)p.push(c.children[4].value.toDate());else if("enum"===b){let x=c.children[4].$.input.dataValue;if(void 0===x){const D=u.options.find(T=>T.label===c.children[4].value);if(!D)return;x=D.value}b="string",p.push(x)}else p.push(c.children[4].value);let v=l[p[0]];void 0===v&&(v=new Smart.Utilities.FilterGroup,l[p[0]]=v);const y=v.createFilter(b,p[2],p[1]);v.addFilter(o,y),r.push(p)});for(let c in l)s.push([c,l[c]]);t.value=r,t.$.fireEvent("apply",{filters:s,operator:o,value:r})}}else t.$.fireEvent("cancel")}_applyValue(){const e=this,t=document.createDocumentFragment();let n=0;for(e._items=[];e.$.itemsContainer.firstElementChild;)e.$.itemsContainer.firstElementChild.remove();0!==e.dataSource.length&&(e.value.forEach(a=>{if(!Array.isArray(a))return;const i=a[0],o=e.dataSource.find(l=>l.dataField===i);if(!o)return;const r=e._createItem(o,a[1],a[2],n);t.appendChild(r),n++}),e.$.itemsContainer.appendChild(t))}_createItem(e,t,n,a){const i=this,o=i.disabled||i.unfocusable?-1:0,r=document.createElement("div"),l=document.createDocumentFragment(),s=document.createElement("div"),c=document.createElement("smart-input"),u=document.createElement("smart-input");let p,g;return s.className="smart-grid-panel-item-close-button",s.tabIndex=o,s.setAttribute("role","button"),s.setAttribute("aria-label","button"),l.appendChild(s),0===a?(p=document.createElement("div"),p.innerHTML=i.localize("where"),p.setAttribute("role","presentation")):1===a?(p=document.createElement("smart-input"),p.className="underlined",p.dataSource=[{value:"and",label:i.localize("and")},{value:"or",label:i.localize("or")}],p.dropDownButtonPosition=i.rightToLeft?"left":"right",p.readonly=!0,p.value=i.localize(i.operator),p.animation=i.animation,p.theme=i.theme,p.rightToLeft=i.rightToLeft,p.unfocusable=i.disabled||i.unfocusable,p.setAttribute("aria-label","Operator")):(p=document.createElement("div"),p.innerHTML=i.localize(i.operator),p.setAttribute("role","presentation")),l.appendChild(p),c.className="underlined",c.dataSource=i.dataSource.map(b=>({value:b.dataField,label:b.label,icon:b.icon})),c.dropDownButtonPosition=i.rightToLeft?"left":"right",c.readonly=!0,c.value=e.label,c.animation=i.animation,c.theme=i.theme,c.rightToLeft=i.rightToLeft,c.unfocusable=i.disabled||i.unfocusable,c.setAttribute("aria-label","Field"),c.dropDownHeight=c.dataSource&&c.dataSource.length<10?"auto":250,l.appendChild(c),"boolean"===e.dataType?(u.dataSource=i._booleanConditions,g=document.createElement("smart-check-box"),g.checked="boolean"==typeof n&&n):"date"===e.dataType?(u.dataSource=i._numberAndDateConditions,g=document.createElement("smart-date-time-picker"),g.dropDownDisplayMode="auto",g.calendarButton=!0,g.dropDownAppendTo="body",g.formatString="M/d/yy H:mm",g.value=n):"number"===e.dataType?(u.dataSource=i._numberAndDateConditions,g=document.createElement("smart-numeric-text-box"),g.value="number"==typeof n||"string"==typeof n?n:0):"enum"===e.dataType?(u.dataSource=i._enumConditions,g=document.createElement("smart-input"),g.dataSource=e.options,g.readonly=!0,g.dropDownButtonPosition="right",g.value=n?e.options.find(b=>b.value===n).label:""):(u.dataSource=i._stringConditions,g=document.createElement("smart-input"),g.value=null!=n?n.toString():""),u.className="underlined",u.dropDownButtonPosition=i.rightToLeft?"left":"right",u.readonly=!0,u.animation=i.animation,u.theme=i.theme,u.rightToLeft=i.rightToLeft,u.unfocusable=i.disabled||i.unfocusable,u.setAttribute("aria-label","Condition"),u.classList.add("smart-filter-panel-list"),u.dataSource.find(b=>b.value===t)?(u.value=i.localize(t),u.condition=t):(g.value="",g.checked=!1),void 0===t||-1===t.indexOf("NULL")&&-1===t.indexOf("EMPTY")||(g.value="",g.checked=!1,g.classList.add("smart-visibility-hidden")),u.dropDownHeight=u.dataSource&&u.dataSource.length<10?"auto":250,g.animation=i.animation,g.classList.add("editor"),g.rightToLeft=i.rightToLeft,g.theme=i.theme,g.unfocusable=i.disabled||i.unfocusable,g.classList.add("underlined"),"boolean"!==e.dataType&&(g.placeholder=i.editorPlaceholder),i.editorCallback&&i.editorCallback(g,e),l.appendChild(u),l.appendChild(g),r.appendChild(l),r.className="smart-grid-panel-item",i._items.push(r),r.dataType=e.dataType,r}_localize(e){const t=this;t.$.addFilterButton.innerHTML=t.localize("addFilter"),t.$.buttonsContainer.firstElementChild.innerHTML=t.localize("cancel"),t.$.buttonsContainer.children[1].innerHTML=t.localize("apply"),t.$.itemsContainer.setAttribute("no-filters",t.localize("noFilters")),t._stringConditions=[{prefix:'<span class="smart-icon smart-icon-empty"></span>',value:"EMPTY",label:t.localize("EMPTY")},{prefix:'<span class="smart-icon smart-icon-not-empty"></span>',value:"NOT_EMPTY",label:t.localize("NOT_EMPTY")},{prefix:'<span class="smart-icon smart-icon-contains"></span>',value:"CONTAINS",label:t.localize("CONTAINS")},{prefix:'<span class="smart-icon smart-icon-does-not-contain"></span>',value:"DOES_NOT_CONTAIN",label:t.localize("DOES_NOT_CONTAIN")},{prefix:'<span class="smart-icon smart-icon-starts-with"></span>',value:"STARTS_WITH",label:t.localize("STARTS_WITH")},{prefix:'<span class="smart-icon smart-icon-ends-with"></span>',value:"ENDS_WITH",label:t.localize("ENDS_WITH")},{prefix:'<span class="smart-icon smart-icon-equal"></span>',value:"EQUAL",label:t.localize("EQUAL")},{prefix:'<span class="smart-icon smart-icon-not-equal"></span>',value:"NOT_EQUAL",label:t.localize("NOT_EQUAL")},{prefix:'<span class="smart-icon smart-icon-null"></span>',value:"NULL",label:t.localize("NULL")},{prefix:'<span class="smart-icon smart-icon-not-null"></span>',value:"NOT_NULL",label:t.localize("NOT_NULL")}],t._enumConditions=[{prefix:'<span class="smart-icon smart-icon-equal"></span>',value:"EQUAL",label:t.localize("EQUAL")},{prefix:'<span class="smart-icon smart-icon-not-equal"></span>',value:"NOT_EQUAL",label:t.localize("NOT_EQUAL")}],t._numberAndDateConditions=[{prefix:'<span class="smart-icon smart-icon-equal"></span>',value:"EQUAL",label:t.localize("EQUAL")},{prefix:'<span class="smart-icon smart-icon-not-equal"></span>',value:"NOT_EQUAL",label:t.localize("NOT_EQUAL")},{prefix:'<span class="smart-icon smart-icon-less-than"></span>',value:"LESS_THAN",label:t.localize("LESS_THAN")},{prefix:'<span class="smart-icon smart-icon-less-than-equal"></span>',value:"LESS_THAN_OR_EQUAL",label:t.localize("LESS_THAN_OR_EQUAL")},{prefix:'<span class="smart-icon smart-icon-greater-than"></span>',value:"GREATER_THAN",label:t.localize("GREATER_THAN")},{prefix:'<span class="smart-icon smart-icon-greater-than-equal"></span>',value:"GREATER_THAN_OR_EQUAL",label:t.localize("GREATER_THAN_OR_EQUAL")},{prefix:'<span class="smart-icon smart-icon-null"></span>',value:"NULL",label:t.localize("NULL")},{prefix:'<span class="smart-icon smart-icon-not-null"></span>',value:"NOT_NULL",label:t.localize("NOT_NULL")}],t._booleanConditions=[{prefix:'<span class="smart-icon smart-icon-equal"></span>',value:"EQUAL",label:t.localize("EQUAL")},{prefix:'<span class="smart-icon smart-icon-not-equal"></span>',value:"NOT_EQUAL",label:t.localize("NOT_EQUAL")},{prefix:'<span class="smart-icon smart-icon-null"></span>',value:"NULL",label:t.localize("NULL")},{prefix:'<span class="smart-icon smart-icon-not-null"></span>',value:"NOT_NULL",label:t.localize("NOT_NULL")}],e&&t._items.forEach((n,a)=>{const i=n.children[1],o=n.children[3];0===a?i.innerHTML=t.localize("where"):1===a?(i.dataSource=[{value:"and",label:t.localize("and")},{value:"or",label:t.localize("or")}],i.value=t.localize(t.operator)):i.innerHTML=t.localize(t.operator),o.dataSource="string"===n.dataType?t._stringConditions:"enum"===n.dataType?t._enumConditions:"boolean"===n.dataType?t._booleanConditions:t._numberAndDateConditions,o.value=o.condition?t.localize(o.condition):""})}_setFocusable(e){const t=this,n=t.disabled||t.unfocusable?-1:0;if(t.$.addFilterButton.tabIndex=n,t.$.buttonsContainer.firstElementChild.tabIndex=n,t.$.buttonsContainer.children[1].tabIndex=n,e){const a=Array.from(t.$.itemsContainer.getElementsByClassName("smart-grid-panel-item-close-button")),i=Array.from(t.$.itemsContainer.querySelectorAll("smart-date-time-picker, smart-numeric-text-box, smart-check-box, smart-input"));a.forEach(o=>o.tabIndex=n),i.forEach(o=>o.unfocusable=t.disabled||t.unfocusable)}}}),Smart("smart-column-panel",class extends Smart.BaseElement{static get properties(){return{dataSource:{value:[],type:"array",reflectToAttribute:!1},messages:{value:{en:{apply:"Ok",cancel:"Cancel",find:"Find a field",noResults:"No results"}},type:"object",extend:!0}}}static get listeners(){return{click:"_interactionHandler",keydown:"_interactionHandler","find.keyup":"_findKeyupHandler","sortable.dragEnd":"_sortableDragEndHandler"}}static get requires(){return{"Smart.Sortable":"smart.sortable.js"}}static get styleUrls(){return["smart.gridpanel.css"]}template(){return'<div id="container" role="presentation">\n                    <div class="smart-column-panel-find-container" role="search">\n                        <input id="find" readonly="[[readonly]]" role="searchbox" aria-label="Find a field"></input>\n                        <span id="clearButton" class="clear-button smart-hidden" role="button" aria-label="Clear"></span>\n                    </div>\n                    <smart-sortable id="sortable" disable-mode="manual" right-to-left="[[rightToLeft]]" animation="[[animation]]" disabled="[[readonly]]" drag-mode="handle" handle-position="right" handle-visibility="visible" theme="[[theme]]"></smart-sortable>\n                    <div id="footer" class="smart-grid-panel-container-footer" role="presentation">\n                        <div id="buttonsContainer" class="smart-grid-panel-buttons-container smart-unselectable" role="presentation">\n                            <span class="smart-grid-panel-cancel-button" role="button"></span>\n                            <span class="smart-grid-panel-apply-button primary" role="button"></span>\n                        </div>\n                    </div>\n                </div>'}ready(){super.ready()}render(){const e=this;e.setAttribute("role","dialog"),e._positionChanged=!1,e._localize(),e._moves=[],e._createSortItems(),super.render()}propertyChangedHandler(e,t,n){super.propertyChangedHandler(e,t,n);const a=this;switch(e){case"disabled":case"unfocusable":a._setFocusable();break;case"dataSource":{const i=a.$.sortable.$.container;for(;i.firstChild;)i.removeChild(i.firstChild);a._createSortItems(),a._positionChanged=!1,a.$.find.value="",a.$.clearButton.classList.add("smart-hidden");break}case"locale":case"messages":a._localize()}}_createSortItems(){const e=this,t=document.createDocumentFragment();e._HTMLToSourceMap=new Map,e.dataSource.forEach(n=>t.appendChild(e._createSortItem(n))),e.$.sortable.$.container.appendChild(t),e.$.sortable.updateItems(),e._setFocusable()}_createSortItem(e){const t=document.createElement("div"),n=this.id+"Label"+e.dataField;return this._HTMLToSourceMap.set(t,e),t.className="smart-grid-panel-item",t.innerHTML=`<div class="toggle-visibility${!1!==e.visible?"":" hidden"}${e.disableToggle?" disable-toggle":""}" role="button" aria-controls="${n}" aria-label="Toggle visibility"></div>\n<span id="${n}" class="smart-column-panel-label smart-unselectable${e.icon?" icon "+e.icon:""}">${e.label}</span>`,!1===e.allowHide&&(t.style.pointerEvents="none",t.style.opacity=.8),t}_interactionHandler(e){const t=this;if(t.disabled||t.readonly||"keydown"===e.type&&-1===[" ","Enter"].indexOf(e.key))return;const n=t.shadowRoot||t.isInShadowDOM?e.composedPath()[0]:e.target;if(n.classList.contains("toggle-visibility"))n.classList.toggle("hidden");else if(n.parentElement===t.$.buttonsContainer){if(n===t.$.buttonsContainer.firstElementChild)return t.$.fireEvent("cancel"),void(t._moves=[]);if(n===t.$.buttonsContainer.children[1]){const a=[];t.$.sortable._items.forEach(i=>{const o=Object.assign({},t._HTMLToSourceMap.get(i));o.visible=!i.firstElementChild.classList.contains("hidden"),a.push(o)}),t.$.fireEvent("apply",{value:a,positionChanged:t._positionChanged,moves:t._moves}),t._positionChanged=!1,t._moves=[]}}else n.classList.contains("clear-button")&&(t.$.find.value="",t._findKeyupHandler())}_findKeyupHandler(){const e=this;if(e.disabled||e.readonly)return;const t=e.$.find,n=t.value,a=e.$.sortable._items;if(void 0===e._disabledSortable&&(e._disabledSortable=e.$.sortable.disabled),""===n)return t.parentElement.classList.remove("no-results"),e.$.clearButton.classList.add("smart-hidden"),a.forEach(o=>o.classList.remove("smart-hidden")),e.$.sortable.disabled=e._disabledSortable||e.readonly,void delete e._disabledSortable;let i=!0;e.$.clearButton.classList.remove("smart-hidden"),a.forEach(o=>{-1===e._HTMLToSourceMap.get(o).label.toLowerCase().indexOf(n.toLowerCase())?o.classList.add("smart-hidden"):(o.classList.remove("smart-hidden"),i=!1)}),e.$.sortable.disabled=i,i?t.parentElement.classList.add("no-results"):t.parentElement.classList.remove("no-results")}_sortableDragEndHandler(e){const t=e.detail;this._positionChanged=!0,this._moves.push({oldIndex:t.oldIndex,newIndex:t.newIndex})}_localize(){const e=this;e.$.find.placeholder=e.localize("find"),e.$.buttonsContainer.firstElementChild.innerHTML=e.localize("cancel"),e.$.buttonsContainer.children[1].innerHTML=e.localize("apply"),e.$.container.firstElementChild.setAttribute("no-results",e.localize("noResults"))}_setFocusable(){const e=this,t=e.disabled||e.unfocusable?-1:0,n=Array.from(e.$.sortable.getElementsByClassName("toggle-visibility"));e.$.find.tabIndex=t,e.$.clearButton.tabIndex=t,e.$.buttonsContainer.firstElementChild.tabIndex=t,e.$.buttonsContainer.children[1].tabIndex=t,n.forEach(a=>a.tabIndex=a.classList.contains("disable-toggle")?-1:t)}}),Smart("smart-formatting-panel",class extends Smart.BaseElement{static get properties(){return{columns:{value:[],type:"array",reflectToAttribute:!1},dataSource:{value:[],type:"any",reflectToAttribute:!1},items:{value:null,type:"array?",reflectToAttribute:!1},dropDownAppendTo:{value:null,type:"any",reflectToAttribute:!1},messages:{value:{en:{add:"Add condition",all:"All columns",apply:"Ok",between:"Between",cancel:"Cancel",close:"Close",column:"Column:",condition:"Condition:",equal:"Equal To",fontFamily:"Font family:",fontSize:"Font size:",format:"Format:",greaterThan:"Greater Than",highlight:"Highlight",lessThan:"Less Than",notEqual:"Not Equal To",remove:"Remove condition",secondValue:"Second value:",text:"Text",value:"Value:"}},type:"object",extend:!0}}}static get listeners(){return{click:"_interactionHandler",keydown:"_interactionHandler",change:"_changeHandler","popup.change":"_changeHandler","popup.click":"_interactionHandler","popup.keydown":"_interactionHandler","document.down":"_documentDownHandler"}}template(){return'<div id="container" role="presentation">\n                    <div id="itemsContainer" class="smart-formatting-panel-items-container" role="presentation"></div>\n                    <div id="addNewButton" class="smart-add-new-button" role="button" aria-label="Add new condition"></div>\n                    <div id="popup" class="smart-formatting-panel-popup smart-hidden smart-visibility-hidden" role="dialog">\n                        <div id="popupHeader" class="header" role="presentation">\n                            <div id="text" class="selected" role="button" aria-label="Text color"></div>\n                            <div id="highlight" role="button" aria-label="Highlight color"></div>\n                        </div>\n                        <div id="colorCode" class="color-code"></div>\n                        <input id="colorInput" type="color" />\n                        <div id="colorsContainer" class="colors-container"></div>\n                        <smart-button id="apply" class="ok primary" animation="[[animation]]" right-to-left="[[rightToLeft]]" theme="[[theme]]" unfocusable="[[unfocusable]]"></smart-button>\n                        <smart-button id="cancel" class="cancel" animation="[[animation]]" right-to-left="[[rightToLeft]]" theme="[[theme]]" unfocusable="[[unfocusable]]"></smart-button>\n                    </div>\n                </div>'}render(){const e=this,t=getComputedStyle(e);e.setAttribute("role","dialog"),e.$.popup.id=e.id+"Popup",e._basicColors=[[0,0,0],[68,68,68],[102,102,102],[153,153,153],[204,204,204],[238,238,238],[243,243,243],[255,255,255],[255,0,0],[255,153,0],[255,255,0],[0,255,0],[0,255,255],[0,0,255],[153,0,255],[255,0,255],[244,204,204],[252,229,205],[255,242,204],[217,234,211],[208,224,227],[207,226,243],[217,210,233],[234,209,220],[234,153,153],[249,203,156],[255,229,153],[182,215,168],[162,196,201],[159,197,232],[180,167,214],[213,166,189],[224,102,102],[246,178,107],[255,217,102],[147,196,125],[118,165,175],[111,168,220],[142,124,195],[194,123,160],[204,0,0],[230,145,56],[241,194,50],[106,168,79],[69,129,142],[61,133,198],[103,78,167],[166,77,121],[153,0,0],[180,95,6],[191,144,0],[56,118,29],[19,79,92],[11,83,148],[53,28,117],[116,27,71],[102,0,0],[120,63,4],[127,96,0],[39,78,19],[12,52,61],[7,55,99],[32,18,77],[76,17,48]],e._defaults={fontFamily:t.fontFamily,fontSize:t.fontSize,text:e._toHex(t.color),highlight:e._toHex(t.backgroundColor)},t.fontFamily.indexOf("-apple")>=0&&(e._defaults.fontFamily="Segoe UI"),e._localize(),e._setFocusable(),e._populatePopupWithColors(),e._processColumnsAndDataSource(),e._addDefaultItems(),super.render()}attached(){const e=this;super.attached(),e.isCompleted&&e._addDefaultItemsOnAttach&&e._addDefaultItems()}add(e,t){const n=this;if(e&&e.column&&"all"!==e.column&&!n.columns.find(s=>s.dataField===e.column))return void n.items.splice(t,1);const a=document.createElement("div"),i=n._defaults,o=` animation="${n.animation}"${n.rightToLeft?" right-to-left":""} theme="${n.theme}"${n.unfocusable?" unfocusable":""}`,r=n.disabled||n.unfocusable?"":' tabindex="0"';e=Object.assign({column:"all",condition:"lessThan",firstValue:0,secondValue:1,fontFamily:i.fontFamily,fontSize:i.fontSize,text:i.text,highlight:i.highlight},e);const l=`\n<div class="value-label">${n.localize("value")}</div>\n<smart-input class="columns-input underlined" data-source='${JSON.stringify(n._columnsInputDataSource)}' placeholder="${n.localize("column")}" readonly value="${n._columnsInputDataSource.find(s=>s.value===e.column).label}"${o}></smart-input>\n<smart-input class="condition-input underlined" data-source='${n._conditionsDataSource}' placeholder="${n.localize("condition")}" readonly value="${n.localize(e.condition)}"${o}></smart-input>\n<smart-input class="first-value underlined" type="number" placeholder="${n.localize("value")}" value="${e.firstValue}"${o}></smart-input>\n<div class="ampersand">&</div>\n<smart-input class="second-value underlined" type="number" placeholder="${n.localize("secondValue")}" value="${e.secondValue}"${o}></smart-input>\n<div class="close-button" title="${n.localize("close")}"${r} role="button" aria-label="Close"></div>\n<div class="format-label">${n.localize("format")}</div>\n<smart-input class="font-family-input underlined" drop-down-height="auto" placeholder="${n.localize("fontFamily")}" readonly${o}></smart-input>\n<smart-input class="font-size-input underlined" data-source='["8px", "9px", "10px", "11px", "12px", "13px", "14px", "15px", "16px"]' drop-down-height="auto" placeholder="${n.localize("fontSize")}" readonly value="${e.fontSize}"${o}></smart-input>\n<div class="popup-button smart-unselectable"${r} role="button" aria-haspopup="dialog" aria-label="Toggle pop-up">A</div>\n<div class="preview smart-unselectable">2.71828</div>`;a.classList.add("smart-formatting-panel-item"),a.classList.toggle("between","between"===e.condition),a.innerHTML=l,a.columnsInput=a.querySelector(".columns-input"),a.conditionInput=a.querySelector(".condition-input"),a.firstValue=a.querySelector(".first-value"),a.secondValue=a.querySelector(".second-value"),a.closeButton=a.querySelector(".close-button"),a.fontFamilyInput=a.querySelector(".font-family-input"),a.fontFamilyInput.dataSource=[i.fontFamily,"Arial","Verdana","Courier New","Georgia","Times New Roman"],a.fontFamilyInput.value=e.fontFamily,a.fontSizeInput=a.querySelector(".font-size-input"),a.popupButton=a.querySelector(".popup-button"),a.fontFamilyInput=a.querySelector(".font-family-input"),a.preview=a.querySelector(".preview"),a.popupButton.style.color=e.text,a.popupButton.style.backgroundColor=e.highlight,a.preview.style.fontFamily=e.fontFamily,a.preview.style.fontSize=e.fontSize,a.preview.style.color=e.text,a.preview.style.backgroundColor=e.highlight,a.data=e,n.$.itemsContainer.appendChild(a),a.columnsInput.$.input.dataValue="all",a.conditionInput.$.input.dataValue=e.condition,n._checkScrollBar()}apply(){const e=this,t=new Smart.Utilities.ConditionalFormatter(e.dataSource),n=Array.from(e.$.itemsContainer.children),a=[];let i;if(0===n.length)return;if(e.ownerElement&&"smart-pivot-table"===e.ownerElement.nodeName.toLowerCase()){const r=e.ownerElement._dynamicColumns;i=function(l){return"all"===l?r.map(s=>s.id):r.filter(s=>s.dataFields[s.dataFields.length-1].dataField===l).map(s=>s.id)}}else i=function(r){return"all"===r?e._columns.map(l=>l.value):[r]};for(let r=0;r<n.length;r++){const l=n[r].data,s=i(l.column),c=l.condition;t.color=l.highlight,t.comparator=l.firstValue,t.min=l.firstValue,t.max=l.secondValue;const u=t.format(c,s);for(let p in u){const g=u[p];for(let b in g){const v=g[b];v.color=l.text,v.fontFamily=l.fontFamily,v.fontSize=l.fontSize}}a.push(u)}if(0===a.length)return a[0];const o={};for(let r=0;r<a.length;r++){const l=a[r];for(let s in l){const c=l[s];o[s]||(o[s]={});for(let u in c)o[s][u]=Object.assign({},o[s][u],c[u])}}return o}getItems(){return Array.from(this.$.itemsContainer.children).map(e=>e.data)}propertyChangedHandler(e,t,n){super.propertyChangedHandler(e,t,n);const a=this;switch(e){case"animation":case"theme":case"rightToLeft":if(Array.from(a.$.itemsContainer.querySelectorAll(".smart-element")).forEach(i=>i[e]=n),null!==a.dropDownAppendTo&&(a.$.apply[e]=n,a.$.cancel[e]=n),"theme"===e){const i=getComputedStyle(a);a._defaults.text=a._toHex(i.color),a._defaults.highlight=a._toHex(i.backgroundColor)}break;case"columns":case"items":"columns"===e&&(a._processColumnsAndDataSource(),a.items=null),a.$.itemsContainer.innerHTML="",a._addDefaultItems();break;case"disabled":case"unfocusable":{const i=a.disabled||a.unfocusable,o=Array.from(a.$.itemsContainer.querySelectorAll(".close-button, .popup-button"));"disabled"===e?a._closePopup():null!==a.dropDownAppendTo&&(a.$.apply.unfocusable=n,a.$.cancel.unfocusable=n),a._setFocusable(),Array.from(a.$.itemsContainer.querySelectorAll(".smart-element")).forEach(r=>r.unfocusable=i),o.forEach(i?r=>r.removeAttribute("tabindex"):r=>r.setAttribute("tabindex",0));break}case"dataSource":Smart.DataAdapter&&n instanceof Smart.DataAdapter&&(a.dataSource=n.toArray());break;case"locale":case"messages":a.items=a.getItems(),a.$.itemsContainer.innerHTML="",a._localize(),a._columnsInputDataSource=a._columns.concat([{label:a.localize("all"),value:"all"}]),a._addDefaultItems()}}_populatePopupWithColors(){const e=this,t=e._basicColors,n=document.createDocumentFragment();for(let a=0;a<t.length;a++){const i=document.createElement("div"),o=t[a],r=`rgb(${o[0]}, ${o[1]}, ${o[2]})`,l=e._toHex(r);i.setAttribute("role","button"),i.setAttribute("aria-label","Select color "+l),i.index=a,i.value=l,i.style.backgroundColor=r,n.appendChild(i)}e.$.colorsContainer.appendChild(n)}_processColumnsAndDataSource(){const e=this,t=e.columns,n=e.dataSource,a=[];Smart.DataAdapter&&n instanceof Smart.DataAdapter&&(e.dataSource=n.toArray());for(let i=0;i<t.length;i++){const o=t[i];"number"===o.dataType&&a.push({label:o.label,value:o.dataField})}e._columns=a,e._columnsInputDataSource=a.concat([{label:e.localize("all"),value:"all"}])}_addDefaultItems(){const e=this,t=e.items,n=e.getRootNode();n===document||document.body.contains(n)?(t&&t.length>0?t.forEach((a,i)=>e.add(a,i)):(e.add({condition:"greaterThan",firstValue:100}),e.add({condition:"lessThan",firstValue:0})),delete e._addDefaultItemsOnAttach):e._addDefaultItemsOnAttach=!0}_changeHandler(e){const t=this,n=t.isInShadowDOM?e.composedPath()[0]:e.target,a=n.closest(".smart-formatting-panel-item");if(a)if(n!==a.columnsInput){if(n===a.conditionInput)return a.data.condition=n.$.input.dataValue,void a.classList.toggle("between","between"===n.$.input.dataValue);if(a.firstValue.contains(n))a.data.firstValue=parseFloat(n.value);else{if(!a.secondValue.contains(n))return n===a.fontFamilyInput?(a.data.fontFamily=n.value,void(a.preview.style.fontFamily=n.value)):void(n===a.fontSizeInput&&(a.data.fontSize=n.value,a.preview.style.fontSize=n.value));a.data.secondValue=parseFloat(n.value)}}else a.data.column=n.$.input.dataValue;else t.$.popup.contains(n)&&t._updateUI(n.value.toUpperCase())}_checkScrollBar(){this.classList.toggle("scroll",this.$.itemsContainer.offsetHeight<this.$.itemsContainer.scrollHeight)}_interactionHandler(e){const t=this;if(!t.dropDownAppendTo&&e.currentTarget===t.$.popup)return;if("keydown"===e.type){if(-1===[" ","Enter"].indexOf(e.key))return void(t.disabled||t.readonly||t._keydownHandler(e));e.preventDefault()}const n=t.isInShadowDOM?e.composedPath()[0]:e.target;if(n===t.$.addNewButton)return void t.add();const a=n.closest(".smart-formatting-panel-item");if(a)return void(n===a.closeButton?(a.remove(),this._checkScrollBar()):n===a.popupButton&&(t._togglePopup(a),t._activePopupButton=n));const i=t.$.popup;if(i.contains(n)){if(n.parentElement===t.$.colorsContainer)return void t._updateUI(n.value);if(n.parentElement===t.$.popupHeader)n.classList.add("selected"),n===t.$.text?(i.selection="currentText",t.$.highlight.classList.remove("selected")):(i.selection="currentHighlight",t.$.text.classList.remove("selected")),t._updateUI(i[i.selection]);else if(n.classList.contains("smart-button")){if(t.$.apply.contains(n)){const o=i.item;o.data.text=i.currentText,o.data.highlight=i.currentHighlight,o.popupButton.style.color=i.currentText,o.popupButton.style.backgroundColor=i.currentHighlight,o.preview.style.color=i.currentText,o.preview.style.backgroundColor=i.currentHighlight}t._closePopup()}}}_keydownHandler(e){const t=this,n=e.key;if(-1===["ArrowDown","ArrowLeft","ArrowRight","ArrowUp","End","Escape","Home","PageDown","PageUp"].indexOf(n))return;if(e.preventDefault(),"Escape"===n&&!t.$.popup.classList.contains("smart-hidden"))return void t._closePopup();if(t.getRootNode().activeElement!==t.$.colorsContainer)return;const a=Array.from(this.$.colorsContainer.children),i=this.$.colorsContainer.querySelector(".selected");let o,r="ArrowRight",l="ArrowLeft";if(t.rightToLeft&&(r="ArrowLeft",l="ArrowRight"),i){let s=i.index;switch(n){case l:s=Math.max(s-1,s-s%8);break;case r:s=Math.min(s+1,s+8-s%8-1);break;case"ArrowUp":s=Math.max(s-8,s%8);break;case"ArrowDown":s=Math.min(s+8,56+s%8);break;case"Home":s-=s%8;break;case"End":s=s+8-s%8-1;break;case"PageUp":s%=8;break;case"PageDown":s=56+s%8}o=a[s]}else o=a[0];t._updateUI(o.value,o)}_togglePopup(e){const t=this,n=t.$.popup;if(e===n.item)return void t._closePopup();if(n.setAttribute("animation",t.animation),n.setAttribute("theme",t.theme),t.rightToLeft&&n.setAttribute("right-to-left",""),n.classList.contains("smart-hidden")&&n.classList.remove("smart-hidden"),t.dropDownAppendTo)if("body"===t.dropDownAppendTo)document.body.appendChild(n);else{const g=document.querySelector(t.dropDownAppendTo);g&&g.appendChild(n)}const a=e.popupButton,i=a.getBoundingClientRect(),o=a.offsetLeft,r=a.offsetTop,l=n.offsetWidth,s=n.offsetHeight,c=t.$.itemsContainer.scrollTop,u=t._toHex(e.data.text),p=t._toHex(e.data.highlight);n.style.top=i.top>=s+5?r-(s+c+5)+"px":r+i.height-c+5+"px",n.style.left=o+i.width/2-l/2+"px",t.dropDownAppendTo&&(n.style.top=i.bottom+5+"px",n.style.left=i.left+i.width/2-l/2+"px"),t.$.text.classList.add("selected"),t.$.highlight.classList.remove("selected"),t.$.text.focus(),n.item=e,n.selection="currentText",n.currentText=u,n.currentHighlight=p,t._updateUI(u),n.controlledBy&&(n.controlledBy.removeAttribute("aria-controls"),n.controlledBy.removeAttribute("aria-expanded")),a.setAttribute("aria-controls",n.id),a.setAttribute("aria-expanded",!0),n.controlledBy=a,n.classList.remove("smart-visibility-hidden")}_closePopup(){const e=this,t=e.$.popup;"none"!==e.animation?(t.addEventListener("transitionend",function n(){t.classList.add("smart-hidden"),t.removeEventListener("transitionend",n)}),t.classList.add("smart-visibility-hidden")):(t.classList.add("smart-visibility-hidden"),t.classList.add("smart-hidden")),delete t.item,e._activePopupButton&&e._activePopupButton.focus(),t.controlledBy&&(t.controlledBy.removeAttribute("aria-controls"),t.controlledBy.removeAttribute("aria-expanded"))}_toHex(e){if(-1!==e.indexOf("#"))return e;const t=/rgb\((\d+), (\d+), (\d+)\)/g.exec(e);return t?"#"+(parseFloat(t[1]).toString(16).padStart(2,"0")+parseFloat(t[2]).toString(16).padStart(2,"0")+parseFloat(t[3]).toString(16).padStart(2,"0")).toUpperCase():"#FFFFFF"}_updateUI(e,t){const n=this;n.$.colorInput.value=e,n.$.colorCode.innerHTML=e,n._selectColor(e,t)}_selectColor(e,t){const n=this.$.popup,a=Array.from(this.$.colorsContainer.children);a.forEach(i=>i.classList.remove("selected")),(t=t||a.find(i=>i.value===e))&&t.classList.add("selected"),n[n.selection]=e}_localize(){const e=this;e._conditionsDataSource=JSON.stringify([{label:e.localize("lessThan"),value:"lessThan"},{label:e.localize("greaterThan"),value:"greaterThan"},{label:e.localize("equal"),value:"equal"},{label:e.localize("notEqual"),value:"notEqual"},{label:e.localize("between"),value:"between"}]),e.$.text.innerHTML=e.localize("text"),e.$.highlight.innerHTML=e.localize("highlight"),e.$.apply.innerHTML=e.localize("apply"),e.$.cancel.innerHTML=e.localize("cancel"),e.$.addNewButton.title=e.localize("add")}_setFocusable(){const e=this,n=[e.$.addNewButton,e.$.text,e.$.highlight,e.$.colorsContainer];e.disabled||e.unfocusable?(n.forEach(a=>a.removeAttribute("tabindex")),e.$.colorInput.setAttribute("tabindex",-1)):(n.forEach(a=>a.setAttribute("tabindex",0)),e.$.colorInput.removeAttribute("tabindex"))}_documentDownHandler(e){const t=this,n=t.isInShadowDOM?e.originalEvent.composedPath()[0]:e.originalEvent.target,a=t.$.popup;a.classList.contains("smart-hidden")||a.contains(n)||n.classList.contains("popup-button")||(delete t._activePopupButton,t._closePopup())}}),Smart("smart-data-view",class extends Smart.BaseElement{static get properties(){return{addNewButton:{value:!1,type:"boolean"},allowDrag:{value:!1,type:"boolean"},collapsible:{value:!1,type:"boolean"},columns:{value:[],type:"object",reflectToAttribute:!1},dataSource:{value:null,type:"object?",reflectToAttribute:!1},dataSourceSettings:{value:{autoGenerateColumns:{value:!1,type:"boolean"},sanitizeHTML:{value:"blackList",allowedValues:["all","blackList","none"],type:"string"},root:{value:"",type:"string"},record:{value:"",type:"string"},keyDataField:{value:"",type:"string"},parentDataField:{value:"",type:"string"},childrenDataField:{value:"",type:"string"},groupBy:{value:[],type:"array"},dataFields:{value:[],type:"array"},mapChar:{value:".",type:"string"},id:{value:"",type:"string"},virtualDataSource:{value:null,type:"any"},virtualDataSourceOnExpand:{value:null,type:"any"}},type:"object"},editable:{value:!1,type:"boolean"},headerPosition:{value:"none",allowedValues:["none","top","bottom"],type:"string"},messages:{value:{en:{addFilter:"+ Add filter",and:"And",apply:"Ok",booleanFirst:"\u2610",booleanLast:"\u2611",cancel:"Cancel",CONTAINS:"contains",CONTAINS_CASE_SENSITIVE:"contains (case sensitive)",dateFirst:"1",dateLast:"9",DOES_NOT_CONTAIN:"does not contain",DOES_NOT_CONTAIN_CASE_SENSITIVE:"does not contain (case sensitive)",EMPTY:"empty",ENDS_WITH:"ends with",ENDS_WITH_CASE_SENSITIVE:"ends with (case sensitive)",EQUAL:"equal",EQUAL_CASE_SENSITIVE:"equal (case sensitive)",filter:"Filter",customize:"Customize Columns",filteredByMultiple:"{{n}} filters",filteredByOne:"1 filter",filterValuePlaceholder:"Value",find:"Find a field",findInView:"Find in view",firstBy:"Sort by",found:"{{nth}} of {{n}}",from:"from",GREATER_THAN:"greater than",GREATER_THAN_OR_EQUAL:"greater than or equal",LESS_THAN:"less than",LESS_THAN_OR_EQUAL:"less than or equal",noFilters:"No filters applied",noResults:"No results",noSorting:"No sorting applied",NOT_EMPTY:"not empty",NOT_EQUAL:"not equal",NOT_NULL:"not null",NULL:"null",numberFirst:"1",numberLast:"9",ok:"OK",or:"Or",pickAnother:"Pick another field to sort by",sort:"Sort",group:"Group",fontFamily:"Font family:",fontSize:"Font size:",format:"Format:",formatColumn:"Format Column",formating:"Conditional Formating",sortedByMultiple:"Sorted by {{n}} fields",sortedByOne:"Sorted by 1 field",STARTS_WITH:"starts with",STARTS_WITH_CASE_SENSITIVE:"starts with (case sensitive)",stringFirst:"A",stringLast:"Z",thenBy:"then by",where:"Where",collapseAll:"Collapse all",expandAll:"Expand all",noGrouping:"No grouping",groupedByMultiple:"{{n}} groups",groupedByOne:"1 group",firstByGroup:"Group by",pickAnotherGroupBy:"Pick another field to group by",add:"Add condition",all:"All columns",between:"Between",close:"Close",column:"Column:",condition:"Condition:",equal:"Equal To",greaterThan:"Greater Than",highlight:"Highlight",lessThan:"Less Than",notEqual:"Not Equal To",remove:"Remove condition",secondValue:"Second value:",text:"Text",value:"Value:"}}}}}static get listeners(){return{"header.apply":"_applyHandler","header.cancel":"closePanel","headerDropDown.transitionend":"_headerDropDownTransitionendHandler","searchInput.keyup":"_searchInputKeyupHandler",resize:"_resizeHandler","document.move":"_documentMoveHandler","document.up":"_documentUpHandler"}}render(){const e=this;e.$.headerDropDown.id||(e.$.headerDropDown.id=e.id+"HeaderDropDown"),e.setAttribute("role","group"),e._isMobile=Smart.Utilities.Core.isMobile,super.render()}addFilter(e,t="and"){const n=this;if(!Array.isArray(e)||e.length>0&&!Array.isArray(e[0]))return;let a;n.closePanel(),arguments[2]?a={filters:arguments[2],operator:t}:(a={filters:[],operator:t},e.forEach(i=>{i[1].filters.forEach(o=>{a.filters.push([i[0],o.condition,o.value])})})),JSON.stringify(a)!==JSON.stringify(n._appliedFiltering)&&(a.filterGroups=e,n._appliedFiltering=a,n._applyFilter(e,t),n.$.fireEvent("filter"),n._refreshFilterButton())}_refreshFilterButton(){const e=this,t=e._appliedFiltering.filters?e._appliedFiltering.filters.length:0;if(0===t)return e.$.filterButton.firstElementChild.innerHTML=e.localize("filter"),void e.$.filterButton.classList.remove("filtered");e.$.filterButton.firstElementChild.innerHTML=1===t?e.localize("filteredByOne"):e.localize("filteredByMultiple",{n:t}),e.$.filterButton.classList.add("filtered")}addSort(e,t){const n=this,a=n.dataSource,i=JSON.stringify(n._appliedSorting);let o;function r(l,s){if(n.columns.find(c=>c.dataField===l)){let c=Array.isArray(t)?t[s]:"string"==typeof t?t:"ascending";o.dataFields.push(l),o.dataTypes.push(a.dataFields.find(u=>u.name===l).dataType),c=c&&-1!==c.indexOf("desc")?"descending":"ascending",o.orderBy.push(c)}}if(0!==arguments.length&&a&&0!==a.length){if(n.closePanel(),1===arguments.length&&"object"==typeof e)o=e;else if(o={dataFields:[],dataTypes:[],orderBy:[]},Array.isArray(e))e.forEach(r);else{if("string"!=typeof e)return;r(e,0)}n.closePanel(),n._appliedSorting=o,i!==JSON.stringify(n._appliedSorting)&&(n._applySort(),n.$.fireEvent("sort"),n._refreshSortButton())}}_refreshSortButton(){const e=this,t=e._appliedSorting.dataFields.length;if(0===t)return e.$.sortButton.firstElementChild.innerHTML=e.localize("sort"),void e.$.sortButton.classList.remove("sorted");e.$.sortButton.firstElementChild.innerHTML=1===t?e.localize("sortedByOne"):e.localize("sortedByMultiple",{n:t}),e.$.sortButton.classList.add("sorted")}closePanel(){const e=this.$.headerDropDown;e.classList.remove("open"),setTimeout(()=>{e.classList.add("smart-visibility-hidden")},150),this._closeSearchPanel(),e.controlledBy&&(e.controlledBy.removeAttribute("aria-controls"),e.controlledBy.setAttribute("aria-expanded",!1),delete e.controlledBy)}_closeSearchPanel(){this._searchInfo&&delete this._searchInfo}_closeDialog(){this._editInfo&&this._editInfo.window.close()}openFormatPanel(){}openFilterPanel(e,t){const n=this,a=n.dataSource;if(!a||0===a.length&&!a.virtualDataSource||n.disabled||"none"===n.headerPosition)return;let i;n._editInfo&&n._editInfo.window.close(),n.$.headerDropDown.classList.add("filter-panel"),n.$.headerDropDown.classList.remove("customize-panel","sort-panel","search-panel","format-panel"),n.$.filter.classList.remove("smart-hidden"),n.$.customize.classList.add("smart-hidden"),n.$.sort.classList.add("smart-hidden"),n.$.format&&n.$.format.classList.add("smart-hidden"),n.$.group&&n.$.group.classList.add("smart-hidden"),n.$.search.classList.add("smart-hidden"),n._closeSearchPanel(),n._filterPartCreated?(i=n.$.filter.firstElementChild,i.set("operator",n._appliedFiltering.operator),i.set("value",n._appliedFiltering.filters),i._applyValue(),i.rightToLeft=n.rightToLeft):(i=document.createElement("smart-multi-column-filter-panel"),i.rightToLeft=n.rightToLeft,i.animation=n.animation,i.dataSource=e,i.locale=n.locale,i.messages=n._innerElementMessages.multiColumnFilterPanel,i.operator=n._appliedFiltering.operator,i.editorPlaceholder=n.localize("filterValuePlaceholder"),i.theme=n.theme,i.value=n._appliedFiltering.filters,i.editorCallback=t,n.$.filter.appendChild(i),n._filterPartCreated=!0),n._openHeaderDropDown(n.$.filterButton)}openSortPanel(e){const t=this,n=t.dataSource;if(!n||0===n.length&&!n.virtualDataSource||t.disabled||"none"===t.headerPosition)return;let a;t._closeDialog(),t.$.headerDropDown.classList.add("sort-panel"),t.$.headerDropDown.classList.remove("customize-panel","filter-panel","format-panel","search-panel"),t.$.sort.classList.remove("smart-hidden"),t.$.customize.classList.add("smart-hidden"),t.$.filter.classList.add("smart-hidden"),t.$.format&&t.$.format.classList.add("smart-hidden"),t.$.group&&t.$.group.classList.add("smart-hidden"),t.$.search.classList.add("smart-hidden"),t._closeSearchPanel(),t._sortPartCreated?(a=t.$.sort.firstElementChild,a.rightToLeft=t.rightToLeft,a.set("dataSource",e),a.propertyChangedHandler("dataSource",void 0,e)):(a=document.createElement("smart-sort-panel"),a.rightToLeft=t.rightToLeft,a.animation=t.animation,a.dataSource=e,a.locale=t.locale,a.messages=t._innerElementMessages.sortPanel,a.theme=t.theme,t.$.sort.appendChild(a),t._sortPartCreated=!0),t._openHeaderDropDown(t.$.sortButton)}removeFilter(){this.addFilter([])}removeSort(){this.addSort({dataFields:[],dataTypes:[],orderBy:[]})}_clearFilterAndSortUI(){const e=this;e._appliedFiltering={filterGroups:[],filters:[],operator:"and"},e._appliedSorting={dataFields:[],dataTypes:[],orderBy:[]},e._appliedGrouping={dataFields:[]},e.$.filterButton.classList.remove("filtered"),e.$.sortButton.classList.remove("sorted"),e.$.filterButton.firstElementChild.innerHTML=e.localize("filter"),e.$.sortButton.firstElementChild.innerHTML=e.localize("sort")}_getInnerElementMessages(){const e=this,t=e.locale,n={columnPanel:{},groupPanel:{},multiColumnFilterPanel:{},sortPanel:{},formattingPanel:{},dateTimePicker:{}};n.formattingPanel[t]={add:e.localize("add"),all:e.localize("all"),apply:e.localize("apply"),between:e.localize("between"),cancel:e.localize("cancel"),close:e.localize("close"),column:e.localize("column"),condition:e.localize("condition"),equal:e.localize("equal"),fontFamily:e.localize("fontFamily"),fontSize:e.localize("fontSize"),format:e.localize("format"),greaterThan:e.localize("greaterThan"),highlight:e.localize("highlight"),lessThan:e.localize("lessThan"),notEqual:e.localize("notEqual"),remove:e.localize("remove"),secondValue:e.localize("secondValue"),text:e.localize("text"),value:e.localize("value")},n.columnPanel[t]={apply:e.localize("apply"),cancel:e.localize("cancel"),find:e.localize("find"),noResults:e.localize("noResults")},n.groupPanel[t]={apply:e.localize("apply"),cancel:e.localize("cancel"),collapseAll:e.localize("collapseAll"),expandAll:e.localize("expandAll"),firstBy:e.localize("firstByGroup"),noGrouping:e.localize("noGrouping"),pickAnother:e.localize("pickAnotherGroupBy"),stringFirst:e.localize("stringFirst"),stringLast:e.localize("stringLast"),thenBy:e.localize("thenBy"),from:e.localize("from"),booleanFirst:e.localize("booleanFirst"),booleanLast:e.localize("booleanLast"),dateFirst:e.localize("dateFirst"),dateLast:e.localize("dateLast"),numberFirst:e.localize("numberFirst"),numberLast:e.localize("numberLast")},n.multiColumnFilterPanel[t]={addFilter:e.localize("addFilter"),and:e.localize("and"),apply:e.localize("apply"),cancel:e.localize("cancel"),CONTAINS:e.localize("CONTAINS"),CONTAINS_CASE_SENSITIVE:e.localize("CONTAINS_CASE_SENSITIVE"),DOES_NOT_CONTAIN:e.localize("DOES_NOT_CONTAIN"),DOES_NOT_CONTAIN_CASE_SENSITIVE:e.localize("DOES_NOT_CONTAIN_CASE_SENSITIVE"),EMPTY:e.localize("EMPTY"),ENDS_WITH:e.localize("ENDS_WITH"),ENDS_WITH_CASE_SENSITIVE:e.localize("ENDS_WITH_CASE_SENSITIVE"),EQUAL:e.localize("EQUAL"),EQUAL_CASE_SENSITIVE:e.localize("EQUAL_CASE_SENSITIVE"),GREATER_THAN:e.localize("GREATER_THAN"),GREATER_THAN_OR_EQUAL:e.localize("GREATER_THAN_OR_EQUAL"),LESS_THAN:e.localize("LESS_THAN"),LESS_THAN_OR_EQUAL:e.localize("LESS_THAN_OR_EQUAL"),noFilters:e.localize("noFilters"),NOT_EMPTY:e.localize("NOT_EMPTY"),NOT_EQUAL:e.localize("NOT_EQUAL"),NOT_NULL:e.localize("NOT_NULL"),NULL:e.localize("NULL"),or:e.localize("or"),STARTS_WITH:e.localize("STARTS_WITH"),STARTS_WITH_CASE_SENSITIVE:e.localize("STARTS_WITH_CASE_SENSITIVE"),where:e.localize("where")},n.sortPanel[t]={apply:e.localize("apply"),booleanFirst:e.localize("booleanFirst"),booleanLast:e.localize("booleanLast"),cancel:e.localize("cancel"),dateFirst:e.localize("dateFirst"),dateLast:e.localize("dateLast"),firstBy:e.localize("firstBy"),from:e.localize("from"),numberFirst:e.localize("numberFirst"),numberLast:e.localize("numberLast"),noSorting:e.localize("noSorting"),pickAnother:e.localize("pickAnother"),stringFirst:e.localize("stringFirst"),stringLast:e.localize("stringLast"),thenBy:e.localize("thenBy")},n.dateTimePicker[t]={now:e.localize("now"),dateTabLabel:e.localize("dateTabLabel"),timeTabLabel:e.localize("timeTabLabel")},e._innerElementMessages=n}_handleHeaderPosition(e){const t=this,n=t.headerPosition,a=t.$.header;"none"!==n?(a.classList.remove("smart-hidden"),"top"===n&&a.nextElementSibling!==e?t.$.container.insertBefore(a,e):"bottom"===n&&a.previousElementSibling!==e&&t.$.container.insertBefore(a,t.$.loadingIndicatorContainer)):a.classList.add("smart-hidden")}_headerClickHandler(e){const t=this,n=t.$.headerDropDown;function a(i,o){n.classList.contains("smart-visibility-hidden")||i.classList.contains("smart-hidden")?t[o]():t.closePanel()}if(t.$.customizeButton.contains(e))a(t.$.customize,"openCustomizePanel");else if(t.$.filterButton.contains(e))a(t.$.filter,"openFilterPanel");else if(t.$.sortButton.contains(e))a(t.$.sort,"openSortPanel");else if(t.$.formatButton&&t.$.formatButton.contains(e))a(t.$.format,"openFormatPanel");else if(e===t.$.searchButton)a(t.$.search,"_openSearchPanel");else if(t.$.groupButton&&t.$.groupButton.contains(e))a(t.$.group,"openGroupPanel");else if(e===t.$.searchClose)t.closePanel();else if(e===t.$.searchPrev||e===t.$.searchNext){const i=t._searchInfo,o=i.foundIdsArray,r=e===t.$.searchNext,l=o.length;let s;if(void 0===i.highlighted)s=r?0:l-1;else{if(1===o.length)return;{const c=o.indexOf(i.highlighted);s=r?(c+1)%l:c-1>=0?c-1:l-1}}i.highlighted=o[s],t.grid?(t.grid.highlighted=i.highlighted,t.grid.ensureVisible(i.highlighted),t.grid._recycle(!1)):t.ensureVisible&&t.ensureVisible(i.highlighted),t.$.searchLabel.innerHTML=t.localize("found",{nth:s+1,n:o.length})}}_headerDropDownTransitionendHandler(e){const t=this,n=t.$.headerDropDown;e&&("visibility"!==e.propertyName||n.classList.contains("smart-visibility-hidden"))||(n.classList.contains("search-panel")?t.$.searchInput.focus():!1===t.unfocusable&&(!t._isMobile&&n.classList.contains("customize-panel")?n.querySelector("smart-column-panel").$.find.focus():n.classList.contains("filter-panel")?n.querySelector("smart-multi-column-filter-panel").$.addFilterButton.focus():n.classList.contains("sort-panel")&&n.querySelector("smart-sort-panel").$.inputNotSorted.focus()))}_localizeHeader(){const e=this;e.$.customizeButton.firstElementChild.innerHTML=e.localize("customize"),e.$.groupButton&&(e.$.groupButton.firstElementChild.innerHTML=e.localize("group")),e.$.filterButton.firstElementChild.innerHTML=0===e._appliedFiltering.filters.length?e.localize("filter"):1===e._appliedFiltering.filters.length?e.localize("filteredByOne"):e.localize("filteredByMultiple",{n:e._appliedFiltering.filters.length}),e.$.sortButton.firstElementChild.innerHTML=0===e._appliedSorting.dataFields.length?e.localize("sort"):1===e._appliedSorting.dataFields.length?e.localize("sortedByOne"):e.localize("sortedByMultiple",{n:e._appliedSorting.dataFields.length}),e.$.formatButton&&(e.$.formatButton.firstElementChild.innerHTML=e.localize("formating")),e.$.searchInput.placeholder=e.localize("findInView")}_openHeaderDropDown(e){const t=this,n=t.$.headerDropDown;"top"===t.headerPosition?(n.style.bottom=null,n.style.top="100%"):(n.style.top=null,n.style.bottom="100%"),n.style.left=e!==t.$.searchButton?e.offsetLeft-(t.rightToLeft?n.offsetWidth-e.offsetWidth:0)+"px":(t.rightToLeft?e.offsetLeft:e.offsetLeft+Math.max(25,e.offsetWidth)-n.offsetWidth)+"px",n.classList.remove("smart-visibility-hidden"),n.classList.add("open"),n.controlledBy&&(n.controlledBy.removeAttribute("aria-controls"),n.controlledBy.setAttribute("aria-expanded",!1)),n.controlledBy=e,e.setAttribute("aria-controls",n.id),e.setAttribute("aria-expanded",!0),t._headerDropDownTransitionendHandler()}_searchInputKeyupHandler(){const e=this;function t(){e._searchInfo&&e.$.searchInput.value!==e._searchInfo.query&&e._search(e.$.searchInput.value)}if(clearTimeout(e._searchInputTimeout),"Enter"===event.key&&e._searchInfo.foundIdsArray&&e._searchInfo.foundIdsArray.length>1)return t(),void e._headerClickHandler(e.$.searchNext,e.$.cardContainer||e.$.body);e._searchInputTimeout=setTimeout(t,500)}})},8588:()=>{Smart("smart-input",class extends Smart.BaseElement{static get properties(){return{autoCompleteDelay:{value:100,type:"number"},dataSource:{type:"any",value:[],reflectToAttribute:!1},dropDownClassList:{value:[],type:"array",reflectToAttribute:!1},dropDownDataSource:{type:"any",value:[]},dropDownHeight:{type:"any",value:200},dropDownOpenMode:{allowedValues:["default","manual"],value:"default",type:"string"},dropDownWidth:{type:"any",value:null},dropDownButtonPosition:{allowedValues:["none","left","right"],value:"none",type:"string"},hint:{type:"string",value:""},inputPurpose:{type:"string",value:"off"},items:{type:"number",value:8},minLength:{type:"number",value:1},name:{value:"",type:"string"},opened:{value:!1,type:"boolean"},query:{type:"string",value:""},queryMode:{allowedValues:["contains","containsIgnoreCase","doesNotContain","doesNotContainIgnoreCase","equals","equalsIgnoreCase","startsWith","startsWithIgnoreCase","endsWith","endsWithIgnoreCase"],type:"string",value:"containsIgnoreCase"},placeholder:{value:"",type:"string"},readonly:{type:"boolean",value:!1},sorted:{value:!1,type:"boolean"},sortDirection:{value:"asc",type:"string"},selectedIndex:{type:"number",value:-1},selectedValues:{value:[],type:"array"},type:{type:"string"},value:{type:"string",value:""}}}static get styleUrls(){return["smart.textbox.css"]}template(){return'<div id="inputContainer" role="presentation"><input class="smart-input" id=\'input\' readonly=\'[[readonly]]\' placeholder=\'[[placeholder]]\' type=\'[[type]]\' name=\'[[name]]\' value=\'{{value::keyup}}\' disabled=\'[[disabled]]\' aria-label="[[placeholder]]" /><span class="smart-hidden smart-hint" id="span">[[hint]]</span><div id="dropDownButton" tabindex=-1 class="smart-drop-down-button" role="button" aria-label="Toggle popup"><div id="arrow" class="arrow" aria-hidden="true"></div></div></div>'}static get listeners(){return{"input.focus":"_focusHandler","input.blur":"_blurHandler","input.keydown":"_keyDownHandler","input.keyup":"_keyUpHandler","input.keypress":"_keyPressHandler","input.paste":"_pasteHandler","dropDownButton.down":"_dropDownButtonDownHandler","inputContainer.down":"_downHandler","document.up":"_documentUpHandler"}}get selectedIndexes(){return this.isCompleted?[this.selectedIndex]:[]}set selectedIndexes(e){this.isCompleted&&(this.selectedIndex=e&&e[0]?e[0]:-1)}focus(){this.$.input.focus()}select(){const e=this;e.readonly?e.$.input.focus():e.$.input.select()}_documentUpHandler(e){const t=this,n=t.shadowRoot||t.isInShadowDOM?e.originalEvent.composedPath()[0]:e.originalEvent.target;n!==t&&n!==t.$.dropDownButton&&n!==t.$.input&&n!==t.$.arrow?t.$.scrollView.contains(n.shadowParent||n)?t._isPointerDown&&(t._isPointerDown=!1,t.opened&&(t._preventLookup=!0),t.$.input.focus()):(t.opened&&(t._preventLookup=!0),"manual"===t.dropDownOpenMode||t._isPointerDown||t.close(),t._isPointerDown=!1):t._isPointerDown=!1}_focusHandler(){const e=this;e.setAttribute("focus",""),e.readonly||0!==e.minLength||0!==e.$.input.value.length||e._preventLookup?(e.$.fireEvent("focus"),delete e._preventLookup):e._lookup()}_blurHandler(){const e=this;e.opened||e.removeAttribute("focus"),e.opened||e.$.fireEvent("blur"),e._refreshSelectedIndex(),delete e._preventLookup}_pasteHandler(e){const t=this,n=t.$.input,a=n.value,i=n.selectionStart,o=n.selectionEnd;if(!e.clipboardData&&!window.clipboardData)return;const r=(e.clipboardData||window.clipboardData).getData("text");let l=a.slice(0,i)+r,s=l.length;l+=a.slice(o),e.preventDefault(),t.set("value",l),t.setAttribute("data-value",l),n.setSelectionRange(s,s),t._refreshSelectedIndex()}_refreshSelectedIndex(){const e=this;let t=e.dataSource;if(t){let n=-1;if(e.dataSource instanceof Promise||"function"==typeof e.dataSource)return;"string"==typeof t&&(t=e.$.deserialize(t,"array"));for(let a=0;a<t.length;a++){let i=t[a];if("number"!=typeof i&&"boolean"!=typeof i||(i=""+i),"string"==typeof i){if(i===e.value){n=a;break}}else if(i&&i.label===e.value){n=a;break}}e.set("selectedIndex",n,!1),-1===e.selectedIndex&&(e.$.input.dataValue=null)}}selectItem(e){const t=this;let n=t.dataSource;if("string"==typeof n&&(n=t.$.deserialize(n,"array")),n)for(let a=0;a<n.length;a++){const i=n[a];if(t.set("selectedIndex",-1),t.set("value",""),t.$.input.dataValue=null,"string"==typeof i){if(i===e)return t.set("selectedIndex",a,!1),t.set("value",t.$.input.dataValue=e),void t.setAttribute("data-value",t.$.input.dataValue)}else if(i.value===e)return t.set("selectedIndex",a,!1),t.set("value",i.label),t.$.input.dataValue=e,void t.setAttribute("data-value",t.$.input.dataValue)}else t.set("value",t.$.input.dataValue=e),t.setAttribute("data-value",t.$.input.dataValue),t.set("selectedIndex",-1,!1)}getSelectedItem(){const e=this;return{label:e.value,value:e.$.input.dataValue||e.value}}_refreshMenu(){const e=this;e.$.menu.classList.remove("scroll"),e.$.scrollView.computedVerticalScrollBarVisibility&&e.$.menu.classList.add("scroll")}_performSelect(){const e=this,t=e.$.menu.querySelector(".active"),n=t.getAttribute("data-label"),a=t.dataValue,i=e.value,o=e.$.input.dataValue;e.set("value",n),e.$.input.dataValue=a,e.setAttribute("data-value",a),e.set("selectedIndex",t.index),e.set("selectedValues",[e.$.input.dataValue]),e.close(),n===i&&a===o||e.$.fireEvent("change",{value:a,label:n,oldValue:o,oldLabel:i})}_open(){const e=this;if(e.opened)return;const t=window.scrollX,n=window.scrollY;let a=e.getBoundingClientRect(),i=0,o=0;if(e.timer&&clearTimeout(e.timer),e.getRootNode()&&e.getRootNode().host?e.getRootNode().host.shadowRoot.appendChild(e.$.scrollView):document.body.appendChild(e.$.scrollView),e.setAttribute("aria-owns",e.$.scrollView.id),e.readonly||e.$.input.setAttribute("aria-controls",e.$.scrollView.id),e.$.scrollView.enableShadowDOM&&!e._importedStyle&&(e.$.scrollView.importStyle(e._getStyleUrl("smart.textbox.css")),e._importedStyle=!0),"static"!==getComputedStyle(document.body).position){const r=document.body.getBoundingClientRect();i=r.left,o=r.top}e.$.scrollView.style.setProperty("--smart-input-drop-down-menu-width",""),e.$.scrollView.style.left=-3+a.left+t-i+"px",e.$.scrollView.style.top=a.bottom+n-o+1+"px",e.$.scrollView.classList.remove("open"),e.opening=!0,e._positionTimer=setInterval(()=>{const r=e.getBoundingClientRect();if(e.opening)e.opening=!1,a=r;else if(r.top!==a.top||r.left!==a.left)return void e.close()},50),e.$.scrollView.onpointerdown=function(){e._isPointerDown=!0},requestAnimationFrame(function(){const r=e.dropDownWidth;if(e.$.scrollView.refresh&&e.$.scrollView.refresh(),e._refreshMenu(),e.$.scrollView.setAttribute("open",""),e.setAttribute("open",""),e.$.dropDownButton.setAttribute("open",""),e.$.input.setAttribute("open",""),r&&"string"==typeof r&&-1!==r.indexOf("%")){const l=parseFloat(r)/100;e.$.scrollView.style.setProperty("--smart-input-drop-down-menu-width",e.offsetWidth*l+"px")}else if("auto"!==r&&r)e.$.scrollView.style.setProperty("--smart-input-drop-down-menu-width",parseFloat(r)+"px");else if("auto"===r){if(e.$.scrollView.style.setProperty("--smart-input-drop-down-menu-width",""),e.$.scrollView.$.scrollViewerContainer.classList.contains("vscroll")){const l=e.$.scrollView.offsetWidth+parseFloat(getComputedStyle(e.$.scrollView).getPropertyValue("--smart-scroll-bar-size"));e.$.scrollView.style.setProperty("--smart-input-drop-down-menu-width",l+"px")}}else{e.$.menu.style.width="auto";let l=e.$.menu.offsetWidth;const s=e.$.menu.querySelectorAll("li");for(let c=0;c<s.length;c++)e._maxDropDownWidth=Math.max((s[c].firstElementChild||s[c]).offsetWidth,e._maxDropDownWidth);e.$.scrollView.computedVerticalScrollBarVisibility&&(l+=e.$.scrollView.$&&e.$.scrollView.$.verticalScrollBar?e.$.scrollView.$.verticalScrollBar.offsetWidth:30),e.$.scrollView.style.setProperty("--smart-input-drop-down-menu-width",Math.max(l,e.offsetWidth-8)+"px"),e.$.menu.style.width=""}(e.shadowRoot||e.isInShadowDOM)&&e.$.scrollView._scrollView&&Smart.ScrollBar&&requestAnimationFrame(()=>{e.$.scrollView._scrollView&&e.$.scrollView._scrollView.vScrollBar.refresh()})}),e.$.scrollView.refresh&&e.$.scrollView.refresh(),e._refreshMenu(),e.set("opened",!0),e.setAttribute("aria-expanded",!0),e.$.fireEvent("open")}close(){const e=this;return!!e.opened&&(e.timer&&clearTimeout(e.timer),e.timer=setTimeout(function(){e.$.scrollView.parentNode&&!e.opened&&(e.$.scrollView.remove(),e.removeAttribute("aria-owns"),e.readonly||e.$.input.removeAttribute("aria-controls"))},1e3),e._positionTimer&&clearInterval(e._positionTimer),e.$.scrollView.removeAttribute("open"),e.$.dropDownButton.removeAttribute("open"),e.$.input.removeAttribute("open"),e.removeAttribute("open"),e.set("opened",!1),e.setAttribute("aria-expanded",!1),e.$.input.focus(),e.$.fireEvent("close"),!0)}refresh(){const e=this;e.$.scrollView.refresh&&e.$.scrollView.refresh(),e.close()}_lookup(e){const t=this;if(t.query=t.$.input.value,t.$.input.readonly&&(t._incrementalSearchQuery||(t._incrementalSearchQuery=""),t._incrementalSearchQuery+=e.key,t._incrementalSearchTimer&&clearTimeout(t._incrementalSearchTimer),t.query=t._incrementalSearchQuery,t._incrementalSearchTimer=setTimeout(function(){t._incrementalSearchQuery=""},700)),t.query.length<t.minLength)return void t.close();const n=function(a){clearTimeout(t._autoCompleteTimeout),t._autoCompleteTimeout=setTimeout(()=>{const i=t.context;t.context=t,t._process(a),t.context=i},t.autoCompleteDelay)};"function"==typeof t.dataSource?t.dataSource(t.query,n):n(t.dataSource)}_downHandler(e){this.readonly&&this._dropDownButtonDownHandler(e)}_dropDownButtonDownHandler(e){const t=this;return"manual"!==t.dropDownOpenMode&&t._toggle(),e.preventDefault(),e.stopPropagation(),e.originalEvent.preventDefault(),e.originalEvent.stopPropagation(),t._isPointerDown=!0,!1}_toggle(){const e=this;e.opened?e.close():e.open()}open(){const e=this;function t(n){e._process(n);const a=e.$.menu.querySelector(".active");if(a){const i=e.$.input.dataValue;for(let o=0;o<e.$.menu.children.length;o++){const r=e.$.menu.children[o],l=r.getAttribute("data-label"),s=r.dataValue;if(void 0!==i&&s===i||void 0===i&&l===e.$.input.value){a.classList.remove("active"),r.classList.add("active"),e._setActiveDescendant(r),e.$.input.dataValue=s,e.setAttribute("data-value",s);break}}}e.ensureVisible(),e.$.input.focus(),setTimeout(function(){e.$.input.focus()},25)}e.dropDownDataSource&&(Array.isArray(e.dropDownDataSource)&&e.dropDownDataSource.length>0||"function"==typeof e.dropDownDataSource)?(e.query="","function"==typeof e.dropDownDataSource?e.dropDownDataSource(e.query,t):t(e.dropDownDataSource)):(e.query="","function"==typeof e.dataSource?e.dataSource(e.query,t):t(e.dataSource))}_process(e){const t=this;"string"==typeof e&&(e=t.$.deserialize(e,"array")),e=e.filter(function(n){return""===n||(t.matcher?t.matcher(n):t._matcher(n))}),e=t._sorter(e),t.sorted&&(e.sort((n,a)=>void 0!==n.label?n.label.localeCompare(a.label):n.localeCompare(a)),"desc"===t.sortDirection&&e.reverse()),!e.length&&t.opened&&t.close(),0!==e.length&&(t._render(t.query.length>0?e.slice(0,t.items):e),t._open(),t.$.scrollView.refresh&&t.$.scrollView.refresh(),t._refreshMenu(),t.ensureVisible())}_matcher(e){const t=this.query;switch(null===e&&(e="null"),e=""+(e=e.label||e),this.queryMode){case"startsWith":return e.startsWith(t);case"startsWithIgnoreCase":return e.toLowerCase().startsWith(t.toLowerCase());case"doesNotContain":return e.indexOf(t)<0;case"doesNotContainIgnoreCase":return e.toLowerCase().indexOf(t.toLowerCase())<0;case"contains":return e.indexOf(t)>-1;default:case"containsIgnoreCase":return~e.toLowerCase().indexOf(t.toLowerCase());case"equals":return 0===e.localeCompare(t);case"equalsIgnoreCase":return 0===e.toLowerCase().localeCompare(t.toLowerCase());case"endsWith":return e.endsWith(t);case"endsWithIgnoreCase":return e.toLowerCase().endsWith(t.toLowerCase())}}_sorter(e){const t=this;let n,a=[],i=[],o=[];if(e&&""===e[0])return e;for(;n=e.shift();){let r=n.label||n;r=""+r,r.toLowerCase().indexOf(t.query.toLowerCase())?~r.indexOf(t.query)?i.push(n):o.push(n):a.push(n)}return a.concat(i,o)}_highlighter(e){const t=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return e.replace(new RegExp("("+t+")","ig"),function(n,a){return"<strong>"+a+"</strong>"})}_render(e){const t=this;let n=0;const a=e.map(function(o){let r=o,l=o;"object"==typeof o&&(r=o.label,l=void 0!==o.value?o.value:r),r=""+r;const s=document.createElement("li"),c=document.createElement("a");if(c.href="#",s.id=t.id+"Item"+Math.floor(65536*(1+Math.random())).toString(16).substring(1),s.setAttribute("data-label",r),s.index=n++,s.dataValue=l,s.setAttribute("value","string"==typeof l?l:JSON.stringify(l)),s.setAttribute("role","option"),s.setAttribute("aria-label",r),c.innerHTML=t.highlighter?t.highlighter(r):t._highlighter(r),c.setAttribute("aria-hidden",!0),o.icon&&(c.classList.add("icon"),c.classList.add(o.icon)),o.prefix){const u=document.createElement("span");u.innerHTML=o.prefix,c.classList.add("has-prefix"),c.innerHTML=u.innerHTML+c.innerHTML}if(o.suffix){const u=document.createElement("span");u.innerHTML=o.suffix,c.classList.add("has-suffix"),c.innerHTML=c.innerHTML+u.innerHTML}return s.appendChild(c),s});function i(){const o=t.$.menu.getElementsByClassName("active");o[0]&&o[0].classList.remove("active"),this.classList.add("active"),t._setActiveDescendant(this)}a.length>0&&(a[0].classList.add("active"),t._setActiveDescendant(a[0])),t.$.menu.innerHTML="";for(let o=0;o<a.length;o++){const r=a[o];t.$.menu.appendChild(r),r.onmouseenter=i,r.onmouseleave=function(){this.classList.remove("active"),t._setActiveDescendant(null)},r.onclick=i}}ensureVisible(){const e=this,t=e.$.menu.querySelector(".active");t&&(t.offsetTop+t.offsetHeight>=e.$.scrollView.scrollTop+e.$.scrollView.offsetHeight&&(e.$.scrollView.scrollTop=t.offsetTop+t.offsetHeight),(t.offsetTop<=e.$.scrollView.scrollTop||t.offsetTop>=e.$.scrollView.scrollTop+e.$.scrollView.offsetHeight)&&(e.$.scrollView.scrollTop=t.offsetTop),0===[...e.$.menu.children].indexOf(t)?e.$.scrollView.scrollTop=0:[...e.$.menu.children].indexOf(t)===e.$.menu.children.length-1&&(e.$.scrollView.scrollTop=e.$.scrollView.scrollHeight))}_next(){const e=this,t=e.$.menu.querySelector(".active");if(!t){const a=e.$.menu.firstElementChild;return a.classList.add("active"),void e._setActiveDescendant(a)}t.classList.remove("active");let n=t.nextElementSibling;n||(n=e.$.menu.firstElementChild),n.classList.add("active"),e._setActiveDescendant(n),e.ensureVisible()}_prev(){const e=this,t=e.$.menu.querySelector(".active");if(!t){const a=e.$.menu.firstElementChild;return a.classList.add("active"),void e._setActiveDescendant(a)}t.classList.remove("active");let n=t.previousElementSibling;n||(n=e.$.menu.lastElementChild),n.classList.add("active"),e._setActiveDescendant(n),e.ensureVisible()}_move(e){const t=this;if(t.opened){switch(e.keyCode){case 9:case 13:case 27:e.preventDefault();break;case 38:e.preventDefault(),t._prev();break;case 40:e.preventDefault(),t._next()}e.stopPropagation()}}_keyDownHandler(e){const t=this;t._suppressKeyPressRepeat=![40,38,9,13,27,16,17,18].includes(e.keyCode),t._oldValue=t.$.input.value,e.shiftKey||e.altKey||e.ctrlKey||t._move(e)}_keyPressHandler(e){this._suppressKeyPressRepeat||e.shiftKey||e.altKey||e.ctrlKey||this._move(e)}_keyUpHandler(e){const t=this;if(!e.shiftKey)switch(e.keyCode){case 40:case 38:case 16:case 17:case 18:40===e.keyCode&&e.altKey&&t.open(),38===e.keyCode&&e.altKey&&t.close();break;case 9:case 13:if(!t.opened)return;t._performSelect(),e.stopPropagation(),e.preventDefault();break;case 27:if(!t.opened)return;t.close(),e.stopPropagation(),e.preventDefault();break;default:t._lookup(e),!t.opened||e.ctrlKey||e.shiftKey||(e.stopPropagation(),e.preventDefault()),t.$.fireEvent("changing",{value:t.$.input.value,oldValue:t._oldValue}),t.$.input.dataValue=t.$.input.value,t.setAttribute("data-value",t.$.input.dataValue)}}propertyChangedHandler(e,t,n){super.propertyChangedHandler(e,t,n);const a=this;if("selectedIndex"===e)a._setSelection();else if("dropDownClassList"===e){const i=a.$.scrollView;for(let o=0,r=t.length;o<r;o+=1)i.classList.remove(t[o]);for(let o=0,r=n.length;o<r;o+=1)i.classList.add(n[o])}else if("dropDownHeight"===e)a.$.scrollView.style.setProperty("--smart-input-drop-down-menu-height","auto"!==a.dropDownHeight?a.dropDownHeight+"px":"auto");else if("opened"===e)a.opened=t,n?a.open():a.close();else if("placeholder"===e){if(a.readonly){const i=a.getAttribute("aria-label");if(i&&i!==t)return;n?a.setAttribute("aria-label",n):a.removeAttribute("aria-label")}}else if("selectedValues"===e)if(null===n)a.$.input.value="",a.$.input.dataValue=n,a.setAttribute("data-value",n),a._refreshSelectedIndex();else{const i=n.join(","),o=a.value;a.value=i,a.propertyChangedHandler("value",o,a.value)}else"value"===e?(a.displayMember!==a.valueMember&&"string"!=typeof n?(a.set("value",n[a.displayMember]),a.$.input.dataValue=n[a.valueMember],a.setAttribute("data-value",a.$.input.dataValue)):(a.$.input.value=a.$.input.dataValue=n,a.setAttribute("data-value",n)),a._refreshSelectedIndex()):"readonly"===e?(a._setAriaRelations(),a._setInputPurpose()):"theme"===e||"rightToLeft"===e?a.$.scrollView[e]=n:"inputPurpose"===e?a._setInputPurpose():"inverted"===e?n?a.$.scrollView.setAttribute("inverted",""):a.$.scrollView.removeAttribute("inverted"):"disabled"!==e&&"unfocusable"!==e||a._setFocusable()}detached(){super.detached(),this.close(),this.removeAttribute("focus")}render(){const e=this,t=e.dropDownClassList;e._createElement&&e._createElement();const n=e.$.scrollView;for(let i=0,o=t.length;i<o;i+=1)n.classList.add(t[i]);e.opened&&(e.opened=!1,e.open());const a=e.$.menu;a&&(a.setAttribute("role","presentation"),n.appendChild(a)),n.style.setProperty("--smart-input-drop-down-menu-height","auto"!==e.dropDownHeight?e.dropDownHeight+"px":"auto"),n.classList.add("smart-input-drop-down-menu");for(let i=0;i<e.classList.length;i++){const o=e.classList[i];"smart-element"!==o&&"smart-input"!==o&&n.classList.add(o+"-drop-down-menu")}n.id=e.id+"_"+e.tagName.toLowerCase()+"_menu_"+Math.floor(65536*(1+Math.random())).toString(16).substring(1),n.ownerElement=e,e._setAriaRelations(),e._setInputPurpose(),e._setSelection(),e.isInitialized=!0,super.render()}_setSelection(){const e=this;let t=e.dataSource;if("string"==typeof t&&(t=e.$.deserialize(t,"array")),e.selectedIndex>=0&&t&&t.length>0){let n=t[e.selectedIndex];if("number"!=typeof n&&"boolean"!=typeof n||(n=""+n),"string"==typeof n){let a=e.$.input.dataValue,i=e.value;e.set("value",n),e.$.input.dataValue=n,e.$.input.setAttribute("data-value",n),e.selectedValues=[e.$.input.dataValue],e.isInitialized&&e.$.fireEvent("change",{value:e.value,label:e.label,oldValue:a,oldLabel:i})}else{let a=e.$.input.dataValue,i=e.value;n.value?(e.set("value",void 0!==n.value?n.value+"":""),e.$.input.dataValue=n.value,e.$.input.setAttribute("data-value",n.value),e.selectedValues=[e.$.input.dataValue]):n.label&&(e.selectedValues=[n.value]),n.label&&e.set("value",n.label),e.isInitialized&&e.$.fireEvent("change",{value:e.$.input.dataValue,label:n.value,oldValue:a,oldLabel:i})}}}_createElement(){const e=this,t=document.createElement("ul"),n=document.createElement("smart-scroll-viewer");n.rightToLeft=e.rightToLeft,n.theme=e.theme,n.horizontalScrollBarVisibility="hidden",e.inverted?n.setAttribute("inverted",""):n.removeAttribute("inverted"),e.$.scrollView=n,e.$.menu=t,e._setFocusable(),e.$.menu.onclick=function(a){const i=a.target.closest("li");a.stopPropagation(),a.preventDefault(),e._performSelect(),i&&e.$.fireEvent("itemClick",{item:i,label:i.getAttribute("aria-label"),value:i.dataValue}),e.$.input.focus()}}_setAriaRelations(){const e=this,t=e.getAttribute("aria-label");e.readonly?(e.setAttribute("role","button"),!t&&e.placeholder&&e.setAttribute("aria-label",e.placeholder),e.removeAttribute("aria-readonly"),e.$.input.setAttribute("aria-hidden",!0),e.$.input.removeAttribute("aria-activedescendant"),e.$.input.removeAttribute("aria-controls"),e.$.dropDownButton.setAttribute("aria-hidden",!0)):(e.setAttribute("role","combobox"),t&&t===e.placeholder&&e.removeAttribute("aria-label"),e.$.input.setAttribute("role","searchbox"),e.$.input.removeAttribute("aria-hidden",!0),e.$.dropDownButton.removeAttribute("aria-hidden")),e.setAttribute("aria-expanded",e.opened),e.setAttribute("aria-haspopup","listbox"),e.setAttribute("aria-owns",e.$.scrollView.id),e.$.scrollView.setAttribute("role","listbox")}_setActiveDescendant(e){const t=this;t.readonly||(e?t.setAttribute("aria-activedescendant",e.id):t.removeAttribute("aria-activedescendant"))}_setInputPurpose(){const e=this;e.readonly?e.$.input.removeAttribute("autocomplete"):e.$.input.setAttribute("autocomplete",e.inputPurpose)}_setFocusable(){const e=this;e.disabled||e.unfocusable?e.$.input.setAttribute("tabindex",-1):e.$.input.removeAttribute("tabindex")}})},5707:()=>{Smart("smart-list-item",class extends Smart.ContentElement{static get properties(){return{alternationIndex:{value:-1,type:"int"},color:{value:"",type:"string"},displayMode:{allowedValues:["plain","checkBox","radioButton"],value:"plain",type:"string"},grouped:{value:!1,type:"boolean"},selected:{value:!1,type:"boolean"},value:{value:"",type:"string"},label:{value:"",type:"string"},details:{value:"",type:"string"},group:{value:"",type:"string"},hidden:{value:!1,type:"boolean"},readonly:{value:!1,type:"boolean"}}}get hasStyleObserver(){return!1}get enableShadowDOM(){return!1}get _focused(){const e=this;return void 0===e.__focused&&(e.__focused=!1),e.__focused}set _focused(e){const t=this;t.__focused=e,e?(t.setAttribute("focus",""),t.ownerListBox&&t.ownerListBox.ownerElement&&Smart.ComboBox&&t.ownerListBox.ownerElement instanceof Smart.ComboBox&&t.ownerListBox.ownerElement.$.input.setAttribute("aria-activedescendant",t.id)):t.removeAttribute("focus")}template(){return'<div id="container">\n                   <span id=\'itemInput\' class=\'smart-input smart-hidden\'></span>\n                    <span class="smart-overlay" id="overlay"></span>\n                    <div id="itemContainer" class="smart-content smart-list-item-container"><span class="smart-content-label" inner-h-t-m-l=\'[[innerHTML]]\' role="presentation"><content></content></span><span inner-h-t-m-l=\'[[details]]\' id="details" class="smart-content-details"></span></div>\n                </div>'}appendChild(e){const t=this;if(!t.isCompleted||e.classList&&e.classList.contains("smart-ripple")){const n=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.appendChild.apply(t,n.concat(Array.prototype.slice.call(arguments)))}window.smartBlazor?t.$.itemContainer.appendChild(e):(t.$.itemContainer.innerHTML="",e instanceof HTMLElement&&t.$.itemContainer.appendChild(e))}insertBefore(e,t){const n=this;if(!n.isCompleted){const a=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.insertBefore.apply(n,a.concat(Array.prototype.slice.call(arguments)))}t.parentNode.insertBefore(e,t)}removeChild(e){const t=this;if(!t.isCompleted||e.classList.contains("smart-ripple")){const n=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.removeChild.apply(t,n.concat(Array.prototype.slice.call(arguments)))}e instanceof HTMLElement&&t.$.itemContainer.removeChild(e)}attached(){super.attached(),this.ownerListBox=this.getListBox()}static get listeners(){return{mouseenter:"_itemOnMouseEnter",mouseleave:"_itemOnMouseLeave"}}ready(){super.ready();const e=this;e.setAttribute("role","option"),""!==e.label?e.innerHTML=e.label:""!==e.innerHTML&&(e.label=e.innerHTML),e._setDisplayMode(e.displayMode),e._setItemColor(),e.$.container.noRipple=!0}propertyChangedHandler(e,t,n){const a=this;if(super.propertyChangedHandler(e,t,n),"hidden"===e)n?a.$.addClass("smart-hidden"):a.$.removeClass("smart-hidden");else if("color"===e)a._setItemColor();else if("displayMode"===e)a._setDisplayMode(n);else if("label"===e||"value"===e){const i=a.context;a.context=document,"label"===e&&(a.innerHTML=n);const o=a.getListBox();o._applyTemplate(a),o.onItemUpdated(a),a.context=i}else if("details"===e){const i=a.context;a.context=document,a.$.details.innerHTML=n,a.getListBox().onItemUpdated(a),a.context=i}else if("innerHTML"===e)a.getListBox().onItemUpdated(a);else if("selected"===e)if(n)a.setAttribute("aria-selected",!0);else{const i=a.getListBox();a.readonly||a.disabled||!i||-1===["oneOrManyExtended","zeroOrMany","oneOrMany","checkBox"].indexOf(i.selectionMode)?a.removeAttribute("aria-selected"):a.setAttribute("aria-selected",!1)}}getListBox(){const e=this;if(!Smart.ListBox)return e.getRootNode().host;let t=e.parentNode;for(;t instanceof Smart.ListBox==0&&null!==t;)t=t.parentNode;return!t&&Smart.EnableShadowDOM?e.getRootNode().host:t}_itemOnMouseEnter(){const e=this;!e.disabled&&e.ownerListBox&&(Smart.ListBox.DragDrop.Dragging&&e.ownerListBox.allowDrop&&(Smart.ListBox.DragDrop.DropDetails={item:e,position:"bottom"}),e.ownerListBox.$.verticalScrollBar.thumbCapture||e.ownerListBox.$.horizontalScrollBar.thumbCapture||e.setAttribute("hover",""))}_itemOnMouseMove(e){const t=this;if(t.ownerListBox&&Smart.ListBox.DragDrop.Dragging&&t.ownerListBox.allowDrop&&!Smart.Utilities.Core.isMobile){const n=[].slice.call(t.ownerListBox.getElementsByClassName("smart-list-item-bottom-line-feedback"));for(let i=0;i<n.length;i++)n[i].$.removeClass("smart-list-item-line-feedback"),n[i].$.removeClass("smart-list-item-bottom-line-feedback");if(Smart.ListBox.DragDrop.DropDetails={item:t,position:"top"},!t.ownerListBox._areCSSVarsSupported){if(t.ownerListBox._indexOf(t)===t.ownerListBox._items.length-1||t.parentNode.lastElementChild===t){const i=t.getBoundingClientRect();e.pageY-window.pageYOffset>i.top+i.height/2-1&&(Smart.ListBox.DragDrop.DropDetails={item:t,position:"bottom"})}return}if(t.$.removeClass("smart-list-item-line-feedback"),t.$.removeClass("smart-list-item-bottom-line-feedback"),t.ownerListBox.sorted&&t.ownerListBox.autoSort)return;const a=t.ownerListBox._items.filter(i=>!i.hidden);if(a.indexOf(t)===a.length-1||t.parentNode.lastElementChild===t){const i=t.getBoundingClientRect();e.pageY-window.pageYOffset>i.top+i.height/2-1?(t.$.addClass("smart-list-item-bottom-line-feedback"),Smart.ListBox.DragDrop.DropDetails={item:t,position:"bottom"}):arguments[1]||t.$.addClass("smart-list-item-line-feedback")}else arguments[1]||t.$.addClass("smart-list-item-line-feedback")}}_itemOnMouseLeave(){const e=this;e.ownerListBox&&(Smart.ListBox.DragDrop.Dragging&&(e.$.removeClass("smart-list-item-line-feedback"),e.$.removeClass("smart-list-item-bottom-line-feedback")),e.removeAttribute("hover"))}_setDisplayMode(e){const t=this,n=t.getListBox();n&&(t.displayMode=e="checkBox"===n.selectionMode||"radioButton"===n.selectionMode?n.selectionMode:"plain"),"plain"!==e?t.$itemInput.removeClass("smart-hidden"):t.$itemInput.addClass("smart-hidden")}_setItemColor(){const e=this,t=e.querySelector(".smart-content-label"),n=/(^#[0-9A-F]{3}$)|(^#[0-9A-F]{6}$)|(^#[0-9A-F]{8}$)/i.test(e.color)?e.color:"";t.style.backgroundColor=n,t.style.color=e._getContrastColor(n)}_getContrastColor(e){if(!e)return"";let t=(n=e.slice(1,3),a=e.slice(3,5),i=e.slice(5,7),[parseInt(n,16),parseInt(a,16),parseInt(i,16)]);var n,a,i;return parseFloat(((.299*t[0]+.61*t[1]+.114*t[2])/255).toFixed(2))>.65?"#000000":"#FFFFFF"}}),Smart("smart-list-items-group",class extends Smart.ContentElement{static get properties(){return{label:{value:"",type:"string"}}}get enableShadowDOM(){return!1}template(){return'<div id="container" role="presentation">\n                 <span id="itemsLabel" class="smart-list-items-group-label">[[label]]</span>\n                 <div id="listItemsGroupContainer" inner-h-t-m-l=\'[[innerHTML]]\' class="smart-list-items-group-container" role="presentation">\n                    <content></content>\n                 </div>\n               </div>'}appendChild(e){const t=this;if(!t.isCompleted){const n=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.appendChild.apply(t,n.concat(Array.prototype.slice.call(arguments)))}e instanceof HTMLElement&&t.$.listItemsGroupContainer.appendChild(e)}removeChild(e){const t=this;if(!t.isCompleted){const n=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.removeChild.apply(t,n.concat(Array.prototype.slice.call(arguments)))}e instanceof HTMLElement&&t.$.listItemsGroupContainer.removeChild(e)}getListBox(){let e=this.parentNode;for(;e instanceof Smart.ListBox==0&&null!==e;)e=e.parentNode;return e}attached(){const e=this;super.attached(),e.ownerListBox||(e.ownerListBox=e.getListBox()),e.setAttribute("role","group"),e.$.itemsLabel.id||(e.$.itemsLabel.id=e.id+"Label"),e.setAttribute("aria-labelledby",e.$.itemsLabel.id)}}),Smart("smart-list-box",class extends Smart.ScrollViewer{static get properties(){return{allowDrag:{value:!1,type:"boolean"},allowDrop:{value:!1,type:"boolean"},alternationStart:{value:0,type:"int"},alternationEnd:{value:0,type:"int"},alternationCount:{value:0,type:"int"},autoSort:{value:!0,type:"boolean"},dataSource:{value:null,type:"any?",reflectToAttribute:!1},dragFeedbackFormatFunction:{value:null,type:"function?"},dragOffset:{value:[10,10],type:"array"},displayLoadingIndicator:{value:!1,type:"boolean"},displayMember:{value:"",type:"string"},shadowDomMode:{allowedValues:["light","shadow"],value:"shadow",type:"string"},dropAction:{value:"move",type:"string",allowedValues:["copy","move","none"]},editable:{value:!1,type:"boolean"},filterable:{value:!1,type:"boolean"},filterCallback:{value:null,type:"function?"},filterMode:{value:"containsIgnoreCase",allowedValues:["contains","containsIgnoreCase","doesNotContain","doesNotContainIgnoreCase","equals","equalsIgnoreCase","startsWith","startsWithIgnoreCase","endsWith","endsWithIgnoreCase","custom"],type:"string"},filterInputPlaceholder:{value:"",type:"string"},grouped:{value:!1,type:"boolean"},groupMember:{value:"",type:"string"},itemTemplate:{value:null,type:"any"},itemHeight:{value:null,type:"number?"},incrementalSearchDelay:{value:700,type:"number?"},incrementalSearchMode:{value:"startsWithIgnoreCase",allowedValues:["contains","containsIgnoreCase","doesNotContain","doesNotContainIgnoreCase","equals","equalsIgnoreCase","startsWith","startsWithIgnoreCase","endsWith","endsWithIgnoreCase"],type:"string"},itemMeasureMode:{value:"auto",allowedValues:["auto","precise"],type:"string"},loadingIndicatorPlaceholder:{value:"Loading...",type:"string"},loadingIndicatorPosition:{value:"center",allowedValues:["bottom","center","top"],type:"string"},messages:{extend:!0,value:{en:{overridingProperties:'{{elementType}}: Overriding properties {{property1}} and {{property2}} applied. The "{{property1}}" property is used by default.',invalidIndex:'{{elementType}}: "{{method}}" method accepts an index of type number or an Array of numbers.',indexOutOfBound:'{{elementType}}: Out of bound index/indexes in "{{method}}" method.',invalidItem:'{{elementType}}: "{{method}}" method accepts an object or an array of objects as it\'s second parameter.',invalidSettings:'{{elementType}}: "{{method}}" method accepts a string or an object as it\'s second parameter.'}},type:"object"},name:{value:"",type:"string"},placeholder:{value:"No Items",type:"string"},selectedIndexes:{value:[],type:"array"},selectedValues:{value:[],type:"array"},selectionMode:{value:"oneOrManyExtended",allowedValues:["none","oneOrManyExtended","zeroOrMany","oneOrMany","zeroOrOne","zeroAndOne","one","checkBox","radioButton"],type:"string"},selectionChangeAction:{value:"release",allowedValues:["press","release"],type:"string"},sorted:{value:!1,type:"boolean"},sortDirection:{value:"asc",type:"string"},topVisibleIndex:{value:-1,type:"int"},type:{value:"list",type:"string",defaultReflectToAttribute:!0,readonly:!0},valueMember:{value:"",type:"string"},virtualized:{value:!1,type:"boolean"}}}static get requires(){return{"Smart.ScrollBar":"smart.scrollbar.js"}}static get styleUrls(){return["smart.listbox.css","smart.dropdown.css","smart.scrollbar.css"]}static get listeners(){return{focus:"_focusHandler",blur:"_blurHandler","container.wheel":"_mouseWheelHandler","editInput.change":"_editInputEventHandler","editInput.blur":"_editInputEventHandler","editInput.keydown":"_editInputEventHandler","horizontalScrollBar.change":"_horizontalScrollbarHandler","itemsInnerContainer.down":"_downHandler","itemsInnerContainer.dblclick":"_dblclickEventHandler","itemsInnerContainer.move":"_itemsContainerMoveHandler","itemsContainer.mouseleave":"_mouseLeaveHandler","itemsInnerContainer.touchmove":"_touchmoveHandler","itemsInnerContainer.touchstart":"_touchstartHandler","document.move":"_moveHandler",keydown:"_keyDownHandler",keyup:"_keyUpHandler",resize:"_resizeHandler",selectstart:"_selectStartHandler",styleChanged:"_styleChangedHandler",swipeleft:"_swipeLeftHandler",swiperight:"_swipeRightHandler",touchmove:"_overriddenHandler",touchstart:"_overriddenHandler","verticalScrollBar.change":"_verticalScrollbarHandler"}}template(){return'<div id="container" class="smart-container" role="presentation">\n                    <div class="smart-list-box-filter-input-container smart-hidden" id="filterInputContainer" role="presentation"><input id="filterInput" disabled="[[disabled]]" placeholder=\'[[filterInputPlaceholder]]\' role="searchbox" aria-label="[[filterInputPlaceholder]]"></div>\n                    <div id="itemsContainer" class="smart-list-items-container" role="presentation">\n                        <div id="placeholder" class="smart-placeholder" role="presentation" aria-hidden="true">[[placeholder]]</div>\n                        <div id="itemsInnerContainer" inner-h-t-m-l=\'[[innerHTML]]\' class="smart-list-items-inner-container" role="presentation">\n                            <content></content>\n                        </div>\n                        <input type="text" id="editInput" class= "smart-hidden"/>\n                    </div>\n                    <smart-scroll-bar wait theme="[[theme]]" right-to-left="[[rightToLeft]]" id="verticalScrollBar" disabled="[[disabled]]" orientation="vertical"></smart-scroll-bar>\n                    <smart-scroll-bar wait theme="[[theme]]" right-to-left="[[rightToLeft]]" id="horizontalScrollBar" disabled="[[disabled]]"></smart-scroll-bar>\n                    <div id="loadingIndicatorContainer" class="smart-loader-container" role="presentation">\n                        <span id="loadingIndicator" class="smart-loader" role="img" aria-label="[[loadingIndicatorPlaceholder]]"></span>\n                        <span id="loadingIndicatorPlaceHolder" class="smart-loader-label smart-hidden">[[loadingIndicatorPlaceholder]]</span>\n                    </div>\n                    <input id="hiddenInput" type="hidden" name="[[name]]">\n                </div>'}get value(){const e=this;return e.isRendered&&e._selectedItems.length>0?e._selectedItems.map(t=>({label:t.label,value:t.value})):null}set value(e){const t=this;if(Array.isArray(e)){const a=t.context;t.context=t,t._isUpdating++,t.selectedValues=[],t.clearSelection();for(let i=0;i<e.length;i++){const r=t.getItem(e[i]);r&&("oneOrManyExtended"===t.selectionMode?t._select(r):t.select(r))}return t.context=a,void t._isUpdating--}const n=t.getItem(e);n&&t.select(n)}get _selectedItems(){const e=this,t=[];if(e.isRendered)for(let n=0;n<e._items.length;n++){const a=e._items[n];a.selected&&t.push(a)}return t}_mouseLeaveHandler(){const e=[].slice.call(this.getElementsByClassName("smart-list-item-bottom-line-feedback"));for(let t=0;t<e.length;t++)e[t].$.removeClass("smart-list-item-line-feedback"),e[t].$.removeClass("smart-list-item-bottom-line-feedback")}_downHandler(e){const t=this;if(t.disabled||t.displayLoadingIndicator||t.readonly)return;let n=e.originalEvent.target,a=null;if(!(n instanceof Smart.ListItem)||n.disabled||n.hidden||n instanceof Smart.ListItemsGroup)for(;n.parentElement;){if(n instanceof Smart.ListItem&&!n.disabled&&!n.hidden&&!(n instanceof Smart.ListItemsGroup)){a=n.dataItem;break}n=n.parentElement}else a=n.dataItem;Smart.ListBox.DragDrop.StartTime=new Date,Smart.ListBox.DragDrop.StartPosition={left:e.pageX,top:e.pageY},a&&(e.stopPropagation(),t.hasRippleAnimation&&(a.readonly||a.disabled||Smart.Utilities.Animation.Ripple.animate(n.$.overlay,e.pageX,e.pageY)),Smart.Utilities.Core.isMobile||"press"!==t.selectionChangeAction||(t._focus(a),t.select(a)),!Smart.ListBox.DragDrop.Feedback&&t.allowDrag&&(Smart.ListBox.DragDrop.DraggedFrom=t,Smart.ListBox.DragDrop.Feedback=document.createElement("span"),t.rightToLeft?Smart.ListBox.DragDrop.Feedback.setAttribute("right-to-left",!0):Smart.ListBox.DragDrop.Feedback.removeAttribute("right-to-left"),t.dragFeedbackFormatFunction?Smart.ListBox.DragDrop.Feedback.innerHTML=t.dragFeedbackFormatFunction(a):Smart.ListBox.DragDrop.Feedback.appendChild(a.offsetHeight?a.cloneNode(!0):t._createItem(a)),Smart.ListBox.DragDrop.Item=a,Smart.Utilities.Extend(Smart.ListBox.DragDrop.Feedback).addClass("smart-popup smart-list-item smart-list-item-feedback")))}_dblclickEventHandler(e){const t=this;if(!t.editable)return;const n=e.target.closest("smart-list-item");n instanceof Smart.ListItem&&!n.disabled&&!n.readonly?(t.$.editInput.dir=t.rightToLeft?"rtl":"ltr",t.$.editInput.style.width=t.$.itemsInnerContainer.offsetWidth+"px",t.$.editInput.owner=n,t.$.editInput.value=n.label,t.$.editInput.style.height=n.offsetHeight+"px",t.$.editInput.style.top=n.offsetTop+t.$.itemsInnerContainer.offsetTop+"px",t.$.editInput.setAttribute("aria-label","Edit item "+n.label),t.$editInput.hasClass("smart-hidden")&&t.$editInput.removeClass("smart-hidden"),t.$.editInput.focus({preventScroll:!0})):t.$editInput.addClass("smart-hidden")}_editInputEventHandler(e){const t=this;if("blur"===e.type||"keydown"===e.type&&"Escape"===e.key)return t.$editInput.hasClass("smart-hidden")||t.$editInput.addClass("smart-hidden"),void t.focus();if("keydown"===e.type||t.$editInput.hasClass("smart-hidden"))return;const n=e.target;if(e.stopPropagation(),n.owner.label!==n.value&&(n.owner.label=n.value,t.itemTemplate&&t._applyTemplate(n.owner),t.dataSource)){const i=t.dataSource[n.owner.dataIndex];i&&(t.displayMember?i[t.displayMember]=n.value:i.label=n.value)}t.$editInput.addClass("smart-hidden"),t.$.fireEvent("itemLabelChange",{selected:n.owner.selected,disabled:n.owner.disabled,index:t._indexOf(n.owner),label:n.owner.label,value:n.owner.value})}_pointerUpHandler(e){const t=this;let n=e.originalEvent,a=n.target;(t.shadowRoot||t.isInShadowDOM)&&(a=n.originalEvent?n.originalEvent.composedPath()[0]:n.composedPath()[0]);const i=o=>{const r=o.ownerListBox;r.disabled||r!==t||r.displayLoadingIndicator||"none"===r.selectionMode||o.grouped||o.readonly||(r._focus(o),r.select(o),Smart.ListBox.DragDrop.StartPosition=null,t.$.fireEvent("itemClick",{selected:a.selected,disabled:a.disabled,index:t._indexOf(a),label:a.label,value:a.value}))};if(!(n.target instanceof Smart.ListItem)||n.target.disabled||n.target instanceof Smart.ListItemsGroup){for(;a.parentElement;){if(a instanceof Smart.ListItem&&!a.disabled&&!(a instanceof Smart.ListItemsGroup))return void i(a.dataItem);a=a.parentElement}if(this.shadowRoot&&"shadow"===this.shadowDomMode){const o=n.composedPath();for(let r=0;r<o.length;r++){const l=o[r];l instanceof Smart.ListItem&&!l.disabled&&i(l.dataItem)}}}else i(a.dataItem)}_upHandler(e){const t=this;if(super._upHandler(),!t.disabled&&!t.readonly&&Smart.ListBox.DragDrop.StartPosition){if(Smart.Utilities.Core.isMobile&&!Smart.ListBox.DragDrop.Dragging){const n=Math.abs(e.pageX-Smart.ListBox.DragDrop.StartPosition.left),a=Math.abs(e.pageY-Smart.ListBox.DragDrop.StartPosition.top);let i=n>=0&&n<=3&&a>=0&&a<=3;if(Smart.Utilities.Core.isMobile&&new Date-Smart.ListBox.DragDrop.StartTime>=300&&(i=!1,Smart.ListBox.DragDrop.StartTime=null),i){const o=e.originalEvent.target.closest("smart-list-box");o?o._pointerUpHandler(e):t._pointerUpHandler(e),Smart.ListBox.DragDrop.StartPosition=null}else{let o=e.originalEvent.target;if(!(e.target instanceof Smart.ListItem)||o.readonly||e.target.disabled||e.target instanceof Smart.ListItemsGroup)for(;o.parentElement;){if(o instanceof Smart.ListItem&&!o.readonly&&!o.disabled&&!(o instanceof Smart.ListItemsGroup)){e.stopPropagation();break}o=o.parentElement}else e.stopPropagation()}}else if(!Smart.Utilities.Core.isMobile&&!Smart.ListBox.DragDrop.Dragging&&"release"===t.selectionChangeAction){const n=(t.shadowRoot||t.isInShadowDOM?e.originalEvent.composedPath()[0]:e.originalEvent.target).closest("smart-list-box");n?n._pointerUpHandler(e):t._pointerUpHandler(e)}if(Smart.ListBox.DragDrop.Feedback){let n;if(Smart.ListBox.DragDrop.Feedback.parentNode&&Smart.ListBox.DragDrop.Feedback.parentNode.removeChild(Smart.ListBox.DragDrop.Feedback),Smart.ListBox.DragDrop.Feedback=null,Smart.Utilities.Core.isMobile&&Smart.ListBox.DragDrop.Dragging)for(let a=0;a<Smart.ListBox.DragDrop.ListBoxes.length;a++){const i=Smart.ListBox.DragDrop.ListBoxes[a],o=i.getBoundingClientRect();if(i.allowDrop&&!i.closest(".smart-visibility-hidden")&&o.left<=e.clientX&&e.clientX<=o.left+o.width&&o.top<=e.clientY&&e.clientY<=o.top+o.height){n=i;const r=i._items.filter(l=>!l.hidden);for(let l=0;l<r.length;l++){const s=r[l],c=s.getBoundingClientRect();if((r.indexOf(s)===r.length-1||s.parentNode.lastElementChild===s)&&e.clientY>=o.top+s.offsetTop-i.scrollTop+c.height/2&&e.clientY<=o.top-i.scrollTop+s.offsetTop+c.height){Smart.ListBox.DragDrop.DropDetails={item:s,position:"bottom"};break}if(e.clientY>=o.top+s.offsetTop-i.scrollTop&&e.clientY<=o.top+s.offsetTop+c.height-i.scrollTop){Smart.ListBox.DragDrop.DropDetails={item:s,position:"top"};break}}}}if(Smart.ListBox.DragDrop.Dragging){if(Smart.ListBox.DragDrop.DropDetails){let a=Smart.ListBox.DragDrop.DropDetails.item,i=Smart.ListBox.DragDrop.Item;const o=i.ownerListBox;let r=e.originalEvent.target;if(t.isInShadowDOM&&(r=e.originalEvent?e.originalEvent.composedPath()[0]:e.composedPath()[0]),n=!n&&r.closest?r.closest("smart-list-box"):n,document.body.classList.remove("smart-dragging"),a.$.removeClass("smart-list-item-line-feedback"),a.$.removeClass("smart-list-item-bottom-line-feedback"),n&&a.ownerListBox!==n&&n.items.length>0&&(a=n.items[n.items.length-1]),Smart.ListBox.DragDrop.Item===a||n!==a.ownerListBox&&!Smart.Utilities.Core.isMobile)n&&0===n._items.length&&"none"!==n.dropAction&&("move"===n.dropAction?Smart.ListBox.DragDrop.Item.ownerListBox.removeChild(Smart.ListBox.DragDrop.Item):"copy"===n.dropAction&&(i=i.cloneNode(!0)),n.appendChild(i));else if("none"!==i.ownerListBox.dropAction){a.ownerListBox!==i.ownerListBox&&"move"===i.ownerListBox.dropAction&&Smart.ListBox.DragDrop.Item.ownerListBox.removeChild(Smart.ListBox.DragDrop.Item),"copy"===i.ownerListBox.dropAction&&(i=i.cloneNode(!0)),Smart.ListBox.DragDrop.Item.group=a.group;const c=a.ownerListBox;"checkBox"!==c.selectionMode&&"radioButton"!==c.selectionMode&&c.clearSelection(),"top"===Smart.ListBox.DragDrop.DropDetails.position?c.insertBefore(i,a):a.parentNode.lastElementChild===a?c.appendChild(i):c.appendChild(i,a),c.ensureVisible(i),"checkBox"===c.selectionMode||"radioButton"===c.selectionMode?(c._focus(i),c._refreshSelection()):(c.clearSelection(),c.select(i))}i.selected&&n!==o&&o._refreshSelection();const l=Smart.ListBox.DragDrop.Item,s=l.ownerListBox;l.displayMode="checkBox"===s.selectionMode||"radioButton"===s.selectionMode?s.selectionMode:"plain",s.$.fireEvent("dragEnd",{item:l,target:a,data:Smart.ListBox.DragDrop,previousContainer:o,container:n,originalEvent:e}),s._focus(l)}else{const a=Smart.ListBox.DragDrop.Item,i=a.ownerListBox;a.displayMode="checkBox"===i.selectionMode||"radioButton"===i.selectionMode?i.selectionMode:"plain",document.body.classList.remove("smart-dragging"),i.$.fireEvent("dragEnd",{item:a,target:null,data:Smart.ListBox.DragDrop,previousContainer:i,container:i,originalEvent:e}),i._focus(a)}e.preventDefault()}delete Smart.ListBox.DragDrop.DraggedFrom,Smart.ListBox.DragDrop.Dragging=!1,Smart.ListBox.DragDrop.Item=null,Smart.ListBox.DragDrop.DropDetails=null}for(let n=0;n<Smart.ListBox.DragDrop.ListBoxes.length;n++){const a=Smart.ListBox.DragDrop.ListBoxes[n];a._dragInterval&&clearInterval(a._dragInterval)}}}_itemsContainerMoveHandler(e){if(Smart.ListBox.DragDrop.Dragging)return this._applyItemFeedback(e),this._moveHandler(e),e.originalEvent.preventDefault(),e.originalEvent.stopPropagation(),!1}_touchmoveHandler(e){if(Smart.ListBox.DragDrop.Dragging&&e.cancelable)return e.preventDefault(),void e.stopPropagation();super._touchmoveHandler(e)}_applyItemFeedback(e){const t=this,n=e.originalEvent.target,a=n.closest?n.closest("smart-list-item"):n;Smart.Utilities.Core.isMobile?Smart.ListBox.DragDrop.DropDetails={item:Smart.ListBox.DragDrop.Item,position:"bottom"}:0!==t.items.length&&(a?a._itemOnMouseMove(e):t.items[t.items.length-1]._itemOnMouseMove(e,!0))}_moveHandler(e){const t=this;if(!Smart.ListBox.DragDrop.Feedback||Smart.ListBox.DragDrop.DraggedFrom!==t)return;const n=t.dragOffset;if(Smart.ListBox.DragDrop.Dragging){Smart.ListBox.DragDrop.Feedback.style.left=n[0]+e.pageX+"px",Smart.ListBox.DragDrop.Feedback.style.top=n[1]+e.pageY+"px",t.$.fireEvent("dragging",{item:Smart.ListBox.DragDrop.Item,data:Smart.ListBox.DragDrop,originalEvent:e.originalEvent});for(let a=0;a<Smart.ListBox.DragDrop.ListBoxes.length;a++){const i=Smart.ListBox.DragDrop.ListBoxes[a];i._dragInterval&&clearInterval(i._dragInterval),i._dragInterval=setInterval(function(){const o=i.getBoundingClientRect();o.left<=e.clientX&&o.left+o.width>=e.clientX&&(e.clientY>=o.top&&e.clientY<=o.top+20?i.scrollTop-=2:e.clientY>=o.top+o.height-20&&e.clientY<=o.top+o.height&&(i.scrollTop+=2))},1)}return e.preventDefault(),e.stopPropagation(),e.originalEvent.preventDefault(),e.originalEvent.stopPropagation(),!1}{const a=Math.abs(e.pageX-Smart.ListBox.DragDrop.StartPosition.left),i=Math.abs(e.pageY-Smart.ListBox.DragDrop.StartPosition.top),o=new Date-Smart.ListBox.DragDrop.StartTime;let r=a>=5&&a<=15||i>=5&&i<=15;if(Smart.Utilities.Core.isMobile&&(o<300||o>1e3)&&(r=!1),r){Smart.ListBox.DragDrop.Dragging=!0,Smart.ListBox.DragDrop.Feedback.style.left=n[0]+e.pageX+"px",Smart.ListBox.DragDrop.Feedback.style.top=n[1]+e.pageY+"px",t.getShadowRootOrBody().appendChild(Smart.ListBox.DragDrop.Feedback),e.preventDefault(),e.stopPropagation(),e.originalEvent.preventDefault(),e.originalEvent.stopPropagation();const l=Smart.ListBox.DragDrop.Item,s=l.ownerListBox;s.$.fireEvent("dragStart",{item:l,data:Smart.ListBox.DragDrop,container:s,previousContainer:s,originalEvent:e.originalEvent}),document.body.classList.add("smart-dragging")}}}_focusHandler(){this._focused=!0,this.setAttribute("focus","")}_blurHandler(){this._focused=!1,this.removeAttribute("focus")}appendChild(e){const t=this;if(!t.isCompleted){const n=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.appendChild.apply(t,n.concat(Array.prototype.slice.call(arguments)))}t.isVirtualized?(t._items.indexOf(e)>-1&&t._items.splice(t._items.indexOf(e),1),t._items.push(e)):(e.dataItem=e,t.shadowRoot&&"light"===t.shadowDomMode?t.appendChild(e):t.$.itemsInnerContainer.appendChild(e),t._items.indexOf(e)>-1&&t._items.splice(t._items.indexOf(e),1),t._items.push(e)),t._refreshItems(),t._refreshSelection()}insertBefore(e,t){const n=this;if(!n.isCompleted){const a=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.insertBefore.apply(n,a.concat(Array.prototype.slice.call(arguments)))}n.isVirtualized?(n._items.indexOf(e)>-1&&n._items.splice(n._items.indexOf(e),1),n._items.splice(n._indexOf(t),0,e)):(e.dataItem=e,t.parentNode.insertBefore(e,t),n._items.indexOf(e)>-1&&n._items.splice(n._items.indexOf(e),1),n._items.splice(n._indexOf(t),0,e)),n._refreshItems(),n._refreshSelection()}removeChild(e){const t=this;if(!t.isCompleted){const n=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.removeChild.apply(t,n.concat(Array.prototype.slice.call(arguments)))}if(t.isVirtualized)t._items.splice(t._indexOf(e),1);else if(e.parentNode){const n=t.selectedIndexes.slice(0),a=t.selectedValues.slice(0),i=n.indexOf(e.dataIndex);e.parentNode.removeChild(e),i>-1&&(n.splice(i,1),a.splice(i,1),t.selectedIndexes=n,t.selectedValues=a)}t._refreshItems()}propertyChangedHandler(e,t,n){if("dataSource"===e&&(!n||n&&Array.isArray(n)&&0===n.length))return void this.clearItems();super.propertyChangedHandler(e,t,n);const a=this;switch(e){case"innerHTML":a.clearSelection(),a._dataBind(),a.innerHTML=a.content=Smart.Utilities.Core.html(a.$.content);break;case"dataSource":case"valueMember":case"groupMember":case"displayMember":a.clearSelection(),a._dataBind(),a._applyDefaultSelection();break;case"disabled":case"unfocusable":a._setFocusable();break;case"displayLoadingIndicator":a._setLoadingIndicatorVisibility();break;case"filterable":a._refreshFilter(),a._refreshLayout();break;case"grouped":if(n?a._group():a._ungroup(),"radioButton"===a.selectionMode){if(a.selectedValues.length>0){const i=a.selectedValues;a.clearSelection(),a.select(i[0])}}else a._refreshSelection();a._refreshLayout();break;case"itemTemplate":{if(null===n||""===n)return a._items.map(r=>r.innerHTML=r.label),delete a._bindingDetails,void a._refreshLayout();const i=a.querySelectorAll("smart-list-item"),o=function(){a._handleItemTemplate(n)&&(a._items.map(r=>a._applyTemplate(r)),a._refreshLayout()),a.ownerElement&&a.ownerElement._setDropDownSize&&a.ownerElement._setDropDownSize(),a.$.fireEvent("bindingComplete")};0===i.length?o():a._ensureItemsReady(i,o);break}case"selectedIndexes":case"selectedValues":{let i=a.selectedIndexes.slice(0),o=a.selectedValues.slice(0);if(!a._items||0===a._items.length)return a.selectedIndexes=[],a.selectedValues=[],void(a.$.hiddenInput.value=a.selectedValues.toString());if(a._propertyChanging=!0,"selectedIndexes"===e){i=t.slice(0),a.clearSelection();for(let r=0;r<n.length;r++){const s=a._items[n[r]];s&&("oneOrManyExtended"===a.selectionMode||"oneOrMany"===a.selectionMode?(a.selectedIndexes.length>0&&0===r&&a.clearSelection(),a._select(s)):a.select(s))}}else{o=t.slice(0),a.selectedValues=[],a.clearSelection();for(let r=0;r<n.length;r++){const s=a.getItem(n[r]);s&&("oneOrManyExtended"===a.selectionMode?a._select(s):a.select(s))}}if(a.selectedIndexes.length>0&&a._focus(a._items[a.selectedIndexes[0]]),a._propertyChanging=!1,JSON.stringify(o)!==JSON.stringify(a.selectedValues.slice(0))){let r=[],l=[];for(let c=0;c<i.length;c++)a.selectedIndexes.indexOf(i[c])<0&&l.push(a._items[i[c]]);for(let c=0;c<a.selectedIndexes.length;c++)i.indexOf(a.selectedIndexes[c])<0&&r.push(a._items[a.selectedIndexes[c]]);let s={addedItems:r,removedItems:l};if(a.selectedIndexes.length>0){const c=a._items[a.selectedIndexes[a.selectedIndexes.length-1]];void 0!==c&&(s.selected=c.selected,s.disabled=c.disabled,s.index=a._indexOf(c),s.label=c.label,s.value=c.value)}else s.selected=!1,s.disabled=!1,s.index=-1,s.label="",s.value="";a.$.fireEvent("change",s)}break}case"selectionMode":{const i="checkBox"===a.selectionMode||"radioButton"===a.selectionMode?a.selectionMode:"plain",o=a.selectedIndexes.slice(0),r=a.selectedValues.slice(0);a._propertyChanging=!0;const l=a.selectedValues;a.setAttribute("aria-multiselectable",-1!==["oneOrManyExtended","zeroOrMany","oneOrMany","checkBox","radioButton"].indexOf(n)),a.selectedValues=[],a.clearSelection();for(let s=0;s<l.length;s++){const u=a.getItem(l[s]);u&&("oneOrManyExtended"===a.selectionMode?a._select(u):a.select(u))}if(a._items.forEach(s=>s.displayMode=i),a._recycle(),a._propertyChanging=!1,JSON.stringify(r)!==JSON.stringify(a.selectedValues.slice(0))){let s=[],c=[];for(let p=0;p<o.length;p++)a.selectedIndexes.indexOf(o[p])<0&&c.push(a._items[o[p]]);for(let p=0;p<a.selectedIndexes.length;p++)o.indexOf(a.selectedIndexes[p])<0&&s.push(a._items[a.selectedIndexes[p]]);let u={addedItems:s,removedItems:c};if(o.length>0){const p=a._items[o[o.length-1]];p&&(u.selected=p.selected,u.disabled=p.disabled,u.index=a._indexOf(p),u.label=p.label,u.value=p.value)}a.$.fireEvent("change",u)}a._applyAriaSelected(),"checkBox"!==n&&"radioButton"!==n&&"checkBox"!==t&&"radioButton"!==t||a._refreshLayout();break}case"topVisibleIndex":a._setTopVisibleIndex(n);break;case"autoSort":a._canSort=n;break;case"alternationStart":case"alternationEnd":case"alternationCount":a._refreshItems(),a._refreshLayout();break;case"sortDirection":case"sorted":{a._canSort=!0,n?a._sort():a._unsort();const i=a.selectedValues;a.selectedValues=[],a._refreshSelection();for(let o=0;o<i.length;o++){const l=a.getItem(i[o]);l&&("oneOrManyExtended"===a.selectionMode?a._select(l):a.select(l))}a._refreshLayout(),a._canSort=a.autoSort;break}}}_refreshSelection(){const e=this;if(!e._items||0===e._items.length)return;const t=e.selectedValues;e.selectedIndexes=[],e.selectedValues=[];for(let n=0;n<e._items.length;n++){const a=e._items[n];a.selected=!1,t.indexOf(a.value)>-1&&e.select(a)}e._recycle()}clearSelection(){const e=this;if(!e._items||0===e._items.length)return;let t=[];for(let a=0;a<e._items.length;a++)e._items[a].selected&&t.push(e._items[a]);e._items.map(a=>a.selected=!1),e.selectedValues.slice(0);const n=e.selectedIndexes.slice(0);if(e.selectedIndexes=[],e.selectedValues=[],e.$.hiddenInput.value=e.selectedValues.toString(),e._recycle(),e.context!==e){let a={addedItems:[],removedItems:t};if(n.length>0){const i=e._items[n[n.length-1]];i&&(a.selected=i.selected,a.disabled=i.disabled,a.index=e._indexOf(i),a.label=i.label,a.value=i.value)}e.$.fireEvent("change",a)}}ensureVisible(e){const t=this;if(e)return!("string"==typeof e&&!(e=t.getItem(e))||(t.isVirtualized||t.$.itemsContainer.scrollTop===t.scrollTop||(t.scrollTop=t.$.itemsContainer.scrollTop),e.top+e.height>=t.scrollTop+t.offsetHeight&&(t.scrollTop=t.scrollTop+e.height,t.isVirtualized||(t.$.itemsContainer.scrollTop=t.scrollTop)),(e.top<=t.scrollTop||e.top>=t.scrollTop+t.$.itemsContainer.offsetHeight)&&(t.scrollTop=e.top,t.isVirtualized||(t.$.itemsContainer.scrollTop=t.scrollTop)),0===t._indexOf(e)||1===t._indexOf(e)&&t._items.length>1&&t._items[0].grouped?(t.scrollTop=0,t.isVirtualized||(t.$.itemsContainer.scrollTop=t.scrollTop)):t._indexOf(e)===t._items.length-1&&(t.scrollTop=t.scrollHeight,t.isVirtualized||(t.$.itemsContainer.scrollTop=t.scrollTop)),0))}get items(){const e=this;if(!window.__karma__&&!window.karma&&e instanceof Element&&e.isRendered&&e.hasAttribute&&e.hasAttribute("smart-blazor")){let t=[];for(let n=0;n<e._items.length;n++){const a=e._items[n];t.push({label:a.label,value:a.value})}return t}return e._filteredItems?e._filteredItems:e._items}getItems(){const e=this,t=e._filteredItems?e._filteredItems:e._items;let n=[];if(t&&t.length>0)for(let a=0;a<t.length;a++){const i=t[a];n.push({label:i.label,value:i.value})}return n}ready(){super.ready();const e=this;if(e.shadowRoot&&"light"===e.shadowDomMode){const a=document.createDocumentFragment();[].slice.call(e.$.itemsInnerContainer.children).map(i=>a.appendChild(i)),e.appendChild(a),e.$.itemsInnerContainer.appendChild(document.createElement("slot"))}e._areCSSVarsSupported=Smart.Utilities.Core.CSSVariablesSupport(),e.isUpdating=0,e._scrollView&&(e._scrollView=new Smart.Utilities.Scroll(e,e.$.horizontalScrollBar,e.$.verticalScrollBar),e._scrollView.hScrollBar.$.addClass("smart-hidden"),e._scrollView.vScrollBar.$.addClass("smart-hidden"));const t=e._scrollView.vScrollBar,n=e._scrollView.hScrollBar;t.hasStyleObserver=!1,n.hasStyleObserver=!1,t.hasResizeObserver=!1,n.hasResizeObserver=!1,t.wait=!1,n.wait=!1,e._setFocusable()}render(){const e=this;e.setAttribute("role","listbox"),e.setAttribute("aria-orientation","vertical"),e.$.verticalScrollBar.setAttribute("aria-controls",e.id),e.$.horizontalScrollBar.setAttribute("aria-controls",e.id),e._keysPressed={},e._incrementalSearchQuery="",e._incrementalSearchItems=[],e._canSort=!0,e._previousEntry="",e._setLoadingIndicatorVisibility(),e._refreshFilter(),e._initializeInnerHTML(),e._dataBind(),e._applyDefaultSelection(),e.enableShadowDOM&&HTMLElement.prototype.appendChild.apply(e,[e.$.hiddenInput]),e.setAttribute("aria-multiselectable",-1!==["oneOrManyExtended","zeroOrMany","oneOrMany","checkBox","radioButton"].indexOf(e.selectionMode)),super.render()}_applyDefaultSelection(){const e=this;!e._focusedItem&&e._items&&e._items.length>0&&0===e.selectedIndexes.length&&("one"!==e.selectionMode&&"oneOrMany"!==e.selectionMode&&"oneOrManyExtended"!==e.selectionMode||e.select(e._items[0]))}attached(){const e=this;super.attached(),Smart.ListBox.DragDrop||(Smart.ListBox.DragDrop={ListBoxes:[]}),Smart.ListBox.DragDrop.ListBoxes.push(e),e._scrollView||(e._scrollView=new Smart.Utilities.Scroll(e,e.$.horizontalScrollBar,e.$.verticalScrollBar)),e.selectedIndexes.length>0&&e._items&&e.ensureVisible(e._items[e.selectedIndexes[0]])}detached(){const e=this;if(super.detached(),e._scrollView&&(e._scrollView.unlisten(),delete e._scrollView),Smart.ListBox.DragDrop&&Smart.ListBox.DragDrop.ListBoxes){const t=Smart.ListBox.DragDrop.ListBoxes.indexOf(e);Smart.ListBox.DragDrop.ListBoxes.splice(t,1)}}_createItem(e,t,n){const a=this,i="checkBox"===a.selectionMode||"radioButton"===a.selectionMode?a.selectionMode:"plain",o=n?{}:document.createElement("smart-list-item");o.ownerListBox=a,"number"==typeof e&&(e=""+e);const r=function(u,p){return void 0!==e[u]?""+e[u]:e[p]};let l="string"==typeof e?e:r(a.displayMember,"label"),s="string"==typeof e?e:r(a.valueMember,"value"),c=r(a.groupMember,"group");return void 0===l&&(l=void 0!==t?""+t:""),o.label=o.innerHTML=""+l,void 0===s&&(s=void 0!==t?""+t:l),e.color&&(o.color=e.color),o.value=""+s,o.displayMode=i,o.selected=!!e.selected&&e.selected,o.disabled=!!e.disabled&&e.disabled,o.dataItem=o,void 0!==t&&(o.dataIndex=t),a._alternateItem(o),e.title&&(o.title=e.title),c&&(o.group=""+c),o}_alternateItem(e){const t=this,n=t.alternationStart,a=t.alternationEnd>0?t.alternationEnd:1/0;t.alternationCount<=0||(void 0===t._alternationIndexCounter&&(t._alternationIndexCounter=0),e.dataIndex>=n&&e.dataIndex<=a&&(e.alternationIndex=t._alternationIndexCounter++,t._alternationIndexCounter===t.alternationCount&&(t._alternationIndexCounter=0)))}_beginUpdate(){this.isUpdating++}_isUpdating(){return this.isUpdating>0}_endUpdate(){this.isUpdating--}get _scrollHeight(){const e=this;if(0===e._items.length||e._items.filter(n=>!n.hidden).length<1)return 0;let t=0;if(e.isVirtualized){if(e.__scrollHeight)return e.__scrollHeight;if(0===e._items.length)return 0;e.isUpdating++;const n=e._createItem(e.dataSource[0]);e.$.itemsInnerContainer.appendChild(n);for(let a=0;a<e._items.length;a++){const i=e._items[a];i.hidden?(i.height=0,i.top=t):(e.itemHeight?(e.itemHeight<32&&(e.itemHeight=32),i.height=e.itemHeight):(n.$&&n.$.itemContainer?n.$.itemContainer.firstElementChild.innerHTML=i.label:n.label=i.label,i.height=n.offsetHeight),i.top=t,t+=i.height)}e.$.itemsInnerContainer.removeChild(n),e.__scrollHeight=t-e.$.itemsInnerContainer.offsetHeight,e.filterable&&(e.__scrollHeight+=e.$.filterInput.offsetHeight),t=e.__scrollHeight,e.isUpdating--}else{for(let n=0;n<e._items.length;n++){const a=e._items[n];a.hidden?(a.height=0,a.top=t):(e.itemHeight?"auto"!==e.itemHeight&&(a.height=e.itemHeight,a.style.height=a.height+"px"):a.height=a.offsetHeight,a.top=a.offsetTop,t+=a.height)}t=e.$.itemsInnerContainer.scrollHeight-e.$.itemsInnerContainer.offsetHeight,e.filterable&&t>0&&(t+=e.$.filterInput.offsetHeight),e.__scrollHeight=t}return t}_initializeRecyclingItems(){const e=this;if(!e.dataSource||e.dataSource&&0===e.dataSource.length||!e.isVirtualized)return;let t=0,n=e.offsetHeight||400;e.$.itemsInnerContainer.innerHTML="",e._recyclingItems=[];const a=function(){for(let o=0;o<e.dataSource.length;o++){const l=e._createItem(e.dataSource[o]);if(e.itemHeight&&"auto"!==e.itemHeight&&(l.style.height=e.itemHeight+"px"),e.$.itemsInnerContainer.appendChild(l),t+=l.offsetHeight,l.dataItem=e._items[o],e._recyclingItems.push(l),t>1.5*n)break}};a();let i=0;for(;t<1.5*n&&++i<5;)a()}_dataBind(){const e=this;if(e._scrollView||(e._scrollView=new Smart.Utilities.Scroll(e,e.$.horizontalScrollBar,e.$.verticalScrollBar)),"function"==typeof e.dataSource&&(e._items=[],delete e._filteredItems),"string"==typeof e.dataSource&&(e.dataSource=JSON.parse(e.dataSource)),null!==e.dataSource&&Array.isArray(e.dataSource)){e.isUpdating++;const a=i=>{e._items=[],e._groups=[],delete e._filteredItems;const o=e.dataSource;for(let r=0;r<o.length;r++){const s=e._createItem(o[r],r,!i);e._items[r]=s,i&&i.appendChild(s)}};if(e.isVirtualized)a(),e._initializeRecyclingItems();else{const i=document.createDocumentFragment();e.$.itemsInnerContainer.innerHTML="",a(i),e.$.itemsInnerContainer.appendChild(i)}e.isUpdating--}const t=e.shadowRoot?e.shadowRoot.querySelectorAll("smart-list-item"):e.querySelectorAll("smart-list-item"),n=function(){e.isUpdating++,e.dataSource||(e._initializeHtmlListItems(),e._initializeHtmlListGroups()),e.grouped&&e._group(),e.sorted&&e._sort(),e._refreshLayout(),e._initializeSelection(),e.isInitialized=!0,e._canSort=e.autoSort,e.isUpdating--,e.itemTemplate&&e._handleItemTemplate(e.itemTemplate)&&(e._items.map(a=>e._applyTemplate(a)),e._refreshLayout()),e.__onCompleted&&(e._onCompleted=e.__onCompleted,e.__onCompleted=null,e._onCompleted()),e.topVisibleIndex>-1&&e._setTopVisibleIndex(e.topVisibleIndex),e.$.fireEvent("bindingComplete"),e._updateTopVisibleIndex(),0===e._items.length&&e.clearItems(),e._applyAriaSelected()};0===t.length?n():(e._onCompleted&&(e.__onCompleted=e._onCompleted,e._onCompleted=null),e._ensureItemsReady(t,n))}_ensureItemsReady(e,t){const n=this,a=function(){const i=function(o){for(let r=0;r<e.length;r++)e[r].context="node"===o?e[r]:document};i("node"),t(),i()};if(0===e.length)a();else{n._nodesReadyListeners=0;for(let i=0;i<e.length;i++){const o=e[i],r=function(){n._nodesReadyListeners--,0===n._nodesReadyListeners&&(a(),delete n._nodesReadyListeners)}.bind(n);o.isCompleted||(n._nodesReadyListeners++,o._onCompleted=r)}0===n._nodesReadyListeners&&a()}}_initializeInnerHTML(){const e=this;e.$.itemsInnerContainer.innerHTML.indexOf("<option")>=0?e.$.itemsInnerContainer.innerHTML=e.$.itemsInnerContainer.innerHTML.replace(/<optgroup/gi,"<smart-list-items-group").replace(/<\/optgroup/gi,"</smart-list-items-group").replace(/<option/gi,"<smart-list-item").replace(/<\/option/gi,"</smart-list-item"):e.$.itemsInnerContainer.innerHTML.indexOf("<ul")>=0&&(e.$.itemsInnerContainer.innerHTML=e.$.itemsInnerContainer.innerHTML.replace(/<ul/gi,"<smart-list-items-group").replace(/<\/ul/gi,"</smart-list-items-group").replace(/<li/gi,"<smart-list-item").replace(/<\/li/gi,"</smart-list-item"))}_initializeHtmlListItems(){const e=this,t=e.shadowRoot&&"shadow"===e.shadowDomMode?e.shadowRoot.querySelectorAll("smart-list-item"):e.querySelectorAll("smart-list-item"),n="checkBox"===e.selectionMode||"radioButton"===e.selectionMode?e.selectionMode:"plain",a=function(o,r,l){return void 0!==o[r]?""+o[r]:o[l]};e._items=[];let i=0;for(let o=0;o<t.length;o++){const r=t[o];r.dataIndex=o,r.label=r.innerHTML,r.dataItem=r,r.top||(r.top=i),r.height||(r.height=r.offsetHeight),i+=r.height,r.value||(r.value=""+o);const l=a(r,e.displayMember,"label"),s=a(r,e.valueMember,"value"),c=a(r,e.groupMember,"group");r.label!==l&&(r.label=l),r.value!==s&&(r.value=s),r.group!==c&&(r.group=c);const u=r.context;r.context=document,r.displayMode=n,r.context=u,e._alternateItem(r),r.selected&&(e.selectedIndexes.push(o),e.selectedValues.push(r.value)),e._items.push(r)}e.itemTemplate&&e._handleItemTemplate(e.itemTemplate)&&e._items.map(o=>e._applyTemplate(o))}_group(){const e=this;e.isUpdating++;let t=[],n=[];e._canSort&&e._unsort();for(let a=0;a<e._items.length;a++){const i=e._items[a];let o=i.group?i.group.trim():i.innerHTML.charAt(0)||i.label.charAt(0);o+=" ",t[o]?t[o].items.push(i):t[t.length++]=t[o]={items:[i],label:o}}if(e.isVirtualized){e._groups=[];for(let a=0;a<t.length;a++){const i=t[a];i.dataIndex=a,i.grouped=!0,i.hidden=!1,i.displayMode="plain",n.push(i);for(let o=0;o<t[a].items.length;o++){const r=i.items[o];r.group=i,n.push(r)}}e._groups=t,e._items=n}else{for(;e.$.itemsInnerContainer.firstChild;)e.$.itemsInnerContainer.removeChild(e.$.itemsInnerContainer.firstChild);const a=document.createDocumentFragment();e._groups=[];for(let i=0;i<t.length;i++){const o=t[i],r=document.createElement("smart-list-items-group");r.label=o.label,r.dataIndex=i;for(let l=0;l<t[i].items.length;l++){const s=o.items[l];n.push(s),s.group=o.label,r.appendChild(s)}e._groups.push(r),a.appendChild(r)}e._items=n,/Trident|Edge/.test(navigator.userAgent)?setTimeout(function(){e.$.itemsInnerContainer.appendChild(a)},50):e.$.itemsInnerContainer.appendChild(a)}e.sorted&&e._sort(),e.isUpdating--}_ungroup(){const e=this;e.isUpdating++,e._groups=[],e._canSort&&e._unsort();let t=[];if(e.isVirtualized)for(let n=0;n<e._items.length;n++){const a=e._items[n];a.grouped||t.push(a)}else{const n=document.createDocumentFragment();for(let a=0;a<e._items.length;a++){const i=e._items[a];n.appendChild(i),t.push(i)}t.length>0&&(e.$.itemsInnerContainer.innerHTML="",e.$.itemsInnerContainer.appendChild(n))}e._items=t,e.sorted&&e._sort(),e.isUpdating--}_initializeHtmlListGroups(){const e=this,t=e.$.itemsInnerContainer.querySelectorAll("smart-list-items-group");e._groups=[];for(let n=0;n<t.length;n++){const a=t[n];a.dataIndex=n,e._groups.push(a)}}_initializeSelection(){const e=this,t=e.selectedIndexes.slice(0),n=e.selectedValues.slice(0);e.clearSelection(),"oneOrManyExtended"===e.selectionMode&&(e._keysPressed.Control=!0);for(let a=0;a<e._items.length;a++){const i=e._items[a];(t.indexOf(a)>=0||n.indexOf(i.value||i.label)>=0)&&(e._focusedItem&&(e._focusedItem._focused=!1),e._focusedItem=null,e.select(i))}"oneOrManyExtended"===e.selectionMode&&(e._keysPressed.Control=!1)}onItemUpdated(){const e=this;e.isInitialized&&!e._isUpdating()&&(e.isUpdating++,e._refreshLayout(),e.isUpdating--)}_refreshItems(){const e=this;if(e.isInitialized&&!e._isUpdating()){if(e.isUpdating++,e.grouped?e._ungroup():e.sorted&&e._canSort&&e._unsort(),!e.isVirtualized){e._items=[];const t=e.shadowRoot?e.shadowRoot.querySelectorAll("smart-list-item"):e.querySelectorAll("smart-list-item");for(let n=0;n<t.length;n++)t[n].dataIndex=n,e._alternateItem(t[n]),e._items.push(t[n])}e.grouped?e._group():e.sorted&&e._sort(),e._refreshLayout(),e.isUpdating--}}_applyIncrementalSearch(e){const t=this;null===t.incrementalSearchDelay||isNaN(t.incrementalSearchDelay)||["Shift","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Control","Home","End","PageUp","PageDown"].indexOf(e)>-1||(0!==t._incrementalSearchQuery.indexOf(e)&&(t._incrementalSearchQuery+=e),t._incrementalSearchTimer&&clearTimeout(t._incrementalSearchTimer),t._incrementalSearch(),t._incrementalSearchTimer=setTimeout(function(){t._incrementalSearchQuery=""},t.incrementalSearchDelay))}select(e){const t=this;if(("string"!=typeof e||(e=t.getItem(e)))&&("number"!=typeof e||(e=t.getItem(e)))&&!(e.grouped||e.readonly||!t._items.length||e instanceof HTMLElement&&!t.contains(e))){if("none"===t.selectionMode)return t.selectedIndexes=[],void(t.selectedValues=[]);switch(!t._focusedItem!==e&&"none"!==t.selectionMode&&(t._focusedItem&&(t._focusedItem._focused=!1),t._focusedItem=e,e._focused=!0),t.selectionMode){case"one":case"zeroAndOne":return(1!==t.selectedIndexes.length||t.selectedIndexes[0]!==t._indexOf(e))&&(t._previouslySelectedIndexes=t.selectedIndexes,t.selectedIndexes.length>=1&&t.clearSelection(),t._select(e),delete t._previouslySelectedIndexes,!0);case"zeroOrOne":return 1===t.selectedIndexes.length&&t.selectedIndexes[0]===t._indexOf(e)?(t.unselect(e),!0):(t._previouslySelectedIndexes=t.selectedIndexes,t.selectedIndexes.length>=1&&t.clearSelection(),t._select(e),delete t._previouslySelectedIndexes,!0);case"radioButton":if(t._previouslySelectedIndexes=t.selectedIndexes,t.$.itemsInnerContainer.querySelectorAll("smart-list-items-group").length>0){const n=e.parentNode;if(!e.selected){for(let a in n.children){const i=n.children[a];i.selected&&t.unselect(i)}t._select(e)}return delete t._previouslySelectedIndexes,!0}if(t.isVirtualized&&t._groups.length>0){const n=e.group;if(!e.selected){for(let a in n.items){const i=n.items[a];i.selected&&t.unselect(i)}t._select(e)}return delete t._previouslySelectedIndexes,!0}return e.selected||(t.selectedIndexes.length>=1&&t.clearSelection(),t._select(e)),delete t._previouslySelectedIndexes,!0;case"oneOrMany":return e.selected?t.selectedIndexes.length>1&&t.unselect(e):t._select(e),!0;case"zeroOrMany":case"checkBox":return e.selected?t.unselect(e):t._select(e),!0;case"oneOrManyExtended":{const n=t.selectedValues;if(t._keysPressed.Control)return t.selectedIndexes.length>1&&e.selected?(t.unselect(e),t._focus(t._items[t.selectedIndexes[0]])):t._select(e),!0;if(t._keysPressed.Shift){const a=t._items[t.selectedIndexes[0]];let i;t.clearSelection();const o=n.indexOf(a.value)>=0||a.selected;if(t._select(a,o),t._indexOf(a)>t._indexOf(e))for(i=t._indexOf(a)-1;i>=t._indexOf(e);){const l=t._items[i],s=n.indexOf(l.value)>=0||l.selected;t._select(l,s),i--}else for(i=t._indexOf(a)+1;i<=t._indexOf(e);){const l=t._items[i],s=n.indexOf(l.value)>=0||l.selected;t._select(l,s),i++}const r=[];for(let l=0;l<n.length;l++)r.push(t.getItem(n[l]));if(r.length>0&&!t._propertyChanging){let l=[];for(let s=0;s<t.selectedValues.length;s++){const c=t.selectedValues[s];n.indexOf(c)<0&&l.push(t.getItem(c))}t.$.fireEvent("change",{addedItems:l,removedItems:r,selected:e.selected,disabled:e.disabled,index:t._indexOf(e),label:e.label,value:e.value})}return!0}for(let a=0;a<n.length;a++){const o=t.getItem(n[a]);e!==o&&t.unselect(o)}return t.clearSelection(),t._select(e,n.indexOf(e.value)>=0),!0}}return!1}}_applyTemplate(e,t){const n=this;if(null===n.itemTemplate)return;if("function"==typeof n.itemTemplate)return void n.itemTemplate(e,{label:e.label,value:e.value,index:n._items.indexOf(e)});if(!n._bindingDetails||0===n._bindingDetails.length)return;const a=n._bindingDetails.length;let i,o,r=document.importNode(n._template.content,!0);for(let l=0;l<a;l++){i=r.childNodes[n._bindingDetails[l].childNodeIndex],o=n._bindingDetails[l].bindingString.length;for(let s=0;s<o;s++){const c=n._bindingDetails[l].bindingString[s],u=c.indexOf("label")>=0?e.label:e.value;i.innerHTML=i.innerHTML.replace(c,u)}}e.innerHTML="";for(let l=0;l<r.childNodes.length;l++)r.childNodes[l].outerHTML&&(e.innerHTML+=r.childNodes[l].outerHTML);!1!==t&&(n._scrollHeightTimer&&(clearInterval(n._scrollHeightTimer),n._scrollHeightCounter=0),n._scrollHeightTimer=setInterval(function(){n._lastScrollHeight===n.$.itemsInnerContainer.scrollHeight&&10!==n._scrollHeightCounter||(n._refreshLayout(),clearInterval(n._scrollHeightTimer)),n._lastScrollHeight=n.$.itemsInnerContainer.scrollHeight,n._scrollHeightCounter++},50))}_filterItems(e,t,n){const a=this,i=a.$.filterInput.value;let o,r;const l=function(){if(0===r.length)return a._filteredItems=[],void(t&&t());o=a._queryItems(i,a.filterMode);for(let s=0;s<r.length;s++)r[s].hidden=!0,r[s].$&&r[s].$.addClass("smart-hidden");for(let s=0;s<o.length;s++){const c=o[s];c.hidden=!1,r[s].$&&c.$.removeClass("smart-hidden")}if(a.grouped&&a.isVirtualized)for(let s=0;s<a._groups.length;s++){const c=a._groups[s],u=c.items;let p=!0;for(let g=0;g<u.length;g++)u[g].hidden||(p=!1);p&&(c.hidden=!0)}if(a.grouped&&!a.isVirtualized)for(let s=0;s<a._groups.length;s++){const c=a._groups[s],u=[].concat(...c.querySelectorAll("smart-list-item"));let p=!0;for(let g=0;g<u.length;g++)u[g].$.hasClass("smart-hidden")||(p=!1);p?c.$.addClass("smart-hidden"):c.$.removeClass("smart-hidden")}a._filteredItems=o,a._refreshLayout(),t&&t(),e||a._refreshSelection()};if("function"==typeof a.dataSource)if(i||n){const s=function(u){(i||n)&&a.isAttached&&(a._updateListBoxAfterQuery=function(){o=r=a._items,l()},a.clearItems(),a.insert(0,u))},c=a.dataSource(i,s);if(c){if(!i&&!n)return;a._updateListBoxAfterQuery=function(){o=r=a._items,l()},a.clearItems(),a.insert(0,c)}}else a.clearItems(),o=r=a._items,l(),a.$.fireEvent("bindingComplete");else{if(r=a._items,0===r.length)return;l()}}_getNextItem(e){const t=this._items,n=this._items.length;let a=Math.max(e+1,0);for(;a<n;){const i=t[a];if(!(i.disabled||i.hidden||i.grouped||i.readonly))return i;a++}return t[e]}_getPreviousItem(e){const t=this._items;let n=Math.max(e-1,0);for(;n>-1;){const a=t[n];if(!(a.disabled||a.hidden||a.grouped||a.readonly))return a;n--}return t[e]}get _scrollWidth(){const e=this,t=e._items;return e.__scrollWidth||(e.__scrollWidth=(()=>{const n=this,a=n.virtualized,i=n.itemMeasureMode;let o=0,r="";function l(s){const c=n._createItem({label:s});c.style.position="absolute",n.$.itemsContainer.appendChild(c),c.label=s,c.style.width="auto",c.isCompleted&&(c.$.itemContainer.style.width="auto");const u=getComputedStyle(c),p=parseInt(u.paddingLeft)+parseInt(u.paddingRight),g=c.$.itemContainer||c,b=g.offsetWidth+g.offsetLeft+p;return c.parentNode.removeChild(c),b}for(let s=0;s<t.length;s++){const c=t[s];if(!c.hidden)if("auto"===i){const u=a?c.label:c.textContent.trim();u.length>r.length&&(r=u)}else o=Math.max(o,l(c.label))}return"auto"===i?l(r):o})()),e.__scrollWidth}update(e,t){const n=this,a=n._items[e];if(a){if("string"==typeof t)a.label=t,void 0===a.value&&(a.value=t);else for(let i in t)"selected"===i&&a[i]!==t[i]?n.select(a):a[i]=t[i],"group"===i&&n._refreshItems();(n.sorted||n.grouped||n.isVirtualized)&&(n._refreshItems(),n._refreshSelection())}else n.error(n.localize("indexOutOfBound",{elementType:n.nodeName.toLowerCase(),method:"update"}))}insert(e,t){const n=this;let a=[];if((!e||e<0)&&(e=0),Array.isArray(t)){n.isUpdating++;for(let i=0;i<t.length;i++){const r=n._createItem(t[i]);a.push(r),e>=n._items.length||0===n._items.length?n.appendChild(r):n.insertBefore(r,n._items[e])}n.isUpdating--}else{const i=n._createItem(t);a.push(i),e>=n._items.length||0===n._items.length?n.appendChild(i):n.insertBefore(i,n._items[e])}a.length>0?(a.map(i=>n._applyTemplate(i)),n._ensureItemsReady(a,function(){n._refreshItems(),0!==n._items.length&&(n._updateListBoxAfterQuery&&(n._updateListBoxAfterQuery(),delete n._updateListBoxAfterQuery),n._refreshSelection(),n.$.fireEvent("bindingComplete"))})):n._updateListBoxAfterQuery&&(n._updateListBoxAfterQuery(),delete n._updateListBoxAfterQuery)}removeAt(e){const t=this,n=t._items[e];n?(n.selected&&t.unselect(n),t.isVirtualized?t._items.splice(e,1):n.parentNode.removeChild(n),t._refreshItems(),t._refreshSelection(),0===t.selectedIndexes.length&&t._items.length>0&&("oneOrMany"!==t.selectionMode&&"one"!==t.selectionMode&&"oneOrManyExtended"!==t.selectionMode||t.select(t._items[0]))):t.error(t.localize("indexOutOfBound",{elementType:t.nodeName.toLowerCase(),method:"remove"}))}_queryItems(e,t){const n=this,a=[],i=function(o,r){if(o.grouped)return o;switch(t){case"startsWith":if(0===o.label.indexOf(r))return o;break;case"startsWithIgnoreCase":if(0===o.label.toLowerCase().indexOf(r.toLowerCase()))return o;break;case"doesNotContain":if(o.label.indexOf(r)<0)return o;break;case"doesNotContainIgnoreCase":if(o.label.toLowerCase().indexOf(r.toLowerCase())<0)return o;break;case"contains":if(o.label.indexOf(r)>-1)return o;break;case"containsIgnoreCase":if(o.label.toLowerCase().indexOf(r.toLowerCase())>-1)return o;break;case"equals":if(0===o.label.localeCompare(r))return o;break;case"equalsIgnoreCase":if(0===o.label.toLowerCase().localeCompare(r.toLowerCase()))return o;break;case"endsWith":if(o.label.endsWith(r))return o;break;case"endsWithIgnoreCase":if(o.label.toLowerCase().endsWith(r.toLowerCase()))return o;break;case"custom":if(n.filterCallback(o,e))return o}return null};if(0===e.length)return n._items;for(let o=0;o<n._items.length;o++){const r=i(n._items[o],e);r&&a.push(r)}return a}_select(e,t){const n=this,a=n.selectedIndexes.indexOf(n._indexOf(e)),i=n.selectedIndexes.slice(0),o=n.selectedValues.slice(0);if(e.selected=!0,-1!==a)return n._recycle(),!1;if(i.push(n._indexOf(e)),o.push(e.value||e.label),n.selectedIndexes=i,n.selectedValues=o,n._recycle(),n.$.hiddenInput.value=o.toString(),!n.isCompleted||t||!n.isInitialized||n._propertyChanging)return;let r=[];if(n._previouslySelectedIndexes){for(let l=0;l<n._previouslySelectedIndexes.length;l++)n.selectedIndexes.indexOf(n._previouslySelectedIndexes[l])<0&&r.push(n._items[n._previouslySelectedIndexes[l]]);delete n._previouslySelectedIndexes}return n.$.fireEvent("change",{addedItems:[e],removedItems:r,selected:e.selected,disabled:e.disabled,index:n._indexOf(e),label:e.label,value:e.value}),!0}_setTopVisibleIndex(e){const t=this;if("number"==typeof e&&(t.topVisibleIndex=Math.max(0,e),e=t._items[t.topVisibleIndex]),!e)return!1;e.top!==t.scrollTop&&(t.scrollTop=e.top,t.isVirtualized||(t.$.itemsContainer.scrollTop=t.scrollTop),t.scrollHeight===t.scrollTop&&t._updateTopVisibleIndex())}_updateTopVisibleIndex(){const e=this,t=e.scrollTop+e._scrollView.verticalScrollBar.offsetHeight-e.offsetHeight;let n;if(e.scrollTop<e.scrollHeight/2){for(let a=0;a<e._items.length;a++)if(e._items[a].top>=t){n=e._items[a];break}}else for(let a=e._items.length-1;a>=0&&!(e._items[a].top<t);a--)n=e._items[a];if(n){const a=e.context;e.context=e,e.topVisibleIndex=n.dataIndex,e.context=a}}unselect(e){const t=this;if(!e||"string"==typeof e&&!(e=t.getItem(e)))return;if("none"===t.selectionMode)return void t.clearSelection();const n=t.selectedIndexes.indexOf(t._indexOf(e)),a=t.selectedIndexes.slice(0),i=t.selectedValues.slice(0);return e.selected=!1,n>=0&&(a.splice(n,1),i.splice(n,1),t.selectedIndexes=a,t.selectedValues=i,t.$.hiddenInput.value=i.toString(),t.isCompleted&&!t._propertyChanging?(t.$.fireEvent("change",{addedItems:[],removedItems:[e],selected:e.selected,disabled:e.disabled,index:t._indexOf(e),label:e.label,value:e.value}),t._recycle(),!0):void 0)}_handleItemTemplate(e){if(null===e||!e)return;if("function"==typeof e)return e;const t=this;if(!("content"in document.createElement("template")))return t.error(t.localize("htmlTemplateNotSuported",{elementType:t.nodeName.toLowerCase()})),void(t.itemTemplate=null);if(null===(e=document.getElementById(e))||!("content"in e))return t.error(t.localize("invalidTemplate",{elementType:t.nodeName.toLowerCase(),property:"itemTemplate"})),void(t.itemTemplate=null);const n=e.content,a=n.childNodes.length,i=/{{\w+}}/g;let o,r;t._bindingDetails=[],t._template=e;for(let l=0;l<a;l++){for(r=[];o=i.exec(n.childNodes[l].innerHTML);)r.push(o[0]);r.length>0&&t._bindingDetails.push({childNodeIndex:l,bindingString:r})}return!0}_handleKeyStrokes(e){const t=this,n="radioButton"===t.selectionMode||"checkBox"===t.selectionMode||"zeroOrMany"===t.selectionMode||"oneOrMany"===t.selectionMode||"zeroOrOne"===t.selectionMode;let a=t._items;if(t.filterable&&t.$.filterInput.value.length>0&&(a=t._filteredItems),!t.disabled&&!t.readonly&&a.length){switch(e){case"ArrowLeft":case"ArrowUp":t._handleArrowKeys(!0);break;case"ArrowRight":case"ArrowDown":t._handleArrowKeys(!1);break;case" ":{if(t.selectedIndexes.length<1&&!t._focusedItem)return;const i=t._focusedItem?t._focusedItem:t._items[t.selectedIndexes[t.selectedIndexes.length-1]],o=r=>{r.selected&&"radioButton"!==t.selectionMode?t.unselect(r):t.select(r)};if("oneOrMany"===t.selectionMode)return void(i.selected&&t.selectedIndexes.length>1?o(i):i.selected||o(i));o(i);break}case"Home":if(0===a.length)return;n||(t._keysPressed.Shift||t.clearSelection(),t.select(a[0])),t._focus(a[0]),t.scrollTop=0;break;case"End":if(0===a.length)return;n||(t._keysPressed.Shift||t.clearSelection(),t.select(a[a.length-1])),t._focus(a[a.length-1]),t.scrollTop=t.scrollHeight;break;case"PageUp":t._pageUpKeyHandler(a);break;case"PageDown":t._pageDownKeyHandler(a)}t._recycle()}}_horizontalScrollbarHandler(e){const t=this;e&&e.stopPropagation&&e.stopPropagation(),t.isVirtualized?t._recycle():t.$.itemsContainer.scrollLeft=t._getScrollLeft(e.detail.value)}_getScrollLeft(e,t){const n=this;if(!n.rightToLeft)return e;if(Smart.Utilities.Core.Browser.Chrome){if(!t){const a=2*(parseInt(getComputedStyle(n.$.itemsInnerContainer).getPropertyValue("--smart-list-item-horizontal-offset"))||0);t=n._scrollWidth-n.$.itemsContainer.offsetWidth-a}e=t-e}else e*=-1;return e}_unsort(){const e=this;e.isUpdating++;const t=function(n,a){let i=n.dataIndex,o=a.dataIndex;return i<o?-1:i>o?1:0};if(e.isVirtualized)if(e._groups.length>0){e._groups.sort(t);let n=[];for(let a=0;a<e._groups.length;a++){const i=e._groups[a],o=[].concat(...i.items);o.sort(t),n.push(i),n=n.concat(o)}e._items=n}else e._items.sort(t);else{if(e._groups.length>0){e._groups.sort(t);let n=[];for(let a=0;a<e._groups.length;a++){const o=[].concat(...e._groups[a].querySelectorAll("smart-list-item"));o.sort(t),n=n.concat(o)}e._items=n}else e._items.sort(t);e._applySortOrder()}e.isUpdating--}_applySortOrder(){const e=function(t){for(let n=0;n<t.length;n++){const a=t[n],i=a.parentNode;i&&i.appendChild(a)}};e(this._items),e(this._groups)}_sort(){const e=this;if(!e._canSort)return;e.isUpdating++;const t=function(n,a){let i=n.label,o=a.label;if("asc"===e.sortDirection){if(i<o)return-1;if(i>o)return 1}else{if(i<o)return 1;if(i>o)return-1}return 0};if(e._groups.sort(t),e.isVirtualized)if(e._groups.length>0){let n=[];for(let a=0;a<e._groups.length;a++){const i=e._groups[a],o=[].concat(...i.items);n.push(i),o.sort(t),n=n.concat(o)}e._items=n}else e._items.sort(t);else{if(e._groups.length>0){let n=[];for(let a=0;a<e._groups.length;a++){const o=[].concat(...e._groups[a].querySelectorAll("smart-list-item"));o.sort(t),n=n.concat(o)}e._items=n}else e._items.sort(t);e._applySortOrder()}e.isUpdating--}getItem(e){const t=this;for(let n=0;n<t._items.length;n++)if(t._items[n].value===e)return t._items[n];return null}_focus(e){const t=this;!e||"none"===t.selectionMode||t.disabled||t.readonly||(t._focusedItem&&(t._focusedItem._focused=!1),t._focusedItem=e,t._focusedItem._focused=!0)}_keyDownHandler(e){const t=this,n=(t.shadowRoot||t.getRootNode()).activeElement||document.activeElement;let a=e.key;if(e.metaKey&&(a="Control"),!t.disabled&&!t.readonly&&(!t.filterable||t.$.filterInput!==n)&&t._focused&&0!==t._items.length&&!t.disabled&&!t.displayLoadingIndicator){if(t.editable){if("F2"===a)return void t._dblclickEventHandler({target:t._focusedItem});if(t.$.editInput===n)return}if("none"!==t.selectionMode){switch(e.stopPropagation(),a){case"Down":case"Right":case"Left":case"Up":a="Arrow"+a}if(t.filterable)switch(a){case"ArrowLeft":case"ArrowRight":return;case"ArrowUp":case"ArrowDown":e.preventDefault()}if(t._applyIncrementalSearch(a),!(["Shift","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Control"," ","Home","End","PageUp","PageDown"].indexOf(a)<0))if(e.preventDefault(),!t._focusedItem&&t._items.length>0)"one"===t.selectionMode||"oneOrMany"===t.selectionMode||"oneOrManyExtended"===t.selectionMode?t.select(t._items[0]):t._focus(t._items[0]);else switch(t.selectionMode){case"one":case"zeroAndOne":if("Shift"===a||"Control"===a||" "===a)return;t._handleKeyStrokes(a);break;case"oneOrMany":case"zeroOrOne":case"zeroOrMany":case"radioButton":case"checkBox":if("Shift"===a||"Control"===a)return;t._handleKeyStrokes(a);break;case"oneOrManyExtended":if(" "===a)return;t._keysPressed[a]="keydown"===e.type,t._handleKeyStrokes(a)}}}}_keyUpHandler(e){const t=this,n=(t.shadowRoot||t.getRootNode()).activeElement||document.activeElement;if(!t.editable||t.$.editInput!==n){if(t.filterable&&t.$.filterInput===n)return t._filterTimer&&clearTimeout(t._filterTimer),void(t._filterTimer=setTimeout(function(){const a=t.context;t.context=t,t._filterItems(),t.scrollTop=t.$.itemsContainer.scrollTop=0,t.scrollLeft=t.$.itemsContainer.scrollLeft=t._getScrollLeft(0),t.context=a},300));if(t._focused){if(t._focusedItem&&t._focusedItem.hidden&&t._filteredItems.length>0){let a=t._filteredItems[0];a.grouped&&t._filteredItems.length>1&&(a=t._filteredItems[1]),t._focus(a),t._recycle()}e.stopPropagation(),e.preventDefault(),t.disabled||("Escape"===e.key&&Smart.ListBox.DragDrop.Dragging&&t._cancelDrag(),["Shift","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Control"," ","PageUp","PageDown"].indexOf(e.key)<0||(t._keysPressed[e.key]=!1))}}}_cancelDrag(){if(!Smart.ListBox.DragDrop.Dragging)return;Smart.ListBox.DragDrop.Feedback.parentNode&&Smart.ListBox.DragDrop.Feedback.parentNode.removeChild(Smart.ListBox.DragDrop.Feedback);const e=Smart.ListBox.DragDrop.Item,t=e.ownerListBox;if(t.$.fireEvent("dragCancel",{item:e,data:Smart.ListBox.DragDrop,container:t,previousContainer:t}),Smart.ListBox.DragDrop.Feedback=null,Smart.ListBox.DragDrop.DropDetails){let n=Smart.ListBox.DragDrop.DropDetails.item;n&&(n.$.removeClass("smart-list-item-line-feedback"),n.$.removeClass("smart-list-item-bottom-line-feedback"))}document.body.classList.remove("smart-dragging"),delete Smart.ListBox.DragDrop.DraggedFrom,Smart.ListBox.DragDrop.Dragging=!1,Smart.ListBox.DragDrop.Item=null,Smart.ListBox.DragDrop.DropDetails=null}_mouseWheelHandler(e){const t=this;if((t.computedHorizontalScrollBarVisibility||t.computedVerticalScrollBarVisibility)&&!t.disabled&&t.computedVerticalScrollBarVisibility){const n=t.scrollTop;if(0===n&&e.deltaY<0||n===t.scrollHeight&&e.deltaY>0)return;e.stopPropagation(),e.preventDefault(),t.scrollTo(n+t._getScrollCoefficient(e,t.offsetHeight))}}_pageDownKeyHandler(e){const t=this;if(0===e.length)return;let n,a=t._items[t.selectedIndexes[t.selectedIndexes.length-1]];if("checkBox"!==t.selectionMode&&"radioButton"!==t.selectionMode&&"zeroOrMany"!==t.selectionMode&&"oneOrMany"!==t.selectionMode&&"zeroOrOne"!==t.selectionMode||t._focusedItem&&(a=t._focusedItem),!a)return;const i=t._indexOf(a);let o=a.top+t.$.itemsContainer.offsetHeight-a.height;for(let r=i;r<e.length;r++)if(e[r].top>=o){n=e[r];break}n||(n=e[e.length-1]),"checkBox"===t.selectionMode||"radioButton"===t.selectionMode||"zeroOrMany"===t.selectionMode||"oneOrMany"===t.selectionMode||"zeroOrOne"===t.selectionMode?t._focus(n):n.selected||(t._keysPressed.Shift||t.clearSelection(),t.select(n),t._focus(n)),(n.height+n.top>t.$.itemsContainer.scrollTop+t.$.itemsContainer.offsetHeight||n.top<t.$.itemsContainer.scrollTop)&&(t.scrollTop=n.top-t.$.itemsContainer.offsetHeight+n.height)}_pageUpKeyHandler(e){const t=this;if(0===e.length)return;let n=t._items[t.selectedIndexes[t.selectedIndexes.length-1]];if("checkBox"!==t.selectionMode&&"radioButton"!==t.selectionMode&&"zeroOrMany"!==t.selectionMode&&"oneOrMany"!==t.selectionMode&&"zeroOrOne"!==t.selectionMode||t._focusedItem&&(n=t._focusedItem),!n)return;const a=n.top-t.$.itemsContainer.offsetHeight;let i;for(let o=t._indexOf(n);o>0;o--)if(e[o].top<=a){i=e[o];break}i||(i=e[0]),"checkBox"===t.selectionMode||"radioButton"===t.selectionMode||"zeroOrMany"===t.selectionMode||"oneOrMany"===t.selectionMode||"zeroOrOne"===t.selectionMode?t._focus(i):i.selected||(t._keysPressed.Shift||t.clearSelection(),t.select(i),t._focus(i)),t.scrollTop=i.top,0===t._indexOf(i)&&(t.scrollTop=0)}clearItems(){const e=this;e.clearSelection(),e.$.itemsInnerContainer.innerHTML="",e._items=[],delete e._focusedItem,e.$placeholder.removeClass("smart-hidden"),e.refresh()}_resizeHandler(e){this.refresh(e)}refresh(e){const t=this;if(!e&&!t._isUpdatingScrollBars&&t.isInitialized)return t._isUpdatingScrollBars=!0,t._initializeRecyclingItems(),t._refreshLayout(),void(t._isUpdatingScrollBars=!1);e&&e.target===t&&!t._isUpdatingScrollBars&&(t._isUpdatingScrollBars=!0,t._initializeRecyclingItems(),t._refreshLayout(),t._isUpdatingScrollBars=!1)}_indexOf(e){const t=this;if(!e)return-1;let n=t._items.indexOf(e);return-1===n&&(n=t._items.indexOf(t.getItem(e.value))),n}_incrementalSearch(){const e=this,t="radioButton"!==e.selectionMode&&"checkBox"!==e.selectionMode&&"zeroOrMany"!==e.selectionMode&&"oneOrMany"!==e.selectionMode&&"zeroOrOne"!==e.selectionMode;let n,a=0;switch(e.incrementalSearchMode){case"containsIgnoreCase":case"equalsIgnoreCase":case"startsWithIgnoreCase":case"endsWithIgnoreCase":n=e._incrementalSearchQuery.toLowerCase();break;default:n=e._incrementalSearchQuery}const i=function(r){r.grouped||r.readonly||(t?(e.selectedIndexes.length>0&&e.clearSelection(),e._focus(r),e.select(r)):e._focus(r),(r.height+r.top>e.$.itemsContainer.scrollTop+e.$.itemsContainer.offsetHeight||r.top<e.scrollTop)&&(e.scrollTop=r.top),0===e._indexOf(r)&&(e.scrollTop=0),e._indexOf(r)===e._items.length-1&&(e.scrollTop=e.scrollHeight))};0!==e._previousEntry.localeCompare(n)&&(e._incrementalSearchItems=e._queryItems(e._incrementalSearchQuery,e.incrementalSearchMode),delete e._itemPosition),e._previousEntry=n;const o=e._incrementalSearchItems.length;if(0!==o)if(1!==o)for(void 0!==e._itemPosition?e._itemPosition<o-1?a=e._itemPosition:(a=0,t?(e._incrementalSearchItems[e._itemPosition].selected=!1,e.selectedIndexes=[],e.selectedValues=[]):e._incrementalSearchItems[e._itemPosition]._focused=!1):t&&e.clearSelection();a<o;a++)if(e._incrementalSearchItems[a].selected&&t)e._incrementalSearchItems[a].selected=!1,e.selectedIndexes=[],e.selectedValues=[];else{if(t||!e._incrementalSearchItems[a]._focused)return i(e._incrementalSearchItems[a]),void(e._itemPosition=a);e._incrementalSearchItems[a]._focused=!1}else i(e._incrementalSearchItems[0])}_selectStartHandler(e){const t=this,n=(t.shadowRoot||t.getRootNode()).activeElement;t.$.filterInput!==n&&t.$.editInput!==n&&e.preventDefault()}_handleArrowKeys(e){const t=this,n="radioButton"!==t.selectionMode&&"checkBox"!==t.selectionMode&&"zeroOrMany"!==t.selectionMode&&"oneOrMany"!==t.selectionMode&&"zeroOrOne"!==t.selectionMode;if(t.disabled||t.readonly)return;let a;if(t._focusedItem&&!t._keysPressed.Shift)a=t._indexOf(t._focusedItem),t._focusedItem._focused=!1;else{if(0===t.selectedIndexes.length)return;a=t.selectedIndexes[t.selectedIndexes.length-1]}const i=e?t._getPreviousItem(a):t._getNextItem(a);t._focus(i),n&&(t._keysPressed.Shift?t.select(i):t._items[a]!==i&&(t.clearSelection(),t.select(i))),t.ensureVisible(i)}_refreshFilter(){const e=this;if(e.filterable)return e.$.filterInput.disabled=!(!e.disabled&&!e.displayLoadingIndicator),e.$filterInputContainer.removeClass("smart-hidden"),void e.$itemsContainer.addClass("filter");e.$.filterInput.disabled=!0,e.$filterInputContainer.addClass("smart-hidden"),e.$itemsContainer.removeClass("filter")}_setFocusable(){const e=this;e.disabled||e.unfocusable?e.removeAttribute("tabindex"):e.tabIndex=e.tabIndex>0?e.tabIndex:0}_setLoadingIndicatorVisibility(){const e=this;e.displayLoadingIndicator?e.$loadingIndicatorContainer.hasClass("smart-visibility-hidden")?e.$loadingIndicatorContainer.removeClass("smart-visibility-hidden"):e.$loadingIndicatorContainer.removeClass("smart-hidden"):e.$loadingIndicatorContainer.addClass(e._areCSSVarsSupported?"smart-hidden":"smart-visibility-hidden")}_refreshLayout(){const e=this,t=e._filteredItems||e._items;if(e.__scrollHeight=null,e.__scrollWidth=null,e._height=null,e._scrollView||(e._scrollView=new Smart.Utilities.Scroll(e,e.$.horizontalScrollBar,e.$.verticalScrollBar)),e.$itemsContainer.removeClass("hscroll"),e.$itemsContainer.removeClass("vscroll"),!t||null===t||0===t.length)return e.scrollWidth=0,e.scrollHeight=0,e.$filterInputContainer.removeClass("vscroll"),e.$placeholder.removeClass("smart-hidden"),e.isVirtualized&&e._recycle(),void(e.$.itemsInnerContainer.style.width="");e.$placeholder.addClass("smart-hidden");const n=2*(parseInt(getComputedStyle(e.$.itemsContainer).getPropertyValue("--smart-list-item-horizontal-offset"))||0);let a=e._scrollWidth-e.$.itemsContainer.offsetWidth-n,i=e._scrollHeight;if(e._refreshHorizontalScrollBarVisibility(a),e._refreshVerticalScrollBarVisibility(i),e.$.itemsInnerContainer.style.width="",e.$.itemsInnerContainer.style.width="hidden"===e.horizontalScrollBarVisibility?e.$.itemsContainer.offsetWidth-n:Math.max(e.$.itemsContainer.offsetWidth-n,-n+e.__scrollWidth)+"px",e.computedVerticalScrollBarVisibility)return a=e._scrollWidth-e.$.itemsContainer.offsetWidth-n,e._refreshHorizontalScrollBarVisibility(a),"hidden"!==e.horizontalScrollBarVisibility&&(e.$.itemsInnerContainer.style.width="",e.$.itemsInnerContainer.style.width=Math.max(e.$.itemsContainer.offsetWidth-n,-n+e.__scrollWidth)+"px"),e.computedHorizontalScrollBarVisibility&&(("visible"!==e.horizontalScrollBarVisibility||0!==e.scrollWidth||"visible"===e.horizontalScrollBarVisibility)&&(e.__scrollHeight+=e._scrollView.hScrollBar.offsetHeight),e.scrollHeight=e.__scrollHeight,e._scrollView.hScrollBar.$.hasClass("bottom-corner")&&e._scrollView.hScrollBar.refresh()),void(e.isVirtualized&&e._recycle());a=e._scrollWidth-e.$.itemsContainer.offsetWidth-n,e._refreshHorizontalScrollBarVisibility(a),e.computedHorizontalScrollBarVisibility&&(e.scrollHeight=e._scrollHeight,e._refreshVerticalScrollBarVisibility(e.scrollHeight),e.computedVerticalScrollBarVisibility&&(a=e._scrollWidth-e.$.itemsContainer.offsetWidth-e._scrollView.vScrollBar.offsetWidth,e._refreshHorizontalScrollBarVisibility(a)),e._scrollView.vScrollBar.$.hasClass("bottom-corner")&&e._scrollView.vScrollBar.refresh(),e._scrollView.hScrollBar.$.hasClass("bottom-corner")&&e._scrollView.hScrollBar.refresh()),e.isVirtualized&&e._recycle();const o=/Trident|Edge/.test(navigator.userAgent);!e.isRefreshing&&o&&setTimeout(function(){e.isRefreshing=!0,e._refreshLayout(),e.isRefreshing=!1},50)}_styleChangedHandler(){this._refreshLayout()}_swipeLeftHandler(){}_swipeRightHandler(){}_refreshHorizontalScrollBarVisibility(e){const t=this;t.scrollWidth=e,t.computedHorizontalScrollBarVisibility?(t.scrollLeft=t._getScrollLeft(t.$.itemsContainer.scrollLeft,e),t.$itemsContainer.addClass("hscroll")):t.$itemsContainer.removeClass("hscroll")}_refreshVerticalScrollBarVisibility(e){const t=this;t.scrollHeight=e,t.computedVerticalScrollBarVisibility?(t.$itemsContainer.addClass("vscroll"),t.$filterInputContainer.addClass("vscroll")):(t.$itemsContainer.removeClass("vscroll"),t.$filterInputContainer.removeClass("vscroll"))}_validateTemplate(e,t){if(null===t||!t)return;const n=this;return"content"in document.createElement("template")?null!==(t=document.getElementById(t))&&"content"in t?t:(n.error(n.localize("invalidTemplate",{elementType:n.nodeName.toLowerCase(),property:e})),void(n[e]=null)):(n.error(n.localize("htmlTemplateNotSuported",{elementType:n.nodeName.toLowerCase()})),void(n[e]=null))}_getItemIndexByPosition(e){const t=this;return(n=>{let a=0,i=n.length-1;if(e<=0)return 0;if(n[n.length-1].top<=e)return n.length-1;for(;;){const o=Math.floor((a+i)/2),r=n[o];if(t._isItemInPosition(r,e))return o;r.top<e?a=o+1:r.top>e&&(i=o-1)}})(t.filterable&&t.$.filterInput.value.length>0?t._filteredItems:t._items)}_isItemInPosition(e,t){return e.top<=t&&e.top+e.height>t}get isVirtualized(){const e=this;return e.virtualized&&e.dataSource&&e.dataSource.length>0}_recycle(){const e=this;if(!e._recyclingItems)return;let t=e._height;e._height||(t=e._height=e.$.itemsContainer.offsetHeight);let n=0;const a=e.scrollTop,i=e._getItemIndexByPosition(a),o=e.filterable&&e.$.filterInput.value.length>0?e._filteredItems:e._items,r=o[i];let l=r?r.top:0;if(e.$.itemsInnerContainer.style.left=-e.scrollLeft+"px",e.$.itemsInnerContainer.style.top=-a+l+"px",e.isUpdating++,i>=0){const s=o.length;for(let c=i;c<s;c++){const u=o[c];if(0!==u.height){if(!(l+u.height>=a&&l<=a+t))break;{const p=e._recyclingItems[n++];if(!p)break;p.setAttribute("aria-setsize",s),p.setAttribute("aria-posinset",c),p.context=document,p.dataItem=u,p.label=u.label,p.value=u.value,p.selected=u.selected,p._focused=u._focused,p.hidden=u.hidden,p.grouped=u.grouped,p.readonly=u.readonly,p.style.height=u.height+"px",e._alternateItem(p),p.title=u.title?u.title:"",p.displayMode=u.grouped?"plain":u.displayMode,e.scrollWidth>0&&(p.style.width=e.$.itemsInnerContainer.offsetWidth+e.scrollWidth+"px"),e.itemTemplate&&e._handleItemTemplate(e.itemTemplate)&&e._applyTemplate(p,!1)}l+=u.height}}}if(n<e._recyclingItems.length)for(let s=n;s<e._recyclingItems.length;s++){const c=e._recyclingItems[n++],u=c.context;c.context=document,c.hidden=!0,c.context=u}e.isUpdating--}_verticalScrollbarHandler(e){const t=this,n=e.detail.value;e&&e.stopPropagation&&e.stopPropagation(),t.isVirtualized?t._recycle():t.$.itemsContainer.scrollTop=n,t._updateTopVisibleIndex(),e.context.max!==e.context.value?e.context.min===e.context.value&&t.$.fireEvent("scrollTopReached"):t.$.fireEvent("scrollBottomReached")}_applyAriaSelected(){const e=this,t=e.isVirtualized?e._recyclingItems:e._items,n=e.selectionMode;for(let a=0;a<t.length;a++){const i=t[a];i.selected?i.setAttribute("aria-selected",!0):i.readonly||i.disabled||-1===["oneOrManyExtended","zeroOrMany","oneOrMany","checkBox"].indexOf(n)?i.removeAttribute("aria-selected"):i.setAttribute("aria-selected",!1)}}})},2629:()=>{Smart("smart-masked-text-box",class extends Smart.BaseElement{static get properties(){return{allowPromptAsInput:{value:!1,type:"boolean"},asciiOnly:{value:!1,type:"boolean"},autoFocus:{value:!1,type:"boolean"},autoShowMask:{value:!1,type:"boolean"},cutCopyMaskFormat:{value:"excludePromptAndLiterals",allowedValues:["excludePromptAndLiterals","includePrompt","includeLiterals","includePromptAndLiterals"],type:"string"},hidePromptOnLeave:{value:!1,type:"boolean"},hint:{value:"",reflectToAttribute:!0,type:"string"},isOverwriteMode:{value:!1,type:"boolean"},label:{value:"",reflectToAttribute:!0,type:"string"},mask:{value:"#####",type:"string"},maskCompleted:{value:!1,type:"boolean"},maskFull:{value:!1,type:"boolean"},maxLength:{value:null,type:"number?"},minLength:{value:2,type:"number"},name:{value:"",type:"string"},placeholder:{value:"",type:"string"},promptChar:{value:"_",type:"string"},rejectInputOnFirstFailure:{value:!1,type:"boolean"},resetOnPrompt:{value:!1,type:"boolean"},resetOnSpace:{value:!1,type:"boolean"},selectAllOnFocus:{value:!1,type:"boolean"},textMaskFormat:{value:"excludePromptAndLiterals",allowedValues:["excludePromptAndLiterals","includePrompt","includeLiterals","includePromptAndLiterals"],type:"string"},validation:{value:null,type:"function?",reflectToAttribute:!1},value:{value:null,reflectToAttribute:!0,type:"string?"}}}static get listeners(){return{mouseenter:"_mouseEventsHandler",mouseleave:"_mouseEventsHandler","input.copy":"_cutCopyHandler","input.change":"_textBoxChangeHandler","input.cut":"_cutCopyHandler","input.paste":"_textBoxPasteHandler","input.keydown":"_textBoxKeyDownHandler","input.keyup":"_textBoxKeyUpHandler","input.blur":"_blurHandler","input.focus":"_focusHandler"}}static get styleUrls(){return["smart.textbox.css","smart.maskedtextbox.css"]}template(){return'<div id="container" role="presentation"><span id="label" inner-h-t-m-l="[[label]]" class="smart-hidden smart-label"></span><input class="smart-input" type="text" id="input"\n                   autocomplete="off"\n                   autocorrect="off"\n                   autocapitalize="off"\n                   disabled="[[disabled]]"\n                   maxlength="[[maxLength]]"\n                   minlength="[[minLength]]"\n                   name="[[name]]"\n                   placeholder="[[placeholder]]"\n                   readonly="[[readonly]]" /><span id="hint" inner-h-t-m-l="[[hint]]" class="smart-hidden smart-hint"></span></div>'}propertyChangedHandler(e,t,n){const a=this;let i;switch(e){case"hidePromptOnLeave":n&&!a._focused?a._hidePrompt():a._promptHidden&&a._showPrompt();break;case"maxLength":a.mask.length>0&&(a.maxLength=t);break;case"maskCompleted":case"maskFull":a[e]=t;break;case"promptChar":a._updatePromptChar();break;case"placeholder":a._isPlaceholderRequired()?(a.$.input.value="",a.$.removeClass("has-value")):a._updatePromptChar(),a._updatePromptChar();break;case"mask":i=a._getValueWithTextMaskFormat({start:0,end:a._mask.length},"excludePromptAndLiterals"),a._isPlaceholderRequired()?(a.$.input.value="",a.$.removeClass("has-value")):(a._initializeMask(),a._setValueToMask(i),a._isMobileChrome&&document.activeElement===a.$.input||a._setMask(),a.maxLength=a._mask.length,a._promptHidden&&a._hidePrompt());break;case"value":a._overwrite=!0,a._setValueToMask(n),a._overwrite=!1,a._isMobileChrome&&document.activeElement===a.$.input||a._setMask(),a._promptHidden&&a._hidePrompt(),a._updateMaskFullAndCompleted();break;case"disabled":case"unfocusable":a._setFocusable();break;case"readonly":break;default:super.propertyChangedHandler(e,t,n)}a.value=a._getValueWithTextMaskFormat({start:0,end:a._mask.length},a.textMaskFormat)}render(){this._createElement(),super.render()}focus(){this.$.input.focus()}_setFocusable(){const e=this;e.disabled||e.unfocusable?e.$.input.tabIndex=-1:e.$.input.removeAttribute("tabindex")}_createElement(){const e=this;e.autoFocus&&e.$.input.focus(),e.$.addClass("smart-input"),e._setFocusable(),e._initializeMask(),e._updateMaxLength(),e._isPlaceholderRequired()?(e.$.input.value="",e.$.removeClass("has-value")):(e._setValueToMask(e.value),e._isMobileChrome&&document.activeElement===e.$.input||e._setMask(),e._updateMaskFullAndCompleted(),e.$.addClass("has-value")),e.$.input.selectionStart=e.$.input.selectionEnd=0,e._initializationValue=e._value=e.value,e._rejectInput=!1,e.$.label.id||(e.$.label.id=e.id+"Label"),e.$.hint.id||(e.$.hint.id=e.id+"Hint"),e.hidePromptOnLeave&&!e._focused&&e._hidePrompt();const t=Smart.Utilities.Core;e._isMobileChrome=t.isMobile&&t.Browser.Chrome,e.setAttribute("role","presentation"),e.$.input.setAttribute("aria-describedby",e.$.hint.id),e.$.input.setAttribute("aria-labelledby",e.$.label.id)}_blurHandler(){const e=this,t=e._isPlaceholderRequired();e.disabled||(e._valueBeforeChange!==e.value&&(e.$.fireEvent("change",{value:e.value,oldValue:e._valueBeforeChange}),e._valueBeforeChange=""),e._isMobileChrome&&(e._overwrite=!0,e._setValueToMask(e.$.input.value),e._overwrite=!1,e._setMask()),e._focused=!1,e._hidePrompt(),e._validateMaskValue(),e.removeAttribute("focus"),e.$.input.value.length>0?e.$.addClass("has-value"):e.$.removeClass("has-value"),t&&(e.$.input.value="",e.$.removeClass("has-value")),e.$.fireEvent("blur"))}_updateMaskFullAndCompleted(){const e=this;let t=!0,n=!0,a=!1;for(let i=0;i<e._mask.length;i++){const o=e._mask[i];"mask"===o.type&&(o.required&&(a=!0),""===o.character&&(o.required&&(n=!1),t=!1))}t||!n||a||(n=!1),e.maskFull=t,e.maskCompleted=n}_isPlaceholderRequired(){const e=this;return!(e.value&&e.value.length>0)&&(e.placeholder.length>0||e.autoShowMask)}_cleanMask(e,t){const n=this;t=t||n._mask.length;for(let a=e=e||0;a<t;a++)"mask"===n._mask[a].type&&(n._mask[a].character="")}_cutCopyHandler(e,t){const n=this,a=parseInt(n.$.input.selectionStart,10),i=parseInt(n.$.input.selectionEnd,10),o=n._getValueWithTextMaskFormat({start:a,end:i});return window.clipboardData&&(window.clipboardData.setData("text/plain",o),window.clipboardData.setData("text/html",o)),e&&n._preventDefault(e),"Copy"===t||(n._cleanMask(a,i),n.value=n._getValueWithTextMaskFormat({start:0,end:n._mask.length},n.textMaskFormat),n._isMobileChrome&&document.activeElement===n.$.input||n._setMask(),n.$.input.selectionStart=n.$.input.selectionEnd=a,n.maskFull=n.maskCompleted=!1),o}_documentUpHandler(){}_deleteHandler(e){const t=this,n=t.$.input.selectionStart,a=t.$.input.selectionEnd,i=e.key;let o=n;if(t._preventDefault(e),n===a)if("Backspace"===i||"Unidentified"===i)for(let r=n;r>0;r--){const l=t._mask[r-1];if("mask"===l.type){o=r-1,l.character="";break}o=n-1;break}else for(let r=n;r<t._mask.length;r++){const l=t._mask[r];if("mask"===l.type){o=r+1,l.character="";break}o=n+1;break}else t._cleanMask(n,a),"Delete"===i&&(o=a);t._isMobileChrome&&document.activeElement===t.$.input||t._setMask(),t._updateMaskFullAndCompleted(),t.value=t._getValueWithTextMaskFormat({start:0,end:t._mask.length},t.textMaskFormat),t.$.input.selectionStart=t.$.input.selectionEnd=o}_findNextOccupiedPosition(e){const t=this,n=t._mask.length;let a=e;for(let i=e;i<n;i++){let o=t._mask[i];if("mask"!==o.type||""!==o.character)break;a++}return a}select(){this.$.input.select()}_focusHandler(e){const t=this;if("INPUT"===e.context.nodeName.toUpperCase()){if(!t.disabled)if(t.setAttribute("focus",""),t.selectAllOnFocus&&t.$.input.select(),t._focused=!0,t._isMobileChrome)t._removeMask();else{if(t._showPrompt(),t._isPlaceholderRequired()){t._initializeMask(),t._setValueToMask(t.value),t._setMask();const n=t._getEditableSelectionStart(0);t.$.input.selectionStart=t.$.input.selectionEnd=n}t.$.fireEvent("focus")}}else t.$.input.focus()}_setMask(){const e=this;let t="";for(let n=0;n<e._mask.length;n++){const a=e._mask[n];let i;if("literal"===a.type||"separator"===a.type||"placeholder"===a.type||"currency"===a.type)i=a.character;else if("mask"===a.type&&""!==a.character)switch(a.escapeSymbol){case">":i=a.character.toUpperCase();break;case"<":i=a.character.toLowerCase();break;case"|":case"\\":default:i=a.character}else i=a.defaultCharacter;t+=i}e.$.input.value=t}_removeMask(){const e=this;let t="";for(let n=0;n<e._mask.length;n++){const a=e._mask[n];a.character!==a.defaultCharacter&&(t+=a.character)}e.$.input.value=t}_getEditableSelectionStart(e,t){const n=this;for(let a=e;a<n._mask.length;a++){const i=n._mask[a];if("mask"===i.type&&(""===i.character||n.isOverwriteMode||" "===t&&n.resetOnSpace||t===n.promptChar&&n.resetOnPrompt))return a}return-1}_getNonEditableSelectionStart(e,t){const n=this;for(let a=e;a<n._mask.length;a++){const i=n._mask[a];if("mask"!==i.type&&i.character===t)return a}return-1}_getValueWithTextMaskFormat(e,t){const n=this,a=e?e.start:0,i=e?e.end:n._mask.length||n.$.input.value.length;let o="";if("includePromptAndLiterals"===(t=t||n.cutCopyMaskFormat))return n.$.input.value.substring(a,i);for(let r=a;r<i;r++){const l=n._mask[r];switch(t){case"excludePromptAndLiterals":if("mask"!==l.type)continue;o=""===l.character?o+" ":o+l.character;break;case"includePrompt":if("mask"!==l.type)continue;o=""===l.character?o+l.defaultCharacter:o+l.character;break;case"includeLiterals":if("mask"===l.type&&""===l.character)continue;o+=l.character}}return o.trim()}_hidePrompt(){const e=this,t=new RegExp(e.promptChar,"g");!e.disabled&&e.hidePromptOnLeave&&0!==e.mask.length&&(e.$.input.value=e.$.input.value.replace(t," "),e._promptHidden=!0)}_initializeMask(){const e=this;let t,n=e.mask.length;if(e._mask=[],null!=e.mask&&0!==e.mask.length)for(let a=0;a<n;a++){const i=e.mask.charAt(a);let o={};switch(o.defaultCharacter=e.promptChar,i){case"0":o.editable=!0,o.required=!0,o.escapeSymbol=t,o.type="\\"===o.escapeSymbol?"literal":"mask",o.maskCharacter="0",o.regex="\\d",o.character="\\"===o.escapeSymbol?o.maskCharacter:"",o.defaultCharacter=e.promptChar,t=null;break;case"9":o.editable=!0,o.required=!1,o.escapeSymbol=t,o.type="\\"===o.escapeSymbol?"literal":"mask",o.maskCharacter="9",o.regex="(\\d|\\s)",o.character="\\"===o.escapeSymbol?o.maskCharacter:"",o.defaultCharacter=e.promptChar,t=null;break;case"#":o.editable=!0,o.required=!1,o.escapeSymbol=t,o.type="\\"===o.escapeSymbol?"literal":"mask",o.maskCharacter="#",o.regex="(\\d|\\s|[+]|[-])",o.character="\\"===o.escapeSymbol?o.maskCharacter:"",o.defaultCharacter=e.promptChar,t=null;break;case"L":o.editable=!0,o.required=!0,o.escapeSymbol=t,o.type="\\"===o.escapeSymbol?"literal":"mask",o.maskCharacter="L",o.regex="([a-zA-Z\u0430-\u044f\u0410-\u042f])",o.character="\\"===o.escapeSymbol?o.maskCharacter:"",o.defaultCharacter=e.promptChar,t=null;break;case"?":o.editable=!0,o.required=!1,o.escapeSymbol=t,o.type="\\"===o.escapeSymbol?"literal":"mask",o.maskCharacter="?",o.regex="[a-zA-Z\u0430-\u044f\u0410-\u042f]?",o.character="\\"===o.escapeSymbol?o.maskCharacter:"",o.defaultCharacter=e.promptChar,t=null;break;case"&":o.editable=!0,o.required=!0,o.escapeSymbol=t,o.type="\\"===o.escapeSymbol?"literal":"mask",o.maskCharacter="&",o.regex="[^\\s]",o.character="\\"===o.escapeSymbol?o.maskCharacter:"",o.defaultCharacter=e.promptChar,t=null;break;case"C":o.editable=!0,o.required=!1,o.escapeSymbol=t,o.type="\\"===o.escapeSymbol?"literal":"mask",o.maskCharacter="C",o.regex=".",o.character="\\"===o.escapeSymbol?o.maskCharacter:"",o.defaultCharacter=e.promptChar,t=null;break;case"A":o.editable=!0,o.required=!0,o.escapeSymbol=t,o.type="\\"===o.escapeSymbol?"literal":"mask",o.maskCharacter="A",o.regex="[a-zA-Z\u0430-\u044f\u0410-\u042f0-9]",o.character="\\"===o.escapeSymbol?o.maskCharacter:"",o.defaultCharacter=e.promptChar,t=null;break;case"a":o.editable=!0,o.required=!1,o.escapeSymbol=t,o.type="\\"===o.escapeSymbol?"literal":"mask",o.maskCharacter="a",o.regex="[a-zA-Z\u0430-\u044f\u0410-\u042f0-9]?",o.character="\\"===o.escapeSymbol?o.maskCharacter:"",o.defaultCharacter=e.promptChar,t=null;break;case"Z":o.editable=!0,o.required=!0,o.escapeSymbol=t,o.type="\\"===o.escapeSymbol?"literal":"mask",o.maskCharacter="Z",o.regex="[a-zA-Z0-9]",o.character="\\"===o.escapeSymbol?o.maskCharacter:"",o.defaultCharacter=e.promptChar,t=null;break;case"z":o.editable=!0,o.required=!1,o.escapeSymbol=t,o.type="\\"===o.escapeSymbol?"literal":"mask",o.maskCharacter="z",o.regex="[a-zA-Z0-9]?",o.character="\\"===o.escapeSymbol?o.maskCharacter:"",o.defaultCharacter=e.promptChar,t=null;break;case"Y":o.editable=!0,o.required=!0,o.escapeSymbol=t,o.type="\\"===o.escapeSymbol?"literal":"mask",o.maskCharacter="Y",o.regex="[a-zA-Z]",o.character="\\"===o.escapeSymbol?o.maskCharacter:"",o.defaultCharacter=e.promptChar,t=null;break;case"y":o.editable=!0,o.required=!1,o.escapeSymbol=t,o.type="\\"===o.escapeSymbol?"literal":"mask",o.maskCharacter="y",o.regex="[a-zA-Z]?",o.character="\\"===o.escapeSymbol?o.maskCharacter:"",o.defaultCharacter=e.promptChar,t=null;break;case".":o.editable=!1,o.required=!0,o.escapeSymbol=t,o.type="placeholder",o.maskCharacter=".",o.regex=null,o.character=".",o.defaultCharacter=e.promptChar,t=null;break;case",":o.editable=!1,o.required=!0,o.escapeSymbol=t,o.type="placeholder",o.maskCharacter=",",o.regex=null,o.character=",",o.defaultCharacter=e.promptChar,t=null;break;case":":o.editable=!1,o.required=!0,o.escapeSymbol=t,o.type="separator",o.maskCharacter=":",o.regex=null,o.character=":",o.defaultCharacter=e.promptChar,t=null;break;case"/":o.editable=!1,o.required=!0,o.escapeSymbol=t,o.type="separator",o.maskCharacter="/",o.regex=null,o.character="/",o.defaultCharacter=e.promptChar,t=null;break;case"$":o.editable=!1,o.required=!0,o.escapeSymbol=t,o.type="currency",o.maskCharacter="$",o.regex=null,o.character="$",o.defaultCharacter=e.promptChar,t=null;break;case"<":t?"|"===t?t=null:"\\"===t?(o.editable=!1,o.required=!0,o.escapeSymbol=t,o.type="literal",o.maskCharacter="<",o.regex="<",o.character="<",o.defaultCharacter=e.promptChar,t=null):t="<":t="<";break;case">":t?"|"===t?t=null:"\\"===t?(o.editable=!1,o.required=!0,o.escapeSymbol=t,o.type="literal",o.maskCharacter=">",o.regex=">",o.character=">",o.defaultCharacter=e.promptChar,t=null):t=">":t=">";break;case"|":t&&"\\"===t?(o.editable=!1,o.required=!0,o.escapeSymbol=t,o.type="literal",o.maskCharacter="|",o.regex="|",o.character="|",o.defaultCharacter=e.promptChar,t=null):t="|";break;case"\\":t&&"\\"===t?(o.editable=!1,o.required=!0,o.escapeSymbol=t,o.type="literal",o.maskCharacter="\\",o.regex="\\",o.character="\\",o.defaultCharacter=e.promptChar,t=null):t="\\";break;default:o.editable=!1,o.required=!0,o.escapeSymbol=t,o.type="literal",o.maskCharacter=i,o.regex=null,o.character=i,o.defaultCharacter=i,t=null}t||o.type&&e._mask.push(o)}}_keyDownHandler(){}_validateInput(e,t){return new RegExp(this._mask[t].regex).test(e)}_setValueToMask(e,t){const n=this,a=e||"",i=a.length,r=t&&t.end?t.end:n._mask.length;let l=t&&t.start?t.start:0,s=0;for(;l<r&&s<i;)"mask"===n._mask[l].type&&s++,(n._setCharAtPosition(a.charAt(s-1),l)||"mask"!==n._mask[l].type)&&l++;if(l<r)for(let c=l;c<r;c++)"mask"===n._mask[c].type&&(n._mask[c].character="");t&&(t.start=l)}_preventDefault(e){e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation()}_showPrompt(){const e=this;!e.disabled&&e._promptHidden&&(e._isMobileChrome&&document.activeElement===e.$.input||e._setMask())}_textBoxChangeHandler(e){const t=this;t.disabled||t.readonly||(t.value=t._getValueWithTextMaskFormat({start:0,end:t._mask.length},t.textMaskFormat),t._valueBeforeChange!==t.value&&(t.$.fireEvent("change",{value:t.value,oldValue:t._valueBeforeChange}),t._valueBeforeChange="",t._validateMaskValue()),e&&e.stopPropagation())}_textBoxKeyDownHandler(e){const t=this,n=e.key;if(t._isMobileChrome)return;const a=e.ctrlKey,i=t.$.input.selectionEnd,o=new RegExp("xxx[\0-\x7f]+xxx");let r=t.$.input.selectionStart;if(a&&["KeyA","KeyC","KeyV","KeyX"].indexOf(e.code)>-1){const s=function(c,u){const p=document.createElement("textarea");p.style.position="absolute",p.style.left="-1000px",p.style.top="-1000px",document.body.appendChild(p),p.focus(),"Paste"===c?setTimeout(function(){let g=p.value;0===g.length&&window.clipboardData&&(p.value=window.clipboardData.getData("Text"),g=p.value),p.parentNode.removeChild(p),t.$.input.focus(),u(g)},25):(p.value=t._cutCopyHandler(null,c),p.focus(),p.setSelectionRange(0,p.value.length),setTimeout(function(){document.designMode="off",p.focus(),p.parentNode.removeChild(p),t.$.input.focus()},25),window.clipboardData&&window.clipboardData.setData("Text",p.value))};switch(e.code){case"KeyA":t.$.input.setSelectionRange(0,t.$.input.value.length);break;case"KeyC":s("Copy");break;case"KeyV":s("Paste",function(c){const u=t.context;t.context=t,t._textBoxPasteHandler(null,c),t.context=u});break;case"KeyX":s("Cut")}}else{if("Backspace"===n||"Delete"===n)return t._deleteHandler(e),void t._updateMaskFullAndCompleted();t.allowPromptAsInput||n!==t.promptChar?t.disabled||t.readonly||t.asciiOnly&&!o.test(n)||!/^[a-zA-Z\xc0-\xff\u0430-\u044f\u0410-\u042f0-9.!@?#"$%&:';()*\+,\/;\-=[\\\]\^_{|}<>~` ]+$/.test(n)||n.length>1||(t._preventDefault(e),r===i&&r===t.$.input.value.length)||" "===n&&!t.resetOnSpace||(r=t._getEditableSelectionStart(r,n),-1!==r&&t._setCharAtPosition(n,r)?(t._isMobileChrome&&document.activeElement===t.$.input||t._setMask(),t._updateMaskFullAndCompleted(),t.$.input.selectionStart=t.$.input.selectionEnd=r+1):(r=t._getNonEditableSelectionStart(t.$.input.selectionStart,n),-1!==r&&(t.$.input.selectionStart=t.$.input.selectionEnd=r+1))):t._preventDefault(e)}}_textBoxKeyUpHandler(){const e=this,t=e.value;e.value=e._getValueWithTextMaskFormat({start:0,end:e._mask.length},e.textMaskFormat),t!==e.value&&e.$.fireEvent("changing",{value:e.value,oldValue:t})}_textBoxPasteHandler(e,t){const n=this,a=n.$.input.value,i=n.$.input.selectionStart;let o,r=n.$.input.selectionEnd;if(e&&n._preventDefault(e),window.clipboardData&&window.clipboardData.getData?o=window.clipboardData.getData("Text"):e&&e.clipboardData&&e.clipboardData.getData?o=e.clipboardData.getData("text/plain"):t&&(o=t),r-i!==a.length){if(i===r&&(n.$.input.selectionEnd=r=n._mask.length),n.rejectInputOnFirstFailure){let s=0;for(let c=i;c<r;c++)if("mask"===n._mask[c].type){if(!n._validateInput(o.charAt(s),c))return void(n.$.input.selectionStart=n.$.input.selectionEnd=i);if(s++,s>o.length)break}}const l={start:i,end:r};n._overwrite=!0,n._setValueToMask(o,l),n._isMobileChrome&&document.activeElement===n.$.input||n._setMask(),n._updateMaskFullAndCompleted(),n.$.input.selectionStart=n.$.input.selectionEnd=l.start,n.value=n._getValueWithTextMaskFormat({start:0,end:n._mask.length},n.textMaskFormat)}}_setCharAtPosition(e,t){const n=this,a=n._mask[t];if(" "===e&&n.resetOnSpace&&(e=""),"mask"!==a.type||n.readonly||n.disabled||!a.editable||""===e&&!n.resetOnSpace||e===n.promptChar&&!n.resetOnPrompt&&n.allowPromptAsInput||!n.isOverwriteMode&&""!==e&&e!==n.promptChar&&""!==a.character&&!n._overwrite)return!1;const i=a.regex;if(i){if(new RegExp(i,"i").test(e)){switch(a.escapeSymbol){case">":e=e.toUpperCase();break;case"<":e=e.toLowerCase()}return n._mask[t].character=e,!0}return n.resetOnSpace&&""===e?(n._mask[t].character=e,!0):!(!n.resetOnPrompt||e!==n.promptChar||!n.allowPromptAsInput||(n._mask[t].character="",0))}return!1}_updateMaxLength(){const e=this;e._mask.length>0&&(e.maxLength=e._mask.length)}_updatePromptChar(){const e=this;for(let t=0;t<e._mask.length;t++)e._mask[t].defaultCharacter=e.promptChar;e._isMobileChrome&&document.activeElement===e.$.input||e._setMask()}_validateMaskValue(){const e=this;if(e.readonly||e.disabled||!e.validation||"function"!=typeof e.validation)return;const n=e.validation(e.value);n?e.removeAttribute("error"):e.setAttribute("error",""),e.$.fireEvent("validation",{success:n})}_keyUpHandler(){}refresh(){}_resizeHandler(){}_selectStartHandler(){}_mouseWheelHandler(){}_applySelection(){}_setDropDownSize(){}_styleChangedHandler(){}})},8687:()=>{(()=>{let e;try{e=!0}catch(t){e=!1}Smart.Utilities.Assign("BigNumber",class{constructor(t,n,a){var i,o=this;if(Smart.Utilities.BigNumber.bigIntSupport){if(t instanceof Smart.Utilities.BigNumber){if(!Array.isArray(t._d))return new Smart.Utilities.BigNumber(t._d);t=(t._s?"-":"")+(t._d.slice(0,t._f).join("")||"0")+(t._f!=t._d.length?"."+t._d.slice(t._f).join(""):"")}try{o._d=null===t?BigInt(0):"string"==typeof t&&-1!==t.toLowerCase().indexOf("e")?BigInt(parseFloat(t)):BigInt(t)}catch(g){try{const b=t.toString().split(".");let v=BigInt(b[0]),y=parseInt(b[1].charAt(0));if(v>=0&&y>=5)v+=BigInt(1);else if(v<0)if(y>5)v-=BigInt(1);else if(5===y){let x=1,D=b[1].charAt(x),T=!1;for(;""!==D;)if(x++,D=b[1].charAt(x),"0"!==D){T=!0;break}T&&(v-=BigInt(1))}o._d=v}catch(b){o._d=BigInt(0)}}return o._f=o._d.toString().replace("-","").length,void(o._s=o._d<0)}if(t instanceof Smart.Utilities.BigNumber){if("bigint"==typeof t._d)return new Smart.Utilities.BigNumber(t._d.toString());for(i in{precision:0,roundType:0,_s:0,_f:0})o[i]=t[i];return o._d=t._d.slice(),void(t._s&&1===t._d.length&&0===t._d[0]&&(o._s=!1))}if(void 0!==t&&("-0"===t&&(t="0"),new RegExp(/e/i).test(t))){var r=t.toString().toLowerCase(),l=r.indexOf("e"),s=new Smart.Utilities.BigNumber(r.slice(0,l)),c=r.slice(l+2),u=r.slice(l+1,l+2),p=new Smart.Utilities.BigNumber(10).pow(u+c);t=s.multiply(p).toString()}for(o.precision=isNaN(n=Math.abs(n))?Smart.Utilities.BigNumber.defaultPrecision:n,o.roundType=isNaN(a=Math.abs(a))?Smart.Utilities.BigNumber.defaultRoundType:a,o._s="-"==(t+="").charAt(0),o._f=((t=t.replace(/[^\d.]/g,"").split(".",2))[0]=t[0].replace(/^0+/,"")||"0").length,i=(t=o._d=(t.join("")||"0").split("")).length;i;t[--i]=+t[i]);o.round()}static get defaultPrecision(){return 40}static get defaultRoundType(){return 4}static get bigIntSupport(){return e&&!0!==Smart.Utilities.BigNumber.ignoreBigIntNativeSupport}add(t){if(Smart.Utilities.BigNumber.bigIntSupport)return new Smart.Utilities.BigNumber(this._d+new Smart.Utilities.BigNumber(t)._d);let n=this.normalizeOperand(this);if(t=n.normalizeOperand(t),n.isZero()&&n._s&&(n._s=!1),0===t||t.constructor===Smart.Utilities.BigNumber&&1===t._d.length&&0===t._d[0])return new Smart.Utilities.BigNumber(n);if(n._s!=(t=new Smart.Utilities.BigNumber(t))._s)return t._s^=1,n.subtract(t);var a,i,o=new Smart.Utilities.BigNumber(n),r=o._d,l=t._d,s=o._f,c=t._f;for(t=Math.max(s,c),s!=c&&((c=s-c)>0?o._zeroes(l,c,1):o._zeroes(r,-c,1)),a=(s=r.length)==(c=l.length)?r.length:((c=s-c)>0?o._zeroes(l,c):o._zeroes(r,-c)).length,i=0;a;i=(r[--a]=r[a]+l[a]+i)/10>>>0,r[a]%=10);return i&&++t&&r.unshift(i),o._f=t,o.round()}subtract(t){if(Smart.Utilities.BigNumber.bigIntSupport)return new Smart.Utilities.BigNumber(this._d-new Smart.Utilities.BigNumber(t)._d);let n=this.normalizeOperand(this);if(t=n.normalizeOperand(t),n.isZero()&&n._s&&(n._s=!1),0===t||t.constructor===Smart.Utilities.BigNumber&&1===t._d.length&&0===t._d[0])return new Smart.Utilities.BigNumber(n);if(n._s!=(t=new Smart.Utilities.BigNumber(t))._s)return t._s^=1,n.add(t);var a,i,o=new Smart.Utilities.BigNumber(n),r=o.abs().compare(t.abs())+1,l=r?o:t,s=r?t:o,c=l._f,u=s._f,p=c;for(l=l._d,s=s._d,c!=u&&((u=c-u)>0?o._zeroes(s,u,1):o._zeroes(l,-u,1)),a=(c=l.length)==(u=s.length)?l.length:((u=c-u)>0?o._zeroes(s,u):o._zeroes(l,-u)).length;a;){if(l[--a]<s[a]){for(i=a;i&&!l[--i];l[i]=9);--l[i],l[a]+=10}s[a]=l[a]-s[a]}return r||(o._s^=1),o._f=p,o._d=s,o.round()}multiply(t){if(Smart.Utilities.BigNumber.bigIntSupport)return new Smart.Utilities.BigNumber(this._d*new Smart.Utilities.BigNumber(t)._d);let n=this.normalizeOperand(this);t=n.normalizeOperand(t);var a,i,o,r=new Smart.Utilities.BigNumber(n),l=r._d.length>=(t=new Smart.Utilities.BigNumber(t))._d.length,s=(l?r:t)._d,c=(l?t:r)._d,u=s.length,p=c.length,g=new Smart.Utilities.BigNumber;for(a=p;a;l&&o.unshift(l),g.set(g.add(new Smart.Utilities.BigNumber(o.join("")))))for(o=new Array(p- --a).join("0").split(""),l=0,i=u;i;l+=s[--i]*c[a],o.unshift(l%10),l=l/10>>>0);return r._s=r._s!=t._s,r._f=((l=u+p-r._f-t._f)>=(i=(r._d=g._d).length)?n._zeroes(r._d,l-i+1,1).length:i)-l,r.round()}divide(t){if(Smart.Utilities.BigNumber.bigIntSupport)return new Smart.Utilities.BigNumber(this._d/new Smart.Utilities.BigNumber(t)._d);let n=this.normalizeOperand(this);if(t=n.normalizeOperand(t),"0"==(t=new Smart.Utilities.BigNumber(t)))throw new Error("Division by 0");if("0"==n)return new Smart.Utilities.BigNumber;var a,i,o,r=new Smart.Utilities.BigNumber(n),l=r._d,s=t._d,c=l.length-r._f,u=s.length-t._f,p=new Smart.Utilities.BigNumber,g=0,b=1,v=0,y=0;for(p._s=r._s!=t._s,p.precision=Math.max(r.precision,t.precision),p._f=+p._d.pop(),c!=u&&r._zeroes(c>u?s:l,Math.abs(c-u)),t._f=s.length,(s=t)._s=!1,s=s.round(),t=new Smart.Utilities.BigNumber;"0"==l[0];l.shift());e:do{for(o=v=0,"0"==t&&(t._d=[],t._f=0);g<l.length&&-1==t.compare(s);++g){if(o=g+1==l.length,(!b&&++v>1||(y=o&&"0"==t&&"0"==l[g]))&&(p._f==p._d.length&&++p._f,p._d.push(0)),"0"==l[g]&&"0"==t||(t._d.push(l[g]),++t._f),y)break e;if(o&&-1==t.compare(s)&&(p._f==p._d.length&&++p._f,1)||(o=0))for(;p._d.push(0),t._d.push(0),++t._f,-1==t.compare(s););}if(b=0,-1==t.compare(s)&&!(o=0))for(;o?p._d.push(0):o=1,t._d.push(0),++t._f,-1==t.compare(s););var x;for(i=new Smart.Utilities.BigNumber,a=0;t.compare(x=i.add(s))+1&&++a;i.set(x));t.set(t.subtract(i)),!o&&p._f==p._d.length&&++p._f,p._d.push(a)}while((g<l.length||"0"!=t)&&p._d.length-p._f<=p.precision);return p.round()}mod(t){if(Smart.Utilities.BigNumber.bigIntSupport)return new Smart.Utilities.BigNumber(this._d%new Smart.Utilities.BigNumber(t)._d);let n=this.normalizeOperand(this);t=n.normalizeOperand(t);var a=n.subtract(n.divide(t).intPart().multiply(t));return a.isZero()&&a._s&&(a._s=!a._s),a}pow(t){if(Smart.Utilities.BigNumber.bigIntSupport){let o=BigInt(1);for(let r=BigInt(0);r<new Smart.Utilities.BigNumber(t)._d;r+=BigInt(1))o*=this._d;return new Smart.Utilities.BigNumber(o)}let n=this.normalizeOperand(this);t=n.normalizeOperand(t);var a,i=new Smart.Utilities.BigNumber(n);if(0==(t=new Smart.Utilities.BigNumber(t).intPart()))return i.set(1);for(a=Math.abs(t);--a;i.set(i.multiply(n)));return t<0?i.set(new Smart.Utilities.BigNumber(1).divide(i)):i}set(t){return t=new Smart.Utilities.BigNumber(t),this._d=t._d,this._f=t._f,this._s=t._s,this}compare(t){if(Smart.Utilities.BigNumber.bigIntSupport){const p=new Smart.Utilities.BigNumber(t)._d;return this._d===p?0:this._d>p?1:-1}let n=this.normalizeOperand(this);t=n.normalizeOperand(t);var a,i,o,r=n,l=n._f,s=new Smart.Utilities.BigNumber(t),c=s._f,u=[-1,1];if(r.isZero()&&s.isZero())return 0;if(r._s!=s._s)return r._s?-1:1;if(l!=c)return u[l>c^r._s];for(l=(o=r._d).length,c=(s=s._d).length,a=-1,i=Math.min(l,c);++a<i;)if(o[a]!=s[a])return u[o[a]>s[a]^r._s];return l!=c?u[l>c^r._s]:0}negate(){if(Smart.Utilities.BigNumber.bigIntSupport)return new Smart.Utilities.BigNumber(this._d*BigInt(-1));let t=this.normalizeOperand(this);var n=new Smart.Utilities.BigNumber(t);return n._s^=1,n}abs(){if(Smart.Utilities.BigNumber.bigIntSupport)return new Smart.Utilities.BigNumber(this._d<0?this._d*BigInt(-1):this._d);let t=this.normalizeOperand(this);var n=new Smart.Utilities.BigNumber(t);return n._s=0,n}intPart(){if(Smart.Utilities.BigNumber.bigIntSupport)return new Smart.Utilities.BigNumber(this._d);let t=this.normalizeOperand(this);return new Smart.Utilities.BigNumber((t._s?"-":"")+(t._d.slice(0,t._f).join("")||"0"))}valueOf(t,n){return this.normalizeOperand(this).toString(t,n)}toString(t,n,a){function i(s){var c,u,p=new Smart.Utilities.BigNumber(2),g=[];u=void 0===s?o:s;do{c=u.mod(p),g.push(c.toString()),u=u.subtract(c).divide(p).intPart()}while(1===u.compare(new Smart.Utilities.BigNumber(0)));return g.reverse().join("")}let o,r,l;if(Smart.Utilities.BigNumber.bigIntSupport?(o=this,r=Array.isArray(o._d)?(o._s?"-":"")+(o._d.slice(0,o._f).join("")||"0")+(o._f!=o._d.length?"."+o._d.slice(o._f).join(""):""):this._d.toString()):(o=this.normalizeOperand(this),r=(o._s?"-":"")+(o._d.slice(0,o._f).join("")||"0")+(o._f!=o._d.length?"."+o._d.slice(o._f).join(""):"")),void 0===t||10===t)return r;if(o.compare(0)>-1)switch(t){case 2:l=i(),a&&(l=l.padStart(n,"0"));break;case 8:l=function(s){for(var c="";s.length%3!=0;)s="0"+s;for(var u=s.length/3;u>=1;u--)c=parseInt(s[3*u-3]+""+s[3*u-2]+s[3*u-1],2).toString(8)+""+c;return c}(i());break;case 16:l=function(s){for(var c="";s.length%4!=0;)s="0"+s;for(var u=s.length/4;u>=1;u--)c=parseInt(s[4*u-4]+""+s[4*u-3]+s[4*u-2]+s[4*u-1],2).toString(16)+""+c;return c}(i()).toUpperCase(),a&&(l=l.padStart(n/4,"0"))}else l=function(s,c,u){var p="";for(String.prototype.repeat&&(s="0".repeat(u-s.length)+s);s.length<u;)s="0"+s;for(var g=!0,b="",v=(p=(p=(p=(p=s.replace(/0/g,"a")).replace(/1/g,"b")).replace(/a/g,"1")).replace(/b/g,"0")).length-1;v>=0;v--){var y;"0"===p.charAt(v)?!0===g?(y="1",g=!1):y="0":y=!0===g?"0":"1",b=y+""+b}switch(c){case 2:return b;case 8:var x,D;switch(u){case 8:x=3,D="0";break;case 16:x=6,D="00";break;case 32:x=11,D="0";break;case 64:x=22,D="00"}b=D+b;for(var T="",M=x;M>=1;M--)T=parseInt(b[3*M-3]+""+b[3*M-2]+b[3*M-1],2).toString(8)+""+T;return T;case 16:var B;switch(u){case 8:B=2;break;case 16:B=4;break;case 32:B=8;break;case 64:B=16}for(var O="",N=B;N>=1;N--)O=parseInt(b[4*N-4]+""+b[4*N-3]+b[4*N-2]+b[4*N-1],2).toString(16)+""+O;return O.toUpperCase()}}(i(o.negate()),t,n);return l}_zeroes(t,n,a){var i=["push","unshift"][a||0];for(++n;--n;t[i](0));return t}round(){if("_rounding"in this)return this;var t,n,a,i,o=Smart.Utilities.BigNumber,r=this.roundType,l=this._d;for(this._rounding=!0;this._f>1&&!l[0];--this._f,l.shift());for(a=l[n=this.precision+(t=this._f)];l.length>t&&!l[l.length-1];l.pop());return i=(this._s?"-":"")+(n-t?"0."+this._zeroes([],n-t-1).join(""):"")+1,l.length>n&&(a&&r!=o.DOWN&&(r==o.UP||(r==o.CEIL?!this._s:r==o.FLOOR?this._s:r==o.HALF_UP?a>=5:r==o.HALF_DOWN?a>5:r==o.HALF_EVEN&&a>=5&&1&l[n-1]))&&this.add(i),l.splice(n,l.length-n)),delete this._rounding,this}isZero(){return 1===this._d.length&&0===this._d[0]}normalizeOperand(t){return t instanceof Smart.Utilities.BigNumber&&"bigint"==typeof t._d?new Smart.Utilities.BigNumber(t._d.toString()):t}})})()},3661:()=>{Smart("smart-menu-item",class extends Smart.BaseElement{static get properties(){return{checked:{value:!1,type:"boolean"},label:{value:"",type:"any"},level:{value:null,type:"number?"},separator:{value:!1,type:"boolean"},shortcut:{value:"",type:"string"},value:{value:null,type:"any"}}}get enableShadowDOM(){return!1}template(){return""}ready(){const e=this;if(super.ready(),e.$.addClass("smart-unselectable"),e.setAttribute("role","menuitem"),e.checked&&e.setAttribute("aria-checked",!0),!1===e.isDirty)return;const t=e.closest("smart-menu, smart-tree");t&&t.isRendered&&(cancelAnimationFrame(Smart.Menu.processTimer),Smart.Menu.processTimer=requestAnimationFrame(()=>{t._lazyInitItems()}))}propertyChangedHandler(e,t,n){const a=this;if(super.propertyChangedHandler(e,t,n),"smart-tree-item"===a.tagName.toLowerCase())return;const i=a.menu,o=a.parentItem,r=o||i;if("label"===e)return""===n?void(a.label=t):(a.setAttribute("aria-label",n),void(i&&i._setItemLabel(a,n)));if(!i)return;if("separator"===e)return void i._refreshCheckableItems(r);if("disabled"!==e||!1===n||!a.checked)return;super.propertyChangedHandler(e,t,n),a.checked=!1;const l=r.checkMode;"radioButton"===l?i._validateRadioButtonSelection(o,a.level,[]):"checkbox"!==l&&i._refreshCheckableItems(r)}}),Smart("smart-menu-items-group",class extends Smart.BaseElement{static get properties(){return{checkable:{value:!1,type:"boolean"},checked:{value:!1,type:"boolean"},checkMode:{value:"checkbox",type:"string"},dropDownHeight:{value:null,type:"number?"},expanded:{value:!1,type:"boolean"},label:{value:"",type:"any"},level:{value:null,type:"number?"},separator:{value:!1,type:"boolean"},value:{value:null,type:"any"}}}get enableShadowDOM(){return!1}template(){return""}ready(){const e=this;if(super.ready(),e.$.addClass("smart-unselectable"),e.setAttribute("role","menuitem"),e.setAttribute("aria-haspopup",!0),e.setAttribute("aria-expanded",e.expanded),e.checked&&e.setAttribute("aria-checked",!0),!1===e.isDirty)return;const t=e.closest("smart-menu, smart-tree");t&&t.isRendered&&(cancelAnimationFrame(Smart.Menu.processTimer),Smart.Menu.processTimer=requestAnimationFrame(()=>{t._lazyInitItems()}))}propertyChangedHandler(e,t,n){const a=this;if(super.propertyChangedHandler(e,t,n),"smart-tree-items-group"===a.tagName.toLowerCase())return;const i=a.menu,o=a.parentItem,r=o||i;if("label"===e)return""===n?void(a.label=t):(a.setAttribute("aria-label",n),void(i&&i._setItemLabel(a,n)));if(i&&-1!==["checkable","checkMode","disabled","separator"].indexOf(e))switch(e){case"checkable":n?a.itemContainer.setAttribute("checkable",""):a.itemContainer.removeAttribute("checkable"),i._isContainerOpened(a.container.level,a.container)&&"tree"!==i.mode&&!i._minimized&&i._closeSubContainers(a.level+2),i._updateItemRoles(a);break;case"checkMode":a.itemContainer.setAttribute("check-mode",n),i._changeToRadioButtonMode(n,a.itemContainer,a),i._updateItemRoles(a);break;case"disabled":{if(Smart.ListMenu&&i instanceof Smart.ListMenu){if(i._view)for(;a.contains(i._view);)i._backButtonClickHandler()}else i._isContainerOpened(a.container.level,a.container)&&i._closeSubContainers(a.level+1,a.container);if(!a.checked)return;a.checked=!1;const l=r.checkMode;"radioButton"===l?i._validateRadioButtonSelection(o,a.level,[]):"checkbox"!==l&&i._refreshCheckableItems(r);break}case"separator":i._refreshCheckableItems(r)}}}),Smart("smart-menu",class extends Smart.BaseElement{static get properties(){return{autoCloseDelay:{value:100,type:"number"},autoFocusOnMouseenter:{value:!1,type:"boolean"},checkable:{value:!1,type:"boolean"},checkboxes:{value:!1,type:"boolean"},checkMode:{value:"checkbox",type:"string"},closeAction:{value:"up",allowedValues:["up","down","none"],type:"string"},dataSource:{value:null,type:"array?",reflectToAttribute:!1},displayMember:{value:"label",type:"string"},dropDownAppendTo:{value:null,type:"any?"},dropDownOverlay:{value:!1,type:"boolean"},dropDownPosition:{value:"auto",allowedValues:["top-left","top-right","bottom-left","bottom-right","overlay-left","overlay-right","auto"],type:"string"},enableMouseWheelAction:{value:!1,type:"boolean"},innerHTML:{type:"string",reflectToAttribute:!1},itemsMember:{value:"items",type:"string"},minimizeIconTemplate:{value:null,type:"string?"},minimizeWidth:{value:null,type:"number?"},mode:{value:"horizontal",allowedValues:["horizontal","vertical","dropDown","tree"],type:"string"},opened:{value:!1,type:"boolean"},overflow:{value:"auto",allowedValues:["auto","hidden","scroll"],type:"string"},preventCloseOnCheck:{value:!1,type:"boolean"},selectionMode:{value:"click",allowedValues:["click","mouseenter"],type:"string"},valueMember:{value:"value",type:"string"}}}static get listeners(){return{"container.click":"_selectionHandler",keydown:"_keydownHandler",mouseenter:"_mouseenterHandler",mouseleave:"_mouseleaveHandler","container.mouseout":"_mouseoutMouseoverHandler","container.mouseover":"_mouseoutMouseoverHandler",resize:"_resizeHandler",transitionend:"_transitionendHandler","hamburgerIcon.click":"_hamburgerIconClickHandler","mainContainer.click":"_mainContainerHandler","mainContainer.mouseleave":"_mainContainerHandler","mainContainer.mouseout":"_mainContainerHandler","mainContainer.mouseover":"_mainContainerHandler","document.down":"_documentDownHandler","document.up":"_documentUpHandler"}}static get requires(){return{"Smart.RepeatButton":"smart.button.js"}}static get styleUrls(){return["smart.button.css","smart.menu.css"]}get items(){return this._menuItems}template(){return'<div id="container" role="presentation">\n                    <div id="minimizedHeader" class="smart-header smart-minimized-header smart-hidden" role="presentation">\n                        <div id="hamburgerIcon" class="smart-hamburger-icon smart-hidden" role="button" aria-label="Toggle minimized menu" aria-haspopup="true">\n                            <div id="hamburgerIconLineTop" class="smart-hamburger-icon-line smart-hamburger-icon-line-top" role="presentation"></div>\n                            <div id="hamburgerIconLineCenter" class="smart-hamburger-icon-line smart-hamburger-icon-line-center" role="presentation"></div>\n                            <div id="hamburgerIconLineBottom" class="smart-hamburger-icon-line smart-hamburger-icon-line-bottom" role="presentation"></div>\n                            <div id="customIconContainer" class="smart-hamburger-icon-custom-container smart-hidden" role="presentation"></div>\n                        </div>\n                    </div>\n                    <smart-repeat-button id="scrollButtonNear" class="smart-menu-scroll-button smart-spin-button smart-scroll-button-near smart-hidden" animation="[[animation]]" unfocusable right-to-left="[[rightToLeft]]">\n                        <div id="arrowNear" class="smart-arrow" aria-hidden="true"></div>\n                    </smart-repeat-button>\n                    <div id="mainContainer" class="smart-menu-main-container" role="presentation">\n                        <content></content>\n                    </div>\n                    <smart-repeat-button id="scrollButtonFar" class="smart-menu-scroll-button smart-spin-button smart-scroll-button-far smart-hidden" animation="[[animation]]" unfocusable right-to-left="[[rightToLeft]]">\n                        <div id="arrowFar" class="smart-arrow" aria-hidden="true"></div>\n                    </smart-repeat-button>\n                </div>'}attached(){const e=this;if(super.attached(),!e.isCompleted||!e.isRendered||"tree"===e._element||Smart.ListMenu&&e instanceof Smart.ListMenu)return;const t=e._scrollInfo;if(null!==e.dropDownAppendTo){if(e._minimized)e._dropDownParent.appendChild(e.$.mainContainer);else for(let n=0;n<e._containersInBody.length;n++)e._dropDownParent.appendChild(e._containersInBody[n]);"dropDown"===e.mode&&(e._dropDownParent===e.parentElement?e._dynamicallyReparented?delete e._dynamicallyReparented:e._positionRelativeTo=null:(e._positionRelativeTo=e.parentElement,e._dynamicallyReparented=!0,setTimeout(function(){e._dropDownParent.appendChild(e)},0)))}t&&t.forEach(function(n,a){a.scrollLeft=n.left,a.scrollTop=n.top})}detached(){const e=this;super.detached(),"tree"===e._element||Smart.ListMenu&&e instanceof Smart.ListMenu||(e._close(),null!==e.dropDownAppendTo&&(e._minimized?e._dropDownParent.removeChild(e.$.mainContainer):e._removeContainersInBody()))}ready(){super.ready()}render(){const e=this;e._element="menu",e._edgeMacFF=Smart.Utilities.Core.Browser.Edge||Smart.Utilities.Core.Browser.Firefox&&-1!==navigator.platform.toLowerCase().indexOf("mac"),e._containers=[],e._containersInBody=[],e._openedContainers=[],e._containersFixedHeight=[],e._menuItemsGroupsToExpand=[],e._additionalScrollButtons=[],e._scrollInfo=new Map,e._createElement(),super.render()}addItem(e,t){const n=this;if(!(e instanceof Smart.MenuItem||e instanceof Smart.MenuItemsGroup))if("string"==typeof e){const r=document.createElement("smart-menu-item");r.label=e,e=r}else{if(!e||!e.label)return;{const r=document.createElement("smart-menu-item");r.label=e.label,e=r}}let a,i,o;if(e.isDirty=!1,void 0===t)a=n,i=1,o=t=n.$.mainContainer;else{if((t=n.getItem(t))instanceof Smart.MenuItemsGroup==0)return;a=t,i=t.level+1,o=t.itemContainer}if(n._createItemHTMLStructure(e,i,t,o.childElementCount,0),e instanceof Smart.MenuItemsGroup&&(n._processHTML(e,i+1),n._checkContainersLength()),o.appendChild(e),n._checkOverflowAddRemove(e.level,o),e instanceof Smart.MenuItemsGroup&&("tree"===n.mode||n._minimized)){const r=e.getElementsByClassName("smart-menu-items-group-arrow");for(let l=0;l<r.length;l++)r[l].className="smart-menu-items-group-arrow down smart-arrow-down";n._expandItemsByDefault()}n._refreshCheckableItems(a)}checkItem(e){void 0===(e=this.getItem(e))||e.checked||e.disabled||e.templateApplied||this._toggleItem(e)}clear(){const e=this;e.$.mainContainer.innerHTML="",e._removeContainersInBody(),e._menuItems={},e._containers=[],e._containersInBody=[],e._openedContainers=[],e._containersFixedHeight=[],e._menuItemsGroupsToExpand=[],e._additionalScrollButtons=[]}close(){const e=this;"dropDown"!==e.mode||!1===e.opened&&e.$.hasClass("smart-visibility-hidden")||(e.$.fireEvent("closing",arguments[0]||{trigger:"programmatic"}).defaultPrevented?e.opened=!0:(e.opened=!1,e.$.addClass("smart-visibility-hidden"),e._close(),e.$.fireEvent("close")))}collapseItem(e,t){const n=this,a=n.animation,i=!1===t&&n.hasAnimation;if(void 0===e)return i&&(n.animation="none"),n._close(),void(i&&setTimeout(function(){n.animation=a},0));if(void 0===(e=n.getItem(e))||e instanceof Smart.MenuItem)return;const o=e.level;if(n._openedContainers[o+1]&&n._isContainerOpened(o+1,e.container)){const r=n.mode;i&&(n.animation="none"),n._closeSubContainers(o+1,e.container,void 0,!1!==arguments[2]),1!==o&&"tree"!==r||n._checkOverflow(n.$.mainContainer,"horizontal"===r,[n.$.scrollButtonNear,n.$.scrollButtonFar]),i&&(n.animation=a)}}expandItem(e,t){const n=this;if(void 0===(e=n.getItem(e))||e instanceof Smart.MenuItemsGroup&&n._isContainerOpened(e.level+1,e.container)&&n._isBranchExpanded(e))return;void 0!==Smart.Menu.processTimer&&n._lazyInitItems();const a=[e],i=n.animation,o=!1===t&&n.hasAnimation;let r=e.parentItem;for(o&&(n.animation="none"),n._discardKeyboardHover();r;)a.unshift(r),r=r.parentItem;for(let l=0;l<a.length;l++){const s=a[l];if(l===a.length-1&&s instanceof Smart.MenuItem){s.disabled||s.templateApplied||n._hoverViaKeyboard(s);break}n._isContainerOpened(s.container.level,s.container)||n._menuItemsGroupSelectionHandler(s,{target:s,type:"expand",isTrusted:!0},arguments[2])}o&&(n.animation=i)}getItem(e){const t=this;let n;if(null!=e&&t._menuItems){if("string"==typeof e){if(/^[0-9]*([.]?[0-9]*)*$/gm.test(e)||(n=t.$.mainContainer.querySelector('[id="'+e+'"]'),null===n))return t._menuItems[e]}else{if(!isNaN(e))return t._menuItems[e.toString()];n=e}if((n instanceof Smart.MenuItem||n instanceof Smart.MenuItemsGroup)&&(t.contains(n)||t.$.mainContainer.contains(n)||n.parentElement.parentElement.ownerElement===t))return n}}maximize(){const e=this;if(!e._minimized)return;const t=e.animation;if(e.$.mainContainer.style.marginTop="",e.$.mainContainer.style.marginLeft="",e.enableShadowDOM&&!e.$.mainContainer.id&&(e.$.mainContainer.id=e.$.mainContainer.getAttribute("smart-id")),"none"!==t&&(e.animation="none"),e._positionDetection.removeOverlay(),e._closeSubContainers(2),e.$minimizedHeader.addClass("smart-hidden"),e._minimized=!1,e._minimizedDropDownOpened&&(e.$hamburgerIcon.removeClass("smart-close-button"),e._minimizedDropDownOpened=!1),null!==e.dropDownAppendTo&&e._appendMinimizedContainerToMenu(e.$.mainContainer,e.$.scrollButtonFar),"tree"!==e.mode){e.$mainContainer.addClass("smart-menu-main-container"),e.$mainContainer.removeClass("smart-menu-minimized-items-container");const n=e.$.mainContainer.getElementsByClassName("smart-menu-items-group-arrow");for(let a=0;a<n.length;a++)e._setArrowDirection(n[a],n[a].parentElement.parentElement.level+1);null!==e.dropDownAppendTo&&e._moveDropDownsToExternalContainer(),e._applyContainerFixedHeight()}e.$mainContainer.removeClass("smart-visibility-hidden"),e.$hamburgerIcon.addClass("smart-hidden"),e.removeAttribute("minimized"),e._checkOverflow(e.$.mainContainer,"horizontal"===e.mode,[e.$.scrollButtonNear,e.$.scrollButtonFar]),"none"!==t&&setTimeout(function(){e.animation=t},0),e.$.mainContainer.removeAttribute("drop-down"),e.$.hamburgerIcon.removeAttribute("aria-expanded"),e.$.hamburgerIcon.removeAttribute("aria-owns"),e.$.mainContainer.setAttribute("role","presentation"),e.$.mainContainer.removeAttribute("aria-orientation"),e.setAttribute("role","menu"),e.setAttribute("aria-orientation","horizontal"===e.mode?"horizontal":"vertical")}minimize(){const e=this;if(e._minimized||"dropDown"===e.mode)return;e.$minimizedHeader.removeClass("smart-hidden");const t=null!==e.dropDownAppendTo,n=e.animation,a=e.hasAnimation;if(a&&(e.animation="none"),e._positionDetection.removeOverlay(),e._closeSubContainers(2),a&&t&&(e.animation=n),"tree"!==e.mode&&(t&&e._moveDropDownsToMenu(),e._removeContainerFixedHeight()),e._hideMainContainerScrollButtons(),e.$mainContainer.removeClass("smart-menu-main-container"),e.$mainContainer.addClass("smart-visibility-hidden"),e.enableShadowDOM&&e.$.mainContainer.removeAttribute("id"),e._edgeMacFF&&(e.$.mainContainer.style.left="",e.$.mainContainer.style.top="",e.$mainContainer.addClass("not-in-view")),e.$hamburgerIcon.removeClass("smart-hidden"),t&&e._appendMinimizedContainerToExternalElement(e.$.mainContainer),setTimeout(function(){e.$mainContainer.addClass("smart-menu-minimized-items-container"),a&&!t&&(e.animation=n)},0),e._minimized=!0,e.setAttribute("minimized",""),"tree"!==e.mode)for(let i=0;i<e._containers.length;i++){const o=e._containers[i];o.level>2&&e._setArrowDirection(o.menuItemsGroup.children[0].children[1],o.level)}e.$.mainContainer.setAttribute("drop-down",""),e.setAttribute("role","presentation"),e.removeAttribute("aria-orientation"),e.$.hamburgerIcon.setAttribute("aria-expanded",!1),e.$.hamburgerIcon.setAttribute("aria-owns",e.$.mainContainer.id),e.$.mainContainer.setAttribute("role","menu"),e.$.mainContainer.setAttribute("aria-orientation","vertical")}open(e,t){const n=this;if("dropDown"!==n.mode)return;if(n.$.fireEvent("opening").defaultPrevented)return void(n.opened=!1);let a;if(n.opened=!0,n._positionRelativeTo){const r=n._positionRelativeTo.getBoundingClientRect();e+=r.left,t+=r.top,n._positionedParent?(a=n._positionedParent.getBoundingClientRect(),e-=a.left,t-=a.top):(e+=window.pageXOffset,t+=window.pageYOffset)}let i=e+n.offsetWidth-document.documentElement.clientWidth,o=t+n.offsetHeight-document.documentElement.clientHeight;a?(i+=a.left,o+=a.top):(i-=window.pageXOffset,o-=window.pageYOffset),i>0?e-=i:e=a?Math.max(e,-a.left):Math.max(e,window.pageXOffset),o>0?t-=o:t=a?Math.max(t,-a.top):Math.max(t,window.pageYOffset),n.style.right="",isNaN(e)||(n.rightToLeft&&(n.style.right="initial"),n.style.left=e+"px"),isNaN(t)||(n.style.top=t+"px"),n.$.removeClass("smart-visibility-hidden"),n.$.fireEvent("open"),n.hasAnimation||(n._checkOverflowOnOpen&&(n._checkOverflow(n.$.mainContainer,!1,[n.$.scrollButtonNear,n.$.scrollButtonFar]),delete n._checkOverflowOnOpen),n._noAutoFocus||n.focus())}removeItem(e){const t=this;if(void 0===(e=t.getItem(e)))return;const n=e.parentElement,a=e.parentItem||t;if(e instanceof Smart.MenuItemsGroup){const i=e.container;if(t._isContainerOpened(i.level,i)&&t._closeSubContainers(i.level,i),1===e.level){const o=t._containersInBody.indexOf(i);-1!==o&&(t._containersInBody.splice(o,1),null===t.dropDownAppendTo||"tree"===t.mode||t._minimized||t._dropDownParent.removeChild(i))}}n.removeChild(e),t._refreshContainersArrays(),t._menuItems={},t._refreshItemPaths(t.$.mainContainer,!0),t._checkOverflowAddRemove(e.level,n),t._refreshCheckableItems(a)}uncheckItem(e){void 0===(e=this.getItem(e))||!e.checked||e.disabled||e.templateApplied||this._toggleItem(e)}propertyChangedHandler(e,t,n){super.propertyChangedHandler(e,t,n);const a=this;if("tree"!==a._element)switch(e){case"animation":a.$.mainContainer.setAttribute("animation",n),a._additionalScrollButtons.forEach(function(r){r[0].animation=n,r[1].animation=n}),null!==a._dropDownParent&&a._containers.forEach(function(r){r.setAttribute("animation",n)});break;case"checkable":"tree"===a.mode||a._minimized?a._minimized&&null!==a.dropDownAppendTo&&o("checkable",a.$.mainContainer,n):a._closeSubContainers(2),a._updateItemRoles(a);break;case"checkboxes":if(a._close(),null!==a.dropDownAppendTo){for(let r=0;r<a._containers.length;r++)o("checkboxes",a._containers[r],n);a._minimized&&o("checkboxes",a.$.mainContainer,n)}a._updateItemRoles();break;case"checkMode":a._changeToRadioButtonMode(n,a.$.mainContainer),a._minimized&&null!==a.dropDownAppendTo&&a.$.mainContainer.setAttribute("check-mode",n),a._updateItemRoles(a);break;case"dataSource":{let r=!1;a._minimized&&(a.maximize(),r=!0),a._removeContainersInBody(),a._containersInBody=[],a._menuItems={},a._processDataSource(),a._checkContainersLength(),r?a.minimize():i(),a._expandItemsByDefault(),a._refreshCheckableItems(),a._suppressResizeHandler=!0,setTimeout(()=>delete a._suppressResizeHandler,500);break}case"innerHTML":a.$.mainContainer.innerHTML=n,a._lazyInitItems();break;case"dropDownAppendTo":{const r=a._dropDownParent;if(a._positionDetection.getDropDownParent(),a._dropDownParent===r||"tree"===a.mode&&!a._minimized)return;if(a._close(),a._minimized)return void(null===n?a._appendMinimizedContainerToMenu(a.$.mainContainer,a.$.scrollButtonFar):a._appendMinimizedContainerToExternalElement(a.$.mainContainer));if(null!==a._dropDownParent&&null===r)a._moveDropDownsToExternalContainer();else if(null===a._dropDownParent&&null!==r)a._moveDropDownsToMenu();else if(null!==a._dropDownParent&&null!==r)for(let l=0;l<a._containersInBody.length;l++)a._dropDownParent.appendChild(a._containersInBody[l]);null!==n||a.$mainContainer.hasClass("simple")?a._checkOverflow(a.$.mainContainer,"horizontal"===a.mode,[a.$.scrollButtonNear,a.$.scrollButtonFar]):a._hideMainContainerScrollButtons();for(let l=0;l<a._containersFixedHeight.length;l++)a._containersFixedHeight[l].itemContainer.checkOverflow=!0;"dropDown"===a.mode&&(a.close({trigger:"internal"}),a._reparentMenu(!0,r));break}case"dropDownOverlay":n||a._positionDetection.removeOverlay();break;case"disabled":n&&a._close(),a._setFocusable(),a.$.scrollButtonNear.disabled=n,a.$.scrollButtonFar.disabled=n,n||null===a.dropDownAppendTo&&!a.$mainContainer.hasClass("simple")&&"tree"!==a.mode||a._updateScrollButtonVisibility(a.$.mainContainer,"horizontal"===a.mode,[a.$.scrollButtonNear,a.$.scrollButtonFar]);break;case"dropDownPosition":case"mode":{if("mode"===e){if(delete a._dynamicallyReparented,"tree"===t||a._minimized?(a._closeSubContainersTreeMode(2,void 0,void 0,void 0,!0),a._openedContainers=[]):a._closeSubContainersDefaultMode(2),a._discardKeyboardHover(!0),a._minimized&&a._minimizedDropDownOpened&&(a.$mainContainer.addClass("smart-visibility-hidden"),a.$hamburgerIcon.removeClass("smart-close-button"),a.$.hamburgerIcon.setAttribute("aria-expanded",!1),a._minimizedDropDownOpened=!1),"horizontal"!==n&&"horizontal"!==t||a._changeScrollButtonsArrows(),a._minimized)return void("dropDown"===n&&(a.mode=t));a.setAttribute("aria-orientation","horizontal"===a.mode?"horizontal":"vertical"),!1===a.opened&&("dropDown"===n?a.$.addClass("smart-visibility-hidden"):"dropDown"===t&&a.$.removeClass("smart-visibility-hidden")),"tree"===t?(null!==a.dropDownAppendTo&&a._moveDropDownsToExternalContainer(),a.$mainContainer.addClass("smart-menu-main-container"),a.$mainContainer.removeClass("smart-menu-minimized-items-container"),a._applyContainerFixedHeight()):"tree"===n&&(null!==a.dropDownAppendTo&&a._moveDropDownsToMenu(),a._applyTreeMode()),"auto"===a.overflow&&a._hideMainContainerScrollButtons(),i()}if("tree"===a.mode||a._minimized)return a._minimizedDropDownOpened&&a._close(),void(a._minimized&&null!==a.dropDownAppendTo&&a.$.mainContainer.setAttribute(a.properties[e].attributeName,n));"dropDownPosition"===e&&a._close();const r=a._containers.map(l=>l.menuItemsGroup);for(let l=0;l<r.length;l++){const s=r[l];a._setArrowDirection(s.children[0].children[1],s.level+1)}if(null!==a.dropDownAppendTo)for(let l=0;l<a._containers.length;l++){const s=a._containers[l];s.setAttribute(Smart.Utilities.Core.toDash(e),n),s.level>2&&a._setArrowDirection(s.menuItemsGroup.children[0].children[1],s.level)}break}case"minimizeIconTemplate":a._applyMinimizeIconTemplate(n,t);break;case"minimizeWidth":a._resizeHandler();break;case"opened":n?a.open():a.close({trigger:"internal"});break;case"overflow":a._handleOverflowChange();break;case"rightToLeft":if("tree"!==a.mode){const r=a._containers.map(l=>l.menuItemsGroup);for(let l=0;l<r.length;l++){const s=r[l];a._setArrowDirection(s.children[0].children[1],s.level+1)}if(null!==a.dropDownAppendTo){n?a.$.mainContainer.setAttribute("right-to-left",""):a.$.mainContainer.removeAttribute("right-to-left");for(let l=0;l<a._containers.length;l++){const s=a._containers[l];n?s.setAttribute("right-to-left",""):s.removeAttribute("right-to-left"),s.level>2&&a._setArrowDirection(s.menuItemsGroup.children[0].children[1],s.level)}}}break;case"theme":if(null===a.dropDownAppendTo||Smart.ListMenu&&a instanceof Smart.ListMenu)return;if(a._minimized)""!==t&&a.$mainContainer.removeClass(t),""!==n&&a.$mainContainer.addClass(n);else for(let r=0;r<a._containers.length;r++){const l=a._containers[r];""!==t&&l.classList.remove(t),""!==n&&l.classList.add(n)}break;case"unfocusable":a._setFocusable()}function i(){null===a.dropDownAppendTo&&"tree"!==a.mode||a._checkOverflow(a.$.mainContainer,"horizontal"===a.mode,[a.$.scrollButtonNear,a.$.scrollButtonFar])}function o(r,l,s){s?l.setAttribute(r,""):l.removeAttribute(r)}}_addOpenedContainer(e,t){const n=this;if("tree"===n.mode||n._minimized){n._openedContainers[e]||(n._openedContainers[e]=[]);const a=t.menuItemsGroup;return a.set("expanded",!0),a.setAttribute("aria-expanded",!0),n._updateState&&n._updateState("expanded",a.id,!0),n._openedContainers[e].push(t)}n._openedContainers[e]=t}_appendMinimizedContainerToExternalElement(e){const t=this;e.ownerElement=t,t._dropDownParent.appendChild(e),e.setAttribute("animation",t.animation),""!==t.theme&&e.$.addClass(t.theme),e.$.addClass("smart-menu-drop-down smart-drop-down"),e.$.addClass("smart-drop-down-repositioned"),e.setAttribute("check-mode",t.checkMode),e.setAttribute("drop-down-position",t.dropDownPosition),e.setAttribute("mode",t.mode),e.setAttribute("loading-indicator-position",t.loadingIndicatorPosition),t.rightToLeft&&e.setAttribute("right-to-left",""),t.checkable&&e.setAttribute("checkable",""),t.checkboxes&&e.setAttribute("checkboxes",""),t.$.view&&t.detachedChildren.indexOf(t.$.view)&&t.detachedChildren.push(t.$.view)}_appendMinimizedContainerToMenu(e,t){const n=this;delete e.ownerElement,n.$.container.insertBefore(e,t),e.removeAttribute("animation"),""!==n.theme&&e.$.removeClass(n.theme),e.$.removeClass("smart-menu-drop-down smart-drop-down"),e.$.removeClass("smart-drop-down-repositioned"),e.removeAttribute("checkable"),e.removeAttribute("checkboxes"),e.removeAttribute("check-mode"),e.removeAttribute("drop-down-position"),e.removeAttribute("mode"),e.removeAttribute("loading-indicator-position"),e.removeAttribute("style"),e.removeAttribute("right-to-left")}_applyContainerFixedHeight(){const e=this;for(let t=0;t<e._containers.length;t++){const n=e._containers[t];-1!==e._containersFixedHeight.indexOf(n)?(n.style.height=n.menuItemsGroup.dropDownHeight+"px",n.itemContainer.checkOverflow=!0):n.style.height=""}}_applyGrouping(e,t){const n=this;let a;a=Array.from(e===n.$.mainContainer?e.children:e.container.firstElementChild.children);for(let i=0;i<a.length;i++){const o=a[i];o.originalIndex=i,o instanceof Smart.MenuItemsGroup&&void 0===t&&n._applyGrouping(o)}n._sortItems(e)}_applyMinimizeIconTemplate(e,t){const n=this;if(null===e){if(null===t)return;n.$customIconContainer.addClass("smart-hidden"),n.$.customIconContainer.innerHTML="",n.$hamburgerIconLineTop.removeClass("smart-hidden"),n.$hamburgerIconLineCenter.removeClass("smart-hidden"),n.$hamburgerIconLineBottom.removeClass("smart-hidden")}else{const a=document.getElementById(e);if(null!==a&&"template"===a.tagName.toLowerCase()){const i=document.importNode(a.content,!0);n.$hamburgerIconLineTop.addClass("smart-hidden"),n.$hamburgerIconLineCenter.addClass("smart-hidden"),n.$hamburgerIconLineBottom.addClass("smart-hidden"),n.$.customIconContainer.innerHTML="",n.$.customIconContainer.appendChild(i),n.$customIconContainer.removeClass("smart-hidden")}else n.minimizeIconTemplate=t}}_applyTreeMode(){const e=this,t=e.$.mainContainer.getElementsByClassName("smart-menu-items-group-arrow");if(e.$mainContainer.removeClass("smart-menu-main-container"),e.$mainContainer.addClass("smart-menu-minimized-items-container"),e.isCompleted&&e.isRendered)for(let n=0;n<t.length;n++)t[n].className="smart-menu-items-group-arrow down";e._removeContainerFixedHeight()}_arrowLeftHandler(e,t,n,a){const i=this;1===e?"horizontal"===t&&i._levelOneNavigate("_getLastEnabledChild",n,a):2===e?i._levelOneNavigateFromLowerLevel("_getPreviousEnabledChild",n):i._escapeHandler(n,e,a)}_arrowRightHandler(e,t,n,a){const i=this;1===e?"horizontal"===t?i._levelOneNavigate("_getFirstEnabledChild",n,a):i._levelOneOpenDropDown(n):n instanceof Smart.MenuItemsGroup?i._selectionHandler({target:n,isTrusted:!0}):i._levelOneNavigateFromLowerLevel("_getNextEnabledChild",n)}_browserBoundsDetection(e){const t=this;if("tree"===t.mode&&!t._minimized||(e.style.marginTop="",e.style.marginLeft="","auto"!==t.dropDownPosition))return;const n=1===window.devicePixelRatio?document.documentElement.clientWidth:window.innerWidth,a=1===window.devicePixelRatio?document.documentElement.clientHeight:window.innerHeight,i=e.getBoundingClientRect(),o=n-i.left-e.offsetWidth,r=a-i.top-e.offsetHeight;o<10&&(e.style.marginLeft=Math.min(o-10,-10)+"px"),r<10&&(e.style.marginTop=Math.min(r-10,-10)+"px")}_changeScrollButtonsArrows(){const e=this;"horizontal"===e.mode?(e.$.scrollButtonNear.setAttribute("aria-label","Scroll left"),e.$.scrollButtonFar.setAttribute("aria-label","Scroll right"),e.$arrowNear.removeClass("smart-arrow-up"),e.$arrowFar.removeClass("smart-arrow-down"),e.$arrowNear.addClass("smart-arrow-left"),e.$arrowFar.addClass("smart-arrow-right")):(e.$.scrollButtonNear.setAttribute("aria-label","Scroll up"),e.$.scrollButtonFar.setAttribute("aria-label","Scroll down"),e.$arrowNear.removeClass("smart-arrow-left"),e.$arrowFar.removeClass("smart-arrow-right"),e.$arrowNear.addClass("smart-arrow-up"),e.$arrowFar.addClass("smart-arrow-down"))}_changeToRadioButtonMode(e,t,n){if("radioButton"===e){const a=[];for(let i=0;i<t.childElementCount;i++){const o=t.children[i];!o.checked||o.disabled||o.templateApplied||a.push(o)}this._validateRadioButtonSelection(n,n?n.level+1:1,a)}}_checkContainersLength(e){const t=this;0===t._containers.length?(t.$mainContainer.addClass("simple"),e||t._checkOverflow(t.$.mainContainer,"horizontal"===t.mode,[t.$.scrollButtonNear,t.$.scrollButtonFar])):e||(t.$mainContainer.removeClass("simple"),null===t.dropDownAppendTo&&"tree"!==t.mode&&t.$mainContainer.removeClass("scroll-buttons-shown one-button-shown"))}_checkOverflow(e,t,n){const a=this,i=a.$.mainContainer,o=e===i?a.overflow:"auto";if(a._minimized||"hidden"===o||null===a.dropDownAppendTo&&"tree"!==a.mode&&e===i&&!i.classList.contains("simple"))return;if("dropDown"===a.mode&&!a.opened)return void(a._checkOverflowOnOpen=!0);const r=e.scrollLeft,l=r/(e.scrollWidth-e.offsetWidth),s=e.scrollTop,c=s/(e.scrollHeight-e.offsetHeight);let u,p,g;"auto"===o&&(e.classList.remove("scroll-buttons-shown"),e.classList.remove("one-button-shown"),n[0].$.addClass("smart-hidden"),n[1].$.addClass("smart-hidden")),t?(u=Math.round(e.scrollWidth)>Math.round(e.offsetWidth),p=l>0,g=l<1):(u=Math.round(e.scrollHeight)>Math.round(e.offsetHeight),p=c>0,g=c<1),u?"auto"===o?(e.classList.add("scroll-buttons-shown"),p&&n[0].$.removeClass("smart-hidden"),g&&n[1].$.removeClass("smart-hidden"),!1===(p&&g)&&e.classList.add("one-button-shown"),a.disabled||(n[0].disabled=!1,n[1].disabled=!1),e.scrollLeft=r,e.scrollTop=s):(n[0].$.removeClass("smart-hidden"),n[1].$.removeClass("smart-hidden"),a.disabled?(n[0].disabled=!0,n[1].disabled=!0):(n[0].disabled=!p,n[1].disabled=!g)):"scroll"===o&&(n[0].disabled=!0,n[1].disabled=!0),e===i&&"tree"!==a.mode&&a._close(),a._scrollInfo.set(e,{left:e.scrollLeft,top:e.scrollTop})}_checkOverflowAddRemove(e,t){const n=this;1===e&&null!==n.dropDownAppendTo||"tree"===n.mode?n._checkOverflow(n.$.mainContainer,"horizontal"===n.mode,[n.$.scrollButtonNear,n.$.scrollButtonFar]):e>1&&t.dropDownHeightSet&&(n._isContainerOpened(e,t.container)?n._checkOverflow(t,!1,[t.container.children[0],t.container.children[2]]):t.checkOverflow=!0)}_close(){const e=this;e._positionDetection.removeOverlay(),e._closeSubContainers(2),e._discardKeyboardHover(!0),e._minimized&&e._minimizedDropDownOpened&&(e.$mainContainer.addClass("smart-visibility-hidden"),e._edgeMacFF&&(e.$.mainContainer.style.left="",e.$.mainContainer.style.top="",e.$mainContainer.addClass("not-in-view")),e.$hamburgerIcon.removeClass("smart-close-button"),e.$.hamburgerIcon.setAttribute("aria-expanded",!1),e._minimizedDropDownOpened=!1)}_closeSubContainers(e,t,n,a){const i=this;"tree"===i.mode||i._minimized?i._closeSubContainersTreeMode(e,t,n,a):i._closeSubContainersDefaultMode(e,t,n)}_closeSubContainersDefaultMode(e,t,n){const a=this,i=a._openedContainers;function o(r){const l=i[r].menuItemsGroup;n&&r===e||(l.$.removeClass("focus"),l.removeAttribute("focus"),l.$.removeClass("hover"),l.removeAttribute("hover")),l.$.removeClass("smart-menu-items-group-opened"),l.$.removeClass("smart-menu-items-group-expanded"),l.setAttribute("aria-expanded",!1),i[r].$.addClass("smart-visibility-hidden"),a._edgeMacFF&&2===r&&!a.hasAnimation&&(i[r].style.left="",i[r].style.top="",i[r].$.addClass("not-in-view")),a._minimized&&a._browserBoundsDetection(a.$.mainContainer),a.$.fireEvent("collapse",{item:l,label:l.label,path:l.path,value:l.value,children:l.itemContainer.children}),i[r]=void 0}for(let r=i.length-1;r>=e;r--)void 0!==i[r]&&o(r)}_closeSubContainersTreeMode(e,t,n,a,i){const o=this;if(a){const s=t.menuItemsGroup;if(o.$.fireEvent("collapsing",{item:s,label:s.label,path:s.path,value:s.value,children:t.itemContainer.children}).defaultPrevented)return}if(void 0===t)return void o._collapseAll(!1,i);const r=t.menuItemsGroup;if(r.set("expanded",!1),r.setAttribute("aria-expanded",!1),"menu"===o._element)if(n){const s=o.$.mainContainer.getElementsByClassName("focus")[0];s&&(s.$.removeClass("focus"),s.removeAttribute("focus")),r.$.addClass("focus"),r.setAttribute("focus",""),o._focusedViaKeyboard=r}else r.$.removeClass("focus"),r.removeAttribute("focus");else o._updateState("expanded",r.id,!1);if(r.$.removeClass("smart-"+o._element+"-items-group-opened"),i||!o.hasAnimation?(r.$.removeClass("smart-"+o._element+"-items-group-expanded"),r.setAttribute("aria-expanded",!1),t.$.addClass("smart-visibility-hidden"),o._minimized&&o._browserBoundsDetection(o.$.mainContainer)):o._collapseSection(t),a){const s={item:r,label:r.label,path:r.path,value:r.value,children:r.itemContainer.children};o.toggleCallback?(s.type="collapse",o.toggleCallback(s)):o.$.fireEvent("collapse",s)}if(!o._openedContainers[e])return;const l=o._openedContainers[e].indexOf(t);-1!==l&&o._openedContainers[e].splice(l,1)}_collapseAll(e,t){const n=this;for(let a=n._openedContainers.length-1;a>=2&&void 0!==n._openedContainers[a];a--)for(let i=n._openedContainers[a].length-1;i>=0;i--)n._closeSubContainersTreeMode(a,n._openedContainers[a][i],void 0,e,t);n.hasAnimation||n._checkOverflow(n.$.mainContainer,!1,[n.$.scrollButtonNear,n.$.scrollButtonFar]);for(let a=n._openedContainers.length-1;a>=2;a--){const i=n._openedContainers[a];if(void 0!==i&&0!==i.length)break;n._openedContainers.splice(a,1)}2===n._openedContainers.length&&(n._openedContainers=[])}_collapseSection(e){const t=this,n=e.scrollHeight+"px";t._treeAnimationInProgress=e,e.style.transition="none",requestAnimationFrame(function(){"tree"===t.mode||t._minimized?(e.style.height=n,e.style.transition="",requestAnimationFrame(function(){e.style.height="0px","smart-tree"===t.tagName.toLowerCase()&&e.$.addClass("smart-visibility-hidden"),"0px"===n&&t._transitionendHandlerCollapse(t,e)})):e.style.transition=""}),e.addEventListener("transitionend",t._transitionendHandlerCollapse)}_createElement(){const e=this,t=e.mode;e.setAttribute("role","menu"),e.$.mainContainer.id=e.id+"MainContainer",e.setAttribute("aria-orientation","horizontal"===e.mode?"horizontal":"vertical"),e._positionDetection=new Smart.Utilities.PositionDetection(e),e._positionDetection.getDropDownParent(),e._reparentMenu(),e.disabled&&(e.$.scrollButtonNear.disabled=!0,e.$.scrollButtonFar.disabled=!0),null===e.dataSource&&e.$.mainContainer.firstElementChild instanceof HTMLUListElement&&e._processUList();const n=(e.shadowRoot||e).querySelectorAll("smart-menu-item, smart-menu-items-group"),a=function(){const i=e.animation;e._changeScrollButtonsArrows(),e._setFocusable(),"dropDown"===t&&!1===e.opened&&(e.hasAnimation?(e.animation="none",e.$.addClass("smart-visibility-hidden"),e.animation=i):e.$.addClass("smart-visibility-hidden")),e._menuItems={},e.$.mainContainer.setAttribute("animation",i),null===e.dataSource?e._processHTML(e.$.mainContainer,1):e._processDataSource(),e._checkContainersLength(!0),null===e.dropDownAppendTo&&!e.$mainContainer.hasClass("simple")&&"tree"!==e.mode||"scroll"!==e.overflow||(e.$mainContainer.addClass("scroll-buttons-shown"),e.$scrollButtonNear.removeClass("smart-hidden"),e.$scrollButtonFar.removeClass("smart-hidden"),e._updateScrollButtonVisibility(e.$.mainContainer,"horizontal"===t,[e.$.scrollButtonNear,e.$.scrollButtonFar])),e._applyMinimizeIconTemplate(e.minimizeIconTemplate,null),"tree"===t&&e._applyTreeMode(),null!==e.minimizeWidth&&e.offsetWidth<=e.minimizeWidth?e.minimize():e._checkOverflow(e.$.mainContainer,"horizontal"===t,[e.$.scrollButtonNear,e.$.scrollButtonFar]),e._expandItemsByDefault(),e._refreshCheckableItems(),e.__onCompleted&&(e._onCompleted=e.__onCompleted,e.__onCompleted=null,e._onCompleted())};0===n.length||e.enableShadowDOM||e.isInShadowDOM?a():(e._onCompleted&&(e.__onCompleted=e._onCompleted,e._onCompleted=null),e._ensureItemsReady(n,a))}_ensureItemsReady(e,t){const n=this,a=function(){const i=function(o){for(let r=0;r<e.length;r++)e[r].context="node"===o?e[r]:document};i("node"),t(),i()};if(0===e.length)a();else{n._nodesReadyListeners=0;for(let i=0;i<e.length;i++){const o=e[i],r=function(){const l=n.context;n.context=n,n._nodesReadyListeners--,0===n._nodesReadyListeners&&(a(),delete n._nodesReadyListeners),n.context=l}.bind(n);o.isCompleted||(n._nodesReadyListeners++,o.completeHandlers=[],o._onCompleted=r)}0===n._nodesReadyListeners&&a()}}_createItemHTMLStructure(e,t,n,a){const i=this,o="smart-"+i._element+"-item-label-container",r="smart-"+i._element+"-item-label-element",l=document.createDocumentFragment(),s=e.children;let c,u,p,g;for(let y=0;y<s.length;y++){const x=s[y];if(x.classList&&(x.classList&&x.classList.contains(o)?c=x:x.classList&&x.classList.contains(r)&&(u=x),c&&u))break}if(c){const y=c.querySelector("."+r);if(null!==y){e.insertBefore(y.firstElementChild,e.children[0]);const D="smart-"+i._element+"-item-container",T=e.querySelector(".smart-"+i._element+"-drop-down");if(T){const M=e.querySelector("."+D);for(;M.childNodes.length;)e.appendChild(M.firstChild);T.remove()}}c.remove()}u&&u.remove(),c=document.createElement("div"),u=document.createElement("div");let b=document.createElement("span");e.menu=i,t>1?(e.originalIndex=a,p=n.path+"."+e.originalIndex,e.parentItem=n,g=n):(e.originalIndex=a,p=""+a,g=i),i.checkboxes&&g.checkable&&("checkbox"===g.checkMode?e.setAttribute("role","menuitemcheckbox"):"radioButton"===g.checkMode&&e.setAttribute("role","menuitemradio")),e.path=p,i._menuItems[p]=e,c.className=o,u.className=r,"tree"===i._element&&i._setIndentation(c,t,i.rightToLeft?"paddingRight":"paddingLeft");const v=Array.from(e.childNodes);for(let y=0;y<v.length;y++){const x=v[y];if(x instanceof Smart.MenuItem||x instanceof Smart.MenuItemsGroup)break;b.appendChild(x)}if(""===b.innerHTML.trim()){const y=e.label||e.getAttribute("label");y&&""!==y?i._setLabel(y,b,e,!0):(e.set("label","Item "+a),b.innerHTML="Item "+a)}else e.set("label",b.innerHTML.trim());if(e.setAttribute("aria-label",e.label),e instanceof Smart.MenuItemsGroup&&void 0===e.titleLabel&&(e.titleLabel=e.label),u.appendChild(b),l.appendChild(u),e.set("level",t),e.set("shortcut",e.shortcut||e.getAttribute("shortcut")||""),e.shortcut&&e instanceof Smart.MenuItem){const y=document.createElement("div");y.id=e.id+"Shortcut",y.className="smart-"+i._element+"-item-shortcut",y.innerHTML=e.shortcut,l.appendChild(y),e.setAttribute("aria-describedby",y.id)}c.appendChild(l),e.insertBefore(c,e.children[0]),e.id||(e.id=i.id+"ItemP"+e.path.replace(/\./g,"_")+"L"+e.label.replace(/[^a-zA-Z0-9\-\_]/g,""))}_createMenuItemsGroupContainer(e,t){const n=this,a=e.children,i="smart-"+n._element+"-drop-down",o="smart-"+n._element+"-item-container";let r,l;for(let s=0;s<a.length;s++){const c=a[s];if(c.classList&&(c.classList&&c.classList.contains(i)?r=c:c.classList&&c.classList.contains(o)&&(l=c),r&&l))break}if(r||(r=document.createElement("div")),l||(l=document.createElement("div")),r.innerHTML=l.innerHTML="",r.id=e.id+"Container",r.className="smart-"+n._element+"-drop-down smart-visibility-hidden",n._edgeMacFF&&2===t&&"tree"!==n.mode&&(r.className+=" not-in-view"),r.$||(r.$=Smart.Utilities.Extend(r)),r.level=t,r.setAttribute("level",t),"menu"===n._element?(e.setAttribute("aria-owns",r.id),r.setAttribute("role","menu")):r.setAttribute("role","group"),r.menuItemsGroup=e,l.className=o,l.$||(l.$=Smart.Utilities.Extend(l)),l.container=r,l.menuItemsGroup=e,e.checkable&&l.setAttribute("checkable",""),l.setAttribute("check-mode",e.checkMode),l.setAttribute("role","presentation"),r.itemContainer=l,r.contains(l)||r.appendChild(l),null!==e.dropDownHeight){let s=r.querySelector(".smart-spin-button.smart-scroll-button-near"),c=r.querySelector(".smart-spin-button.smart-scroll-button-far");s||(s=document.createElement("smart-repeat-button")),c||(c=document.createElement("smart-repeat-button")),s.className="smart-menu-scroll-button smart-spin-button smart-scroll-button-near smart-hidden",s.setAttribute("aria-label","Scroll up"),s.innerHTML='<div class="smart-arrow smart-arrow-up" aria-hidden="true"></div>',s.animation=n.animation,s.unfocusable=!0,s.rightToLeft=n.rightToLeft,c.className="smart-menu-scroll-button smart-spin-button smart-scroll-button-far smart-hidden",c.setAttribute("aria-label","Scroll down"),c.innerHTML='<div class="smart-arrow smart-arrow-down" aria-hidden="true"></div>',c.animation=n.animation,c.unfocusable=!0,c.rightToLeft=n.rightToLeft,r.contains(s)||r.insertBefore(s,l),r.contains(c)||r.appendChild(c),r.$.addClass("drop-down-height-set"),l.dropDownHeightSet=!0,l.checkOverflow=!0,r.style.height=e.dropDownHeight+"px",n._containersFixedHeight.push(r),n._additionalScrollButtons.push([s,c])}return r}_discardKeyboardHover(e){const t=this;t._focusedViaKeyboard&&(!e&&t._focusedViaKeyboard instanceof Smart.MenuItemsGroup&&t._isContainerOpened(t._focusedViaKeyboard.level+1,t._focusedViaKeyboard.container)||(t._focusedViaKeyboard.$.removeClass("focus"),t._focusedViaKeyboard.removeAttribute("focus"),t._focusedViaKeyboard.$.removeClass("hover"),t._focusedViaKeyboard.removeAttribute("hover"),t._focusedViaKeyboard=void 0))}_documentDownHandler(e){"down"===this.closeAction&&this._closeOnDocumentInteraction(e.originalEvent)}_documentUpHandler(e){const t=this,n=e.originalEvent.target;if(t.disabled||t.displayLoadingIndicator||!n.closest)return;const a="up"===t.closeAction&&t._closeOnDocumentInteraction(e.originalEvent);if(a)return;let i,o;if(t.isInShadowDOM?(i=t.isInShadowDOM?t.getRootNode().activeElement:t.shadowRoot&&t.shadowRoot.activeElement||document.activeElement,o=t.$.container.contains(e.originalEvent.composedPath()[0])):(i=document.activeElement,o=t.contains(n)),!a&&t!==i&&null===i.closest("[template-applied]")){if(o||n.closest(".smart-list-menu-view")===t.$.view)return void t.focus();const r=n.closest(".smart-drop-down-repositioned");r&&r.ownerElement===t&&t.focus()}}_closeOnDocumentInteraction(e){const t=this,n=e.target;let a,i;if(t.isInShadowDOM?(a=e.composedPath()[0],i=t.$.container.contains(a)):i=t.contains(n),"dropDown"===t.mode&&t.opened){const r=n.closest(".smart-drop-down-repositioned");if(!(i||r&&r.ownerElement===t))return t.close({trigger:"interaction",target:t.isInShadowDOM?a:n}),!0}const o=(a||n).closest(".smart-input-drop-down-menu");return(!o||!t.contains(o.ownerElement))&&(!i&&null===n.closest(".smart-menu-drop-down")||a&&a===t.$.mainContainer||n===t.$.mainContainer?("tree"===t.mode||t._close(),!0):void 0)}_ensureVisible(e){const t=this;if(t._minimized)return;const n=t.mode,a=t.$.mainContainer;let i,o;if("tree"!==n&&e.parentElement!==a){if(null===e.dropDownHeight)return;i=e.parentElement,o=[i.container.children[0],i.container.children[2]]}else i=a,o=[t.$.scrollButtonNear,t.$.scrollButtonFar];if(i===a&&(null===t.dropDownAppendTo&&"tree"!==t.mode&&!a.classList.contains("simple")||!i.$.hasClass("scroll-buttons-shown")&&"hidden"!==t.overflow))return;const r=i.getBoundingClientRect(),l=e.getBoundingClientRect();function s(u,p,g){let b=e.firstElementChild[g]+u-i[g];b<0&&(b=u),i["scroll"+p]=b}function c(u,p){let g=e["offset"+u],b=i[p];"Top"!==u||i===a||o[0].$.hasClass("smart-hidden")||(g-=o[0][p]),s(g,u,p),t._updateScrollButtonVisibility(i,"Left"===u,o),b!==i[p]&&s(g,u,p)}"tree"!==n?(i===a&&"horizontal"===n&&(r.left>l.left||r.right<l.right)?c("Left","offsetWidth"):(r.top>l.top||r.bottom<l.bottom)&&c("Top","offsetHeight"),t._scrollInfo.set(i,{left:i.scrollLeft,top:i.scrollTop})):t._ensureVisibleTreeMode(e,l,i,r,0)}_ensureVisibleTreeMode(e,t,n,a,i){const o=this;if(("menu"===o._element||"scrollButtons"===o.scrollMode)&&!n.$.hasClass("scroll-buttons-shown")&&"hidden"!==o.overflow)return;const r=n.offsetHeight,l=o.$scrollButtonNear.hasClass("smart-hidden");let s;if(a.top>t.top)s=o._getOffsetTop(e);else{let c=e.expanded?e.firstElementChild.offsetHeight+parseInt(window.getComputedStyle(e.children[1]).marginTop,10):e.offsetHeight;if("tree"===o._element&&(c+=parseFloat(getComputedStyle(o).getPropertyValue("--smart-tree-item-vertical-offset"))||0),!(a.bottom<t.top+c))return;s=o._getOffsetTop(e)-r+c+i}"tree"===o._element&&"0"===e.path&&(s-=parseFloat(getComputedStyle(o).getPropertyValue("--smart-tree-item-vertical-offset"))),n.scrollTop=s,"menu"!==o._element&&"scrollButtons"!==o.scrollMode||o._updateScrollButtonVisibility(n,!1,[o.$.scrollButtonNear,o.$.scrollButtonFar]),"auto"===o.overflow&&l&&!o.$scrollButtonNear.hasClass("smart-hidden")&&(n.scrollTop+=r-n.offsetHeight),o._scrollInfo.set(n,{left:n.scrollLeft,top:n.scrollTop})}_escapeHandler(e,t,n){e&&(e.$.removeClass("focus"),e.removeAttribute("focus")),this._closeSubContainers(t,void 0,void 0,!0),this._hoverViaKeyboard(n.menuItemsGroup)}_expandItemsByDefault(e){const t=this;if(0===t._menuItemsGroupsToExpand.length&&!e||"tree"!==t.mode&&!t._minimized)return;const n=t.hasAnimation,a=t.animation;n&&(t.animation="none"),e&&t._collapseAll(!1);for(let i=0;i<t._menuItemsGroupsToExpand.length;i++)t.expandItem(t._menuItemsGroupsToExpand[i].path,void 0,!1);n&&(t.animation=a),t._menuItemsGroupsToExpand=[]}_expandSection(e){const t=this,n=e.style.height,a=e.scrollHeight+"px";e.style.height=a,t._treeAnimationInProgress=e,n!==a&&(parseFloat(n)||parseFloat(a))?e.addEventListener("transitionend",t._transitionendHandlerExpand):t._transitionendHandlerExpand(t,e)}_filterInputKeyupHandler(){const e=this;e._filterTimer&&clearTimeout(e._filterTimer),e._filterTimer=setTimeout(function(){const t=e.context;e.context=e,e._applyFilter(e.$.filterInput.value,e._view),e._checkOverflow(),e.context=t},300)}_findItem(e,t){if(""===t)return e;const n=e[this.filterMember||"label"];if("string"!=typeof n)return null;switch(this.filterMode){case"startsWith":if(0===n.indexOf(t))return e;break;case"startsWithIgnoreCase":if(0===n.toLowerCase().indexOf(t.toLowerCase()))return e;break;case"doesNotContain":if(n.indexOf(t)<0)return e;break;case"doesNotContainIgnoreCase":if(n.toLowerCase().indexOf(t.toLowerCase())<0)return e;break;case"contains":if(n.indexOf(t)>-1)return e;break;case"containsIgnoreCase":if(n.toLowerCase().indexOf(t.toLowerCase())>-1)return e;break;case"equals":if(0===n.localeCompare(t))return e;break;case"equalsIgnoreCase":if(0===n.toLowerCase().localeCompare(t.toLowerCase()))return e;break;case"endsWith":if(n.endsWith(t))return e;break;case"endsWithIgnoreCase":if(n.toLowerCase().endsWith(t.toLowerCase()))return e}return null}_getFirstEnabledChild(e){const t=e.children;for(let n=0;n<t.length;n++)if(this._isChildEnabled(t[n]))return t[n]}_getLastEnabledChild(e){const t=e.children;for(let n=t.length-1;n>=0;n--)if(this._isChildEnabled(t[n]))return t[n]}_getNextEnabledChild(e){if(e)for(;e.nextElementSibling;){const t=e.nextElementSibling;if(this._isChildEnabled(t))return t;e=t}}_getOffsetTop(e){let t=e.offsetTop;for(;e.offsetParent!==this.$.mainContainer;)t+=(e=e.offsetParent).offsetTop;return t}_getPreviousEnabledChild(e){if(e)for(;e.previousElementSibling;){const t=e.previousElementSibling;if(this._isChildEnabled(t))return t;e=t}}_hamburgerIconClickHandler(e,t){e&&e.stopPropagation();const n=this;if(void 0===t&&(t=Smart.ListMenu&&n instanceof Smart.ListMenu?n.$.view:n.$.mainContainer),!n.disabled)if(n._minimizedDropDownOpened)n._close();else{if(n._positionDetection.placeOverlay(),null!==n.dropDownAppendTo){const a=n.dropDownPosition,i=n.getBoundingClientRect(),o=n._positionDetection.getDropDownOffset();-1!==a.indexOf("right")||"auto"===a?n.rightToLeft?(t.style.right="initial",t.style.left=i.left+i.width-t.offsetWidth-o.x+"px"):(t.style.left=i.left+o.x+"px",t.style.right="initial"):-1!==a.indexOf("left")&&(t.style.left=i.right-t.offsetWidth+o.x+"px",t.style.right="initial"),-1!==a.indexOf("bottom")||-1!==a.indexOf("overlay")||"auto"===a?t.style.top=i.bottom+o.y+"px":-1!==a.indexOf("top")&&(t.style.top=i.top+o.y+"px")}else t.style.right="";n._edgeMacFF&&t.$.removeClass("not-in-view"),t.$.removeClass("smart-visibility-hidden"),n.$hamburgerIcon.addClass("smart-close-button"),n.$.hamburgerIcon.setAttribute("aria-expanded",!0),n._minimizedDropDownOpened=!0,n._browserBoundsDetection(t)}}_handleOverflowChange(){const e=this,t=e.$.mainContainer;if((e._minimized||null===e.dropDownAppendTo&&!t.classList.contains("simple")&&"tree"!==e.mode)&&!(Smart.ListMenu&&e instanceof Smart.ListMenu))return;const n=e.overflow;let a;"horizontal"===e.mode?(a=!0,t.scrollLeft=0):(a=!1,t.scrollTop=0),"hidden"===n?(t.classList.remove("scroll-buttons-shown"),e.$scrollButtonNear.addClass("smart-hidden"),e.$scrollButtonFar.addClass("smart-hidden")):(e.$.scrollButtonNear.disabled=e.disabled,e.$.scrollButtonFar.disabled=e.disabled,"auto"===n?(e.$scrollButtonNear.addClass("smart-hidden"),e.$scrollButtonFar.addClass("smart-hidden"),e._checkOverflow(t,a,[e.$.scrollButtonNear,e.$.scrollButtonFar])):(t.classList.add("scroll-buttons-shown"),t.classList.remove("one-button-shown"),e.$scrollButtonNear.removeClass("smart-hidden"),e.$scrollButtonFar.removeClass("smart-hidden"),e._updateScrollButtonVisibility(t,a,[e.$.scrollButtonNear,e.$.scrollButtonFar]))),e._scrollInfo.set(t,{left:t.scrollLeft,top:t.scrollTop})}_hideMainContainerScrollButtons(){const e=this;e.$scrollButtonNear.addClass("smart-hidden"),e.$scrollButtonFar.addClass("smart-hidden"),e.$mainContainer.removeClass("scroll-buttons-shown"),e.$mainContainer.removeClass("one-button-shown")}_hoverViaKeyboard(e){e&&(e.$.addClass("focus"),e.setAttribute("focus",""),this._focusedViaKeyboard=e,this._ensureVisible(e))}_isBranchExpanded(e){if("tree"!==this.mode)return!0;let t=!0;for(;e.parentItem;)t=t&&e.parentItem.expanded,e=e.parentItem;return t}_isChildEnabled(e){return!(e.disabled||e.templateApplied||e.hidden||e instanceof HTMLDivElement||0===e.offsetHeight)}_isContainerOpened(e,t){const n=this;return"tree"===n.mode||n._minimized?(n._openedContainers[e]||(n._openedContainers[e]=[]),-1!==n._openedContainers[e].indexOf(t)):n._openedContainers[e]===t}_keydownHandler(e){const t=this;let n=e.key;if(t.getRootNode().activeElement!==t||-1===["ArrowDown","ArrowLeft","ArrowRight","ArrowUp","End","Enter","Escape","Home"," "].indexOf(n)||t.disabled)return;e.preventDefault();const a=t.mode;if("tree"===a||t._minimized)return void t._keydownHandlerTreeMode(n);const i=t.dropDownPosition,o=-1!==i.indexOf("left"),r="top-left"===i||"top-right"===i,l=t._openedContainers;let s,c=t.$.mainContainer,u=1;for(let p=l.length-1;p>=0;p--)if(void 0!==l[p]){c=l[p],u=c.level,c=c.itemContainer;break}switch(s=c.querySelector('[focus][level="'+u+'"]'),t.rightToLeft&&("ArrowLeft"===n?n="ArrowRight":"ArrowRight"===n&&(n="ArrowLeft")),n){case"ArrowDown":1===u?"horizontal"!==a||r?"horizontal"!==a&&t._levelOneNavigate("_getFirstEnabledChild",s,c):t._levelOneOpenDropDown(s):t._navigate("_getNextEnabledChild",s,c);break;case"ArrowLeft":o?1===u?"horizontal"===a?t._levelOneNavigate("_getLastEnabledChild",s,c):t._levelOneOpenDropDown(s):s instanceof Smart.MenuItemsGroup?t._selectionHandler({target:s,isTrusted:!0}):t._levelOneNavigateFromLowerLevel("_getPreviousEnabledChild",s):t._arrowLeftHandler(u,a,s,c);break;case"ArrowRight":o?1===u?"horizontal"===a&&t._levelOneNavigate("_getFirstEnabledChild",s,c):2===u?t._levelOneNavigateFromLowerLevel("_getNextEnabledChild",s):t._escapeHandler(s,u,c):t._arrowRightHandler(u,a,s,c);break;case"ArrowUp":1===u?"horizontal"===a&&r?t._levelOneOpenDropDown(s):"horizontal"!==a&&t._levelOneNavigate("_getLastEnabledChild",s,c):t._navigate("_getPreviousEnabledChild",s,c);break;case"End":case"Home":{const p="End"===n?t._getLastEnabledChild(c):t._getFirstEnabledChild(c);if(!p||s===p)return;s&&(s.$.removeClass("focus"),s.removeAttribute("focus")),t._hoverViaKeyboard(p);break}case"Enter":s&&t._selectionHandler({target:s,isTrusted:!0});break;case"Escape":u>1?(2===u&&t._positionDetection.removeOverlay(),t._escapeHandler(s,u,c)):"dropDown"===a&&t.opened&&t.close({trigger:"interaction",target:"Escape"});break;case" ":s&&t._toggleItem(s)}}_keydownHandlerTreeMode(e){const t=this,n=Array.from(t.$.mainContainer.querySelectorAll("smart-menu-item, smart-menu-items-group")),a=t.$.mainContainer.getElementsByClassName("focus")[0];function i(c){const u=c.level;return!1===c.disabled&&!0!==c.templateApplied&&(1===u||u>1&&t._isContainerOpened(u,c.parentElement.container)&&c.getBoundingClientRect().height>0)}function o(c){for(let u=c;u<n.length;u++){const p=n[u];if(i(p)){if(a){if(a===p)break;a.$.removeClass("focus"),a.removeAttribute("focus")}t._hoverViaKeyboard(p);break}}}function r(c){for(let u=c;u>=0;u--){const p=n[u];if(i(p)){if(a){if(a===p)break;a.$.removeClass("focus"),a.removeAttribute("focus")}t._hoverViaKeyboard(p);break}}}function l(){a.level>1&&(a.$.removeClass("focus"),a.removeAttribute("focus"),t._hoverViaKeyboard(a.parentItem))}let s;switch(e){case"ArrowDown":s=a?n.indexOf(a)+1:0,o(s);break;case"ArrowLeft":if(!a)return;if(a instanceof Smart.MenuItem)l();else{if(t._isContainerOpened(a.level+1,a.container))return void t._closeSubContainers(a.level+1,a.container,!0,!0);l()}break;case"ArrowRight":if(!a||a instanceof Smart.MenuItem)return;t._isContainerOpened(a.level+1,a.container)?(a.$.removeClass("focus"),a.removeAttribute("focus"),t._hoverViaKeyboard(t._getFirstEnabledChild(a.itemContainer))):t._selectionHandler({target:a,type:"keydown",isTrusted:!0},a);break;case"ArrowUp":s=a?n.indexOf(a)-1:n.length-1,r(s);break;case"End":r(n.length-1);break;case"Enter":t._minimized&&!t._minimizedDropDownOpened?t._hamburgerIconClickHandler(void 0,t.$.mainContainer):a&&t._selectionHandler({target:a,type:"keydown",isTrusted:!0});break;case"Escape":t._minimized&&t._minimizedDropDownOpened&&t._close();break;case"Home":o(0);break;case" ":a&&t._toggleItem(a)}}_lazyInitItems(){const e=this;e._inLazyInit||(e._inLazyInit=!0,e._menuItems={},e._processHTML(e.$.mainContainer,1),e._expandItemsByDefault(),e._refreshCheckableItems(),cancelAnimationFrame(Smart.Menu.processTimer),delete Smart.Menu.processTimer,e._inLazyInit=!1)}_levelOneNavigate(e,t,n){const a=this;if(t)a._navigate("_getLastEnabledChild"===e?"_getPreviousEnabledChild":"_getNextEnabledChild",t,n);else{const i=a[e](n);i&&a._hoverViaKeyboard(i)}}_levelOneNavigateFromLowerLevel(e,t){const n=this,a=n[e](n._openedContainers[2].menuItemsGroup);a&&(t&&(t.$.removeClass("focus"),t.removeAttribute("focus")),n._closeSubContainers(2),a instanceof Smart.MenuItemsGroup?n._selectionHandler({target:a,isTrusted:!0}):n._hoverViaKeyboard(a))}_levelOneOpenDropDown(e){e&&e instanceof Smart.MenuItemsGroup&&this._selectionHandler({target:e,isTrusted:!0})}_mainContainerHandler(e){const t=this;if(t._minimized&&null!==t.dropDownAppendTo)switch(e.type){case"click":t._selectionHandler(e);break;case"mouseleave":t._mouseleaveHandler(e);break;case"mouseout":case"mouseover":t._mouseoutMouseoverHandler(e)}}_menuItemSelectionHandler(e,t){const n=this;function a(){n.enableShadowDOM&&(n.shadowRoot.activeElement||document.activeElement)!==n&&null!==n.dropDownAppendTo&&"click"===t.type&&!n.shadowRoot.contains(e)?n.focus():document.activeElement===n||null===n.dropDownAppendTo||"click"!==t.type||n.contains(e)||n.focus()}if(e.disabled||e.templateApplied)a();else{if(!n._toggleItem(e)){if(n.$.fireEvent("itemClick",{item:e,label:e.label,value:e.value}),t.target&&"A"!==t.target.nodeName){const i=e.querySelector("a");i&&i.click()}if("tree"!==n.mode&&(n._close(),"dropDown"===n.mode))return n._ripple(e,t),void n.close({trigger:"interaction",target:e})}n._ripple(e,t),a()}}_menuItemsGroupSelectionHandler(e,t,n){const a=this,i=a.mode,o=e.container,r=o.level,l="tree"!==i&&!a._minimized;if(a._treeAnimationInProgress===o||(a._discardKeyboardHover(),a.getRootNode().activeElement===a||null===a.dropDownAppendTo||"click"!==t.type||a.contains(t.target)||a.focus(),"click"===t.type&&(!t.target.classList.contains("smart-"+a._element+"-items-group-arrow")&&a._toggleItem(e)||"mouseenter"===a.selectionMode&&"tree"!==i&&!a._minimized)))return;let s=a.hasAnimation;if(a._isContainerOpened(r,o))a._closeSubContainers(r,o,!0,!1!==n),l&&e.hasAttribute("focus")&&(a._focusedViaKeyboard=e);else{if(a.$.fireEvent("expanding",{item:e,label:e.label,path:e.path,value:e.value,children:e.itemContainer.children}).defaultPrevented)return;if(a._positionDetection.placeOverlay(),l&&a._closeSubContainers(r),s&&!l&&("expand"!==t.type&&(a._ensureVisibleOnTransitionend=e),a._expandSection(o)),a._edgeMacFF&&2===r&&l&&o.$.removeClass("not-in-view"),o.$.removeClass("smart-visibility-hidden"),l||"expand"!==t.type){if(l)"keydown"===t.type&&(a._focusedViaKeyboard=e);else{const c=a.$.mainContainer.getElementsByClassName("focus")[0];c&&(c.$.removeClass("focus"),c.removeAttribute("focus")),a._focusedViaKeyboard=e}e.$.addClass("focus"),e.setAttribute("focus","")}if(e.$.addClass("smart-"+a._element+"-items-group-opened"),e.$.addClass("smart-"+a._element+"-items-group-expanded"),e.setAttribute("aria-expanded",!0),a._addOpenedContainer(r,o),l){if(a._ensureVisible(e),e.level>1&&e.parentElement.dropDownHeightSet){const c=a.dropDownPosition,u=e.getBoundingClientRect().top-e.parentElement.container.getBoundingClientRect().top;o.style.top=-1!==c.indexOf("bottom")||"auto"===c?u+"px":-1!==c.indexOf("top")?u+e.offsetHeight+"px":u+e.offsetHeight/2+"px"}o.itemContainer.checkOverflow&&o.itemContainer.dropDownHeightSet&&(a._checkOverflow(o.itemContainer,!1,[o.children[0],o.children[2]]),delete o.itemContainer.checkOverflow)}a._positionExternalContainer(o,e),"tree"===i||a._minimized?s||a._browserBoundsDetection(a.$.mainContainer):a._browserBoundsDetection(o),void 0===t.type&&a._hoverViaKeyboard(a._getFirstEnabledChild(e.itemContainer)),!1!==n&&a.$.fireEvent("expand",{item:e,label:e.label,path:e.path,value:e.value,children:e.itemContainer.children})}l?a._ripple(e,t):"tree"!==i||s||(a._checkOverflow(a.$.mainContainer,!1,[a.$.scrollButtonNear,a.$.scrollButtonFar]),a._minimized||"expand"===t.type||a._ensureVisible(e))}_mouseenterHandler(){const e=this;e.autoFocusOnMouseenter&&e.getRootNode().activeElement!==e&&e.focus()}_mouseleaveHandler(e){const t=this;if("mouseenter"===t.selectionMode&&"tree"!==t.mode&&!t._minimized){if(null!==t.dropDownAppendTo&&e.relatedTarget)if(t.contains(e.target)){const n=e.relatedTarget.closest(".smart-menu-drop-down");if(n&&n.ownerElement===t)return}else if(t.contains(e.relatedTarget))return;t._isElementHovered=!1,t._autoCloseTimeout=setTimeout(function(){const n=t.context;clearTimeout(t._autoCloseTimeout),t._isElementHovered||(t.context=t,t._close(),t.context=n)},t.autoCloseDelay)}}_mouseoutMouseoverHandler(e){const t=this;if(t.disabled||t.displayLoadingIndicator)return;let n=e.target.closest("smart-menu-item")||e.target.closest("smart-menu-items-group");if(t.enableShadowDOM&&(n=e.composedPath()[0].closest("smart-menu-item")||e.composedPath()[0].closest("smart-menu-items-group")||n),"mouseover"===e.type&&(t._isElementHovered=!0),null!==n&&!n.disabled&&!n.templateApplied&&("tree"!==t.mode&&!t._minimized||!n.hasAttribute("focus")||!e.relatedTarget||e.target.parentElement!==e.relatedTarget&&e.relatedTarget.parentElement!==e.target))if(t._discardKeyboardHover(!1),"mouseover"===e.type){"mouseenter"!==t.selectionMode||"tree"===t.mode||t._minimized||(n instanceof Smart.MenuItemsGroup&&!n.hasAttribute("hover")?t._selectionHandler(e,n):n instanceof Smart.MenuItem&&t._closeSubContainers(n.level+1));const a=e.target.closest(".smart-menu-drop-down");(!a||a&&!n.contains(a))&&(n.$.addClass("hover"),n.setAttribute("hover",""),t._discardKeyboardHover(!0))}else{if("tree"!==t.mode&&!t._minimized&&("mouseenter"===t.selectionMode&&e.relatedTarget===t.$.mainContainer&&t._close(),n instanceof Smart.MenuItemsGroup&&n.container&&!n.container.$.hasClass("smart-visibility-hidden")))return;n.$.removeClass("hover"),n.removeAttribute("hover")}}_moveDropDownsToExternalContainer(){const e=this;for(let t=0;t<e._containersInBody.length;t++){const n=e._containersInBody[t];e._dropDownParent.appendChild(n),n.$.listen("click",e._selectionHandler.bind(e)),n.$.listen("mouseleave",e._mouseleaveHandler.bind(e)),n.$.listen("mouseout",e._mouseoutMouseoverHandler.bind(e)),n.$.listen("mouseover",e._mouseoutMouseoverHandler.bind(e))}for(let t=0;t<e._containers.length;t++){const n=e._containers[t];n.ownerElement=e,""!==e.theme&&n.classList.add(e.theme),e.rightToLeft&&n.setAttribute("right-to-left",""),n.classList.add("smart-drop-down-repositioned"),n.setAttribute("mode",e.mode),n.setAttribute("drop-down-position",e.dropDownPosition),e.checkboxes&&n.setAttribute("checkboxes","")}}_moveDropDownsToMenu(){const e=this;for(let t=0;t<e._containersInBody.length;t++){const n=e._containersInBody[t];n.$.unlisten("click"),n.$.unlisten("mouseleave"),n.$.unlisten("mouseout"),n.$.unlisten("mouseover"),n.style.left="",n.style.right="",n.style.top="",n.style.marginLeft="",n.style.marginTop="",n.menuItemsGroup.appendChild(n)}for(let t=0;t<e._containers.length;t++){const n=e._containers[t];""!==e.theme&&n.classList.remove(e.theme),n.classList.remove("smart-drop-down-repositioned"),n.removeAttribute("mode"),n.removeAttribute("drop-down-position"),n.removeAttribute("checkboxes"),n.removeAttribute("right-to-left")}}_navigate(e,t,n){const a=this;if(!t)return void a._hoverViaKeyboard("_getNextEnabledChild"===e?a._getFirstEnabledChild(n):a._getLastEnabledChild(n));const i=a[e](t);i&&(t.$.removeClass("focus"),t.removeAttribute("focus"),a._hoverViaKeyboard(i))}_positionExternalContainer(e,t){const n=this;if(null===n.dropDownAppendTo||2!==e.level)return;const a=n.dropDownPosition,i=n.mode,o=t.getBoundingClientRect(),r=n._positionDetection.getDropDownOffset(),l=o.top+r.y,s=o.bottom+r.y;let c=o.left+r.x,u=o.right+r.x;switch(e.style.top=e.style.left=e.style.right="",n.rightToLeft&&(e.style.right="initial"),-1!==a.indexOf("left")?(c-=e.offsetWidth,"horizontal"!==i&&"overlay-left"!==a||(c+=o.width),e.style.left=c+"px",e.style.right="initial"):e.style.left="horizontal"===i||"overlay-right"===a?c+"px":n.rightToLeft?u-e.offsetWidth+"px":c+o.width+"px",a){case"bottom-right":case"bottom-left":case"auto":e.style.top="horizontal"===i?s+"px":l+"px";break;case"top-right":case"top-left":e.style.top="horizontal"===i?l-e.offsetHeight+"px":s-e.offsetHeight+"px";break;case"overlay-right":case"overlay-left":e.style.top=l+o.height/2+"px"}}_processDataSource(){const e=this,t=e.dataSource,n=e.displayMember,a=e.itemsMember,i=e.valueMember,o=e.$.mainContainer,r=document.createDocumentFragment();function l(s,c){let u;if(Array.isArray(s[a])&&s[a].length>0){u=document.createElement("smart-"+e._element+"-items-group"),!0===s.checkable&&u.set("checkable",!0),"string"==typeof s.checkMode&&u.set("checkMode",s.checkMode),s.dropDownHeight&&u.set("dropDownHeight",s.dropDownHeight),!0===s.expanded&&"tree"===e.mode&&(u.set("expanded",!0),u.setAttribute("aria-expanded",!0));for(let p=0;p<s[a].length;p++)l(s[a][p],u)}else u=document.createElement("smart-"+e._element+"-item"),void 0!==s.shortcut&&u.set("shortcut",s.shortcut),s.customAttribute&&u.setAttribute(s.customAttribute,"");u.isDirty=!1,void 0!==s.id&&/^[A-Za-z]+[\w\-\:\.]*$/.test(s.id)&&(u.id=s.id),!0===s.checked&&(u.set("checked",!0),u.setAttribute("aria-checked",!0)),!0===s.disabled&&u.set("disabled",!0),void 0!==s[n]?u.set("label",s[n]):"string"==typeof s[a]&&u.set("label",s[a]),!0===s.selected&&u.set("selected",!0),!0===s.separator&&u.set("separator",!0),void 0!==s[i]&&u.set("value",s[i]),c.appendChild(u)}o.innerHTML="",o instanceof Smart.ScrollViewer&&o.removeAll();for(let s=0;s<t.length;s++)l(t[s],r);e.$.mainContainer.appendChild(r),e._processHTML(e.$.mainContainer,1)}_processHTML(e,t,n){const a=this;let i,o;t>1&&(i=a._createMenuItemsGroupContainer(e,t),o=i.itemContainer,(e.expanded||e.hasAttribute("expanded"))&&"tree"===a.mode?a._menuItemsGroupsToExpand.push(e):(e.set("expanded",!1),e.removeAttribute("expanded"),e.setAttribute("aria-expanded",!1)));const r=Array.from(e.children),l=[],s=document.createDocumentFragment();let c=0;for(let u=0;u<r.length;u++){if(t>1&&0===u){c++;continue}const p=r[u];p instanceof Smart.MenuItem||p instanceof Smart.MenuItemsGroup?(a._createItemHTMLStructure(p,t,e,u-c),(p.checked||p.hasAttribute("checked"))&&(p.disabled||p.hasAttribute("disabled")||p.templateApplied?(p.set("checked",!1),p.removeAttribute("checked"),p.removeAttribute("aria-checked")):l.push(p)),t>1&&s.appendChild(p),p instanceof Smart.MenuItemsGroup&&a._processHTML(p,t+1)):(p.parentElement.removeChild(p),c++)}if(t>1){if(o.appendChild(s),e.container=i,e.itemContainer=o,e instanceof Smart.MenuItemsGroup){const u=document.createElement("div");u.className="smart-"+a._element+"-items-group-arrow","menu"===a._element?u.setAttribute("role","presentation"):(u.setAttribute("role","button"),u.setAttribute("aria-label","Toggle")),a._setArrowDirection(u,t),e.firstElementChild.appendChild(u)}a._containers.push(i),2===t&&(a._containersInBody.push(i),a._edgeMacFF&&i.addEventListener("transitionend",function(u){u.target===this&&this.$.hasClass("smart-visibility-hidden")&&(this.style.left="",this.style.top="",this.$.addClass("not-in-view"))})),null===a.dropDownAppendTo||"tree"===a.mode||a._minimized?e.appendChild(i):(i.ownerElement=a,a.rightToLeft?i.setAttribute("right-to-left",""):i.removeAttribute("right-to-left"),i.classList.add("smart-drop-down-repositioned"),i.setAttribute("mode",a.mode),i.setAttribute("drop-down-position",a.dropDownPosition),a.checkboxes&&i.setAttribute("checkboxes",""),""!==a.theme&&i.$.addClass(a.theme),i.setAttribute("animation",a.animation),2===t?(a._dropDownParent.appendChild(i),i.$.listen("click",a._selectionHandler.bind(a)),i.$.listen("mouseleave",a._mouseleaveHandler.bind(a)),i.$.listen("mouseout",a._mouseoutMouseoverHandler.bind(a)),i.$.listen("mouseover",a._mouseoutMouseoverHandler.bind(a))):e.appendChild(i))}a._validateRadioButtonSelection(e,t,l),a._sortItems&&!1!==n&&a._sortItems(e)}_processUList(){const e=this,t=new RegExp(/<li>(.(?!<\/li>)|\n)*?<ul>/),n=new RegExp(/<\/ul>(.|\n)*?<\/li>/);let a=e.$.mainContainer.firstElementChild.innerHTML;for(a=a.replace(/\r?\n|\r/g,""),a=a.replace(/<li(.|\n)*?>/g,"<li>"),a=a.replace(/<li><\/li>/g,"<li> </li>"),a=a.replace(/<ul(.|\n)*?>/g,"<ul>");t.test(a);){const i=t.exec(a),o="<smart-"+e._element+"-items-group>"+i[0].slice(4,i[0].length-4);a=a.replace(i[0],o)}for(;n.test(a);){const i=n.exec(a);a=a.replace(i[0],"</smart-"+e._element+"-items-group>")}a=a.replace(/li>/g,"smart-"+e._element+"-item>"),e.$.mainContainer.innerHTML=a}_refreshContainersArrays(){const e=this;for(let t=e._containers.length-1;t>=0;t--){const n=e._containers[t];if(!document.body.contains(n)){e._containers.splice(t,1);const a=e._containersFixedHeight.indexOf(n);a>-1&&(e._containersFixedHeight.splice(a,1),e._additionalScrollButtons.splice(a,1))}}e._checkContainersLength()}_refreshItemPaths(e,t,n,a){const i=this;let o;o=t?e:e.container.itemContainer;const r=n?n(e):o.children;for(let l=0;l<r.length;l++){const s=r[l];let c;a&&(s.originalIndex=l),c=t?""+l:e.path+"."+l,s.path=c,i._menuItems[c]=s,s instanceof Smart.MenuItemsGroup&&i._refreshItemPaths(s,void 0,n,a)}}_removeContainerFixedHeight(){const e=this;for(let t=0;t<e._containersFixedHeight.length;t++){const n=e._containersFixedHeight[t];n.style.height="",n.itemContainer.$.removeClass("scroll-buttons-shown"),n.itemContainer.$.removeClass("one-button-shown"),n.children[0].$.addClass("smart-hidden"),n.children[2].$.addClass("smart-hidden"),n.itemContainer.checkOverflow=!0}}_removeContainersInBody(){const e=this;if(null!==e.dropDownAppendTo&&!e._minimized)for(let t=0;t<e._containersInBody.length;t++)e._containersInBody[t].remove()}_reparentMenu(e,t){const n=this;if("dropDown"===n.mode&&(null!==n._dropDownParent||e)&&n._dropDownParent!==n.parentElement){if(e&&null!==t){if(null===n._dropDownParent)return n._positionRelativeTo.appendChild(n),void(n._positionRelativeTo=null)}else n._positionRelativeTo=n.parentElement;n._dropDownParent.appendChild(n)}}refresh(){const e=this;if(e._suppressResizeHandler)return void delete e._suppressResizeHandler;const t=e.minimizeWidth,n=e.mode;if(null!==t&&"dropDown"!==n){if(e.offsetWidth<=t&&!e._minimized)return void e.minimize();e.offsetWidth>t&&e.maximize()}(null!==e.dropDownAppendTo||"tree"===n||e.$mainContainer.hasClass("simple"))&&e._checkOverflow(e.$.mainContainer,"horizontal"===n,[e.$.scrollButtonNear,e.$.scrollButtonFar])}_resizeHandler(){this.refresh()}_ripple(e,t){if(this.hasRippleAnimation&&"click"===t.type)return Smart.Utilities.Animation.Ripple.animate(e,t.pageX,t.pageY),!0}_scroll(e){if(e.closest("[template-applied]"))return;const t=this,n=t.$.mainContainer,a=t.mode,i=e.classList.contains("smart-scroll-button-near")?-1:1;let o;if(e.parentElement===t.$.container)o=n,"tree"!==a&&t._closeSubContainers(2),"horizontal"===t.mode?(n.scrollLeft=n.scrollLeft+10*i,t._updateScrollButtonVisibility(n,!0,[t.$.scrollButtonNear,t.$.scrollButtonFar])):(n.scrollTop=n.scrollTop+10*i,t._updateScrollButtonVisibility(n,!1,[t.$.scrollButtonNear,t.$.scrollButtonFar]));else{const r=e.parentElement,l=r.itemContainer;o=l,t._closeSubContainers(r.level+1),l.scrollTop=l.scrollTop+10*i,t._updateScrollButtonVisibility(l,!1,[r.children[0],r.children[2]])}t._scrollInfo.set(o,{left:o.scrollLeft,top:o.scrollTop})}_selectionHandler(e,t){const n=this,a=e.target;if(a.closest("[template-applied]")&&e.stopPropagation(),!n.disabled&&!n.displayLoadingIndicator){if(void 0===t){if("click"===e.type){const o=a.closest("smart-repeat-button");if(o)return void n._scroll(o,e)}if(!e.isTrusted)return;const i=a.closest("smart-"+n._element+"-item");if(i)return void n._menuItemSelectionHandler(i,e);if((t=a.closest("smart-"+n._element+"-items-group"))&&(a===t.container||a===t.container.firstElementChild))return}t&&!t.disabled&&n._menuItemsGroupSelectionHandler(t,e)}}_setArrowDirection(e,t){const n=this,a=n.mode;e.className="tree"===a||n._minimized?"smart-"+n._element+"-items-group-arrow down smart-arrow-down":"overlay"!==n.dropDownPosition.slice(0,7)?2===t&&"horizontal"===a?"top"!==n.dropDownPosition.slice(0,3)?"smart-menu-items-group-arrow down smart-arrow-down":"smart-menu-items-group-arrow up smart-arrow-up":"smart-menu-items-group-arrow "+(n.rightToLeft?"left smart-arrow-left":"right smart-arrow-right"):"smart-menu-items-group-arrow minus"}_setFocusable(){const e=this;if(e.disabled||e.unfocusable)return void e.removeAttribute("tabindex");const t=e.getAttribute("tabindex");(null===t||t<0)&&e.setAttribute("tabindex",0)}_setItemLabel(e,t){const n=this,a=n.context,i=e.querySelector(".smart-menu-item-label-element>span");n.context=n,n._setLabel(t,i,e,!0),n._checkOverflow(n.$.mainContainer,"horizontal"===n.mode,[n.$.scrollButtonNear,n.$.scrollButtonFar]),n.context=a}_setLabel(e,t,n,a){const i=document.getElementById(e);if(null!==i&&"template"===i.tagName.toLowerCase()){const o=document.importNode(i.content,!0);if(n instanceof Smart.MenuItem)t.appendChild(o),a&&(n.setAttribute("template-applied",""),n.templateApplied=!0);else if(Smart.ListMenu&&this instanceof Smart.ListMenu){const r=new RegExp(/{{title="(.*)"}}/);for(let l=0;l<o.childNodes.length;l++)r.test(o.childNodes[l].innerHTML)?(n.titleLabel=r.exec(o.childNodes[l].innerHTML)[1],o.childNodes[l].innerHTML=o.childNodes[l].innerHTML.replace(r,"")):r.test(o.childNodes[l].textContent)&&(n.titleLabel=r.exec(o.childNodes[l].textContent)[1],o.childNodes[l].textContent=o.childNodes[l].textContent.replace(r,""));void 0===n.titleLabel&&(n.titleLabel=o.textContent),t.appendChild(o)}else t.innerHTML=e,n.titleLabel=e}else t.innerHTML=e,n instanceof Smart.MenuItemsGroup&&(n.titleLabel=e)}_toggleItem(e){const t=this;if(t.checkboxes){const n=1===e.level?t:e.parentItem;if(n.checkable){const a=t._getItemCheckableInfo(e,n);let i=!1;return"none"!==a.checkMode&&("checkbox"===a.checkMode?(i=!0,e.set("checked",!e.checked),e.checked?e.setAttribute("aria-checked",!0):e.removeAttribute("aria-checked"),t.$.fireEvent("itemCheckChange",{item:e,label:e.label,value:e.value,checked:e.checked})):"radioButton"!==a.checkMode||e.checked||(i=!0,e.set("checked",!0),e.setAttribute("aria-checked",!0),t._uncheckSiblings(e,a.siblings),t.$.fireEvent("itemCheckChange",{item:e,label:e.label,value:e.value,checked:!0})),e instanceof Smart.MenuItem&&i&&t.$.fireEvent("itemClick",{item:e,label:e.label,value:e.value}),"tree"===t.mode||"ListMenu"===t.elementName||t.preventCloseOnCheck||(t._close(),t.close()),!0)}}return!1}_getItemCheckableInfo(e,t){const n=Array.from(e.parentElement.children),a=t.checkMode.replace(/\s/g,"").split(",");let i,o;if(1===a.length)i=a[0],o=n;else{let r=0,l=!1;o=[];for(let s=0;s<n.length;s++){const c=n[s];if(o.push(c),c===e&&(l=!0),c.separator){if(!0===l)break;r++,o=[]}}i=a[r]}return{checkMode:i,siblings:o}}_refreshCheckableItems(e){const t=this,n=!t.checkboxes;(e?[e]:[t].concat(t._containers.map(a=>a.menuItemsGroup))).forEach(a=>{const i=Array.from((a===t?t.$.mainContainer:a.itemContainer).children);let o=a.checkMode.replace(/\s/g,"").split(",");if(n||!a.checkable||1===o.length)return void i.forEach(c=>c.removeAttribute("check-type"));let r=0;o=o.map(c=>-1===["checkbox","radioButton","none"].indexOf(c)?"none":c);let l=[],s=[];for(let c=0;c<i.length;c++){const u=i[c];let p=o[r];if(void 0===p&&(p=o[r]="none"),"none"!==p&&t._isChildEnabled(u)||(u.checked=!1,u.removeAttribute("aria-checked")),"none"===p?u.setAttribute("role","menuitem"):"checkbox"===p?u.setAttribute("role","menuitemcheckbox"):"radioButton"===p&&(u.setAttribute("role","menuitemradio"),l.push(u),u.checked&&s.push(u)),u.setAttribute("check-type",p),u.separator){if(l.length>0)if(s.length>1)for(let g=0;g<s.length-1;g++)s[g].checked=!1;else if(0===s.length)for(let g=0;g<l.length;g++)if(t._isChildEnabled(l[g])){l[g].checked=!0;break}l=[],s=[],r++}}a.checkMode=o.join(", ")})}_transitionendHandler(e){const t=this;"dropDown"===t.mode&&t.opened&&e.target===t&&"opacity"===e.propertyName&&(t._checkOverflowOnOpen&&(t._checkOverflow(t.$.mainContainer,!1,[t.$.scrollButtonNear,t.$.scrollButtonFar]),delete t._checkOverflowOnOpen),t.getRootNode().activeElement===t||t._noAutoFocus||t.focus())}_transitionendHandlerCollapse(){let e,t;if(1===arguments.length){if("visibility"===arguments[0].propertyName)return;t=this,e=t.menuItemsGroup.menu}else e=arguments[0],t=arguments[1];t.menuItemsGroup.$.removeClass("smart-"+e._element+"-items-group-expanded"),t.menuItemsGroup.setAttribute("aria-expanded",!1),t.removeEventListener("transitionend",e._transitionendHandlerCollapse),t.style.height=null,t.$.addClass("smart-visibility-hidden"),e._checkOverflow(e.$.mainContainer,!1,[e.$.scrollButtonNear,e.$.scrollButtonFar]),e._minimized&&e._browserBoundsDetection(e.$.mainContainer),delete e._treeAnimationInProgress}_transitionendHandlerExpand(){let e,t;if(1===arguments.length){if("visibility"===arguments[0].propertyName)return;t=this,e=t.menuItemsGroup.menu}else e=arguments[0],t=arguments[1];t.removeEventListener("transitionend",e._transitionendHandlerExpand),t.style.height=null,e._checkOverflow(e.$.mainContainer,!1,[e.$.scrollButtonNear,e.$.scrollButtonFar]),e._minimized&&e._browserBoundsDetection(e.$.mainContainer),e._ensureVisibleOnTransitionend&&(e._ensureVisible(e._ensureVisibleOnTransitionend),delete e._ensureVisibleOnTransitionend),delete e._treeAnimationInProgress}_uncheckSiblings(e,t){for(let n=0;n<t.length;n++){const a=t[n];a!==e&&a.checked&&(a.set("checked",!1),a.removeAttribute("aria-checked"),this.$.fireEvent("itemCheckChange",{item:a,label:a.label,value:a.value,checked:!1}))}}_unsortItems(e,t){const n=this;let a,i,o=[];e===n.$.mainContainer?(i=e,a=e.children):(i=e.container.firstElementChild,a=i.children);for(let r=0;r<a.length;r++){const l=a[r];o[l.originalIndex]=l,l instanceof Smart.MenuItemsGroup&&void 0===t&&n._unsortItems(l)}if(!(o.length<2))for(let r=0;r<o.length;r++)i.appendChild(o[r])}_updateItemRoles(e){const t=this;for(let n in t._menuItems){const a=t._menuItems[n],i=a.parentItem||t;e&&i!==e||a.setAttribute("role",t.checkboxes&&i.checkable?"checkbox"===i.checkMode?"menuitemcheckbox":"menuitemradio":"menuitem")}t._refreshCheckableItems(e)}_updateScrollButtonVisibility(e,t,n){const a=this,i=a.overflow,o=e===a.$.mainContainer;if(o&&"hidden"===i)return;let r,l,s,c=!0,u=!0;if(t?(r="scrollLeft",l="offsetWidth",s="scrollWidth"):(r="scrollTop",l="offsetHeight",s="scrollHeight"),0===Math.round(e[r])&&(c=!1),Math.round(e[l]+e[r])>=Math.round(e[s])&&(u=!1),o&&"auto"!==i)"scroll"!==i||a.disabled||(n[0].disabled=!c,n[1].disabled=!u);else{if(c&&u)return n[0].$.removeClass("smart-hidden"),n[1].$.removeClass("smart-hidden"),void e.classList.remove("one-button-shown");c?n[0].$.removeClass("smart-hidden"):n[0].$.addClass("smart-hidden"),u?n[1].$.removeClass("smart-hidden"):n[1].$.addClass("smart-hidden"),e.classList.add("one-button-shown")}}_validateRadioButtonSelection(e,t,n){const a=this;if(a.checkboxes){let i,o;if(1===t?(i=a,o=a.$.mainContainer):(i=e,o=e.itemContainer),"radioButton"===i.checkMode&&i.checkable)if(n.length>1)for(let r=n.length-2;r>=0;r--)n[r].set("checked",!1),n[r].removeAttribute("aria-checked");else if(0===n.length){const r=a._getFirstEnabledChild(o);r&&(r.set("checked",!0),r.setAttribute("aria-checked",!0))}}}})},9633:()=>{Smart("smart-multi-combo-input",class extends Smart.CheckInput{static get properties(){return{autoAddNewTags:{value:!0,type:"boolean"},inputTagsMode:{allowedValues:["one","many"],value:"many",type:"string"},hideInputTagsCloseButton:{value:!1,type:"boolean"},messages:{value:{en:{tagLabel:" item(s) selected",selectAll:"Select All",unselectAll:"Unselect All"}},type:"object",extend:!0},selectAll:{value:!1,type:"boolean"}}}template(){return'<div id="inputContainer" role="presentation"><div class="smart-action-button" role="presentation" id="actionButton"> <input class="smart-input" id=\'input\' readonly=\'[[readonly]]\' placeholder=\'[[placeholder]]\' type=\'[[type]]\' name=\'[[name]]\' disabled=\'[[disabled]]\' aria-label="[[placeholder]]" /></div><span class="smart-hidden smart-hint" id="span">[[hint]]</span><div id="dropDownButton" tabindex=-1 class="smart-drop-down-button" role="button" aria-label="Toggle popup"><div id="arrow" class="arrow" aria-hidden="true"></div></div></div>'}_downHandler(e){const t=this;(t._tokenCloseButtonClick=e.originalEvent.target.closest(".smart-drop-down-list-unselect-button"))||t.readonly&&t._dropDownButtonDownHandler(e)}_documentUpHandler(e){const t=this,n=t.shadowRoot||t.isInShadowDOM?e.originalEvent.composedPath()[0]:e.originalEvent.target;if(t._tokenCloseButtonClick&&t._tokenCloseButtonClick===n.closest(".smart-drop-down-list-unselect-button")){const a=n.closest(".smart-token"),[i,o]=[a.getAttribute("data-label"),a.getAttribute("value")],r=t._selectedItems.findIndex(p=>i===p.label&&o===p.value),[l,s]=[t.value,t.$.input.dataValue];let c,u;return r>-1&&t._selectedItems.splice(r,1),t.set("value",u=t._selectedItems.map(p=>p.label).join(t.separator)),t.$.input.dataValue=c=t._selectedItems.map(p=>p.value).join(t.separator),t._updateValue(),t.$.actionButton.contains(a)&&t.$.actionButton.removeChild(a),t.close(),void(u===l&&c===s||t.$.fireEvent("change",{value:c,label:u,oldValue:s,oldLabel:l}))}t.contains(n)||(t.$.dropDownContainer.contains(n.shadowParent||n)?t._isPointerDown&&(t._isPointerDown=!1,t.opened&&(t._preventLookup=!0),t.$.input.focus()):(t.opened&&(t._preventLookup=!0),t._isPointerDown||t.close(),t._isPointerDown=!1))}_performSelect(e,t){const n=this;if(!e)return void n.close();const a=e.target?e.target.closest("li"):e;if(!a)return;n._selectedItems||(n._selectedItems=[]),a.classList.toggle("selected");const i=a.classList.contains("selected"),o={label:a.getAttribute("data-label"),value:a.getAttribute("value")},r=n.$.menu.children;for(let l=0;l<r.length;l++)r[l].classList.remove("active"),r[l].setAttribute("aria-selected",!1);if(i){n._selectedItems.push(o),e.noActiveState||(n._setActiveDescendant(a),a.classList.add("active"));const l=n._selectedItems.findIndex(s=>s.label===o.label&&s.value===o.value);n.set("selectedIndex",l)}else{const l=n._selectedItems.findIndex(s=>s.label===o.label&&s.value===o.value);l>-1?(n._selectedItems.splice(l,1),n.set("selectedIndex",-1)):n.set("selectedIndex",l),a.classList.remove("active")}a.setAttribute("aria-selected",i),n._updateValue(t)}_updateValue(e){const t=this,n=t._selectedItems,a=t.value,i=t.$.input.dataValue;let[o,r]=[[],[]];for(let u=0;u<n.length;u++){const p=n[u];o.push(p.label),r.push(p.value)}if(t._createTags(),t.set("selectedValues",n.map(u=>u.value)),o=o.join(t.separator),t.set("value",o),t.$.input.dataValue=r=r.join(t.separator),t.$.input.value="",t.setAttribute("value",t.value),e||o===a&&r===i||t.$.fireEvent("change",{value:r,label:o,oldValue:i,oldLabel:a}),t.selectAll&&t._setSelectAllItemState(),!t.opened)return;const l=t.getBoundingClientRect(),s=window.scrollX,c=window.scrollY;t.$.dropDownContainer.style.left=-3+l.left+s+"px",t.$.dropDownContainer.style.top=l.bottom+c+1+"px"}_createTags(){const e=this,t=e._selectedItems||[];let n,a=document.createDocumentFragment();for(;"SPAN"===e.$.actionButton.firstElementChild.nodeName;)e.$.actionButton.removeChild(e.$.actionButton.firstElementChild);for(let l=0;l<t.length;l++){const s=t[l];if("one"===e.inputTagsMode&&!n||"many"===e.inputTagsMode){const c="one"===e.inputTagsMode?t.length+e.localize("tagLabel"):s.label;n=document.createElement("span"),n.classList.add("smart-token"),n.innerHTML="<span class='smart-drop-down-list-selection-label' role=\"presentation\">"+c+'</span><span class=\'smart-drop-down-list-unselect-button\' role="button" aria-label="Unselect"></span>',"many"===e.inputTagsMode&&(n.setAttribute("data-label",s.label),n.setAttribute("value",s.value),n.setAttribute("separator",e.separator)),a.appendChild(n)}}e.$.actionButton.insertBefore(a,e.$.input);const i=e.getBoundingClientRect(),o=window.scrollX,r=window.scrollY;e.$.scrollView.style.left=-3+i.left+o+"px",e.$.scrollView.style.top=i.bottom+r+1+"px"}_render(e){const t=this,n=e.map(function(o){let r=o,l=o;"object"==typeof o&&(r=o.label,l=void 0!==o.value?o.value:r);const s=document.createElement("li"),c=document.createElement("a");return c.href="#",s.id=t.id+"Item"+Math.floor(65536*(1+Math.random())).toString(16).substring(1),s.setAttribute("data-label",r),s.setAttribute("value",l),s.setAttribute("role","option"),s.setAttribute("aria-selected",!1),s.setAttribute("aria-label",r),c.innerHTML=t.highlighter?t.highlighter(r):t._highlighter(r),c.setAttribute("aria-hidden",!0),o.icon&&(c.classList.add("icon"),c.classList.add(o.icon)),s.appendChild(c),s});t.$.menu.innerHTML="",t._selectedItems||(t._selectedItems=[]);let a=t._selectedItems.map(o=>o.value);a.length||(a=(t.$.input.dataValue||t.$.input.value).split(t.separator).map(o=>o.trim()));let i=Array.from(t.$.actionButton.getElementsByClassName("smart-token")).map(o=>o.textContent.trim());for(let o=0;o<n.length;o++){const r=n[o],l=r.getAttribute("value"),s=r.getAttribute("data-label"),c=a.indexOf(l);c>-1&&("one"===t.inputTagsMode||i[c]===s)&&(r.classList.add("selected"),r.setAttribute("aria-selected",!0),t._setActiveDescendant(r),t._selectedItems.findIndex(u=>u.label===s&&u.value===l)<0&&t._selectedItems.push({label:r.getAttribute("data-label"),value:r.getAttribute("value")})),t._setSelectAllItemState(),t.$.menu.appendChild(r)}}_next(){const e=this;let t=e._selectedItems?e._selectedItems[e._selectedItems.length-1]:void 0;t&&(t=e.$.menu.querySelector(`.active[data-label="${t.label}"][value="${t.value}"]`));const n=t||e.$.menu.querySelector(".active");if(!n){const o=e.$.menu.firstElementChild;return o.classList.add("active","focused"),void e._setActiveDescendant(o)}const a=e.$.menu.children;for(let o=0;o<a.length;o++)a[o].classList.remove("active","focused");e._setActiveDescendant();let i=n.nextElementSibling;i||(i=e.$.menu.firstElementChild),i.classList.add("active","focused"),e._setActiveDescendant(i),e.ensureVisible()}_prev(){const e=this;let t=e._selectedItems?e._selectedItems[e._selectedItems.length-1]:void 0;t&&(t=e.$.menu.querySelector(`.active[data-label="${t.label}"][value="${t.value}"]`));const n=t||e.$.menu.querySelector(".active");if(!n){const o=e.$.menu.firstElementChild;return o.classList.add("active","focused"),void e._setActiveDescendant(o)}const a=e.$.menu.children;for(let o=0;o<a.length;o++)a[o].classList.remove("active","focused");e._setActiveDescendant();let i=n.previousElementSibling;i||(i=e.$.menu.lastElementChild),i.classList.add("active","focused"),e._setActiveDescendant(i),e.ensureVisible()}_keyDownHandler(e){const t=this;t._suppressKeyPressRepeat=![40,38,9,13,27,16,17,18].includes(e.keyCode),e.shiftKey||e.altKey||e.ctrlKey?delete t._inputValue:(t._move(e),t._inputValue=t.$.input.value)}_keyUpHandler(e){const t=this;let n=t.$.input.value;if(t._selectedItems&&(n=t._selectedItems.map(a=>a.label),t.$.input.value&&n.push(t.$.input.value),n=n.join(t.separator)),t.set("value",n),!e.shiftKey){switch(e.keyCode){case 40:case 38:case 16:case 17:case 18:40===e.keyCode&&e.altKey&&t.open(),38===e.keyCode&&e.altKey&&t.close();break;case 8:{if(t.readonly||(t.opened&&t.close(),t._inputValue&&t._inputValue.length))break;if(!t._selectedItems){t.readonly||(t.$.input.dataValue=t.$.input.value);break}const a=t._selectedItems[t._selectedItems.length-1];if(!a)break;const i=t.$.menu.querySelector(`li[data-label="${a.label}"][value="${a.value}"]`);i?t._performSelect(i):(t._selectedItems.pop(),t._updateValue());break}case 9:case 13:if(!t.opened)return void(t.autoAddNewTags&&13===e.keyCode&&"many"===t.inputTagsMode&&t._autoCreateTags());t._performSelect(t.$.menu.querySelector(".active")),e.stopPropagation(),e.preventDefault();break;case 27:if(!t.opened)return;t.close(),e.stopPropagation(),e.preventDefault();break;default:t._lookup(e),!t.opened||e.ctrlKey||e.shiftKey||(e.stopPropagation(),e.preventDefault())}delete t._inputValue}}_blurHandler(){super._blurHandler(),this._autoCreateTags()}_autoCreateTags(){const e=this;if(!e.autoAddNewTags||"many"===!e.inputTagsMode)return;e.dataSource||(e.dataSource=[]);const t=e.$.input.value.trim();if(!e.dataSource.find(n=>"string"==typeof n?n===t:n.label===t)){e._tempItems||(e._tempItems=[]);let n=t.trim();if(t.indexOf(",")>=0){n=t.split(",");for(let a=0;a<n.length;a++){const i=n[a].trim();""!==i&&(e._tempItems.push(i),e._creteaTagsFromValue(i))}}else""!==n&&(e._tempItems.push(n),e._creteaTagsFromValue(n));e.query="",e._updateValue(!0)}}propertyChangedHandler(e,t,n){const a=this;if("value"===e){a.displayMember!==a.valueMember&&"string"!=typeof n?(a.value=n[a.displayMember],a.$.input.dataValue=n[a.valueMember]):a.$.input.dataValue="";const i=a.$.menu.children;for(let o=0;o<i.length;o++)i[o].classList.remove("selected"),i[o].setAttribute("aria-selected",!1);a._setActiveDescendant(a.$.menu.querySelector("active")),a._creteaTagsFromValue(n)}else if("separator"===e){const i=a.$.actionButton.children;for(let o=0;o<i.length;o++){const r=i[o];r.classList.contains("smart-token")&&r.setAttribute("separator",n)}}else"inputTagsMode"===e?a._createTags():"theme"===e||"rightToLeft"===e?(a.$.scrollView[e]=n,n?a.$.dropDownContainer.setAttribute(Smart.Utilities.Core.toDash(e),""):a.$.dropDownContainer.removeAttribute(Smart.Utilities.Core.toDash(e))):"inverted"===e?n?a.$.dropDownContainer.setAttribute("inverted",""):a.$.dropDownContainer.removeAttribute("inverted"):"selectAll"===e?a._handleSelectAllItem():super.propertyChangedHandler(e,t,n)}_createElement(){const e=this,t=document.createElement("ul"),n=document.createElement("smart-scroll-viewer"),a=document.createElement("div");n.rightToLeft=e.rightToLeft,n.theme=e.theme,n.horizontalScrollBarVisibility="hidden",n.classList.add("smart-multi-combo-input-scroll-viewer"),e.rightToLeft&&a.setAttribute("right-to-left",""),a.setAttribute("theme",e.theme),a.classList.add("smart-multi-combo-input-drop-down-menu","smart-input-drop-down-menu","smart-check-input-drop-down-menu"),e.inverted?a.setAttribute("inverted",""):a.removeAttribute("inverted"),e.classList.add("smart-input"),a.appendChild(n),t.setAttribute("aria-multiselectable",!0),e.$.scrollView=n,e.$.menu=t,e.$.dropDownContainer=a,e.$.menu.onclick=function(o){o.stopPropagation(),o.preventDefault(),e._performSelect(o),e.$.input.focus()},e.classList.add("smart-input"),e.$.input.value="";const i=e.value;i&&e._creteaTagsFromValue(i),e._handleSelectAllItem()}_creteaTagsFromValue(e=""){const t=this;if(e){const n=t.value.split(",");for(t.$.input.value="",t._selectedItems=[];"SPAN"===t.$.actionButton.firstElementChild.nodeName;)t.$.actionButton.removeChild(t.$.actionButton.firstElementChild);for(let a=0,i=n.length;a<i;a+=1){const o=n[a].trim();o&&t._selectedItems.push({label:o,value:o})}t._createTags()}else t.$.input.value="",t._selectedItems=[],t._createTags()}_handleSelectAllItem(){const e=this;if(e.selectAll){if(!e.$.selectAll){const t=document.createElement("ul"),n=document.createElement("li"),a=document.createElement("a");a.href="#",a.innerHTML=e.localize("selectAll"),a.setAttribute("aria-hidden",!0),n.id=e.id+"Item"+Math.floor(65536*(1+Math.random())).toString(16).substring(1),n.setAttribute("role","option"),n.setAttribute("value",e.localize("selectAll")),n.setAttribute("aria-label",e.localize("selectAll")),n.classList.add("smart-select-all"),n.appendChild(a),n.onclick=function(i){i.stopPropagation(),i.preventDefault(),Array.from(e.$.menu.children).find(o=>!o.classList.contains("selected"))?e._selectAll():e._clearSelection(),e._setSelectAllItemState(),n.classList.contains("selected")&&n.classList.add("active"),e.$.input.focus()},t.appendChild(n),e.$.selectAll=t}e._setSelectAllItemState(),e.$.dropDownContainer.insertBefore(e.$.selectAll,e.$.scrollView)}else e.$.selectAll&&e.$.selectAll.remove()}_setSelectAllItemState(){const e=this;if(!e.$.selectAll)return;const t=e.$.selectAll.firstElementChild,n=t.firstElementChild,a=!Array.from(e.$.menu.children).find(i=>!i.classList.contains("selected"));t.removeAttribute("indeterminate"),t.classList.remove("selected","active"),n.innerHTML=e.localize("selectAll"),e._selectedItems&&e._selectedItems.length>0&&(a?(t.classList.add("selected"),n.innerHTML=e.localize("unselectAll")):t.setAttribute("indeterminate",""))}_selectAll(){const e=this,t=e._selectedItems.length,n=e.$.input.dataValue,a=e.value;e._clearSelection(!0);const i=e.$.menu.children;for(let o=0;o<i.length;o++)i[o].classList.contains("selected")||e._performSelect({target:i[o],noActiveState:!0},!0);t!==e._selectedItems.length&&e.$.fireEvent("change",{value:e.$.input.dataValue,label:e.value,oldValue:n,oldLabel:a})}_clearSelection(e){const t=this;if(!t._selectedItems.length)return;const n=t.$.input.dataValue,a=t.value;for(t.$.input.dataValue="",t.value=t.$.input.value,t._selectedItems=[];"SPAN"===t.$.actionButton.firstElementChild.nodeName;)t.$.actionButton.removeChild(t.$.actionButton.firstElementChild);const i=t.$.menu.children;for(let s=0;s<i.length;s++)i[s].classList.remove("selected"),i[s].classList.remove("active"),i[s].setAttribute("aria-selected",!1);t._setActiveDescendant(t.$.menu.querySelector("active")),e||t.$.fireEvent("change",{value:"",label:"",oldValue:n,oldLabel:a});const o=t.getBoundingClientRect(),r=window.scrollX,l=window.scrollY;t.$.dropDownContainer.style.left=-3+o.left+r+"px",t.$.dropDownContainer.style.top=o.bottom+l+1+"px"}_open(){const e=this,t=e.getBoundingClientRect(),n=window.scrollX,a=window.scrollY;let i=0,o=0;if(!this.opened){if(e.timer&&clearTimeout(e.timer),e.$.scrollView.classList.remove("smart-input-drop-down-menu"),e.$.dropDownContainer.id=e.id+"_"+e.tagName.toLowerCase()+"_menu_"+Math.floor(65536*(1+Math.random())).toString(16).substring(1),document.body.appendChild(e.$.dropDownContainer),e.setAttribute("aria-owns",e.$.dropDownContainer.id),e.readonly||e.$.input.setAttribute("aria-controls",e.$.dropDownContainer.id),e.$.scrollView.enableShadowDOM&&!e._importedStyle&&(e.$.scrollView.importStyle(e._getStyleUrl("smart.textbox.css")),e._importedStyle=!0),"static"!==getComputedStyle(document.body).position){const r=document.body.getBoundingClientRect();i=r.left,o=r.top}e.$.dropDownContainer.style.setProperty("--smart-input-drop-down-menu-width",""),e.$.dropDownContainer.style.left=-3+t.left+n-i+"px",e.$.dropDownContainer.style.top=t.bottom+a-o+1+"px",e.$.dropDownContainer.classList.remove("open"),e.$.dropDownContainer.onpointerdown=function(){e._isPointerDown=!0},requestAnimationFrame(function(){const r=e.dropDownWidth;if(e.$.scrollView.refresh&&e.$.scrollView.refresh(),e._refreshMenu(),e.$.dropDownContainer.setAttribute("open",""),e.setAttribute("open",""),e.$.dropDownButton.setAttribute("open",""),e.$.input.setAttribute("open",""),r&&"string"==typeof r&&-1!==r.indexOf("%")){const l=parseFloat(r)/100;e.$.dropDownContainer.style.setProperty("--smart-input-drop-down-menu-width",e.offsetWidth*l+"px")}else if("auto"!==r&&r)e.$.dropDownContainer.style.setProperty("--smart-input-drop-down-menu-width",parseFloat(r)+"px");else if("auto"===r){if(e.$.dropDownContainer.style.setProperty("--smart-input-drop-down-menu-width",""),e.$.scrollView.$.scrollViewerContainer.classList.contains("vscroll")){const l=e.$.scrollView.offsetWidth+parseFloat(getComputedStyle(e.$.scrollView).getPropertyValue("--smart-scroll-bar-size"));e.$.dropDownContainer.style.setProperty("--smart-input-drop-down-menu-width",l+"px")}}else{e.$.menu.style.width="auto";let l=e.$.menu.offsetWidth;const s=e.$.menu.querySelectorAll("li");for(let c=0;c<s.length;c++)e._maxDropDownWidth=Math.max((s[c].firstElementChild||s[c]).offsetWidth,e._maxDropDownWidth);e.$.scrollView.computedVerticalScrollBarVisibility&&(l+=e.$.scrollView.$&&e.$.scrollView.$.verticalScrollBar?e.$.scrollView.$.verticalScrollBar.offsetWidth:30),e.$.dropDownContainer.style.setProperty("--smart-input-drop-down-menu-width",Math.max(l,e.offsetWidth-8)+"px"),e.$.menu.style.width=""}(e.shadowRoot||e.isInShadowDOM)&&e.$.scrollView._scrollView&&Smart.ScrollBar&&requestAnimationFrame(()=>e.$.scrollView._scrollView.vScrollBar.refresh())}),e.$.scrollView.refresh&&e.$.scrollView.refresh(),e._refreshMenu(),this.opened=!0,e.setAttribute("aria-expanded",!0)}}close(){const e=this;return!!e.opened&&(e.timer&&clearTimeout(e.timer),e.timer=setTimeout(function(){e.$.dropDownContainer.parentNode&&!e.opened&&(document.body.removeChild(e.$.dropDownContainer),e.removeAttribute("aria-owns"),e.readonly||e.$.input.removeAttribute("aria-controls"))},1e3),e.$.dropDownContainer.removeAttribute("open"),e.$.dropDownButton.removeAttribute("open"),e.$.input.removeAttribute("open"),e.removeAttribute("open"),e.opened=!1,e.setAttribute("aria-expanded",!1),e.$.input.focus(),!0)}})},9264:()=>{Smart("smart-multi-input",class extends Smart.Input{static get properties(){return{dropDownButtonPosition:{allowedValues:["none","left","right"],defaultReflectToAttribute:!0,value:"right",type:"string"},separator:{value:", ",type:"string"},selectedValues:{value:[],type:"array"}}}_performSelect(e){const t=this;if(!e)return void t.close();const n=e.target?e.target.closest("li"):e;if(!n)return;t._selectedItems||(t._selectedItems=[]),n.classList.toggle("active");const a=n.classList.contains("active"),i={label:n.getAttribute("data-label"),value:n.getAttribute("value")};if(a)t._selectedItems.push(i),n.setAttribute("aria-selected",!0),t._setActiveDescendant(n);else{const u=t._selectedItems.findIndex(p=>p.label===i.label&&p.value===i.value);u>-1&&t._selectedItems.splice(u,1),n.setAttribute("aria-selected",!1)}n.setAttribute("aria-selected",a);const o=t._selectedItems,r=t.value,l=t.$.input.dataValue;let[s,c]=[[],[]];for(let u=0;u<o.length;u++){const p=o[u];s.push(p.label),c.push(p.value)}t.set("selectedValues",o.map(u=>u.value)),s=s.join(t.separator),t.set("value",s),t.$.input.dataValue=c=c.join(t.separator),s===r&&c===l||t.$.fireEvent("change",{value:c,label:s,oldValue:l,oldLabel:r})}close(){const e=this;return!!e.opened&&(e.timer&&clearTimeout(e.timer),e.timer=setTimeout(function(){e.$.scrollView.parentNode&&!e.opened&&(e.$.scrollView.remove(),e.removeAttribute("aria-owns"),e.readonly||e.$.input.removeAttribute("aria-controls"))},1e3),e.$.scrollView.removeAttribute("open"),e.$.dropDownButton.removeAttribute("open"),e.$.input.removeAttribute("open"),e.removeAttribute("open"),e.opened=!1,e.setAttribute("aria-expanded",!1),e.$.input.focus(),!0)}open(){const e=this;let t;if(e.dropDownDataSource?(e.query="",t="function"==typeof e.dataSource?e.dataSource(e.query):e.dataSource):t="function"==typeof e.dropDownDataSource?e.dropDownDataSource(e.query):e.dropDownDataSource,e._tempItems){t=JSON.parse(JSON.stringify(t));for(let n=0;n<e._tempItems.length;n++){const a=e._tempItems[n];-1===t.indexOf(a)&&t.push(a)}}e._process(t),e.ensureVisible(),e.$.input.focus(),setTimeout(function(){e.$.input.focus()},25)}_render(e){const t=this,n=e.map(function(l){let s=l,c=l;"object"==typeof l&&(s=l.label,c=void 0!==l.value?l.value:s);const u=document.createElement("li"),p=document.createElement("a");return p.href="#",u.id=t.id+"Item"+Math.floor(65536*(1+Math.random())).toString(16).substring(1),u.setAttribute("data-label",s),u.setAttribute("value",c),u.setAttribute("role","option"),u.setAttribute("aria-selected",!1),u.setAttribute("aria-label",s),p.innerHTML=t.highlighter?t.highlighter(s):t._highlighter(s),p.setAttribute("aria-hidden",!0),l.icon&&(p.classList.add("icon"),p.classList.add(l.icon)),u.appendChild(p),u});t.$.menu.innerHTML="";let a=[],i=[],o=t._selectedItems;o||(o=t._selectedItems=[]);const r=o.length;o.length&&o.forEach(l=>{i.push(l.label),a.push(l.value)}),a=a.concat((t.$.input.dataValue||t.$.input.value).split(",").map(l=>l.trim())),i=i.concat(t.$.input.value.split(",").map(l=>l.trim()));for(let l=0;l<n.length;l++){const s=n[l],c=s.getAttribute("value"),u=s.getAttribute("data-label"),p=r?a.indexOf(c):i.indexOf(u);p>-1&&i[p]===u&&(s.classList.add("active"),s.setAttribute("aria-selected",!0),t._setActiveDescendant(s),o.findIndex(g=>g.label===u&&g.value===c)<0&&o.push({label:s.getAttribute("data-label"),value:s.getAttribute("value")})),t.$.menu.appendChild(s)}t.set("selectedValues",o.map(l=>l.value))}_next(){const e=this;let t=e._selectedItems?e._selectedItems[e._selectedItems.length-1]:void 0;t&&(t=e.$.menu.querySelector(`.active[data-label="${t.label}"][value="${t.value}"]`));const n=t||e.$.menu.querySelector(".active");if(!n)return void e._performSelect(e.$.menu.firstElementChild);e._selectedItems&&(e._selectedItems=[]);const a=e.$.menu.children;for(let o=0;o<a.length;o++)a[o].classList.remove("active"),a[o].setAttribute("aria-selected",!1);e._setActiveDescendant();let i=n.nextElementSibling;i||(i=e.$.menu.firstElementChild),e._performSelect(i),e.ensureVisible()}_prev(){const e=this;let t=e._selectedItems?e._selectedItems[e._selectedItems.length-1]:void 0;t&&(t=e.$.menu.querySelector(`.active[data-label="${t.label}"][value="${t.value}"]`));const n=t||e.$.menu.querySelector(".active");if(!n)return void e._performSelect(e.$.menu.firstElementChild);e._selectedItems&&(e._selectedItems=[]);const a=e.$.menu.children;for(let o=0;o<a.length;o++)a[o].classList.remove("active"),a[o].setAttribute("aria-selected",!1);e._setActiveDescendant();let i=n.previousElementSibling;i||(i=e.$.menu.lastElementChild),e._performSelect(i),e.ensureVisible()}_keyUpHandler(e){const t=this;if(!e.shiftKey)switch(e.keyCode){case 40:case 38:case 16:case 17:case 18:40===e.keyCode&&e.altKey&&t.open(),38===e.keyCode&&e.altKey&&t.close();break;case 9:case 13:if(!t.opened)return;t._performSelect(),e.stopPropagation(),e.preventDefault();break;case 27:if(!t.opened)return;t.close(),e.stopPropagation(),e.preventDefault();break;default:t._lookup(e),!t.opened||e.ctrlKey||e.shiftKey||(e.stopPropagation(),e.preventDefault()),t.readonly||(t.$.input.dataValue=t.$.input.value)}}propertyChangedHandler(e,t,n){const a=this;if("value"===e){a.displayMember!==a.valueMember&&"string"!=typeof n?(a.value=n[a.displayMember],a.$.input.dataValue=n[a.valueMember]):a.$.input.dataValue=a.$.input.value=n,a._selectedItems=[],a.set("selectedValues",[]);const i=a.$.menu.children;for(let o=0;o<i.length;o++)i[o].classList.remove("active"),i[o].setAttribute("aria-selected",!1);a._setActiveDescendant()}else"separator"===e?(a.set("value",a.value.replace(new RegExp(t,"g"),n)),a.$.input.dataValue&&(a.$.input.dataValue=a.$.input.dataValue.replace(new RegExp(t,"g"),n))):super.propertyChangedHandler(e,t,n)}_createElement(){const e=this,t=document.createElement("ul"),n=document.createElement("smart-scroll-viewer");n.rightToLeft=e.rightToLeft,n.theme=e.theme,n.horizontalScrollBarVisibility="hidden",n.classList.add("smart-multi-input-drop-down-menu"),e.inverted?n.setAttribute("inverted",""):n.removeAttribute("inverted"),e.classList.add("smart-input"),t.setAttribute("aria-multiselectable",!0),e.$.scrollView=n,e.$.menu=t,e.$.menu.onclick=function(a){a.stopPropagation(),a.preventDefault(),e._performSelect(a),e.$.input.focus()}}_setActiveDescendant(e){const t=this;t.readonly||(e?t.setAttribute("aria-activedescendant",e.id):t.removeAttribute("aria-activedescendant"))}})},2066:()=>{Smart("smart-number-input",class extends Smart.Input{template(){return'<div id="inputContainer" role="presentation"><input class="smart-input" id=\'input\' readonly=\'[[readonly]]\' placeholder=\'[[placeholder]]\' type=\'[[type]]\' name=\'[[name]]\' disabled=\'[[disabled]]\' aria-label="[[placeholder]]" /><span class="smart-hidden smart-hint" id="span">[[hint]]</span><div id="dropDownButton" tabindex=-1 class="nav smart-drop-down-button" role="button" aria-label="Toggle popup"></div></div>'}static get properties(){return{numberFormat:{value:{},type:"any"},min:{value:-9999999999,type:"number"},max:{value:9999999999,type:"number"},step:{value:1,type:"number"},value:{value:0,type:"any"}}}getFormattedValue(e,t){return null===t?parseFloat(e):null===e?"":("{}"===JSON.stringify(t)&&(t={style:"decimal"}),Smart.Utilities.Core.Browser.Safari&&"unit"===t.style&&(t.style="decimal"),new Intl.NumberFormat(this.locale,t).format(""+e))}setValue(e){this.value=e}getValue(){return this.value}render(){const e=this;super.render(),e.context=e,e.classList.add("smart-input");const t=e.$.input,n=document.createElement("div"),a=document.createElement("div");t.value=null!==e.value?e.getFormattedValue(Math.min(Math.max(e.min,e.value),e.max),e.numberFormat):"",n.tabIndex=a.tabIndex=-1,t.classList.add("smart-input"),n.classList.add("up"),a.classList.add("down");const i=function(l){if("keydown"===l.type){let s=t.value.toString(),c=1.1;c=c.toLocaleString(e.locale).substring(1,2);const u=s.indexOf(c);if(l.keyCode>=65&&l.keyCode<=90)return l.ctrlKey?void 0:(l.stopPropagation(),void l.preventDefault());if(" "===l.key)return l.stopPropagation(),void l.preventDefault();if("-"===l.key){const b=o();return r(-b),l.stopPropagation(),void l.preventDefault()}switch(l.key){case"'":case'"':case"/":case"\\":case"`":case"=":case"(":case")":return l.stopPropagation(),void l.preventDefault()}if(","===l.key&&","!==c||"."===l.key&&"."!==c)return l.stopPropagation(),void l.preventDefault();const p=[...s];let g=p[t.selectionStart];if((g===c||void 0===g||-1===u)&&l.keyCode>=48&&l.keyCode<=57&&"0"===p[t.selectionStart-1]){const b=e.getFormattedValue(o(),e.numberFormat),v=t.selectionStart-1;(u>=0||-1===u&&0===o())&&t.value.length===b.length&&(t.value=b.substring(0,t.selectionStart-1)+b.substring(t.selectionStart),t.selectionStart=t.selectionEnd=v)}if(l.key===c){if(-1===e.getFormattedValue(o(),e.numberFormat).indexOf(c))return l.stopPropagation(),void l.preventDefault();if(u>=0)return l.stopPropagation(),l.preventDefault(),void(t.selectionStart=t.selectionEnd=u+1)}else if(l.keyCode>=48&&l.keyCode<=57&&t.selectionStart<u&&t.selectionEnd-t.selectionStart<=1){if(isNaN(parseInt(g)))for(let b=t.selectionStart;b<p.length;b++){let v=parseInt(p[b]);if(!isNaN(v)){t.selectionStart=t.selectionEnd=b;break}}}else{if(u>=0&&t.selectionStart>u&&l.keyCode>=48&&l.keyCode<=57){const b=t.selectionStart,v=e.getFormattedValue(o(),e.numberFormat);let y=0;if(v&&-1!==v.indexOf(c))for(let D=v.indexOf(c);D<v.length;D++)!isNaN(parseInt(v.substring(D,D+1)))&&y++;let x=t.value.toString();return x=x.substring(0,t.selectionStart)+l.key.toString()+x.substring(t.selectionStart+1),x.substring(u+1,u+1+y).length<=y&&t.selectionStart<=u+y&&(t.value=x,t.selectionStart=t.selectionEnd=b+1),l.stopPropagation(),void l.preventDefault()}if("Backspace"===l.key||"Delete"===l.key){const b=t.selectionStart,v=u>=0&&t.selectionStart>u,y=e.getFormattedValue(o(),e.numberFormat);let x=0;if(y&&-1!==y.indexOf(c))for(let M=y.indexOf(c);M<y.length;M++)!isNaN(parseInt(y.substring(M,M+1)))&&x++;let D=t.value.toString(),T=!1;if("Delete"===l.key&&t.selectionStart<=u+x){D=D.substring(0,t.selectionStart)+"0"+D.substring(t.selectionStart+1);const M=D.substring(u+1,u+1+x);-1===D.indexOf(c)&&u>=0?(t.selectionStart=t.selectionEnd=b+1,T=!0):v&&M.length<=x&&(t.value=D,t.selectionStart=t.selectionEnd=b+1,T=!0)}else if("Backspace"===l.key){D=D.substring(0,t.selectionStart-1)+"0"+D.substring(t.selectionStart);const M=D.substring(u+1,u+1+x);-1===D.indexOf(c)&&u>=0?(t.selectionStart=t.selectionEnd=b-1,T=!0):v&&M.length<=x&&(t.value=D,t.selectionStart=t.selectionEnd=b-1,T=!0)}return void(T&&(l.stopPropagation(),l.preventDefault()))}}}};e.$.dropDownButton.appendChild(n),e.$.dropDownButton.appendChild(a),e.dropDownButtonPosition="right";const o=function(){let l=t.value;if(""===l)return null;let s=1.1;s=s.toLocaleString(e.locale).substring(1,2);let c=!1;l.indexOf("(")>=0&&(c=!0,l=l.replace("(","").replace(")",""));let u=[...l],p="";for(let b=0;b<u.length;b++){const v=u[b];switch(v===s&&(p+=v),v){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"-":p+=v}}p=p.replace(s,"."),l=p;let g=parseFloat(l);return e.numberFormat&&e.numberFormat.style&&"percent"===e.numberFormat.style&&(g/=100),c&&(g=-g),isNaN(g)||g===1/0||g===-1/0?0:(g=Math.min(Math.max(e.min,g),e.max),e._number=g,g)};e.getValue=o;const r=function(l){const s=parseFloat(l);if("-"===l){const c=o();return r(-c),void(e._preventFocus||(t.selectionStart=t.selectionEnd=1,t.selectionEnd=t.value.length))}if(!isNaN(s)){if(e.numberFormat){let c=parseFloat(l);const u=e.getFormattedValue(c,e.numberFormat),p=isNaN(parseFloat(u.substring(0,1)))?1:0,g=l>0?0:1;t.value=u,e._preventFocus||(t.selectionStart=t.selectionEnd=1+p+g),e._number=c}else t.value=s,e._number=s;"number"==typeof l&&(e._preventFocus||(t.selectionStart=0,t.selectionEnd=t.value.length)),e.set("value",""+e._number,!1)}};e.setValue=r,this._attach=function(){t.addEventListener("keydown",i),n.onkeydown=i,a.onkeydown=i;const l=u=>e.numberFormat?e.getFormattedValue(u,e.numberFormat):u,s=function(u){u.interval&&clearInterval(u.interval),u.timer&&clearTimeout(u.timer),u.interval=u.timer=null,u.removeAttribute("active")},c=u=>{u.onmouseleave=u.onmouseup=()=>{s(u)},u.onpointerdown=()=>{e._captured=!0,u.timer=setTimeout(()=>{u.interval=setInterval(()=>{u.click(),u.setAttribute("active","")},50)},100)}};n.onclick=function(){const u=o();e._captured||s(n),isNaN(u)||(u<e.max||""===e.max)&&(t.value=l(Math.min(e.max,u+e.step)))},a.onclick=function(){const u=o();e._captured||s(a),isNaN(u)||(u>e.min||""===e.min)&&(t.value=l(Math.max(e.min,u-e.step)))},c(n),c(a)},e._detach=function(){t.removeEventListener("keydown",i),n.onclick=a.onclick=null,n.onkeydown=a.onkeydown=null},e.setValue(e.getValue(),e.numberFormat),e.context=document}_blurHandler(){const e=this;super._blurHandler(),e._preventFocus=!0,e.setValue(e.getValue(),e.numberFormat),e._preventFocus=!1}attached(){this._attach()}detached(){this._detach()}_documentUpHandler(e){this._captured=!1,super._documentUpHandler(e)}propertyChangedHandler(e,t,n){const a=this;super.propertyChangedHandler(e,t,n),"locale"===e&&a.setValue(a._number||a.getValue(),a.numberFormat),"value"!==e&&"numberFormat"!==e&&"max"!==e&&"min"!==e||a.setValue(a.getValue(),a.numberFormat)}})},2754:()=>{Smart.Utilities.Assign("NumericProcessor",class{constructor(e,t){switch(e[t]){case"integer":return new Smart.Utilities.IntegerNumericProcessor(e,t);case"floatingPoint":return new Smart.Utilities.DecimalNumericProcessor(e,t);case"complex":return new Smart.Utilities.ComplexNumericProcessor(e,t)}}}),Smart.Utilities.Assign("BaseNumericProcessor",class{constructor(e,t){const n=this;n.context=e,n._longestLabelSize=0,n.numericFormatProperty=t,n.regexScientificNotation=new RegExp(/^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)(Y|Z|E|P|T|G|M|k|m|u|n|p|f|a|z|y){1}$/),n.regexNoLeadingZero=new RegExp(/^(-)?[.]\d+$/),n.regexLeadingZero=new RegExp(/^[+\-]?(0+)[1-9]+|^[+\-]?(0{2,})[.]|^(0{2,})$/),n.prefixesToPowers={Y:24,Z:21,E:18,P:15,T:12,G:9,M:6,k:3,m:-3,u:-6,n:-9,p:-12,f:-15,a:-18,z:-21,y:-24},n.complexConstructor=window.NIComplex?window.NIComplex:Smart.Utilities.Complex}prepareForValidation(e,t,n){const a=this.context,i=e||void 0!==t;if(n=(n=n.toString()).replace(/\s/g,""),n=a._discardDecimalSeparator(n),this.regexLeadingZero.test(n)){const l=this.regexLeadingZero.exec(n);n=l[1]?n.replace(l[1],""):n.replace(l[2]?l[2]:l[3],"0")}this.regexNoLeadingZero.test(n)?n="-"===n.charAt(0)?"-0"+n.slice(1):"0"+n:("integer"===a[this.numericFormatProperty]&&(10===a._radixNumber||i)||"floatingPoint"===a[this.numericFormatProperty])&&this.regexScientificNotation.test(n)&&(n=this.scientificToDecimal(n));let o,r=!1;if("complex"===a[this.numericFormatProperty]&&!1===a._regexSpecial.nonNumericValue.test(n))try{if(a._regexSpecial.exaValue.test(n)){const l=n.indexOf("E"),s=parseFloat(n.slice(0,l))*Math.pow(10,18),c=parseFloat(n.slice(l+1,-1));o=new this.complexConstructor(s,c)}else o=new this.complexConstructor(n);r=!0}catch(l){r=!1}if(!1!==r||!(!i&&!1===a._regex[a._radixNumber].test(n)||i&&!1===a._regex[10].test(n)))return{value:n,enteredComplexNumber:o};a._handleNonNumericValue(e,t,n)}isENotation(e){return new RegExp(/e/i).test(e.toString())}scientificToDecimal(e){const t=this.regexScientificNotation.exec(e),a=t[2];return parseFloat(t[1])*Math.pow(10,this.prefixesToPowers[a])}_createMeasureLabel(){const e=this.context,t=document.createElement("div");return t.className="smart-label",t.style.position="absolute",t.style.visibility="hidden",e._measureLabelScale="far"!==e.scalePosition?e.$.scaleNear:e.$.scaleFar,e._measureLabelScale.appendChild(t),t}_addMajorTickAndLabel(e,t,n,a,i){const o=this.context,r=o._settings.leftOrTop,l=this.valueToPx(a);let s="",c="";if(parseInt(l)>parseInt(o._measurements.trackLength))return{tick:s,label:c};if(o.logarithmicScale&&(e=o._formatLabel(Math.pow(10,a))),"smart-tank"===o.nodeName.toLowerCase()||o._intervalHasChanged){let u=o._tickIntervalHandler.labelsSize;if(i){o._labelDummy.innerHTML=e;let p=this.valueToPx(a),g=this.valueToPx(o._drawMax),b=this.valueToPx(o._drawMin),v=o._labelDummy[o._settings.size],y="vertical"===o.orientation?o._labelDummy.offsetWidth:o._labelDummy.offsetHeight,x=(v+u.minLabelSize)/2,D=(v+u.maxLabelSize)/2;n=o._normalLayout?p+D<g&&p-x>b:p-D>g&&p+x<b,y>this._longestLabelSize&&(this._longestLabelSize=y)}else this._longestLabelSize=Math.max(u.minLabelOtherSize,u.maxLabelOtherSize,this._longestLabelSize)}return o._tickValues.push(a),s='<div style="'+r+": "+l+'px;" class="smart-tick"></div>',!1!==n&&(void 0===t&&(o._labelDummy.innerHTML=e,t=o._labelDummy[o._settings.size]),c+='<div class="smart-label'+(i?" smart-label-middle":"")+'" style="'+r+": "+(l-t/2)+'px;">'+e+"</div>"),{tick:s,label:c}}getWordLength(e){switch(this.context._unsigned="u"===e.charAt(0),e){case"int8":case"uint8":return 8;case"int16":case"uint16":return 16;case"int32":case"uint32":return 32;case"int64":case"uint64":return 64}}getAngleByValue(e,t,n){const a=this.context;!1!==t&&a.logarithmicScale&&(e=Math.log10(e));const i=(e-a._drawMin)*a._angleRangeCoefficient;let o;return o=void 0===a.inverted||!a.inverted&&!a.rightToLeft||a.rightToLeft&&a.inverted?a.endAngle-i:a.startAngle+i,n?o:o*Math.PI/180+Math.PI/2}getValueByAngle(e,t){const n=this.context;let a,i,o;for(void 0===n.inverted||!n.inverted&&!n.rightToLeft||n.rightToLeft&&n.inverted?(a=n.endAngle,i=e):(a=e,i=n._normalizedStartAngle);a<i;)a+=360;if(o=(a-i)/n._angleDifference*n._range+parseFloat(n._drawMin),n.logarithmicScale){if(n.customInterval)return parseFloat(Math.pow(10,this.getCoercedValue(o,!0)).toFixed(12));o=Math.pow(10,o)}return t&&!n.coerce?Math.round(o):(o=this.createDescriptor(o,void 0,!0,!0),this.getCoercedValue(o,!1))}updateGaugeValue(e){const t=this.context,n=t.value;t.value=e,t._drawValue=t.logarithmicScale?Math.log10(e).toString():e,t._number=this.createDescriptor(t.value),t.$.digitalDisplay.value=e,t.$.fireEvent("change",{value:e,oldValue:n}),t._setAriaValue("valuenow"),delete t._valueBeforeCoercion}validateColorRange(e){const t=this.context;return Math.min(Math.max(e,t.min),t.max)}getActualValue(e){return this.context.logarithmicScale?Math.pow(10,e):e}drawGaugeLogarithmicScaleMinorTicks(e,t,n){const a=this.context;let i;t instanceof Smart.Utilities.BigNumber&&(t=parseFloat(t.toString()));for(let o in e)if(i=o,o>=0&&o%1==0)break;for(let o=parseFloat(i);o<a._drawMax;o+=t)for(let r=2;r<=9;r++){const l=r*Math.pow(10,o+t-1);l<a.max&&n(l)}for(let o=parseFloat(i);o>a._drawMin;o-=t)for(let r=2;r<=9;r++){const l=r*Math.pow(10,o-1);l>a.min&&n(l)}}_getAngleDifference(e,t){const n=Math.abs(t-e)%360;return n>180?360-n:n}addCustomTicks(){const e=this,t=e.context,n=!t.logarithmicScale;let a="",i="";function o(r){const l=t.customTicks[r],s=n?e.createDescriptor(l):Math.log10(l),c=r>0&&r<t.customTicks.length-1,u=e._addMajorTickAndLabel(t._formatLabel(l),void 0,!0,s,c);a+=u.tick,i+=u.label}if(e._longestLabelSize=0,t._tickValues=[],t._labelDummy=e._createMeasureLabel(),t._normalLayout)for(let r=0;r<t.customTicks.length;r++)o(r);else for(let r=t.customTicks.length-1;r>=0;r--)o(r);"smart-tank"===t.nodeName.toLowerCase()&&t._updateScaleWidth(e._longestLabelSize),t._appendTicksAndLabelsToScales(a,i)}addGaugeCustomTicks(){const e=this,t=e.context,n=t._distance,a=t._measurements.radius-n.majorTickDistance;let i,o;function r(l){const s=t.customTicks[l],c=e.createDescriptor(s),u=e.getAngleByValue(c,!0),p=l>0&&l<t.customTicks.length-1;i(u),o(u,s,p)}i="none"!==t.ticksVisibility&&!1!==t._plotTicks?function(l){t._drawTick(l,a,"major")}:function(){},o="none"!==t.labelsVisibility&&!1!==t._plotLabels?function(l,s,c){t._drawLabel(l,s,n.labelDistance,c)}:function(){};for(let l=t.customTicks.length-1;l>=0;l--)r(l)}}),Smart.Utilities.Assign("IntegerNumericProcessor",class extends Smart.Utilities.BaseNumericProcessor{constructor(e,t){super(e,t);const n=this;n.context=e,n.defaultMins={int8:"-128",uint8:"0",int16:"-32768",uint16:"0",int32:"-2147483648",uint32:"0",int64:"-9223372036854775808",uint64:"0"},n.defaultMaxs={int8:"127",uint8:"255",int16:"32767",uint16:"65535",int32:"2147483647",uint32:"4294967295",int64:"9223372036854775807",uint64:"18446744073709551615"}}createDescriptor(e,t,n,a,i){const o=this.context;let r;if(e.constructor!==Smart.Utilities.BigNumber){let l=!i&&o._radixNumber?o._radixNumber:10;10===l&&t&&e.constructor!==Smart.Utilities.BigNumber&&this.isENotation(e)&&(e=Smart.Utilities.BigNumber.bigIntSupport?new Smart.Utilities.BigNumber(Math.round(e)):new Smart.Utilities.NumberRenderer(e).largeExponentialToDecimal()),r=o._toBigNumberDecimal?o._toBigNumberDecimal(e.toString(l,o._wordLengthNumber),l):new Smart.Utilities.BigNumber(e)}else r=new Smart.Utilities.BigNumber(e);return n&&(o._unsigned&&-1===r.compare(0)&&(r=r.set(0)),a&&(r=this.validate(r,o._minObject,o._maxObject)),r=this.round(r)),r}round(e){const t=this.context;if(e instanceof window.Smart.Utilities.BigNumber&&"bigint"==typeof e._d)return e;if(e instanceof window.Smart.Utilities.BigNumber==0||!t._wordLengthNumber||t._wordLengthNumber<64)return new Smart.Utilities.BigNumber(Math.round(e.toString()));const n=e.mod(1);return 1===n._d.length&&0===n._d[0]||((e=e.intPart())._s?(n._d[1]>5||5===n._d[1]&&n._d[2])&&(e=e.add(-1)):n._d[1]>4&&(e=e.add(1))),e}validate(e,t,n){let a;return a=-1===e.compare(t)?t:1===e.compare(n)?n:e,a}validateMinMax(e,t){const n=this.context;let a=this.defaultMins[n.wordLength],i=new Smart.Utilities.BigNumber(a),o=this.defaultMaxs[n.wordLength],r=new Smart.Utilities.BigNumber(o),l="date"!==n.mode;if(void 0===n._numberRenderer&&(n._numberRenderer=new Smart.Utilities.NumberRenderer),e&&l){null!==n.min&&(n.min=n.min.toString().replace(/\s/g,""),this.regexScientificNotation.test(n.min)&&(n.min=this.scientificToDecimal(n.min)));let s=this.round(new Smart.Utilities.BigNumber(n.min));null===n.min||n._minIsNull&&n._initialized||!(s.compare(i)>=0)?(n._minIsNull=!0,n.min=a,n._minObject=i):n._minObject=s}if(t&&l){null!==n.max&&(n.max=n.max.toString().replace(/\s/g,""),this.regexScientificNotation.test(n.max)&&(n.max=this.scientificToDecimal(n.max)));let s=this.round(new Smart.Utilities.BigNumber(n.max));null===n.max||n._maxIsNull&&n._initialized||!(s.compare(r)<=0)?(n._maxIsNull=!0,n.max=o,n._maxObject=r):n._maxObject=s}l||(n._minObject=new Smart.Utilities.BigNumber(n.min),n._maxObject=new Smart.Utilities.BigNumber(n.max)),this.compare(n._minObject,n._maxObject)||(n._minObject=i,n._maxObject=r,n._drawMin=n.logarithmicScale?0:a,n._drawMax=n.logarithmicScale?10:o,n.min=a,n.max=o),l||(n._minDate=Smart.Utilities.DateTime.fromFullTimeStamp(n.min),n._maxDate=Smart.Utilities.DateTime.fromFullTimeStamp(n.max))}valueToPx(e){const t=Smart.Utilities.BigNumber.ignoreBigIntNativeSupport;Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=!0;const n=this.context,a=new Smart.Utilities.BigNumber(n._measurements.trackLength).divide(new Smart.Utilities.BigNumber(n._range));let i;if(n._normalLayout){const o=n._drawMin instanceof Smart.Utilities.BigNumber?n._drawMin:new Smart.Utilities.BigNumber(n._drawMin);e=new Smart.Utilities.BigNumber(e),i=parseFloat(a.multiply(e.subtract(o)).toString())}else{const o=n._drawMax instanceof Smart.Utilities.BigNumber?n._drawMax:new Smart.Utilities.BigNumber(n._drawMax);i=parseFloat(this.round(o.subtract(e).multiply(a)).toString())}return Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=t,i}pxToValue(e){const t=this.context,n=Smart.Utilities.BigNumber.ignoreBigIntNativeSupport;let a;if(Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=!0,a=t._valuePerPx.multiply(t._normalLayout?e-t._trackStart:t._trackEnd-e),a=this.round(a).toString(),Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=n,t.logarithmicScale){let i=parseFloat(a)+parseFloat(t._drawMin);return new Smart.Utilities.BigNumber(Math.round(Math.pow(10,i)))}return this.createDescriptor(t._minObject.add(a),!1,!0,!0)}compare(e,t,n){if((null===e||null===t)&&e!==t)return!0;e.constructor!==Smart.Utilities.BigNumber&&(e=new Smart.Utilities.BigNumber(e));const a=e.compare(t);return!0!==n?0!==a:a}incrementDecrement(e,t,n){const a=this.context;let i;if(e.constructor!==Smart.Utilities.BigNumber&&(e=new Smart.Utilities.BigNumber(e)),"add"===t){if(i=e.add(n),void 0!==a._drawMax)return i.compare(a._drawMax)>0?new Smart.Utilities.BigNumber(a._drawMax):i}else if(i=e.subtract(n),void 0!==a._drawMin)return i.compare(a._drawMin)<0?new Smart.Utilities.BigNumber(a._drawMin):i;return i}render(e,t){const n=this.context;if(!n.scientificNotation&&!0===t)return new Smart.Utilities.NumberRenderer(new Smart.Utilities.BigNumber(e)).bigNumberToExponent(n.significantDigits);let a=e;return n.scientificNotation&&!0===t?a=new Smart.Utilities.NumberRenderer(a).toScientific(n.significantDigits,n.precisionDigits):"string"!=typeof e&&(a=e.toString(n._radixNumber,n._wordLengthNumber,n.leadingZeros)),a}addTicksAndLabels(){const e=Smart.Utilities.BigNumber.ignoreBigIntNativeSupport;Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=!0;const t=this.context,n=t._measurements.trackLength,a=t._normalLayout,i=t._majorTicksInterval,o=this.round(new Smart.Utilities.BigNumber(t._range).divide(i)),r=n/o,l=new Smart.Utilities.BigNumber(t._drawMin),s=new Smart.Utilities.BigNumber(t._drawMax);let c,u,p,g,b,v,y,x,D,T="",M="";t._tickValues=[],this._longestLabelSize=0,a?(c=l,u=i.add(c.subtract(c.mod(i))),p=u.subtract(c),b=t._formatLabel(l),v=t._tickIntervalHandler.labelsSize.minLabelSize,g=s,y=t._formatLabel(s),x=t._tickIntervalHandler.labelsSize.maxLabelSize):(c=s,u=c.subtract(c.mod(i)),p=c.subtract(u),b=t._formatLabel(s),v=t._tickIntervalHandler.labelsSize.maxLabelSize,g=l,y=t._formatLabel(l),x=t._tickIntervalHandler.labelsSize.minLabelSize),t._labelDummy=this._createMeasureLabel(),D=this._addMajorTickAndLabel(b,v,!0,c),T+=D.tick,M+=D.label;const A=p.divide(i).multiply(r);if(0!==u.compare(t.max)&&A.compare(n)<0){const B=t._formatLabel(u.toString()),O=A.compare(v)>0;D=this._addMajorTickAndLabel(B,void 0,O,u,!0),T+=D.tick,M+=D.label}D=this.addMiddleMajorTicks(o,r,A,p,a,i),T+=D.tick,M+=D.label,D=this._addMajorTickAndLabel(y,x,!0,g),T+=D.tick,M+=D.label,"date"!==t.mode&&(T+=this.addMinorTicks(a)),t._measureLabelScale.removeChild(t._labelDummy),delete t._labelDummy,delete t._measureLabelScale,"smart-tank"===t.nodeName.toLowerCase()&&t._updateScaleWidth(this._longestLabelSize),t._appendTicksAndLabelsToScales(T,M),Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=e}addMiddleMajorTicks(e,t,n,a,i,o){const r=this.context;let l,s="",c="";for(let u=1;u<e;u++){let p,g=n.add(u*t);if(i?p=o.multiply(u).add(a.add(new Smart.Utilities.BigNumber(r._drawMin))):(p=new Smart.Utilities.BigNumber(r._drawMax).subtract(a).subtract(o.multiply(u)),u===e-1&&0===p.compare(0)&&(r._numberRenderer.numericValue=r._tickIntervalHandler.nearestPowerOfTen,l=r._numberRenderer.bigNumberToExponent(1))),0!==p.compare(r._drawMax)){let b=r._formatLabel(p.toString()),v=!0;r._labelDummy.innerHTML=l||b,g.add(r._labelDummy[r._settings.size]).compare(e*t)>=0&&(v=!1);const x=this._addMajorTickAndLabel(b,void 0,v,p,!0);s+=x.tick,c+=x.label}}return{tick:s,label:c}}addMinorTicks(e){function t(p){-1===a.indexOf(p)&&p%o==0&&(u+='<div style="'+r+": "+n._numericProcessor.valueToPx(p)+'px;" class="smart-tick smart-tick-minor"></div>')}const n=this.context,a=n._tickValues,i=n._tickIntervalHandler.nearestPowerOfTen,o=n._minorTicksInterval,r=n._settings.leftOrTop;let l,s,c,u="";if(e?(l=a[0],s=a[1],c=a[a.length-1]):(l=a[a.length-1],s=a[a.length-2],c=a[0]),n.logarithmicScale)!function(){let p=n._measurements.trackLength/a.length,g=.1;p<20?g=1:p>=20&&p<40?g=s-l>1?1:.5:p>=40&&p<80&&(g=.2);let b=Math.floor(n._drawMax),v=n._drawMax-b,y=n._drawMax-n._drawMin>a.length;for(let x=n._drawMax;x>0;x-=1){let D=v>0?Math.pow(10,x-v+1):Math.pow(10,x),T=D*g;for(let M=D;M>0;M-=T)if(M<n.max&&M>n.min){let A=new Smart.Utilities.BigNumber(Math.log10(M));(A%1==0&&y||!y)&&(u+='<div style="'+r+": "+n._numericProcessor.valueToPx(A)+'px;" class="smart-tick smart-tick-minor"></div>')}}}();else{for(let p=s;l.compare(p)<0;p=p.subtract(i))t(p);for(let p=s.add(i);c.compare(p)>0;p=p.add(i))t(p)}return u}validateCustomTicks(){const e=this.context,t="date"!==e.mode;let n=[];for(let a=0;a<e.customTicks.length;a++){let i=e.customTicks[a];t?i=this.createDescriptor(i,!1,!0):void 0===i._d&&(i=Smart.Utilities.DateTime.validateDate(i).getTimeStamp()),i.compare(e._minObject)>=0&&i.compare(e._maxObject)<=0&&n.push(i)}if(n.sort(function(a,i){return a.compare(i)}),t){for(let a=0;a<n.length;a++)n[a]=n[a].toString();n=n.filter(function(a,i,o){return!i||a!==o[i-1]})}e.customTicks=n.slice(0)}addGaugeTicksAndLabels(){const e=Smart.Utilities.BigNumber.ignoreBigIntNativeSupport;Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=!0;const t=this.context,n=this,a=Math.max(t._tickIntervalHandler.labelsSize.minLabelSize,t._tickIntervalHandler.labelsSize.maxLabelSize),i=t._majorTicksInterval,o=t._minorTicksInterval,r={},l=t._distance,s=t._measurements.radius,c=s-l.majorTickDistance,u=s-l.minorTickDistance,p=new Smart.Utilities.BigNumber(t._drawMin),g=new Smart.Utilities.BigNumber(t._drawMax);let b,v,y,x,D,T;"none"!==t.ticksVisibility&&!1!==t._plotTicks?(b=function(O){t._drawTick(O,c,"major")},v=function(O){t._drawTick(n.getAngleByValue(O,!0),u,"minor")}):(b=function(){},v=function(){}),y="none"!==t.labelsVisibility&&!1!==t._plotLabels?function(O,N,P){t._drawLabel(O,N,l.labelDistance,P)}:function(){},void 0===t.inverted||!t.inverted&&!t.rightToLeft||t.rightToLeft&&t.inverted?(D=t.endAngle,T=t.startAngle):(D=t.startAngle,T=t.endAngle),x=n.getAngleByValue(p,!1),b(x),r[t._drawMin.toString()]=!0,y(x,t.min,!1);let M,A,B=p.subtract(p.mod(i));-1!==p.compare(0)&&(B=B.add(i));for(let O=new Smart.Utilities.BigNumber(B);-1!==O.compare(p);O=O.subtract(o))M=O;for(x=n.getAngleByValue(B,!1),b(x),r[B.toString()]=!0,2*Math.PI*t._measurements.innerRadius*(this._getAngleDifference(D,n.getAngleByValue(B,!1,!0))/360)>a&&y(x,this.getActualValue(B),-1===B.compare(g)),A=B.add(i);-1===A.compare(g.subtract(i));A=A.add(i))x=n.getAngleByValue(A,!1),b(x),r[A.toString()]=!0,y(x,this.getActualValue(A),!0);if(void 0===r[A.toString()]&&1!==A.compare(g)&&(x=n.getAngleByValue(A,!1),b(x),r[A.toString()]=!0,2*Math.PI*t._measurements.innerRadius*(this._getAngleDifference(T,n.getAngleByValue(A,!1,!0))/360)>=a&&y(x,this.getActualValue(A),!0),t._normalizedStartAngle!==t.endAngle&&(x=n.getAngleByValue(g,!1),b(x),2*Math.PI*t._measurements.innerRadius*(this._getAngleDifference(T,D)/360)>=a&&y(x,t.max,!1))),"date"!==t.mode){if(t.logarithmicScale)this.drawGaugeLogarithmicScaleMinorTicks(r,i,v);else for(let O=M;-1===O.compare(g);O=O.add(o))r[O.toString()]||v(O);Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=e}else Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=e}updateToolTipAndValue(e,t,n){const a=this.context,i=a.logarithmicScale;a._updateTooltipValue(e.toString()),i&&(e=parseFloat(Math.pow(10,parseFloat(e)).toFixed(11)));const o=(e=e instanceof Smart.Utilities.BigNumber?e:new Smart.Utilities.BigNumber(e)).toString();a._number=e,a._drawValue=i?Math.log10(o):e,0!==e.compare(t)&&n&&("numeric"===a.mode?(a.value=o,e=o):(t=a._valueDate,a._valueDate=Smart.Utilities.DateTime.fromFullTimeStamp(o),a.value=e,e=a._valueDate),a._programmaticValueIsSet||a.$.fireEvent("change",{value:e,oldValue:t}),a.$.hiddenInput&&(a.$.hiddenInput.value=e),a._setAriaValue("valuenow"))}validateInterval(e){const t=this.context,n=t._maxObject.subtract(t._minObject);t._validInterval=new Smart.Utilities.BigNumber(e),t._validInterval=this.round(t._validInterval),t._validInterval.compare(0)<=0&&(t._validInterval=new Smart.Utilities.BigNumber(1)),1===t._validInterval.compare(n)&&(t._validInterval=n),t.interval=t._validInterval.toString()}getCoercedValue(e,t,n){const a=this.context;if(!a.coerce)return e;const i=!a.logarithmicScale;let o,r;if(e=e instanceof Smart.Utilities.BigNumber?e:new Smart.Utilities.BigNumber(e),a.customInterval){const g=a.customTicks;if(0===g.length)return e;let b,v;if(i||n){o=a._minObject,b=o.subtract(e).abs(),v=o;for(let y=0;y<g.length;y++){const x=this.createDescriptor(g[y]),D=x.subtract(e).abs();-1===D.compare(b)&&(b=D,v=x)}}else{o=a._drawMin,b=Math.abs(o-parseFloat(e.toString())),v=o;for(let y=0;y<g.length;y++){const x=Math.log10(g[y]),D=Math.abs(x-e);D<b&&(b=D,v=x)}v=new Smart.Utilities.BigNumber(v)}return v}let l=a._validInterval;if("date"===a.mode){if("addYears"===a._dateIncrementMethod)return this.coerceYear(e);if("addMonths"===a._dateIncrementMethod)return this.coerceMonth(e);l=new Smart.Utilities.BigNumber(a._dateIntervalNumber).multiply(l)}!1!==t?(o=new Smart.Utilities.BigNumber(a._drawMin),r=new Smart.Utilities.BigNumber(a._drawMax)):(o=new Smart.Utilities.BigNumber(a.min),r=new Smart.Utilities.BigNumber(a.max));let s=e.subtract(o),c=s.mod(l);if(0===c.compare(0))return e;let u=s.subtract(c),p=u.add(l);if(s.subtract(u).abs().compare(s.subtract(p).abs())<0)return u.add(o);{const g=p.add(o);return g.compare(r)<=0?g:u.add(o)}}coerceMonth(e){const t=this.context,n=parseFloat(t._validInterval),a=Smart.Utilities.DateTime.fromFullTimeStamp(e),i=a.year(),o=a.month(),r=a.day(),l=t._minDate.year(),s=t._minDate.month(),c=12*(t._maxDate.year()-l-1)+12-s+t._maxDate.month();let u=12*(i-1-l)+(12-s)+o;1===n&&(-1!==[1,3,5,7,8,10,12].indexOf(o)?(r>16||16===r&&a.hour()>11)&&u++:2===o?a.isLeapYear(i)?(r>15||15===r&&a.hour()>11)&&u++:r>14&&u++:r>15&&u++),u=this.getCoercedTimePart(0,c,u,n);let p=t._minDate.addMonths(u,!0);return 1===p.compare(t._maxDate)&&(p=t._minDate.addMonths(u-n,!0)),t._drawValue=new Smart.Utilities.BigNumber(p.getTimeStamp()),t._drawValue}coerceYear(e){const t=this.context,n=parseFloat(t._validInterval),a=Smart.Utilities.DateTime.fromFullTimeStamp(e),i=t._maxDate.year(),o=Smart.Utilities.DateTime.getConstructorParameters(t._minDate);let r=a.year();a.month()>6&&r++;let l=this.getCoercedTimePart(t._minDate.year(),i,r,n);l>i&&(l-=n),o[0]=l,o.unshift(null);const s=new(Function.prototype.bind.apply(Smart.Utilities.DateTime,o));return t._drawValue=new Smart.Utilities.BigNumber(s.getTimeStamp()),t._drawValue}getCoercedTimePart(e,t,n,a){let i=n-e,o=i%a;if(0===o)return n;let r=parseFloat((i-o).toFixed(12)),l=r+a;if(t-e<=a)return n>=e+(t-e)/2?t:e;if(Math.abs(i-r)<Math.abs(i-l))return r+e;{const s=l+e;return s>t?r+e:s}}updateValue(e){const t=this.context;e=e instanceof Smart.Utilities.BigNumber?e:new Smart.Utilities.BigNumber(e);const n=this.validate(e,t._minObject,t._maxObject);let a,i,o=t.value;t._number=n,t._drawValue=t.logarithmicScale?Math.log10(n):n,"numeric"===t.mode?(a=e.toString(),t.value=a,i=this.compare(e,o)):(o=Smart.Utilities.DateTime.fromFullTimeStamp(o),t._valueDate=Smart.Utilities.DateTime.fromFullTimeStamp(e),t.value=e,a=e=t._valueDate,i=0!==e.compare(o)),t._programmaticValueIsSet||!i&&!t._scaleTypeChangedFlag||t.$.fireEvent("change",{value:a,oldValue:o}),t.$.hiddenInput&&(t.$.hiddenInput.value=e),t._setAriaValue("valuenow"),t._moveThumbBasedOnValue(t._drawValue)}getValuePerPx(e,t){const n=Smart.Utilities.BigNumber.ignoreBigIntNativeSupport;Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=!0;const a=new Smart.Utilities.BigNumber(e).divide(t);return Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=n,a}restrictValue(e){e[1].constructor===Smart.Utilities.BigNumber?-1===e[1].compare(e[0])&&e[1].set(e[0]):e[1]<e[0]&&(e[1]=e[0])}getAngleByValue(e,t,n){const a=this.context,i=Smart.Utilities.BigNumber.ignoreBigIntNativeSupport;if(Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=!0,a._wordLengthNumber<64)return Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=i,super.getAngleByValue(parseFloat(e.toString()),t,n);e instanceof Smart.Utilities.BigNumber==0&&(e=new Smart.Utilities.BigNumber(e)),!1!==t&&a.logarithmicScale&&(e=new Smart.Utilities.BigNumber(Math.log10(e.toString())));const o=e.subtract(a._drawMin).multiply(a._angleRangeCoefficient);let r;return r=void 0===a.inverted||!a.inverted&&!a.rightToLeft||a.rightToLeft&&a.inverted?o.multiply(-1).add(a.endAngle):o.add(a.startAngle),r=parseFloat(r.toString()),Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=i,n?r:r*Math.PI/180+Math.PI/2}getValueByAngle(e){const t=this.context;if(t._wordLengthNumber<64)return super.getValueByAngle(e,!0);const n=Smart.Utilities.BigNumber.ignoreBigIntNativeSupport;let a,i,o,r;for(Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=!0,void 0===t.inverted||!t.inverted&&!t.rightToLeft||t.rightToLeft&&t.inverted?(a=t.endAngle,i=e):(a=e,i=t._normalizedStartAngle);a<i;)a+=360;return o=new Smart.Utilities.BigNumber((a-i)/t._angleDifference).multiply(t._range).add(t._drawMin),t.logarithmicScale&&(o=new Smart.Utilities.BigNumber(Math.pow(10,o.toString()))),r=t.coerce?this.getCoercedValue(o,!1):this.round(o),Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=n,new Smart.Utilities.BigNumber(r)}updateGaugeValue(e){if(e instanceof Smart.Utilities.BigNumber==0)return super.updateGaugeValue(e);const t=this.context,n=t._getEventValue();"numeric"===t.mode?(t.value=e.toString(),t.$.digitalDisplay.value=t.value):(t._valueDate=Smart.Utilities.DateTime.fromFullTimeStamp(e),t.value=e),t._drawValue=t.logarithmicScale?Math.log10(t.value).toString():t.value,t._number=e,t.$.fireEvent("change",{value:t._getEventValue(),oldValue:n}),t._setAriaValue("valuenow")}validateColorRange(e){const t=this.context;if(t._wordLengthNumber<64)return super.validateColorRange(e);e="numeric"===t.mode?new Smart.Utilities.BigNumber(e):(e=Smart.Utilities.DateTime.validateDate(e)).getTimeStamp();const n=new Smart.Utilities.BigNumber(t.min),a=new Smart.Utilities.BigNumber(t.max);return-1===e.compare(n)&&(e=n),1===e.compare(a)&&(e=a),e}lockRotation(e,t){const n=this.context;if(t instanceof Smart.Utilities.BigNumber==0&&(t=new Smart.Utilities.BigNumber(t)),e&&-1===t.compare(n._number)){if(n._lockCW=!0,-1===t.compare(n._maxObject))return new Smart.Utilities.BigNumber(n._maxObject)}else if(!e&&1===t.compare(n._number)&&(n._lockCCW=!0,1===t.compare(n._minObject)))return new Smart.Utilities.BigNumber(n._minObject)}getAngleRangeCoefficient(){const e=this.context,t=Smart.Utilities.BigNumber.ignoreBigIntNativeSupport;Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=!0,e._angleRangeCoefficient=new Smart.Utilities.BigNumber(e._angleDifference).divide(e._range),Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=t}}),Smart.Utilities.Assign("DecimalNumericProcessor",class extends Smart.Utilities.BaseNumericProcessor{constructor(e,t){super(e,t),this.context=e}getPreciseModulo(e,t,n){const a=e>=0?1:-1;if(e=Math.abs(e),t=Math.abs(t),void 0===n){const i=e.toExponential(),o=t.toExponential(),r=parseInt(i.slice(i.indexOf("e")+1),10),l=parseInt(o.slice(o.indexOf("e")+1),10),s=r<0?Math.abs(r):0,c=l<0?Math.abs(l):0,u=Math.max(s,c);if(this.roundCoefficient=u,e<t)return a*e;if(e===t)return 0;if((e<-1||e>1)&&(t<-1||t>1||1===t)){if(e%1==0&&t%1==0)return a*(e%t);{const g=Smart.Utilities.BigNumber.ignoreBigIntNativeSupport;Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=!0;const b=a*parseFloat(new Smart.Utilities.BigNumber(e).mod(t).toString());return Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=g,b}}const p=Math.pow(10,u);return a*(e*p%(t*p)/p)}return a*(Math.round(e*n)%Math.round(t*n))}createDescriptor(e,t,n,a){let i=parseFloat(e);return a&&(i=this.validate(i,this.context._minObject,this.context._maxObject)),i}round(e){return Math.round(e)}validate(e,t,n){let a;return a=e<t?t:e>n?n:e,a}validateMinMax(e,t){const n=this.context,a=void 0!==n._regexSpecial&&n._regexSpecial.inf.test(n.min),i=void 0!==n._regexSpecial&&n._regexSpecial.inf.test(n.max);e&&(null===n.min||a?(n.min=-1/0,n._minObject=-1/0):(n.min=n.min.toString().replace(/\s/g,""),this.regexScientificNotation.test(n.min)&&(n.min=this.scientificToDecimal(n.min)),n._minObject=n._discardDecimalSeparator(n.min))),t&&(null===n.max||i?(n.max=1/0,n._maxObject=1/0):(n.max=n.max.toString().replace(/\s/g,""),this.regexScientificNotation.test(n.max)&&(n.max=this.scientificToDecimal(n.max)),n._maxObject=n._discardDecimalSeparator(n.max))),this.compare(n._minObject,n._maxObject)||(n._maxObject=parseFloat(n._maxObject)+1,n.max=n._maxObject)}valueToPx(e){const t=this.context,n=t._measurements.trackLength/t._range;let a;return a=t._normalLayout?n*(e-t._drawMin):n*(t._drawMax-e),Math.round(a)}pxToValue(e){const t=this.context;let n;if(n=t._normalLayout?(e-t._trackStart)*t._valuePerPx:(t._trackEnd-e)*t._valuePerPx,t.logarithmicScale){const a=n+parseFloat(t._drawMin);return Math.pow(10,a)}return this.validate(n+t._minObject,t._minObject,t._maxObject)}compare(e,t,n){return e=parseFloat(e),t=parseFloat(t),!0!==n?e!==t:e<t?-1:e>t?1:0}incrementDecrement(e,t,n){const a=this.context;let i;if("add"===t){if(i=parseFloat(e)+parseFloat(n),void 0!==a._drawMax)return i>parseFloat(a._drawMax)?a._drawMax:i}else if(i=parseFloat(e)-parseFloat(n),void 0!==a._drawMin)return i<parseFloat(a._drawMin)?a._drawMin:i;return i}render(e){const t=this.context;if(void 0!==t._regexSpecial&&t._regexSpecial.nonNumericValue.test(e))return e;{const n=new Smart.Utilities.NumberRenderer(e);return t.scientificNotation?n.toScientific(t.significantDigits,t.precisionDigits):n.toDigits(t.significantDigits,t.precisionDigits)}}addTicksAndLabels(){const e=this.context,t=e._measurements.trackLength,n=e._normalLayout,a=e._majorTicksInterval,i=Math.round(e._range/parseFloat(a.toString())),o=t/i,r=parseFloat(e._drawMin),l=parseFloat(e._drawMax);let s,c,u,p,g,b,v,y,x,D="",T="";e._tickValues=[],this._longestLabelSize=0,n?(s=r,c=e.logarithmicScale&&r<0&&-1!==r?parseFloat(s-this.getPreciseModulo(s,a)):parseFloat(s-this.getPreciseModulo(s,a)+parseFloat(a)),u=c-s,g=e._formatLabel(r),b=e._tickIntervalHandler.labelsSize.minLabelSize,p=l,v=e._formatLabel(l),y=e._tickIntervalHandler.labelsSize.maxLabelSize):(s=l,c=parseFloat(s-this.getPreciseModulo(s,a)),u=s-c,g=e._formatLabel(l),b=e._tickIntervalHandler.labelsSize.maxLabelSize,p=r,v=e._formatLabel(r),y=e._tickIntervalHandler.labelsSize.minLabelSize),e._labelDummy=this._createMeasureLabel(),x=this._addMajorTickAndLabel(g,b,!0,s),D+=x.tick,T+=x.label;const M=u/a*o;if(c.toString()!==e._drawMax.toString()&&M<t){const A=e._formatLabel(c.toString());x=this._addMajorTickAndLabel(A,void 0,b<M,c,!0),D+=x.tick,T+=x.label}x=this.addMiddleMajorTicks(i,o,M,u,n,a),D+=x.tick,T+=x.label,x=this._addMajorTickAndLabel(v,y,!0,p),D+=x.tick,T+=x.label,D+=this.addMinorTicks(n),e._measureLabelScale.removeChild(e._labelDummy),delete e._labelDummy,delete e._measureLabelScale,"smart-tank"===e.nodeName.toLowerCase()&&e._updateScaleWidth(this._longestLabelSize),e._appendTicksAndLabelsToScales(D,T)}addMiddleMajorTicks(e,t,n,a,i,o){const r=this.context;let l="",s="";for(let c=1;c<e;c++){let u,p=c*t+n;if(u=i?parseFloat(r._drawMin)+o*c+a:parseFloat(r._drawMax)-o*c-a,u.toString()!==r._drawMax.toString()){let g=r._formatLabel(u.toString()),b=!0;r._labelDummy.innerHTML=g,p+r._labelDummy[r._settings.size]>=e*t&&(b=!1);const v=this._addMajorTickAndLabel(g,void 0,b,u,!0);l+=v.tick,s+=v.label}}return{tick:l,label:s}}addMinorTicks(e){function t(v){return parseFloat(v.toFixed(l))}function n(v){-1===i.indexOf(v)&&0===a._numericProcessor.getPreciseModulo(v,r,s)&&(b+='<div style="'+c+": "+a._numericProcessor.valueToPx(v)+'px;" class="smart-tick smart-tick-minor"></div>')}const a=this.context,i=a._tickValues,o=a._tickIntervalHandler.nearestPowerOfTen,r=a._minorTicksInterval,l=Math.log10(o)<0?Math.round(Math.abs(Math.log10(o))):0,s=Math.pow(10,l),c=a._settings.leftOrTop;let u,p,g,b="";if(e?(u=i[0],p=i[1],g=i[i.length-1]):(u=i[i.length-1],p=i[i.length-2],g=i[0]),a.logarithmicScale)!function(){let v=a._measurements.trackLength/i.length,y=.1;v<20?y=1:v>=20&&v<40?y=p-u>1?1:.5:v>=40&&v<80&&(y=.2);let x=Math.floor(a._drawMax),D=a._drawMax-x,T=a._drawMax-a._drawMin>i.length;for(let M=a._drawMax;M>a._drawMin-1;M-=1){let A=D>0?Math.pow(10,M-D+1):Math.pow(10,M),B=A*y;for(let O=A;O>0;O-=B)if(O<a.max&&O>a.min){let N=new Smart.Utilities.BigNumber(Math.log10(O));(N%1==0&&T||!T)&&(b+='<div style="'+c+": "+a._numericProcessor.valueToPx(N)+'px;" class="smart-tick smart-tick-minor"></div>')}}}();else{for(let v=p;v>u;v=t(v-o))n(v);for(let v=t(p+o);v<g;v=t(v+o))n(v)}return b}validateCustomTicks(){const e=this.context;let t=[];for(let n=0;n<e.customTicks.length;n++){const i=this.createDescriptor(e.customTicks[n]);i>=e._minObject&&i<=e._maxObject&&t.push(i.toString())}t.sort(function(n,a){return n-a}),t=t.filter(function(n,a,i){return!a||n!==i[a-1]}),e.customTicks=t.slice(0)}addGaugeTicksAndLabels(){const e=this.context,t=this,n=Math.max(e._tickIntervalHandler.labelsSize.minLabelSize,e._tickIntervalHandler.labelsSize.maxLabelSize),a=e._majorTicksInterval,i=e._minorTicksInterval,o={},r=e._distance,l=e._measurements.radius,s=l-r.majorTickDistance,c=l-r.minorTickDistance;let u,p,g,b,v,y;"none"!==e.ticksVisibility&&!1!==e._plotTicks?(u=function(M){e._drawTick(M,s,"major")},p=function(M){e._drawTick(t.getAngleByValue(M,!0),c,"minor")}):(u=function(){},p=function(){}),g="none"!==e.labelsVisibility&&!1!==e._plotLabels?function(M,A,B){e._drawLabel(M,A,r.labelDistance,B)}:function(){},void 0===e.inverted||!e.inverted&&!e.rightToLeft||e.rightToLeft&&e.inverted?(v=e.endAngle,y=e.startAngle):(v=e.startAngle,y=e.endAngle),b=t.getAngleByValue(e._drawMin,!1),u(b),o[e._drawMin]=!0,g(b,e.min,!1);let x,D,T=e._drawMin-t.getPreciseModulo(e._drawMin,a);e._drawMin>=0&&(T+=a);for(let M=T;M>=e._drawMin;M-=i)x=M;for(b=t.getAngleByValue(T,!1),u(b),o[T]=!0,2*Math.PI*e._measurements.innerRadius*(this._getAngleDifference(v,t.getAngleByValue(T,!1,!0))/360)>n&&g(b,this.getActualValue(T),T<e._drawMax),D=T+a;D<e._drawMax-a;D+=a)b=t.getAngleByValue(D,!1),u(b),o[D]=!0,g(b,this.getActualValue(D),!0);if(void 0===o[D]&&D<=e._drawMax&&(b=t.getAngleByValue(D,!1),u(b),o[D]=!0,2*Math.PI*e._measurements.innerRadius*(this._getAngleDifference(y,t.getAngleByValue(D,!1,!0))/360)>=n&&g(b,this.getActualValue(D),!0),e._normalizedStartAngle!==e.endAngle&&(b=t.getAngleByValue(e._drawMax,!1),u(b),o[e._drawMax]=!0,2*Math.PI*e._measurements.innerRadius*(this._getAngleDifference(y,v)/360)>=n&&g(b,e.max,!1))),e.logarithmicScale)this.drawGaugeLogarithmicScaleMinorTicks(o,a,p);else for(let M=x;M<e._drawMax;M+=i)o[M]||p(M)}updateToolTipAndValue(e,t,n){const a=this.context,i=a.logarithmicScale;a._updateTooltipValue(e),i&&(e=parseFloat(Math.pow(10,parseFloat(e)).toFixed(11)));const o=e.toString();a._number=e,a._drawValue=i?Math.log10(o):e,o!==t&&n&&(a.value=a._discardDecimalSeparator(o),a._programmaticValueIsSet||a.$.fireEvent("change",{value:a.value,oldValue:t}),a.$.hiddenInput&&(a.$.hiddenInput.value=a.value),a._setAriaValue("valuenow"))}validateInterval(e){const t=this.context,n=t._maxObject-t._minObject;e<=0&&(e=1),t._validInterval=Math.min(parseFloat(e),n),t.interval=t._validInterval}getCoercedValue(e,t,n){const a=this.context;if(!a.coerce)return e;let i,o,r=!a.logarithmicScale;if(a.customInterval){const g=a.customTicks;if(0===g.length)return e;r=r||n,i=!1!==t?parseFloat(a._drawMin):a._minObject;let b=Math.abs(i-e),v=i;for(let y=0;y<g.length;y++){const x=this.createDescriptor(g[y]),D=r?x:Math.log10(x),T=Math.abs(D-e);T<b&&(b=T,v=D)}return v}!1!==t?(i=parseFloat(a._drawMin),o=parseFloat(a._drawMax)):(i=parseFloat(a.min),o=parseFloat(a.max));let l=e-i,s=this.getPreciseModulo(l,parseFloat(a.interval)),c=this.roundCoefficient;if(0===s)return e;0===this.roundCoefficient&&(c=12);let u=parseFloat((l-s).toFixed(c)),p=u+parseFloat(a.interval);if(a.max-a.min<=parseFloat(a.interval)&&r){let g=i,b=o;return e>=g+(b-g)/2?b:g}if(Math.abs(l-u)<Math.abs(l-p))return u+i;{const g=p+i;return g>o?u+i:g}}updateValue(e){const t=this.context,n=this.validate(e,t._minObject,t._maxObject),a=t.value;e.toString()!==a.toString()||t._scaleTypeChangedFlag?(t.value=e.toString(),t._number=n,t._programmaticValueIsSet||t.$.fireEvent("change",{value:t.value,oldValue:a})):t.value="string"==typeof e?e:e.toString(),t._drawValue=t.logarithmicScale?Math.log10(n).toString():n.toString(),t._moveThumbBasedOnValue(t._drawValue),t.$.hiddenInput&&(t.$.hiddenInput.value=t.value),t._setAriaValue("valuenow")}getValuePerPx(e,t){return parseFloat(e)/t}restrictValue(e){e[1]<e[0]&&(e[1]=e[0])}lockRotation(e,t){const n=this.context;if(e&&t<n._number){if(n._lockCW=!0,t<n._maxObject)return n._maxObject}else if(!e&&t>n._number&&(n._lockCCW=!0,t>n._minObject))return n._minObject}getAngleRangeCoefficient(){const e=this.context;e._angleRangeCoefficient=e._angleDifference/e._range}}),Smart.Utilities.Assign("ComplexNumericProcessor",class extends Smart.Utilities.BaseNumericProcessor{constructor(e,t){super(e,t),this.context=e}createDescriptor(e,t,n,a,i,o){let r;return r=o||(e.constructor===this.complexConstructor?new this.complexConstructor(e.realPart,e.imaginaryPart):new this.complexConstructor(e)),a&&(r=this.validate(r,this.context._minObject,this.context._maxObject)),r}validate(e,t,n){let a=e;return t!==-1/0?-1===this.compareComplexNumbers(e,t)&&(a=new this.complexConstructor(t.realPart,t.imaginaryPart)):n!==1/0&&1===this.compareComplexNumbers(e,n)&&(a=new this.complexConstructor(n.realPart,n.imaginaryPart)),a}compare(e,t,n){return!0!==n?0!==this.compareComplexNumbers(e,t):this.compareComplexNumbers(e,t)}validateMinMax(e,t){const n=this.context;e&&(null===n.min||n._regexSpecial.inf.test(n.min)?(n.min=-1/0,n._minObject=-1/0):n._minObject=new this.complexConstructor(n.min)),t&&(null===n.max||n._regexSpecial.inf.test(n.max)?(n.max=1/0,n._maxObject=1/0):n._maxObject=new this.complexConstructor(n.max))}incrementDecrement(e,t){let n=new this.complexConstructor(e.realPart,e.imaginaryPart),a=this.context._spinButtonsStepObject;return"add"===t?(n.realPart+=a.realPart,n.imaginaryPart+=a.imaginaryPart):(n.realPart-=a.realPart,n.imaginaryPart-=a.imaginaryPart),n}render(e){let t=e;if(!1===this.context._regexSpecial.nonNumericValue.test(e)){let n,a=t.realPart,i=t.imaginaryPart,o=this.context.significantDigits,r=this.context.precisionDigits;i>=0?n="+":(n="-",i=Math.abs(i));const l=new Smart.Utilities.NumberRenderer(a),s=new Smart.Utilities.NumberRenderer(i);this.context.scientificNotation?(a=l.toScientific(o,r),i=s.toScientific(o,r)):(a=l.toDigits(o,r),i=s.toDigits(o,r)),t=`${a} ${n} ${i}i`}return t}compareComplexNumbers(e,t){if(e instanceof this.complexConstructor==0||t instanceof this.complexConstructor==0)return-1;const n=e.realPart,a=t.realPart;if(n<a)return-1;if(n>a)return 1;{const i=e.imaginaryPart,o=t.imaginaryPart;return i<o?-1:i>o?1:0}}}),Smart.Utilities.Assign("NumberRenderer",class{constructor(e){const t=this;t.numericValue=e,t.powersToPrefixes={24:"Y",21:"Z",18:"E",15:"P",12:"T",9:"G",6:"M",3:"k",0:"","-3":"m","-6":"u","-9":"n","-12":"p","-15":"f","-18":"a","-21":"z","-24":"y"},t.localizationObject={currencysymbol:"$",currencysymbolposition:"before",decimalseparator:".",thousandsseparator:",",defaultPrecision:2}}isENotation(e){return new RegExp(/e/i).test(e)}largeExponentialToDecimal(e){let t;void 0===e&&(e=this.numericValue,t=!0);let n=e.toString().toLowerCase(),a=n.indexOf("e"),i=new Smart.Utilities.BigNumber(n.slice(0,a)),o=n.slice(a+1,a+2);"+"!==o&&"-"!==o&&(n=n.slice(0,a)+"e+"+n.slice(a+1),o="+");let r=n.slice(a+2),l=new Smart.Utilities.BigNumber(10).pow(o+(t?Math.min(20,r):r));return i.multiply(l).toString()}bigNumberToExponent(e,t){let n=this.numericValue;n.constructor!==Smart.Utilities.BigNumber&&(n=new Smart.Utilities.BigNumber(n));const a=n._f;let i=n.toString();if(a<=10)return t?parseFloat(i).toExponential(null!==e?e-1:void 0):new Smart.Utilities.NumberRenderer(parseFloat(i)).toDigits(e);if(e>=a&&!t)return i;{let o;!1===n._s?o="":(o="-",i=i.slice(1)),parseFloat(i.slice(e,e+1))>=5&&(i=new Smart.Utilities.BigNumber(i.slice(0,e)).add(1).toString());let r=i.slice(1,e);if(t)e--,r.length>0&&e>r.length?r+="0".repeat(e-r.length):0===r.length&&(r="0".repeat(e));else for(;r.length>0&&"0"===r.charAt(r.length-1);)r=r.slice(0,r.length-1);const l=r.length>0?".":"",s=a-1;return o+i.slice(0,1)+l+r+"E+"+s}}toScientific(){const e=this;let t;if(t=e.numericValue._d?e.bigNumberToExponent(null!==arguments[0]?arguments[0]:arguments[1]+1,!0).toLowerCase():e.numericValue<=-1||e.numericValue>=1?Number(e.toDigits(arguments[0],arguments[1])).toExponential():Number(e.numericValue).toExponential(),isNaN(t))return t;const n=t.indexOf("e");let a=parseInt(t.slice(n+1),10),i=parseFloat(t.slice(0,n)),o=new Smart.Utilities.NumberRenderer(i);if(a<0){let p=o.toDigits(arguments[0],arguments[1]);if(p=parseFloat(p).toExponential(),"0"===p.charAt(p.length-1)){let g=0;for(;a%3!=0;)a--,g++;if(g){const v=Smart.Utilities.BigNumber.ignoreBigIntNativeSupport;Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=!0,i=parseFloat(new Smart.Utilities.BigNumber(i).multiply(Math.pow(10,g)).toString()),Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=v}o.numericValue=i,i=o.toDigits(arguments[0],arguments[1]),o.numericValue=i/1e3;const b=o.toDigits(arguments[0],arguments[1]);return b>=1&&(i=b,a+=3),i+e.powersToPrefixes[a.toString()]}}let r=0;if(r=Math.abs(a)>24?a-a/Math.abs(a)*24:a%3,r>0)for(let p=0;p<r;p++)i*=10;else if(r<0){const p=Smart.Utilities.BigNumber.ignoreBigIntNativeSupport;Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=!0,i=parseFloat(new Smart.Utilities.BigNumber(i).multiply(Math.pow(10,r)).toString()),Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=p}if(a>0){const g=t.slice(i>=0?0:1,n).length-r-2;g>=0&&(i=i.toFixed(g))}let l=Number(i).toExponential();l=parseFloat(l.charAt(l.length-1)),o.numericValue=i,i=o.toDigits(arguments[0],arguments[1]);let s=Number(i).toExponential(),c=0;return s=parseFloat(s.charAt(s.length-1)),s!==l&&s%3==0&&(i=parseFloat(i)/Math.pow(10,s),o.numericValue=i,i=o.toDigits(arguments[0],arguments[1]),c=s),i+e.powersToPrefixes[(a-r+c).toString()]}bigNumberToScientific(){const e=this,t=e.numericValue._f-1,n=parseInt(t,10)%3,a=parseInt(t,10)-n;let i,o,r=e.numericValue.toString();if("-"===r.charAt(0)?(i="-",r=r.slice(1)):i="",null!==arguments[0])for(o=r.slice(0,arguments[0]),parseFloat(r.slice(arguments[0],arguments[0]+1))>=5&&(o=new Smart.Utilities.BigNumber(o).add(1).toString());o.length>1+n&&"0"===o.charAt(o.length-1);)o=o.slice(0,o.length-1);else null!==arguments[1]&&(o=r.slice(0,arguments[1]+1),parseFloat(r.slice(arguments[1]+1,arguments[1]+2))>=5&&(o=new Smart.Utilities.BigNumber(o).add(1).toString()),arguments[1]+n>o.length-1&&(o+="0".repeat(arguments[1]+n-o.length+1)));return o.length>1+n&&(o=o.slice(0,1+n)+"."+o.slice(1+n)),i+o+e.powersToPrefixes[a.toString()]}toDigits(e,t){const n=this;let a;return a=null!==e?n.applySignificantDigits(e):null!==t?n.applyPrecisionDigits(t):n.applySignificantDigits(8),a}applySignificantDigits(e){function n(i){for(;"0"===i.charAt(i.length-1);)i=i.slice(0,-1);return"."===i.charAt(i.length-1)&&(i=i.slice(0,-1)),i}e=Math.max(1,Math.min(e,21));let a=parseFloat(this.numericValue).toPrecision(e).toUpperCase();if(-1!==a.indexOf("."))if(this.isENotation(a)){const i=a.indexOf("."),o=a.indexOf("E");let r=a.slice(i,o);r=n(r),a=a.slice(0,i)+r+a.slice(o)}else a=n(a);return a}applyPrecisionDigits(e){const t=this;e=Math.max(0,Math.min(e,20));let n=parseFloat(t.numericValue).toFixed(e);return t.isENotation(n)&&(n=t.largeExponentialToDecimal(n)+"."+"0".repeat(e)),n}getLogarithm(e){const t=this.numericValue;let n;if(void 0===e&&(e=10),10===e)try{n=Math.log10(t)}catch(a){n=Math.log(t)/Math.log(10)}else n=Math.log(t)/Math.log(e);return n}applySeparators(e,t){const n=this,a=(e=e.toString()).indexOf(".");if(-1!==a){const i=e.slice(0,a),o=e.slice(a+1);return n.applyThousandsSeparator(i,t)+n.localizationObject.decimalseparator+o}return n.applyThousandsSeparator(e,t)}applyThousandsSeparator(e,t){if(t)return e;let n="";"-"===(e=e.toString()).charAt(0)&&(n="-",e=e.slice(1));let a=e.split("").reverse();for(let i=2;i<a.length-1;i+=3)a[i]=this.localizationObject.thousandsseparator+a[i];return a.reverse(),a=a.join(""),n+a}formatNumber(e,t,n){const a=this;if(void 0===arguments[3]&&delete a._ignoreMinus,delete a._wordLengthNumber,!/^([a-zA-Z]\d*)$/g.test(t))try{return a.applyCustomFormat(e,t)}catch(c){return e.toString()}const i=t.slice(0,1);let o=t.slice(1);if(""!==o&&(isNaN(parseFloat(o))||parseFloat(o)<0||parseFloat(o)>99?o="":parseFloat(o)%1!=0&&(o=Math.round(o))),e._d)a.inputFormat="integer";else{if(e.imaginaryPart)return a.formatComplexNumber(e,t,i,o);a.inputFormat="floatingPoint"}let r,l=new Smart.Utilities.NumericProcessor(a,"inputFormat"),s=l.createDescriptor(e);switch(a._wordLengthNumber=l.getWordLength(n||"int32"),"integer"===a.inputFormat&&(s=l.round(s)),a.numericValue=s,i){case"C":case"c":return""===o&&(o=a.localizationObject.defaultPrecision),o=parseFloat(o),r="floatingPoint"===a.inputFormat?a.applyPrecisionDigits(o):s.toString()+(o>0?"."+"0".repeat(o):""),r=a.applySeparators(r),"before"===a.localizationObject.currencysymbolposition?"-"===r.charAt(0)?"-"+a.localizationObject.currencysymbol+r.slice(1):a.localizationObject.currencysymbol+r:r+" "+a.localizationObject.currencysymbol;case"D":case"d":{if(r=s,"floatingPoint"===a.inputFormat&&(r=Math.round(s)),r=r.toString(),""===o)return r;let c="";"-"===r.charAt(0)&&(c="-",r=r.slice(1));const u=o-r.length;return u>0&&(r="0".repeat(u)+r),c+r}case"E":case"e":case"U":case"u":{""===o&&(o=6),r="floatingPoint"===a.inputFormat?s.toExponential(o):a.bigNumberToExponent(parseFloat(o)+1,!0).toLowerCase();const c=r.indexOf("e"),u=r.slice(c+2).length;return u<3&&(r=r.slice(0,c+2)+"0".repeat(3-u)+r.slice(c+2)),"u"===i.toLowerCase()?a.exponentialToSuperscript(a.applySeparators(r,!0)):("E"===i&&(r=r.toUpperCase()),a.applySeparators(r,!0))}case"F":case"f":case"N":case"n":return""===o&&(o=a.localizationObject.defaultPrecision),o=parseFloat(o),r="floatingPoint"===a.inputFormat?a.applyPrecisionDigits(o):s.toString()+(o>0?"."+"0".repeat(o):""),a.applySeparators(r,"f"===i.toLowerCase());case"G":case"g":{if(""===o||"0"===o)if("floatingPoint"===a.inputFormat)o=15;else switch(n){case"int8":case"uint8":o=3;break;case"int16":case"uint16":o=5;break;case"int64":o=19;break;case"uint64":o=20;break;default:o=10}o=parseFloat(o);let c=a.formatNumber(e,"E"+o,n),u=c.indexOf("E");const p=parseInt(c.slice(u+1),10);if(p>-5&&p<o)return"floatingPoint"===a.inputFormat?a.applySeparators(a.applySignificantDigits(o),!0):s.toString();if(p>-100&&p<100&&(c=c.slice(0,u+2)+c.slice(u+3)),-1!==c.indexOf(a.localizationObject.decimalseparator)){for(;"0"===c.charAt(u-1);)c=c.slice(0,u-1)+c.slice(u),u=c.indexOf("E");c.charAt(u-1)===a.localizationObject.decimalseparator&&(c=c.slice(0,u-1)+c.slice(u))}return"g"===i&&(c=c.toLowerCase()),c}case"P":case"p":return""===o&&(o=a.localizationObject.defaultPrecision),o=parseFloat(o),"floatingPoint"===a.inputFormat?(a.numericValue=100*s,r=a.applyPrecisionDigits(o)):r=s.multiply(100).toString()+(o>0?"."+"0".repeat(o):""),a.applySeparators(r)+" %";case"B":case"b":case"O":case"o":case"X":case"x":{let c;switch("integer"!==a.inputFormat&&(a.inputFormat="integer",l=new Smart.Utilities.NumericProcessor(a,"inputFormat"),s=l.round(l.createDescriptor(e))),i){case"B":case"b":c=2;break;case"O":case"o":c=8;break;default:c=16}if(r=s.toString(c,a._wordLengthNumber),""!==o){const u=parseFloat(o)-r.length;u>0&&(r="0".repeat(u)+r)}return"x"===i&&(r=r.toLowerCase()),r}case"S":case"s":return""===o&&(o=a.localizationObject.defaultPrecision),o=parseFloat(o),a.toScientific(null,o).replace(".",a.localizationObject.decimalseparator);default:return e.toString()}}formatComplexNumber(e,t,n){const a=this;switch(n){case"E":case"e":case"U":case"u":case"F":case"f":case"G":case"g":case"N":case"n":case"S":case"s":return e.imaginaryPart>=0?a.formatNumber(e.realPart,t)+" + "+a.formatNumber(e.imaginaryPart,t)+"i":a.formatNumber(e.realPart,t)+" - "+a.formatNumber(Math.abs(e.imaginaryPart),t)+"i";default:return e.toString()}}toString(e,t,n){return t?this.formatNumber(e,t,n):e.toString()}applyCustomFormat(e,t){const n=this,a=(t=(t=t.replace(/_.|\[\w*\]|\*/g,"")).replace(/\?/g,"#")).split(";");if("string"==typeof e&&isNaN(e))return a[a.length-1].replace(/"/g,"").replace(/@/g,e.toString());if(e._d)n.inputFormat="integer";else{if(e.imaginaryPart)return e.toString();e=parseFloat(e),n.inputFormat="floatingPoint"}let i=new Smart.Utilities.NumericProcessor(n,"inputFormat"),o=i.createDescriptor(e);"integer"===n.inputFormat&&(o=i.round(o)),n.numericProcessor=i;const r=n.getRelevantFormatSection(a,o);if(void 0===r)return e.toString();if(-1!==r.indexOf("@"))return a[a.length-1].replace(/"/g,"").replace(/@/g,e.toString());const l=-1!==r.replace(/".*"/g,"").indexOf("%"),s=n.getTextParts(r);if(-1!==s.main.toLowerCase().indexOf("e"))return n.applyCustomExponentialFormat(o,s,i);if(-1!==s.main.indexOf("/"))return n.applyCustomFractionalFormat(o,s,i);if(l&&("integer"===n.inputFormat?o=o.multiply(100):o*=100),""===s.main){if(!l)return s.suffix;let A=o.toString();return n._ignoreMinus&&"-"===A.charAt(0)&&(A=A.slice(1)),A+s.suffix}let c=s.main.replace(/[^0#,. \/]/g,""),u=c.indexOf(".");for(-1!==u&&(c=c.substring(0,u+1)+c.substring(u+1).replace(/\./g,""),"."===c.charAt(c.length-1)&&(c=c.slice(0,c.length-1)),0===u&&(c="#"+c));","===c.charAt(c.length-1);)c=c.slice(0,c.length-1),"floatingPoint"===n.inputFormat?o/=1e3:o=o.multiply(.001);"integer"===n.inputFormat&&(o=i.round(o));const p=-1!==c.indexOf(",");c=c.replace(/,/g,"");const g=c.split("."),b=g[0];let v=g[1],y="";if(1===g.length)return"floatingPoint"===n.inputFormat&&(o=i.round(o)),y=o.toString(),n.setTextParts(n.formatWholeNumber(y,b,p),s);y=o.toString();let x=y.split("."),D=n.formatWholeNumber(x[0],b,p),T=x[1]||"";if(v.length<=T.length&&(y=parseFloat(o.toFixed(v.length)).toString(),x=y.split("."),D=n.formatWholeNumber(x[0],b,p),T=x[1]||"",T))return n.setTextParts(D+n.localizationObject.decimalseparator+T.slice(0,v.length),s);v=v.slice(T.length-v.length);let M=v.lastIndexOf("0");return n.setTextParts(-1===M?""===T?D:D+n.localizationObject.decimalseparator+T:D+n.localizationObject.decimalseparator+T+"0".repeat(M+1),s)}getRelevantFormatSection(e,t){const n=this,a=n.numericProcessor.compare(t,0,!0);if(1===a)return e[0];let i,o;return e.length>=3?(n._ignoreMinus=!0,i=1,o=2):2===e.length?(n._ignoreMinus=!0,o=0,i=1):1===e.length&&(o=0,i=0),0===a?e[o]:-1===a?e[i]:void 0}getTextParts(e){const t=e.replace(/"[^"]*"/g,""),n=e.match(/"[^"]*"/g),a=t.search(/0|#|\./g),i=Math.max(t.lastIndexOf("0"),t.lastIndexOf("#"),t.lastIndexOf("."),t.lastIndexOf(",")),o=t.slice(a,i+1);if(""===o)return{prefix:"",main:"",suffix:e.replace(/"/g,"")};let r=e.indexOf(o),l=r+o.length;if(n)for(let s=0;s<n.length;s++){const c=e.indexOf(n[s]);r>=c&&l<=c+n[s].length&&(r=e.indexOf(o,c+n[s].length),l=r+o.length)}return{prefix:e.slice(0,r).replace(/"/g,""),main:o,suffix:e.slice(l).replace(/"/g,"")}}applyCustomExponentialFormat(e,t,n){const a=this;let i,o=t.main;const r=-1!==o.indexOf(",");o=o.replace(/[^0#.eE+-]/g,"");const l=o.toLowerCase().indexOf("e");o=o.substring(0,l+1)+o.substring(l+1).replace(/[eE\.]/g,"");const s=o.charAt(l),c=o.indexOf(".");-1!==c&&(o=o.substring(0,c+1)+o.substring(c+1).replace(/\./g,"")),"."===o.charAt(o.length-1)&&(o=o.slice(0,o.length-1));const u=o.split(s);let p=u[0];const g=p.split("."),b=g[0],v=g[1],y=u[1];let x=e.toString().split(".")[0].replace(/-/,""),D=0;if("0"===x&&n.compare(e,0)){let T=b.length-1;for(;0===parseInt(e);)D++,e*=10;x=e.toString().split(".")[0].replace(/-/,""),D+=T,e*=Math.pow(10,T)}if(r&&(p=p.slice(0,1)+","+p.slice(1)),x.length<=b.length)i=a.formatNumber(e,p,void 0,!0)+s+a.formatExponent(0-D,y);else{const T=x.length-b.length;let M="floatingPoint"===a.inputFormat?e/Math.pow(10,T):e.divide(Math.pow(10,T));v||(i=a.applyThousandsSeparator(n.round(M).toString(),!r)+s+a.formatExponent(T-D,y));let A=M.toString().split(".")[1]||"";A.length===v.length?i=a.applySeparators(M,!r)+s+a.formatExponent(T-D,y):A.length<v.length?i=a.formatNumber(M,p,void 0,!0)+s+a.formatExponent(T-D,y):(M="floatingPoint"===a.inputFormat?M.toFixed(v.length):M=n.round(e.divide(Math.pow(10,T-v.length))).divide(Math.pow(10,v.length)),i=a.formatNumber(parseFloat(M),p,void 0,!0)+s+a.formatExponent(T-D,y))}return a.setTextParts(i,t)}formatExponent(e,t){let n;return-1!==["+","-"].indexOf(t.charAt(0))&&(n=t.charAt(0),(e>0&&"-"===n||e<0&&"+"===n)&&(n=void 0)),e<0&&(e=Math.abs(e),n="-"),t=t.replace(/[+-]/g,""),(n||"")+this.formatNumber(e,t,void 0,!0)}formatWholeNumber(e,t,n){const a=this;let i="";if("-"===e.charAt(0)&&(a._ignoreMinus||(i="-"),e=e.slice(1)),"0"===e){if(t==="#".repeat(t.length))return i;e=""}if(t.length<=e.length)return i+a.applyThousandsSeparator(e,!n);for(let o=(t=t.slice(0,t.length-e.length)).length-1;o>=0;o--)"0"===t.charAt(o)&&(e="0"+e);return i+a.applyThousandsSeparator(e,!n)}setTextParts(e,t){return t.prefix+e+t.suffix}applyCustomFractionalFormat(e,t,n){const a=this,i=/^([0#,]+[ ]+)?([0#,]+\/[0#,]+)$/;let o,r=t.main.trim();if(!i.test(r))return e.toString();const l=i.exec(r);if(l[2]=l[2].replace(/,/g,""),"integer"===a.inputFormat){const s=l[2].split("/");return void 0===l[1]?o=a.formatNumber(e,s[0],void 0,!0)+"/"+a.formatNumber(1,s[1],void 0,!0):(o=a.formatNumber(e,l[1].trim(),void 0,!0),-1!==l[2].indexOf("0")&&(o+=" "+a.formatNumber(0,s[0],void 0,!0)+"/"+a.formatNumber(1,s[1],void 0,!0))),a.setTextParts(o,t)}if(void 0===l[1])o=(e<0?"-":"")+a.formatAsFraction(Math.abs(e),l[2]);else{const s=l[1].trim(),c=l[2];o=a.formatNumber(parseInt(e,10),s,void 0,!0)+" "+a.formatAsFraction(n.getPreciseModulo(Math.abs(e),1),c)}return a.setTextParts(o.trim(),t)}formatAsFraction(e,t){const n=this,a=t.split("/");if(0===e)return-1===t.indexOf("0")?"":n.formatNumber(0,a[0],void 0,!0)+"/"+n.formatNumber(1,a[1],void 0,!0);if(e%1==0)return n.formatNumber(e,a[0],void 0,!0)+"/"+n.formatNumber(1,a[1],void 0,!0);const i=[];n.approximateFractions(e,i);const o=a[1].length>=2?2:1;let r=[],l=[];i.forEach(function(c,u){const p=c.denominator.toString().length,g=Math.abs(e-c.numerator/c.denominator);if(void 0===r[p])return l[p]=u,void(r[p]=g);g<r[p]&&(l[p]=u,r[p]=g)});let s=l[o]?i[l[o]]:i[l[1]];return n.formatNumber(s.numerator,a[0],void 0,!0)+"/"+n.formatNumber(s.denominator,a[1],void 0,!0)}approximateFractions(e,t){const n=[0,1],a=[1,0],i=this.getMaxNumerator(e);let o,r=e,l=NaN;for(let s=2;s<1e3;s++){const c=Math.floor(r);if(n[s]=c*n[s-1]+n[s-2],Math.abs(n[s])>i||(a[s]=c*a[s-1]+a[s-2],o=n[s]/a[s],o===l)||(t.push({numerator:n[s],denominator:a[s]}),o===e))return;l=o,r=1/(r-c)}}getMaxNumerator(e){let t=null,n=e.toString().indexOf("E");-1===n&&(n=e.toString().indexOf("e")),t=-1===n?e.toString():e.toString().substring(0,n);let a=null;const i=t.toString().indexOf(".");-1===i?a=t:0===i?a=t.substring(1,t.length):i<t.length&&(a=t.substring(0,i)+t.substring(i+1,t.length));let o=a;const r=o.toString().length,l=e;let s=l.toString().length;0===l&&(s=0);const c=r-s;for(let u=c;u>0&&o%2==0;u--)o/=2;for(let u=c;u>0&&o%5==0;u--)o/=5;return o}exponentialToSuperscript(e){const t=e.indexOf("e"),n=e.slice(t+1).replace(/0{1,2}/,"");let a=e.slice(0,t+1);return a=a.replace("e","\xd710"),a+=this.toSuperscript(n),a=a.replace("+",""),a}toSuperscript(e,t){const n="-0123456789",a="\u207b\u2070\xb9\xb2\xb3\u2074\u2075\u2076\u2077\u2078\u2079";let i="";for(let o=0;o<e.length;o++)if(!0===t){const r=a.indexOf(e.charAt(o));i+=-1!==r?n[r]:e[o]}else{const r=n.indexOf(e.charAt(o));i+=-1!==r?a[r]:e[o]}return i}})},7997:()=>{Smart("smart-numeric-text-box",class extends Smart.BaseElement{static get properties(){return{decimalSeparator:{value:".",type:"string"},dropDownAppendTo:{value:null,type:"any"},enableMouseWheelAction:{value:!1,type:"boolean"},inputFormat:{value:"integer",allowedValues:["integer","floatingPoint","complex"],type:"string"},hint:{value:"",type:"string"},label:{value:"",type:"string"},leadingZeros:{value:!1,type:"boolean"},max:{value:null,type:"any"},messages:{value:{en:{binary:"BIN",octal:"OCT",decimal:"DEC",hexadecimal:"HEX",integerOnly:"smartNumericTextBox: The property {{property}} can only be set when inputFormat is integer.",noInteger:"smartNumericTextBox: the property {{property}} cannot be set when inputFormat is integer.",significantPrecisionDigits:"smartNumericTextBox: the properties significantDigits and precisionDigits cannot be set at the same time."}},type:"object",extend:!0},min:{value:null,type:"any"},name:{value:"",type:"string"},nullable:{value:!1,type:"boolean"},opened:{value:!1,type:"boolean"},outputFormatString:{value:null,type:"string?"},placeholder:{value:"",type:"string"},dropDownEnabled:{value:!1,type:"boolean"},precisionDigits:{value:null,type:"number?"},radix:{value:10,allowedValues:["2","8","10","16",2,8,10,16,"binary","octal","decimal","hexadecimal"],type:"any"},radixDisplay:{value:!1,type:"boolean"},radixDisplayPosition:{value:"left",allowedValues:["left","right"],type:"string"},scientificNotation:{value:!1,type:"boolean"},showDropDownValues:{value:!1,type:"boolean"},showUnit:{value:!1,type:"boolean"},significantDigits:{value:null,type:"number?"},spinButtons:{value:!1,type:"boolean"},spinButtonsDelay:{value:75,type:"number"},spinButtonsInitialDelay:{value:0,type:"number"},spinButtonsPosition:{value:"right",allowedValues:["left","right"],type:"string"},spinButtonsStep:{value:"1",type:"any"},type:{value:"numeric",type:"string",defaultReflectToAttribute:!0,readonly:!0},unit:{value:"kg",type:"string"},validation:{value:"strict",allowedValues:["strict","interaction"],type:"string"},value:{value:"0",type:"any?"},wordLength:{value:"int32",allowedValues:["int8","uint8","int16","uint16","int32","uint32","int64","uint64"],type:"string"}}}static get listeners(){return{mouseenter:"_mouseenterMouseleaveHandler",mouseleave:"_mouseenterMouseleaveHandler",resize:"_resizeHandler","downButton.click":"_downButtonClickHandler","downButton.mouseenter":"_mouseenterMouseleaveHandler","downButton.mouseleave":"_mouseenterMouseleaveHandler","dropDown.click":"_dropDownItemClickHandler","dropDown.mouseout":"_mouseenterMouseleaveHandler","dropDown.mouseover":"_mouseenterMouseleaveHandler","input.blur":"_inputBlurHandler","input.change":"_inputChangeHandler","input.focus":"_inputFocusHandler","input.keydown":"_inputKeydownHandler","input.keyup":"_inputKeyupHandler","input.paste":"_inputPasteHandler","input.wheel":"_inputWheelHandler","radixDisplayButton.click":"_radixDisplayButtonClickHandler","radixDisplayButton.mouseenter":"_mouseenterMouseleaveHandler","radixDisplayButton.mouseleave":"_mouseenterMouseleaveHandler","upButton.click":"_upButtonClickHandler","upButton.mouseenter":"_mouseenterMouseleaveHandler","upButton.mouseleave":"_mouseenterMouseleaveHandler","document.down":"_documentMousedownHandler","document.up":"_documentMouseupHandler"}}static get requires(){return window.NIComplex?{"Smart.Button":"smart.button.js","Smart.Utilities.BigNumber":"smart.math.js","Smart.Utilities.NumericProcessor":"smart.numeric.js"}:{"Smart.Button":"smart.button.js","Smart.Utilities.Complex":"smart.complex.js","Smart.Utilities.BigNumber":"smart.math.js","Smart.Utilities.NumericProcessor":"smart.numeric.js"}}static get styleUrls(){return["smart.button.css","smart.numerictextbox.css"]}template(){return'<div id="container" class="smart-container" role="presentation">\n                <span id="label" inner-h-t-m-l="[[label]]" class="smart-label"></span>\n                <div id="radixDisplayButton" class="smart-unselectable smart-input-addon smart-drop-down-button smart-numeric-text-box-component smart-numeric-text-box-radix-display" role="button" aria-haspopup="listbox"></div>\n                <input id="input" type="text" spellcheck="false" class="smart-input smart-numeric-text-box-component" placeholder="[[placeholder]]" readonly="[[readonly]]" disabled="[[disabled]]" name="[[name]]" aria-label="[[placeholder]]" />\n                <div id="unitDisplay" class="smart-unselectable smart-input-addon smart-drop-down-button smart-numeric-text-box-component smart-numeric-text-box-unit-display" role="presentation"></div>\n                <div id="spinButtonsContainer" class="smart-input-addon smart-numeric-text-box-component smart-spin-buttons-container" role="presentation">\n                    <smart-repeat-button initial-delay="[[spinButtonsInitialDelay]]" delay="[[spinButtonsDelay]]" animation="[[animation]]" unfocusable id="upButton" class="smart-spin-button" aria-label="Increment" right-to-left="[[rightToLeft]]">\n                        <div class="smart-arrow smart-arrow-up" role="presentation" aria-hidden="true"></div>\n                    </smart-repeat-button>\n                    <smart-repeat-button initial-delay="[[spinButtonsInitialDelay]]" delay="[[spinButtonsDelay]]" animation="[[animation]]" unfocusable id="downButton" class="smart-spin-button" aria-label="Decrement" right-to-left="[[rightToLeft]]">\n                        <div class="smart-arrow smart-arrow-down" role="presentation" aria-hidden="true"></div>\n                    </smart-repeat-button>\n                </div>\n                <ul id="dropDown" class="smart-visibility-hidden smart-drop-down smart-numeric-text-box-drop-down" role="listbox">\n                    <li id="dropDownItem2" class="smart-list-item" data-value="2" role="option"></li>\n                    <li id="dropDownItem8" class="smart-list-item" data-value="8" role="option"></li>\n                    <li id="dropDownItem10" class="smart-list-item" data-value="10" role="option"></li>\n                    <li id="dropDownItem16" class="smart-list-item" data-value="16" role="option"></li>\n                </ul>\n                <span id="hint" class="smart-hint smart-hidden" inner-h-t-m-l="[[hint]]"></span>\n            </div>'}attached(){const e=this;super.attached(),e.isCompleted&&(e._positionDetection.dropDownAttached(),e._positionDetection.checkBrowserBounds())}detached(){const e=this;super.detached(),e.opened&&e._closeRadix(!0),e._positionDetection&&e._positionDetection.dropDownDetached()}ready(){super.ready()}render(){const e=this;e._numericProcessor=new Smart.Utilities.NumericProcessor(e,"inputFormat"),e._numberRenderer=new Smart.Utilities.NumberRenderer,e._numberRenderer.localizationObject.decimalseparator=e.decimalSeparator,e._positionDetection=new Smart.Utilities.PositionDetection(e,e.$.dropDown,e.$.container,"_closeRadix"),e._positionDetection.getDropDownParent(!0),e._dropDownListPosition="bottom",e.rightToLeft&&(e.spinButtonsPosition="right"===e.spinButtonsPosition?"left":"right"),e._setIds(),e.setAttribute("aria-describedby",e.$.unitDisplay.id+" "+e.$.hint.id),e.getAttribute("aria-labelledby")||e.setAttribute("aria-labelledby",e.$.label.id),e.$.radixDisplayButton.setAttribute("aria-owns",e.$.dropDown.id),e.rightToLeft&&null!==e.dropDownAppendTo&&e.$.dropDown.setAttribute("right-to-left",""),e._radixPrefixes={10:"d",2:"b",8:"o",16:"x"},e._regex={2:new RegExp(/^[0-1]+$/),8:new RegExp(/^[0-7]+$/),10:new RegExp(/^[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?$/),16:new RegExp(/^[0-9a-f]+$/i)},e._regexSpecial={nan:new RegExp(/^(nan)$/i),inf:new RegExp(/^((-?inf(inity)?)|([+\-]?\u221e))$/i),nonNumericValue:new RegExp(/^$|(^((nan)|((-?inf(inity)?)|([+\-]?\u221e))|(null))$)/i),exaValue:new RegExp(/^[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[E])([+\-]\d*)?i$/)},e._initialDropDownOptionsSet=!1,"left"===e.spinButtonsPosition&&e.$.container.insertBefore(e.$.spinButtonsContainer,e.$.label.nextElementSibling),"right"===e.radixDisplayPosition&&e.$.container.insertBefore(e.$.radixDisplayButton,e.$.unitDisplay.nextElementSibling),e._setInitialComponentDisplay(),e._initialAdjustments(),e._refreshShape(),e._initialized=!0,super.render()}_setIds(){const e=this;e.$.label.id||(e.$.label.id=e.id+"Label"),e.$.radixDisplayButton.id||(e.$.radixDisplayButton.id=e.id+"RadixDisplayButton"),e.$.unitDisplay.id||(e.$.unitDisplay.id=e.id+"UnitDisplay"),e.$.dropDown.id||(e.$.dropDown.id=e.id+"DropDown"),e.$.hint.id||(e.$.hint.id=e.id+"Hint")}_refreshShape(){const e=this.$.container.querySelectorAll(".smart-numeric-text-box-component:not(.smart-hidden)");Array.from(this.$.container.getElementsByClassName("smart-numeric-text-box-component")).forEach(t=>t.classList.remove("smart-numeric-text-box-component-border-left","smart-numeric-text-box-component-border-right")),e.length>0&&(e[0].classList.add("smart-numeric-text-box-component-border-left"),e[e.length-1].classList.add("smart-numeric-text-box-component-border-right"))}val(e,t){const n=this,a=null!==e&&"object"==typeof e&&0===Object.keys(e).length;if(void 0===e||!1!==a)return n.value;{const i=n.value;if((""===e||null===e)&&null===i)return null;if(null===e)return n._triggerChangeEvent="strict"===n.validation,n._validate(!1,null),n._triggerChangeEvent=!1,void(n._programmaticValueIsSet=!0);if((e=e.toString()).toUpperCase()===i.toString().toUpperCase())return e;void 0===t?(n._triggerChangeEvent="strict"===n.validation,n._validate(!1,e),n._triggerChangeEvent=!1):n._setValue(e),n._programmaticValueIsSet=!0}}focus(){this.$.input.focus()}_updateSpinButtonsStepObject(){const e=this;e._spinButtonsStepObject=e._numericProcessor.createDescriptor(e.spinButtonsStep,!0)}_setInitialComponentDisplay(){const e=this;!1===e.spinButtons&&e.$spinButtonsContainer.addClass("smart-hidden"),!1===e.radixDisplay&&e.$radixDisplayButton.addClass("smart-hidden"),!1===e.showUnit&&e.$unitDisplay.addClass("smart-hidden")}_initialAdjustments(){const e=this;e._radixNumber=e._getRadix(e.radix),e._wordLengthNumber=e._numericProcessor.getWordLength(e.wordLength),e._validatePropertyCompatibility(),e._numericProcessor.validateMinMax(!0,!0),e._updateSpinButtonsStepObject(),e._validate(!0),e._programmaticValueIsSet=!0,e._cachedInputValue=e.$.input.value,void 0===e._editableValue&&(e._editableValue=e._cachedInputValue),e.$.radixDisplayButton.innerHTML=e._radixPrefixes[e._radixNumber],e.$.unitDisplay.innerHTML=e.unit,e.disabled&&(e.$.upButton.disabled=!0,e.$.downButton.disabled=!0),e.opened&&(e.dropDownEnabled&&!e.disabled&&null!==e.value?e._openRadix():e.opened=!1),e.$.radixDisplayButton.setAttribute("aria-expanded",e.opened),e._setFocusable()}_validatePropertyCompatibility(){const e=this;"integer"!==e.inputFormat?(10!==e._radixNumber&&e.error(e.localize("integerOnly",{property:"radix"})),e.radixDisplay&&e.error(e.localize("integerOnly",{property:"radixDisplay"})),e.dropDownEnabled&&e.error(e.localize("integerOnly",{property:"dropDownEnabled"})),"int32"!==e.wordLength&&e.error(e.localize("integerOnly",{property:"wordLength"}))):null!==e.precisionDigits&&e.error(e.localize("noInteger",{property:"precisionDigits"})),null===e.significantDigits&&null===e.precisionDigits?e.significantDigits=8:null!==e.significantDigits&&null!==e.precisionDigits&&e.error(e.localize("significantPrecisionDigits"))}_validate(e,t){const n=this;let a;if(e)a=n.value,void 0===a&&(a=n.nullable?null:"0");else if(void 0===t||null===t&&!n.nullable){if(a=n.$.input.value,a===n.value&&!0!==n._programmaticValueIsSet)return void(n.$.input.value=n._cachedInputValue)}else a=t;if(n.nullable&&(null===a||""===a))return n.value=null,n._number=null,n.$.input.value="",n._cachedInputValue="",n._editableValue="",void n._disableComponents();const i=n._numericProcessor.prepareForValidation(e,t,a);if(void 0===i)return void n._disableComponents();const o=n._numericProcessor.createDescriptor(i.value,!0,!0,!e&&void 0===t||"strict"===n.validation,e||void 0!==t,i.enteredComplexNumber);if(e){n._number=o;let r=n._renderValue(o);n.value=o.toString(),n.$.input.value=r}else n._updateValue(o);n._programmaticValueIsSet=!1,n._disableComponents()}_handleNonNumericValue(e,t,n){const a=this;if("integer"!==a.inputFormat){if(a._regexSpecial.nan.test(n))return void a._handleNaN(e);if(a._regexSpecial.inf.test(n))return void a._handleInfinity(e,t,n)}if(e){let i=a._numericProcessor.createDescriptor(0);a._number=a._validateRange(i);const o=a._renderValue(a._number);a.value=a._number.toString(),a.$.input.value=o}else if(void 0===t)a.$.input.value=a._cachedInputValue;else{const i=a._number.toString();a.value!==i&&(a.value=i)}}_handleNaN(e){const t=this;if(t.$.input.value="NaN",e)t.value=NaN,t._number=NaN;else{const n=t.value;null!==n&&"NaN"===n.toString()||(t.value=NaN,t._number=NaN,t._cachedInputValue="NaN",t._editableValue="NaN",t._triggerChangeEvent&&t.$.fireEvent("change",{value:NaN,oldValue:n,radix:t._radixNumber}))}}_handleInfinity(e,t,n){const a=this;let i,o;if("-"===n.charAt(0)?(i="\u221e"===n.charAt(1)?"-\u221e":"-Inf",o=-1/0):(i=-1!==n.indexOf("\u221e")?"\u221e":"Inf",o=1/0),o===-1/0&&a.min===-1/0||o===1/0&&a.max===1/0||void 0!==t)if(e)a.value=o,a._number=o,a.$.input.value=i;else{const r=a.value;n!==i&&(a.$.input.value=i),r!==o&&(a.value=o,a._number=o,a._cachedInputValue=i,a._editableValue=i,a._triggerChangeEvent&&a.$.fireEvent("change",{value:o,oldValue:r,radix:a._radixNumber}))}else a._validate(!1,o===-1/0?a.min:a.max)}_validateRange(e){const t=this;return t._numericProcessor.validate(e,t._minObject,t._maxObject)}propertyChangedHandler(e,t,n){super.propertyChangedHandler(e,t,n);const a=this,i=a.$.input;function o(){!0===a._initialDropDownOptionsSet&&a._setDropDownOptions(!0),2!==a._radixNumber&&16!==a._radixNumber||(a._cachedInputValue=a._number.toString(a._radixNumber,a._wordLengthNumber,a.leadingZeros),a._editableValue=a._cachedInputValue,a.$.input.value=a._cachedInputValue)}if(n!=t)switch(e){case"disabled":a._setFocusable(),!0===n?(a.$.upButton.disabled=!0,a.$.downButton.disabled=!0):a._disableComponents();break;case"dropDownAppendTo":a._positionDetection.dropDownAppendToChangedHandler(),a.$.dropDown.removeAttribute("right-to-left"),a.rightToLeft&&null!==n&&a.$.dropDown.setAttribute("right-to-left","");break;case"unfocusable":a._setFocusable();break;case"enableMouseWheelAction":case"placeholder":case"readonly":case"spinButtonsDelay":case"spinButtonsInitialDelay":break;case"value":{if(""===n&&null===t)return;if(null===n||""===n||null===t)return a.value=t,a._triggerChangeEvent="strict"===a.validation,a._validate(!1,n),a._triggerChangeEvent=!1,void(a._programmaticValueIsSet=!0);const r=n.toString(),l=t.toString();l!==r&&(l.toUpperCase()===r.toUpperCase()&&(a.value=t),a._triggerChangeEvent="strict"===a.validation,a._validate(!1,r),a._triggerChangeEvent=!1,a._programmaticValueIsSet=!0);break}case"radix":"integer"===a.inputFormat?a._changeRadix(n):a.error(a.localize("integerOnly",{property:"radix"}));break;case"rightToLeft":null!==a.dropDownAppendTo&&(n?a.$.dropDown.setAttribute("right-to-left",""):a.$.dropDown.removeAttribute("right-to-left")),a.spinButtonsPosition=a.rightToLeft?"left":"right",a.$.container.insertBefore(a.$.spinButtonsContainer,"left"===a.spinButtonsPosition?a.$.label.nextElementSibling:a.$.dropDown),a._refreshShape();break;case"leadingZeros":"integer"===a.inputFormat&&null!==a._number&&o();break;case"min":case"max":if(null!==n&&(a[`_${e}IsNull`]=!1),a._numericProcessor.validateMinMax("min"===e,"max"===e),"strict"===a.validation)a._triggerChangeEvent=!0,a._validate(!1,a.value),a._triggerChangeEvent=!1;else if(!1===a._regexSpecial.nonNumericValue.test(a.value)){const r=a._numericProcessor.createDescriptor(a._number),l=a._validateRange(r);!0===a._numericProcessor.compare(a.value,l)&&(a._programmaticValueIsSet=!0)}break;case"opened":n?a.dropDownEnabled&&!a.disabled&&null!==a.value?a._openRadix():(a.opened=!1,a.$.radixDisplayButton.setAttribute("aria-expanded",!1)):a._closeRadix(!1,!0);break;case"outputFormatString":n?(a._cachedInputValue=a._numberRenderer.formatNumber(a._number,n),a.$.input.value=a._cachedInputValue):(a._cachedInputValue=a._editableValue,a.$.input.value=a._editableValue);break;case"dropDownEnabled":n?("integer"!==a.inputFormat&&a.error(a.localize("integerOnly",{property:"dropDownEnabled"})),!0===a._initialDropDownOptionsSet&&a._setDropDownOptions(!0)):a.opened&&a._closeRadix(!0);break;case"spinButtons":n?a.$spinButtonsContainer.removeClass("smart-hidden"):a.$spinButtonsContainer.addClass("smart-hidden"),a._refreshShape();break;case"spinButtonsStep":a._updateSpinButtonsStepObject();break;case"significantDigits":case"precisionDigits":if("precisionDigits"===e&&"integer"===a.inputFormat&&a.error(a.localize("noInteger",{property:e})),"significantDigits"===e&&null!==a.precisionDigits?a.precisionDigits=null:"precisionDigits"===e&&null!==a.significantDigits&&(a.significantDigits=null),!1===a._regexSpecial.nonNumericValue.test(a.value)){const r=a._renderValue(a._number);i.value=r}break;case"decimalSeparator":{a._numberRenderer.localizationObject.decimalseparator=a.decimalSeparator;const r=a._discardDecimalSeparator(i.value,t),l=a._applyDecimalSeparator(r),s=a._applyDecimalSeparator(a._discardDecimalSeparator(a._editableValue,t));i.value=l,a._editableValue=s;break}case"spinButtonsPosition":a.$.container.insertBefore(a.$.spinButtonsContainer,"left"===n?a.$.label.nextElementSibling:a.$.dropDown),a._refreshShape();break;case"wordLength":if(a._wordLengthNumber=a._numericProcessor.getWordLength(n),"integer"===a.inputFormat&&(a._numericProcessor.validateMinMax(!0,!0),null!==a._number)){let r=a._validateRange(new Smart.Utilities.BigNumber(a._number));a._updateValue(r),a.leadingZeros&&o()}break;case"radixDisplay":n?("integer"!==a.inputFormat&&a.error(a.localize("integerOnly",{property:"radixDisplay"})),a.$radixDisplayButton.removeClass("smart-hidden")):a.$radixDisplayButton.addClass("smart-hidden"),a._refreshShape();break;case"radixDisplayPosition":a.$.container.insertBefore(a.$.radixDisplayButton,"left"===n?a.$.input:a.$.unitDisplay.nextElementSibling),a._refreshShape();break;case"inputFormat":a._changeInputFormat(t,n);break;case"showUnit":n?a.$unitDisplay.removeClass("smart-hidden"):a.$unitDisplay.addClass("smart-hidden"),a._refreshShape();break;case"unit":a.$.unitDisplay.innerHTML=n;break;case"scientificNotation":if(!1===a._regexSpecial.nonNumericValue.test(a.value)){const r=a._renderValue(a._number);i.value=r}break;case"locale":case"messages":case"showDropDownValues":a.opened?a._setDropDownOptions():a._initialDropDownOptionsSet=!1;break;case"nullable":!0===t&&null===a.value&&a._validate(!1,"0");break;case"validation":"strict"===n&&(a._triggerChangeEvent=!0,a._validate(!1,a.value),a._triggerChangeEvent=!1)}else"string"!=typeof n&&"string"==typeof t&&(a[e]=t);a._cachedInputValue=i.value}_changeInputFormat(e,t){const n=this;n._numericProcessor=new Smart.Utilities.NumericProcessor(n,"inputFormat"),"complex"!==e?("integer"===t&&"floatingPoint"===e&&n._changeFromFloatingPointToIntegerInputFormat(),"floatingPoint"===t&&"integer"===e&&n._changeFromIntegerToFloatingPointInputFormat(),"complex"===t&&n._changeToComplexInputFormat(e),n._updateSpinButtonsStepObject(),null!==n.value&&(n._inputFormatChangedFlag=!0,n._validate(void 0,n._number.toString()),n._inputFormatChangedFlag=!1)):n._changeFromComplexInputFormat(t)}_changeFromComplexInputFormat(e){const t=this;if(t.spinButtonsStep=t._spinButtonsStepObject.realPart,t._updateSpinButtonsStepObject(),"integer"===e?(t.min=t.min===-1/0?null:t._minObject.realPart,t.max=t.max===1/0?null:t._maxObject.realPart):(t.min!==-1/0&&(t.min=t._minObject.realPart),t.max!==1/0&&(t.max=t._maxObject.realPart)),t._numericProcessor.validateMinMax(!0,!0),null!==t.value){const n=t._number;t._inputFormatChangedFlag=!0,t._validate(void 0,(void 0!==n.realPart?n.realPart:n).toString()),t._inputFormatChangedFlag=!1}}_changeFromFloatingPointToIntegerInputFormat(){const e=this;e.min===-1/0&&(e.min=null),e.max===1/0&&(e.max=null),e._numericProcessor.validateMinMax(!0,!0)}_changeFromIntegerToFloatingPointInputFormat(){const e=this;e.radixDisplay&&(e.radixDisplay=!1,e.$radixDisplayButton.addClass("smart-hidden")),10!==e._radixNumber&&(e.radix=10,e._radixNumber=10),e._minIsNull?(e.min=-1/0,e._minObject=-1/0):e._minObject=parseFloat(e._minObject.toString()),e._maxIsNull?(e.max=1/0,e._maxObject=1/0):e._maxObject=parseFloat(e._maxObject.toString()),e.dropDownEnabled&&(e.dropDownEnabled=!1)}_changeToComplexInputFormat(e){const t=this;"integer"===e&&(t.radixDisplay&&(t.radixDisplay=!1,t.$radixDisplayButton.addClass("smart-hidden")),t._minIsNull&&(t.min=null),t._maxIsNull&&(t.max=null),t.dropDownEnabled&&(t.dropDownEnabled=!1)),t._numericProcessor.validateMinMax(t.min!==-1/0,t.max!==1/0)}_updateValue(e){const t=this,n=t.$.input.value,a=e.toString(t._radixNumber,t._wordLengthNumber,t.leadingZeros),i=t._renderValue(e),o=t.value,r=t._regexSpecial.nonNumericValue.test(a);if(n===a&&n===t._cachedInputValue||(t.$.input.value=i,t._cachedInputValue=i),t._inputFormatChangedFlag||r&&i!==o||!1===r&&t._numericProcessor.compare(e,t._number)){t._number=t._numericProcessor.createDescriptor(e);const l=t._number.toString();t.value=l,t._setDropDownOptions(!0),t._triggerChangeEvent&&t.$.fireEvent("change",{value:l,oldValue:o,radix:t._radixNumber})}else t.value=t._number.toString()}_setValue(e){const t=this;t.value=e,t.$.input.value=e,t._number=t._numericProcessor.createDescriptor(e,!0),t._setDropDownOptions(!0)}_changeRadix(e){const t=this,n=t._getRadix(e),a=t.radix;if(n===t._radixNumber)return;t.radix=e,t._radixNumber=n;const i=t.$.input,o=i.value;let r,l;null!==t.value?(r=t._number.toString(n,t._wordLengthNumber,t.leadingZeros),l=t._renderValue(r)):l="",i.value=l,t._cachedInputValue=l,t.$.radixDisplayButton.innerHTML=t._radixPrefixes[n],t.$.fireEvent("radixChange",{radix:e,oldRadix:a,displayedValue:l,oldDisplayedValue:o})}_openRadix(){const e=this;if(e.$.fireEvent("opening").defaultPrevented)return void(e.opened=!1);!1===e._initialDropDownOptionsSet&&(e._setDropDownOptions(),e._initialDropDownOptionsSet=!0),null!==e._dropDownParent&&(e.$.dropDown.style.width=e.offsetWidth+"px"),e.$radixDisplayButton.addClass("smart-numeric-text-box-pressed-component"),e.$dropDown.removeClass("smart-visibility-hidden"),e.$.dropDown.style.marginTop=null,e.opened=!0,e._positionDetection.positionDropDown();const t=(1===window.devicePixelRatio?document.documentElement.clientHeight:window.innerHeight)-e.$.dropDown.getBoundingClientRect().top-e.$.dropDown.offsetHeight-parseFloat(getComputedStyle(e.$.dropDown).marginBottom);t<0&&(e.$.dropDown.style.marginTop=t+"px"),e.$.fireEvent("open",{dropDown:e.$.dropDown}),e.$.radixDisplayButton.setAttribute("aria-expanded",!0)}_closeRadix(e,t){const n=this;(n.opened||t)&&(!n.$.fireEvent("closing").defaultPrevented||e?(n.$radixDisplayButton.removeClass("smart-numeric-text-box-pressed-component"),n.$dropDown.addClass("smart-visibility-hidden"),n.opened=!1,n.$.fireEvent("close",{dropDown:n.$.dropDown}),n.$.radixDisplayButton.setAttribute("aria-expanded",!1)):n.opened=!0)}_isLeftButtonPressed(e){return 1===e.detail.buttons||0===e.buttons||1===e.which}_isIncrementOrDecrementAllowed(){const e=this;return!e.disabled&&!e.readonly&&!1===e._regexSpecial.nonNumericValue.test(e.$.input.value)}_upButtonClickHandler(e){const t=this;t._isLeftButtonPressed(e)&&t._isIncrementOrDecrementAllowed()&&(t._up||t.$upButton.addClass("smart-numeric-text-box-pressed-component"),t._incrementOrDecrement("add"))}_downButtonClickHandler(e){const t=this;t._isLeftButtonPressed(e)&&t._isIncrementOrDecrementAllowed()&&(t._up||t.$downButton.addClass("smart-numeric-text-box-pressed-component"),t._incrementOrDecrement("subtract"))}_documentMousedownHandler(e){const t=this;if(t._up=!1,!t.opened)return;let n=e.originalEvent.target;(t.shadowRoot||t.isInShadowDOM)&&(n=e.originalEvent.composedPath()[0]),(t.shadowRoot||t).contains(n)||t.$.dropDown.contains(n)||t._closeRadix()}_documentMouseupHandler(){const e=this;e._up=!0,e.$upButton.removeClass("smart-numeric-text-box-pressed-component"),e.$downButton.removeClass("smart-numeric-text-box-pressed-component")}_radixDisplayButtonClickHandler(){const e=this;e.dropDownEnabled&&!e.disabled&&null!==e.value&&(e.opened?e._closeRadix():e._openRadix())}_dropDownItemClickHandler(e){if(e.target.$.hasClass("smart-list-item")){const t=this;let n=e.target.getAttribute("data-value");t._changeRadix(parseInt(n,10)),t._closeRadix()}}_mouseenterMouseleaveHandler(e){const t=this;e.target===t.$.dropDown||t.disabled||t.readonly||("mouseenter"===e.type?e.target.setAttribute("hover",""):e.target.removeAttribute("hover"))}_inputKeydownHandler(e){const t=this,n=e.charCode?e.charCode:e.which;40===n&&t._isIncrementOrDecrementAllowed()?t._incrementOrDecrement("subtract"):38===n&&t._isIncrementOrDecrementAllowed()&&t._incrementOrDecrement("add"),t._keydownInfo={value:t.$.input.value,specialKey:e.altKey||e.ctrlKey||e.shiftKey}}_inputKeyupHandler(e){const t=this;if(13===e.keyCode)t._suppressBlurEvent=!0,t.$.input.value!==t._cachedInputValue&&(t._triggerChangeEvent=!0,t._validate(),t._triggerChangeEvent=!1,t.$.input.blur());else if(27===e.keyCode)t.$.input.value=t._editableValue;else{const n=t.$.input.value;""!==n&&t._regex[t._radixNumber].test(n)?(t.$.upButton.disabled=!1,t.$.downButton.disabled=!1):""===n&&(t.$.upButton.disabled=!0,t.$.downButton.disabled=!0),!t._keydownInfo||t._keydownInfo.value===n||t._keydownInfo.specialKey||e.altKey||e.ctrlKey||e.shiftKey||"Control"===e.key||t.$.fireEvent("changing",{currentValue:n,validValue:t.value,radix:t._radixNumber})}e.preventDefault()}_inputBlurHandler(){const e=this;!0===e._suppressBlurEvent?(e._suppressBlurEvent=!1,e._formattedValue&&(e._cachedInputValue=e._formattedValue,e.$.input.value=e._formattedValue,delete e._formattedValue)):e.$.input.value!==e._editableValue?(e._triggerChangeEvent=!0,e._validate(),e._triggerChangeEvent=!1):e.$.input.value=e._cachedInputValue,e.radixDisplay&&e.$.radixDisplayButton.removeAttribute("focus"),e.opened&&e._closeRadix(),e.spinButtons&&e.$.spinButtonsContainer.removeAttribute("focus"),e.showUnit&&e.$.unitDisplay.removeAttribute("focus"),e.removeAttribute("focus"),e.$.fireEvent("blur")}_inputFocusHandler(){const e=this;e.spinButtons&&e.$.spinButtonsContainer.setAttribute("focus",""),e.radixDisplay&&e.$.radixDisplayButton.setAttribute("focus",""),e.showUnit&&e.$.unitDisplay.setAttribute("focus",""),e.opened&&e._closeRadix(),e.setAttribute("focus",""),e.outputFormatString&&(e.$.input.value=e._editableValue),e.$.fireEvent("focus")}_inputChangeHandler(e){e.stopPropagation(),e.preventDefault()}_inputPasteHandler(){const e=this;requestAnimationFrame(()=>e.$.fireEvent("changing",{currentValue:e.$.input.value,validValue:e.value,radix:e._radixNumber}))}_inputWheelHandler(e){const t=this,n=t.shadowRoot&&t.shadowRoot.activeElement||document.activeElement;t.$.input===n&&t.enableMouseWheelAction&&t._isIncrementOrDecrementAllowed()&&(e.stopPropagation(),e.preventDefault(),t._incrementOrDecrement(e.wheelDelta>0?"add":"subtract"))}_getRadix(e){switch(e.toString()){case"10":case"decimal":return 10;case"2":case"binary":return 2;case"8":case"octal":return 8;case"16":case"hexadecimal":return 16}}_setDropDownOptions(e){const t=this;if(!1===t.dropDownEnabled||null===t._number)return;if(!t.showDropDownValues)return e?void 0:(t.$.dropDownItem2.innerHTML=t.localize("binary"),t.$.dropDownItem8.innerHTML=t.localize("octal"),t.$.dropDownItem10.innerHTML=t.localize("decimal"),void(t.$.dropDownItem16.innerHTML=t.localize("hexadecimal")));const n=t._wordLengthNumber,a=t.leadingZeros;t.$.dropDownItem2.innerHTML=`${t._number.toString(2,n,a)} (${t.localize("binary")})`,t.$.dropDownItem8.innerHTML=`${t._number.toString(8,n)} (${t.localize("octal")})`,t.$.dropDownItem10.innerHTML=`${t._renderValue(t._number.toString(10,n),!0)} (${t.localize("decimal")})`,t.$.dropDownItem16.innerHTML=`${t._number.toString(16,n,a)} (${t.localize("hexadecimal")})`}_incrementOrDecrement(e){const t=this,n=t.shadowRoot&&t.shadowRoot.activeElement||document.activeElement;let a=t._cachedInputValue;if(t.$.input===n&&(a=t._editableValue,t._suppressBlurEvent=!0),(t.$.input.value!==a||t._programmaticValueIsSet&&"interaction"===t.validation)&&(t._triggerChangeEvent=!0,t._validate(),t._triggerChangeEvent=!1,!1===t._isIncrementOrDecrementAllowed()))return;const i=t._numericProcessor.incrementDecrement(t._number,e,t._spinButtonsStepObject),o=t._validateRange(i);t._triggerChangeEvent=!0,t._updateValue(o),t._triggerChangeEvent=!1}_toBigNumberDecimal(e,t){const n=this;let a;return 10===t?a=new Smart.Utilities.BigNumber(e):n._unsigned||!1===n._isNegative(e,t)?n._wordLengthNumber<64?(a=parseInt(e,t),a=new Smart.Utilities.BigNumber(a)):a=n._getBigNumberFrom64BitBinOctHex(e,t):(a=n._getNegativeDecimal(e,t),a=new Smart.Utilities.BigNumber(a)),a}_isNegative(e,t){const n=this,a=e.length,i=e.charAt(0).toLowerCase();if(2===t)return a===n._wordLengthNumber&&"1"===i;if(8!==t)return a===n._wordLengthNumber/4&&-1!==["8","9","a","b","c","d","e","f"].indexOf(i);switch(n._wordLengthNumber){case 8:return 3===a&&("2"===i||"3"===i);case 16:return 5===a&&"1"===i;case 32:return 11===a&&("2"===i||"3"===i);case 64:return 22===a&&"1"===i}}_getBigNumberFrom64BitBinOctHex(e,t){let n=new Smart.Utilities.BigNumber(0);for(let a=e.length-1;a>=0;a--){let i=new Smart.Utilities.BigNumber(parseInt(e.charAt(a),t));n=n.add(i.multiply(new Smart.Utilities.BigNumber(t).pow(e.length-1-a)))}return n}_getNegativeDecimal(e,t){let a=e;if(8===t){let o=[];for(let r=0;r<e.length;r++){let l=parseInt(e.charAt(r),8).toString(2);for(;3!==l.length;)l=`0${l}`;o.push(l)}for(a=o.join("");"0"===a.charAt(0);)a=a.slice(1)}else if(16===t){let o=[];for(let r=0;r<e.length;r++){let l=parseInt(e.charAt(r),16).toString(2);for(;4!==l.length;)l=`0${l}`;o.push(l)}a=o.join("")}let i=a.replace(/0/g,"a");return i=i.replace(/1/g,"b"),i=i.replace(/a/g,"1"),i=i.replace(/b/g,"0"),this._wordLengthNumber<64?i=-1*(parseInt(i,2)+1):(i=this._getBigNumberFrom64BitBinOctHex(i,t),i=i.add(1).negate()),i}_discardDecimalSeparator(e,t){if(void 0===t&&(t=this.decimalSeparator),"."!==t&&e!==1/0&&e!==-1/0){let n=new RegExp(t,"g");return e.replace(n,".")}return e}_applyDecimalSeparator(e){return"string"!=typeof e&&(e=e.toString()),"."!==this.decimalSeparator&&(e=e.replace(/\./g,this.decimalSeparator)),e}_renderValue(e,t){const n=this,a=e,i=10===n._radixNumber||!0===t;if(e=n._numericProcessor.render(e,i),"."!==n.decimalSeparator&&i&&(e=n._applyDecimalSeparator(e)),!0!==t&&(n._editableValue=e,n.outputFormatString&&10===n._radixNumber)){const o=(n.shadowRoot||n.getRootNode()).activeElement||document.activeElement,r=n._numberRenderer.formatNumber(a,n.outputFormatString);if(o!==n.$.input)return r;n._formattedValue=r}return e}_setFocusable(){const e=this;e.disabled||e.unfocusable?e.$.input.tabIndex=-1:e.$.input.removeAttribute("tabindex")}_disableComponents(){const e=this;if(e.disabled)return;const t=e.value;null===t||"NaN"===t.toString()||Math.abs(t)===1/0?(e.$.upButton.disabled=!0,e.$.downButton.disabled=!0):(e.$.upButton.disabled=!1,e.$.downButton.disabled=!1)}_resizeHandler(){this.refresh()}refresh(){this.opened&&this._closeRadix(!0)}})},9362:()=>{Smart("smart-pager",class extends Smart.BaseElement{static get properties(){return{autoEllipsis:{value:"none",type:"string",allowedValues:["none","before","after","both"]},messages:{value:{en:{firstButton:"First",lastButton:"Last",previousButton:"Previous",nextButton:"Next",navigateToLabel:"Go to:",pageSizeLabel:"Show:",navigateToInputPlaceholder:"",ellipsis:"...",summaryString:"of",summaryPrefix:"of",summarySuffix:""}},type:"object",extend:!0},navigationButtonsPosition:{value:"both",allowedValues:["near","far","both"],type:"string"},navigationInputPosition:{value:"far",allowedValues:["near","far"],type:"string"},pageIndex:{value:0,type:"number"},pageIndexSelectors:{value:0,type:"any"},pagesCount:{value:100,type:"number?"},pageSize:{value:10,type:"number"},pageSizeSelectorPosition:{value:"far",allowedValues:["near","far"],type:"string"},pageSizeSelectorDataSource:{value:[10,25,50],type:"array"},showPrevNextNavigationButtons:{value:!1,type:"boolean"},showFirstLastNavigationButtons:{value:!1,type:"boolean"},showNavigationButtonLabels:{value:!1,type:"boolean"},showNavigationInput:{value:!1,type:"boolean"},showSummary:{value:!1,type:"boolean"},showPageSizeSelector:{value:!1,type:"boolean"},showPageIndexSelectors:{value:!1,type:"boolean"},summaryPosition:{value:"far",allowedValues:["near","far"],type:"string"},totalRecords:{value:null,type:"int?"}}}static get listeners(){return{click:"_navigationButtonsClickHandler","nextEllipsisButton.click":"_nextEllipsisButtonClickHandler","previousEllipsisButton.click":"_previousEllipsisButtonClickHandler",down:"_navigationButtonsDownHandler","navigateToInput.change":"_navigateToInputChangeHandler","nextButton.pointerenter":"_updateInBoundsFlag","nextButton.pointerleave":"_updateInBoundsFlag","pageIndexSelectorsContainer.click":"_pageIndexSelectorsContainerClickHandler","pageSizeSelector.change":"_pageSizeSelectorChangeHandler","previousButton.pointerenter":"_updateInBoundsFlag","previousButton.pointerleave":"_updateInBoundsFlag",keydown:"_keyDownHandler",resize:"_resizeHandler","document.up":"_stopRepeat"}}static get requires(){return{"Smart.DropDownList":"smart.dropdownlist.js"}}static get styleUrls(){return["smart.dropdown.css","smart.dropdownlist.css","smart.pager.css"]}template(){return'<div id="container" role="presentation">\n                    <div id="nearButtonsContainer" class="smart-pager-near-buttons-container" role="presentation">\n                        <div id="firstButton" class="smart-first-button smart-pager-button smart-unselectable" role="button" aria-label="First"></div>\n                        <div id="previousButton" class="smart-previous-page-button smart-pager-button smart-unselectable" role="button" aria-label="Previous"></div>\n                    </div>\n                    <div id="middleButtonsContainer" class="smart-pager-middle-buttons-container" role="presentation">\n                        <span id="previousEllipsisButton" class="smart-previous-ellipsis-button smart-pager-page-index-selector" role="button" aria-label="Previous group of pages"></span>\n                        <div id="pageIndexSelectorsContainer" tabindex="0" class="smart-pager-page-index-selectors-container" role="list"></div>\n                        <span id="nextEllipsisButton" class="smart-next-ellipsis-button smart-pager-page-index-selector" role="button" aria-label="Next group of pages"</span>\n                    </div>\n                    <div id="farButtonsContainer" class="smart-pager-far-buttons-container" role="presentation">\n                        <div id="nextButton" class="smart-next-page-button smart-pager-button smart-unselectable" role="button" aria-label="Next"></div>\n                        <div id="lastButton" class="smart-last-button smart-pager-button smart-unselectable" role="button" aria-label="Last"></div>\n                    </div>\n                    <div id="pagerInputAndLabelContainer" class="smart-pager-input-and-label-container" role="presentation">\n                        <span id="navigateToLabel" class="smart-pager-label"></span>\n                        <input type="text" id="navigateToInput" class="smart-pager-input smart-input" />\n                    </div>\n                    <div id="pagerSizeSelectorAndLabelContainer" class="smart-pager-size-selector-and-label-container">\n                        <span id="pageSizeLabel" class="smart-pager-label"></span>\n                        <smart-input id="pageSizeSelector" class="smart-page-size-selector"\n                                animation="[[animation]]"\n                                data-source="[[pageSizeSelectorDataSource]]"\n                                right-to-left="[[rightToLeft]]"\n                                drop-down-height="auto"\n                                drop-down-width="auto"\n                                drop-down-button-position="right"\n                                readonly\n                                selected-index="0"\n                                disabled="[[disabled]]"\n                                unfocusable="[[unfocusable]]">\n                        </smart-input>\n                    </div>\n                    <span id="pagerSummaryContainer" class="smart-pager-summary-container smart-pager-label"></span>\n                </div>'}ready(){super.ready()}render(){const e=this;e.$.navigateToLabel.id||(e.$.navigateToLabel.id=e.id+"NavigateToLabel"),e.$.pageSizeLabel.id||(e.$.pageSizeLabel.id=e.id+"PageSizeLabel"),e.$.pagerSummaryContainer.id||(e.$.pagerSummaryContainer.id=e.id+"SummaryContainer"),e.setAttribute("role","navigation"),e.setAttribute("aria-labelledby",e.$.pagerSummaryContainer.id),e.$.navigateToInput.setAttribute("aria-labelledby",e.$.navigateToLabel.id),e.$.pageSizeSelector.setAttribute("aria-labelledby",e.$.pageSizeLabel.id),e.$.pageSizeSelector.dropDownWidth=e.$.pageSizeSelector.offsetWidth,e._render(),super.render()}refresh(){this._render()}propertyChangedHandler(e,t,n){super.propertyChangedHandler(e,t,n);const a=this;switch(e){case"navigationButtonsPosition":return void a._renderButtons();case"navigationInputPosition":case"pageSizeSelectorPosition":case"summaryPosition":case"totalRecords":return void a._renderSettings()}a._render()}next(){this.navigateTo(this.pageIndex+1)}prev(){this.navigateTo(this.pageIndex-1)}beginUpdate(){this._updating=!0}endUpdate(){this._updating=!1,this._render()}_render(){const e=this;if(!e._updating&&(e.$.navigateToInput.value=(1+e.pageIndex).toString(),e._renderButtons(),e._renderPageIndexSelectors(),e._renderSettings(),e._renderVisibility(),e._localize(),e.$.pageSizeSelector&&e.showPageSizeSelector)){const t=e.pageSizeSelectorDataSource.indexOf(e.pageSize);t>=0&&(e.$.pageSizeSelector.selectedIndex=t)}}_resizeHandler(){this._renderVisibility()}_renderVisibility(){const e=this,t=e.offsetWidth-20;e._pageIndexSelectorsVisibleCount=e._pageIndexSelectorsCount,e.showSummary?e.$pagerSummaryContainer.removeClass("smart-hidden"):e.$pagerSummaryContainer.addClass("smart-hidden"),e.showPageIndexSelectors?e.$middleButtonsContainer.removeClass("smart-hidden"):e.$middleButtonsContainer.addClass("smart-hidden"),e.showNavigationInput?(e.$navigateToLabel.removeClass("smart-hidden"),e.$navigateToInput.removeClass("smart-hidden")):(e.$navigateToLabel.addClass("smart-hidden"),e.$navigateToInput.addClass("smart-hidden")),e.showPageSizeSelector?(e.$pageSizeLabel.removeClass("smart-hidden"),e.$pageSizeSelector.removeClass("smart-hidden")):(e.$pageSizeLabel.addClass("smart-hidden"),e.$pageSizeSelector.addClass("smart-hidden")),e.showFirstLastNavigationButtons?(e.$firstButton.removeClass("smart-hidden"),e.$lastButton.removeClass("smart-hidden")):(e.$firstButton.addClass("smart-hidden"),e.$lastButton.addClass("smart-hidden")),e.showPrevNextNavigationButtons?(e.$previousButton.removeClass("smart-hidden"),e.$nextButton.removeClass("smart-hidden")):(e.$previousButton.addClass("smart-hidden"),e.$nextButton.addClass("smart-hidden")),e.$previousEllipsisButton.addClass("smart-hidden"),e.$nextEllipsisButton.addClass("smart-hidden"),"after"!==e.autoEllipsis&&"none"!==e.autoEllipsis&&e.pageIndex>=e._pageIndexSelectorsCount&&e.$previousEllipsisButton.removeClass("smart-hidden"),"before"!==e.autoEllipsis&&"none"!==e.autoEllipsis&&e.pageIndex<e.pagesCount-e._pageIndexSelectorsCount&&e.$nextEllipsisButton.removeClass("smart-hidden");for(let i=0;i<e._pageIndexSelectorsCount&&e.$.pageIndexSelectorsContainer.children[i];i++)e.$.pageIndexSelectorsContainer.children[i].classList.remove("smart-hidden");const n=e.$.pagerSummaryContainer.offsetWidth?Math.max(100,e.$.pagerSummaryContainer.offsetWidth):0;let a=e.$.nearButtonsContainer.offsetWidth+e.$.middleButtonsContainer.offsetWidth+e.$.farButtonsContainer.offsetWidth+n+e.$.pagerInputAndLabelContainer.offsetWidth+e.$.pagerSizeSelectorAndLabelContainer.offsetWidth;if(a>0&&a>t&&(a-=e.$.pagerSummaryContainer.offsetWidth,e.$pagerSummaryContainer.addClass("smart-hidden"),a>t&&(a-=e.$.navigateToLabel.offsetWidth,a-=e.$.navigateToInput.offsetWidth,e.$navigateToLabel.addClass("smart-hidden"),e.$navigateToInput.addClass("smart-hidden"),a>t))){if(a-=e.$.pageSizeLabel.offsetWidth,a-=e.$.pageSizeSelector.offsetWidth,e.$pageSizeLabel.addClass("smart-hidden"),e.$pageSizeSelector.addClass("smart-hidden"),a>t){e.$previousEllipsisButton.addClass("smart-hidden"),e.$nextEllipsisButton.addClass("smart-hidden"),a-=e.$.previousEllipsisButton.offsetWidth,a-=e.$.nextEllipsisButton.offsetWidth;for(let i=e._pageIndexSelectorsCount-1;i>=0;i--){const o=e.$.pageIndexSelectorsContainer.children[i];if(a<t||!o)break;e._pageIndexSelectorsVisibleCount--,a-=o.offsetWidth,o.hasAttribute("selected")||o.classList.add("smart-hidden")}}a>t&&e.showFirstLastNavigationButtons&&(e.$firstButton.addClass("smart-hidden"),e.$lastButton.addClass("smart-hidden"))}}_renderSettings(){const e=this,t=e.totalRecords;let n=e.pageIndex*e.pageSize,a=(e.pageIndex+1)*e.pageSize,i=e.pagesCount*e.pageSize;null!==t&&(a===i&&(a=t),i=t,0===t&&(n=-1)),e.$pagerSummaryContainer.removeClass("near"),e.$pagerSizeSelectorAndLabelContainer.removeClass("near"),e.$pagerInputAndLabelContainer.removeClass("near"),"near"===e.summaryPosition&&e.$pagerSummaryContainer.addClass("near"),"near"===e.pageSizeSelectorPosition&&e.$pagerSizeSelectorAndLabelContainer.addClass("near"),"near"===e.navigationInputPosition&&e.$pagerInputAndLabelContainer.addClass("near"),e.$.pagerSummaryContainer.innerHTML='<span class="smart-summary-start" role="presentation">'+(1+n)+'</span> <span class="smart-summary-hyphen" role="presentation">-</span> <span class="smart-summary-end" role="presentation">'+a+'</span><span class="smart-summary-prefix" role="presentation">'+e.localize("summaryPrefix")+'</span> <span class="smart-summary-total-end" role="presentation">'+i+'</span> <span class="smart-summary-suffix" role="presentation">'+e.localize("summarySuffix")+"</span>"}get _pageIndexSelectorsCount(){const e=this;let t=parseInt(e.pageIndexSelectors);return Array.isArray(e.pageIndexSelectors)&&(t=e.pageIndexSelectors.length),t}_renderPageIndexSelectors(){const e=this;if(e.pageIndex<0||e.pageIndex>=e.pagesCount)return void(e.$.pageIndexSelectorsContainer.innerHTML="");e.$.pageIndexSelectorsContainer.innerHTML="";let t=!1;Array.isArray(e.pageIndexSelectors)&&(t=!0);let n=Math.floor(e.pageIndex/e._pageIndexSelectorsCount)*e._pageIndexSelectorsCount,a=Math.min(e.pagesCount,n+e._pageIndexSelectorsCount),i=0;for(let o=n;o<a;o++){const r=document.createElement("span");let l=o+1;if(r.className="smart-pager-page-index-selector",t){const s=e.pageIndexSelectors[i++];s&&(s.label?l=e.pageIndexSelectors[o].label:"string"==typeof s&&(l=s),s.value&&r.setAttribute("value",e.pageIndexSelectors[o].value))}r.index=o,r.innerHTML=l,r.setAttribute("role","listitem"),e.$.pageIndexSelectorsContainer.appendChild(r),o===e.pageIndex&&(r.classList.add("smart-selected"),r.setAttribute("selected",""),r.setAttribute("aria-current","page"))}}_lastButtonClickHandler(){this.last()}last(){this.navigateTo(this.pagesCount-1)}_firstButtonClickHandler(){this.first()}first(){this.navigateTo(0)}_renderButtons(){const e=this;switch(0===e.pageIndex?(e.$.firstButton.setAttribute("disabled",""),e.$.previousButton.setAttribute("disabled","")):(e.$.firstButton.removeAttribute("disabled"),e.$.previousButton.removeAttribute("disabled")),e.pageIndex===e.pagesCount-1?(e.$.nextButton.setAttribute("disabled",""),e.$.lastButton.setAttribute("disabled","")):(e.$.nextButton.removeAttribute("disabled"),e.$.lastButton.removeAttribute("disabled")),e.pagesCount<=0&&(e.$.firstButton.setAttribute("disabled",""),e.$.previousButton.setAttribute("disabled",""),e.$.nextButton.setAttribute("disabled",""),e.$.lastButton.setAttribute("disabled","")),e.$nearButtonsContainer.removeClass("far"),e.$farButtonsContainer.removeClass("far"),e.$nearButtonsContainer.removeClass("near"),e.$farButtonsContainer.removeClass("near"),e.navigationButtonsPosition){case"near":e.$nearButtonsContainer.addClass("near"),e.$farButtonsContainer.addClass("near");break;case"far":e.$nearButtonsContainer.addClass("far"),e.$farButtonsContainer.addClass("far");break;case"both":e.$nearButtonsContainer.addClass("near"),e.$farButtonsContainer.addClass("far")}}_navigateToInputChangeHandler(){const e=this;let t=parseInt(e.$.navigateToInput.value)-1;isNaN(t)&&(e.$.navigateToInput.value="1",t=parseInt(e.$.navigateToInput.value-1)),e.navigateTo(t)}_pageIndexSelectorsContainerClickHandler(e){const t=this.enableShadowDOM?e.composedPath()[0].closest(".smart-pager-page-index-selector"):e.target.closest(".smart-pager-page-index-selector");t&&!t.classList.contains("smart-selected")&&this.navigateTo(t.index)}_pageSizeSelectorChangeHandler(e){const t=this;!t.showPageSizeSelector||t.disabled||t._updating||(t.pageSize=parseInt(e.detail.value),t.$.fireEvent("pageSizeChanged",{value:parseInt(e.detail.value)}))}_keyDownHandler(e){const t=this;if(!t.disabled&&(t.enableShadowDOM&&t.shadowRoot.activeElement||document.activeElement)!==t.$.navigateToInput&&null===t.$.pageSizeSelector.getAttribute("focus"))switch(e.key){case"End":t.last(),e.preventDefault();break;case"Home":t.first(),e.preventDefault();break;case"PageDown":case"ArrowDown":case"ArrowLeft":t.prev(),e.preventDefault();break;case"PageUp":case"ArrowUp":case"ArrowRight":t.next(),e.preventDefault()}}_nextButtonClickHandler(){this.next()}_previousButtonClickHandler(){this.prev()}navigateTo(e){const t=this,n=t.pageIndex;t.disabled||t.pageIndex===e||e<0||e>=t.pagesCount||(t.pageIndex=e,t._render(),t.$.fireEvent("change",{oldIndex:n,index:e}))}_localize(){const e=this,t=["firstButton","lastButton","previousButton","nextButton"];for(let n=0;n<t.length;n++){const a=e.$[t[n]];!e.showNavigationButtonLabels&&n<2?(a.innerHTML="",a.classList.add(0===n?"smart-arrow-left-first":"smart-arrow-right-last")):!e.showNavigationButtonLabels&&n>=2?(a.innerHTML="",a.classList.add(2===n?"smart-arrow-left":"smart-arrow-right")):(a.classList.remove("smart-arrow-left"),a.classList.remove("smart-arrow-right"),a.classList.remove("smart-arrow-left-first"),a.classList.remove("smart-arrow-right-last"),a.innerHTML=e.localize(t[n]))}e.$.pageSizeLabel.innerHTML=e.localize("pageSizeLabel"),e.$.navigateToLabel.innerHTML=e.localize("navigateToLabel"),e.$.previousEllipsisButton.innerHTML=e.localize("ellipsis"),e.$.nextEllipsisButton.innerHTML=e.localize("ellipsis"),e.$.navigateToInput.placeholder=e.localize("navigateToInputPlaceholder")}_nextEllipsisButtonClickHandler(){const e=this;e.navigateTo(e._pageIndexSelectorsCount+e.pageIndex)}_previousEllipsisButtonClickHandler(){const e=this;e.navigateTo(-e._pageIndexSelectorsCount+e.pageIndex)}_navigationButtonsClickHandler(e){const t=this;if(!t.disabled)switch(t.enableShadowDOM?e.composedPath()[0].closest(".smart-pager-button"):e.target.closest(".smart-pager-button")){case t.$.firstButton:t._firstButtonClickHandler(e);break;case t.$.lastButton:t._lastButtonClickHandler(e);break;case t.$.previousButton:t._previousButtonClickHandler(e);break;case t.$.nextButton:t._nextButtonClickHandler(e)}}_navigationButtonsDownHandler(e){const t=this,n=t.enableShadowDOM?e.originalEvent.composedPath()[0].closest(".smart-pager-button")||e.originalEvent.composedPath()[0].closest(".smart-pager-page-index-selector"):e.originalEvent.target.closest(".smart-pager-button")||e.originalEvent.target.closest(".smart-pager-page-index-selector");!t.disabled&&n&&(t.hasRippleAnimation&&Smart.Utilities.Animation.Ripple.animate(n,e.pageX,e.pageY),n!==t.$.previousButton&&n!==t.$.nextButton||t._startRepeat(e,n))}_updateInBoundsFlag(e){const n=this.enableShadowDOM?e.composedPath()[0]:e.target;n._isPointerInBounds=!0,-1!==e.type.indexOf("leave")&&(n._isPointerInBounds=!1),1!==("buttons"in e?e.buttons:e.which)&&this._stopRepeat()}_startRepeat(e,t){const n=this;n._initialTimer||(n._initialTimer=setTimeout(function(){n._repeatTimer=setInterval(()=>{t._isPointerInBounds&&(t===n.$.previousButton?n._previousButtonClickHandler(e):n._nextButtonClickHandler(e))},50)},150))}_stopRepeat(){const e=this;e._repeatTimer&&(clearInterval(e._repeatTimer),e._repeatTimer=null),e._initialTimer&&(clearTimeout(e._initialTimer),e._initialTimer=null)}})},9135:()=>{Smart("smart-scroll-bar",class extends Smart.BaseElement{static get properties(){return{clickRepeatDelay:{type:"integer",value:50},largeStep:{type:"integer",value:100},min:{type:"integer",value:0},max:{type:"integer",value:1e3},mechanicalAction:{value:"switchWhileDragging",allowedValues:["switchUntilReleased","switchWhenReleased","switchWhileDragging"],type:"string"},orientation:{type:"string",value:"horizontal",allowedValues:["horizontal","vertical"]},step:{type:"integer",value:10},showButtons:{type:"boolean",value:!0,defaultReflectToAttribute:!0},value:{type:"integer",value:0}}}static get styleUrls(){return["smart.scrollbar.css"]}template(){return'<div id="container" class="smart-container" role="presentation">\n                    <div id="nearButton" class="smart-scroll-button smart-arrow-left" role="presentation" aria-hidden="true"></div>\n                    <div  id="track" class="smart-track" role="presentation">\n                        <div id="thumb" class="smart-thumb" role="presentation"></div>\n                    </div>\n                    <div id="farButton" class="smart-scroll-button smart-arrow-right" role="presentation" aria-hidden="true"></div>\n            </div>'}static get listeners(){return{"nearButton.click":"_nearButtonClickHandler","nearButton.down":"_startRepeat","nearButton.up":"_stopRepeat","nearButton.pointerenter":"_updateInBoundsFlag","nearButton.pointerleave":"_updateInBoundsFlag","farButton.click":"_farButtonClickHandler","farButton.down":"_startRepeat","farButton.up":"_stopRepeat","farButton.pointerenter":"_updateInBoundsFlag","farButton.pointerleave":"_updateInBoundsFlag","track.down":"_trackDownHandler","track.click":"_trackClickHandler","track.move":"_trackMoveHandler","thumb.down":"_dragStartHandler","document.move":"_dragHandler","document.up":"_dragEndHandler",up:"_dragEndHandler","document.selectstart":"_selectStartHandler",resize:"_resizeHandler"}}_updateInBoundsFlag(e){const n=e.target;n._isPointerInBounds=!0,-1!==e.type.indexOf("leave")&&(n._isPointerInBounds=!1),1!==("buttons"in e?e.buttons:e.which)&&this._stopRepeat(e)}_startRepeat(e){const t=this;if(t.disabled)return;const n=e.target;n._initialTimer||(n._initialTimer=setTimeout(function(){n._repeatTimer=setInterval(()=>{n._isPointerInBounds&&n.$.fireEvent("click",{buttons:"buttons"in e?e.buttons:e.which,clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY,screenX:e.screenX,screenY:e.screenY})},t.clickRepeatDelay)},3*t.clickRepeatDelay))}_stopRepeat(e){if(this.disabled)return;const t=e.target;t._repeatTimer&&(clearInterval(t._repeatTimer),t._repeatTimer=null),t._initialTimer&&(clearTimeout(t._initialTimer),t._initialTimer=null)}_calculateThumbSize(e){const t=this,n=t.max-t.min;let i=0;return n>=1&&("horizontal"===t.orientation?t.$.track.offsetWidth>10:t.$.track.offsetHeight>10)?(i=e/(n+e)*e,t.$.thumb.className.indexOf("smart-hidden")>=0&&t.$thumb.removeClass("smart-hidden")):t.$thumb.addClass("smart-hidden"),Math.max(10,Math.min(i,e))}_dragStartHandler(e){const t=this;t.disabled||(t.thumbCapture=!0,t.dragStartX=e.clientX,t.dragStartY=e.clientY,t.dragStartValue=t.value,e.stopPropagation(),e.preventDefault())}_dragHandler(e){const t=this;if(!0!==t.thumbCapture)return;t._isThumbDragged=!0;const n=(t.max-t.min)/(t.scrollBarSize-t.thumbSize),a="horizontal"===t.orientation?(e.clientX-t.dragStartX)*n:(e.clientY-t.dragStartY)*n;let i=a;t.rightToLeft&&"horizontal"===t.orientation&&(i=-a),t._updateValue(t.dragStartValue+i),e.stopPropagation(),e.preventDefault(),e.originalEvent&&(e.originalEvent.stopPropagation(),e.originalEvent.preventDefault())}_dragEndHandler(e){const t=this;t._trackDownTimer&&(clearInterval(t._trackDownTimer),t._trackDownTimer=null),t.thumbCapture&&(t.thumbCapture=!1,t._isThumbDragged=!1,"switchWhenReleased"===t.mechanicalAction?t._updateValue(t.dragStartValue,t.value):"switchUntilReleased"===this.mechanicalAction&&t._updateValue(t.dragStartValue),e.preventDefault(),e.stopPropagation(),e.originalEvent.preventDefault(),e.originalEvent.stopPropagation())}_farButtonClickHandler(){const e=this;if(e.disabled)return;const t=e.value;e._updateValue(e.value+("horizontal"===e.orientation&&e.rightToLeft?-1:1)*e.step),"switchUntilReleased"===e.mechanicalAction&&e._updateValue(t)}_nearButtonClickHandler(){const e=this;if(e.disabled)return;const t=e.value;e._updateValue(e.value-("horizontal"===e.orientation&&e.rightToLeft?-1:1)*e.step),"switchUntilReleased"===e.mechanicalAction&&e._updateValue(t)}propertyChangedHandler(e,t,n){super.propertyChangedHandler(e,t,n);const a=this;switch(e){case"min":case"max":case"orientation":case"showButtons":a._layout(),"min"===e?a.setAttribute("aria-valuemin",n):"max"===e?a.setAttribute("aria-valuemax",n):"orientation"===e&&a.setAttribute("aria-orientation",n);break;case"value":a._updateValue(t,n);break;default:a._layout()}}render(){const e=this;e.setAttribute("role","scrollbar"),e.setAttribute("aria-orientation",e.orientation),e.setAttribute("aria-valuemin",e.min),e.setAttribute("aria-valuemax",e.max),e.setAttribute("aria-valuenow",e.value),e._layout(),super.render()}_resizeHandler(){this._layout()}refresh(){this._layout()}beginUpdate(){this._isUpdating=!0}endUpdate(){this._isUpdating=!1,this.refreshValue()}refreshValue(){const e=this;e._layout(),e._updateValue(e.value)}_layout(){const e=this;e._isUpdating||(e.scrollBarSize="horizontal"===e.orientation?e.$.track.offsetWidth:e.$.track.offsetHeight,e.thumbSize=e._calculateThumbSize(e.scrollBarSize),"horizontal"===e.orientation&&e.$.thumb.style.width!==e.thumbSize+"px"?e.$.thumb.style.width=e.thumbSize+"px":"vertical"===e.orientation&&e.$.thumb.style.height!==e.thumbSize+"px"&&(e.$.thumb.style.height=e.thumbSize+"px"),"horizontal"===e.orientation?(e.$.nearButton.classList.contains("smart-arrow-up")&&e.$.nearButton.classList.remove("smart-arrow-up"),e.$.farButton.classList.contains("smart-arrow-down")&&e.$.farButton.classList.remove("smart-arrow-down"),e.$.nearButton.classList.contains("smart-arrow-left")||e.$.nearButton.classList.add("smart-arrow-left"),e.$.farButton.classList.contains("smart-arrow-right")||e.$.farButton.classList.add("smart-arrow-right")):(e.$.nearButton.classList.contains("smart-arrow-left")&&e.$.nearButton.classList.remove("smart-arrow-left"),e.$.farButton.classList.contains("smart-arrow-right")&&e.$.farButton.classList.remove("smart-arrow-right"),e.$.nearButton.classList.contains("smart-arrow-up")||e.$.nearButton.classList.add("smart-arrow-up"),e.$.farButton.classList.contains("smart-arrow-down")||e.$.farButton.classList.add("smart-arrow-down")),e._updateThumbPosition(),(e.value>e.max||e.value<e.min)&&e._updateValue(e.value,e.value>e.max?e.max:e.min))}_selectStartHandler(e){this.thumbCapture&&e.preventDefault()}_trackDownHandler(e){const t=this;e.target===t.$.track&&(t._trackDownTimer&&clearInterval(t._trackDownTimer),t.thumbCapture||(t._trackDownTimer=setInterval(function(){t._trackClickHandler(e)},t.clickRepeatDelay),e.stopPropagation(),e.preventDefault()))}_trackClickHandler(e){const t=this;if(t.disabled)return;if(t._isThumbDragged)return clearInterval(t._trackDownTimer),void(t._trackDownTimer=null);const n=t.$.thumb.getBoundingClientRect(),a=e.pageX-window.pageXOffset,i=e.pageY-window.pageYOffset,o=(t.rightToLeft?-1:1)*t.value;"horizontal"===t.orientation?a>(t._isThumbDragged?t.dragStartX:n.right)?t._updateValue(t.value+(t.rightToLeft?-1:1)*t.largeStep):a<(t._isThumbDragged?t.dragStartX:n.left)&&t._updateValue(t.value-(t.rightToLeft?-1:1)*t.largeStep):i>(t._isThumbDragged?t.dragStartY:n.bottom)?t._updateValue(t.value+t.largeStep):i<(t._isThumbDragged?t.dragStartY:n.top)&&t._updateValue(t.value-t.largeStep),"switchUntilReleased"===t.mechanicalAction&&t._updateValue(o)}_trackMoveHandler(e){"touchmove"===e.originalEvent.type&&e.originalEvent.preventDefault()}_updateValue(e,t){const n=this;if(!n._isUpdating&&(1===arguments.length&&(t=e,e=n.value),(void 0===t||isNaN(t))&&(t=n.min),t>n.max&&(t=n.max),t<n.min&&(t=n.min),n.value=t,e!==t)){if(n.setAttribute("aria-valuenow",t),n._updateThumbPosition(),n.thumbCapture&&"switchWhenReleased"===n.mechanicalAction)return;if(n.onChange)return void n.onChange({value:n.value,oldValue:e,min:n.min,max:n.max,context:n});n.$.fireEvent("change",{value:n.value,oldValue:e,min:n.min,max:n.max})}}_updateThumbPosition(){const e=this,t="horizontal"===e.orientation?e.$.track.offsetWidth:e.$.track.offsetHeight,n=e._calculateThumbSize(t);let i=(t-n)/(e.max-e.min)*(e.value-e.min);e.rightToLeft&&"horizontal"===e.orientation&&(i=(t-n)/(e.max-e.min)*(e.max-e.value-e.min)),i=Math.min(t-n,Math.max(0,i)),"vertical"===e.orientation&&e.$.thumb.style.top!==i+"px"?e.$.thumb.style.top=i+"px":"horizontal"===e.orientation&&e.$.thumb.style.left!==i+"px"&&(e.$.thumb.style.left=i+"px")}})},6297:()=>{Smart("smart-sortable",class extends Smart.ContentElement{static get properties(){return{disableMode:{value:"auto",allowedValues:["auto","manual"],type:"string"},dragMode:{value:"item",allowedValues:["item","handle"],type:"string"},handlePosition:{value:"right",allowedValues:["right","left","top","bottom"],type:"string"},handleVisibility:{value:"hover",allowedValues:["hover","visible"],type:"string"},items:{value:null,type:"string?"},mode:{value:"vertical",allowedValues:["horizontal","vertical"],type:"string"}}}static get listeners(){return{contextmenu:"_preventDefault","container.down":"_containerDownHandler","container.move":"_containerMoveHandler","container.transitionend":"_containerTransitionendHandler","document.dragstart":"_preventDefault","document.move":"_documentMoveHandler","document.selectstart":"_preventDefault","document.up":"_documentUpHandler"}}static get styleUrls(){return["smart.sortable.css"]}template(){return'<div id="container" class="smart-sortable-container" role="presentation" inner-h-t-m-l=\'[[innerHTML]]\'><content></content></div>'}move(e,t){const n=this,a=n._items;if(isNaN(e)||isNaN(t)||e===t||e<0||e>=a.length||t<0||t>=a.length)return;const o=a[t];n._itemsParent.insertBefore(a[e],e>t?o:o.nextElementSibling),n._getItems(!1)}updateItems(){this._items.forEach(e=>e.classList.remove("smart-sortable-item")),this._getItems()}propertyChangedHandler(e,t,n){super.propertyChangedHandler(e,t,n);const a=this;switch(e){case"disabled":a._originallyDisabled=n,a._items.length<2&&"auto"===a.disableMode&&(a.disabled=!0);break;case"items":a._itemsParent.classList.remove("smart-sortable-items-parent"),a.updateItems();break;case"mode":a._setSettingsObject()}}ready(){super.ready();const e=this;e.setAttribute("role","group"),e._originallyDisabled=e.disabled,e._getItems(),e._setSettingsObject()}_getItems(e){const t=this;if(t._items=Array.from(null===t.items?t.$.container.children:(t.shadowRoot||t).querySelectorAll(".smart-sortable-container "+t.items)),!1!==e&&(t._items.forEach(n=>n.classList.add("smart-sortable-item")),t._items.length)){if(t._itemsParent=t._items[0].parentElement,t._itemsParent.classList.add("smart-sortable-items-parent"),t.parents)for(let n=0;n<t.parents.length;n++)if(t.parents[n]instanceof HTMLElement&&t.parents[n].classList.contains("smart-sort-panel"))return void("auto"===t.disableMode&&(t.disabled=t._originallyDisabled));"auto"===t.disableMode&&(t.disabled=t._items.length<2||t._originallyDisabled)}}_setSettingsObject(){this._settings="vertical"===this.mode?{coordinateName:"y",dimension:"height",offsetDimension:"offsetHeight",startOffset:"top",endOffset:"bottom"}:{coordinateName:"x",dimension:"width",offsetDimension:"offsetWidth",startOffset:"left",endOffset:"right"}}_preventDefault(e){this._draggedItem&&e.preventDefault()}_containerDownHandler(e){const t=this;if(t.disabled||t._draggedItem)return;const n=(t.shadowRoot||t.isInShadowDOM?e.originalEvent.composedPath()[0]:e.originalEvent.target).closest(".smart-sortable-item");if(!n)return;const a=e.pageX-window.scrollX,i=e.pageY-window.scrollY,o=n.getBoundingClientRect(),r=getComputedStyle(n),l=parseFloat(r.marginLeft),s=parseFloat(r.marginTop);"handle"===t.dragMode&&(e.originalEvent.target!==document.elementFromPoint(e.clientX,e.clientY)||a>=o.left&&a<=o.right&&i>=o.top&&i<=o.bottom)||(window.getSelection().removeAllRanges(),t._draggedItem=n,t._positionPlaceholder(),t._getPositionedAncestorCoords(),n.style.width=n.offsetWidth+"px",n.style.height=n.offsetHeight+"px",n.style.left=o.left-l+(-t._positionedAncestorCoords.x||window.scrollX)+"px",n.style.top=o.top-s+(-t._positionedAncestorCoords.y||window.scrollY)+"px",n.classList.add("dragged"),t._clickOffset={x:e.pageX-o.left+l,y:e.pageY-o.top+s},t._prevCoords={x:a,y:i},t._getItemCoordinates())}_positionPlaceholder(){const e=this,t=e._draggedItem,n=getComputedStyle(t),a=document.createElement("div");a.className="smart-sortable-item placeholder smart-visibility-hidden",a.style.width=t.offsetWidth+"px",a.style.height=t.offsetHeight+"px",a.style.minHeight=t.offsetHeight+"px",a.style.marginBottom=n.marginBottom,a.style.marginLeft=n.marginLeft,a.style.marginRight=n.marginRight,a.style.marginTop=n.marginTop,e._itemsParent.insertBefore(a,t.nextElementSibling),e._placeholder=a}_getPositionedAncestorCoords(){const e=this,t=e.offsetParent;if(e._positionedAncestorCoords={x:0,y:0},t!==document.body){const n=t.getBoundingClientRect();e._positionedAncestorCoords={x:n.left,y:n.top}}}_getItemCoordinates(){const e=[];this._items.forEach(function(t){const n=t.getBoundingClientRect();e.push({left:n.left,top:n.top,right:n.right,bottom:n.bottom,width:n.width,height:n.height})}),this._coordinates=e}_containerMoveHandler(e){this._draggedItem&&"touchmove"===e.originalEvent.type&&e.originalEvent.preventDefault()}_containerTransitionendHandler(e){const t=this;t._draggedItem&&e.target.classList.contains("smart-sortable-item")&&(e.target.classList.contains("returning")?t._resolveDragging():t._getItemCoordinates())}_documentMoveHandler(e){const t=this,n=t._draggedItem;if(!n)return;const a=t._settings,i={x:e.pageX-window.scrollX,y:e.pageY-window.scrollY},o=i[a.coordinateName];let r;if(t._prevCoords.x===i.x&&t._prevCoords.y===i.y)return;t.hasAttribute("dragged")||t.setAttribute("dragged",""),r=t._prevCoords[a.coordinateName]>o?"up":"down",t._prevCoords=i,n.style.top=e.pageY-t._clickOffset.y+(-t._positionedAncestorCoords.y||window.scrollY)+"px",n.style.left=e.pageX-t._clickOffset.x+(-t._positionedAncestorCoords.x||window.scrollX)+"px";const l=t._items.indexOf(n);let s;for(let c=0;c<t._coordinates.length;c++){const u=t._coordinates[c];if(l!==c){if("down"===r&&o>=u[a.startOffset]+u[a.dimension]/2&&o<=u[a.endOffset]){s=t._items[c];break}if("up"===r&&o>=u[a.startOffset]&&o<=u[a.startOffset]+u[a.dimension]/2){s=t._items[c];break}}}if(s){if(s!==t._prevOverItem){if(t._prevOverItem=s,s[r])return;const c=t._items.indexOf(s);if(t._overItem=s,s.up||s.down)s.style.transform=null,delete s.up,delete s.down;else{if("horizontal"===t.mode&&("up"===r&&(!t.rightToLeft&&c>l||t.rightToLeft&&c<l)||"down"===r&&(!t.rightToLeft&&c<l||t.rightToLeft&&c>l))||"vertical"===t.mode&&("up"===r&&c>l||"down"===r&&c<l))return;const u=getComputedStyle(s);s.style.transform=`translate${a.coordinateName.toUpperCase()}(${("up"===r?1:-1)*(s[a.offsetDimension]+parseFloat(u["margin-"+a.startOffset])+parseFloat(u["margin-"+a.endOffset]))}px)`,s[r]=!0}}}else delete t._prevOverItem}_documentUpHandler(){const e=this,t=e._draggedItem;if(!t)return;let n=e._overItem;if(n){const a=e._items.indexOf(t),i=e._items.indexOf(n);a<i&&n[e.rightToLeft&&"horizontal"===e.mode?"up":"down"]||a>i&&!n.down&&!n.up?(e._insertBefore=n.nextElementSibling,n=e._insertBefore,n&&n.nextElementSibling===t&&(n=e._placeholder)):(a>i&&n[e.rightToLeft&&"horizontal"===e.mode?"down":"up"]||a<i&&!n.down&&!n.up)&&(e._insertBefore=n,a>i&&n[e.rightToLeft&&"horizontal"===e.mode?"down":"up"]||(n=n.previousElementSibling||n))}else n=e._placeholder;e._resolveDragging()}_resolveDragging(){const e=this,t=e._draggedItem,n=e._items.indexOf(t);let a=!1;t.classList.remove("dragged","returning"),e._removeInlineStyle(),void 0!==e._insertBefore&&e._items.indexOf(e._insertBefore)!==n&&e._insertBefore!==e._placeholder[e.rightToLeft&&"horizontal"===e.mode?"previousElementSibling":"nextElementSibling"]&&(e._itemsParent.insertBefore(t,e._insertBefore),delete e._insertBefore,a=!0),e._itemsParent.removeChild(e._placeholder),delete e._clickOffset,delete e._draggedItem,delete e._overItem,delete e._placeholder,delete e._prevCoords,e.removeAttribute("dragged"),a&&(e._getItems(!1),e.$.fireEvent("dragEnd",{oldIndex:n,newIndex:e._items.indexOf(t)}))}_removeInlineStyle(){const e=this;e._items.forEach(function(t){t.style=null,t.style.transition="none",delete t.up,delete t.down}),setTimeout(function(){e._items.forEach(t=>t.style.transition=null)},50)}})},7341:()=>{Smart("smart-text-area",class extends Smart.Input{template(){return'<div id="inputContainer" role="presentation"><textarea class="smart-input" id=\'input\' readonly=\'[[readonly]]\' placeholder=\'[[placeholder]]\'  name=\'[[name]]\' value=\'{{value::keyup}}\' disabled=\'[[disabled]]\' aria-label="[[placeholder]]"></textarea><span class="smart-hidden smart-hint" id="span">[[hint]]</span><div id="dropDownButton" tabindex=-1 class="smart-drop-down-button" role="button" aria-label="Toggle popup"><div id="arrow" class="arrow" aria-hidden="true"></div></div></div>'}render(){super.render(),this.classList.add("smart-input")}})},5435:()=>{Smart("smart-time-box",class extends Smart.BaseElement{static get properties(){return{messages:{value:{en:{hours:"Hours",minutes:"Minutes",am:"am",pm:"pm"}},type:"object",extend:!0},value:{type:"array",value:[0,0]}}}static get listeners(){return{click:"_changeHandler"}}render(){const e=this,t=document.createElement("div");e.tabindex=-1,t.innerHTML='\n            <div class="hour-selection smart-calendar-week" role="row"><div class="header" role="rowheader"></div>\n                <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="0">12</div>\n                <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="1">01</div>\n                <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="2">02</div>\n                <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="3">03</div>\n                <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="4">04</div>\n                <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="5">05</div>\n                <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="6">06</div>\n                <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="7">07</div>\n                <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="8">08</div>\n                <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="9">09</div>\n                <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="10">10</div>\n                <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="11">11</div>\n                <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="12" pm>12</div>\n                <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="13" pm>01</div>\n                <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="14" pm>02</div>\n                <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="15" pm>03</div>\n                <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="16" pm>04</div>\n                <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="17" pm>05</div>\n                <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="18" pm>06</div>\n                <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="19" pm>07</div>\n                <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="20" pm>08</div>\n                <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="21" pm>09</div>\n                <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="22" pm>10</div>\n                <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="23" pm>11</div>\n            </div>\n            <div class="minute-selection smart-calendar-week" role="row"><div class="header" role="rowheader"></div>\n                <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="0">00</div>\n                <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="5">05</div>\n                <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="10">10</div>\n                <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="15">15</div>\n                <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="20">20</div>\n                <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="25">25</div>\n                <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="30">30</div>\n                <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="35">35</div>\n                <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="40">40</div>\n                <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="45">45</div>\n                <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="50">50</div>\n                <div class="smart-calendar-cell" role="gridcell" aria-selected="false" value="55">55</div>\n            </div>',t.classList.add("smart-timepicker","smart-calendar"),t.setAttribute("role","grid"),e.$.content.appendChild(t),Smart.Utilities.Core.isMobile||(t.onmouseover=function(o){const r=o.target.closest(".smart-calendar-cell");r&&r.setAttribute("hover","")},t.onmouseout=function(o){const r=o.target.closest(".smart-calendar-cell");r&&r.removeAttribute("hover")}),e._timepicker=t;const n=e._timepicker.querySelector(".hour-selection"),a=e._timepicker.querySelector(".minute-selection");n.setAttribute("am-label",e.localize("am")),n.setAttribute("pm-label",e.localize("pm")),n.querySelector(".header").textContent=e.localize("hours"),a.querySelector(".header").textContent=e.localize("minutes"),Array.from(e._timepicker.querySelectorAll("div[selected]")).map(o=>{o.removeAttribute("selected"),o.setAttribute("aria-selected",!1)});const i=e._timepicker.querySelectorAll(`.hour-selection div[value="${e.value[0]}"], .minute-selection div[value="${e.value[1]}"]`);for(let o=0;o<i.length;o++){const r=i[o];r&&(r.setAttribute("selected",!0),r.setAttribute("aria-selected",!0))}}_changeHandler(e){const t=this;let n=e.target;if(!n||!n.classList.contains("smart-calendar-cell"))return;n.closest(".hour-selection")?Array.from(t._timepicker.querySelectorAll(".hour-selection div[selected]")).map(l=>{l.removeAttribute("selected"),l.setAttribute("aria-selected",!1)}):Array.from(t._timepicker.querySelectorAll(".minute-selection div[selected]")).map(l=>{l.removeAttribute("selected"),l.setAttribute("aria-selected",!1)}),n.setAttribute("selected",!0),n.setAttribute("aria-selected",!0);const a=t._timepicker.querySelector(".hour-selection div[selected]"),i=a?parseInt(a.getAttribute("value")):0,o=t._timepicker.querySelector(".minute-selection div[selected]"),r=o?parseInt(o.getAttribute("value")):0;t.value=[i,r]}_setValue(e,t){const n=this;if(isNaN(e)&&(e=0),isNaN(t)&&(t=0),!n._timepicker)return;Array.from(n._timepicker.querySelectorAll(".hour-selection div[selected]")).map(o=>{o.removeAttribute("selected"),o.setAttribute("aria-selected",!1)}),Array.from(n._timepicker.querySelectorAll(".minute-selection div[selected]")).map(o=>{o.removeAttribute("selected"),o.setAttribute("aria-selected",!1)});const a=n._timepicker.querySelector(`.hour-selection div[value="${e}"]`),i=n._timepicker.querySelector(`.minute-selection div[value="${t}"]`);a&&(a.setAttribute("selected",!0),a.setAttribute("aria-selected",!0)),i&&(i.setAttribute("selected",!0),i.setAttribute("aria-selected",!0)),n.value=[e,t]}propertyChangedHandler(e,t,n){const a=this;switch(e){case"value":a._setValue(n[0],n[1]);break;case"locale":{const i=a._timepicker.querySelector(".hour-selection"),o=a._timepicker.querySelector(".minute-selection");i.setAttribute("am-label",a.localize("am")),i.setAttribute("pm-label",a.localize("pm")),i.querySelector(".header").textContent=a.localize("hours"),o.querySelector(".header").textContent=a.localize("minutes");break}}}}),Smart("smart-time-input",class extends Smart.Input{static get properties(){return{dropDownButtonPosition:{allowedValues:["none","left","right"],value:"right",defaultReflectToAttribute:!0,type:"string"},dropDownHeight:{type:"any",value:"auto"},messages:{value:{en:{hours:"Hours",minutes:"Minutes",am:"am",pm:"pm"}},type:"object",extend:!0},placeholder:{value:"hh:mm",type:"string"},dateTimeFormat:{type:"object",value:{hour:"2-digit",minute:"2-digit"}},value:{type:"any",value:""}}}template(){return'<div id="inputContainer" role="presentation"><input class="smart-input" id=\'input\' readonly=\'[[readonly]]\' placeholder=\'[[placeholder]]\' type=\'[[type]]\' name=\'[[name]]\' disabled=\'[[disabled]]\' aria-label="[[placeholder]]" /><span class="smart-hidden smart-hint" id="span">[[hint]]</span><div id="dropDownButton" tabindex=-1 class="smart-drop-down-button" role="button" aria-label="Toggle popup"><div id="arrow" class="arrow" aria-hidden="true"></div></div></div>'}static get listeners(){return{"input.change":"_changeHandler","input.focus":"_focusHandler","input.blur":"_blurHandler","input.keydown":"_keyDownHandler","input.keyup":"_keyUpHandler","input.keypress":"_keyPressHandler","dropDownButton.down":"_dropDownButtonDownHandler","inputContainer.down":"_downHandler","document.up":"_documentUpHandler"}}focus(){this.$.input.focus()}select(){const e=this;e.readonly?e.$.input.focus():e.$.input.select()}_documentUpHandler(e){const t=this,n=t.shadowRoot||t.isInShadowDOM?e.originalEvent.composedPath()[0]:e.originalEvent.target;if(t.contains(n))requestAnimationFrame(()=>{});else{if(t.$.scrollView.contains(n.shadowParent||n))return t._isPointerDown&&(t._isPointerDown=!1,t.opened&&(t._preventLookup=!0),t.$.input.focus()),void e.preventDefault();t.opened&&(t._preventLookup=!0),t._isPointerDown=!1,t.close()}}_changeHandler(e){e.stopPropagation(),this._performSelect()}_focusHandler(){const e=this;e.setAttribute("focus",""),(e.readonly||0!==e.minLength||0!==e.$.input.value.length||e._preventLookup)&&(e.$.fireEvent("focus"),delete e._preventLookup)}_blurHandler(){const e=this;if(e.opened||e.removeAttribute("focus"),e.$.fireEvent("blur"),e._popup&&e._popup.isCompleted)e._setInputValue(e._popup.value[0],e._popup.value[1]);else{const t=e._getInputValue();e._setInputValue(t[0],t[1])}delete e._preventLookup}_is12HourFormat(){const e=(new Date).toLocaleTimeString(this.locale,this.dateTimeFormat);return e.indexOf("A")>=0||e.indexOf("a")>=0||e.indexOf("P")>=0||e.indexOf("p")>=0}_getInputValue(){const e=this.$.input.value,t=this.$.input.value.split(":");if(t.length<2)return[0,0];let n=parseInt(t[0]),a=parseInt(t[1]);if(isNaN(n)&&(n=0),isNaN(a)&&(a=0),e.match(/\s(.*)$/)){const i=e.match(/\s(.*)$/)[1];"PM"===i&&n<12&&(n+=12),"AM"===i&&12===n&&(n-=12)}return[n,a]}_setInputValue(e,t){const n=this;let a=n.value&&n.value.slice?n.value.slice(0):[0,0];const i=new Date;isNaN(e)&&(e=0),isNaN(t)&&(t=0),e>24&&(e=0),t>59&&(t=0),i.setHours(e),i.setMinutes(t);const o=i.toLocaleTimeString(n.locale,n.dateTimeFormat),r=[e,t];n.$.input.value=o,n.value=[e,t],n.setAttribute("data-value",e+":"+t),a.some(l=>r.indexOf(l)<0)&&n.$.fireEvent("change",{oldValue:a,value:r})}_performSelect(){}_open(){const e=this,t=e.getBoundingClientRect(),n=window.scrollX,a=window.scrollY;let i=0,o=0;if(this.opened)return;if(e.timer&&clearTimeout(e.timer),document.body.appendChild(e.$.scrollView),e.setAttribute("aria-owns",e.$.scrollView.id),e.readonly||e.$.input.setAttribute("aria-controls",e.$.scrollView.id),e.$.scrollView.enableShadowDOM&&!e._importedStyle&&(e.$.scrollView.importStyle(e._getStyleUrl("smart.textbox.css")),e._importedStyle=!0),"static"!==getComputedStyle(document.body).position){const s=document.body.getBoundingClientRect();i=s.left,o=s.top}e.$.scrollView.style.setProperty("--smart-input-drop-down-menu-width",""),e.$.scrollView.style.left=-3+t.left+n-i+"px",e.$.scrollView.style.top=t.bottom+a-o+1+"px",e.$.scrollView.classList.remove("open"),e.$.scrollView.onpointerdown=function(){e._isPointerDown=!0};const r=e._popup,l=r.context;r.rightToLeft=e.rightToLeft,r.messages=e.messages,r.theme=e.theme,r.context=e,r.locale=e.locale,r.context=l,e._refreshPopup(),requestAnimationFrame(function(){e.$.scrollView.setAttribute("open",""),e.setAttribute("open",""),e.$.dropDownButton.setAttribute("open",""),e.$.input.setAttribute("open","")}),this.opened=!0}_refreshPopup(){const e=this._getInputValue();this._popup._setValue(e[0],e[1])}close(){const e=this;return!!e.opened&&(e.timer&&clearTimeout(e.timer),e.timer=setTimeout(function(){e.$.scrollView.parentNode&&!e.opened&&(document.body.removeChild(e.$.scrollView),e.removeAttribute("aria-owns"),e.readonly||e.$.input.removeAttribute("aria-controls"))},1e3),e.$.scrollView.removeAttribute("open"),e.$.dropDownButton.removeAttribute("open"),e.$.input.removeAttribute("open"),e.removeAttribute("open"),e.opened=!1,!0)}_lookup(){}_downHandler(e){this.readonly&&this._dropDownButtonDownHandler(e)}_dropDownButtonDownHandler(e){return this._toggle(),e.preventDefault(),e.stopPropagation(),e.originalEvent.preventDefault(),e.originalEvent.stopPropagation(),!1}_toggle(){const e=this;e.opened?e.close():e.open()}open(){const e=this;e._process(),e.$.input.focus(),setTimeout(function(){e.$.input.focus()},25)}_process(){this._performSelect(void 0,!0),this._open()}_matcher(){}_sorter(){}_highlighter(){}_render(){}ensureVisible(){}_next(){}_prev(){}_move(e){e.stopPropagation()}_keyPressHandler(e){}_insertKey(e,t=1){const n=this,a=n.$.input.selectionStart,i=n.$.input.value,o=i.substring(0,a),r=i.substring(a+t);n.$.input.value=o+e.key+r,n.$.input.selectionStart=n.$.input.selectionEnd=a+1}_keyDownHandler(e){const t=this;t._suppressKeyPressRepeat=![40,38,9,13,27,16,17,18].includes(e.keyCode);let n=!1;switch(e.keyCode>=48&&e.keyCode<=57&&(n=!0),":"===e.key&&1===t.$.input.value.length&&(t.$.input.value="0"+t.$.input.value+":"),t.$.input.value.length>5&&n&&t.$.input.selectionEnd-t.$.input.selectionStart<=1&&(t.$.input.value.indexOf(":")===t.$.input.selectionStart&&(t.$.input.selectionStart=t.$.input.selectionEnd=t.$.input.selectionStart+1),t._insertKey(e),e.preventDefault()),e.key){case"ArrowLeft":case"ArrowUp":case"ArrowDown":case"ArrowRight":case"Home":case"End":case"Delete":case"Backspace":case"Tab":n=!0}"Tab"===e.key&&t.close(),e.ctrlKey&&(n=!0),n||e.preventDefault()}_keyUpHandler(e){const t=this,n=t.$.input.value.trim(),a=n.indexOf(":");2===n.length&&"Backspace"!==e.key&&"Delete"!==e.key?t.$.input.value=n+":":":"===e.key&&-1===a?t._insertKey(e,0):":"===e.key&&a>=0&&(t.$.input.selectionStart=t.$.input.selectionEnd=a+1);const i=n.split(":"),o=t._is12HourFormat();if(2===i.length&&o&&("p"===e.key||"a"===e.key)){let r=parseInt(parseInt(i[0])),l=parseInt(parseInt(i[1]));isNaN(r)&&(r=0),isNaN(l)&&(l=0);let s=n.match(/\s(.*)$/);if(!s)return;s=n.match(/\s(.*)$/)[1],"PM"===s&&r<12&&(r+=12),"AM"===s&&12===r&&(r-=12);const c=n.indexOf("a")>=0||n.indexOf("A")>=0;if("p"===e.key&&c)r+=12;else{if("a"!==e.key||c)return;r-=12}const u=t.$.input.selectionStart;t._setInputValue(r,l),t.$.input.selectionStart=u,t.$.input.selectionEnd=u}if(2===i.length&&(t.value=t._getInputValue()),t._refreshPopup(),!e.shiftKey)switch(e.keyCode){case 40:case 38:case 16:case 17:case 18:40===e.keyCode&&e.altKey&&t.open(),38===e.keyCode&&e.altKey&&t.close();break;case 27:if(!t.opened)return;t.close(),e.stopPropagation(),e.preventDefault()}}propertyChangedHandler(e,t,n){const a=this;switch(e){case"value":if("string"==typeof n)a.$.input.value=n;else if(n instanceof Date)a._setInputValue(n.getHours(),n.getMinutes());else if(Array.isArray(n))a._setInputValue(n[0],n[1]);else{a.$.input.value=n;const i=a._getInputValue();a._setInputValue(i[0],i[1])}break;case"month":case"min":case"max":a.$.calendar&&(a.$.calendar[e]=n);break;case"theme":case"rightToLeft":case"animation":case"inverted":a.$.calendar&&(a.$.calendar[e]=n),n?a.$.scrollView.setAttribute(Smart.Utilities.Core.toDash(e),"boolean"==typeof n?"":n):a.$.scrollView.removeAttribute(Smart.Utilities.Core.toDash(e));break;case"locale":a._performSelect(),a.$.calendar.locale=n;break;default:super.propertyChangedHandler(e,t,n)}}_createElement(){const e=this,t=document.createElement("div");if(t.classList.add("smart-input-drop-down-menu","smart-date-input-drop-down-menu"),t.setAttribute("animation",e.animation),t.setAttribute("role","presentation"),e.rightToLeft?t.setAttribute("right-to-left",""):t.removeAttribute("right-to-left"),e.inverted?t.setAttribute("inverted",""):t.removeAttribute("inverted"),t.onclick=function(a){a.stopPropagation(),a.preventDefault();const i=a.target;e.$.input.focus();const o=i.closest(".smart-timepicker-button");if(o){const r=t.querySelectorAll(".smart-timepicker-button");for(let l=0;l<r.length;l++)r[l].removeAttribute("selected");o.setAttribute("selected","")}else i.closest("smart-done-button")?e.close():i.closest(".smart-timepicker")&&e._popup&&e._setInputValue(e._popup.value[0],e._popup.value[1])},!t.id){const a=t.tagName.toLowerCase();t.id=a.slice(0,1).toLowerCase()+a.slice(1)+Math.floor(65536*(1+Math.random())).toString(16).substring(1)}e.$.scrollView=t,e.classList.add("smart-input");const n=document.createElement("smart-time-box");if(e._popup=n,t.appendChild(n),""===e.value&&(e.value=[0,0]),e.$.input.value=e.value.join(":"),e.value&&e.value.length>0){const a=e._getInputValue();e._setInputValue(a[0],a[1])}}setValue(e){this.value=e}getValue(){return this.value}getFormattedValue(){const e=this;if(!e.$.input)return"";if(e.value&&e.value.length>0){const t=e._getInputValue();e._setInputValue(t[0],t[1])}return e.$.input.value}_refreshMenu(){}_setAriaRelations(){const e=this,t=e.getAttribute("aria-label");e.readonly?(e.setAttribute("role","button"),!t&&e.placeholder&&e.setAttribute("aria-label",e.placeholder),e.removeAttribute("aria-readonly"),e.$.input.setAttribute("aria-hidden",!0),e.$.input.removeAttribute("aria-controls"),e.$.dropDownButton.setAttribute("aria-hidden",!0)):(e.setAttribute("role","presentation"),t&&t===e.placeholder&&e.removeAttribute("aria-label"),e.$.input.removeAttribute("aria-hidden"),e.$.dropDownButton.removeAttribute("aria-hidden")),e.setAttribute("aria-haspopup","dialog"),e.$.scrollView.setAttribute("role","dialog")}_setActiveDescendant(){}_setInputPurpose(){}})},1419:()=>{Smart("smart-time-picker",class extends Smart.BaseElement{static get properties(){return{autoSwitchToMinutes:{value:!1,type:"boolean"},footer:{value:!1,type:"boolean"},footerTemplate:{value:null,type:"any?"},format:{value:"12-hour",allowedValues:["12-hour","24-hour"],type:"string"},minuteInterval:{value:1,type:"number"},name:{value:"",type:"string"},selection:{value:"hour",allowedValues:["hour","minute"],type:"string"},value:{value:new Date,type:"any",reflectToAttribute:!1},view:{value:"portrait",allowedValues:["landscape","portrait"],type:"string"}}}static get listeners(){return{keydown:"_keydownHandler",resize:"_resizeHandler","header.click":"_headerClickHandler","picker.down":"_pickerDownHandler","picker.move":"_pickerMoveHandler","document.move":"_documentMoveHandler","document.up":"_documentUpHandler"}}static get requires(){return{"Smart.Utilities.NumericProcessor":"smart.numeric.js","Smart.Utilities.BigNumber":"smart.math.js","Smart.Utilities.Draw":"smart.draw.js"}}static get styleUrls(){return["smart.timepicker.css"]}template(){return'<div id="container" role="presentation">\n                <div id="header" class="smart-header smart-unselectable" role="heading" aria-level="1">\n                    <div id="hourMinuteContainer" class="smart-hour-minute-container">\n                        <div id="hourContainer" class="smart-hour-container" role="button"></div>\n                        <div role="presentation">:</div>\n                        <div id="minuteContainer" class="smart-minute-container" role="button"></div>\n                    </div>\n                    <div id="ampmContainer" class="smart-am-pm-container" role="presentation">\n                        <div id="amContainer" class="smart-am-container" role="button">AM</div>\n                        <div id="pmContainer" class="smart-pm-container" role="button">PM</div>\n                    </div>\n                </div>\n                <div id="main" class="smart-main-container">\n                    <div id="svgContainer" class="smart-svg-container">\n                        <div id="picker" class="smart-svg-picker" role="slider"></div>\n                    </div>\n                    <div id="footer" class="smart-footer"></div>\n                </div>\n                <input id="hiddenInput" type="hidden" name="[[name]]">\n            </div>'}ready(){super.ready()}render(){this._createElement(),super.render()}setHours(e){const t=this;(e=24===e?0:Math.max(0,Math.min(e,23)))<12?t._selectAmPm("am"):t._selectAmPm("pm"),"12-hour"===t.format&&(0===e?e=12:e>12&&(e-=12)),t._updateHours(e,arguments[1]),"hour"===t.selection&&(t._inInnerCircle="24-hour"===t.format&&(0===e||e>12),t._drawArrow(!0,e,arguments[2]),t.hasAnimation||(t._inInnerCircle=!1))}setMinutes(e){const t=this;e=60===e?0:Math.max(0,Math.min(e,59)),t._updateMinutes(e),"minute"===t.selection&&t._drawArrow(!0,e,arguments[1])}propertyChangedHandler(e,t,n){super.propertyChangedHandler(e,t,n);const a=this;switch(e){case"disabled":case"unfocusable":a._setFocusable();break;case"footer":case"view":a._resizeHandler();break;case"footerTemplate":a._validateFooterTemplate();break;case"format":{let i=a.value.getHours();"12-hour"===n?(a.$ampmContainer.removeClass("smart-hidden"),a.value.getHours()<12?a._selectAmPm("am"):a._selectAmPm("pm"),0===i?i=12:i>12&&(i-=12)):a.$ampmContainer.addClass("smart-hidden"),a.$.hourContainer.innerHTML=i,"hour"===a.selection&&(a.$.picker.setAttribute("aria-valuenow",i),a._draw.clear(),a._renderSVG());break}case"minuteInterval":{const i=Math.max(1,Math.min(n,60));i!==n&&(a.minuteInterval=i),"minute"===a.selection&&(a.interval=i);break}case"selection":"hour"===n?a._changeToHourSelection():a._changeToMinuteSelection();break;case"value":{a._oldValue=t,a._validateValue();const i=a.value.getHours()===t.getHours(),o=a.value.getMinutes()===t.getMinutes();i&&o||(o?a.setHours(a.value.getHours()):(i||a.setHours(a.value.getHours(),!0),a.setMinutes(a.value.getMinutes()))),delete a._oldValue;break}}}_applyInitialSettings(){const e=this,t=e.value;let n,a;n=t.getHours(),a=t.getMinutes(),"12-hour"===e.format?n<12?(e._ampm="am",e.$amContainer.addClass("smart-selected"),0===n&&(n=12)):(e._ampm="pm",e.$pmContainer.addClass("smart-selected"),n>12&&(n-=12)):e.$ampmContainer.addClass("smart-hidden"),a=a.toString(),1===a.length&&(a="0"+a),e.$.hourContainer.innerHTML=n,e.$.minuteContainer.innerHTML=a,"hour"===e.selection?(e.$hourContainer.addClass("smart-selected"),e.$.picker.setAttribute("aria-valuenow",n)):(e.$minuteContainer.addClass("smart-selected"),e.$.picker.setAttribute("aria-valuenow",a))}_changeSelection(e,t){const n=this,a=e.pageX,i=e.pageY,o=n._getCenterCoordinates(),r=Math.sqrt(Math.pow(o.x-a,2)+Math.pow(o.y-i,2));if(n._measurements.center=o,"down"===e.type){if(r>n._measurements.radius)return void e.stopPropagation();n._dragging=!0}n._inInnerCircle="24-hour"===n.format&&"hour"===n.selection&&r<n._measurements.radius-50;let l=-1*Math.atan2(i-o.y,a-o.x)*180/Math.PI;l<0&&(l+=360),n._angle=l;let s=n._numericProcessor.getValueByAngle(n._angle);"hour"===n.selection?("24-hour"===n.format&&n._inInnerCircle?0!==s&&12!==s?s+=12:s=0:0===s&&(s=12),n._updateHours(s)):(60===s&&(s=0),n._updateMinutes(s)),void 0!==n._oldTimePart&&(cancelAnimationFrame(n._animationFrameId),delete n._animationFrameId,n._drawArrow(!0,s,t))}_changeToHourSelection(){const e=this,t=e._centralCircle.parentElement||e._centralCircle.parentNode;let n=e.value.getHours();cancelAnimationFrame(e._animationFrameId),delete e._animationFrameId,e.interval=1,e.$hourContainer.addClass("smart-selected"),e.$minuteContainer.removeClass("smart-selected"),t.removeChild(e._centralCircle),t.removeChild(e._arrow),t.removeChild(e._head),e._getMeasurements(),e._numericProcessor.getAngleRangeCoefficient(),e._draw.clear(),t.appendChild(e._centralCircle),t.appendChild(e._arrow),t.appendChild(e._head),e._renderHours(),"24-hour"===e.format&&(0===n||n>12)?e._inInnerCircle=!0:"12-hour"===e.format&&(n%=12,0===n&&(n=12)),e._drawArrow(!0,void 0,!0),e._inInnerCircle=!1,e.$.picker.firstElementChild.setAttribute("aria-hidden",!0),e.$.picker.setAttribute("aria-valuenow",n)}_changeToMinuteSelection(){const e=this,t=e._centralCircle.parentElement||e._centralCircle.parentNode;e._inInnerCircle=!1,cancelAnimationFrame(e._animationFrameId),delete e._animationFrameId,e.interval=e.minuteInterval,e.$hourContainer.removeClass("smart-selected"),e.$minuteContainer.addClass("smart-selected"),t.removeChild(e._centralCircle),t.removeChild(e._arrow),t.removeChild(e._head),e._getMeasurements(),e._numericProcessor.getAngleRangeCoefficient(),e._draw.clear(),t.appendChild(e._centralCircle),t.appendChild(e._arrow),t.appendChild(e._head),e._renderMinutes(),e._drawArrow(!0,void 0,!0),e.$.picker.firstElementChild.setAttribute("aria-hidden",!0),e.$.picker.setAttribute("aria-valuenow",e.value.getMinutes())}_computeArrowBodyPoints(e,t,n,a){const i=Math.sin(t),o=Math.cos(t),r=e-n*o+a*i,l=e+n*i+a*o,s=e+n*o+a*i,c=e-n*i+a*o,u="M "+(e+n*o)+","+(e-n*i)+" L "+(e-n*o)+","+(e+n*i)+" L "+r+","+l+" "+s+","+c;return this._headCenter={x:(r+s)/2,y:(l+c)/2},u}_createElement(){const e=this;e.setAttribute("role","dialog"),e.coerce=!0,e.min=0,e._drawMin="0",e.startAngle=-270,e.endAngle=90,e._angleDifference=e.endAngle-e.startAngle,e.ticksVisibility="none",e._tickIntervalHandler={},e._tickIntervalHandler.labelsSize={},e._distance={majorTickDistance:0,minorTickDistance:0,labelDistance:10},e._measurements={},e._validateInitialPropertyValues(),e._applyInitialSettings(),e._numericProcessor=new Smart.Utilities.DecimalNumericProcessor(e),e._draw=new Smart.Utilities.Draw(e.$.picker),e._isVisible()?(e._setPickerSize(),e._getMeasurements(),e._numericProcessor.getAngleRangeCoefficient(),e._renderSVG(),e._setFocusable(),e.$.hiddenInput.value=e.value,e.enableShadowDOM&&e.appendChild(e.$.hiddenInput)):e._renderingSuspended=!0}_documentMoveHandler(e){this._dragging&&this._changeSelection(e,!0)}_documentUpHandler(){const e=this;e._dragging?(e._inInnerCircle=!1,e._dragging=!1,e.autoSwitchToMinutes&&"hour"===e.selection&&(e.hasAnimation?function t(){e._animationFrameId?requestAnimationFrame(t):(e.$picker.addClass("animate"),setTimeout(function(){e.selection="minute",e._changeToMinuteSelection()},250),setTimeout(function(){e.$picker.removeClass("animate")},550))}():(e.selection="minute",e._changeToMinuteSelection()))):e.hasAttribute("focus")&&(e.$.fireEvent("blur"),e.removeAttribute("focus"))}_drawArrow(e,t,n){const a=this,i="hour"===a.selection,o="12-hour"===a.format;let r,l,s=a._oldTimePart;if(delete a._oldTimePart,void 0===t&&(i?(t=a.value.getHours(),o&&t>12&&(t-=12)):t=a.value.getMinutes()),void 0===s||n||!a.hasAnimation)return void a._drawArrowSVG(e,t);if(i&&!o)return void a._animate24HourView(s,t);i?(r=.2,l=12,t%=l,s%=l):(r=1,l=60);let c=t-s,u=s-t;c<0&&(c+=l),u<0&&(u+=l),u<c&&(r*=-1),function p(){s+=r,s=parseFloat((s%l).toFixed(1)),s<0&&(s+=l),a._drawArrowSVG(e,s),e=!0,s!==t%l?a._animationFrameId=requestAnimationFrame(p):delete a._animationFrameId}()}_animate24HourView(e,t){const n=this;let a=.2;n._inInnerCircle=!1;const i=0===e||e>12,o=0===t||t>12;if(i!==o){if(e=i?Math.abs(e-12):(e+12)%24,n._inInnerCircle=o,n._drawArrowSVG(!0,e),e===t)return}else n._inInnerCircle=o;let r=e,l=t;n._inInnerCircle&&(0===l&&r<18?l=12:0===r&&l<18&&(r=12));let s=l-r,c=r-l;s<0&&(s+=12),c<0&&(c+=12),c<s&&(a*=-1),function u(p){n._inInnerCircle=p,p?((e=parseFloat((e+a).toFixed(1)))<0?e+=24:e<1&&(e+=12),12!==e&&24!==e||(e=0)):(12!==(e+=a)&&(e=parseFloat((e%12).toFixed(1))),e<=0&&(e+=12)),n._drawArrowSVG(!0,e),e!==t?n._animationFrameId=requestAnimationFrame(function(){u(p)}):(delete n._animationFrameId,n._inInnerCircle=!1)}(n._inInnerCircle)}_drawArrowSVG(e,t){const n=this,a=n._measurements,i=n._numericProcessor.getAngleByValue(t);let o;o=n._computeArrowBodyPoints(a.radius,i,1,n._inInnerCircle?a.innerRadius-n._largestLabelSize/2-45:a.innerRadius-n._largestLabelSize/2),e?(n._arrow.setAttribute("d",o),n._head.setAttribute("cx",n._headCenter.x),n._head.setAttribute("cy",n._headCenter.y),n._head.setAttribute("r",n._largestLabelSize),n._headRect=n._head.getBoundingClientRect(),t%1==0&&n._highlightLabel(t)):(n._arrow=n._draw.path(o,{class:"smart-needle"}),n._head=n._draw.circle(n._headCenter.x,n._headCenter.y,n._largestLabelSize,{class:"smart-needle-central-circle"}),n._headRect=n._head.getBoundingClientRect())}_drawLabel(e,t,n){const a=this,i=a._measurements,o=i.radius,r={class:"smart-label smart-unselectable","font-size":i.fontSize,"font-family":i.fontFamily,"font-weight":i.fontWeight,"font-style":i.fontStyle};"hour"===a.selection?a._plotInnerCircle?t>0?t+=12:t="00":0===t&&(t=12):1===t.toString().length&&(t="0"+t);const l=a._draw.measureText(t,0,r),s=o-n-a._largestLabelSize/2,c=o+s*Math.sin(e),u=o+s*Math.cos(e);a._draw.text(t,Math.round(c)-l.width/2,Math.round(u)-l.height/2,l.width,l.height,0,r).setAttribute("value",parseFloat(t))}_getCenterCoordinates(){const e=this.$.picker.getBoundingClientRect(),t=this._measurements.radius,n=document.body.scrollLeft||document.documentElement.scrollLeft,a=document.body.scrollTop||document.documentElement.scrollTop;return{x:e.left+n+t,y:e.top+a+t}}_getMeasurements(){const e=this,t=e._measurements,n=document.createElement("div");let a,i,o,r,l,s;n.className="smart-label",n.style.position="absolute",n.style.visibility="hidden",e.$.svgContainer.appendChild(n),"hour"===e.selection?(a="1",i="23",e.max=12,e._drawMax="12",e._range=12):(a="00",i="55",e.max=60,e._drawMax="60",e._range=60),n.innerHTML=a,o=n.offsetWidth,l=n.offsetHeight,n.innerHTML=i,r=n.offsetWidth,s=n.offsetHeight,e._largestLabelSize=Math.max(o,l,r,s),e._tickIntervalHandler.labelsSize.minLabelSize=l,e._tickIntervalHandler.labelsSize.maxLabelSize=s;const c=window.getComputedStyle(n);t.fontSize=c.fontSize,t.fontFamily=c.fontFamily,t.fontWeight=c.fontWeight,t.fontStyle=c.fontStyle,e.$.svgContainer.removeChild(n)}_headerClickHandler(e){const t=this;if(!t.disabled&&!t.readonly)switch(e.target){case t.$.hourContainer:"hour"!==t.selection&&(t.selection="hour",t._changeToHourSelection());break;case t.$.minuteContainer:"minute"!==t.selection&&(t.selection="minute",t._changeToMinuteSelection());break;case t.$.amContainer:if(!t.$amContainer.hasClass("smart-selected")){t._selectAmPm("am");const n=new Date(t.value.getTime());t.value.setHours(t.value.getHours()-12),t.$.hiddenInput.value=t.value,t.$.fireEvent("change",{value:t.value,oldValue:n})}break;case t.$.pmContainer:if(!t.$pmContainer.hasClass("smart-selected")){t._selectAmPm("pm");const n=new Date(t.value.getTime());t.value.setHours(t.value.getHours()+12),t.$.hiddenInput.value=t.value,t.$.fireEvent("change",{value:t.value,oldValue:n})}}}_highlightLabel(e){const t=this;if(t._highlightedLabel){if(parseFloat(t._highlightedLabel.getAttribute("value"))===e)return;t._highlightedLabel.classList.remove("smart-selected"),t._highlightedLabel=void 0}let n;"hour"===t.selection?(void 0===e&&(e=t.value.getHours()),"12-hour"===t.format&&(0===e?e=12:e>12&&(e-=12)),n=e):(void 0===e&&(e=t.value.getMinutes()),n=5*Math.round(e/5),60===n&&(n=0));const a=t.$.picker.querySelector('.smart-label[value="'+n+'"]');a&&(n===e||t._overlapsLabel(a))&&(t._highlightedLabel=a,a.classList.add("smart-selected"))}_isVisible(){const e=this;return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)}_keydownHandler(e){const t=this;if(t._dragging)return;const n=(t.shadowRoot||t.getRootNode()).activeElement,a=e.key;if(!t.$.header.contains(n)||"Enter"!==a&&" "!==a){if(n===t.$.picker&&!e.altKey){let i;if("ArrowRight"===a||"ArrowUp"===a?i=1:"ArrowLeft"!==a&&"ArrowDown"!==a||(i=-1),i)if(e.preventDefault(),"hour"===t.selection){let o=t.value.getHours();0===o&&-1===i?o=23:23===o&&1===i?o=0:o+=i,"12-hour"===t.format&&(o>=12&&t.$amContainer.hasClass("smart-selected")?o-=12:o<12&&t.$pmContainer.hasClass("smart-selected")&&(o+=12)),t.setHours(o,void 0,!0)}else{let o=t.value.getMinutes();i*=t.minuteInterval,o+i>=60?o=0:o<-1*i?o=60%i==0?60+i:60-60%i:o+=i,t.setMinutes(o,!0)}}}else e.preventDefault(),t._headerClickHandler({target:n})}_overlapsLabel(e){const t=this,n=e.getBoundingClientRect();let a=t._headRect;return 0===a.height&&(a=t._headRect=t._head.getBoundingClientRect()),!(n.right-10<a.left||n.left+10>a.right||n.bottom-10<a.top||n.top+10>a.bottom)}_parseDateString(e,t){const n=e.indexOf("Date("),a=e.indexOf(")");let i=e;if(-1!==n&&-1!==a){if(i=e.slice(n+5,a),i=i.replace(/'/g,"").replace(/"/g,"").replace(/^\s+|\s+$|\s+(?=\s)/g,""),""===i.trim())return new Date;if(new RegExp(/(^(\d+)(\s*,\s*\d+)+$)/g).test(i))return i=i.replace(/\s/g,""),i=i.split(","),i.map(function(o,r){i[r]=parseInt(o)}),i.unshift(null),i=new(Function.prototype.bind.apply(Date,i)),i}if(""===i.trim())return t;if(!isNaN(i))return new Date(parseInt(i,10));try{i=new Date(i)}catch(o){i=t}return isNaN(i.getTime())?t:i}_pickerDownHandler(e){const t=this;t.disabled||t.readonly||!Smart.Utilities.Core.isMobile&&1!==e.which||(t._changeSelection(e),t.$.fireEvent("focus"),t.setAttribute("focus",""))}_pickerMoveHandler(e){"touchmove"===e.originalEvent.type&&e.originalEvent.preventDefault()}_renderHours(){const e=this;e._highlightedLabel=void 0,e._majorTicksInterval=1,e._numericProcessor.addGaugeTicksAndLabels(),"24-hour"===e.format?(e._plotInnerCircle=!0,e._distance.labelDistance=55,e._numericProcessor.addGaugeTicksAndLabels(),e._plotInnerCircle=!1,e._distance.labelDistance=10,e.$.picker.setAttribute("aria-valuemin",0),e.$.picker.setAttribute("aria-valuemax",23)):(e.$.picker.setAttribute("aria-valuemin",1),e.$.picker.setAttribute("aria-valuemax",12))}_renderMinutes(){const e=this;e._highlightedLabel=void 0,e._majorTicksInterval=5,e._numericProcessor.addGaugeTicksAndLabels(),e.$.picker.setAttribute("aria-valuemin",0),e.$.picker.setAttribute("aria-valuemax",59)}_renderSVG(){const e=this;if(e._isVisible()&&!e._renderingSuspended){if(e._centralCircle=e._draw.circle(e._measurements.radius,e._measurements.radius,4,{class:"smart-needle-central-circle"}),"hour"===e.selection&&"24-hour"===e.format&&(0===e.value.getHours()||e.value.getHours()>12)&&(e._inInnerCircle=!0),e._drawArrow(!1),e._inInnerCircle=!1,"hour"===e.selection){e.interval=1,e._renderHours();let t=e.value.getHours();"12-hour"===e.format&&t>12&&(t-=12),e._highlightLabel(t)}else e.interval=e.minuteInterval,e._renderMinutes(),e._highlightLabel(e.value.getMinutes());e.$.picker.firstElementChild.setAttribute("aria-hidden",!0)}else e._renderingSuspended=!0}refresh(){const e=this;let t=!1;e.isRendered&&(e._isVisible()?(e._renderingSuspended=!1,t=!0,e._getMeasurements(),e._numericProcessor.getAngleRangeCoefficient(),e._setPickerSize(),e._sizeChanged||t?(e._draw.clear(),e._renderSVG(),e._sizeChanged=!1):(e._headRect=e._head.getBoundingClientRect(),e._highlightLabel())):e._renderingSuspended=!0)}_resizeHandler(){this.refresh()}_selectAmPm(e){const t=this;"am"===e?(t._ampm="am",t.$pmContainer.removeClass("smart-selected"),t.$amContainer.addClass("smart-selected")):(t._ampm="pm",t.$amContainer.removeClass("smart-selected"),t.$pmContainer.addClass("smart-selected"))}_setFocusable(){const e=this;if(e.disabled||e.unfocusable)return e.$.hourContainer.removeAttribute("tabindex"),e.$.minuteContainer.removeAttribute("tabindex"),e.$.amContainer.removeAttribute("tabindex"),e.$.pmContainer.removeAttribute("tabindex"),void e.$.picker.removeAttribute("tabindex");const t=e.tabIndex>0?e.tabIndex:0;e.$.hourContainer.tabIndex=t,e.$.minuteContainer.tabIndex=t,e.$.amContainer.tabIndex=t,e.$.pmContainer.tabIndex=t,e.$.picker.tabIndex=t}_setPickerSize(){const e=this;let a=.9*Math.min(e.$.svgContainer.offsetWidth,e.$.svgContainer.offsetHeight);e._sizeChanged=void 0!==e._pickerSize&&e._pickerSize!==a,e._pickerSize=a,e._measurements.radius=a/2,e._measurements.innerRadius=e._measurements.radius-10,a+="px",e.$.picker.style.width=a,e.$.picker.style.height=a}_updateHours(e,t){const n=this;let a=e;"12-hour"===n.format?"am"===n._ampm?12===a&&(a=0):a<12&&(a+=12):a=e;const i=void 0!==n._oldValue?n._oldValue:new Date(n.value.getTime()),o=i.getHours();a!==o?(n._oldTimePart=o,void 0===n._oldValue&&n.value.setHours(a),n.$.hourContainer.innerHTML=e,!0!==t&&(n.$.hiddenInput.value=n.value,n.$.fireEvent("change",{value:n.value,oldValue:i})),"hour"===n.selection&&n.$.picker.setAttribute("aria-valuenow",e)):delete n._oldTimePart}_updateMinutes(e){const t=this,n=void 0!==t._oldValue?t._oldValue:new Date(t.value.getTime()),a=n.getMinutes();e!==a?(t._oldTimePart=a,void 0===t._oldValue&&t.value.setMinutes(e),"minute"===t.selection&&t.$.picker.setAttribute("aria-valuenow",e),1===(e=e.toString()).length&&(e="0"+e),t.$.minuteContainer.innerHTML=e,t.$.hiddenInput.value=t.value,t.$.fireEvent("change",{value:t.value,oldValue:n})):delete t._oldTimePart}_validateFooterTemplate(){const e=this,t=e.footerTemplate;if(null===t)return void(e.$.footer.innerHTML="");let n;if(t instanceof HTMLTemplateElement?n=t:"string"==typeof t&&(n=document.getElementById(t),n instanceof HTMLTemplateElement||(n=void 0)),void 0===n)return e.footerTemplate=null,void(e.$.footer.innerHTML="");const a=document.importNode(n.content,!0);if(e.enableShadowDOM)return e.$.footer.innerHTML="<slot></slot>",void e.appendChild(a);e.$.footer.appendChild(a)}_validateInitialPropertyValues(){const e=this;e._validateFooterTemplate(),e.minuteInterval=Math.max(1,Math.min(e.minuteInterval,60)),e._validateValue()}_validateValue(){const e=this,t=e.value,n=void 0!==e._oldValue?this._oldValue:new Date;if(!(t instanceof Date))if("string"==typeof t){if(/^\d{1,2}:\d{1,2}$/.test(t)){const a=t.split(":");return void(e.value=new Date(n.getFullYear(),n.getMonth(),n.getDate(),parseFloat(a[0]),parseFloat(a[1])))}e.value=e._parseDateString(t,n)}else e.value=n}})},6693:()=>{Smart("smart-tooltip",class extends Smart.ContentElement{static get properties(){return{arrow:{value:!1,type:"boolean"},arrowDirection:{allowedValues:["bottom","top","left","right"],value:"bottom",type:"string"},align:{allowedValues:["left","center","right"],value:"center",type:"string"},delay:{value:0,type:"number"},messages:{extend:!0,value:{en:{invalidSelector:'{{elementType}}: "{{property}}" must be a String, an HTMLElement or null.',htmlTemplateNotSuported:"{{elementType}}: Browser doesn't support HTMLTemplate elements.",invalidTemplate:'{{elementType}}: "{{property}}" property accepts a string that must match the id of an HTMLTemplate element from the DOM.',invalidNode:'{{elementType}}: Invalid parameter "{{node}}" when calling {{method}}.'}},type:"object"},iframeRect:{value:null,type:"object?"},offset:{value:[],type:"array"},openMode:{allowedValues:["click","focus","hover","manual"],value:"hover",type:"string"},position:{allowedValues:["bottom","top","left","right","absolute","auto"],value:"top",type:"string"},selector:{value:null,type:"any?"},tooltipTemplate:{value:null,type:"any"},value:{value:"",type:"string",reflectToAttribute:!1},visible:{value:!1,type:"boolean"}}}static get styleUrls(){return["smart.tooltip.css"]}template(){return'<div id="container" role="presentation">\n                    <div id="content" class="smart-tooltip-content" inner-h-t-m-l="[[innerHTML]]" role="presentation">\n                        <content></content>\n                    </div>\n                </div>'}propertyChangedHandler(e,t,n){super.propertyChangedHandler(e,t,n);const a=this;let i;switch(e){case"align":a._applyPosition(n);break;case"openMode":a.close(),a._handleEventListeners(t),a._handleResize();break;case"selector":a._oldOwnerElement=a._ownerElement,a._handleSelector(n,t),a._handleEventListeners();break;case"tooltipTemplate":a._handleTemplate(t);break;case"value":a.tooltipTemplate?a._handleTemplate():a.$.content.innerHTML=a.value;break;case"visible":i=n?"open":"close",a.$.fireEvent(i,{owner:a._ownerElement},a.isInShadowDOM?{composed:!0,bubbles:!0,cancelable:!0}:void 0);break;case"position":return void a._applyPosition(t)}a._applyPosition()}ready(){const e=this;super.ready(),e.getAttribute("role")||e.setAttribute("role","tooltip"),e._isParentPositionStatic="static"===window.getComputedStyle(e.parentElement||document.querySelector("body")).position,e._handleSelector(e.selector),e.visible&&e._applyPosition(),e._handleEventListeners(),e._handleResize(),e.value=e.$.content.innerHTML=e.value?e.value:e.innerHTML,e._handleTemplate()}appendChild(e){const t=this;if(!t.isCompleted){const n=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.appendChild.apply(t,n.concat(Array.prototype.slice.call(arguments)))}e?(t.$.content.appendChild(e),t._applyPosition()):t.error(t.localize("invalidNode",{elementType:t.nodeName.toLowerCase(),method:"appendChild",node:"node"}))}close(){const e=this;if(e._isOpening&&clearTimeout(e._isOpening),!e.visible)return;const t=e.isInShadowDOM?{composed:!0,bubbles:!0,cancelable:!0}:void 0;e.$.fireEvent("closing",{owner:e._ownerElement},t).defaultPrevented||(e.$.fireEvent("close",{owner:e._ownerElement},t),e.visible=!1)}clear(){const e=this.$.content;if(e)for(;e.childNodes.length;)e.removeChild(e.firstChild)}insertBefore(e,t){const n=this;if(!n.isCompleted){const a=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.insertBefore.apply(n,a.concat(Array.prototype.slice.call(arguments)))}e&&t?(n.$.content.insertBefore(e,t),n._applyPosition()):n.error(n.localize("invalidNode",{elementType:n.nodeName.toLowerCase(),method:"insertBefore",node:"newNode/referenceNode"}))}open(){const e=this;e.disabled||e.readonly||e.visible||(e._isOpening=setTimeout(function(){const t=e.isInShadowDOM?{composed:!0,bubbles:!0,cancelable:!0}:void 0;if(e.$.fireEvent("opening",{owner:e._ownerElement},t).defaultPrevented)return void clearTimeout(e._isOpening);e._applyPosition(),e.$.fireEvent("open",{owner:e._ownerElement},t);const n=e.context;e.context=e,e.visible=!0,e.context=n},e.delay))}removeChild(e){const t=this;if(!t.isCompleted){const n=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.insertBefore.apply(t,n.concat(Array.prototype.slice.call(arguments)))}e?(t.$.content.removeChild(e),t._applyPosition()):t.error(t.localize("invalidNode",{elementType:t.nodeName.toLowerCase(),method:"removeChild",node:"node"}))}reposition(){this.isRendered&&this._applyPosition()}toggle(){const e=this;e.visible?e.close():e.open()}_getDomElementPosition(e){let t=[],n=e.parentElement;for(;n&&"BODY"!==n.nodeName;)t.push(n),n=!this.enableShadowDOM||n.parentElement?n.parentElement:n.getRootNode().host;return t}_getElementAndOwnerRelation(e){const t=this._getDomElementPosition(e||this),n=t.length;let a=null;for(let i=0;i<n;i++)if("static"!==window.getComputedStyle(t[i]).getPropertyValue("position")){a=t[i];break}return a}_applyPosition(e){const t=this;if(!t._ownerElement||!t.parentElement)return;t._isParentPositionStatic="static"===window.getComputedStyle(t.parentElement).position;const n=t._ownerElement.getBoundingClientRect(),a=t.parentElement?t.parentElement.getBoundingClientRect():{top:0,left:0};let i,o;t.parentElement&&"BODY"===t.parentElement.nodeName.toUpperCase()?(i=n.top+window.scrollY,o=n.left+window.scrollX):(i=n.top-a.top,o=n.left-a.left);const r=t.position,l=t.iframeRect;let s,c={top:n.top,left:n.left,right:n.right,width:n.width,height:n.height,nonStaticParent:t._getElementAndOwnerRelation()};switch(l&&(c.top+=l.top,c.left+=l.left,c.right+=l.right),r){case"auto":case"bottom":case"top":case"left":case"right":{t.style.left="";const p=t["_position"+r.charAt(0).toUpperCase()+r.slice(1)](o,i,c);i=p.top,o=p.left,s=p.translate;break}case"absolute":e?(t.style.top=t.style.left="",i=o=0):(i=parseFloat(t.style.top),o=parseFloat(t.style.left))}const u=t.getAttribute("arrow-direction");s?t.$.container.style.setProperty("--smart-tooltip-arrow-translate",s+"px"):t.$.container.style.removeProperty("--smart-tooltip-arrow-translate"),void 0===i||isNaN(i)||(i+=("auto"===r&&"top"===u?-1:1)*parseInt(t.offset[1])||0,t.style.top=i+"px"),void 0===o||isNaN(o)||(o+=("auto"===r&&"left"===u?-1:1)*parseInt(t.offset[0])||0,t.style.left=o+"px")}_positionAuto(e,t,n){const a=this;let i,o,r=a.parentElement;for(;r;){if("hidden"===getComputedStyle(r).getPropertyValue("overflow")){i=r;break}r=r.parentElement}if(i)o=i.getBoundingClientRect();else{const x=document.scrollingElement;let D,T;document.scrollingElement?(D=x.offsetWidth,T=x.offsetHeight):(D=window.innerWidth,T=window.innerHeight),i=document.body,o={width:D,height:T,left:0,top:0,right:D,bottom:T}}const l=parseFloat(window.getComputedStyle(a).getPropertyValue("--smart-tooltip-arrow-width"))||0;let s=a._positionTop(e,t,n),c=n.nonStaticParent,u=a.offsetWidth/2-l,p=0,g=0,b=s.left,v=o.right-(b+g+a.offsetWidth),y=Math.min(0,v);if(b<=0&&v>0&&(b=Math.min(e,b+v)),y<=0&&(y=Math.sign(y)*(Math.abs(y)+o.right-(e+n.width))),c){const x=c.getBoundingClientRect();p=x.top,g=x.left}return s.top+p>=o.top?(b<=0&&(b=e),t=s.top,{left:e=Math.max(o.left-g,b+y),top:t,translate:Math.max(-u,Math.min(u,s.left-e))}):(s=a._positionBottom(e,t,n),s.top+a.offsetHeight+p<=o.bottom?(b=s.left,b<=0&&(b=e),t=s.top,{left:e=Math.max(o.left-g,b+y),top:t,translate:Math.max(-u,Math.min(u,s.left-e))}):(s=a._positionLeft(e,t,n),t=s.top,u=a.offsetHeight/2-l,t=Math.max(o.top-p,s.top+Math.min(0,o.bottom-(s.top+p+a.offsetHeight))),s.left+g>=o.left?e=s.left:(s=a._positionRight(e,t,n),e=s.left+a.offsetWidth+g<=o.right?s.left:o.right-a.offsetWidth),{left:e,top:t,translate:Math.max(-u,Math.min(u,s.top-t))}))}_getRelativeParentOffset(e){const t=this;let a=t._getElementAndOwnerRelation(t._ownerElement),i=0,o=0;if(!e)return{left:o,top:i};for(;e!==a;)i+=a.offsetTop,o+=a.offsetLeft,a=t._getElementAndOwnerRelation(a);return{left:o,top:i}}_positionTop(e,t,n){const a=this,i=a._getRelativeParentOffset(n.nonStaticParent);if(a.set("arrowDirection","bottom"),null===n.nonStaticParent)return t=n.top+window.scrollY-a.offsetHeight,{left:(e=a._getAlignmentOffset(n.left,a.offsetWidth,n.width)+window.scrollX)+i.left,top:t+i.top};if(a._isParentPositionStatic){if(t=a._ownerElement.offsetTop-a.offsetHeight,e=a._getAlignmentOffset(a._ownerElement.offsetLeft,a.offsetWidth,n.width),a._ownerElement instanceof SVGElement){const o=a._ownerElement.getBoundingClientRect(),r=a._ownerElement.parentNode.getBoundingClientRect();t=o.top-r.top-a.offsetHeight/2,e=a._getAlignmentOffset(o.left,a.offsetWidth,r.left)}return{left:e+i.left,top:t+i.top}}if(a._ownerElement instanceof SVGElement&&a._ownerElement.parentElement){const o=a._ownerElement.getBoundingClientRect(),r=a._ownerElement.parentNode.getBoundingClientRect();return t=o.top-r.top-a.offsetHeight,{left:(e=a._getAlignmentOffset(o.left-r.left,a.offsetWidth,o.width))+i.left,top:t+i.top}}return t-=a.offsetHeight,{left:(e=a._getAlignmentOffset(e,a.offsetWidth,n.width))+i.left,top:t+i.top}}_positionBottom(e,t,n){const a=this,i=a._getRelativeParentOffset(n.nonStaticParent);return a.set("arrowDirection","top"),null===n.nonStaticParent?(t=n.top+window.scrollY+n.height,{left:(e=a._getAlignmentOffset(n.left,a.offsetWidth,n.width)+window.scrollX)+i.left,top:t+i.top}):a._isParentPositionStatic?(t=a._ownerElement.offsetTop+n.height,{left:(e=a._getAlignmentOffset(a._ownerElement.offsetLeft,a.offsetWidth,n.width))+i.left,top:t+i.top}):(t+=n.height,{left:(e=a._getAlignmentOffset(e,a.offsetWidth,n.width))+i.left,top:t+i.top})}_getAlignmentOffset(e,t,n){switch(this.align){case"left":return e;case"right":return e-t+n;default:return e-t/2+n/2}}_positionLeft(e,t,n){const a=this,i=a._getRelativeParentOffset(n.nonStaticParent);return a.set("arrowDirection","right"),null===n.nonStaticParent?(t=n.top+window.scrollY+n.height/2-a.$.content.offsetHeight/2,{left:(e=n.left+window.scrollX-a.offsetWidth)+i.left,top:t+i.top}):a._isParentPositionStatic?{left:(e=a._ownerElement.offsetLeft-a.offsetWidth)+i.left,top:(t=a._ownerElement.offsetTop+n.height/2-a.$.content.offsetHeight/2)+i.top}:{left:(e-=a.offsetWidth)+i.left,top:(t=t+n.height/2-a.$.content.offsetHeight/2)+i.top}}_positionRight(e,t,n){const a=this,i=a._getRelativeParentOffset(n.nonStaticParent);return a.set("arrowDirection","left"),null===n.nonStaticParent?(t=n.top+window.scrollY+n.height/2-a.$.content.offsetHeight/2,{left:(e=n.left+window.scrollX+n.width)+i.left,top:t+i.top}):a._isParentPositionStatic?{left:(e=a._ownerElement.offsetLeft+n.width)+i.left,top:(t=a._ownerElement.offsetTop+n.height/2-a.$.content.offsetHeight/2)+i.top}:{left:(e+=n.width)+i.left,top:(t=t+n.height/2-a.$.content.offsetHeight/2)+i.top}}_eventsHandler(e){const t=this;t.disabled||t.readonly||("click"!==e.type?"mouseenter"===e.type||"focus"===e.type?this.open():this.close():t.visible?this.close():this.open())}_handleEventListeners(e){const t=this;if(t._oldOwnerElement&&"manual"!==t.openMode){let n=t._oldOwnerElement.getAttribute("aria-describedby");n&&"tooltip"===t.getAttribute("role")&&(n===t.id?t._oldOwnerElement.removeAttribute("aria-describedby"):(n=n.replace(" "+t.id,""),n=n.replace(t.id+" ",""),t._oldOwnerElement.setAttribute("aria-describedby",n))),t._oldOwnerElement.$.unlisten("mouseenter.tooltip"),t._oldOwnerElement.$.unlisten("mouseleave.tooltip"),t._oldOwnerElement.$.unlisten("focus.tooltip"),t._oldOwnerElement.$.unlisten("blur.tooltip"),t._oldOwnerElement.$.unlisten("click.tooltip"),t._oldOwnerElement=null}if(t._ownerElement){if(e)switch(e){case"hover":t._ownerElement.$.unlisten("mouseenter.tooltip"),t._ownerElement.$.unlisten("mouseleave.tooltip");break;case"focus":t._ownerElement.$.unlisten("focus.tooltip"),t._ownerElement.$.unlisten("blur.tooltip");break;case"click":t._ownerElement.$.unlisten("click.tooltip")}if("manual"!==t.openMode)switch(t._ownerElement instanceof Smart.BaseElement||(t._ownerElement.$=Smart.Utilities.Extend(t._ownerElement)),t.openMode){case"hover":t._ownerElement.$.listen("mouseenter.tooltip",t._eventsHandler.bind(t)),t._ownerElement.$.listen("mouseleave.tooltip",t._eventsHandler.bind(t));break;case"focus":t._ownerElement.$.listen("focus.tooltip",t._eventsHandler.bind(t)),t._ownerElement.$.listen("blur.tooltip",t._eventsHandler.bind(t));break;case"click":t._ownerElement.$.listen("click.tooltip",t._eventsHandler.bind(t))}}}_handleResize(){const e=this;function t(){e._applyPosition()}"click"===e.openMode?window.addEventListener("resize",t):window.removeEventListener("resize",t)}_handleSelector(e,t){const n=this;if(t&&t.removeAttribute&&t.removeAttribute("aria-describedby"),"string"==typeof e)n._ownerElement=e.length>0?document.getElementById(e):void 0;else if(e&&e.nodeType===Node.ELEMENT_NODE)n._ownerElement=e;else{if(null===e)return void(n._ownerElement=void 0);n.error(n.localize("invalidSelector",{elementType:n.nodeName.toLowerCase(),property:"selector"}))}if(!n._ownerElement||"tooltip"!==n.getAttribute("role")||!n.value)return;const a=n._ownerElement?n._ownerElement.getAttribute("aria-describedby"):null;a?a.indexOf(n.id)<0&&n._ownerElement.setAttribute("aria-describedby",a+" "+n.id):n._ownerElement.setAttribute("aria-describedby",n.id)}_handleTemplate(e){const t=this;let n=t.tooltipTemplate;if(e&&(t.$.content.innerHTML=t.value?t.value:""),null===n||!n)return;if("function"==typeof t.tooltipTemplate)return void t.tooltipTemplate(t.$.content,{value:t.value});if(!("content"in document.createElement("template")))return void t.error(t.localize("htmlTemplateNotSuported",{elementType:t.nodeName.toLowerCase()}));if(n=document.getElementById(n),null===n||!("content"in n))return void t.error(t.localize("invalidTemplate",{elementType:t.nodeName.toLowerCase(),property:"template"}));const a=n.content,i=a.childNodes.length,o=/{{\w+}}/g;let r,l=[];for(let g=0;g<i;g++)for(r=o.exec(a.childNodes[g].innerHTML);r;)l.push({childNodeIndex:g,bindingString:r[0]}),r=o.exec(a.childNodes[g].innerHTML);const s=l.length;let c,u,p=document.importNode(n.content,!0);for(let g=0;g<s;g++){c=p.childNodes[l[g].childNodeIndex],u=l.length;for(let b=0;b<u;b++)c.innerHTML=c.innerHTML.replace(l[g].bindingString,t.value)}t.$.content.innerHTML="";for(let g=0;g<p.childNodes.length;g++)p.childNodes[g].outerHTML&&(t.$.content.innerHTML+=p.childNodes[g].outerHTML)}}),function(){const e=()=>{const t=document.querySelectorAll('[data-toggle="tooltip"');if(t.length>0)for(let n=0;n<t.length;n++){if(!t[n].hasAttribute("data-title"))continue;const a=document.createElement("smart-tooltip");a.selector=t[n],a.innerHTML=t[n].getAttribute("data-title"),document.body.appendChild(a),t[n].hasAttribute("data-placement")&&(a.position=t[n].getAttribute("data-placement"))}};"complete"===document.readyState?e():(window.removeEventListener("load",e),window.addEventListener("load",e))}()},5482:()=>{Smart("smart-tree-item",class extends Smart.MenuItem{static get properties(){return{selected:{value:!1,type:"boolean"}}}ready(){const e=this;Object.defineProperty(e,"hasStyleObserver",{get:function(){return!1}}),super.ready(),e.setAttribute("role","treeitem"),e.setAttribute("aria-label",e.label)}propertyChangedHandler(e,t,n){const a=this,i=a.menu;if(super.propertyChangedHandler(e,t,n),"level"===e)return void(a.level=t);if("disabled"===e||"separator"===e||!i)return;const o=i.context;switch(i.context=i,e){case"label":{const r=i.sorted&&i.autoSort;a.firstElementChild.firstElementChild.firstElementChild.innerHTML=n,r&&(i._unsortItems(i.$.mainContainer),i._applyGrouping(i.$.mainContainer)),i._state.filter&&i._applyFilter(i._state.filter),a.setAttribute("aria-label",n);break}case"selected":a.selected=t,n?i.select(a):i.unselect(a);break;case"shortcut":{let r=a.firstElementChild.children[1];r||(r=document.createElement("div"),r.className="smart-tree-item-shortcut",a.firstElementChild.appendChild(r)),r.innerHTML=n;break}case"value":i.sort&&i.sorted&&i.autoSort&&i._refreshSorting()}i.context=o}_setId(){}}),Smart("smart-tree-items-group",class extends Smart.MenuItemsGroup{static get properties(){return{selected:{value:!1,type:"boolean"}}}ready(){const e=this;Object.defineProperty(e,"hasStyleObserver",{get:function(){return!1}}),super.ready(),e.setAttribute("role","treeitem"),e.removeAttribute("aria-haspopup"),e.setAttribute("aria-label",e.label)}propertyChangedHandler(e,t,n){const a=this,i=a.menu;if(super.propertyChangedHandler(e,t,n),"level"===e)return void(a.level=t);if("disabled"===e||"separator"===e||!i)return;const o=i.context;switch(i.context=i,e){case"expanded":a.expanded=t,n?i.expandItem(a):i.collapseItem(a);break;case"label":{const r=i.sorted&&i.autoSort;a.firstElementChild.firstElementChild.firstElementChild.innerHTML=n,r&&(i._unsortItems(i.$.mainContainer),i._applyGrouping(i.$.mainContainer)),i._state.filter&&i._applyFilter(i._state.filter),a.setAttribute("aria-label",n);break}case"selected":a.selected=t,n?i.select(a):i.unselect(a);break;case"value":i.sort&&i.sorted&&i.autoSort&&i._refreshSorting()}i.context=o}_setId(){}}),Smart("smart-tree",class extends Smart.Menu{static get properties(){return{allowDrag:{value:!1,type:"boolean"},allowDrop:{value:!1,type:"boolean"},autoHideToggleElement:{value:!1,type:"boolean"},autoLoadState:{value:!1,type:"boolean"},autoSaveState:{value:!1,type:"boolean"},autoSort:{value:!0,type:"boolean"},displayLoadingIndicator:{value:!1,type:"boolean"},dragFeedbackFormatFunction:{value:null,type:"function?"},dragOffset:{value:[10,10],type:"array"},editable:{value:!1,type:"boolean"},expandMode:{value:"multiple",allowedValues:["multiple","single"],type:"string"},filterable:{value:!1,type:"boolean"},filterInputPlaceholder:{value:"",type:"string"},filterMember:{value:"label",type:"string"},filterMode:{value:"containsIgnoreCase",allowedValues:["contains","containsIgnoreCase","doesNotContain","doesNotContainIgnoreCase","equals","equalsIgnoreCase","startsWith","startsWithIgnoreCase","endsWith","endsWithIgnoreCase"],type:"string"},hasThreeStates:{value:!1,type:"boolean"},loadingIndicatorPlaceholder:{value:"Loading...",type:"string"},loadingIndicatorPosition:{value:"center",allowedValues:["bottom","center","top"],type:"string"},messages:{value:{en:{noId:"smart-tree: Saving and loading the element's state are not available if the element has no id."}},type:"object",extend:!0},scrollMode:{value:"scrollbar",allowedValues:["scrollbar","scrollButtons"],type:"string"},selectedIndexes:{value:[],type:"array"},selectionDisplayMode:{value:"row",allowedValues:["row","label"],type:"string"},selectionMode:{value:"one",allowedValues:["none","oneOrManyExtended","zeroOrMany","oneOrMany","zeroOrOne","zeroAndOne","one","checkBox","radioButton"],type:"string"},selectionTarget:{value:"all",allowedValues:["all","leaf"],type:"string"},showLines:{value:!1,type:"boolean"},showRootLines:{value:!1,type:"boolean"},sort:{value:null,type:"function?",reflectToAttribute:!1},sortDirection:{value:"asc",allowedValues:["asc","desc"],type:"string"},sorted:{value:!1,type:"boolean"},toggleElementPosition:{value:"near",allowedValues:["near","far"],type:"string"},toggleMode:{value:"dblclick",allowedValues:["click","dblclick","arrow"],type:"string"}}}static get listeners(){return{blur:"_blurHandler",focus:"_focusHandler",keydown:"_keydownHandler",mouseenter:"_mouseenterHandler",mouseleave:"_mouseleaveHandler",resize:"_checkOverflow",styleChanged:"_styleChangedHandler",transitionend:"_overriddenMenuHandler","container.click":"_overriddenMenuHandler","container.mouseout":"_overriddenMenuHandler","container.mouseover":"_overriddenMenuHandler","container.pointerover":"_pointeroverHandler","editInput.blur":"_editInputBlurHandler","filterInput.keydown":"_filterInputKeydownHandler","filterInput.keyup":"_filterInputKeyupHandler","mainContainer.click":"_overriddenMenuHandler","mainContainer.mouseleave":"_overriddenMenuHandler","mainContainer.mouseout":"_overriddenMenuHandler","mainContainer.mouseover":"_overriddenMenuHandler","mainContainer.swipeleft":"_mainContainerSwipeHandler","mainContainer.swiperight":"_mainContainerSwipeHandler","scrollButtonFar.click":"_scrollButtonFarClickHandler","scrollButtonNear.click":"_scrollButtonNearClickHandler","scrollViewer.down":"_scrollViewerDownHandler","scrollViewer.kineticScroll":"_scrollViewerWheelHandler","scrollViewer.touchmove":"_scrollViewerTouchmoveHandler","mainContainer.wheel":"_scrollViewerWheelHandler","document.move":"_moveHandler","document.selectstart":"_selectstartHandler","document.up":"_documentUpHandler"}}static get requires(){return{"Smart.ScrollBar":"smart.scrollbar.js"}}static get styleUrls(){return["smart.scrollbar.css","smart.scrollviewer.css","smart.tree.css"]}template(){return'<div id="container" role="presentation">\n                    <div class="smart-tree-filter-input-container" role="presentation"><input id="filterInput" class="smart-filter-input" disabled="[[disabled]]" placeholder="[[filterInputPlaceholder]]" type="text" role="searchbox" aria-label="[[filterInputPlaceholder]]" /></div>\n                    <smart-repeat-button id="scrollButtonNear" class="smart-tree-scroll-button smart-spin-button smart-scroll-button-near smart-hidden" animation="[[animation]]" unfocusable aria-label="Scroll up">\n                        <div id="arrowNear" class="smart-arrow smart-arrow-up"></div>\n                    </smart-repeat-button>\n                    <smart-scroll-viewer id="scrollViewer" animation="[[animation]]" horizontal-scroll-bar-visibility="hidden" right-to-left="[[rightToLeft]]">\n                        <div id="mainContainer" inner-h-t-m-l=\'[[innerHTML]]\' class="smart-tree-main-container" role="presentation">\n                            <content></content>\n                        </div>\n                        <input type="text" id="editInput" class="smart-tree-edit-input smart-hidden" />\n                    </smart-scroll-viewer>\n                    <smart-repeat-button id="scrollButtonFar" class="smart-tree-scroll-button smart-spin-button smart-scroll-button-far smart-hidden" animation="[[animation]]" unfocusable aria-label="Scroll down">\n                        <div id="arrowFar" class="smart-arrow smart-arrow-down"></div>\n                    </smart-repeat-button>\n                    <div id="loadingIndicatorContainer" class="smart-loader-container smart-hidden" role="presentation">\n                        <span id="loadingIndicator" class="smart-loader" role="img" aria-label="[[loadingIndicatorPlaceholder]]"></span>\n                        <span id="loadingIndicatorPlaceHolder" class="smart-loader-label smart-hidden">[[loadingIndicatorPlaceholder]]</span>\n                    </div>\n                </div>'}detached(){const e=this,t=e._dragDetails;if(super.detached(),!t)return;const n=Smart.Tree.hoveredTree,a=Smart.Tree.hoveredItem;delete e._dragDetails,delete Smart.Tree.treeItemDragged,delete Smart.Tree.hoveredTree,delete Smart.Tree.hoveredItem,e.$.scrollViewer._scrollView.disableSwipeScroll=!1,t.FeedbackShown&&(a.classList.remove("drop-target","top","bottom"),document.body.classList.remove("smart-dragging"),t.Feedback.remove(),n&&clearInterval(n._dragInterval))}addAfter(e,t){void 0!==(t=this.getItem(t))&&this.addTo(e,t.parentItem,t,!0)}addBefore(e,t){void 0!==(t=this.getItem(t))&&this.addTo(e,t.parentItem,t)}addTo(e,t){const n=this;if(!(e instanceof Smart.TreeItem||e instanceof Smart.TreeItemsGroup))if("string"==typeof e){const c=document.createElement("smart-tree-item");c.label=e,e=c}else{if(!e||!e.label)return;{const c=document.createElement("smart-tree-item");c.label=e.label,e=c}}let a,i;if(e.isDirty=!1,void 0===t)a=1,i=t=n.$.mainContainer;else{if((t=n.getItem(t))instanceof Smart.TreeItemsGroup==0)return;a=t.level+1,i=t.itemContainer}n._createItemHTMLStructure(e,a,t,i.childElementCount,0);const o=n.sorted&&n.autoSort,r=n._state.filter,l=n.selectedIndexes.slice(0);o&&n._unsortItems(n.$.mainContainer),e instanceof Smart.TreeItemsGroup&&(Array.from(e.querySelectorAll("smart-tree-item, smart-tree-items-group")).forEach(c=>c.isDirty=!1),n._processHTML(e,a+1,!1));let s=arguments[2];s&&arguments[3]&&(s=s.nextElementSibling),s?(i.insertBefore(e,s),n._menuItems={},n._refreshItemPaths(n.$.mainContainer,!0,void 0,n.sorted&&!n.autoSort)):i.appendChild(e),o&&n._applyGrouping(n.$.mainContainer),r&&n._applyFilter(r),n._checkOverflow(),n._expandItemsByDefault(),n.selectedIndexes=[],n._applySelection(!0,l)}clearSelection(){const e=this,t=e.selectedIndexes.slice(0);e.selectedIndexes=[],e._applySelection(!1,t)}collapseAll(e){const t=this,n=t.animation,a=!1===e&&t.hasAnimation;a&&(t.animation="none"),t._collapseAll(!0),a&&(t.animation=n)}ensureVisible(e){const t=this;if(void 0===(e=t.getItem(e))||e.hidden)return;let n=!1;e.level>1&&!t._isBranchExpanded(e)&&(super.expandItem(e.parentItem,void 0,!0),n=t.hasAnimation,n&&(t._ensureVisibleOnTransitionend=e)),n||t._ensureVisible(e)}expandAll(e){const t=this,n=t.animation,a=!1===e&&t.hasAnimation;let i=1,o=(t.enableShadowDOM?t.shadowRoot:t).querySelectorAll('smart-tree-items-group[level="1"]');for(a&&(t.animation="none");o.length>0;){for(let r=0;r<o.length;r++){const l=o[r];l.expanded||t._menuItemsGroupSelectionHandler(l,{target:l,type:"expand"})}i++,o=(t.enableShadowDOM?t.shadowRoot:t).querySelectorAll('smart-tree-items-group[level="'+i+'"]')}a&&(t.animation=n)}expandItem(e,t){const n=this;if(void 0===(e=n.getItem(e))||e instanceof Smart.TreeItemsGroup==0||e&&e.container&&n._isContainerOpened(e.container.level,e.container))return;void 0!==Smart.Menu.processTimer&&n._lazyInitItems();const a=!1===t&&n.hasAnimation,i=n.animation;a&&(n.animation="none"),n._discardKeyboardHover(),n._menuItemsGroupSelectionHandler(e,{target:e,type:"expand"},arguments[2]),a&&(n.animation=i)}filter(e){const t=this;t.filterable&&(t._applyFilter(e),t.$.filterInput.value=e)}getState(){return JSON.parse(JSON.stringify(this._state))}insert(e,t){const n=this;let a;if(e instanceof Smart.TreeItem||e instanceof Smart.TreeItemsGroup){if(n.contains(e))return;e.isDirty=!1,a=e}else{if("object"!=typeof e||e.constructor!==Object)return;a=function l(s){const c=s[n.itemsMember],u="smart-tree-items-group"===s.tagName||Array.isArray(c)?"smart-tree-items-group":"smart-tree-item",p=document.createElement(u);if(p.isDirty=!1,s.disabled&&(p.disabled=!0),s[n.displayMember]&&(p.label=s[n.displayMember]),s.selected&&(p.selected=!0),s.separator&&(p.separator=!0),s[n.valueMember]&&(p.value=s[n.valueMember]),"smart-tree-items-group"===u){if(s.expanded&&(p.expanded=!0),c)for(let g=0;g<c.length;g++)p.appendChild(l(c[g]))}else s.shortcut&&(p.shortcut=s.shortcut);return p}(e)}if(void 0===t)return void n.addTo(a);if("number"==typeof t)t=t.toString();else if(t instanceof Smart.TreeItem||t instanceof Smart.TreeItemsGroup){if(!n.contains(t))return;t=t.path}else if("string"!=typeof t)return;const i=t.split(".");let o,r;1===i.length?(r=n._menuItems[i[0]],r?n.addBefore(a,r):n.addTo(a)):(r=n._menuItems[t],o=n._menuItems[i.slice(0,i.length-1).join(".")],r?n.addBefore(a,r):o&&o instanceof Smart.TreeItemsGroup&&n.addTo(a,o))}loadState(e){const t=this,n=t.selectedIndexes.slice(0),a=[];if(!e){if(!t.id)return void t.warn(t.localize("noId"));if(!(e=window.localStorage.getItem("smartTree"+t.id)))return}"string"==typeof e&&(e=JSON.parse(e)),e.filter&&!t.filterable&&(e.filter="");let i=e.filter!==t._state.filter;e.sorted!==t.sorted?(t.sorted=e.sorted,t._updateState("sorted",t.sorted),e.sorted?t._applyGrouping(t.$.mainContainer):t._unsortItems(t.$.mainContainer),(e.filter||i)&&(t._applyFilter(e.filter),t.$.filterInput.value=e.filter)):i&&(t._applyFilter(e.filter),t.$.filterInput.value=e.filter),t._menuItemsGroupsToExpand=[];for(let o=0;o<e.expanded.length;o++){const r=t.getItem(e.expanded[o]);r&&t._menuItemsGroupsToExpand.push(r)}t._expandItemsByDefault(!0);for(let o=0;o<e.selected.length;o++){const r=t.getItem(e.selected[o]);r&&a.push(r.path)}t.selectedIndexes=a,t._applySelection(!1,n)}moveDown(e){const t=this,n=(e=t.getItem(e)).nextElementSibling;void 0!==e&&n&&!t.sorted&&(t._moveTreeItem(e,n,2,[t]),t.filterable&&t._state.filter&&t._applyFilter(t._state.filter))}moveUp(e){const t=this,n=(e=t.getItem(e)).previousElementSibling;void 0!==e&&n&&!t.sorted&&(t._moveTreeItem(e,n,0,[t]),t.filterable&&t._state.filter&&t._applyFilter(t._state.filter))}refresh(){this._checkOverflow()}removeItem(e){const t=this;if(void 0===(e=t.getItem(e)))return;if(e instanceof Smart.TreeItemsGroup){const o=e.container;t._isContainerOpened(o.level,o)&&t._closeSubContainersTreeMode(o.level,o)}const n=t.sorted&&t.autoSort;n&&t._unsortItems(t.$.mainContainer),e.parentElement.removeChild(e),t._menuItems={},t._refreshItemPaths(t.$.mainContainer,!0,void 0,t.sorted&&!t.autoSort),n&&t._applyGrouping(t.$.mainContainer);const a=t._state.filter,i=t.selectedIndexes.slice(0);a&&t._applyFilter(a),t._checkOverflow(),t.selectedIndexes=[],t._applySelection(!0,i),delete t._treeAnimationInProgress}saveState(){const e=this;return e.id?window.localStorage.setItem("smartTree"+e.id,JSON.stringify(e._state)):e.warn(e.localize("noId")),JSON.parse(JSON.stringify(e._state))}select(e){const t=this;void 0!==(e=t.getItem(e))&&!e.selected&&t._canItemBeSelected(e)&&t._handleSelection(e,{type:"programmatic"})}unselect(e){void 0!==(e=this.getItem(e))&&e.selected&&!e.templateApplied&&this._handleSelection(e,{type:"programmatic"})}updateItem(e,t){if(void 0===(e=this.getItem(e))||void 0===t)return;const n=e instanceof Smart.TreeItem;for(let a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(n){if(-1===["disabled","label","level","selected","separator","shortcut","value"].indexOf(a))continue}else if(-1===["disabled","expanded","label","level","selected","separator","value"].indexOf(a))continue;e[a]=t[a]}}propertyChangedHandler(e,t,n){const a=this;switch(super.propertyChangedHandler(e,t,n),e){case"allowDrag":case"allowDrop":case"autoLoadState":case"autoSort":case"editable":case"filterInputPlaceholder":case"loadingIndicatorPlaceholder":case"selectionDisplayMode":case"showLines":case"showRootLines":case"toggleElementPosition":case"toggleMode":break;case"autoHideToggleElement":n?a.$mainContainer.addClass("hidden-arrows"):a.$mainContainer.removeClass("hidden-arrows");break;case"autoSaveState":if(!n)return;if(!a.id)return a.warn(a.localize("noId")),void(a.autoSaveState=!1);window.localStorage.setItem("smartTree"+a.id,JSON.stringify(a._state));break;case"dataSource":{const i=a.selectedIndexes.slice(0);a.selectedIndexes=[],a._menuItems={},a._processDataSource(),a._checkOverflow(),a._expandItemsByDefault(),a._applySelection(!0,i);const o=a._state.filter;o&&a._applyFilter(o);break}case"disabled":a._setFocusable(),a.$.scrollButtonNear.disabled=n,a.$.scrollButtonFar.disabled=n,n||a._updateScrollButtonVisibility();break;case"displayLoadingIndicator":n?(a._discardKeyboardHover(!0),a.$loadingIndicatorContainer.removeClass("smart-hidden")):a.$loadingIndicatorContainer.addClass("smart-hidden");break;case"expandMode":if("single"===n){const i=a._state.expanded.map(r=>Object.values(a._menuItems).find(l=>l.id===r)),o={};for(let r=0;r<i.length;r++){const l=i[r],s=l.parentItem;if(o[s])continue;o[s]=!0;const c=i.filter(u=>u!==l&&u.parentItem===s);c.length>0&&c.forEach(u=>a.collapseItem(u))}}break;case"filterable":!1===n&&(a._applyFilter(""),a.$.filterInput.value=""),a._checkOverflow();break;case"filterMode":a.filterable&&a._state.filter&&a._applyFilter(a._state.filter);break;case"hasThreeStates":if("checkBox"!==a.selectionMode)return;if(n)a._applySelection(!1);else{const i=(a.enableShadowDOM?a.shadowRoot:a).querySelectorAll("[indeterminate]");for(let o=0;o<i.length;o++)i[o].removeAttribute("indeterminate")}break;case"innerHTML":a.$.mainContainer.innerHTML=n,a._lazyInitItems();break;case"loadingIndicatorPosition":"center"===n?a.$loadingIndicatorPlaceHolder.addClass("smart-hidden"):a.$loadingIndicatorPlaceHolder.removeClass("smart-hidden");break;case"overflow":if("scrollbar"===a.scrollMode)return"hidden"===n?a.$.scrollViewer.$.verticalScrollBar.setAttribute("aria-hidden",!0):a.$.scrollViewer.$.verticalScrollBar.removeAttribute("aria-hidden"),void(a.$.scrollViewer.verticalScrollBarVisibility="scroll"===n?"visible":"auto");a.$.scrollViewer.scrollTop=0,"hidden"===n?(a.$scrollViewer.removeClass("scroll-buttons-shown"),a.$scrollButtonNear.addClass("smart-hidden"),a.$scrollButtonFar.addClass("smart-hidden")):(a.$.scrollButtonNear.disabled=a.disabled,a.$.scrollButtonFar.disabled=a.disabled,"auto"===n?(a.$scrollButtonNear.addClass("smart-hidden"),a.$scrollButtonFar.addClass("smart-hidden"),a._checkOverflow()):(a.$scrollViewer.addClass("scroll-buttons-shown"),a.$scrollViewer.removeClass("one-button-shown"),a.$scrollButtonNear.removeClass("smart-hidden"),a.$scrollButtonFar.removeClass("smart-hidden"),a._updateScrollButtonVisibility())),a.$.scrollViewer.refresh();break;case"rightToLeft":{let i,o;n?(i="paddingLeft",o="paddingRight"):(i="paddingRight",o="paddingLeft");for(let r in a._menuItems)if(Object.prototype.hasOwnProperty.call(a._menuItems,r)){const l=a._menuItems[r],s=l.firstElementChild;s.style[i]="",a._setIndentation(s,l.level,o)}break}case"scrollMode":if("hidden"===a.overflow)return;if(a.$.scrollViewer.scrollTop=0,"scrollButtons"===n)return"scroll"===a.overflow&&(a.$scrollViewer.addClass("scroll-buttons-shown"),a.$scrollButtonNear.removeClass("smart-hidden"),a.$scrollButtonFar.removeClass("smart-hidden")),a.$.scrollViewer.$.verticalScrollBar.setAttribute("aria-hidden",!0),a.$.scrollViewer.verticalScrollBarVisibility="auto",void a._checkOverflow();a.$.scrollViewer.$.verticalScrollBar.removeAttribute("aria-hidden"),a.$scrollViewer.removeClass("scroll-buttons-shown"),a.$scrollViewer.removeClass("one-button-shown"),a.$scrollButtonNear.addClass("smart-hidden"),a.$scrollButtonFar.addClass("smart-hidden"),a.$.scrollViewer.verticalScrollBarVisibility="auto"===a.overflow?"auto":"visible";break;case"selectedIndexes":a._applySelection(!1,t);break;case"selectionMode":if(a.setAttribute("aria-multiselectable",-1!==["oneOrManyExtended","zeroOrMany","oneOrMany","checkBox","radioButton"].indexOf(n)),void 0===a._menuItems[0])return;if("one"===t&&"none"!==n&&"checkBox"!==n&&"radioButton"!==n||-1!==t.indexOf("oneOrMany")&&-1!==n.indexOf("oneOrMany")||"none"===t&&(-1!==n.indexOf("zero")||"checkBox"===n)||"zeroOrMany"===n&&"checkBox"!==t||"radioButton"===t&&-1!==n.indexOf("Many")||!a.hasThreeStates&&("checkBox"===n||"checkBox"===t&&"zeroOrMany"===n))return a._lastSelectedItem="one"===n||"oneOrManyExtended"===n?a._menuItems[a.selectedIndexes[a.selectedIndexes.length-1]]:void 0,void a._applyAriaSelected();if(a.hasThreeStates&&"checkBox"===t){const i=(a.enableShadowDOM?a.shadowRoot:a).querySelectorAll("[indeterminate]");for(let o=0;o<i.length;o++)i[o].removeAttribute("indeterminate")}a._applySelection(!1);break;case"sort":if(!a.sorted)return;a._refreshSorting();break;case"sortDirection":a.sorted&&!a.sort&&(a._unsortItems(a.$.mainContainer),a._applyGrouping(a.$.mainContainer));break;case"sorted":{if(!n&&!a.autoSort)return a._refreshItemPathsAndSelection(),void a._updateState("sorted",!1);n?a._applyGrouping(a.$.mainContainer):a._unsortItems(a.$.mainContainer);const i=a._state.filter;i&&a._applyFilter(i),a._updateState("sorted",n),a._checkOverflow();break}case"unfocusable":a._setFocusable()}}_addDragFeedback(){const e=this,t=document.createElement("div");return t.className="smart-tree-item-feedback",t.setAttribute("parent-tree-id",e.id),e.theme&&t.setAttribute("theme",e.theme),e.dragFeedbackFormatFunction?t.innerHTML=e.dragFeedbackFormatFunction(e._dragDetails.Items):1===e._dragDetails.Items.length?t.innerHTML=e._dragDetails.Item.label:(t.classList.add("multiple"),t.innerHTML="&#xf0c5;"),document.body.appendChild(t),t}_applyFilter(e){const t=this;function n(i,o){i?(o.hidden&&o.$.removeClass("smart-hidden"),o.hidden=!1):(o.hidden||o.$.addClass("smart-hidden"),o.hidden=!0)}if(""===e&&!t.hasAttribute("filter-applied"))return;const a=Array.from(t.$.mainContainer.getElementsByClassName("last-filtered-child"));for(let i=0;i<a.length;i++)a[i].$.removeClass("last-filtered-child");(function i(o,r){let l,s=!1,c=0;r=Array.from(r);for(let u=0;u<r.length;u++){const p=r[u];p instanceof Smart.TreeItem?n(t._findItem(p,e),p):i(p,p.itemContainer.children),p.hidden||(c++,l=p),s=s||!p.hidden}if(o!==t.$.mainContainer){const u=t._findItem(o,e);n(s||u,o),s&&null===u?o.$.addClass("filtered-child"):o.$.removeClass("filtered-child"),!s&&r.length>0?(o.hiddenChildren=!0,o.$.addClass("hidden-children"),t.collapseItem(o,void 0,!1)):(o.hiddenChildren=!1,o.$.removeClass("hidden-children"))}""!==e&&c>0&&l.$.addClass("last-filtered-child")})(t.$.mainContainer,t.$.mainContainer.children),""!==e?t.setAttribute("filter-applied",""):t.removeAttribute("filter-applied"),t._updateState("filter",e),t._checkOverflow()}_applyHierarchicalSelection(e,t){const n=this,a=e!==n.$.mainContainer,i=a?e.itemContainer.children:e.children;let o=0,r=0;for(let l=0;l<i.length;l++){const s=i[l];e.selected&&s.set("selected",!0),s instanceof Smart.TreeItemsGroup?n._applyHierarchicalSelection(s,t):s.selected&&t.push(s.path),a&&(s.selected?o++:s.hasAttribute("indeterminate")&&r++)}a&&(n._setThreeStateCheckbox(e,o,r),e.selected&&t.push(e.path))}_applyRadioButtonSelection(e,t,n){const a=this,i=e!==a.$.mainContainer?e.itemContainer.children:e.children,o=[];let r;for(let l=0;l<i.length;l++){const s=i[l];s instanceof Smart.TreeItemsGroup&&a._applyRadioButtonSelection(s,t,n),s.set("selected",!1),-1!==t.indexOf(s.path)&&o.push(s)}r=0===o.length?i[0]:o[o.length-1],r.set("selected",!0),n.push(r.path)}_applySelection(e,t){const n=this;let a=n.selectedIndexes.slice(0);function i(l){const s=Object.values(n._menuItems).filter(c=>c.level===l);if(0!==s.length){for(let c=0;c<s.length;c++)if(n._canItemBeSelected(s[c]))return s[c].path;return i(l+1)}}if(void 0===t&&(t=a.slice(0)),void 0===n._menuItems[0])return n.selectedIndexes=[],n._lastSelectedItem=void 0,void(n.isRendered&&JSON.stringify(t)!==JSON.stringify([])&&n.$.fireEvent("change",{selectedIndexes:n.selectedIndexes,oldSelectedIndexes:t}));const o=n.selectionMode,r=Array.from((n.shadowRoot||n).querySelectorAll("smart-tree-item[selected], smart-tree-items-group[selected]"));for(let l=a.length-1;l>=0;l--){const s=n._menuItems[a[l]];void 0!==s&&n._canItemBeSelected(s)||a.splice(l,1)}if(e)for(let l=0;l<r.length;l++)n._canItemBeSelected(r[l])?-1===a.indexOf(r[l].path)&&a.push(r[l].path):r[l].set("selected",!1);else{for(let l=0;l<r.length;l++)r[l].set("selected",!1);r.length=0}switch(n._sortPathCollection(a),o){case"none":a.length=0;for(let l=0;l<r.length;l++)r[l].set("selected",!1);break;case"one":case"zeroAndOne":case"zeroOrOne":"one"===o&&0===a.length&&a.push(i(1));for(let l=0;l<a.length;l++){const s=n._menuItems[a[l]];if(l===a.length-1){s.set("selected",!0),a=[a[l]];break}-1!==r.indexOf(s)&&s.set("selected",!1)}break;case"oneOrMany":case"oneOrManyExtended":0===a.length&&a.push(i(1));for(let l=0;l<a.length;l++)n._menuItems[a[l]].set("selected",!0);break;case"zeroOrMany":case"checkBox":for(let l=0;l<a.length;l++)n._menuItems[a[l]].set("selected",!0);if("checkBox"===o&&n.hasThreeStates){const l=[];n._applyHierarchicalSelection(n.$.mainContainer,l),n._sortPathCollection(l),a=l}break;case"radioButton":{const l=[];n._applyRadioButtonSelection(n.$.mainContainer,a,l),n._sortPathCollection(l),a=l;break}}n.selectedIndexes=a,n._updateState("selected"),n._lastSelectedItem="one"===o||"oneOrManyExtended"===o?n._menuItems[a[a.length-1]]:void 0,n.isRendered&&!1!==arguments[2]&&JSON.stringify(t)!==JSON.stringify(a)&&n.$.fireEvent("change",{selectedIndexes:n.selectedIndexes,oldSelectedIndexes:t}),n._applyAriaSelected()}_applyAriaSelected(){const e=this,t=e.selectionMode;for(let n in e._menuItems){const a=e._menuItems[n];a.selected?a.setAttribute("aria-selected",!0):e._canItemBeSelected(a)&&-1!==["oneOrManyExtended","zeroOrMany","oneOrMany","checkBox","radioButton"].indexOf(t)?a.setAttribute("aria-selected",!1):a.removeAttribute("aria-selected")}}_autoLoadState(e){const t=this,n=[];for(let a=0;a<t._menuItemsGroupsToExpand.length;a++)t._menuItemsGroupsToExpand[a].set("expanded",!1);t._menuItemsGroupsToExpand=[];for(let a=0;a<e.expanded.length;a++){const i=t.getItem(e.expanded[a]);i&&t._menuItemsGroupsToExpand.push(i)}t.filterable&&e.filter&&(t._applyFilter(e.filter),t.$.filterInput.value=e.filter);for(let a=0;a<e.selected.length;a++){const i=t.getItem(e.selected[a]);i&&n.push(i.path)}t.selectedIndexes=n}_blurHandler(){this._discardKeyboardHover(!0)}_canItemBeHovered(e){const t=e.level;return!1===e.disabled&&!0!==e.templateApplied&&!0!==e.hidden&&(1===t||t>1&&this._isContainerOpened(t,e.parentElement.container)&&e.getBoundingClientRect().height>0)}_canItemBeSelected(e,t){return!(!0!==t&&"leaf"===this.selectionTarget&&e instanceof Smart.TreeItemsGroup)&&!1===e.disabled&&!0!==e.templateApplied}_checkOverflow(){const e=this,t=e.$.scrollViewer,n=e.overflow;if("scrollbar"===e.scrollMode||"hidden"===n)return void t.refresh();const a=t.scrollTop;"auto"===n&&(t.$.removeClass("scroll-buttons-shown"),t.$.removeClass("one-button-shown"),e.$scrollButtonNear.addClass("smart-hidden"),e.$scrollButtonFar.addClass("smart-hidden"));const i=Math.round(t.$.scrollViewerContentContainer.offsetHeight)>Math.round(t.$.scrollViewerContainer.offsetHeight),o=Math.round(t.scrollTop)>0,r=Math.round(t.$.scrollViewerContainer.offsetHeight+t.scrollTop)<Math.round(t.$.scrollViewerContentContainer.offsetHeight);i?"auto"===n?(t.$.addClass("scroll-buttons-shown"),o&&e.$scrollButtonNear.removeClass("smart-hidden"),r&&e.$scrollButtonFar.removeClass("smart-hidden"),!1===(o&&r)&&t.$.addClass("one-button-shown"),e.disabled||(e.$.scrollButtonNear.disabled=!1,e.$.scrollButtonFar.disabled=!1),t.scrollTop=a):(e.$scrollButtonNear.removeClass("smart-hidden"),e.$scrollButtonFar.removeClass("smart-hidden"),e.disabled?(e.$.scrollButtonNear.disabled=!0,e.$.scrollButtonFar.disabled=!0):(e.$.scrollButtonNear.disabled=!o,e.$.scrollButtonFar.disabled=!r)):"scroll"===n&&(e.$.scrollButtonNear.disabled=!0,e.$.scrollButtonFar.disabled=!0),t.refresh()}_createElement(){const e=this,t=window.getComputedStyle(e.$.scrollViewer);if(e.setAttribute("role","tree"),e.setAttribute("aria-multiselectable",-1!==["oneOrManyExtended","zeroOrMany","oneOrMany","checkBox","radioButton"].indexOf(e.selectionMode)),e.setAttribute("aria-orientation","vertical"),e.$.scrollViewer.onVerticalChange=e._verticalScrollbarHandler,e.isRendered||Object.defineProperty(e,"dataSource",{get:function(){return e.context===e?e.properties.dataSource.value:e._getDataSource()},set(i){e.updateProperty(e,e._properties.dataSource,i)}}),e.id||!e.autoLoadState&&!e.autoSaveState||(e.warn(e.localize("noId")),e.autoLoadState=!1,e.autoSaveState=!1),e.mode="tree",e._element="tree",e._isMobile=Smart.Utilities.Core.isMobile,e._edgeMacFF=!1,e._autoScrollCoefficient=Smart.Utilities.Core.Browser.Firefox?4:Smart.Utilities.Core.Browser.Edge?8:2,e._scrollViewerPadding=parseFloat(t.paddingTop)+parseFloat(t.paddingBottom)||0,e._state={expanded:[],filter:"",selected:[]},e._dblclickObject={numberOfClicks:0},e.autoHideToggleElement&&e.$mainContainer.addClass("hidden-arrows"),e.disabled&&(e.$.scrollButtonNear.disabled=!0,e.$.scrollButtonFar.disabled=!0),"scrollbar"===e.scrollMode&&"scroll"===e.overflow&&(e.$.scrollViewer.verticalScrollBarVisibility="visible"),null===e.dataSource&&e.$.mainContainer.firstElementChild instanceof HTMLUListElement&&e._processUList(),e.isRendered)return e._menuItems={},void(null===e.dataSource?e._processHTML(e.$.mainContainer,1):e._processDataSource());const n=(e.shadowRoot||e).querySelectorAll("smart-tree-item, smart-tree-items-group"),a=function(){let i;e.autoLoadState&&(i=window.localStorage.getItem("smartTree"+e.id),i&&(i=JSON.parse(i),e.sorted=i.sorted)),e._setFocusable(),e._menuItems={},null===e.dataSource?e._processHTML(e.$.mainContainer,1):e._processDataSource(),"scrollButtons"!==e.scrollMode&&"hidden"!==e.overflow||e.$.scrollViewer.$.verticalScrollBar.setAttribute("aria-hidden",!0),"scrollButtons"===e.scrollMode&&"scroll"===e.overflow&&(e.$scrollViewer.addClass("scroll-buttons-shown"),e.$scrollButtonNear.removeClass("smart-hidden"),e.$scrollButtonFar.removeClass("smart-hidden"),e._updateScrollButtonVisibility()),e._checkOverflow(),i&&e._autoLoadState(i),e._expandItemsByDefault(),e._applySelection(!0),e._updateState("sorted",e.sorted),e.displayLoadingIndicator&&e.$loadingIndicatorContainer.removeClass("smart-hidden"),"center"!==e.loadingIndicatorPosition&&e.$loadingIndicatorPlaceHolder.removeClass("smart-hidden"),e.__onCompleted&&(e._onCompleted=e.__onCompleted,e.__onCompleted=null,e._onCompleted())};0===n.length||e.enableShadowDOM||e.isInShadowDOM?a():(e._onCompleted&&(e.__onCompleted=e._onCompleted,e._onCompleted=null),e._ensureItemsReady(n,a))}appendChild(e){const t=this;if(!t.isCompleted){const n=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.appendChild.apply(t,n.concat(Array.prototype.slice.call(arguments)))}t.$.mainContainer&&t.$.mainContainer.appendChild(e)}_dblclickHandler(e,t,n){"dblclick"!==this.toggleMode||e instanceof Smart.TreeItem||t||this._menuItemsGroupSelectionHandler(e,n)}_discardKeyboardHover(e,t){const n=this;!t&&n._hoveredViaKeyboard&&(!e&&n._hoveredViaKeyboard instanceof Smart.MenuItemsGroup&&n._isContainerOpened(n._hoveredViaKeyboard.level+1,n._hoveredViaKeyboard.container)||(n._hoveredViaKeyboard.removeAttribute("focus"),n._hoveredViaKeyboard=void 0))}_documentUpHandler(e){if("pointercancel"===e.originalEvent.type)return;const t=this,n=t._downTimeoutInfo,a=t._dragDetails;!n||a&&a.FeedbackShown||(clearTimeout(n.timeout),t.$.scrollViewer.scrollTop!==n.scrollTop&&t.getBoundingClientRect().top===n.top||t._continueSelection(n.target,n.event)),delete t._downTimeoutInfo;const i=t._downItem,o=t.isInShadowDOM?e.originalEvent.composedPath()[0]:e.originalEvent.target;if(delete t._downItem,t._editedItem&&!t._editInputDown&&(!t._isMobile&&o!==t.$.editInput||t._isMobile&&t.getRootNode().elementFromPoint(e.clientX,e.clientY)!==t.$.editInput))return void t._endEditing();if(delete t._editInputDown,i){const y=o.closest("smart-tree-item")||o.closest("smart-tree-items-group");!y||!y.selected||y!==i||t._dragDetails&&t._dragDetails.FeedbackShown||y instanceof Smart.TreeItemsGroup&&(o.closest(".smart-tree-items-group-arrow")||o===y.container||o===y.container.firstElementChild)||t._handleSelection(y,e)}if(!a)return;const r=Smart.Tree.hoveredTree,l=Smart.Tree.hoveredItem;if(delete t._dragDetails,delete Smart.Tree.treeItemDragged,delete Smart.Tree.hoveredTree,delete Smart.Tree.hoveredItem,t.$.scrollViewer._scrollView.disableSwipeScroll=!1,!a.FeedbackShown)return;const s=r||t.getRootNode().elementFromPoint(e.clientX,e.clientY);let c;document.body.classList.remove("smart-dragging"),document.body.removeChild(a.Feedback),r&&clearInterval(r._dragInterval);const u=a.Item,p=a.Items,g=a.ValidItems;if(!s)return;if(!l||u.contains(l))return void t.$.fireEvent("dragEnd",{item:u,items:p,target:s,data:a,previousContainer:t,container:r||s,originalEvent:e});if(!r||!r.allowDrop||r.disabled)return;const b=[r];let v;if(l.classList.remove("drop-target"),l.classList.contains("top")?(l.classList.remove("top"),v="top",c=0):l.classList.contains("bottom")?(l.classList.remove("bottom"),v="bottom",c=2):(v="inside",c=1),a.DropDetails={item:l,position:v},r!==t)b.push(t);else if(a.ValidateOnDrop)for(let y=0;y<g.length;y++)if(g[y].contains(l))return;if(!t.$.fireEvent("dragEnd",{item:u,items:p,target:l,data:a,previousContainer:t,container:r,originalEvent:e}).defaultPrevented){r.sorted&&r.autoSort&&r._unsortItems(r.$.mainContainer);for(let y=0;y<g.length;y++)t._moveTreeItem(g[y],l,c,b);r.sorted&&r.autoSort&&r._applyGrouping(r.$.mainContainer),r!==t&&r._state.filter&&r._applyFilter(r._state.filter)}}_editInputBlurHandler(){this._endEditing()}_endEditing(e){const t=this,n=t._editedItem;if(!n||(delete t._editedItem,t.$editInput.addClass("smart-hidden"),t.focus(),e))return;const a=t.$.editInput.value,i=t.sorted&&t.autoSort,o=t._state.filter;a!==n.label&&(n.set("label",a),n.setAttribute("aria-label",a),n.firstElementChild.firstElementChild.firstElementChild.innerHTML=a,i&&(t._unsortItems(t.$.mainContainer),t._applyGrouping(t.$.mainContainer)),o&&t._applyFilter(o))}_ensureVisible(e){const t=this;t._ensureVisibleTreeMode(e,e.getBoundingClientRect(),t.$.scrollViewer,t.$.scrollViewer.getBoundingClientRect(),t._scrollViewerPadding),t._ensureVisibleCallback&&t._ensureVisibleCallback(e)}_pointeroverHandler(e){const t=(this.isInShadowDOM?e.composedPath()[0]:e.target).closest(".smart-tree-item-label-element>span");if(!t)return;const n=this.$.container.querySelector(".tooltip");n&&(n.classList.remove("tooltip"),n.removeAttribute("title")),t.scrollWidth>t.offsetWidth&&(t.classList.add("tooltip"),t.title=t.innerText)}_filterInputKeydownHandler(e){if("PageDown"!==e.key)return void("PageUp"===e.key&&(e.preventDefault(),e.stopPropagation()));const t=this;let n;if(e.preventDefault(),e.stopPropagation(),t.selectedIndexes.length>0){const a=t.selectedIndexes.slice(0);n=t._lastSelectedItem||t._menuItems[t.selectedIndexes[t.selectedIndexes.length-1]],"checkBox"!==t.selectionMode&&"radioButton"!==t.selectionMode&&(t.selectedIndexes=[n.path],t._applySelection(!1,a)),t.focus()}else n=t._getFirstEnabledChild(t.$.mainContainer),t.focus(),n&&t._hoverViaKeyboard(n);t._ensureVisible(n)}_focusHandler(){const e=this;e.selectedIndexes.length>0&&!e._hoveredViaKeyboard&&e._hoverViaKeyboard(e._lastSelectedItem?e._lastSelectedItem:e._menuItems[e.selectedIndexes[e.selectedIndexes.length-1]],!1,void 0,!1)}_getDataSource(){const e=[];return function t(n,a){for(let i=0;i<n.length;i++){const o=n[i],r={label:o.label};o.disabled&&(r.disabled=!0),o.selected&&(r.selected=!0),o.separator&&(r.separator=!0),null!==o.value&&(r.value=o.value),o instanceof Smart.TreeItem?o.shortcut&&(r.shortcut=o.shortcut):(o.expanded&&(r.expanded=!0),r.items=[],t(o.itemContainer.children,r.items)),a.push(r)}}(this.$.mainContainer.children,e),e}_handleHierarchicalSelection(e,t){const n=this;let a=e;for(e.selected?(e.set("selected",!1),e.setAttribute("aria-selected",!1)):(e.set("selected",!0),e.setAttribute("aria-selected",!0),e.removeAttribute("indeterminate"));a.parentItem;){const o=a.parentItem,r=o.itemContainer.children;let l=0,s=0;for(let c=0;c<r.length;c++)r[c].selected?l++:r[c].hasAttribute("indeterminate")&&s++;n._setThreeStateCheckbox(o,l,s),a=o}e instanceof Smart.TreeItemsGroup&&function o(r,l){const s=r.itemContainer.children;for(let c=0;c<s.length;c++){const u=s[c];u.set("selected",l),u.setAttribute("aria-selected",l),u.removeAttribute("indeterminate"),u instanceof Smart.TreeItemsGroup&&o(u,l)}}(e,e.selected),t.length=0;const i=Array.from((n.enableShadowDOM?n.shadowRoot:n).querySelectorAll("[selected]"));for(let o=0;o<i.length;o++)t.push(i[o].path);n._sortPathCollection(t)}_handleSelection(e,t){const n=this,a=n.selectionMode;if("none"===a||"programmatic"!==t.type&&!n._canItemBeSelected(e))return;const i=e.selected;if(i&&"down"===t.type)return;const o=n.selectedIndexes.slice(0);let r=o.slice(0);switch(a){case"one":case"zeroAndOne":if(i)return;n._menuItems[r[0]]&&(n._menuItems[r[0]].set("selected",!1),n._menuItems[r[0]].removeAttribute("aria-selected")),n.selectedIndexes=[e.path],e.set("selected",!0),e.setAttribute("aria-selected",!0),n._lastSelectedItem=e;break;case"zeroOrOne":i?(n.selectedIndexes=[],e.set("selected",!1),e.removeAttribute("aria-selected")):(void 0!==r[0]&&(n._menuItems[r[0]].set("selected",!1),n._menuItems[r[0]].removeAttribute("aria-selected")),n.selectedIndexes=[e.path],e.set("selected",!0),e.setAttribute("aria-selected",!0));break;case"oneOrMany":case"zeroOrMany":if(i){if(1===r.length&&"zeroOrMany"!==a)return;r.splice(r.indexOf(e.path),1),e.set("selected",!1),e.setAttribute("aria-selected",!1)}else r.push(e.path),n._sortPathCollection(r),e.set("selected",!0),e.setAttribute("aria-selected",!0);n.selectedIndexes=r;break;case"oneOrManyExtended":{const l=t.ctrlKey||t.metaKey,s=t.shiftKey;if(!l&&!s||s&&e===n._lastSelectedItem){for(let c=0;c<r.length;c++)n._menuItems[r[c]].set("selected",!1),n._menuItems[r[c]].setAttribute("aria-selected",!1);r=[e.path],e.set("selected",!0),e.setAttribute("aria-selected",!0),n._lastSelectedItem=e}else if(l)e.selected&&r.length>1?(r.splice(r.indexOf(e.path),1),e.set("selected",!1),e.setAttribute("aria-selected",!1)):e.selected||(r.push(e.path),n._sortPathCollection(r),e.set("selected",!0),e.setAttribute("aria-selected",!0),n._lastSelectedItem=e);else if(s){for(let c=0;c<r.length;c++)n._menuItems[r[c]].set("selected",!1),n._menuItems[r[c]].setAttribute("aria-selected",!1);r=n._selectItemRange(n._lastSelectedItem,e)}n.selectedIndexes=r;break}case"checkBox":n.hasThreeStates?n._handleHierarchicalSelection(e,r):i?(r.splice(r.indexOf(e.path),1),e.set("selected",!1),e.setAttribute("aria-selected",!1)):(r.push(e.path),n._sortPathCollection(r),e.set("selected",!0),e.setAttribute("aria-selected",!0)),n.selectedIndexes=r;break;case"radioButton":{if(e.selected)return;let l;for(let c=0;c<e.parentElement.children.length;c++){const u=e.parentElement.children[c];if(u.selected){l=u;break}}const s=r.indexOf(l.path);l.set("selected",!1),e.setAttribute("aria-selected",!1),e.set("selected",!0),e.setAttribute("aria-selected",!0),r.splice(s,1),r.push(e.path),n._sortPathCollection(r),n.selectedIndexes=r;break}}if(n._discardKeyboardHover(!0),n._hoverViaKeyboard(e,!1,void 0,!n._treeAnimationInProgress),n._updateState("selected"),JSON.stringify(o)!==JSON.stringify(n.selectedIndexes)){if(n.ownerElement&&!n.ownerElement.isRendered)return;n.$.fireEvent("change",{item:e,selectedIndexes:n.selectedIndexes,oldSelectedIndexes:o})}}_hoverViaKeyboard(e,t,n,a){if(!e)return;const i=this;e.setAttribute("focus",""),i._hoveredViaKeyboard=e,!1!==a&&i._ensureVisible(e),t&&i._handleSelection(e,n),i._hoverViaKeyboardCallback&&i._hoverViaKeyboardCallback(e)}_keydownHandler(e){const t=this,n=e.key;if(t._editedItem)return void("Enter"===n?t._endEditing():"Escape"===n&&t._endEditing(!0));if(t.getRootNode().activeElement!==t||-1===["ArrowDown","ArrowLeft","ArrowRight","ArrowUp","End","Enter","F2","Home","PageDown","PageUp"," "].indexOf(n)||t.disabled||t.displayLoadingIndicator)return;"Enter"!==n&&e.preventDefault();const a=Array.from(t.$.mainContainer.querySelectorAll("smart-tree-item, smart-tree-items-group")),i="one"===t.selectionMode||"oneOrManyExtended"===t.selectionMode&&!e.ctrlKey&&!e.metaKey,o=t.$.mainContainer.querySelector("[focus]");function r(u){for(let p=u;p<a.length;p++){const g=a[p];if(t._canItemBeHovered(g)){if(o){if(o===g)break;o.removeAttribute("focus")}t._hoverViaKeyboard(g,i,e);break}}}function l(u){for(let p=u;p>=0;p--){const g=a[p];if(t._canItemBeHovered(g)){if(o){if(o===g)break;o.removeAttribute("focus")}t._hoverViaKeyboard(g,i,e);break}}}function s(){o.level>1&&t._canItemBeSelected(o.parentItem)&&(o.removeAttribute("focus"),t._hoverViaKeyboard(o.parentItem,i,e))}let c;switch(n){case"ArrowDown":c=o?a.indexOf(o)+1:0,r(c);break;case"ArrowLeft":if(!o)return;if(o instanceof Smart.TreeItem)s();else{if(t._isContainerOpened(o.level+1,o.container))return void t._closeSubContainersTreeMode(o.level+1,o.container,!0,!0);s()}break;case"ArrowRight":if(!o||o instanceof Smart.TreeItem)return;if(t._isContainerOpened(o.level+1,o.container)){const u=t._getFirstEnabledChild(o.itemContainer);u&&(o.removeAttribute("focus"),t._hoverViaKeyboard(u,i,e))}else t._menuItemsGroupSelectionHandler(o,{target:o,type:"keydown"});break;case"ArrowUp":c=o?a.indexOf(o)-1:a.length-1,l(c);break;case"End":l(a.length-1);break;case"Enter":o&&o instanceof Smart.TreeItemsGroup&&t._menuItemsGroupSelectionHandler(o,{target:o,type:"keydown"});break;case"F2":t.editable&&t._startEditing(o);break;case"Home":r(0);break;case"PageDown":t._pageDownHandler(a,o,i,e);break;case"PageUp":t._pageUpHandler(a,o,i,e);break;case" ":o&&t._handleSelection(o,e)}}_mainContainerSwipeHandler(e){Smart.Tree.treeItemDragged&&e.stopPropagation()}_menuItemsGroupSelectionHandler(e,t,n){const a=this,i=a.toggleMode,o=!!t.originalEvent&&t.originalEvent.target.classList.contains("smart-tree-items-group-arrow"),r=e.container;if(a._waitAnimation&&a._treeAnimationInProgress||("down"!==t.type||o||"dblclick"===i&&1!==a._dblclickObject.numberOfClicks||a._handleSelection(e,t),"down"===t.type&&!o&&("dblclick"===i&&2!==a._dblclickObject.numberOfClicks||"click"===i&&a._dblclickObject.numberOfClicks>1||"arrow"===i)||e.hiddenChildren))return;const l=r.level;let s=a.hasAnimation;if("keydown"===t.type&&a._discardKeyboardHover(),a._treeAnimationInProgress&&(r.removeEventListener("transitionend",a._transitionendHandlerExpand),r.removeEventListener("transitionend",a._transitionendHandlerCollapse)),a._isContainerOpened(l,r))a._closeSubContainersTreeMode(l,r,!0,!1!==n);else{if(a.$.fireEvent("expanding",{item:e,label:e.label,path:e.path,value:e.value,children:e.itemContainer.children}).defaultPrevented)return;if(a._handleSingleExpandMode(e),s&&("expand"!==t.type&&(a._ensureVisibleOnTransitionend=e),a._expandSection(r)),r.$.removeClass("smart-visibility-hidden"),"keydown"===t.type&&(e.setAttribute("focus",""),a._hoveredViaKeyboard=e),e.$.addClass("smart-tree-items-group-opened"),e.$.addClass("smart-tree-items-group-expanded"),a._addOpenedContainer(l,r),void 0===t.type&&a._hoverViaKeyboard(a._getFirstEnabledChild(e.itemContainer)),!1!==n){const c={item:e,label:e.label,path:e.path,value:e.value,children:e.itemContainer.children};a.toggleCallback?(c.type="expand",a.toggleCallback(c)):a.$.fireEvent("expand",c)}}s||(a._checkOverflow(),"expand"!==t.type&&a._ensureVisible(e))}_handleSingleExpandMode(e){const t=this;if("single"!==t.expandMode)return;const n=e.parentItem,a=t._state.expanded.map(i=>Object.values(t._menuItems).find(o=>o.id===i)).filter(i=>i.parentItem===n);a.length>0&&a.forEach(i=>t.collapseItem(i))}_mouseenterHandler(){const e=this;e.autoHideToggleElement&&e.$mainContainer.removeClass("hidden-arrows"),Smart.Tree.treeItemDragged&&e.allowDrop&&!e.disabled&&(Smart.Tree.hoveredTree=e)}_mouseleaveHandler(){if(this.autoHideToggleElement&&this.$mainContainer.addClass("hidden-arrows"),Smart.Tree.treeItemDragged){Smart.Tree.hoveredTree&&(clearInterval(Smart.Tree.hoveredTree._dragInterval),delete Smart.Tree.hoveredTree);const t=Smart.Tree.hoveredItem;t&&(t.classList.remove("drop-target"),t.classList.remove("top"),t.classList.remove("bottom"),delete Smart.Tree.hoveredItem)}}_moveHandler(e){const t=this,n=t._dragDetails;if(!n)return;if(!n.FeedbackShown){if(!(Math.abs(n.StartPosition.left-e.pageX)>5||Math.abs(n.StartPosition.top-e.pageY)>5))return;if(t.$.fireEvent("dragStart",{item:n.Item,items:n.Items,data:n,container:t,previousContainer:t,originalEvent:n.OriginalEvent}).defaultPrevented)return delete t._dragDetails,delete Smart.Tree.treeItemDragged,delete Smart.Tree.hoveredTree,delete Smart.Tree.hoveredItem,void(t.$.scrollViewer._scrollView.disableSwipeScroll=!1);document.body.classList.add("smart-dragging"),n.Feedback=t._addDragFeedback(),n.FeedbackShown=!0}const a=t.dragOffset;let i,o,r;if(t.$.fireEvent("dragging",{item:n.Item,items:n.Items,data:n,originalEvent:e}),n.Feedback.style.left=e.pageX+a[0]+"px",n.Feedback.style.top=e.pageY+a[1]+"px",t._isMobile){const s=Smart.Tree.hoveredItem;s&&(s.classList.remove("drop-target"),s.classList.remove("top"),s.classList.remove("bottom"),delete Smart.Tree.hoveredItem);const c=t.getRootNode().elementFromPoint(e.clientX,e.clientY);Smart.Tree.hoveredTree&&(clearInterval(Smart.Tree.hoveredTree._dragInterval),delete Smart.Tree.hoveredTree),c&&(i=c.closest("smart-tree"),i&&i.allowDrop&&(Smart.Tree.hoveredTree=i,o=c.closest("smart-tree-item")||c.closest("smart-tree-items-group"),o?r=o:o=c))}if(i=Smart.Tree.hoveredTree,!i)return;const l=i.filterable?i.$.filterInput.offsetHeight+10:0;if(clearInterval(i._dragInterval),i._dragInterval=setInterval(function(){const s=i.getBoundingClientRect();i.$.scrollViewer.scrollHeight>0&&s.left<=e.clientX&&s.left+s.width>=e.clientX?e.clientY>=s.top+l&&e.clientY<=s.top+20+l?(i.$.scrollViewer.scrollTop-=t._autoScrollCoefficient,"scrollButtons"===i.scrollMode&&i._updateScrollButtonVisibility()):e.clientY>=s.top+s.height-20&&e.clientY<=s.top+s.height?(i.$.scrollViewer.scrollTop+=t._autoScrollCoefficient,"scrollButtons"===i.scrollMode&&i._updateScrollButtonVisibility()):clearInterval(i._dragInterval):clearInterval(i._dragInterval)},1),t._isMobile||(o=e.originalEvent.target,o&&o.enableShadowDOM&&(o=e.originalEvent.composedPath()[0]),o&&o.closest&&(r=o.closest("smart-tree-item")||o.closest("smart-tree-items-group"))),r){if(Smart.Tree.hoveredItem&&r!==Smart.Tree.hoveredItem&&(Smart.Tree.hoveredItem.classList.remove("drop-target"),Smart.Tree.hoveredItem.classList.remove("top"),Smart.Tree.hoveredItem.classList.remove("bottom")),Smart.Tree.hoveredItem=r,n.Item.contains(r))return;const s=r.getBoundingClientRect();r instanceof Smart.TreeItem?e.clientY-s.top<=s.height/2?(r.classList.remove("bottom"),r.classList.add("top")):(r.classList.remove("top"),r.classList.add("bottom")):e.clientY-s.top<=10?(r.classList.remove("bottom"),r.classList.add("top")):!r.expanded&&s.bottom-e.clientY<=10?(r.classList.remove("top"),r.classList.add("bottom")):(r.classList.remove("top"),r.classList.remove("bottom")),r.classList.add("drop-target")}else if(Smart.Tree.hoveredItem&&(Smart.Tree.hoveredItem.classList.remove("drop-target"),Smart.Tree.hoveredItem.classList.remove("top"),Smart.Tree.hoveredItem.classList.remove("bottom")),o===i.$.scrollViewer.$.scrollViewerContainer)if(i._menuItems[0]){let s=i.$.mainContainer.lastElementChild,c=i.$.mainContainer.childElementCount-1;for(;s.hidden&&(c--,s=i.$.mainContainer.children[c],s););if(s){if(n.Item===s)return;Smart.Tree.hoveredItem=s,Smart.Tree.hoveredItem.classList.add("bottom")}else Smart.Tree.hoveredItem=i.$.container;Smart.Tree.hoveredItem.classList.add("drop-target")}else Smart.Tree.hoveredItem=i.$.container,Smart.Tree.hoveredItem.classList.add("drop-target");else delete Smart.Tree.hoveredItem}_moveSubItems(e,t,n){const a=this;for(let i=0;i<e.length;i++){const o=e[i];o.menu=t,o.set("level",o.parentItem.level+1),o.firstElementChild.style.paddingLeft="",o.firstElementChild.style.paddingRight="",a._setIndentation(o.firstElementChild,o.level,n),o.hidden=!1,o.$.removeClass("smart-hidden"),o.$.removeClass("filtered-child"),o.$.removeClass("last-filtered-child"),o instanceof Smart.TreeItemsGroup&&(o.$.removeClass("hidden-children"),o.container.level=o.level+1,a._moveSubItems(o.itemContainer.children,t,n),t!==a&&o.expanded&&(t._menuItemsGroupsToExpand.push(o),a._updateState("expanded",o.id,!1)))}}_moveTreeItem(e,t,n,a){const i=this,o=e.level;if(0===n){if(t.previousElementSibling===e)return;t.parentElement.insertBefore(e,t),e.set("level",t.level),e.parentItem=t.parentItem}else if(2===n){if(t.nextElementSibling===e)return;t.parentElement.insertBefore(e,t.nextElementSibling||null),e.set("level",t.level),e.parentItem=t.parentItem}else if(t===a[0].$.container)a[0].$.mainContainer.appendChild(e),e.set("level",1),e.parentItem=void 0;else{if(t.itemContainer.lastElementChild===e)return;t.itemContainer.appendChild(e),e.set("level",t.level+1),e.parentItem=t}const r=a[0].rightToLeft?"paddingRight":"paddingLeft";if(e.menu=a[0],e.parentItem=e.parentElement.menuItemsGroup,e.firstElementChild.style.paddingLeft="",e.firstElementChild.style.paddingRight="",i._setIndentation(e.firstElementChild,e.level,r),e.hidden=!1,e.$.removeClass("smart-hidden"),e.$.removeClass("filtered-child"),e.$.removeClass("last-filtered-child"),e instanceof Smart.TreeItemsGroup&&(e.$.removeClass("hidden-children"),e.container.level=e.level+1,i._moveSubItems(e.itemContainer.children,a[0],r),e.expanded)){const l=i._openedContainers[o+1].indexOf(e.container);-1!==l&&i._openedContainers[o+1].splice(l,1),a[0]._menuItemsGroupsToExpand.push(e),2===a.length&&i._updateState("expanded",e.id,!1)}for(let l=0;l<a.length;l++){const s=a[l],c=s.context,u=s.selectedIndexes.slice(0);s.context=s,s._menuItems={},s._refreshItemPaths(s.$.mainContainer,!0,void 0,s.sorted&&!s.autoSort),s.selectedIndexes=[],s._applySelection(!0,u,!1),s._checkOverflow(),s.context=c}a[0]._expandItemsByDefault()}_overriddenMenuHandler(){}_pageDownHandler(e,t,n,a){const i=this,o=i.$.scrollViewer;function r(){for(let s=e.length-1;s>=0;s--){const c=e[s];if(i._canItemBeHovered(c)&&i._getOffsetTop(c)+c.firstElementChild.offsetHeight<=o.scrollTop+o.$.container.offsetHeight)return c}}if(!t)return;let l=r();l&&(t!==l?(t.removeAttribute("focus"),i._hoverViaKeyboard(l,n,a)):o.scrollTop+o.$.container.offsetHeight!==o.$.scrollViewerContentContainer.offsetHeight&&(i.$.scrollViewer.scrollTop+=o.$.container.offsetHeight,"scrollButtons"===i.scrollMode&&i._updateScrollButtonVisibility(),l=r(),t.removeAttribute("focus"),i._hoverViaKeyboard(l,n,a)))}_pageUpHandler(e,t,n,a){const i=this,o=i.$.scrollViewer;function r(){for(let s=0;s<e.length;s++){const c=e[s];if(i._canItemBeHovered(c)&&i._getOffsetTop(c)>=o.scrollTop)return c}}if(!t)return;let l=r();l&&(t!==l?(t.removeAttribute("focus"),i._hoverViaKeyboard(l,n,a)):0!==o.scrollTop?(i.$.scrollViewer.scrollTop-=o.$.container.offsetHeight,"scrollButtons"===i.scrollMode&&i._updateScrollButtonVisibility(),l=r(),t.removeAttribute("focus"),i._hoverViaKeyboard(l,n,a)):i.filterable&&i.$.filterInput.focus())}_refreshItemPathsAndSelection(){const e=this,t=e.selectedIndexes.slice(0);e._menuItems={},e._refreshItemPaths(e.$.mainContainer,!0),e.selectedIndexes=[],e._applySelection(!0,t)}_refreshSorting(){const e=this;e._unsortItems(e.$.mainContainer),e._applyGrouping(e.$.mainContainer);const t=e._state.filter;t&&e._applyFilter(t),e._checkOverflow()}_scroll(e){const t=this;t.$.scrollViewer.scrollTop=t.$.scrollViewer.scrollTop+10*e,t._updateScrollButtonVisibility(),t.focus()}_scrollButtonFarClickHandler(){this.$.scrollButtonFar.disabled||this._scroll(1)}_scrollButtonNearClickHandler(){this.$.scrollButtonNear.disabled||this._scroll(-1)}_scrollViewerDownHandler(e){const t=this;if(e.target!==t.$.scrollViewer||t.disabled||t.displayLoadingIndicator||!t._isMobile&&1!==e.which)return;const n=e.originalEvent.target;if(n!==t.$.editInput)if(t._isMobile){const a=t.$.scrollViewer.scrollTop,i=t.getBoundingClientRect().top,o=setTimeout(function(){if(!t._dragDetails&&t.$.scrollViewer.scrollTop===a&&t.getBoundingClientRect().top===i){const r=t.context;t.context=t,t._continueSelection(n,e),t.context=r}},250);t._downTimeoutInfo={target:n,event:e,scrollTop:a,top:i,timeout:o}}else t._continueSelection(n,e);else t._editInputDown=!0}_continueSelection(e,t){const n=this,a=e.closest("smart-tree-item")||e.closest("smart-tree-items-group");if(!(a&&a.parentElement&&n._canItemBeSelected(a,!0)))return;const i=e.closest(".smart-tree-items-group-arrow");let o;if(a instanceof Smart.TreeItem)o="_handleSelection";else{if(e===a.container||e===a.container.firstElementChild)return;o="_menuItemsGroupSelectionHandler"}if(clearTimeout(n._dblclickTimeout),a!==n._dblclickObject.target&&(n._dblclickObject.numberOfClicks=0),n._dblclickObject.target=a,n._dblclickObject.numberOfClicks++,n._dblclickTimeout=setTimeout(function(){n._dblclickObject.numberOfClicks=0},300),2===n._dblclickObject.numberOfClicks){if(n.editable)return void n._startEditing(a);n._dblclickHandler(a,i,t),n._dblclickObject.numberOfClicks=0}a.selected&&(n._downItem=a),n[o](a,t),n._discardKeyboardHover(!0),n._hoverViaKeyboard(a,!1,void 0,!1),i||n._startDragging(a,t)}_scrollViewerTouchmoveHandler(e){this._dragDetails&&e.cancelable&&(e.preventDefault(),e.stopPropagation())}_scrollViewerWheelHandler(){const e=this;"scrollButtons"===e.scrollMode&&"hidden"!==e.overflow&&e._updateScrollButtonVisibility()}_selectItemRange(e,t){const n=this,a=Array.from(n.$.mainContainer.querySelectorAll("smart-tree-item, smart-tree-items-group")),i=a.indexOf(e),o=a.indexOf(t),r=[];for(let l=Math.min(i,o);l<=Math.max(i,o);l++){const s=a[l];n._canItemBeHovered(s)&&(r.push(s.path),s.set("selected",!0))}return r}_selectstartHandler(e){this._dragDetails&&e.preventDefault()}_setFocusable(){super._setFocusable();const e=this;e.disabled||e.unfocusable?e.$.filterInput.tabIndex=-1:e.$.filterInput.removeAttribute("tabindex")}_setIndentation(e,t,n){const a=this;let i=a._paddingSize;void 0===i&&(i=parseFloat(getComputedStyle(a).getPropertyValue("--smart-tree-indent")),isNaN(i)?i=20:i+=4,a._paddingSize=i),e.style[n]=t*i-i/2+"px"}_setThreeStateCheckbox(e,t,n){t===e.itemContainer.childElementCount&&t>0?(e.removeAttribute("indeterminate"),e.set("selected",!0),e.setAttribute("aria-selected",!0)):0===t&&0===n?(e.removeAttribute("indeterminate"),e.set("selected",!1),e.setAttribute("aria-selected",!1)):(e.setAttribute("indeterminate",""),e.set("selected",!1),e.setAttribute("aria-selected",!1))}_sortItems(e){const t=this;if(!t.sorted)return;let n;e instanceof Smart.TreeItemsGroup?n=e.container.firstElementChild:e===t.$.mainContainer&&(n=e);let a=Array.from(n.children);if(t.sort){const i=t.sort(a,e);Array.isArray(i)&&(a=i)}else a.sort("asc"===t.sortDirection?function(i,o){return i.label.localeCompare(o.label)}:function(i,o){return o.label.localeCompare(i.label)});for(let i=a.length-1;i>=0;i--)n.insertBefore(a[i],n.firstElementChild)}_sortPathCollection(e){e.sort(function(t,n){const a=t.split("."),i=n.split("."),o=Math.max(a.length,i.length);for(let r=0;r<o;r++){const l=parseFloat(a[r]),s=parseFloat(i[r]);if(isNaN(l))return-1;if(isNaN(s))return 1;if(l<s)return-1;if(l>s)return 1}})}_startDragging(e,t){const n=this,a=n.selectionMode;if(!n.allowDrag||n._editedItem||"none"===a)return;const i=[],o=[];let r;if(-1!==["one","zeroAndOne","zeroOrOne","checkBox","radioButton"].indexOf(a))r=!1,i.push(e),o.push(e);else{r=!0;for(let l=0;l<n.selectedIndexes.length;l++)i.push(n._menuItems[n.selectedIndexes[l]]),o.push(i[l]);for(let l=0;l<i.length;l++){const s=i[l];if(-1!==o.indexOf(s))for(let c=o.length-1;c>=0;c--){const u=o[c];if(u===s)break;s.contains(u)&&o.splice(c,1)}}}n._dragDetails={StartPosition:{left:t.pageX,top:t.pageY},Items:i,ValidItems:o,Item:e,FeedbackShown:!1,ValidateOnDrop:r,OriginalEvent:t,StartTime:new Date,Dragging:!0},Smart.Tree.treeItemDragged=!0,n.$.scrollViewer._scrollView.disableSwipeScroll=!0,n.allowDrop&&(Smart.Tree.hoveredTree=n,Smart.Tree.hoveredItem=e)}_startEditing(e){const t=this,n=t.$.editInput;let a,i;if(!t._canItemBeSelected(e,!0))return;const o=e.firstElementChild,r=o.firstElementChild;t.rightToLeft?(a=function(){return o.offsetWidth-r.offsetLeft-r.offsetWidth},i="paddingRight"):(a=function(){return r.offsetLeft+parseFloat(window.getComputedStyle(o).borderLeftWidth)},i="paddingLeft"),e instanceof Smart.TreeItemsGroup?(n.style[i]=a()+(t.showLines?parseFloat(window.getComputedStyle(r.firstElementChild).paddingLeft):0)-1+"px",n.style.height=o.offsetHeight+"px"):(n.style[i]=e.offsetWidth+parseInt(o.style[i],10)-o.offsetWidth+parseFloat(window.getComputedStyle(r.firstElementChild).paddingLeft)-2+"px",n.style.height=e.offsetHeight+"px"),n.style.top=t._getOffsetTop(e)+"px",t.$editInput.removeClass("smart-hidden"),n.value=e.label,t._editedItem=e,n.setAttribute("aria-label","Edit item "+e.label),setTimeout(function(){n.focus()},0)}_styleChangedHandler(e){e.detail.styleProperties&&e.detail.styleProperties["font-size"]&&this._checkOverflow()}_updateScrollButtonVisibility(){const e=this,t=e.overflow;if("scrollbar"===e.scrollMode||"hidden"===t)return;let n=!0,a=!0;if(0===Math.round(e.$.scrollViewer.scrollTop)&&(n=!1),Math.round(e.$.scrollViewer.$.scrollViewerContainer.offsetHeight+e.$.scrollViewer.scrollTop)>=Math.round(e.$.scrollViewer.$.scrollViewerContentContainer.offsetHeight)&&(a=!1),"auto"===t){if(n&&a)return e.$scrollButtonNear.removeClass("smart-hidden"),e.$scrollButtonFar.removeClass("smart-hidden"),e.$scrollViewer.removeClass("one-button-shown"),void e.$.scrollViewer.refresh();n?e.$scrollButtonNear.removeClass("smart-hidden"):e.$scrollButtonNear.addClass("smart-hidden"),a?e.$scrollButtonFar.removeClass("smart-hidden"):e.$scrollButtonFar.addClass("smart-hidden"),e.$scrollViewer.addClass("one-button-shown"),e.$.scrollViewer.refresh()}else"scroll"!==t||e.disabled||(e.$.scrollButtonNear.disabled=!n,e.$.scrollButtonFar.disabled=!a)}_updateState(e,t,n){const a=this;switch(e){case"expanded":{const i=a._state.expanded.indexOf(t);if(n&&-1===i)a._state.expanded.push(t);else{if(n||-1===i)return;a._state.expanded.splice(i,1)}break}case"filter":a._state.filter=void 0!==t?t:a.$.filterInput.value;break;case"selected":a._state.selected=[];for(let i=0;i<a.selectedIndexes.length;i++)a._state.selected.push(a._menuItems[a.selectedIndexes[i]].id);break;case"sorted":a._state.sorted=t}a.autoSaveState&&window.localStorage.setItem("smartTree"+a.id,JSON.stringify(a._state))}_verticalScrollbarHandler(){const e=this,t=e.$.verticalScrollBar,n=t.value;e.disabled||(t.max!==n?t.min!==n?(delete e._topReached,delete e._bottomReached):e._topReached||(e.$.fireEvent("scrollTopReached"),delete e._bottomReached,e._topReached=!0):e._bottomReached||(e.$.fireEvent("scrollBottomReached"),delete e._topReached,e._bottomReached=!0))}})}},ge={};function I(e){var t=ge[e];if(void 0!==t)return t.exports;var n=ge[e]={exports:{}};return he[e](n,n.exports,I),n.exports}I.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return I.d(t,{a:t}),t},I.d=(e,t)=>{for(var n in t)I.o(t,n)&&!I.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},I.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";I(2737),I(6321),I(9135),I(6170),I(2515),I(1731),I(6057),I(6802),I(2612),I(5707),I(7650),I(9362),I(3661),I(5482),I(6693),I(8588),I(7341),I(2052),I(8687),I(4232),I(2754),I(6297),I(7997),I(5810),I(1419),I(5473),I(501),I(5435),I(2066),I(4896),I(9264),I(2864),I(9633),I(2629),I(9613),I(7054),I(3176),I(3131),I(5766),I(8228),I(1193),I(9719),I(4045),I(7343),I(7333),I(9325),I(884),I(3637),I(9278),I(8469),I(7422),I(3225),I(1378),I(8587),I(238),I(5306),Smart,Smart})()})()},38:(_e,fe,ue)=>{var H=ue(8506).default;(()=>{var he={2737:e=>{var t=function(n){"use strict";var o,a=Object.prototype,i=a.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},l=r.iterator||"@@iterator",s=r.asyncIterator||"@@asyncIterator",c=r.toStringTag||"@@toStringTag";function u(m,h,f){return Object.defineProperty(m,h,{value:f,enumerable:!0,configurable:!0,writable:!0}),m[h]}try{u({},"")}catch(m){u=function(h,f,_){return h[f]=_}}function p(m,h,f,_){var S=Object.create((h&&h.prototype instanceof T?h:T).prototype),E=new re(_||[]);return S._invoke=function(m,h,f){var _=b;return function(S,E){if(_===y)throw new Error("Generator is already running");if(_===x){if("throw"===S)throw E;return d()}for(f.method=S,f.arg=E;;){var $=f.delegate;if($){var L=W($,f);if(L){if(L===D)continue;return L}}if("next"===f.method)f.sent=f._sent=f.arg;else if("throw"===f.method){if(_===b)throw _=x,f.arg;f.dispatchException(f.arg)}else"return"===f.method&&f.abrupt("return",f.arg);_=y;var k=g(m,h,f);if("normal"===k.type){if(_=f.done?x:v,k.arg===D)continue;return{value:k.arg,done:f.done}}"throw"===k.type&&(_=x,f.method="throw",f.arg=k.arg)}}}(m,f,E),S}function g(m,h,f){try{return{type:"normal",arg:m.call(h,f)}}catch(_){return{type:"throw",arg:_}}}n.wrap=p;var b="suspendedStart",v="suspendedYield",y="executing",x="completed",D={};function T(){}function M(){}function A(){}var B={};B[l]=function(){return this};var O=Object.getPrototypeOf,N=O&&O(O(C([])));N&&N!==a&&i.call(N,l)&&(B=N);var P=A.prototype=T.prototype=Object.create(B);function V(m){["next","throw","return"].forEach(function(h){u(m,h,function(f){return this._invoke(h,f)})})}function Y(m,h){function f(S,E,$,L){var k=g(m[S],m,E);if("throw"!==k.type){var F=k.arg,R=F.value;return R&&"object"==typeof R&&i.call(R,"__await")?h.resolve(R.__await).then(function(z){f("next",z,$,L)},function(z){f("throw",z,$,L)}):h.resolve(R).then(function(z){F.value=z,$(F)},function(z){return f("throw",z,$,L)})}L(k.arg)}var _;this._invoke=function(S,E){function $(){return new h(function(L,k){f(S,E,L,k)})}return _=_?_.then($,$):$()}}function W(m,h){var f=m.iterator[h.method];if(f===o){if(h.delegate=null,"throw"===h.method){if(m.iterator.return&&(h.method="return",h.arg=o,W(m,h),"throw"===h.method))return D;h.method="throw",h.arg=new TypeError("The iterator does not provide a 'throw' method")}return D}var _=g(f,m.iterator,h.arg);if("throw"===_.type)return h.method="throw",h.arg=_.arg,h.delegate=null,D;var w=_.arg;return w?w.done?(h[m.resultName]=w.value,h.next=m.nextLoc,"return"!==h.method&&(h.method="next",h.arg=o),h.delegate=null,D):w:(h.method="throw",h.arg=new TypeError("iterator result is not an object"),h.delegate=null,D)}function Z(m){var h={tryLoc:m[0]};1 in m&&(h.catchLoc=m[1]),2 in m&&(h.finallyLoc=m[2],h.afterLoc=m[3]),this.tryEntries.push(h)}function te(m){var h=m.completion||{};h.type="normal",delete h.arg,m.completion=h}function re(m){this.tryEntries=[{tryLoc:"root"}],m.forEach(Z,this),this.reset(!0)}function C(m){if(m){var h=m[l];if(h)return h.call(m);if("function"==typeof m.next)return m;if(!isNaN(m.length)){var f=-1,_=function w(){for(;++f<m.length;)if(i.call(m,f))return w.value=m[f],w.done=!1,w;return w.value=o,w.done=!0,w};return _.next=_}}return{next:d}}function d(){return{value:o,done:!0}}return M.prototype=P.constructor=A,A.constructor=M,M.displayName=u(A,c,"GeneratorFunction"),n.isGeneratorFunction=function(m){var h="function"==typeof m&&m.constructor;return!!h&&(h===M||"GeneratorFunction"===(h.displayName||h.name))},n.mark=function(m){return Object.setPrototypeOf?Object.setPrototypeOf(m,A):(m.__proto__=A,u(m,c,"GeneratorFunction")),m.prototype=Object.create(P),m},n.awrap=function(m){return{__await:m}},V(Y.prototype),Y.prototype[s]=function(){return this},n.AsyncIterator=Y,n.async=function(m,h,f,_,w){void 0===w&&(w=Promise);var S=new Y(p(m,h,f,_),w);return n.isGeneratorFunction(h)?S:S.next().then(function(E){return E.done?E.value:S.next()})},V(P),u(P,c,"Generator"),P[l]=function(){return this},P.toString=function(){return"[object Generator]"},n.keys=function(m){var h=[];for(var f in m)h.push(f);return h.reverse(),function _(){for(;h.length;){var w=h.pop();if(w in m)return _.value=w,_.done=!1,_}return _.done=!0,_}},n.values=C,re.prototype={constructor:re,reset:function(m){if(this.prev=0,this.next=0,this.sent=this._sent=o,this.done=!1,this.delegate=null,this.method="next",this.arg=o,this.tryEntries.forEach(te),!m)for(var h in this)"t"===h.charAt(0)&&i.call(this,h)&&!isNaN(+h.slice(1))&&(this[h]=o)},stop:function(){this.done=!0;var h=this.tryEntries[0].completion;if("throw"===h.type)throw h.arg;return this.rval},dispatchException:function(m){if(this.done)throw m;var h=this;function f(L,k){return S.type="throw",S.arg=m,h.next=L,k&&(h.method="next",h.arg=o),!!k}for(var _=this.tryEntries.length-1;_>=0;--_){var w=this.tryEntries[_],S=w.completion;if("root"===w.tryLoc)return f("end");if(w.tryLoc<=this.prev){var E=i.call(w,"catchLoc"),$=i.call(w,"finallyLoc");if(E&&$){if(this.prev<w.catchLoc)return f(w.catchLoc,!0);if(this.prev<w.finallyLoc)return f(w.finallyLoc)}else if(E){if(this.prev<w.catchLoc)return f(w.catchLoc,!0)}else{if(!$)throw new Error("try statement without catch or finally");if(this.prev<w.finallyLoc)return f(w.finallyLoc)}}}},abrupt:function(m,h){for(var f=this.tryEntries.length-1;f>=0;--f){var _=this.tryEntries[f];if(_.tryLoc<=this.prev&&i.call(_,"finallyLoc")&&this.prev<_.finallyLoc){var w=_;break}}w&&("break"===m||"continue"===m)&&w.tryLoc<=h&&h<=w.finallyLoc&&(w=null);var S=w?w.completion:{};return S.type=m,S.arg=h,w?(this.method="next",this.next=w.finallyLoc,D):this.complete(S)},complete:function(m,h){if("throw"===m.type)throw m.arg;return"break"===m.type||"continue"===m.type?this.next=m.arg:"return"===m.type?(this.rval=this.arg=m.arg,this.method="return",this.next="end"):"normal"===m.type&&h&&(this.next=h),D},finish:function(m){for(var h=this.tryEntries.length-1;h>=0;--h){var f=this.tryEntries[h];if(f.finallyLoc===m)return this.complete(f.completion,f.afterLoc),te(f),D}},catch:function(m){for(var h=this.tryEntries.length-1;h>=0;--h){var f=this.tryEntries[h];if(f.tryLoc===m){var _=f.completion;if("throw"===_.type){var w=_.arg;te(f)}return w}}throw new Error("illegal catch attempt")},delegateYield:function(m,h,f){return this.delegate={iterator:C(m),resultName:h,nextLoc:f},"next"===this.method&&(this.arg=o),D}},n}(e.exports);try{regeneratorRuntime=t}catch(n){Function("r","regeneratorRuntime = r")(t)}},2612:()=>{Smart("smart-button",class extends Smart.ContentElement{static get properties(){return{value:{type:"string"},name:{type:"string"},type:{value:"button",type:"string"},clickMode:{allowedValues:["hover","press","release","pressAndRelease"],type:"string",value:"release"}}}static get styleUrls(){return["smart.button.css"]}template(){return"<button class=\"smart-button smart-unselectable\" inner-h-t-m-l='[[innerHTML]]' id='button' type='[[type]]' name='[[name]]' value='[[value]]' disabled='[[disabled]]' role=\"presentation\"></button>"}refresh(){}static get listeners(){return{"button.down":"_downHandler","button.mouseenter":"_mouseEnterHandler","button.mouseleave":"_mouseLeaveHandler","button.touchend":"_touchEndHandler","button.click":"_clickHandler","button.up":"_upHandler",up:"_upHandler","button.focus":"_focusHandler","button.blur":"_blurHandler"}}focus(){const e=this;e.$.button?e.$.button.focus():HTMLElement.prototype.focus.call(e)}blur(){const e=this;e.$.button?e.$.button.blur():HTMLElement.prototype.blur.call(e)}_upHandler(e){const t=this;if(e.stopPropagation(),t.$.setAttributeValue("active",!1),t.dataset.target){const n=document.querySelector(t.dataset.target);let a=t.dataset.toggle;if(n&&"Smart-WINDOW"===n.nodeName&&"modal"===a&&(a="openModal"),"tab"===a||"pill"===a||"list"===a){const i=this.closest(".nav, .list-group"),o='[data-toggle="tab"], [data-toggle="pill"], [data-toggle="list"]',r=!i||"UL"!==i.nodeName&&"OL"!==i.nodeName?i.children(".active"):i.querySelectorAll("li > .active");if(i){const l=i.querySelectorAll(o);for(let c=0;c<l.length;c++)l[c].classList.remove("primary");for(let c=0;c<r.length;c++)r[c].classList.remove("active");let s=t.parentNode;for(;s;){if("LI"===s.nodeName){s.classList.add("active");break}s=s.parentNode}t.classList.add("primary")}return n.parentNode.querySelectorAll(".active").forEach(l=>{l.classList.remove("active"),l.classList.add("smart-hidden")}),n.classList.add("active"),void n.classList.remove("smart-hidden")}a&&n&&n[a]&&(setTimeout(()=>{n[a]()},50),e.originalEvent.preventDefault())}}_focusHandler(){this.$.setAttributeValue("focus",!0),this.$.fireEvent("focus")}_blurHandler(){this.$.setAttributeValue("focus",!1),this.$.fireEvent("blur")}_clickHandler(e){const t=this;("release"!==t.clickMode&&"pressAndRelease"!==t.clickMode||t.readonly)&&(e.preventDefault(),e.stopPropagation())}_downHandler(e){const t=this;if(!(t.disabled||(t.hasRippleAnimation&&Smart.Utilities.Animation.Ripple.animate(t,e.pageX,e.pageY),t.$.setAttributeValue("active",!0),"press"!==t.clickMode&&"pressAndRelease"!==t.clickMode||t.readonly))){if(t.hasAttribute("smart-blazor"))return void t.$.dispatchEvent(new Event("click"));t.$.fireEvent("click",{buttons:"buttons"in e?e.buttons:e.which,clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY,screenX:e.screenX,screenY:e.screenY})}}_mouseEnterHandler(e){const t=this;if(!t.readonly&&(t.$button.setAttributeValue("hover",!0),t.$.setAttributeValue("hover",!0),"hover"===t.clickMode)){const n="buttons"in e?e.buttons:e.which;if(t.hasAttribute("smart-blazor"))return void t.$.dispatchEvent(new Event("click"));t.$.fireEvent("click",{buttons:n,clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY,screenX:e.screenX,screenY:e.screenY})}}_touchEndHandler(){const e=this;setTimeout(function(){e.$button.setAttributeValue("hover",!1),e.$.setAttributeValue("hover",!1)},300)}_mouseLeaveHandler(){this.$button.setAttributeValue("hover",!1),this.$.setAttributeValue("hover",!1)}propertyChangedHandler(e,t,n){super.propertyChangedHandler(e,t,n);const a=this;"disabled"===e?(a._setFocusable(),a.$button&&a.$button.setAttributeValue("hover",!1),a.$.setAttributeValue("hover",!1),a instanceof Smart.RepeatButton&&a._stopRepeat()):"unfocusable"===e&&a._setFocusable()}_setFocusable(){const e=this,t=e.$.button?e.$.button:e;if(e.disabled||e.unfocusable)return t.removeAttribute("tabindex"),void(t.tabIndex=-1);t.tabIndex=e.tabIndex>0?e.tabIndex:0}ready(){const e=this;super.ready(),e.setAttribute("role","button"),e._setFocusable(),e.enableShadowDOM&&e.$.hiddenInput&&e.appendChild(e.$.hiddenInput)}}),Smart("smart-repeat-button",class extends Smart.Button{static get properties(){return{delay:{value:50,type:"number"},initialDelay:{value:150,type:"number"}}}static get listeners(){return{"button.down":"_startRepeat","button.mouseenter":"_overriddenHandler","button.mouseleave":"_overriddenHandler","button.pointerenter":"_updateInBoundsFlag","button.pointerleave":"_updateInBoundsFlag","button.touchmove":"_touchmoveHandler","document.up":"_stopRepeat"}}_clickHandler(e){const t=this;("release"!==t.clickMode||t.preventDefaultClick||t.readonly||t.disabled)&&(e.preventDefault(),e.stopPropagation(),t.preventDefaultClick=!1)}_updateInBoundsFlag(e){const t=this;-1!==e.type.indexOf("leave")?(t._isPointerInBounds=!1,t.$button.setAttributeValue("hover",!1),t.$.setAttributeValue("hover",!1)):(t._isPointerInBounds=!0,t.$button.setAttributeValue("hover",!0),t.$.setAttributeValue("hover",!0)),1!==("buttons"in e?e.buttons:e.which)&&t._stopRepeat(e)}_startRepeat(e){const t=this;t.setAttribute("active",""),t._initialTimer||t.readonly||(t._initialTimer=setTimeout(function(){t._repeatTimer=setInterval(()=>{if(t._isPointerInBounds){if(t.hasAttribute("smart-blazor"))return t.$.dispatchEvent(new Event("click")),void(t.preventDefaultClick=!0);t.$.fireEvent("click",{buttons:"buttons"in e?e.buttons:e.which,clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY,screenX:e.screenX,screenY:e.screenY}),t.preventDefaultClick=!0}},t.delay)},t.initialDelay))}_stopRepeat(e){const t=this;t.readonly||e&&("pointercancel"===e.type||e.originalEvent&&"pointercancel"===e.originalEvent.type)||(t.$.setAttributeValue("active",!1),t._repeatTimer&&(clearInterval(t._repeatTimer),t._repeatTimer=null),t._initialTimer&&(clearTimeout(t._initialTimer),t._initialTimer=null))}_touchmoveHandler(e){this.preventDefaultClick&&e.cancelable&&(e.preventDefault(),e.stopPropagation())}_overriddenHandler(){}}),Smart("smart-toggle-button",class extends Smart.Button{static get properties(){return{checked:{value:!1,type:"boolean?"},falseContent:{value:"",reflectToAttribute:!1,type:"string"},indeterminateContent:{value:"",reflectToAttribute:!1,type:"string"},indeterminate:{value:!1,type:"boolean"},trueContent:{value:"",reflectToAttribute:!1,type:"string"},indeterminateTemplate:{value:null,type:"any"},trueTemplate:{value:null,type:"any"},falseTemplate:{value:null,type:"any"},type:{value:"toggle",type:"string",defaultReflectToAttribute:!0,readonly:!0}}}static get listeners(){return{keydown:"_keyHandler",keyup:"_keyHandler",dragstart:"_dragStartHandler","button.click":"_buttonClickHandler","button.mouseenter":"_buttonMouseEnterHandler","button.mouseleave":"_buttonMouseLeaveHandler","document.up":"_documentUpHandler"}}ready(){super.ready(),this._setAriaState()}_setAriaState(){const t=this.checked;this.setAttribute("aria-pressed",null!==t?t:"mixed")}_buttonClickHandler(){}_buttonMouseLeaveHandler(){this.removeAttribute("hover")}_buttonMouseEnterHandler(){const e=this;e.setAttribute("hover",""),e.disabled||e.readonly||"hover"!==e.clickMode||(e._changeCheckState("pointer"),e.focus(),e._updateHidenInputNameAndValue())}_documentUpHandler(e){const t=this;t._pressed&&(t._pressed=!1,t.disabled||t.readonly||"press"===t.clickMode||"pointercancel"===e.originalEvent.type||(t._changeCheckState("pointer"),t.focus(),t._updateHidenInputNameAndValue()))}_downHandler(e){const t=this;t.disabled||t.readonly||(t.hasRippleAnimation&&Smart.Utilities.Animation.Ripple.animate(t,e.pageX,e.pageY),t._pressed=!0,"press"!==t.clickMode&&"pressAndRelease"!==t.clickMode||(t._changeCheckState("pointer"),t.hasAttribute("smart-blazor")?t.$.dispatchEvent(new Event("click")):t.$.fireEvent("click"),t._updateHidenInputNameAndValue()),"press"===t.clickMode&&(e.preventDefault(),e.stopPropagation()))}_dragStartHandler(e){e.preventDefault()}_keyHandler(e){const t=this;if(!0!==t.disabled&&!t.readonly&&32===e.keyCode){if("keydown"===e.type)return void e.preventDefault();if("none"===t.switchMode)return;t._changeCheckState("keyboard"),t._updateHidenInputNameAndValue()}}_changeCheckState(e){const t=this;let n=null;null===t.checked?t.checked=!0:(n=t.checked,t.checked=!t.checked),t._handleTextSelection(),t.$.fireEvent("change",{value:t.checked,oldValue:n,changeType:e}),t.$.fireEvent(t.checked?"checkValue":"uncheckValue",{changeType:e}),t._setAriaState()}_handleTextSelection(){const e=this;e.$.addClass("smart-unselectable"),e.timer&&clearTimeout(e.timer),e.timer=setTimeout(()=>e.$.removeClass("smart-unselectable"),500)}propertyChangedHandler(e,t,n){super.propertyChangedHandler(e,t,n);const a=this;if("checked"===e)return a.$.fireEvent("change",{value:n,oldValue:t,changeType:"api"}),void a._setAriaState();switch(e){case"trueTemplate":a._handleTemplate(!0);break;case"falseTemplate":a._handleTemplate(!1);break;case"indeterminateTemplate":a._handleTemplate()}}_htmlBindOnInitialization(){const e=this;e._bindContentProperty("trueContent","smart-true-content"),e._bindContentProperty("falseContent","smart-false-content"),e._bindContentProperty("indeterminateContent","smart-indeterminate-content")}_bindContentProperty(e,t){const n=this;if(!n.$[e+"Container"])return;let a=document.createElement("div");a.innerHTML=n.innerHTML;let i,o=a.getElementsByClassName(t);if(o.length>0)for(let r=0;r<o.length;r++)i=o[r];""===n[e]&&(n[e]=void 0===i?"":i.outerHTML),n.$[e+"Container"].innerHTML=n[e]}_updateContentProperties(){const e=this;function t(n){e.$[n+"Container"]&&(e[n]=e.$[n+"Container"].innerHTML)}t("trueContent"),t("falseContent"),t("indeterminateContent")}_updateHidenInputValue(){const e=this;if(!e.$.hiddenInput)return;let t;t=null===e.checked?"null":!1===e.checked?"off":e.value||"on",e.$.hiddenInput.setAttribute("value",t)}_updateHidenInputName(){const e=this;e.$.hiddenInput&&e.$.hiddenInput.setAttribute("name",!1===e.checked?"":e.name||"")}_updateHidenInputNameAndValue(){this._updateHidenInputName(),this._updateHidenInputValue()}_handleTemplate(e,t){const n=this;let a,i,o;if(!0===e?(a=n.trueTemplate,i=n.$.trueContentContainer,o=n.trueContent):!1===e?(a=n.falseTemplate,i=n.$.falseContentContainer,o=n.falseContent):(a=n.indeterminateTemplate,i=n.$.indeterminateContentContainer,o=n.indeterminateContent),t&&(i.innerHTML=o||""),null===a||!a)return;if("function"==typeof a)return void a(i,{value:o});if(!("content"in document.createElement("template")))return void n.error(n.localize("htmlTemplateNotSuported",{elementType:n.nodeName.toLowerCase()}));if(a=document.getElementById(a),null===a||!("content"in a))return void n.error(n.localize("invalidTemplate",{elementType:n.nodeName.toLowerCase(),property:"template"}));const r=a.content,l=r.childNodes.length,s=/{{\w+}}/g;let c,u=[];for(let y=0;y<l;y++)for(c=s.exec(r.childNodes[y].innerHTML);c;)u.push({childNodeIndex:y,bindingString:c[0]}),c=s.exec(r.childNodes[y].innerHTML);const p=u.length;let g,b,v=document.importNode(a.content,!0);for(let y=0;y<p;y++){g=v.childNodes[u[y].childNodeIndex],b=u.length;for(let x=0;x<b;x++)g.innerHTML=g.innerHTML.replace(u[y].bindingString,o)}i.innerHTML="";for(let y=0;y<v.childNodes.length;y++)v.childNodes[y].outerHTML&&(i.innerHTML+=v.childNodes[y].outerHTML)}})},1139:()=>{Smart("smart-combo-box",class extends Smart.DropDownList{static get properties(){return{autoComplete:{allowedValues:["none","manual","auto","inline","list"],type:"string",value:"none"},autoCompleteDelay:{value:100,type:"number"},autoOpenShortcutKey:{value:[],type:"array"},dropDownOpenMode:{allowedValues:["none","default","dropDownButton","auto"],value:"dropDownButton",defaultReflectToAttribute:!0,type:"string"},escKeyMode:{allowedValues:["clearValue","firstPossibleValue","none","previousValue"],type:"string",value:"none"},inputPurpose:{type:"string",value:"off"},minLength:{type:"number",value:2},value:{value:"",type:"string"}}}static get listeners(){return{"input.focus":"_inputFocusHandler","input.blur":"_inputFocusHandler","dropDownButton.focus":"_dropDownButtonFocusHandler","dropDownButton.blur":"_dropDownButtonFocusHandler","input.change":"_inputChangeEventHandler","input.mouseenter":"_buttonsMouseEventsHandler","input.mouseleave":"_buttonsMouseEventsHandler","document.down":"_documentDownHandler","document.up":"_documentUpHandler","document.selectstart":"_selectStartHandler","dropDownButton.down":"_buttonsDownHandler","dropDownButton.mouseenter":"_buttonsMouseEventsHandler","dropDownButton.mouseleave":"_buttonsMouseEventsHandler",keydown:"_keyDownHandler",keyup:"_keyUpHandler","listBox.change":"_listBoxChangeHandler","listBox.itemClick":"_listBoxItemClickHandler","listBox.keydown":"_listBoxKeyDownHandler",wheel:"_mouseWheelHandler"}}static get styleUrls(){return["smart.combobox.css"]}template(){return'<div id="container" role="presentation">\n                    <span class="smart-label" id="label">[[label]]</span>\n                    <div id="content" class="smart-content" role="presentation">\n                        <div class="smart-buttons-container" id="buttonsContainer" role="presentation">\n                            <span id="actionButton" class="smart-action-button" role="presentation">\n                                <input name="[[name]]" class="smart-input" id="input" placeholder="[[placeholder]]" autocomplete="[[inputPurpose]]" role="textbox" aria-label="[[placeholder]]" />\n                                <div class="smart-combo-box-auto-complete-string" id="autoCompleteString"></div>\n                            </span>\n                            <span id="dropDownButton" class="smart-drop-down-button" role="button" aria-label="Toggle popup">\n                                <span class="smart-drop-down-button-icon" id="arrow" aria-hidden="true"></span>\n                            </span>\n                        </div>\n                        <div id="dropDownContainer" class="smart-drop-down smart-drop-down-container smart-visibility-hidden" role="presentation">\n                            <smart-list-box id="listBox" unfocusable\n                                    animation="[[animation]]"\n                                    data-source="[[dataSource]]"\n                                    disabled="[[disabled]]"\n                                    display-loading-indicator="[[displayLoadingIndicator]]"\n                                    display-member="[[displayMember]]"\n                                    filterable="[[filterable]]"\n                                    filter-callback="[[filterCallback]]"\n                                    filter-mode="[[filterMode]]"\n                                    filter-input-placeholder="[[filterInputPlaceholder]]"\n                                    grouped="[[grouped]]"\n                                    group-member="[[groupMember]]"\n                                    item-height="[[itemHeight]]"\n                                    item-measure-mode="[[itemMeasureMode]]"\n                                    item-template="[[itemTemplate]]"\n                                    incremental-search-delay="[[incrementalSearchDelay]]"\n                                    incremental-search-mode="[[incrementalSearchMode]]"\n                                    loading-indicator-placeholder="[[loadingIndicatorPlaceholder]]"\n                                    loading-indicator-position="[[loadingIndicatorPosition]]"\n                                    placeholder="[[dropDownPlaceholder]]"\n                                    readonly="[[readonly]]"\n                                    right-to-left="[[rightToLeft]]"\n                                    selected-indexes="{{selectedIndexes}}"\n                                    selection-mode="[[selectionMode]]"\n                                    selected-values="{{selectedValues}}"\n                                    sorted="[[sorted]]"\n                                    theme="[[theme]]"\n                                    value-member="[[valueMember]]"\n                                    horizontal-scroll-bar-visibility="[[horizontalScrollBarVisibility]]"\n                                    vertical-scroll-bar-visibility="[[verticalScrollBarVisibility]]"\n                                    virtualized="[[virtualized]]">\n                                <content></content>\n                            </smart-list-box>\n                            <div id="resizeBar" class="smart-drop-down-resize-bar" aria-label="Resize">\n                                <div></div>\n                            </div>\n                         </div>\n                    </div>\n                    <span class="smart-hint" id="hint">[[hint]]</span>\n                </div>'}propertyChangedHandler(e,t,n){const a=this;switch(e){case"autoComplete":if("list"===n){a.$.listBox.$.filterInput.value="";let i=a.$.listBox.context;a.$.listBox.context=a.$.listBox,a.$.listBox._filterItems(!0),a.$.listBox.context=i,a._setDropDownSize()}a._autoComplete(!0),a._setAriaAutocomplete();break;case"dataSource":case"displayMember":a._clearSelection(!0),a._setDropDownSize(),a._positionDetection.checkBrowserBounds("vertically"),a._positionDetection.positionDropDown(),a._positionDetection.checkBrowserBounds("horizontally");break;case"disabled":a.$.input.disabled=n,a._setFocusable(),a.close(),a._positionDetection&&a._positionDetection.handleAutoPositioning(),a._ariaPropertyChangedHandler("disabled",n);break;case"readonly":a.$.input.readOnly=n,a.close(),a._ariaPropertyChangedHandler("readonly",n);break;case"selectedValues":case"selectedIndexes":a._clearSelection(!0);break;case"selectionMode":case"selectionDisplayMode":a._clearSelection(),a._applySelectionDisplayMode(),"tokens"===a.selectionDisplayMode&&(a._currentSelection=void 0),a._applySelection(a.selectionMode),"selectionMode"===e&&super.propertyChangedHandler(e,t,n);break;case"tokenTemplate":if(a.$.selectionField)for(;"SPAN"===a.$.selectionField.firstElementChild.nodeName;)a.$.selectionField.removeChild(a.$.selectionField.firstElementChild);a._tokenTemplate=a._validateTemplate(a.tokenTemplate),a._applySelection();break;case"value":a.clearSelection(),a.value=a.$.input.value=a._oldValue=n,a._queryItems(!0),a._currentSelection&&!a._currentSelection.length&&a.$.fireEvent("change",{oldValue:t,value:a.$.input.value,addedItems:[],removedItems:[],selected:[],disabled:[],index:[],label:[]});break;default:super.propertyChangedHandler(e,t,n)}}clearItems(){this.$.listBox.clearItems(),this._clearSelection(!0)}clearSelection(){this.$.listBox.clearSelection(),this._clearSelection(!arguments[0])}blur(){this.$.input.blur()}close(){super.close(),this.$.input.removeAttribute("aria-controls")}focus(){this.$.input.focus()}open(){super.open(),this.$.input.setAttribute("aria-controls",this.$.listBox.id)}_setFocusable(){const e=this;if(!e.disabled&&!e.unfocusable){let t=e.tabIndex>0?e.tabIndex:0;return e.$.input.tabIndex=t,void("dropDownButton"===e.dropDownOpenMode?e.$.dropDownButton.setAttribute("tabindex",t):e.$.dropDownButton.removeAttribute("tabindex"))}e.$.input.tabIndex=-1,e.$.dropDownButton.removeAttribute("tabindex")}_autoComplete(e){const t=this;if("list"===t.autoComplete)return;if(0===t.$.listBox._items.length&&"function"!=typeof t.dataSource)return void t.close();const n=t.$.input.value.length<t.minLength?"":"escaped"===t.displayMode?t._toDefaultDisplayMode(t.$.input.value):t.$.input.value;let a;1===t.$.listBox.selectedValues.length&&(a=t.$.listBox.getItem(t.$.listBox.selectedValues[0])),t.$.autoCompleteString.textContent="",t.$.listBox.$.filterInput.value="none"===t.autoComplete||t.$.input.value.length<t.minLength?"":n;let i=t.$.listBox.context;t.$.listBox.context=t.$.listBox,t.$.listBox._filterItems(!!e,function(){if(!t.$.listBox.isAttached||!t.$.input)return;const o=t.enableShadowDOM?t.shadowRoot.activeElement:document.activeElement;if(t._setDropDownSize(),t.opened&&(t._positionDetection.positionDropDown(),t._positionDetection.checkBrowserBounds()),t.$.listBox._filteredItems&&t.$.listBox._filteredItems.length>0){if(t.$.listBox._scrollView.scrollTop=t.$.listBox._filteredItems[0].offsetTop,"none"!==t.autoComplete&&t.$.input.value.length>=t.minLength&&!function(r){for(let l=0;l<r.length;l++)if(r[l]._focused&&r[l].hasAttribute("focus"))return!0}(t.$.listBox._filteredItems)&&t._focus(t.$.listBox._filteredItems[0]),o===t.$.input&&"inline"===t.autoComplete&&t.$.input.value.length>=t.minLength&&t._updateAutoCompleteHelper(),a&&a[t.inputMember]===t.$.listBox._filteredItems[0][t.inputMember]&&a.value===t.$.listBox._filteredItems[0].value&&(t.$.listBox.context=t.$.listBox,t.$.listBox._select(t.$.listBox._filteredItems[0],!0),t.$.listBox.context=i),n!==t.$.listBox._filteredItems[0][t.inputMember]||Smart.TextBox&&t instanceof Smart.TextBox&&"auto"===t.dropDownOpenMode){if(t._closedFromKeyCombination)return void(t._closedFromKeyCombination=!1);if(n.length<t.minLength&&!(Smart.TextBox&&t instanceof Smart.TextBox&&"auto"===t.dropDownOpenMode))return void t.close();t.isCompleted&&"none"!==t.dropDownOpenMode&&o===t.$.input&&t.open()}}else t["function"==typeof t.dataSource?"open":"close"]()},Smart.TextBox&&t instanceof Smart.TextBox&&"auto"===t.dropDownOpenMode),t.$.listBox.context=i}_updateAutoCompleteHelper(){const e=this,t=e.$.autoCompleteString;if(t.style.width=e.$.input.offsetWidth+"px",t.style.height=e.$.input.offsetHeight+"px",t.style.left=e.$.input.offsetLeft+"px",t.style.top=e.$.input.offsetTop+"px",t.style.paddingLeft=e.selectedIndexes.length>0?0:null,!e._focusedItem)return void(t.textContent="");const n=e.$.input.value,a=e._focusedItem[e.inputMember];a.length!==n.length&&0===a.toLowerCase().indexOf(n.toLowerCase())&&(t.textContent=e.$.input.value+a.slice(n.length))}_applySelection(e,t){const n=this;if(n.$.selectionField||(n.$.selectionField=n.$.actionButton),n.$.autoCompleteString.textContent="",0!==n.selectedIndexes.length){if(n.$.listBox._items&&0!==n.$.listBox._items.length)if("one"===n.selectionMode||"zeroAndOne"===n.selectionMode||"zeroOrOne"===n.selectionMode||"radioButton"===n.selectionMode){if(n._currentSelection&&n._currentSelection.length>n.selectedIndexes.length)return n._currentSelection=n.selectedIndexes.map(a=>n.$.listBox._items[a][n.inputMember]),n.$.input.value=n._currentSelection.toString(),void(n._oldValue=n.value=n._currentSelection.toString());n._clearSelection(),n._currentSelection=n.selectedIndexes.map(a=>n.$.listBox._items[a][n.inputMember]),n.$.input.value=n._currentSelection.toString(),n._oldValue=n.value=n._currentSelection.toString(),n.$.container.setAttribute("has-value",""),"none"!==n.autoComplete&&"function"!=typeof n.dataSource&&(n._autoComplete(!0),n._keyboardNavigation||n.close())}else{for(n.$.input.value="",n.$.input.placeholder="",n.$.container.setAttribute("has-value","");"SPAN"===n.$.selectionField.firstElementChild.nodeName;)n.$.selectionField.removeChild(n.$.selectionField.firstElementChild);let a,i,o=document.createDocumentFragment();i=1!==n.selectedIndexes.length||"oneOrManyExtended"!==n.selectionMode&&"oneOrMany"!==n.selectionMode?"tokens"===n.selectionDisplayMode?"&#10006":",":"",n.selectedIndexes.map(r=>{a=n._applyTokenTemplate(n.$.listBox._items[r][n.inputMember],i),a._value=n.$.listBox._items[r].value,o.appendChild(a)}),n.$.selectionField.insertBefore(o,n.$.input),n._currentSelection=n.selectedIndexes.map(r=>n.$.listBox._items[r][n.inputMember]),n._oldValue=n.value=n._currentSelection.toString(),n._positionDetection.positionDropDown()}}else n._clearSelection(t&&t.index>-1&&n.$.input.value===n.$.listBox._items[t.index][n.inputMember])}_applySelectionDisplayMode(){const e=this;"one"===e.selectionMode||"zeroAndOne"===e.selectionMode||"zeroOrOne"===e.selectionMode||"radioButton"===e.selectionMode?e.$.removeClass("auto-height"):e.$.addClass("auto-height")}_bindingCompleteHandler(){this._queryItems(),this._setDropDownSize()}_buttonsMouseEventsHandler(e){const t=this;t.disabled||t.readonly||("mouseenter"===e.type?(e.target.setAttribute("hover",""),t.setAttribute("hover",""),"auto"!==t.dropDownOpenMode||Smart.TextBox&&t instanceof Smart.TextBox?"dropDownButton"===t.dropDownOpenMode&&e.target===t.$.dropDownButton&&t.setAttribute("drop-down-button-hover",""):e.target===t.$.dropDownButton?(t.open(),t.$.input.focus()):t.close()):(e.target.removeAttribute("hover"),t.removeAttribute("hover"),t.removeAttribute("drop-down-button-hover")))}_createElement(){const e=this;e.classList.add("smart-drop-down-box"),e._tokenTemplate=e._validateTemplate(e.tokenTemplate),e._applySelectionDisplayMode(),e._applySelection(e.selectionMode),"none"!==e.autoComplete&&e._autoComplete(!0),e._setDropDownSize(),e.$.input.disabled=e.disabled,e.$.input.readOnly=e.readonly,e._setFocusable(),e.$.input.value.length>0&&0===e.selectedIndexes.length&&(e.$.container.setAttribute("has-value",""),e._oldValue=e.value=e.$.input.value),e.$.arrow.noRipple=!0,e.checkLicense(),e._setAriaRelations(!0)}_clearSelection(e){const t=this;if(e&&(t.$.input.value="",t.value=""),t.$.input.placeholder=t.placeholder,t.$.autoCompleteString.textContent="",t._currentSelection=[],t.$.selectionField)for(;"SPAN"===t.$.selectionField.firstElementChild.nodeName;)t.$.selectionField.removeChild(t.$.selectionField.firstElementChild);"none"!==t.autoComplete&&"list"!==t.autoComplete&&t.$.input.value.length>0&&(t._autoCompleteTimer&&clearTimeout(t._autoCompleteTimer),"function"!=typeof t.dataSource&&(t._autoCompleteTimer=setTimeout(function(){t._autoComplete(!0)},t.autoCompleteDelay))),t.$.input.value.length||t.$.container.removeAttribute("has-value")}_documentDownHandler(e){const t=this;super._documentDownHandler(e);let n=e.originalEvent.target;(t.shadowRoot||t.isInShadowDOM)&&(n=e.originalEvent.composedPath()[0]),n!==t.$.dropDownButton||"none"===t.dropDownOpenMode||Smart.Utilities.Core.isMobile||requestAnimationFrame(()=>t.$.input.focus())}_documentUpHandler(e){const t=this;let n=e.originalEvent.target,a=n.closest?n.closest("smart-combo-box"):void 0;(t.shadowRoot||t.isInShadowDOM)&&(n=e.originalEvent.composedPath()[0],a=n.getRootNode().host);const i=n;if(t._resizeDetails&&t._resizeDetails.started)return t._resizeDetails.started=t._resizeDetails.resizeEventFired=!1,t.removeAttribute("resizing"),t._dropDownResized=!0,void t.$.fireEvent("resizeEnd",{position:{left:e.pageX,top:e.pageY}});if(t.disabled||t._isDropDownClicked||t.readonly)return void delete t._isDropDownClicked;if(t._overlayDown)return t.close(),void delete t._overlayDown;if(n===t.$.input||void 0===n||n===t.$.resizeBar)return;if(n===t.$.selectionField)return void t.$.input.focus();if(n===t.$.dropDownButton&&"none"!==t.dropDownOpenMode)return t._preventDropDownClose=!0,n===t._buttonClicked&&t.$dropDownContainer.hasClass("smart-visibility-hidden")&&"pointercancel"!==e.originalEvent.type?t.open():t.close(),Smart.Utilities.Core.isMobile||requestAnimationFrame(()=>t.$.input.focus()),void(t._buttonClicked=void 0);const o=n.closest(".smart-drop-down-list-selection-label");if(o&&a===t&&"none"!==t.dropDownOpenMode){const r=t.$.listBox._items.filter(l=>l[t.inputMember].toString()===o.innerHTML)[0];return!r||t.$.fireEvent("tokenClick",{index:t.$.listBox._items.indexOf(r),label:r.label,value:r.value}).defaultPrevented?void 0:(t.open(),t.$.input.focus(),t.$.listBox.ensureVisible(r),void t._focus(r))}if("tokens"===t.selectionDisplayMode&&n.closest(".smart-drop-down-list-unselect-button")&&a===t)return 1===t.selectedIndexes.length&&["zeroOrMany","zeroOrOne","checkBox"].indexOf(t.selectionMode)<0?void 0:(t.unselect(t.$.listBox._items.filter(r=>r[t.inputMember].toString()===n.previousElementSibling.innerHTML)[0]),void t.$.input.focus());n=t._getUpEventTarget(n),void 0!==n?((!t.$dropDownContainer.hasClass("smart-visibility-hidden")&&"dropDownContainer"!==n&&"item"!==n||"item"===n&&t.selectionMode.indexOf("Many")<0&&"checkBox"!==t.selectionMode)&&t.close(),("item"===n||"dropDownContainer"===n&&i!==t.$.listBox.$.filterInput)&&t.$.input.focus()):t.$.input.focus()}_dropDownButtonFocusHandler(e){const t=this;"focus"===e.type?("dropDownButton"!==t.dropDownOpenMode&&t.$.input.focus(),t.setAttribute("focus","")):t.removeAttribute("focus")}_inputFocusHandler(e){const t=this;if(!t.disabled)if("focus"===e.type)t.setAttribute("focus",""),t._buttonClicked||(t._oldValue=t.$.input.value),t.$.fireEvent("focus");else{if(t.removeAttribute("focus"),t.$.fireEvent("blur"),""!==e.target.value||0!==t.selectedIndexes.length&&""===e.target.value?t.$.container.setAttribute("has-value",""):t.$.container.removeAttribute("has-value"),t._preventDropDownClose||(t.opened&&("auto"===t.autoComplete||"inline"===t.autoComplete)&&t.$.input.value.length>0&&t._focusedItem&&!t._focusedItem.selected&&t.select(t._focusedItem),t.close()),!t._handleAutoCompleteModeList())return;"previousValue"===t.escKeyMode&&(t.value=t.$.input.value)}}_handleAutoCompleteModeList(){const e=this;if("list"===e.autoComplete&&!e._buttonClicked){if(e.opened&&e._isDropDownClicked)return!1;if(e.$.autoCompleteString.textContent="",e._lastSelectedItem)e._lastSelectedItem.selected||e.select(e._lastSelectedItem);else if(e.$.input.value.length&&e._oldValue){const t=e.$.listBox._queryItems(e._oldValue,e.incrementalSearchMode);for(let n=0;n<t.length;n++)if(!t[n].hidden){t[n].selected||e.select(t[n]),e._focus(t[n]);break}e.value=e.$.input.value=e._oldValue}else e.value=e.$.input.value=""}}_inputChangeEventHandler(e){const t=this;e.stopPropagation(),t._preventInputChangeEvent?delete t._preventInputChangeEvent:t._isDropDownClicked||t._oldValue===t.$.input.value||t.$.fireEvent("change",{oldValue:t._oldValue,value:t.$.input.value,addedItems:[],removedItems:[],selected:[],disabled:[],index:[],label:[]})}_keyDownHandler(e){const t=this,n=t.enableShadowDOM?e.composedPath()[0]:e.target;if(t.disabled||t.readonly||n===t.$.listBox.$.filterInput)return;const a="function"==typeof t._focusedItem?t._focusedItem():t._focusedItem;switch(e.key){case"Enter":if(delete t._preventInputChangeEvent,n===t.$.input&&a&&t.opened){if(a.selected&&"list"===t.autoComplete)return t.close(),t._unfocus(),void t._handleAutoCompleteModeList();a.disabled||(t.select(a),t._preventInputChangeEvent=!0),!t.$dropDownContainer.hasClass("smart-visibility-hidden")&&t.selectionMode.indexOf("one")>-1&&(t.close(),t._unfocus())}else n===t.$.dropDownButton?(t.$.dropDownButton.setAttribute("active",""),t.$dropDownContainer.hasClass("smart-visibility-hidden")&&"none"!==t.dropDownOpenMode?t.open():t.close(),t.$.input.focus()):t.close();return void t._handleAutoCompleteModeList();case"Escape":switch(t.escKeyMode){case"none":t.$dropDownContainer.hasClass("smart-visibility-hidden")||(t.close(),t._unfocus());break;case"clearValue":t.value=t.$.input.value="",t.close();break;case"previousValue":t.$.input.value=t._oldValue;break;case"firstPossibleValue":{const i=t.$.listBox._items.find(o=>!o.disabled&&!o.hidden&&!o.readonly);if(i){const o=i[t.inputMember];t.$.input.value===o&&t.close(),t.$.input.value=o}t.close();break}}break;case"End":case"Home":case"PageUp":case"PageDown":case"ArrowUp":case"ArrowDown":if(!0===t._autoOpenOnKeyDown(e))return;if(e.altKey){if(t._closedFromKeyCombination=!0,t.$dropDownContainer.hasClass("smart-visibility-hidden")&&"none"!==t.dropDownOpenMode){if("ArrowDown"===e.key&&t.open(),!t.opened||0===t.items.length)return;0===t.selectedIndexes.length?t._focus(t.items[0]):t.selectedIndexes.length>0&&!t.$.listBox._items[t.selectedIndexes[t.selectedIndexes.length-1]].hidden&&t._focus(t.items[t.selectedIndexes[t.selectedIndexes.length-1]])}else t.close();return}if(n===t.$.input&&t.$dropDownContainer.hasClass("smart-visibility-hidden"))return void(e.ctrlKey&&(e.preventDefault(),t._handleKeyStroke(e.key)));if(("PageUp"===e.key||"PageDown"===e.key)&&!a||n===t.$.listBox.$.filterInput)return;if(e.preventDefault(),!a||a&&!a._focused)return void t._focus(t.items[0]);t._handleKeyStroke(e.key),"inline"!==t.autoComplete&&"list"!==t.autoComplete||t._updateAutoCompleteHelper();break;case"Backspace":if(t.$.input.previousElementSibling){if(0===t.$.input.value.length){if(1===t.selectedIndexes.length&&["zeroOrMany","zeroOrOne","checkBox"].indexOf(t.selectionMode)<0)return;const i=t.$.listBox.getItem(t.$.input.previousElementSibling._value);i?t.unselect(i):t.$.selectionField.firstElementChild&&"SPAN"===t.$.selectionField.firstElementChild.nodeName&&t.$.selectionField.removeChild(t.$.selectionField.firstElementChild)}return}t.selectedIndexes.length>1&&t.clearSelection(!0);break;default:if(n===t.$.input&&"oneOrManyExtended"===t.selectionMode&&(t.$.listBox._keysPressed[e.key]=!0),!0===t._autoOpenOnKeyDown(e))return}}_handleKeyStroke(e){const t=this,n=t.$.listBox;if("none"===t.autoComplete)return void n._handleKeyStrokes(e);const a=t.items;switch(e){case"ArrowLeft":case"ArrowUp":t._handleArrowKeys(!0);break;case"ArrowRight":case"ArrowDown":t._handleArrowKeys(!1);break;case"Home":case"End":{if(0===a.length)return;const i="Home"===e;t._focus(i?a[0]:a[a.length-1]),n.scrollTop=i?0:n.scrollHeight;break}case"PageUp":t._pageUpKeyHandler(a);break;case"PageDown":t._pageDownKeyHandler(a)}n._recycle()}_handleArrowKeys(e){const t=this,n=t.$.listBox;let a;if(t._focusedItem)a=t.$.listBox._indexOf(t._focusedItem),t._focusedItem._focused=!1;else{if(0===t.selectedIndexes.length)return;a=t.selectedIndexes[t.selectedIndexes.length-1]}const i=e?n._getPreviousItem(a):n._getNextItem(a);t._focus(i),"list"===t.autoComplete&&n._items[a]!==i&&(t._keyboardNavigation=!0,n.clearSelection(),n.select(i),delete t._keyboardNavigation),t.ensureVisible(i)}_pageDownKeyHandler(e){const t=this,n=t.$.listBox;let a,i=n._items[t.selectedIndexes[t.selectedIndexes.length-1]];n._focusedItem&&(i=n._focusedItem);const o=n._indexOf(i);let r=i.top+n.$.itemsContainer.offsetHeight-i.height;for(let l=o;l<e.length;l++)if(e[l].top>=r){a=e[l];break}a||(a=e[e.length-1]),t._focus(a),(a.height+a.top>n.$.itemsContainer.scrollTop+n.$.itemsContainer.offsetHeight||a.top<n.$.itemsContainer.scrollTop)&&(n.scrollTop=a.top-n.$.itemsContainer.offsetHeight+a.height)}_pageUpKeyHandler(e){const t=this,n=t.$.listBox;let a=n._items[t.selectedIndexes[t.selectedIndexes.length-1]];n._focusedItem&&(a=n._focusedItem);const i=a.top-n.$.itemsContainer.offsetHeight;let o;for(let r=n._indexOf(a);r>0;r--)if(e[r].top<=i){o=e[r];break}o||(o=e[0]),n._focus(o),n.scrollTop=o.top,0===n._indexOf(o)&&(n.scrollTop=0)}_autoOpenOnKeyDown(e){const t=this;if(t.opened||!t.opened&&t.autoOpenShortcutKey.indexOf(e.key)<0)return;t.selectedIndexes.length&&t._focus(t.items[t.selectedIndexes[t.selectedIndexes.length-1]]);const n="function"==typeof t._focusedItem?t._focusedItem():t._focusedItem;return t.open(),(!n||n&&!n._focused)&&("ArrowDown"===e.key?t._focus(t.items[0]):"ArrowUp"===e.key&&t._focus(t.items[t.items.length-1]),t.ensureVisible(t._focusedItem)),!0}_keyUpHandler(e){const t=this,n=t.enableShadowDOM?e.composedPath()[0]:e.target;if(!(t.disabled||"none"===t.escKeyMode&&"Escape"===e.key||n===t.$.listBox.$.filterInput))if(delete t._preventInputChangeEvent,n===t.$.input&&"oneOrManyExtended"===t.selectionMode&&(t.$.listBox._keysPressed[e.key]=!1),["one","zeroAndOne","radioButton","zeroOrOne"].indexOf(t.selectionMode)>-1&&1===t.selectedIndexes.length&&t.$.input.value!==(t._currentSelection?t._currentSelection[0]:void 0)&&(t._preventInputChangeEvent=!0,t.unselect(t.$.listBox._items[t.selectedIndexes[0]])),"Enter"!==e.key){if(n===t.$.input&&e.key.indexOf("Arrow")<0&&["Control","Shift"].indexOf(e.key)<0){if(t.value===t.$.input.value)return;if(t.value=t._currentSelection?t._currentSelection.toString()+(t._currentSelection.length>0?",":"")+t.$.input.value:t.$.input.value,t.$.autoCompleteString.textContent="",t._closedFromKeyCombination)return void(t._closedFromKeyCombination=!1);if("none"!==t.autoComplete&&"list"!==t.autoComplete?(t.$.input.value!==(t._currentSelection?t._currentSelection.toString():void 0)||t.$.listBox._filteredItems&&t.$.listBox._filteredItems.length!==t.$.listBox._items.length)&&(t._autoCompleteTimer&&clearTimeout(t._autoCompleteTimer),t._autoCompleteTimer=setTimeout(function(){t._autoComplete(!0)},t.autoCompleteDelay)):(t.$.input.value.length>0&&t._queryItems(),!t._focusedItem||"Escape"===e.key&&"firstPossibleValue"===t.escKeyMode||(t.open()," "!==e.key&&(t.$.listBox._scrollView.scrollTop=t._focusedItem.offsetTop))),"none"!==t.autoComplete&&"list"!==t.autoComplete&&t.$.listBox._filteredItems&&t.$.listBox._filteredItems.length===t.$.listBox._items.length)return void t.close()}}else t.$.dropDownButton.removeAttribute("active")}_queryItems(e){const t=this;if(!t.value||!t.$.input)return void t.close();let n=t.$.listBox._queryItems(t.$.input.previousElementSibling?t.$.input.value:t.value,t.incrementalSearchMode);0===n.length&&t._unfocus();for(let a=0;a<n.length;a++)if(!n[a].hidden){e&&!n[a].selected&&t.select(n[a]),t._focus(n[a]);break}"list"===t.autoComplete&&(t.enableShadowDOM?t.shadowRoot.activeElement:document.activeElement)===t.$.input&&t.$.input.value.length>=t.minLength?(t._lastSelectedItem=t._focusedItem,t._updateAutoCompleteHelper()):t._lastSelectedItem=void 0}_selectStartHandler(e){this._resizeDetails&&this._resizeDetails.started&&e.preventDefault()}_unfocus(){const e=this;e._focusedItem&&(e._focusedItem._focused=!1,e.$.listBox._focusedItem=void 0)}_setAriaRelations(){const e=this;e.setAttribute("role","combobox"),e.setAttribute("aria-describedby",e.$.hint.id),e.setAttribute("aria-expanded",e.opened),e.setAttribute("aria-haspopup","listbox"),e.setAttribute("aria-labelledby",e.$.label.id),e._ariaButton=e,e._setAriaAutocomplete()}_setAriaAutocomplete(){const e=this.autoComplete;this.$.input.setAttribute("aria-autocomplete","none"===e?"none":"auto"===e||"manual"===e?"list":"both")}})},7650:()=>{Smart("smart-drop-down-list",class extends Smart.ContentElement{static get properties(){return{autoCloseDelay:{value:100,type:"number"},dataSource:{value:null,type:"any",reflectToAttribute:!1},displayLoadingIndicator:{value:!1,type:"boolean"},displayMember:{value:"",type:"string"},displayMode:{allowedValues:["outlined","filled","underlined"],value:"outlined",type:"string"},dropDownAppendTo:{value:null,type:"any"},dropDownButtonPosition:{allowedValues:["none","left","right","top","bottom"],value:"right",defaultReflectToAttribute:!0,type:"string"},dropDownMinHeight:{value:"",type:"any",validator:"_propertyValidator"},dropDownHeight:{value:"",type:"any",validator:"_propertyValidator"},dropDownMaxHeight:{value:"",type:"any",validator:"_propertyValidator"},dropDownOpenMode:{allowedValues:["none","default","dropDownButton","auto"],value:"default",type:"string"},dropDownOverlay:{value:!1,type:"boolean"},dropDownPlaceholder:{value:"No Items",type:"string"},dropDownPosition:{allowedValues:["auto","top","bottom","overlay-top","overlay-center","overlay-bottom","center-bottom","center-top"],value:"auto",type:"string"},dropDownMinWidth:{value:"",type:"any",validator:"_propertyValidator"},dropDownWidth:{value:"",type:"any",validator:"_propertyValidator"},dropDownMaxWidth:{value:"",type:"any",validator:"_propertyValidator"},filterable:{value:!1,type:"boolean"},filterInputPlaceholder:{value:"",type:"string"},filterCallback:{value:null,type:"function?"},filterMode:{value:"startsWithIgnoreCase",allowedValues:["contains","containsIgnoreCase","doesNotContain","doesNotContainIgnoreCase","equals","equalsIgnoreCase","startsWith","startsWithIgnoreCase","endsWith","endsWithIgnoreCase","custom"],type:"string"},grouped:{value:!1,type:"boolean"},groupMember:{value:"",type:"string"},hint:{value:"",type:"string"},horizontalScrollBarVisibility:{type:"string",value:"auto",allowedValues:["auto","disabled","hidden","visible"]},incrementalSearchDelay:{value:700,type:"number?"},incrementalSearchMode:{value:"startsWithIgnoreCase",allowedValues:["contains","containsIgnoreCase","doesNotContain","doesNotContainIgnoreCase","equals","equalsIgnoreCase","startsWith","startsWithIgnoreCase","endsWith","endsWithIgnoreCase"],type:"string"},itemMeasureMode:{value:"auto",allowedValues:["auto","precise"],type:"string"},inputMember:{value:"label",type:"string"},itemTemplate:{value:null,type:"any"},itemHeight:{value:null,type:"number?"},label:{value:"",type:"string"},loadingIndicatorPlaceholder:{value:"Loading...",type:"string"},loadingIndicatorPosition:{value:"center",allowedValues:["bottom","center","top"],type:"string"},messages:{extend:!0,value:{en:{invalidNode:'{{elementType}}: Invalid parameter "{{node}}" when calling {{method}}.'}},type:"object"},name:{value:"",type:"string"},opened:{value:!1,type:"boolean"},placeholder:{value:"",type:"string"},resizeMode:{value:"none",allowedValues:["none","horizontal","vertical","both"],type:"string"},resizeIndicator:{value:!1,type:"boolean"},selectionDisplayMode:{value:"plain",allowedValues:["plain","placeholder","tokens"],type:"string"},selectionMode:{value:"zeroAndOne",allowedValues:["none","oneOrManyExtended","zeroOrMany","oneOrMany","zeroOrOne","zeroAndOne","one","checkBox","radioButton"],type:"string"},selectedIndexes:{value:[],type:"array"},selectedValues:{value:[],type:"array"},sorted:{value:!1,type:"boolean"},sortDirection:{value:"asc",type:"string"},tokenTemplate:{value:null,type:"any"},type:{value:"list",type:"string",defaultReflectToAttribute:!0,readonly:!0},valueMember:{value:"",type:"string"},virtualized:{value:!1,type:"boolean"},verticalScrollBarVisibility:{type:"string",value:"auto",allowedValues:["auto","disabled","hidden","visible"]}}}static get listeners(){return{"actionButton.down":"_buttonsDownHandler","actionButton.mouseenter":"_buttonsMouseEventsHandler","actionButton.mouseleave":"_buttonsMouseEventsHandler","actionButton.focus":"_buttonsFocusHandler","actionButton.blur":"_buttonsFocusHandler","document.selectstart":"_selectStartHandler","document.dragstart":"_dragStartHandler","document.down":"_documentDownHandler","document.up":"_documentUpHandler","document.move":"_documentMoveHandler","dropDownButton.down":"_buttonsDownHandler","dropDownButton.mouseenter":"_buttonsMouseEventsHandler","dropDownButton.mouseleave":"_buttonsMouseEventsHandler",keydown:"_keyDownHandler",keyup:"_keyUpHandler",focus:"_focusEventHandler",blur:"_blurEventHandler","dropDownButton.focus":"_buttonsFocusHandler","dropDownButton.blur":"_buttonsFocusHandler","dropDownContainer.transitionend":"_dropDownTransitionendHandler","listBox.change":"_listBoxChangeHandler","listBox.itemClick":"_listBoxItemClickHandler","listBox.keydown":"_listBoxKeyDownHandler","listBox.bindingComplete":"_bindingCompleteHandler",mouseenter:"_mouseEnterHandler",mouseleave:"_mouseLeaveHandler",resize:"_resizeHandler","resizeBar.move":"_resizeBarMoveHandler",styleChanged:"_styleChangedHandler",wheel:"_mouseWheelHandler"}}template(){return'<div id="container" role="presentation">\n                    <span class="smart-label" id="label">[[label]]</span>\n                    <div id="content" class="smart-content" role="presentation">\n                        <div class="smart-buttons-container" id="buttonsContainer" role="presentation">\n                            <span id="actionButton" class ="smart-action-button" role="presentation">[[placeholder]]</span>\n                            <span id="dropDownButton" class="smart-drop-down-button">\n                                <span class ="smart-drop-down-button-icon" id="arrow" aria-hidden="true"></span>\n                            </span>\n                        </div>\n                        <div id="dropDownContainer" class="smart-drop-down smart-drop-down-container smart-visibility-hidden" role="presentation">\n                            <smart-list-box id="listBox" unfocusable\n                                    animation="[[animation]]"\n                                    data-source="[[dataSource]]"\n                                    disabled="[[disabled]]"\n                                    display-loading-indicator="[[displayLoadingIndicator]]"\n                                    display-member="[[displayMember]]"\n                                    filterable="[[filterable]]"\n                                    filter-callback="[[filterCallback]]"\n                                    filter-mode="[[filterMode]]"\n                                    filter-input-placeholder="[[filterInputPlaceholder]]"\n                                    grouped="[[grouped]]"\n                                    group-member="[[groupMember]]"\n                                    item-height="[[itemHeight]]"\n                                    item-measure-mode="[[itemMeasureMode]]"\n                                    item-template="[[itemTemplate]]"\n                                    incremental-search-delay="[[incrementalSearchDelay]]"\n                                    incremental-search-mode="[[incrementalSearchMode]]"\n                                    loading-indicator-placeholder="[[loadingIndicatorPlaceholder]]"\n                                    loading-indicator-position="[[loadingIndicatorPosition]]"\n                                    name="[[name]]"\n                                    placeholder="[[dropDownPlaceholder]]"\n                                    right-to-left="[[rightToLeft]]"\n                                    readonly="[[readonly]]"\n                                    selected-indexes="{{selectedIndexes}}"\n                                    selection-mode="[[selectionMode]]"\n                                    selected-values="{{selectedValues}}"\n                                    sorted="[[sorted]]"\n                                    sort-direction="[[sortDirection]]"\n                                    theme="[[theme]]"\n                                    value-member="[[valueMember]]"\n                                    horizontal-scroll-bar-visibility="[[horizontalScrollBarVisibility]]"\n                                    vertical-scroll-bar-visibility="[[verticalScrollBarVisibility]]"\n                                    virtualized="[[virtualized]]">\n                                <content></content>\n                            </smart-list-box>\n                            <div id="resizeBar" class="smart-drop-down-resize-bar" aria-label="Resize">\n                                <div></div>\n                            </div>\n                         </div>\n                    </div>\n                    <span class="smart-hint smart-hidden" id="hint">[[hint]]</span>\n                </div>'}static get styleUrls(){return["smart.dropdownlist.css","smart.dropdown.css"]}propertyChangedHandler(e,t,n){super.propertyChangedHandler(e,t,n);const a=this;switch(e){case"animation":a.$.dropDownContainer.setAttribute("animation",a.animation);break;case"disabled":a._setFocusable(),a.close(),a._positionDetection.handleAutoPositioning();break;case"dataSource":case"displayMember":case"inputMember":a.$.actionButton&&(a.$.actionButton.innerHTML=a.placeholder),a._setDropDownSize(),a._positionDetection.checkBrowserBounds("vertically"),a._positionDetection.positionDropDown(),a._positionDetection.checkBrowserBounds("horizontally");break;case"dropDownAppendTo":a._positionDetection.dropDownAppendToChangedHandler();break;case"dropDownOpenMode":a._setFocusable(),a.$dropDownContainer.addClass("smart-visibility-hidden"),a.$.dropDownContainer.setAttribute("drop-down-open-mode",n),a.$.dropDownButton.removeAttribute("selected"),a.removeAttribute("drop-down-button-focus"),a.removeAttribute("action-button-focus"),a.opened=!1,a._ariaButton&&a._ariaButton.setAttribute("aria-expanded",!1),a._setAriaRelations();break;case"dropDownOverlay":n||a._positionDetection.removeOverlay();break;case"dropDownPosition":a._positionDetection.dropDownPositionChangedHandler();break;case"dropDownMinWidth":case"dropDownWidth":case"dropDownMaxWidth":case"dropDownHeight":case"dropDownMinHeight":case"dropDownMaxHeight":a._setDropDownSize();break;case"filterable":a.$.listBox.filterable=n,a._dropDownSize&&"auto"===a._dropDownSize.height&&a._setDropDownSize();break;case"label":if(!a._ariaButton)return;n?a._ariaButton.setAttribute("aria-labelledby",a.$.label.id):"DropDownList"===a.elementName&&a._ariaButton.setAttribute("aria-labelledby",a.$.actionButton.id);break;case"opened":if(a.disabled||a.readonly)return;n?a.open():a.close();break;case"placeholder":a._applySelection();break;case"readonly":a.close();break;case"resizeIndicator":n?a.$.dropDownContainer.setAttribute("resize-indicator",""):a.$.dropDownContainer.removeAttribute("resize-indicator");break;case"resizeMode":a.$.dropDownContainer.setAttribute("resize-mode",a.resizeMode);break;case"selectedValues":case"selectedIndexes":0===n.length?a.$.actionButton.innerHTML=a.placeholder:a._applySelection();break;case"selectionMode":a.$.listBox&&(a.$.listBox[e]=n,"checkBox"!==n&&"radioButton"!==n&&"checkBox"!==t&&"radioButton"!==t||a._setDropDownSize());break;case"selectionDisplayMode":a._applySelection();break;case"tokenTemplate":a._tokenTemplate=a._validateTemplate(a.tokenTemplate),a._applySelection();break;case"unfocusable":a._setFocusable()}}appendChild(e){const t=this;if(!t.isCompleted||e instanceof HTMLElement&&e.classList.contains("smart-resize-trigger-container")){const n=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.appendChild.apply(t,n.concat(Array.prototype.slice.call(arguments)))}e?(t.$.listBox.appendChild(e),t._dropDownSize&&"auto"===t._dropDownSize.height&&t._setDropDownSize()):t.error(t.localize("invalidNode",{elementType:t.nodeName.toLowerCase(),method:"appendChild",node:"node"}))}attached(){const e=this;super.attached(),e.isCompleted&&e.$.dropDownContainer&&(e._positionDetection.dropDownAttached("_setDropDownSize"),e._positionDetection.checkBrowserBounds(),e.selectedIndexes&&e._applySelection())}detached(){const e=this;super.detached(),e.$.dropDownContainer&&(e.close(),e._positionDetection&&e._positionDetection.dropDownDetached())}clearItems(){const e=this;e.$.listBox&&(e.$.listBox.clearItems(),e.$.actionButton.innerHTML=e.placeholder)}clearSelection(){const e=this;e.$.listBox&&(e.$.listBox.clearSelection(),e.$.actionButton.innerHTML=e.placeholder)}close(){const e=this;e.$dropDownContainer.hasClass("smart-visibility-hidden")||e.$.fireEvent("closing").defaultPrevented||(e.$dropDownContainer.addClass("smart-visibility-hidden"),e.$.fireEvent("close"),e.$.dropDownButton&&e.$.dropDownButton.removeAttribute("selected"),e.opened=!1,e._ariaButton&&e._ariaButton.setAttribute("aria-expanded",!1),e._preventDropDownClose=!1,e._positionDetection.removeOverlay(!0),e.$.listBox.removeAttribute("focus"),e._edgeMacFF&&!e.hasAnimation&&e.$.dropDownContainer&&(e.$.dropDownContainer.style.top=e.$.dropDownContainer.style.left="",e.$dropDownContainer.addClass("not-in-view")))}cloneNode(){const e=this;if(!e.$.listBox)return;let t=HTMLElement.prototype.cloneNode.apply(e,Array.prototype.slice.call(arguments,0,1));return t.dataSource=e.dataSource,t}ensureVisible(e){this.$.listBox&&this.$.listBox.ensureVisible(e)}getItem(e){if(this.$.listBox)return this.$.listBox.getItem(e)}get items(){const e=this;return e.$&&e.$.listBox?e.$.listBox.items:[]}get _focusedItem(){const e=this;return e.$&&e.$.listBox?e.$.listBox._focusedItem:null}insert(e,t){const n=this;n.$.listBox&&(n.$.listBox.insert(e,t),n._applySelection(),n._dropDownSize&&"auto"===n._dropDownSize.height&&n._setDropDownSize())}insertBefore(e,t){const n=this;if(!n.isCompleted){const a=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.insertBefore.apply(n,a.concat(Array.prototype.slice.call(arguments)))}e&&t?n.$.listBox&&(n.$.listBox.insertBefore(e,t),n._dropDownSize&&"auto"===n._dropDownSize.height&&n._setDropDownSize()):n.error(n.localize("invalidNode",{elementType:n.nodeName.toLowerCase(),method:"insertBefore",node:"newNode/referenceNode"}))}toggle(){const e=this;e.opened?e.close():e.open()}open(){const e=this,t=function(){for(let n=0;n<e.items.length;n++)if(!e.items[n].disabled)return e.items[n]};if(!e.disabled&&e.offsetHeight&&e.$dropDownContainer.hasClass("smart-visibility-hidden")){if(e.$dropDownContainer.hasClass("not-in-view")&&e.$dropDownContainer.removeClass("not-in-view"),e.$.dropDownContainer.style.transition=null,e.dropDownAppendTo){const n=e.getBoundingClientRect();if(e.$.container.contains(e.$.dropDownContainer)){let a=0;const i=setInterval(function(){const o=e.getBoundingClientRect();a++,o.top===e._positionTop&&a<10||(e.open(),clearInterval(i),e._positionTop=o.top)},100);return}n.top!==e._positionTop&&(e._positionTop=n.top)}e.$.fireEvent("opening").defaultPrevented||(e._shadowDOMStylesDelay&&(e._setDropDownSize(),delete e._shadowDOMStylesDelay),e.opened=!0,e._ariaButton&&e._ariaButton.setAttribute("aria-expanded",!0),e.$.listBox.setAttribute("focus",""),e._positionDetection.placeOverlay(),e._positionDetection.checkBrowserBounds("vertically"),e._positionDetection.positionDropDown(),e._positionDetection.checkBrowserBounds("horizontally"),e.$dropDownContainer.removeClass("smart-visibility-hidden"),e.$.fireEvent("open"),e.$.dropDownButton&&("dropDownButton"===e.dropDownOpenMode?e.$.dropDownButton.setAttribute("selected",""):e.$.dropDownButton.removeAttribute("selected")),(e.$.listBox&&!e._focusedItem||e._focusedItem&&!e._focusedItem._focused)&&e._focus(e.selectedIndexes.length>0?e.items[e.selectedIndexes[0]]:t),e.$.input&&!Smart.Utilities.Core.isMobile&&e.$.input.focus())}}ready(){super.ready()}render(){const e=this;e.rightToLeft&&(e.dropDownButtonPosition="right"===e.dropDownButtonPosition?"left":"right"),e.classList.add("smart-drop-down-box"),e.$.dropDownContainer&&(e._positionDetection=new Smart.Utilities.PositionDetection(e,e.$.dropDownContainer,e.$.container,"close"),e._positionDetection.getDropDownParent(!0),e._positionDetection.setDropDownPosition(),e._calculateDropDownSize(),e.$.dropDownContainer.setAttribute("resize-mode",e.resizeMode),e.$.dropDownContainer.setAttribute("drop-down-open-mode",e.dropDownOpenMode),e.resizeIndicator&&e.$.dropDownContainer.setAttribute("resize-indicator",""),e._positionDetection.handleAutoPositioning()),e.opened&&e.open(),e._positionTop=e.getBoundingClientRect().top,e._edgeMacFF=Smart.Utilities.Core.Browser.Edge||Smart.Utilities.Core.Browser.Firefox&&-1!==navigator.platform.toLowerCase().indexOf("mac"),e._edgeMacFF&&e.hasAnimation&&e.$.dropDownContainer&&e.$dropDownContainer.addClass("not-in-view"),e.$.label&&!e.$.label.id&&(e.$.label.id=e.id+"Label"),e.$.actionButton&&!e.$.actionButton.id&&(e.$.actionButton.id=e.id+"ActionButton"),e.$.hint&&!e.$.hint.id&&(e.$.hint.id=e.id+"Hint"),e._createElement(),super.render()}removeAt(e){const t=this;t.$.listBox&&(t.$.listBox.removeAt(e),t._applySelection(),t._dropDownSize&&"auto"===t._dropDownSize.height&&t._setDropDownSize())}removeChild(e){const t=this;if(!t.isCompleted||e instanceof HTMLElement&&e.classList.contains("smart-resize-trigger-container")){const n=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.removeChild.apply(t,n.concat(Array.prototype.slice.call(arguments)))}e&&e instanceof Smart.ListItem?(t.$.listBox.removeChild(e),t._dropDownSize&&"auto"===t._dropDownSize.height&&t._setDropDownSize()):t.error(t.localize("invalidNode",{elementType:t.nodeName.toLowerCase(),method:"removeChild",node:"node"}))}get value(){const e=this;return e.isRendered&&e.$.listBox?e.$.listBox.value:null}set value(e){const t=this;return t.isRendered&&t.$.listBox?void(t.$.listBox.value=e):null}select(e){this.$.listBox&&this.$.listBox.select(e)}_setFocusable(){const e=this;if(e.disabled||e.unfocusable)return e.removeAttribute("tabindex"),e.$.actionButton.removeAttribute("tabindex"),void e.$.dropDownButton.removeAttribute("tabindex");let t=e.tabIndex>0?e.tabIndex:0;e.tabIndex=t,"dropDownButton"===e.dropDownOpenMode?(e.removeAttribute("tabindex"),e.$.actionButton.setAttribute("tabindex",t),e.$.dropDownButton.setAttribute("tabindex",t)):(e.$.actionButton.removeAttribute("tabindex"),e.$.dropDownButton.removeAttribute("tabindex"))}static get requires(){return{"Smart.ListBox":"smart.listbox.js"}}unselect(e){this.$.listBox&&this.$.listBox.unselect(e)}update(e,t){const n=this;n.$.listBox&&(n.$.listBox.update(e,t),n._applySelection())}_resizeBarMoveHandler(e){"touchmove"===e.originalEvent.type&&e.originalEvent.preventDefault()}_createToken(){const e=this;let t,n=!1;const a=document.createDocumentFragment(),i=e.selectedIndexes[e.selectedIndexes.length-1];"plain"!==e.selectionDisplayMode||"one"!==e.selectionMode&&"zeroAndOne"!==e.selectionMode&&"zeroOrOne"!==e.selectionMode&&"radioButton"!==e.selectionMode?"tokens"===e.selectionDisplayMode?1===e.selectedIndexes.length&&["oneOrManyExtended","oneOrMany","zeroAndOne","one","radioButton"].indexOf(e.selectionMode)>-1?t="":(t="&#10006",n=!0):t=1===e.selectedIndexes.length?"":",":t="";const o=e.selectedIndexes,r=e.$.listBox._items;for(let l=0;l<o.length;l++){const s=o[l];r[s]&&a.appendChild(e._applyTokenTemplate(r[s][e.inputMember],"tokens"!==e.selectionDisplayMode&&s===i?"":t,n))}return a}_applySelection(){const e=this;if("placeholder"!==e.selectionDisplayMode&&0!==e.selectedIndexes.length){if(e.$.listBox._items&&0!==e.$.listBox._items.length)if("plain"!==e.selectionDisplayMode)e.$.actionButton.innerHTML="",e.$.actionButton.appendChild(e._createToken());else{const t=e.$.listBox.selectedIndexes,n=e.$.listBox._items;let a=[];for(let i=0;i<t.length;i++){const o=t[i];n[o]&&a.push(n[o][e.inputMember])}e.$.actionButton.innerHTML=a.length?`<span class="smart-token">${a.join(", ").trim()}</span>`:""}}else e.$.actionButton.innerHTML=e.placeholder}_applyTokenTemplate(e,t,n){const a=this,i=document.createElement("span"),o=function(){return"<span class='smart-drop-down-list-selection-label' role=\"presentation\">"+e+`</span><span class='smart-drop-down-list-unselect-button' role="button"${n?' aria-label="Unselect"':""}>${t}</span>`};if(i.classList.add("smart-token"),a._tokenTemplate){let r=document.importNode(a._tokenTemplate.content,!0);const l=r.childNodes.length,s=/{{\w+}}/g;let c;for(let u=0;u<l;u++)c=s.exec(r.childNodes[u].innerHTML),c&&(r.childNodes[u].innerHTML=r.childNodes[u].innerHTML.replace(c[0],o())),r.childNodes[u].outerHTML&&(i.innerHTML+=r.childNodes[u].outerHTML)}else"function"==typeof a.tokenTemplate?a.tokenTemplate(i,{label:e,iconSeparator:t}):i.innerHTML=o();return i}_bindingCompleteHandler(){const e=this;e.$.listBox&&requestAnimationFrame(()=>{e._setDropDownSize(),e._positionDetection.checkBrowserBounds()})}_buttonsDownHandler(e){const t=this;if(!t.disabled){if(t.hasRippleAnimation)if(t.$.buttonsContainer&&"dropDownButton"!==t.dropDownOpenMode){const n=t.$.buttonsContainer;n.firstElementChild.noRipple=!0,Smart.Utilities.Animation.Ripple.animate(n,e.pageX,e.pageY),n.firstElementChild.noRipple=!1}else Smart.Utilities.Animation.Ripple.animate(e.target,e.pageX,e.pageY);t._preventsSelectStart=!0,t.tagName.toLowerCase().indexOf("smart-drop-down-")>-1&&"dropDownButton"===t.dropDownOpenMode&&e.target===t.$.actionButton&&t.$.actionButton.setAttribute("active",""),t.opened&&(t._preventDropDownClose=!0)}}_buttonsMouseEventsHandler(e){const t=this;t.disabled||("mouseenter"===e.type?(t.setAttribute("hover",""),e.target.setAttribute("hover",""),"dropDownButton"===t.dropDownOpenMode&&e.target===t.$.dropDownButton&&t.setAttribute("drop-down-button-hover","")):(t.removeAttribute("hover"),t.removeAttribute("drop-down-button-hover"),e.target.removeAttribute("hover")))}_calculateDropDownSize(){const e=this;e._dropDownSize={};const t=window.getComputedStyle(e.$.dropDownContainer),n=parseFloat(t.getPropertyValue("border-top-width").trim()),a=parseFloat(t.getPropertyValue("border-bottom-width").trim()),i=parseFloat(t.getPropertyValue("margin-top").trim()),o=parseFloat(t.getPropertyValue("margin-bottom").trim()),r=parseFloat(t.getPropertyValue("padding-top").trim()),l=parseFloat(t.getPropertyValue("padding-bottom").trim());Smart.Utilities.Core.CSSVariablesSupport()&&(e._dropDownSize.width=t.getPropertyValue("--smart-drop-down-list-drop-down-width").trim(),e._dropDownSize.height=t.getPropertyValue("--smart-drop-down-list-drop-down-height").trim()),(!e._dropDownSize.width||e._dropDownSize.width.indexOf("initial")>-1)&&(e._dropDownSize.width=e.offsetWidth),e._dropDownSize.height||(e._dropDownSize.height="auto"),e._dropDownSize.minHeight=parseFloat(t.getPropertyValue("min-height").trim()),e._dropDownSize.maxHeight=parseFloat(t.getPropertyValue("max-height").trim()),e._dropDownSize.borderWidth=(isNaN(n)?0:n)+(isNaN(a)?0:a),e._dropDownSize.paddingWidth=(isNaN(r)?0:r)+(isNaN(l)?0:l),e._dropDownSize.marginWidth=(isNaN(i)?0:i)+(isNaN(o)?0:o)}_createElement(){const e=this;e._tokenTemplate=e._validateTemplate(e.tokenTemplate),e._applySelection(),e._setDropDownSize(),e._setFocusable(),e.$.arrow.noRipple=!0,e._shadowDOMStylesDelay=e.shadowRoot,e._setAriaRelations(!0)}_documentDownHandler(e){const t=this;if(t.disabled||t.readonly)return;let n=e.originalEvent.target;if(n===t._overlay&&(t._overlayDown=!0),t.shadowRoot){n=e.originalEvent.composedPath()[0];let i=n.getRootNode().host;for(;i;)i.closest(".smart-drop-down-container")===t.$.dropDownContainer&&(t._isDropDownClicked=!0),i=i.getRootNode().host}else t.isInShadowDOM&&(n=e.originalEvent.composedPath()[0]),t._isDropDownClicked=n.closest(".smart-drop-down-container")===t.$.dropDownContainer;if(t._buttonClicked=n.closest(".smart-action-button")||n.closest(".smart-drop-down-button"),t.$.listBox){let i=n.closest("smart-list-item");t.$.listBox.contains(i)||(i=void 0),t.hasRippleAnimation&&i&&Smart.Utilities.Animation.Ripple.animate(i,e.pageX,e.pageY),(i||n===t.$.listBox.$.filterInput||n.closest(".smart-token"))&&(t._preventDropDownClose=!0)}if(t._isDropDownClicked&&(t._preventDropDownClose=!0),n!==t.$.resizeBar||"none"===t.resizeMode)return;t._resizeDetails||(t._resizeDetails={});const a=t.$.dropDownContainer.getBoundingClientRect();t._resizeDetails.started=!0,t._resizeDetails.x=e.pageX,t._resizeDetails.y=e.pageY,t._resizeDetails.width=t.$.dropDownContainer.offsetWidth,t._resizeDetails.height=t.$.dropDownContainer.offsetHeight,t._resizeDetails.offsetXL=e.clientX-a.left,t._resizeDetails.offsetXR=a.left+t.$.dropDownContainer.offsetWidth-e.clientX,t._resizeDetails.offsetY=a.top+t.$.dropDownContainer.offsetHeight-e.clientY,t._resizeDetails.offsetYtop=e.clientY-a.top,t._preventDropDownClose=!0}_documentMoveHandler(e){const t=this,n=t.shadowRoot||t.isInShadowDOM?e.originalEvent.composedPath()[0]:e.originalEvent.target;if("auto"===t.dropDownOpenMode&&null!==t.dropDownAppendTo&&(t.contains(n)||t.$.dropDownContainer.contains(n)?t._isElementHovered=!0:(t._isElementHovered=!1,t._autoClose())),!t._resizeDetails||t._resizeDetails&&!t._resizeDetails.started)return;t.setAttribute("resizing",""),t._resizeDetails.resizeEventFired||(t.$.fireEvent("resizeStart",{position:{left:e.pageX,top:e.pageY}}),t._resizeDetails.resizeEventFired=!0);const a=document.documentElement,i=t.$.dropDownContainer.getBoundingClientRect(),o=t.getBoundingClientRect(),r=t.$.dropDownContainer.hasAttribute("top")?"top":"bottom";let l;function s(){if(l=e.pageY-t._resizeDetails.y,"bottom"===r)t._resizeDetails.height=Math.min(a.clientHeight-i.top-6,Math.max(0,t._resizeDetails.height+l)),t._resizeDetails.y=Math.max(i.top+a.scrollTop-t._resizeDetails.offsetY,Math.min(a.clientHeight+a.scrollTop-1.5*t._resizeDetails.offsetY,e.pageY));else{if(t._resizeDetails.height=Math.min(t._dropDownSize.maxHeight,Math.max(0,Math.min(o.top,t._resizeDetails.height-l))),l=Math.max(0,i.top+(i.height-Math.max(t._dropDownSize.minHeight,t._resizeDetails.height))),t.dropDownAppendTo){const p=Math.abs(parseFloat(getComputedStyle(t.$.dropDownContainer).getPropertyValue("margin-bottom")))||0;t.$.dropDownContainer.style.top=t.dropDownAppendTo?p+l+"px":""}const u=o.top+a.scrollTop+t._resizeDetails.offsetYtop;t._resizeDetails.y=Math.max(t._resizeDetails.offsetYtop,Math.min(u,Math.max(u-t._dropDownSize.maxHeight,e.pageY)))}t.$.dropDownContainer.style.height=t._resizeDetails.height+"px"}function c(){l=e.pageX-t._resizeDetails.x,t._resizeDetails.width=Math.min(a.clientWidth-i.left-6,Math.max(0,t._resizeDetails.width+l)),t.$.dropDownContainer.style.width=t._resizeDetails.width+"px",t._resizeDetails.x=Math.max(i.left+a.scrollLeft-t._resizeDetails.offsetXR,Math.min(a.clientWidth+a.scrollLeft-1.5*t._resizeDetails.offsetXR,e.pageX))}switch(t.resizeMode){case"vertical":s();break;case"horizontal":c();break;case"both":c(),s()}}_documentUpHandler(e){const t=this;if(t.$.actionButton.removeAttribute("active"),t._resizeDetails&&t._resizeDetails.started)return t._resizeDetails.started=t._resizeDetails.resizeEventFired=!1,t.removeAttribute("resizing"),t._preventDropDownClose=!1,t.focus(),void t.$.fireEvent("resizeEnd",{position:{left:e.pageX,top:e.pageY}});if(t.disabled||t._isDropDownClicked||t.readonly)return void delete t._isDropDownClicked;if(t._overlayDown)return t.close(),void delete t._overlayDown;let n=e.originalEvent.target,a=n.closest?n.closest("smart-drop-down-list"):void 0;if((t.enableShadowDOM||t.isInShadowDOM)&&(n=e.originalEvent.composedPath()[0],a=n.getRootNode().host),t._preventsSelectStart=!1,void 0===n||n===t.$.resizeBar)return;if("tokens"===t.selectionDisplayMode&&n.classList.contains("smart-drop-down-list-selection-label")&&a===t){"none"!==t.dropDownOpenMode&&t.open();let r=t.$.listBox._items.filter(l=>l[t.inputMember].toString()===n.textContent)[0];return t.$.listBox._scrollView.scrollTop=r.offsetTop,void t._focus(r)}if("tokens"===t.selectionDisplayMode&&n.classList.contains("smart-drop-down-list-unselect-button")&&a===t)return 1===t.selectedIndexes.length&&["zeroOrMany","zeroOrOne","checkBox"].indexOf(t.selectionMode)<0?void 0:void t.unselect(t.$.listBox._items.filter(r=>r[t.inputMember].toString()===n.previousElementSibling.textContent)[0]);const i=n.closest(".smart-action-button");let o;if(t._buttonClicked&&("dropDownButton"===t.dropDownOpenMode&&i&&t._buttonClicked===t.$.actionButton?t.$.fireEvent("actionButtonClick"):n.closest(".smart-drop-down-button")!==t._buttonClicked&&i!==t._buttonClicked||(o=!0,t.$.fireEvent("dropDownButtonClick"))),t._buttonClicked=void 0,i===t.$.actionButton||n.closest(".smart-drop-down-button")===t.$.dropDownButton)return"dropDownButton"===t.dropDownOpenMode&&i===t.$.actionButton?void t.close():void(t.$dropDownContainer.hasClass("smart-visibility-hidden")&&"none"!==t.dropDownOpenMode&&o&&"pointercancel"!==e.originalEvent.type?t.open():t.close());n=t._getUpEventTarget(n),void 0!==n&&("dropDownContainer"!==n&&"item"!==n||"item"===n&&"checkBox"!==t.selectionMode&&t.selectionMode.indexOf("Many")<0)&&t.close()}_dragStartHandler(e){this._resizeDetails&&this._resizeDetails.started&&e.preventDefault()}_dropDownTransitionendHandler(){const e=this;e._edgeMacFF&&!e.opened&&e.hasAnimation&&(e.$.dropDownContainer.style.top=e.$.dropDownContainer.style.left="",e.$dropDownContainer.addClass("not-in-view"))}_focus(e){this.$.listBox._focus(e)}_blurEventHandler(){const e=this;e.$.dropDownButton&&(e.removeAttribute("focus"),e.$.dropDownButton.removeAttribute("focus")),e.$.actionButton&&(e.removeAttribute("focus"),e.$.actionButton.removeAttribute("focus")),e.nodeName&&"smart-drop-down-list"===e.nodeName.toLowerCase()&&!e._preventDropDownClose&&e.close()}_focusEventHandler(){const e=this;e.$.dropDownButton&&(e.setAttribute("focus",""),e.$.dropDownButton.setAttribute("focus","")),e.$.actionButton&&(e.setAttribute("focus",""),e.$.actionButton.setAttribute("focus","")),e.removeAttribute("drop-down-button-focus"),e.removeAttribute("action-button-focus")}_buttonsFocusHandler(e){const t=this;e.target===t.$.dropDownButton?"focus"===e.type?t.setAttribute("drop-down-button-focus",""):(t.removeAttribute("drop-down-button-focus"),t.nodeName&&"smart-drop-down-list"===t.nodeName.toLowerCase()&&!t._preventDropDownClose&&t.close()):"focus"===e.type?t.setAttribute("action-button-focus",""):t.removeAttribute("action-button-focus")}_getUpEventTarget(e){const t=this;let n=e;for(n=void 0===n.parentElement?n.getRootNode().host:n.parentElement;n;){if(n===t.$.dropDownContainer){n="dropDownContainer";break}n=void 0===n.parentElement?n.getRootNode().host:n.parentElement}return n}_keyDownHandler(e){const t=this,n=t.enableShadowDOM&&t.shadowRoot.activeElement||document.activeElement,a=t.enableShadowDOM?e.composedPath()[0]:e.target;if(!(t.$.listBox&&a===t.$.listBox.$.filterInput||n!==t&&n!==t.$.dropDownButton&&n!==t.$.actionButton))switch(e.key){case"Enter":case" ":e.preventDefault(),a!==t.$.actionButton&&(t._keyPressed=!0,t.opened?(t._focusedItem&&t.select(t._focusedItem),("Enter"===e.key&&["none"].indexOf(t.selectionMode)<0||" "===e.key&&["none","zeroAndOne","one","radioButton"].indexOf(t.selectionMode)>-1)&&t.close()):t.opened||t.readonly||"none"===t.dropDownOpenMode||t.open()),"dropDownButton"===t.dropDownOpenMode&&a.setAttribute("active","");break;case"End":case"Home":case"PageUp":case"PageDown":case"ArrowUp":case"ArrowDown":if(t.readonly)return;if(e.altKey)return t._keyPressed=!1,void(t.$dropDownContainer.hasClass("smart-visibility-hidden")?t.open():t.close());e.preventDefault(),t.$.listBox._handleKeyStrokes(e.key);break;case"Escape":e.preventDefault(),t.close();break;default:if(t.readonly)return;"oneOrManyExtended"===t.selectionMode&&(t.$.listBox._keysPressed[e.key]=!0),t.$.listBox._applyIncrementalSearch(e.key)}}_keyUpHandler(e){const t=this,n=t.enableShadowDOM?e.composedPath()[0]:e.target;t.$.listBox&&n===t.$.listBox.$.filterInput||("Enter"!==e.key&&" "!==e.key||(n.removeAttribute("active"),t.$dropDownContainer.hasClass("smart-visibility-hidden")||(t._keyPressed=!1)),t.$.listBox&&"oneOrManyExtended"===t.selectionMode&&(t.$.listBox._keysPressed[e.key]=!1))}_listBoxChangeHandler(e){const t=this;if(e.target===t.$.listBox){if((t.dropDownAppendTo||t.enableShadowDOM)&&t.$.fireEvent("change",e.detail),"list"===t.autoComplete&&e.detail){const n=t.$.listBox._items[e.detail.index];t._lastSelectedItem=n&&n.selected?n:void 0}t._applySelection(t.selectionMode,e.detail)}else e.stopPropagation()}_listBoxItemClickHandler(e){const t=this;(t.dropDownAppendTo||t.enableShadowDOM)&&t.$.fireEvent(e.type,e.detail),"checkBox"!==t.selectionMode&&t.selectionMode.indexOf("Many")<0&&t.close(),Smart.Utilities.Core.isMobile||t.focus(),delete t._isDropDownClicked}_listBoxKeyDownHandler(e){const t=this;if("Enter"===e.key)return t.close(),"dropDownButton"===t.dropDownOpenMode?t.$.dropDownButton.focus():t.focus(),void e.stopPropagation();"Escape"!==e.key||t.close()}_mouseEnterHandler(){const e=this;e._isElementHovered=!0,e.tagName.toLowerCase().indexOf("smart-drop-down-")>-1&&"auto"===e.dropDownOpenMode&&!e.disabled&&!e.readonly&&e.open()}_mouseLeaveHandler(){const e=this;e.removeAttribute("hover"),e._isElementHovered=!1,"auto"!==e.dropDownOpenMode||e.disabled||e.readonly||e._autoClose()}_mouseWheelHandler(e){const t=this;t.disabled||t.readonly||t.items&&0===t.items.length||t.$dropDownContainer&&!t.$dropDownContainer.hasClass("smart-visibility-hidden")||t.$.listBox&&(e.preventDefault(),t.$.listBox._handleKeyStrokes(e.deltaY>0?"ArrowDown":"ArrowUp"))}_autoClose(){const e=this;e._autoCloseTimeout=setTimeout(function(){e._isElementHovered||e.close(),clearTimeout(e._autoCloseTimeout)}.bind(e),e.autoCloseDelay)}_propertyValidator(e,t){return"number"!=typeof t&&"string"!=typeof t?e:t}_resizeHandler(){this.refresh()}refresh(){const e=this;"none"===e.resizeMode&&(e._calculateDropDownSize(),e._setDropDownSize())}_selectStartHandler(e){this._preventsSelectStart&&e.preventDefault()}_setAriaRelations(e){const t=this;let n,a;"dropDownButton"!==t.dropDownOpenMode?(n=t.$.dropDownButton,n.setAttribute("aria-hidden",!0),a=t,t.$.actionButton.removeAttribute("role")):(n=t,a=t.$.dropDownButton,a.removeAttribute("aria-hidden"),t.$.actionButton.setAttribute("role","button")),t._ariaButton=a,a.setAttribute("role","button"),a.setAttribute("aria-haspopup","listbox"),a.setAttribute("aria-owns",t.$.listBox.id),a.setAttribute("aria-describedby",t.$.hint.id),t.label?a.setAttribute("aria-labelledby",t.$.label.id):"DropDownList"===t.elementName&&a.setAttribute("aria-labelledby",t.$.actionButton.id),n.setAttribute("role","presentation"),n.removeAttribute("aria-owns"),e?a.setAttribute("aria-expanded",t.opened):(n.removeAttribute("aria-describedby"),n.removeAttribute("aria-expanded"),n.removeAttribute("aria-haspopup"),n.removeAttribute("aria-labelledby"))}_setDropDownSize(){const e=this,t=e.$.listBox;let n;if(e._dropDownSize||e._calculateDropDownSize(),["dropDownMinWidth","dropDownMaxWidth"].forEach(a=>{e.$.dropDownContainer.style[a.replace("dropDown","").replace(/^./,"m")]="initial"===e[a]?e.offsetWidth+"px":e[a]?parseFloat(e[a])+(e[a].toString().endsWith("%")?"%":"px"):null}),["dropDownMinHeight","dropDownMaxHeight"].forEach(a=>{e.$.dropDownContainer.style[a.replace("dropDown","").replace(/^./,"m")]=e[a]?parseFloat(e[a])+(e[a].toString().endsWith("%")?"%":"px"):null}),e.$.dropDownContainer.style.width=e.dropDownWidth?"auto"!==e.dropDownWidth?("initial"===e.dropDownWidth?e.offsetWidth:parseFloat(e.dropDownWidth))+"px":"auto":"auto"===e._dropDownSize.width?"auto":(parseFloat(e._dropDownSize.width)||0)+"px",e.dropDownHeight&&"auto"!==e.dropDownHeight)e.$.dropDownContainer.style.height=parseFloat(e.dropDownHeight)+((e.dropDownHeight+"").indexOf("%")>-1?"%":"px");else if(!e.$.listBox||"auto"!==e._dropDownSize.height&&"auto"!==e.dropDownHeight)e.$.dropDownContainer.style.height=e._dropDownSize.height;else{e.$.dropDownContainer.style.height="";let a=2*parseInt(window.getComputedStyle(t.$.itemsContainer).getPropertyValue("--smart-list-item-vertical-offset"));if(isNaN(a)&&(a=6),n=a,t.items.length>0?t.items.map(i=>n+=i.height||i.offsetHeight):n=t.$.placeholder.offsetHeight,e.filterable){const i=t.$.filterInputContainer;n+=i.offsetHeight+i.offsetTop}n=n+e._dropDownSize.paddingWidth+e._dropDownSize.borderWidth,e.$.dropDownContainer.style.height=n+"px"}if(t){if(void 0===n||!t.$)return void t._refreshLayout();const a=Math.max(0,e._dropDownSize.minHeight-(n-t.$.horizontalScrollBar.offsetHeight));a&&(e.$.dropDownContainer.style.height=n+a+"px"),!e.opened&&e.virtualized&&t.refresh()}}_styleChangedHandler(e){const t=this;if(t.dropDownAppendTo){const n=e.detail.styleProperties,a=["font-size","font-family","font-style","font-weight"];for(let i=0;i<a.length;i++)n[a[i]]&&(t.$.dropDownContainer.style[a[i]]=n[a[i]].value)}"auto"===t._dropDownSize.height&&t._setDropDownSize()}_validateTemplate(e){const t=this;if(e&&"function"!=typeof e)if("content"in document.createElement("template")){if(e instanceof HTMLTemplateElement||(e=document.getElementById(e)),null!==e&&"content"in e)return e;t.error(t.localize("invalidTemplate",{elementType:t.nodeName.toLowerCase(),property:"tokenTemplate"}))}else t.error(t.localize("htmlTemplateNotSuported",{elementType:t.nodeName.toLowerCase()}))}})},6321:()=>{!function(){const e="9.1.27",t=[];let n="Smart";if(window[n]&&window[n].Version){if(window[n].Version===e)return;if(window[n].Version!==e)n+=e;else{let C=2;for(;window[n];)n+=C.toString(),C++}}const a=navigator.userAgent.indexOf("Edge")>-1&&navigator.appVersion.indexOf("Edge")>-1;document.elementsFromPoint||(document.elementsFromPoint=document.msElementsFromPoint);class i{static isBoolean(d){return"boolean"==typeof d}static isFunction(d){return!!(d&&d.constructor&&d.call&&d.apply)}static isArray(d){return Array.isArray(d)}static isObject(d){return d&&("object"==typeof d||this.isFunction(d))||!1}static isDate(d){return d instanceof Date}static isString(d){return"string"==typeof d}static isNumber(d){return"number"==typeof d}static getType(d){const m=this,h=["Boolean","Number","String","Function","Array","Date","Object"].find(f=>{if(m["is"+f](d))return f});return h?h.toLowerCase():void 0}}class o{static animate(d,m,h,f){const _=d;if(!_||_ instanceof HTMLElement==0)return;if(0===_.getElementsByClassName("smart-ripple").length){const R=document.createElement("span");R.classList.add("smart-ripple"),R.setAttribute("role","presentation");let z=!0,G=null;if(window[n].EnableShadowDOM&&_.enableShadowDOM&&!0!==_.isInShadowDOM){for(let j=0;j<_.shadowRoot.host.shadowRoot.children.length;j++)"link"!==_.shadowRoot.host.shadowRoot.children[j].tagName.toLowerCase()&&(G=_.shadowRoot.host.shadowRoot.children[j]);_.shadowRoot.host.shadowRoot.querySelector(".smart-ripple")&&(z=!1)}else G=_.firstElementChild;z&&(G&&!G.noRipple&&G.offsetHeight>0?G.appendChild(R):_.appendChild(R))}let w=null;if(w=window[n].EnableShadowDOM&&_.shadowRoot?_.shadowRoot.host.shadowRoot.querySelector(".smart-ripple"):_.getElementsByClassName("smart-ripple")[0],!w)return;w.innerHTML="",w.classList.remove("smart-animate"),w.style.height=w.style.width=Math.max(_.offsetHeight,_.offsetWidth)+"px";const S=window.getComputedStyle(w.parentElement),E=parseInt(S.borderLeftWidth)||0,$=parseInt(S.borderTopWidth)||0,L=_.getBoundingClientRect(),k=m-(L.left+window.pageXOffset)-w.offsetWidth/2-E,F=h-(L.top+window.pageYOffset)-w.offsetHeight/2-$;w.style.left=k+"px",w.style.top=F+"px",w.classList.add("smart-animate"),w.addEventListener("animationend",function R(){w.parentElement&&w.parentElement.removeChild(w),f&&f(),w.removeEventListener("animationend",R),w.removeEventListener("animationcancel",R)}),w.addEventListener("animationcancel",function R(){w.parentElement&&w.parentElement.removeChild(w),f&&f(),w.removeEventListener("animationcancel",R),w.removeEventListener("animationend",R)})}}class r{static easeInQuad(d,m,h,f){return h*(d/=f)*d+m}static easeOutQuad(d,m,h,f){return-h*(d/=f)*(d-2)+m}static easeInOutQuad(d,m,h,f){return(d/=f/2)<1?h/2*d*d+m:-h/2*(--d*(d-2)-1)+m}static easeInCubic(d,m,h,f){return h*(d/=f)*d*d+m}static easeOutCubic(d,m,h,f){return h*((d=d/f-1)*d*d+1)+m}static easeInOutCubic(d,m,h,f){return(d/=f/2)<1?h/2*d*d*d+m:h/2*((d-=2)*d*d+2)+m}static easeInQuart(d,m,h,f){return h*(d/=f)*d*d*d+m}static easeOutQuart(d,m,h,f){return-h*((d=d/f-1)*d*d*d-1)+m}static easeInOutQuart(d,m,h,f){return(d/=f/2)<1?h/2*d*d*d*d+m:-h/2*((d-=2)*d*d*d-2)+m}static easeInQuint(d,m,h,f){return h*(d/=f)*d*d*d*d+m}static easeOutQuint(d,m,h,f){return h*((d=d/f-1)*d*d*d*d+1)+m}static easeInOutQuint(d,m,h,f){return(d/=f/2)<1?h/2*d*d*d*d*d+m:h/2*((d-=2)*d*d*d*d+2)+m}static easeInSine(d,m,h,f){return-h*Math.cos(d/f*(Math.PI/2))+h+m}static easeOutSine(d,m,h,f){return h*Math.sin(d/f*(Math.PI/2))+m}static easeInOutSine(d,m,h,f){return-h/2*(Math.cos(Math.PI*d/f)-1)+m}static easeInExpo(d,m,h,f){return 0===d?m:h*Math.pow(2,10*(d/f-1))+m}static easeOutExpo(d,m,h,f){return d===f?m+h:h*(1-Math.pow(2,-10*d/f))+m}static easeInOutExpo(d,m,h,f){return 0===d?m:d===f?m+h:(d/=f/2)<1?h/2*Math.pow(2,10*(d-1))+m:h/2*(2-Math.pow(2,-10*--d))+m}static easeInCirc(d,m,h,f){return-h*(Math.sqrt(1-(d/=f)*d)-1)+m}static easeOutCirc(d,m,h,f){return h*Math.sqrt(1-(d=d/f-1)*d)+m}static easeInOutCirc(d,m,h,f){return(d/=f/2)<1?-h/2*(Math.sqrt(1-d*d)-1)+m:h/2*(Math.sqrt(1-(d-=2)*d)+1)+m}static easeInElastic(d,m,h,f){let _=1.70158,w=0,S=h;return 0===d?m:1==(d/=f)?m+h:(w||(w=.3*f),S<Math.abs(h)?(S=h,_=w/4):_=w/(2*Math.PI)*Math.asin(h/S),-S*Math.pow(2,10*(d-=1))*Math.sin((d*f-_)*(2*Math.PI)/w)+m)}static easeOutElastic(d,m,h,f){let _=1.70158,w=0,S=h;return 0===d?m:1==(d/=f)?m+h:(w||(w=.3*f),S<Math.abs(h)?(S=h,_=w/4):_=w/(2*Math.PI)*Math.asin(h/S),S*Math.pow(2,-10*d)*Math.sin((d*f-_)*(2*Math.PI)/w)+h+m)}static easeInOutElastic(d,m,h,f){let _=1.70158,w=0,S=h;return 0===d?m:2==(d/=f/2)?m+h:(w||(w=f*(.3*1.5)),S<Math.abs(h)?(S=h,_=w/4):_=w/(2*Math.PI)*Math.asin(h/S),d<1?S*Math.pow(2,10*(d-=1))*Math.sin((d*f-_)*(2*Math.PI)/w)*-.5+m:S*Math.pow(2,-10*(d-=1))*Math.sin((d*f-_)*(2*Math.PI)/w)*.5+h+m)}static easeInBack(d,m,h,f,_){return void 0===_&&(_=1.70158),h*(d/=f)*d*((_+1)*d-_)+m}static easeOutBack(d,m,h,f,_){return void 0===_&&(_=1.70158),h*((d=d/f-1)*d*((_+1)*d+_)+1)+m}static easeInOutBack(d,m,h,f,_){return void 0===_&&(_=1.70158),(d/=f/2)<1?h/2*(d*d*((1+(_*=1.525))*d-_))+m:h/2*((d-=2)*d*((1+(_*=1.525))*d+_)+2)+m}static easeInBounce(d,m,h,f){return h-this.easeOutBounce(f-d,0,h,f)+m}static easeOutBounce(d,m,h,f){return(d/=f)<1/2.75?h*(7.5625*d*d)+m:d<2/2.75?h*(7.5625*(d-=1.5/2.75)*d+.75)+m:d<2.5/2.75?h*(7.5625*(d-=2.25/2.75)*d+.9375)+m:h*(7.5625*(d-=2.625/2.75)*d+.984375)+m}static easeInOutBounce(d,m,h,f){return d<f/2?.5*this.easeInBounce(2*d,0,h,f)+m:.5*this.easeOutBounce(2*d-f,0,h,f)+.5*h+m}}class l{static get isMobile(){return/(iphone|ipod|ipad|android|iemobile|blackberry|bada)/.test(window.navigator.userAgent.toLowerCase())||["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}static get Browser(){let d;const m=function(f){let _=f.indexOf(d);if(-1===_)return;const w=f.indexOf("rv:");return parseFloat(f.substring("Trident"===d&&-1!==w?w+3:_+d.length+1))};let h={};return h[function(){const f=[{string:navigator.userAgent,subString:"Edge",identity:"Edge"},{string:navigator.userAgent,subString:"MSIE",identity:"IE"},{string:navigator.userAgent,subString:"Trident",identity:"IE"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.userAgent,subString:"Opera",identity:"Opera"},{string:navigator.userAgent,subString:"OPR",identity:"Opera"},{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"Safari",identity:"Safari"}];for(let _=0;_<f.length;_++)if(d=f[_].subString,-1!==f[_].string.indexOf(f[_].subString))return f[_].identity;return"Other"}()]=!0,h.version=m(navigator.userAgent)||m(navigator.appVersion)||"Unknown",h}static toCamelCase(d){return d.replace(/-([a-z])/g,function(m){return m[1].toUpperCase()})}static toDash(d){return d.split(/(?=[A-Z])/).join("-").toLowerCase()}static unescapeHTML(d){return(new DOMParser).parseFromString(d,"text/html").documentElement.textContent}static escapeHTML(d){const m={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};return String(d).replace(/[&<>"'`=\/]/g,h=>m[h])}static sanitizeHTML(d){if(d&&(d.indexOf("onclick")>=0||d.indexOf("onload")>=0||d.indexOf("onerror")>=0))return this.escapeHTML(d);const m=new RegExp("<s*(applet|audio|base|bgsound|embed|form|iframe|isindex|keygen|layout|link|meta|object|script|svg|style|template|video)[^>]*>(.*?)<s*/s*(applet|audio|base|bgsound|embed|form|iframe|isindex|keygen|layout|link|meta|object|script|svg|style|template|video)>","ig");return String(d).replace(m,h=>this.escapeHTML(h))}static createGUID(){function d(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return d()+d()+"-"+d()+"-"+d()+"-"+d()+"-"+d()+d()+d()}static getScriptLocation(){return"./"!==window[n].BaseUrl?window[n].BaseUrl:function(){if(document.currentScript){let _=document.currentScript.src,w=_.lastIndexOf("/");return _=_.substring(0,w),_}const d=new Error;let m="(",h=")";if(Smart.Utilities.Core.Browser.Safari&&(m="@",h="\n"),d.fileName)return d.fileName.replace("/smart.element.js","");let f=d.stack.split(m);return f=f[1],f=f.split(h)[0],f=f.split(":"),f.splice(-2,2),f=f.join(":"),f.replace("/smart.element.js","")}()}static CSSVariablesSupport(){return window.CSS&&window.CSS.supports&&window.CSS.supports("(--fake-var: 0)")}static assign(d,m){const h=_=>_&&"object"==typeof _&&!Array.isArray(_)&&null!==_;let f=Object.assign({},d);return h(d)&&h(m)&&Object.keys(m).forEach(_=>{h(m[_])?_ in d?f[_]=this.assign(d[_],m[_]):Object.assign(f,{[_]:m[_]}):Object.assign(f,{[_]:m[_]})}),f}static html(d,m){const h=this;let f="",_=d.childNodes;if(!m){for(let w,S=0,E=_.length;S<E&&(w=_[S]);S++){const $=["strong"];if(w instanceof HTMLElement||w.tagName&&$.indexOf(w.tagName.toLowerCase())>=0){const L=w.tagName.toLowerCase(),k=w.attributes;let F="<"+L;for(let R,z=0;R=k[z];z++)F+=" "+R.name+'="'+R.value.replace(/[&\u00A0"]/g,D.Core.escapeHTML)+'"';F+=">",["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"][L]&&(f+=F),f=f+F+h.html(w)+"</"+L+">"}else{if(8===w.nodeType)continue;f+=w.textContent.replace(/[&\u00A0<>]/g,D.Core.escapeHTML)}}return f}d.innerHTML=m.replace(/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,"<$1></$2>")}}let s=[];class c{static watch(d){switch(d.nodeName.toLowerCase()){case"smart-grid":case"smart-kanban":case"smart-table":case"smart-pivot-table":case"smart-scheduler":case"smart-tabs":case"smart-card-view":case"smart-list-box":case"smart-combo-box":case"smart-drop-down-list":case"smart-calendar":case"smart-gauge":case"smart-numeric-text-box":case"smart-menu":case"smart-tree":s.push(d);break;default:return}c.start()}static start(){c.isStarted||(c.isStarted=!0,c.interval&&clearInterval(c.interval),0===s.length||document.hidden?c.isStarted=!1:c.interval=setInterval(function(){c.observe()},100))}static stop(){c.isStarted=!1,c.interval&&clearInterval(c.interval)}static observeElement(d){const m=d;if("test"===window.Smart.Mode||document.hidden)return void(c.interval&&clearInterval(c.interval));let h=d._computedStyle||"resize"!==m.hasStyleObserver?document.defaultView.getComputedStyle(m,null):{},f=!0,_="resize"!==m.hasStyleObserver?["paddingLeft","paddingRight","paddingTop","paddingBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth","display","visibility","font-size","font-family","font-style","font-weight","max-height","min-height","max-width","min-width","overflow","overflow-x","overflow-y"]:[];if(d.styleProperties&&(_=_.concat(d.styleProperties)),d.observableStyleProperties&&(_=d.observableStyleProperties),!m._styleInfo){m._styleInfo=[];for(let S=0;S<_.length;S++){const E=_[S],$=E.startsWith("--")?h.getPropertyValue(E):h[E];m._styleInfo[E]=$}return}if(d.isHidden||"none"!==h.display&&(0!==d.offsetWidth&&0!==d.offsetHeight||(d.isHidden=!0)),d.isHidden){if(d.visibilityChangedHandler(),d.isHidden)return;f=!1}let w=[];for(let S=0;S<_.length;S++){const E=_[S],$=E.startsWith("--")?h.getPropertyValue(E):h[E];m._styleInfo[E]!==$&&(w[E]={oldValue:m._styleInfo[E],value:$},w.length++),m._styleInfo[E]=$}w.length>0&&(m.$.fireEvent("styleChanged",{styleProperties:w},{bubbles:!1,cancelable:!0}),w.display&&f&&m.$.fireEvent("resize",m,{bubbles:!1,cancelable:!0}))}static observe(){for(let d=0;d<s.length;d++)this.observeElement(s[d])}static unwatch(d){c.stop();const m=s.indexOf(d);-1!==m&&s.splice(m,1),c.start()}}let u=[];const p=[],g=["resize","down","up","move","tap","taphold","swipeleft","swiperight","swipetop","swipebottom"];class b{constructor(d){const m=this;m.target=d,m.$target=new y(d),m.$document=d.$document?d.$document:new y(document),m.id=(Date.now().toString(36)+Math.random().toString(36).substr(2,5)).toUpperCase();let h={handlers:{},boundEventTypes:[],listen:m.listen.bind(m),unlisten:m.unlisten.bind(m)};return m.tapHoldDelay=750,m.swipeMin=10,m.swipeMax=5e3,m.swipeDelay=1e3,m.tapHoldDelay=750,m.inputEventProperties=["clientX","clientY","pageX","pageY","screenX","screenY"],g.forEach(f=>{h[f]=_=>{h.handlers[f]=_},m[f]=_=>{if(!h.handlers[_.type]){if(("mousemove"===_.type||"pointermove"===_.type||"touchmove"===_.type)&&h.handlers.move){const w=m.createEvent(_,"move");h.handlers.move(w)}return!0}return h.handlers[_.type](_)}}),m.listen(),m.handlers=h.handlers,h}listen(d){const m=this;if("resize"===d&&m.target!==document&&m.target!==window&&!1!==m.target.hasResizeObserver)if(Smart.Utilities.Core.Browser.Firefox){if(!m.target.resizeObserver){let h,f,_,w=!1,S=m.target.offsetWidth,E=m.target.offsetHeight;const $=new ResizeObserver(()=>{if(!w)return void(w=!0);const L=new CustomEvent("resize",{bubbles:!1,cancelable:!0});f=m.target.offsetWidth,_=m.target.offsetHeight,h=f!==S||_!==E,m.target.requiresLayout&&(h=!0),h&&(m.resize(L),m.target.requiresLayout=!1)});$.observe(m.target),m.target.resizeObserver=$}}else if(!m.target.resizeTrigger){const h=document.createElement("div");h.className="smart-resize-trigger-container",h.innerHTML='<div class="smart-resize-trigger-container"><div class="smart-resize-trigger"></div></div><div class="smart-resize-trigger-container"><div class="smart-resize-trigger-shrink"></div></div>',h.setAttribute("aria-hidden",!0),window[n].EnableShadowDOM&&m.target.shadowRoot?m.target.shadowRoot.appendChild(h):m.target.appendChild(h),m.target.resizeTrigger=h;const f=h.childNodes[0],_=f.childNodes[0],w=h.childNodes[1],S=function(){_.style.width="100000px",_.style.height="100000px",f.scrollLeft=1e5,f.scrollTop=1e5,w.scrollLeft=1e5,w.scrollTop=1e5};let E,$,L,k,F=m.target.offsetWidth,R=m.target.offsetHeight;if(0===F||0===R){const z=function(){S(),m.target.removeEventListener("resize",z)};m.target.addEventListener("resize",z),S()}else S();m.target.resizeHandler=function(){$||($=requestAnimationFrame(function(){if($=0,L=m.target.offsetWidth,k=m.target.offsetHeight,E=L!==F||k!==R,m.target.requiresLayout&&(E=!0),!E)return;F=L,R=k;const z=new CustomEvent("resize",{bubbles:!1,cancelable:!0});m.resize(z),m.target.requiresLayout=!1})),S()},f.addEventListener("scroll",m.target.resizeHandler),w.addEventListener("scroll",m.target.resizeHandler)}m.isListening||(m.isListening=!0,m.isPressed=!1,m.isReleased=!1,m.isInBounds=!1,window.PointerEvent?(m.$target.listen("pointerdown.inputEvents"+m.id,m.pointerDown.bind(m)),m.$target.listen("pointerup.inputEvents"+m.id,m.pointerUp.bind(m)),m.$target.listen("pointermove.inputEvents"+m.id,m.pointerMove.bind(m)),m.$target.listen("pointercancel.inputEvents"+m.id,m.pointerCancel.bind(m))):("ontouchstart"in window&&(m.$target.listen("touchmove.inputEvents"+m.id,m.touchMove.bind(m)),m.$target.listen("touchstart.inputEvents"+m.id,m.touchStart.bind(m)),m.$target.listen("touchend.inputEvents"+m.id,m.touchEnd.bind(m)),m.$target.listen("touchcancel.inputEvents"+m.id,m.touchCancel.bind(m))),m.$target.listen("mousedown.inputEvents"+m.id,m.mouseDown.bind(m)),m.$target.listen("mouseup.inputEvents"+m.id,m.mouseUp.bind(m)),m.$target.listen("mousemove.inputEvents"+m.id,m.mouseMove.bind(m)),m.$target.listen("mouseleave.inputEvents"+m.id,m.mouseLeave.bind(m))),m.target._handleDocumentUp||(m.target._handleDocumentUp=m.handleDocumentUp.bind(m),m.target._handleDocumentUpId=m.id,m.$document.listen("mouseup.inputEvents"+m.target._handleDocumentUpId,m.target._handleDocumentUp)))}unlisten(d){const m=this;if(m.isListening=!1,window.PointerEvent?(m.$target.unlisten("pointerdown.inputEvents"+m.id),m.$target.unlisten("pointerup.inputEvents"+m.id),m.$target.unlisten("pointermove.inputEvents"+m.id),m.$target.unlisten("pointercancel.inputEvents"+m.id)):("ontouchstart"in window&&(m.$target.unlisten("touchstart.inputEvents"+m.id),m.$target.unlisten("touchmove.inputEvents"+m.id),m.$target.unlisten("touchend.inputEvents"+m.id),m.$target.unlisten("touchcancel.inputEvents"+m.id)),m.$target.unlisten("mousedown.inputEvents"+m.id),m.$target.unlisten("mouseup.inputEvents"+m.id),m.$target.unlisten("mousemove.inputEvents"+m.id),m.$target.unlisten("mouseleave.inputEvents"+m.id)),m.target._handleDocumentUp&&(m.$document.unlisten("mouseup.inputEvents"+m.target._handleDocumentUpId,m.target._handleDocumentUp),delete m.target._handleDocumentUp,delete m.target._handleDocumentUpId),"resize"===d)if(Smart.Utilities.Core.Browser.Firefox)m.target.resizeObserver&&(m.target.resizeObserver.unobserve(m.target),delete m.target.resizeObserver);else if(m.target.resizeTrigger){const h=m.target.resizeTrigger,_=h.childNodes[1];h.childNodes[0].removeEventListener("scroll",m.target.resizeHandler),_.removeEventListener("scroll",m.target.resizeHandler),m.target.resizeHandler=null,h.parentNode.removeChild(h),delete m.target.resizeTrigger}}handleDocumentUp(d){const m=this;m.isPressed=!1,m.isReleased=!1,m.resetSwipe(d)}createEvent(d,m){const h=this,f=d.touches,_=d.changedTouches,w=f&&f.length?f[0]:_&&_.length?_[0]:void 0,S=new CustomEvent(m,{bubbles:!0,cancelable:!0,composed:void 0!==h.$target.element.getRootNode().host});if(S.originalEvent=d,w){for(let E=0;E<h.inputEventProperties.length;E++){const $=h.inputEventProperties[E];S[$]=w[$]}return S}for(let E in d)E in S||(S[E]=d[E]);return S}fireTap(d){const m=this;if(clearTimeout(this.tapHoldTimeout),!this.tapHoldFired&&this.isInBounds){const h=m.createEvent(d,"tap");m.tap(h)}}initTap(d){const m=this;m.isInBounds=!0,m.tapHoldFired=!1,m.tapHoldTimeout=setTimeout(function(){if(m.isInBounds){m.tapHoldFired=!0;const h=m.createEvent(d,"taphold");m.taphold(h)}},m.tapHoldDelay)}pointerDown(d){return this.handleDown(d)}mouseDown(d){const m=this;if(!(m.isPressed||m.touchStartTime&&new Date-m.touchStartTime<500))return m.handleDown(d)}touchStart(d){const m=this;return m.touchStartTime=new Date,m.isTouchMoved=!0,m.handleDown(d)}mouseUp(d){const m=this;if(!(m.isReleased||m.touchEndTime&&new Date-m.touchEndTime<500))return m.handleUp(d)}handleDown(d){const m=this;m.isReleased=!1,m.isPressed=!0;const h=m.createEvent(d,"down");return(m.handlers.tap||m.handlers.taphold)&&m.initTap(h),(m.handlers.swipeleft||m.handlers.swiperight||m.handlers.swipetop||m.handlers.swipebottom)&&m.initSwipe(h),m.down(h)}handleUp(d){const m=this;m.isReleased=!0,m.isPressed=!1;const h=m.createEvent(d,"up"),f=m.up(h);return(m.handlers.tap||m.handlers.taphold)&&m.fireTap(h),m.resetSwipe(h),f}handleMove(d){const m=this;let h=m.move(d);return m.isPressed&&(m._maxSwipeVerticalDistance=Math.max(m._maxSwipeVerticalDistance,Math.abs(m._startY-d.pageY)),m._maxSwipeHorizontalDistance=Math.max(m._maxSwipeHorizontalDistance,Math.abs(m._startX-d.pageX)),h=m.handleSwipeEvents(d)),h}touchEnd(d){return this.touchEndTime=new Date,this.handleUp(d)}pointerUp(d){return this.handleUp(d)}pointerCancel(d){this.pointerUp(d)}touchCancel(d){this.touchEnd(d)}mouseLeave(){this.isInBounds=!1}mouseMove(d){if(!this.isTouchMoved)return this.handleMove(d)}pointerMove(d){return this.handleMove(d)}touchMove(d){const m=this,h=d.touches,f=d.changedTouches,_=h&&h.length?h[0]:f&&f.length?f[0]:void 0;for(let w=0;w<m.inputEventProperties.length;w++){const S=m.inputEventProperties[w];void 0===d[S]&&(d[S]=_[S])}return m.isTouchMoved=!0,m.handleMove(d)}handleSwipeEvents(d){const m=this;let h=!0;return(m.handlers.swipetop||m.handlers.swipebottom)&&(h=this.handleVerticalSwipeEvents(d)),!1===h||(m.handlers.swipeleft||m.handlers.swiperight)&&(h=this.handleHorizontalSwipeEvents(d)),h}handleVerticalSwipeEvents(d){let m,h;return m=d.pageY,h=m-this._startY,this.swiped(d,h,"vertical")}handleHorizontalSwipeEvents(d){let m,h;return m=d.pageX,h=m-this._startX,this.swiped(d,h,"horizontal")}swiped(d,m,h){const f=this;if(h=h||0,Math.abs(m)>=f.swipeMin&&!f._swipeEvent&&!f._swipeLocked){let _=m<0?"swipeleft":"swiperight";if("horizontal"===h?f._swipeEvent=f.createEvent(d,_):(_=m<0?"swipetop":"swipebottom",f._swipeEvent=f.createEvent(d,m<0?"swipetop":"swipebottom")),f[_]&&(f[_](this._swipeEvent),Math.abs(m)<=this.swipeMax))return d.stopImmediatePropagation(),!1}return!0}resetSwipe(){this._swipeEvent=null,clearTimeout(this._swipeTimeout)}initSwipe(d){const m=this;m._maxSwipeVerticalDistance=0,m._maxSwipeHorizontalDistance=0,m._startX=d.pageX,m._startY=d.pageY,m._swipeLocked=!1,m._swipeEvent=null,m._swipeTimeout=setTimeout(function(){m._swipeLocked=!0},m.swipeDelay)}}class v{get scrollWidth(){return this.horizontalScrollBar?this.horizontalScrollBar.max:-1}set scrollWidth(d){d<0&&(d=0),this.horizontalScrollBar&&(this.horizontalScrollBar.max=d)}get scrollHeight(){return this.verticalScrollBar?this.verticalScrollBar.max:-1}set scrollHeight(d){d<0&&(d=0),this.verticalScrollBar&&(this.verticalScrollBar.max=d)}get scrollLeft(){return this.horizontalScrollBar?this.horizontalScrollBar.value:-1}set scrollLeft(d){d<0&&(d=0),this.horizontalScrollBar&&(this.horizontalScrollBar.value=d)}get scrollTop(){return this.verticalScrollBar?this.verticalScrollBar.value:-1}set scrollTop(d){d<0&&(d=0),this.verticalScrollBar&&(this.verticalScrollBar.value=d)}get vScrollBar(){return this.verticalScrollBar}get hScrollBar(){return this.horizontalScrollBar}constructor(d,m,h){const f=this;f.container=d,f.horizontalScrollBar=m,f.verticalScrollBar=h,f.disableSwipeScroll=!1,f.listen()}listen(){const d=this,m=l.isMobile,h=d.horizontalScrollBar,f=d.verticalScrollBar;let _,w,S,E,$,L,k,F;d.inputEvents=new b(d.container);const R=function(q){return{amplitude:0,delta:0,initialValue:0,min:0,max:q.max,previousValue:0,pointerPosition:0,targetValue:0,scrollBar:q,value:0,velocity:0}},z=R(h),G=R(f),j=function(){const q=d.container.touchVelocityCoefficient||50;L=Date.now(),k=L-E,E=L;const J=function(U){U.delta=U.value-U.previousValue,U.previousValue=U.value,U.velocity=q*U.delta/(1+k)*.8+.2*U.velocity};J(G),J(z)},X=function(q){return F.value=q>F.max?F.max:q<F.min?F.min:q,F.scrollBar.value=F.value,q>F.max?"max":q<F.min?"min":"value"};function ee(){let q,J;F.amplitude&&(d.container.$.fireEvent("kineticScroll"),q=Date.now()-E,J=-F.amplitude*Math.exp(-q/500),J>5||J<-5?(X(F.targetValue+J),cancelAnimationFrame(w),w=0,w=requestAnimationFrame(ee)):X(F.targetValue))}let ne;d.inputEvents.down(function(q){if(!m)return;const J=q.originalEvent.target,U=J&&J.closest?J.closest("smart-scroll-bar"):void 0;if(U===d.horizontalScrollBar||U===d.verticalScrollBar)return;S=!0,_=!1;const ae=function(ie,ce){ie.amplitude=0,ie.pointerPosition=ce,ie.previousValue=ie.value,ie.value=ie.scrollBar.value,ie.initialValue=ie.value,ie.max=ie.scrollBar.max};ae(G,q.clientY),ae(z,q.clientX),E=Date.now(),clearInterval($),$=setInterval(j,500)}),d.inputEvents.up(function(){if(!S)return!0;if(clearInterval($),d.disableSwipeScroll)return void(S=!1);const q=function(J){F=J,J.amplitude=.8*J.velocity,J.targetValue=Math.round(J.value+J.amplitude),E=Date.now(),cancelAnimationFrame(w),w=requestAnimationFrame(ee),J.velocity=0};G.velocity>10||G.velocity<-10?q(G):(z.velocity>10||z.velocity<-10)&&q(z),S=!1}),d.inputEvents.move(function(q){if(!S)return!0;if(d.disableSwipeScroll||(_&&(q.originalEvent.preventDefault(),q.originalEvent.stopPropagation()),z.visible=d.scrollWidth>0,G.visible=d.scrollHeight>0,!S||!z.visible&&!G.visible))return;const J=d.container.touchScrollRatio,U=d.container;let ae,ie;J&&("number"==typeof J?(ae=-J,ie=-J):"function"==typeof J&&(ae=J(G.max,U.offsetHeight),ie=J(z.max,U.offsetWidth))),G.ratio=ae||-G.max/U.offsetHeight,G.delta=(q.clientY-G.pointerPosition)*G.ratio,z.ratio=ie||-z.max/U.offsetWidth,z.delta=(q.clientX-z.pointerPosition)*z.ratio;let ce="value";const de=function(Q,pe,oe){return Q.delta>5||Q.delta<-5?(F=Q,ce=Q.initialValue+Q.delta>F.max?"max":Q.initialValue+Q.delta<F.min?"min":"value","min"===ce&&0===Q.initialValue||"max"===ce&&Q.initialValue===Q.max||!Q.visible||(d.container.$.fireEvent("kineticScroll"),X(Q.initialValue+Q.delta),j(),oe.originalEvent.preventDefault(),oe.originalEvent.stopPropagation(),_=!0,!1)):null};let me=de(G,0,q);if(null!==me)return me;{let Q=de(z,0,q);if(null!==Q)return Q}}),d.scrollTo=function(q,J){const U=!1===J?z:G;let ae=!1;E||(E=Date.now()),ne||(ne=Date.now()),Math.abs(Date.now()-ne)>375?E=Date.now():ae=!0,ne=Date.now(),U.value=U.scrollBar.value,U.delta=q-U.value,U.max=U.scrollBar.max,q<=U.min&&(q=U.min),q>=U.max&&(q=U.max),U.targetValue=q;const ie=q;let ce=U.value;U.velocity=100*U.delta/(1+U.max),U.from=ce;const de=function(Q){return U.value=Q>U.max?U.max:Q<U.min?U.min:Q,U.scrollBar.value=U.value,Q>U.max?"max":Q<U.min?"min":"value"},me=function(){let Q,pe=Date.now()-ne,oe=Math.min(1e3,Date.now()-E),le=U.velocity*Math.exp(oe/175);if(ae)(le<0&&U.value<=q||le>0&&U.value>=q)&&(le=0),(U.value+le<=U.min||U.value+le>=U.max)&&(le=0),le>.5||le<-.5?(de(U.value+le),cancelAnimationFrame(w),w=0,w=requestAnimationFrame(me)):de(U.targetValue);else{if(pe>=175)return cancelAnimationFrame(w),d.container.$.fireEvent("kineticScroll"),void(w=0);Q=D.Animation.Easings.easeInSine(pe,ce,ie-ce,175),de(Q),cancelAnimationFrame(w),w=0,w=requestAnimationFrame(me)}};cancelAnimationFrame(w),w=requestAnimationFrame(me)},d.inputEvents.listen()}unlisten(){const d=this;d.inputEvents&&d.inputEvents.unlisten(),delete d.inputEvents}}class y{constructor(d){this.events={},this.handlers={},this.element=d}hasClass(d){const m=this,h=d.split(" ");for(let f=0;f<h.length;f++)if(!m.element.classList.contains(h[f]))return!1;return!0}addClass(d){const m=this;if(m.hasClass(d))return;const h=d.split(" ");for(let f=0;f<h.length;f++)m.element.classList.add(h[f]);m.isNativeElement||c.observeElement(m.element)}removeClass(d){const m=this;if(0===arguments.length)return void m.element.removeAttribute("class");const h=d.split(" ");for(let f=0;f<h.length;f++)m.element.classList.remove(h[f]);""===m.element.className&&m.element.removeAttribute("class"),m.isNativeElement||c.observeElement(m.element)}get isCustomElement(){const d=this;return!!d.element.tagName.startsWith(n)||d.element instanceof window[n].BaseElement==1||"DIV"!==d.element.tagName&&"SPAN"!==d.element.tagName&&"BUTTON"!==d.element.tagName&&"INPUT"!==d.element.tagName&&"UL"!==d.element.tagName&&"LI"!==d.element.tagName&&document.createElement(d.element.nodeName)instanceof window[n].BaseElement==1}get isNativeElement(){return!this.isCustomElement}dispatch(d){const m=this,h=m.events[d.type];let f=!1;if(h.length>1)for(let _=0;_<h.length;_++){const w=h[_];if(w.namespace&&w.namespace.indexOf("_")>=0){f=!0;break}}f&&h.sort(function(_,w){let S=_.namespace,E=w.namespace;return S=-1===S.indexOf("_")?0:parseInt(S.substring(S.indexOf("_")+1)),E=-1===E.indexOf("_")?0:parseInt(E.substring(E.indexOf("_")+1)),S<E?-1:S>E?1:0});for(let _=0;_<h.length;_++){const w=h[_];if(d.namespace=w.namespace,d.context=w.context,d.defaultPrevented)break;const S=w.handler.apply(m.element,[d]);if(void 0!==S&&(d.result=S,!1===S)){d.preventDefault(),d.stopPropagation();break}}return d.result}fireEvent(d,m,h){h||(h={bubbles:!0,cancelable:!0,composed:null!==this.element.getRootNode().host}),h.detail=m||{};const _=new CustomEvent(d,h);return _.originalStopPropagation=_.stopPropagation,_.stopPropagation=function(){return _.isPropagationStopped=!0,_.originalStopPropagation()},this.dispatchEvent(_),_}get isPassiveSupported(){const d=this;if(void 0!==d.supportsPassive)return d.supportsPassive;d.supportsPassive=!1;try{let m=Object.defineProperty({},"passive",{get:function(){d.supportsPassive=!0}});window.addEventListener("testPassive",null,m),window.removeEventListener("testPassive",null,m)}catch(m){}return d.supportsPassive}dispatchEvent(d){const m=this,h=d.type,f=m.element.context,_=h.substring(0,1).toUpperCase()+h.substring(1);m.element.context=document,m.element["on"+_]?m.element["on"+_](d):m.element["on"+h.toLowerCase()]?m.element["on"+h.toLowerCase()](d):m.element.dispatchEvent(d),m.element.context=f}listen(d,m){const h=this,f=d.split("."),_=f.slice(1).join("."),w=f[0];h.events[w]||(h.events[w]=[]);const S={type:w,handler:m,context:h.element,namespace:_};g.indexOf(w)>=0&&(h.inputEvents||(h.inputEvents=new b(h.element)),h.inputEvents[w](function(E){h.dispatchEvent(E)}),h.inputEvents.boundEventTypes.push(w),h.inputEvents.listen(w)),0===h.events[w].length&&(h.handlers[w]=h.dispatch.bind(h),"wheel"===w?h.element.addEventListener("wheel",h.handlers[w],!!h.isPassiveSupported&&{passive:!1}):h.element.addEventListener(w,h.handlers[w],("touchmove"===w||"touchstart"===w||"touchend"===w)&&!!h.isPassiveSupported&&{passive:!1})),h.events[w].push(S)}unlisten(d){const m=this,h=d.split("."),f=h.slice(1).join("."),_=h[0];let w=m.events[_];if(m.inputEvents&&m.inputEvents.boundEventTypes.indexOf(_)>=0&&(m.inputEvents.boundEventTypes.splice(m.inputEvents.boundEventTypes.indexOf(_),1),0===m.inputEvents.boundEventTypes.length&&m.inputEvents.unlisten(_)),w){for(let S=0;S<w.length;S++){if(""!==f){let E=w.findIndex($=>$.namespace===f);w.splice(E,1);break}w=[]}0===w.length&&(m.element.removeEventListener(_,m.handlers[_]),m.events[_]=[],delete m.handlers[_])}}getAttributeValue(d,m){const h=this,f=h.element.getAttribute(d);if(h.isNativeElement)return h.deserialize(f,m);const _=h.element.propertyByAttributeName[d];return void 0===_.deserialize?h.deserialize(f,m,_.nullable):h.element[_.deserialize](f)}setAttributeValue(d,m,h){const f=this;let _,w=!1;if(f.isNativeElement){if(_=f.serialize(m,h),"boolean"===h&&["checked","selected","async","autofocus","autoplay","controls","defer","disabled","hidden","ismap","loop","multiple","open","readonly","required","scoped"].indexOf(d)>=0)return void(m?f.element.setAttribute(d,""):f.element.removeAttribute(d))}else{const S=f.element.propertyByAttributeName[d];w=!S||S.nullable,_=S&&S.serialize?f.element[S.serialize](m):f.serialize(m,h,w)}"array"!==h&&"object"!==h||"[]"!==_&&"{}"!==_?void 0===_?(f.element.removeAttribute(d),f.element.shadowRoot&&f.element.$.root&&f.element.$.root.removeAttribute(d)):(f.element.setAttribute(d,_),f.element.shadowRoot&&f.element.$.root&&f.element.$.root.setAttribute(d,_)):f.element.removeAttribute(d)}serialize(d,m,h){if(void 0===m&&(m=D.Types.getType(d)),void 0!==d&&(h||null!==d)){if(h&&null===d)return"null";if("string"===m)return d;if("boolean"===m||"bool"===m){if(!0===d||"true"===d||1===d||"1"===d)return"";if(!1===d||"false"===d||0===d||"0"===d)return}return"array"===m?JSON.stringify(d):["string","number","int","integer","float","date","any","function"].indexOf(m)>=0?d.toString():"object"===m?JSON.stringify(d):void 0}}deserialize(d,m,h){const f="null"===d;if(void 0!==d&&(!f||h)){if(f&&h)return null;if("boolean"===m||"bool"===m)return null!==d;if("number"===m||"float"===m)return"NaN"===d?NaN:"Infinity"===d?1/0:"-Infinity"===d?-1/0:parseFloat(d);if("int"===m||"integer"===m)return"NaN"===d?NaN:"Infinity"===d?1/0:"-Infinity"===d?-1/0:parseInt(d);if("string"===m||"any"===m)return d;if("date"===m)return new Date(d);if("function"===m){if("function"==typeof window[d])return window[d]}else if("array"===m||"object"===m)try{const _=JSON.parse(d);if(_)return _}catch(_){if(window[d]&&"object"==typeof window[d])return window[d];if("array"===m&&d.indexOf("[")>=0){if(d.indexOf("{")>=0){let w=d.replace(/{/gi,"").replace("[","").replace("]","").replace(/'/gi,"").replace(/"/gi,"").trim();w=w.split("},");for(let S=0;S<w.length;S++){let E={},$=w[S].trim().split(",");for(let L=0;L<$.length;L++){const k=$[L].split(":")[0].trim(),F=$[L].split(":")[1].trim();E[k]=F}w[S]=E}return w}return d.replace("[","").replace("]","").replace(/'/gi,"").replace(/"/gi,"").trim().split(",")}}}}}class x{static get Ripple(){return o}static get Easings(){return r}}class D{static get Types(){return i}static get Core(){return l}static get Animation(){return x}static get Scroll(){return v}static get InputEvents(){return b}static Extend(d){return new y(d)}static Assign(d,m){if(d.indexOf(".")>=0){const h=d.split(".");return D[h[0]]||(D[h[0]]={}),void(D[h[0]][h[1]]=m)}D[d]=m}}const T=D.Extend(document);let M=null;document.addEventListener("click",()=>{c.start(),M&&clearTimeout(M),M=setTimeout(()=>{c.stop()},1e4)}),document.addEventListener("mouseenter",()=>{c.start()}),document.addEventListener("mouseleave",()=>{c.stop()});let A=(()=>{class C{}return C.cache={},C})();class B extends HTMLElement{static get properties(){return{animation:{value:"advanced",type:"string",allowedValues:["none","simple","advanced"]},unfocusable:{value:!1,type:"boolean"},disabled:{value:!1,type:"boolean"},dataContext:{value:null,reflectToAttribute:!1,type:"any"},debugMode:{value:!0,type:"boolean",reflectToAttribute:!1},locale:{value:"en",type:"string",reflectToAttribute:!1},localizeFormatFunction:{value:void 0,type:"function",reflectToAttribute:!1},messages:{value:{en:{propertyUnknownName:"Invalid property name: '{{name}}'!",propertyUnknownType:"'{{name}}' property is with undefined 'type' member!",propertyInvalidValue:"Invalid '{{name}}' property value! Actual value: '{{actualValue}}', Expected value: '{{value}}'!",propertyInvalidValueType:"Invalid '{{name}}' property value type! Actual type: '{{actualType}}', Expected type: '{{type}}'!",methodInvalidValueType:"Invalid '{{name}}' method argument value type! Actual type: '{{actualType}}', Expected type: '{{type}}' for argument with index: '{{argumentIndex}}'!",methodInvalidArgumentsCount:"Invalid '{{name}}' method arguments count! Actual arguments count: '{{actualArgumentsCount}}', Expected at least: '{{argumentsCount}}' argument(s)!",methodInvalidReturnType:"Invalid '{{name}}' method return type! Actual type: '{{actualType}}', Expected type: '{{type}}'!",elementNotInDOM:"Element does not exist in DOM! Please, add the element to the DOM, before invoking a method.",moduleUndefined:"Module is undefined.",missingReference:"{{elementType}}: Missing reference to '{{files}}'.",htmlTemplateNotSuported:"{{elementType}}: Web Browser doesn't support HTMLTemplate elements.",invalidTemplate:"{{elementType}}: '{{property}}' property accepts a string that must match the id of an HTMLTemplate element from the DOM."}},reflectToAttribute:!1,inherit:!0,type:"object"},props:{value:null,reflectToAttribute:!1,isHierarchicalProperty:!0,type:"any"},readonly:{value:!1,type:"boolean"},renderMode:{value:"auto",type:"string",reflectToAttribute:!1,allowedValues:["auto","manual"]},rightToLeft:{value:!1,type:"boolean"},rethrowError:{value:!0,type:"boolean",reflectToAttribute:!1},theme:{value:window[n].Theme,type:"string"},visibility:{value:"visible",allowedValues:["visible","collapsed","hidden"],type:"string"},wait:{value:!1,type:"boolean"}}}getBindings(d,m){const h=this;let f=0,_={},w=(S=>{if(S instanceof HTMLElement)return h.parseAttributes(S);{let E=h.parseProperty(S.data?S.data.trim():null,"textContent",S);if(E)return h&&S.parentNode===h.$.content&&(E.value=""!==h.$.html?h.$.html:void 0,h.innerHTML=""),{textContent:E}}})(d);w&&(_.data=w),m||(_.mapping=[],m=_),d.getAttribute&&(_.nodeId=d.getAttribute("smart-id"),m&&w&&(m.mapping[_.nodeId]=w)),_.node=d,d.firstChild&&(_.children={});for(let S=d.firstChild;S;S=S.nextSibling)_.children[f++]=h.getBindings(S,m);return _}_addRemovePropertyBinding(d,m,h,f,_){if(!d||!m||!h)return;const w=this,S=w.bindings,E=h.getAttribute("smart-id"),$=d.indexOf("{{")>=0;let L=!1;(d=d.replace("{{","").replace("}}","").replace("[[","").replace("]]","")).indexOf("!")>=0&&(d=d.replace("!",""),L=!0);const k=w._properties[d],F={name:d,reflectToAttribute:k.reflectToAttribute,twoWay:$,type:k.type,not:L};if(_&&!f){const z={};z[d]={name:d,targetPropertyName:m,reflectToAttribute:k.reflectToAttribute,twoWay:$,type:k.type,not:L},S.mapping[E]=z}const R=function(z){for(let G in z){const j=z[G];if(j.nodeId===E){j.data||(j.data={}),f?(j.data[m]=null,delete j.data[m]):j.data[m]=F;break}if(j.children)R(j.children);else if(j.node&&j.node.children&&j.node===h.parentElement){const X=j.node;if(!X.firstChild)continue;j.children={};let ee=0;for(let ne=X.firstChild;ne;ne=ne.nextSibling)j.children[ee++]=w.getBindings(ne);R(j.children)}}};R(S.children),f?delete w.boundProperties[d]:w.boundProperties[d]=!0,w.updateBoundNodes(d)}addPropertyBinding(d,m,h,f){this._addRemovePropertyBinding(d,m,h,!1,f)}removePropertyBinding(d,m,h,f){this._addRemovePropertyBinding(d,m,h,!0,f)}parseAttributes(d){const m=this;let h;for(let f=0;f<d.attributes.length;f++){const _=d.attributes[f],w=_.name,S=_.value;A.cache["toCamelCase"+w]||(A.cache["toCamelCase"+w]=D.Core.toCamelCase(w));const E=A.cache["toCamelCase"+w];if(w.indexOf("(")>=0){let L=w.substring(1,w.length-1);if(m&&!m.dataContext){m.templateListeners[d.getAttribute("smart-id")+"."+L]=S,d.removeAttribute(w);continue}{h||(h={});const k=S.substring(0,S.indexOf("("));h[E]={isEvent:!0,name:L,value:k};continue}}let $=m.parseProperty(S,w,d);$&&(h||(h={}),h[E]=$)}return h}parseProperty(d,m){if(!d||!d.length)return;const h=this;let f,_=d.length,w=0,S=0,E=0,$=!0;for(;S<_;){w=d.indexOf("{{",S);let F=d.indexOf("[[",S),R="}}";if(F>=0&&(w<0||F<w)&&(w=F,$=!1,R="]]"),E=w<0?-1:d.indexOf(R,w+2),E<0)return;f=f||{};let z=d.slice(w+2,E).trim();f.name=z,S=E+2}const L=f.name,k=h?h._properties[L]:null;return f.twoWay=$,f.ready=!1,h&&(L.indexOf("::")>=0?h.boundProperties[L.substring(0,L.indexOf("::"))]=!0:h.boundProperties[L]=!0),k?(f.type=k.type,f.reflectToAttribute=k.reflectToAttribute):(f.type=["checked","selected","async","autofocus","autoplay","controls","defer","disabled","hidden","ismap","loop","multiple","open","readonly","required","scoped"].indexOf(m)>=0?"boolean":"string",f.reflectToAttribute=!0),f}updateTextNodes(){const d=this;d.updateTextNode(d.shadowRoot||d,d.bindings,d)}updateTextNode(d,m,h){const f=this;if(!m)return;let _=0;for(let w=d.firstChild;w&&m.children;w=w.nextSibling)f.updateTextNode(w,m.children[_++],h);if(m&&m.data)for(let w in m.data){const S=m.data[w],E=S.name;"textContent"===w&&S.twoWay&&!S.updating&&void 0!==S.value&&(h[E]=S.value)}}updateBoundProperty(d,m){m.updating||(m.updating=!0,this[d]=m.value,m.updating=!1)}updateBoundNodes(d){const m=this;if(m.updateBoundNode(m.shadowRoot||m,m.bindings,m,d),m.detachedChildren.length>0)for(let h=0;h<m.detachedChildren.length;h++){const f=m.detachedChildren[h],_=f.getAttribute("smart-id"),w=function(E){if(E.nodeId===_)return E;for(let $ in E.children){const L=E.children[$];if((L.getAttribute?L.getAttribute("smart-id"):"")===_)return E;if(L.children){const k=w(L);if(k)return k}}return null},S=w(m.bindings);if(S)m.updateBoundNode(f,S,m,d,!0);else if(f.getAttribute&&m.bindings.mapping){const E=m,$=m.bindings;if($)for(let L in $.mapping){const k=E.querySelector('[smart-id="'+L+'"]');k&&m.updateBoundData(k,$.mapping[L],E,d)}}}}updateBoundMappedNodes(){const d=this,m=d.bindings,h=d;if(m.mapping)for(let f in m.mapping){let _=h.querySelector('[smart-id="'+f+'"]');if(h.shadowRoot&&(_=h.querySelector('[id="'+f+'"]'),_||(_=h.shadowRoot.querySelector('[id="'+f+'"]')||h.shadowRoot.querySelector('[smart-id="'+f+'"]'))),_)d.updateBoundData(_,m.mapping[f],h);else if(h.getAttribute("aria-controls")){let w=document.getElementById(h.getAttribute("aria-controls"));!w&&h.shadowRoot&&(w=h.shadowRoot.getElementById(h.getAttribute("aria-controls"))),_=w.querySelector('[smart-id="'+f+'"]'),_&&d.updateBoundData(_,m.mapping[f],h)}}}updateBoundNode(d,m,h,f,_){const w=this;if(!m)return;let S=0;if(_){if(_&&!m.data)for(let $=d.firstChild;$&&m.children;$=$.nextSibling)if($.getAttribute){const L=$.getAttribute("smart-id"),k=function(){for(let F in m.children)if(m.children[F].nodeId===L)return m.children[F]}();w.updateBoundNode($,k,h,f),S++}else w.updateBoundNode($,m.children[S++],h,f,_)}else for(let $=d.firstChild;$&&m.children;$=$.nextSibling)if($.getAttribute){const L=$.getAttribute("smart-id"),k=function(){for(let F in m.children)if(m.children[F].nodeId===L)return m.children[F]}();w.updateBoundNode($,k,h,f),S++}else w.updateBoundNode($,m.children[S++],h,f);m&&m.data&&w.updateBoundData(d,m.data,h,f)}updateBoundData(d,m,h,f){const _=this;for(let w in m){const S=m[w];let E=S.name;if(!S.updating&&(E.indexOf("::")>=0&&(E=E.substring(0,E.indexOf("::"))),void 0===f||f===E)){if(E.indexOf("(")>=0){let $=E.substring(E.indexOf("("));const L=E.substring(0,E.indexOf("("));if($=$.substring(1,$.length-1),$=$.replace(/ /gi,""),$=$.split(","),$.length>0&&""!==$[0]){let k=[];for(let F=0;F<$.length;F++)k.push(h[$[F]]);S.value=h[L].apply(h,k)}else S.value=h[L]();S.type=typeof S.value}else S.value=h[E];if("innerHTML"===E){if(d[w].toString().trim()!==h[E].toString().trim()){if(window.smartBlazor&&d[w].indexOf("\x3c!--")>=0){(S.ready||h._properties[E].defaultValue!==S.value)&&(d[w]=S.value.toString());continue}(S.ready||h._properties[E].defaultValue!==S.value)&&(d[w]=S.value.toString().trim())}}else S.not?(d[w]=!S.value,S.targetPropertyName&&(d[S.targetPropertyName]=!S.value)):(d[w]=S.value,S.targetPropertyName&&(d[S.targetPropertyName]=S.value));if(d.$&&d.$.isNativeElement){A.cache["toDash"+w]||(A.cache["toDash"+w]=D.Core.toDash(w));const $=A.cache["toDash"+w],L=d.$.getAttributeValue($,S.type);!S.reflectToAttribute||L===S.value&&S.ready||d.$.setAttributeValue($,S.value,S.type),S.reflectToAttribute||d.$.setAttributeValue($,null,S.type)}if(!S.ready){if(d.$&&d.$.isCustomElement){A.cache["toDash"+w]||(A.cache["toDash"+w]=D.Core.toDash(w));const $=A.cache["toDash"+w];d._properties||(d._beforeCreatedProperties=d._properties=d.propertyByAttributeName=[]),d._properties[w]||(d._properties[w]={attributeName:$},d._beforeCreatedProperties&&(d._beforeCreatedProperties[w]=d._properties[w]),d.propertyByAttributeName[$]=d._properties[w]);const L=d._properties[w];L.isUpdating=!0,S.reflectToAttribute&&d.$.setAttributeValue(L.attributeName,S.not?!S.value:S.value,S.type),S.reflectToAttribute||d.$.setAttributeValue(L.attributeName,null,S.type),L.isUpdating=!1}if(S.twoWay){const $=function(L){if(S.value=L,d.$&&d.$.isNativeElement){A.cache["toDash"+w]||(A.cache["toDash"+w]=D.Core.toDash(w));const k=A.cache["toDash"+w],F=d.$.getAttributeValue(k,S.type);S.reflectToAttribute&&F!==S.value&&d.$.setAttributeValue(k,S.value,S.type),S.reflectToAttribute||d.$.setAttributeValue(k,null,S.type)}};if(S.name.indexOf("::")>=0){const L=S.name.indexOf("::"),k=S.name.substring(L+2);_["$"+d.getAttribute("smart-id")].listen(k,function(){$(d[w]);const F=S.name.substring(0,S.name.indexOf("::"));_.updateBoundProperty(F,S)})}if(d.$&&d.$.isCustomElement){d._properties[w]&&(d._properties[w].notify=!0),A.cache["toDash"+w]||(A.cache["toDash"+w]=D.Core.toDash(w));const L=A.cache["toDash"+w];_["$"+d.getAttribute("smart-id")].listen(L+"-changed",function(k){$(k.detail.value);const R=_.context;k.context!==document&&(_.context=_),_.updateBoundProperty(S.name,S),_.context=R})}}}S.ready=!0}}}static clearCache(){this.cache={}}addMessages(d,m){Object.assign(this.messages[d],m)}localize(d,m){const h=this;if(!h.messages||!h.messages[h.locale])return;let f=h.messages[h.locale][d];if(""===f)return"";if(!f){const w=h.messages.en;if(w)return w[d]||d}const _=f;for(let w in m){let S=m[w];f=f.replace(new RegExp("{{"+w+"}}","g"),S)}return h.localizeFormatFunction&&h.localizeFormatFunction(_,f,m),f}static get requires(){return{}}static get listeners(){return{"theme-changed":function(d){this.theme=d.detail.newValue}}}static get methods(){return{}}get classNamesMap(){return{animation:"smart-animate",rippleAnimation:"smart-ripple"}}get hasAnimation(){return"none"!==this.animation}get hasRippleAnimation(){return"none"!==this.animation&&"advanced"===this.animation}static get modules(){return window[n].Modules}get properties(){const d=this;return d._properties||(d._properties=[]),d._properties}get parents(){const d=this;let m=[],h=d.parentNode;for(;h&&9!==h.nodeType;)h instanceof HTMLElement==1&&m.push(h),h=h.parentNode;const f=d.getRootNode();return f.host&&(m=m.concat((w=>{let S=[w],E=w.parentNode;for(;E&&9!==E.nodeType;)E instanceof HTMLElement==1&&S.push(E),E=E.parentNode;return S})(f.host))),window[n].EnableShadowDOM&&d.isInShadowDOM&&d.shadowParent&&(m=m.concat(d.shadowParent.parents)),m}log(d){this._logger("log",d)}warn(d){this._logger("warn",d)}error(d){this._logger("error",d)}_logger(d,m){if(this.debugMode){const h=m instanceof Error?m.message:m.toString();console[d](h)}if(this.rethrowError&&"error"===d)throw m}get focused(){return this.contains(document.activeElement)}template(){return"<div></div>"}registered(){this.onRegistered&&this.onRegistered()}created(){const d=this;d.isReady=!1,d._initElement(d),d._setModuleState("created"),d.onCreated&&d.onCreated()}completed(){const d=this;d.isCompleted=!0,d._onCompleted&&d._onCompleted(),d.onCompleted&&d.onCompleted()}whenReady(d){const m=this;m.isCompleted?d():(m.whenReadyCallbacks||(m.whenReadyCallbacks=[]),m.whenReadyCallbacks.push(d))}whenRendered(d){const m=this;m.isRendered?d():(m.whenRenderedCallbacks||(m.whenRenderedCallbacks=[]),m.whenRenderedCallbacks.push(d))}addThemeClass(){const d=this;""!==d.theme&&d.classList.add("smart-"+d.theme)}addDefaultClass(){const d=this;d.classList.add(n.toLowerCase()+"-element"),d.classList.add(d.nodeName.toLowerCase())}_renderShadowRoot(){const d=this;if(d.shadowRoot){d.$.root.classList.add(d.nodeName.toLowerCase());for(let m=0;m<d.attributes.length;m++){const h=d.attributes[m];"class"===h.name||"id"===h.name||"style"===h.name||"tabindex"===h.name||h.name.indexOf("aria")>=0||d.$.root.setAttribute(h.name,h.value)}for(let m=0;m<d.classList.length;m++){const h=d.classList[m];"smart-element-init"!==h&&"smart-element"!==h&&"smart-hidden"!==h&&"smart-visibility-hidden"!==h&&d.$.root.classList.add(h)}}}render(){const d=this;if(!d.isRendered&&(d.isRendered=!0,d.isRendering=!1,d.context=document,d._renderShadowRoot(),d.whenRenderedCallbacks)){for(let m=0;m<d.whenRenderedCallbacks.length;m++)d.whenRenderedCallbacks[m]();d.whenRenderedCallbacks=[]}d.onRender&&d.onRender(),d.disabled&&d.setAttribute("aria-disabled",!0),d.readonly&&-1!==["checkbox","combobox","grid","gridcell","listbox","radiogroup","slider","spinbutton","textbox"].indexOf(d.getAttribute("role"))&&d.setAttribute("aria-readonly",!0)}ready(){const d=this;if(d._setId(),d.addThemeClass(),d.addDefaultClass(),"collapsed"===d.visibility?d.classList.add("smart-hidden"):"hidden"===d.visibility&&d.classList.add("smart-visibility-hidden"),d.dataContext&&d.applyDataContext(),d.onReady&&d.onReady(),d.shadowRoot&&Smart(d._selector)){if(Smart(d._selector).styleUrls){const m=Smart(d._selector).styleUrls;for(let h=0;h<m.length;h++)d.importStyle(m[h])}if(Smart(d._selector).styles){const m=document.createElement("style");m.innerHTML=Smart(d._selector).styles,d.shadowRoot.insertBefore(m,d.shadowRoot.firstChild)}}Smart(d._selector)&&Smart(d._selector).ready&&Smart(d._selector).ready()}_setId(){const d=this;if(!d.id){const m=d.elementName;d.id=m.slice(0,1).toLowerCase()+m.slice(1)+Math.floor(65536*(1+Math.random())).toString(16).substring(1)}}checkLicense(){"Evaluation"===window[n].License&&-1===window.location.hostname.indexOf("htmlelements")&&(this.logWatermark(),this.logLicense(),window[n].License="")}logWatermark(){const d=document.createElement("a");d.href="https://www.htmlelements.com/",d.innerHTML="https://www.htmlelements.com/",d.style.position="absolute",d.style.right="5px",d.style.bottom="5px",d.style.color="#fff",d.style.padding="20px",d.style.borderRadius="5px",d.style.background="#0C3D78",d.style.cursor="pointer",d.style.zIndex="999999",d.style.display="block",d.style.fontSize="24px",d.style.textDecoration="none",d.style.fontWeight="bold",d.style.opacity=0,d.style.transition="opacity .35s ease-in-out",d.id="watermark",document.getElementById("watermark")||setTimeout(()=>{document.getElementById("watermark")||(document.body.appendChild(d),setTimeout(()=>{d.style.opacity=1}),setTimeout(()=>{d.style.opacity=0,setTimeout(()=>{d.parentNode.removeChild(d)},350)},6e3))},1e3)}logLicense(){console.log("****************************************************************************************************************"),console.log("****************************************************************************************************************"),console.log("****************************************************************************************************************"),console.log("*jQWidgets License Key Not Found."),console.log("*This is an EVALUATION only Version, it is NOT Licensed for software projects intended for PRODUCTION."),console.log("*if you want to hide this message, please send an email to: sales@jqwidgets.com for a license."),console.log("****************************************************************************************************************"),console.log("****************************************************************************************************************"),console.log("****************************************************************************************************************")}get _selector(){const d=this;return d.id?"#"+d.id:d.classList.length>0?"."+d.classList[0]:""}applyDataContext(d){const m=this;let h="string"==typeof m.dataContext?window[m.dataContext]||document[m.dataContext]:m.dataContext;if(d&&(h=d,m.dataContext=d),h){if(!h._uid){h._uid=(Date.now().toString(36)+Math.random().toString(36).substr(2,5)).toUpperCase(),h._properties=[];for(let f in h){const _=h[f];"function"!=typeof _&&"_properties"!==f&&"_uid"!==f&&(h._properties[f]=_,Object.defineProperty(h,f,{configurable:!1,enumerable:!0,get:()=>h._properties[f],set(w){const S=h._properties[f];h._properties[f]=w;let E=[];E[f]={oldValue:S,value:w},E.length++,m.updatingDataContext=!0,T.fireEvent("dataContextPropertyChanged",{dataContext:h,properties:E},{bubbles:!1,cancelable:!0}),m.updatingDataContext=!1}}))}}if(m.dataContextProperties=m.parseAttributes(m),m.dataContextPropertiesMap={},m.dataContextListeners={},m.dataContextProperties){m.updatingDataContext=!0;for(let f in m.dataContextProperties){const _=m.dataContextProperties[f],w=_.name;if(_.propertyName=f,m.dataContextPropertiesMap[w]=f,A.cache["toDash"+f]||(A.cache["toDash"+f]=D.Core.toDash(w)),_.isEvent){const S=_.value;m.dataContextListeners[w]&&m.removeEventListener(w,m.dataContextListeners[w]),m.dataContextListeners[w]=function(E){h[S](E)},m.addEventListener(w,m.dataContextListeners[w])}if(w.indexOf(".")>=0){const S=w.split(".");let E=h[S[0]];for(let $=1;$<S.length;$++)E=E[S[$]];void 0!==E&&(m[f]=E)}else m[f]=h[w]}m.dataContextPropertyChangedHandler=function(f){const _=f.detail.properties;if(f.detail.dataContext===("string"==typeof m.dataContext?window[m.dataContext]||document[m.dataContext]:m.dataContext))for(let w in _){const S=m.dataContextPropertiesMap[w],E=m.context;S&&(m.context=document,m[S]=_[w].value,m.context=E)}},T.listen("dataContextPropertyChanged",m.dataContextPropertyChangedHandler),m.updatingDataContext=!1}else m.dataContextProperties=null}else{m.dataContextProperties=null;const f=function(){("string"==typeof m.dataContext?window[m.dataContext]||document[m.dataContext]:m.dataContext)&&(m.applyDataContext(),window.removeEventListener("load",f))};window.addEventListener("load",f)}}updateDataContextProperty(d){const m=this,h="string"==typeof m.dataContext?window[m.dataContext]||document[m.dataContext]:m.dataContext,f=m.dataContextProperties[d];if(!m.updatingDataContext&&f.twoWay){const _=f.name;if(_.indexOf(".")>=0){const w=_.split(".");let S=h[w[0]];for(let E=1;E<w.length;E++)S=S[w[E]];void 0!==S&&(S=m[d],u[h._uid]&&(u[h._uid][d]=S))}else h[_]=m[d],u[h._uid]&&(u[h._uid][d]=h[_])}}static get version(){return window[n].Version}initProperties(){const d=this;if(Smart(d._selector)&&Smart(d._selector).properties&&(d._initProperties=Smart(d._selector).properties),d.hasAttribute("props")&&!d.props?d._initProperties=window[d.getAttribute("props")]:d.props&&(d._initProperties=d.props),d._initProperties){const m=Object.keys(d._initProperties);for(let h=0;h<m.length;h++){const f=m[h],_=d._initProperties[f];if(_.constructor===Smart.ObservableArray||_ instanceof Smart.ObservableArray)d[f]=_.toArray();else if(_.constructor===Smart.DataAdapter||"smartDataAdapter"===_.constructor.name||"object"==typeof _&&Smart.DataAdapter&&_ instanceof Smart.DataAdapter||_ instanceof Smart.Observable||_.constructor===Smart.Observable||"object"!=typeof _||D.Types.isArray(_)||_ instanceof Date){if(void 0===d[f]&&-1===["onReady","onAttached","onDetached","onCreated","onCompleted"].indexOf(f)){const w=d.localize("propertyUnknownName",{name:f});d.log(w)}d[f]=_}else if("messages"!==f&&"dataSourceMap"!==f){if("object"==typeof _){const w=function(S,E){const $=Object.keys(S);for(let L=0;L<$.length;L++){const k=$[L],F=S[k],R=d._properties[E+"_"+k];if(R&&null===R.value){if(void 0===d[E+"_"+k]){const z=d.localize("propertyUnknownName",{name:E+"_"+k});d.log(z)}d[E+"_"+k]=F}else if("object"==typeof F&&!D.Types.isArray(F)&&F&&F.constructor!==Date)w(F,E+"_"+k);else{if(void 0===d[E+"_"+k]){const z=d.localize("propertyUnknownName",{name:E+"_"+k});d.log(z)}d[E+"_"+k]=F}}};w(_,f)}}else d[f]=_}}}setup(){const d=this;if(d.context=this,d.isReady&&!d.isCompleted)return;if(d.isReady)return d._setModuleState("attached"),d.isAttached=!0,d.attached(),d._handleListeners("listen"),void(d.context=document);d.ownerElement&&d.ownerElement.detachedChildren.indexOf(d)>=0&&d.ownerElement.detachedChildren.splice(d.ownerElement.detachedChildren.indexOf(d),1),d.isReady=!0,d.methods=d.getStaticMember("methods"),d.initProperties(),l.isMobile&&d.classList.add("smart-mobile");for(let f=0;f<d.attributes.length;f+=1){const _=d.propertyByAttributeName[d.attributes[f].name];if(!_)continue;let w=d.$.getAttributeValue(_.attributeName,_.type);const S=w?w.toString():"";if(!(S.indexOf("{{")>=0||S.indexOf("[[")>=0||"object"!==_.type&&"array"!==_.type&&(d.attributes[f].value.indexOf("{{")>=0||d.attributes[f].value.indexOf("[[")>=0)||void 0===w||_.value===w)){const E=D.Types.getType(w),$=d.attributes[f].value;if(("any"===_.type||"object"===_.type)&&""+d[_.name]===w||"array"===_.type&&d[_.name]&&JSON.stringify(d[_.name])===w)continue;if("number"===E&&isNaN(w)&&"NaN"!==$&&"Infinity"!==$&&"-Infinity"!==$){const L=d.localize("propertyInvalidValueType",{name:_.name,actualType:"string",type:_.type});d.log(L)}_.isUpdatingFromAttribute=!0,d[_.name]=w,_.isUpdatingFromAttribute=!1}}for(let f in d._properties){const _=d._properties[f];if("innerHTML"===f&&_.value===_.defaultValue&&(_.value=_.defaultValue=D.Core.html(d)),"boolean"!==_.type&&"bool"!==_.type||"false"===d.getAttribute(_.attributeName)&&(_.isUpdating=!0,d.setAttribute(_.attributeName,""),_.isUpdating=!1),_.defaultReflectToAttribute&&_.reflectToAttribute){if(_.defaultReflectToAttribute&&_.defaultReflectToAttributeConditions){let w=!0;for(let S=0;S<_.defaultReflectToAttributeConditions.length;S++){const E=_.defaultReflectToAttributeConditions[S];let $,L;for(let k in E)$=k,L=E[k];d._properties[$]&&d._properties[$].value!==L&&(w=!1)}if(!w)continue}_.isUpdating=!0,d.$.setAttributeValue(_.attributeName,_.value,_.type),_.isUpdating=!1}}const m=[];if(d.children.length>0)for(let f=0;f<d.children.length;f++){const _=d.children[f];D.Extend(_).isCustomElement&&m.push(_)}d.applyTemplate(),d.complete=function(){if(!d.templateBindingsReady){const _=w=>{w.templateBindingsReady||(w.templateBindingsReady=!0,w.updateTextNodes(),w.updateBoundNodes())};if(d.ownerElement){let w=d.ownerElement,S=[];for(;w;)S.push(w),w=w.ownerElement;for(let E=S.length-1;E>=0;E--)_(S[E]);_(d)}else _(d)}const f=()=>{if(d._setModuleState("ready"),d.ready(),"auto"!==d.renderMode||d.isRendered||d.render(),d.isAttached=!0,d._setModuleState("attached"),d.attached(),d._handleListeners("listen"),d.isHidden||0!==d.offsetWidth&&0!==d.offsetHeight||(d.isHidden=!0),d.completed(),d.isRendered&&(d.context=document),d.whenReadyCallbacks){for(let _=0;_<d.whenReadyCallbacks.length;_++)d.whenReadyCallbacks[_]();d.whenReadyCallbacks=[]}};if(d.wait)d.classList.add("smart-visibility-hidden");else if(d.classList.contains("smart-async"))requestAnimationFrame(()=>{f()});else{const _=d.shadowParent;d.shadowParent=null;const w=d.parents;if(d.shadowParent=_,0===w.length)return;const S=()=>{let E=d.ownerElement,$=[];for(;E;)$.push(E),E=E.ownerElement;for(let L=$.length-1;L>=0;L--)$[L].updateBoundMappedNodes()};d.ownerElement&&"HTML"!==w[w.length-1].nodeName?d.getRootNode().host?f():d.ownerElement&&"HTML"===d.ownerElement.parents[d.ownerElement.parents.length-1].nodeName?(S(),f()):d.checkIsInDomInterval=setInterval(()=>{const E=d.parents;"HTML"===E[E.length-1].nodeName&&(clearInterval(d.checkIsInDomInterval),S(),f())},100):f()}};let h=[].slice.call(d.querySelectorAll("[smart-id]")).concat(m);if(window[n].EnableShadowDOM&&!0!==d.isInShadowDOM&&(h=[].slice.call(d.shadowRoot.querySelectorAll("[smart-id]")).concat(m)),0===h.length)d.complete();else{d._completeListeners=0;for(let f=0;f<h.length;f++){const _=h[f];if(D.Extend(_).isCustomElement){const w=function(){d._completeListeners--,0===d._completeListeners&&(d.complete(),delete d._completeListeners)}.bind(d);_.isCompleted||_.isUtilityElement||!0===_.wait||(d._completeListeners++,_._onCompleted||(_.completeHandlers=[],_._onCompleted=function(){for(let S=0;S<_.completeHandlers.length;S++)_.completeHandlers[S]()}),_.completeHandlers.push(w))}}0===d._completeListeners&&d.complete()}}visibilityChangedHandler(){const d=this;d.isReady&&requestAnimationFrame(()=>{0===d.offsetWidth||0===d.offsetHeight?d.isHidden=!0:(d.isHidden=!1,d.$.fireEvent("resize",d,{bubbles:!1,cancelable:!0}))})}attributeChangedCallback(d,m,h){const f=this,_=f.propertyByAttributeName[d];if("class"!==d&&"style"!==d||f.visibilityChangedHandler(),_||f.attributeChanged(d,m,h),f.onAttributeChanged&&f.onAttributeChanged(d,m,h),!_||_&&_.isUpdating)return;let w=f.$.getAttributeValue(_.attributeName,_.type);void 0!==h&&f[_.name]!==w&&(_.isUpdatingFromAttribute=!0,f[_.name]=void 0!==w?w:f._properties[_.name].defaultValue,_.isUpdatingFromAttribute=!1)}attributeChanged(d,m,h){}set hasStyleObserver(d){const m=this;void 0===m._hasStyleObserver&&(m._hasStyleObserver=d),d?c.watch(m):c.unwatch(m)}get hasStyleObserver(){return void 0===this._hasStyleObserver||this._hasStyleObserver}attached(){const d=this;d.hasStyleObserver&&c.watch(d),d.onAttached&&d.onAttached(),Smart(d._selector)&&Smart(d._selector).attached&&Smart(d._selector).attached()}detached(){const d=this;d.hasStyleObserver&&c.unwatch(d),d._setModuleState("detached"),d.isAttached=!1,d.ownerElement&&-1===d.ownerElement.detachedChildren.indexOf(d)&&d.ownerElement.detachedChildren.push(d),d._handleListeners("unlisten"),d.onDetached&&d.onDetached(),Smart(d._selector)&&Smart(d._selector).detached&&Smart(d._selector).detached(),p&&p[d._selector]&&delete p[d._selector]}propertyChangedHandler(d,m,h){const f=this;m!==h&&("theme"===d&&(""!==m&&f.classList.remove("smart-"+m),""!==h&&f.classList.add("smart-"+h)),"visibility"===d?("collapsed"===m?f.classList.remove("smart-hidden"):"hidden"===m&&f.classList.remove("smart-visibility-hidden"),"collapsed"===h?f.classList.add("smart-hidden"):"hidden"===h&&f.classList.add("smart-visibility-hidden")):("disabled"===d||"readonly"===d)&&f._ariaPropertyChangedHandler(d,h),f.propertyChanged&&f.propertyChanged(d,m,h))}_ariaPropertyChangedHandler(d,m){const h=this;"readonly"===d&&-1===["checkbox","combobox","grid","gridcell","listbox","radiogroup","slider","spinbutton","textbox"].indexOf(h.getAttribute("role"))||(m?h.setAttribute("aria-"+d,!0):h.removeAttribute("aria-"+d))}_handleListeners(d){const m=this,h=m.tagName.toLowerCase(),f=_=>{for(let w in _){const S=w.split(".");let E=S[0],$=m.$;if(S[1])if(E=S[1],$=m["$"+S[0]],"document"===S[0]){let F=m.smartId;""===F&&(F=D.Core.toCamelCase(h)),E=E+"."+F}else m.smartId&&(E=E+"."+m.smartId+"_"+m.parents.length);else m.smartId&&(E=E+"."+m.smartId);const L=_[w],k=function(F){const R=m.context;m.context=m,m[L]&&m[L].apply(m,[F]),m.context=R};$&&$[d](E,k)}};f(m.getStaticMember("listeners")),f(m.templateListeners),Smart(m._selector)&&Smart(m._selector).properties&&f(Smart(m._selector).listeners)}parseTemplate(){const d=this,m=d.template(),h=document.createDocumentFragment();if(t[d.nodeName]&&!a)return t[d.nodeName].cloneNode(!0);if(""===m)return null;let f=document.createElement("div");h.appendChild(f),f.innerHTML=m;let _=f.childNodes;f.parentNode.removeChild(f);for(let w=0;w<_.length;w++)h.appendChild(_[w]);return t[d.nodeName]=h,a?h:h.cloneNode(!0)}applyTemplate(){const d=this,m=d.parseTemplate();if(!m||!m.hasChildNodes)return;const h=m.childNodes[0],f=(S,E)=>{d["$"+S]=E.$=D.Extend(E),d.$[S]=E,E.ownerElement=d};let _=h;if(h.getElementsByTagName("content").length>0){let S=h.getElementsByTagName("content")[0];_=S.parentNode,_.removeChild(S)}else{const S=m.querySelectorAll("[inner-h-t-m-l]");S&&S.length>0&&(_=S[0])}d.$.template="template"===h.nodeName.toLowerCase()?h:h.querySelector("template");let w=m.querySelectorAll("[id]");0===w.length&&(w=m.querySelectorAll("*")),f("root",h),f("content",_),d.$.html=d.innerHTML.toString().trim();for(let S=0;S<w.length;S+=1){let E=w[S];""===E.id&&(E.id="child"+S),f(E.id,E),E.setAttribute("smart-id",E.id),d.shadowRoot?E.shadowParent=d:E.removeAttribute("id")}for(d.bindings=!1!==d.hasTemplateBindings?d.getBindings(m):[],d.$root.addClass("smart-container");d.childNodes.length;)_.appendChild(d.firstChild);if(d.appendTemplate(m),d.$.template){const S=document.createElement("div");S.classList.add("smart-template-container"),d.$.templateContainer=S,d.$.template.parentNode.insertBefore(S,d.$.template),d.refreshTemplate()}}refreshTemplate(){const d=this;if(!d.$.templateContainer)return;d.templateDetached(d.$.templateContainer);const m=d.$.template.content.cloneNode(!0);d.templateBindings=d.getBindings(m),d.templateProperties=[];let h=document.createDocumentFragment();const f=function(_,w,S){for(let E in _){const $=_[E],L=$.node.cloneNode();w.appendChild(L);let k=[],F=!1;if($.data)for(let R in $.data){const z=$.data[R],G=z.name;if(d.templateProperties[G]=!0,L.removeAttribute(D.Core.toDash(R)),"*items"===R)k=d[G],F=!0;else if(G.indexOf("item.")>=0&&void 0!==S)z.value=S[G.substring("item.".length)],L[R]=z.value;else if(G.indexOf("item")>=0&&void 0!==S)z.value=S,L[R]=z.value;else if("*if"===R)if(G.indexOf("(")>=0){let j,X=G.substring(G.indexOf("("));const ee=G.substring(0,G.indexOf("("));if(X=X.substring(1,X.length-1),X=X.replace(/ /gi,""),X=X.split(","),X.length>0&&""!==X[0]){let ne=[];for(let q=0;q<X.length;q++)ne.push(d[X[q]]);j=d[ee].apply(d,ne)}else j=d[ee]();!1===j&&w.removeChild(L)}else d[G]||w.removeChild(L);else d.updateBoundNode(L,$,d,G)}if(k.length>0||F){for(let R=0;R<k.length;R++)$.children&&f($.children,L,k[R]);if("number"==typeof k)for(let R=0;R<k;R++)$.children&&f($.children,L,R)}else $.children&&f($.children,L,S)}};f(d.templateBindings.children,h),d.$.templateContainer.innerHTML="",d.$.templateContainer.appendChild(h),d.templateAttached(d.$.templateContainer)}templateAttached(){}templateDetached(){}appendTemplate(d){this.appendChild(d)}defineElementModules(){const d=this,m=d.constructor.prototype;if("BaseElement"===m.elementName){m.modules=d.constructor.modules;const h=m.modules;for(let f=0;f<h.length;f+=1)d.addModule(h[f])}else{const h=m.modules;if(!h)return;for(let f=0;f<h.length;f+=1){const _=h[f],w=_.prototype;d.defineElementMethods(w.methodNames,w),d.defineElementProperties(_.properties)}}}watch(d,m){this._watch=null!==d&&null!==m?{properties:d,propertyChangedCallback:m}:null}unwatch(){this._watch=null}set(d,m,h){const f=this,_=f.context;f.context=!0===h?document:f,f[d]=m,f.context=_}get(d){return this[d]}_setModuleState(d,m){const h=this,f="is"+d.substring(0,1).toUpperCase()+d.substring(1),_="on"+d.substring(0,1).toUpperCase()+d.substring(1);for(let w=0;w<h.modulesList.length;w++){const S=h.modulesList[w];S[f]=!0,S[d]&&S[d](m),S[_]&&S[_](m)}}addModule(d,m){const h=this;if(!d)return;const f=h.modules.slice(0),_=d.prototype,w=Object.getPrototypeOf(d);if(w.name&&w.name!==d.name&&h.addModule(w),!d.moduleName&&d.name&&(d.moduleName=d.name),-1===f.findIndex(S=>d.moduleName===S.moduleName)&&f.push(d),h.defineModule(d),h.defineElementMethods(_.methodNames,_),h.defineElementProperties(d.properties),h.constructor.prototype.modules=f,m)for(let S in Smart.Elements.tagNames){const E=Smart.Elements.tagNames[S];let $=Object.getPrototypeOf(E),L=[];for(;$!==HTMLElement;)L.push($.prototype),$=Object.getPrototypeOf($);L.indexOf(h)>=0&&E!==h&&E.prototype.addModule(d)}}defineModule(d){if(d.isDefined)return;d.prototype._initModule=function(_){this.ownerElement=_};const m=d.properties||{},h=Object.keys(m),f=Object.getOwnPropertyNames(d.prototype);d.prototype.methodNames=f;for(let _=0;_<h.length;_+=1){const w=h[_],S=m[w];Object.defineProperty(d.prototype,w,{configurable:!1,enumerable:!0,get(){return this.ownerElement?this.ownerElement[w]:S.value},set(E){this.ownerElement[w]=E}})}d.isDefined=!0}getStaticMember(d,m){const h=window[n][this.elementName],f=h[d];m||(m="");let _="array"===m?[]:"string"===m?"":{},w=Object.getPrototypeOf(h),S=[];for(;w[d];)S.push(w[d]),w=Object.getPrototypeOf(w);for(let E=S.length-1;E>=0;E--)if("array"===m)for(let $=0;$<S[E].length;$++)-1===_.indexOf(S[E][$])&&_.push(S[E][$]);else"string"===m?-1===_.indexOf(S[E])&&(_+=S[E]):_=D.Core.assign(_,S[E]);if("array"===m){for(let E=0;E<f.length;E++)-1===_.indexOf(f[E])&&_.push(f[E]);return _}return"string"===m?(-1===_.indexOf(f)&&(_+=f),_):D.Core.assign(_,f)}defineElementHierarchicalProperties(d,m){const f=[];(function(_){const w=Object.keys(_);for(let S=0;S<w.length;S++){const E=w[S];if("messages"===E)continue;const $=_[E],L=Object.keys($),k=L.indexOf("value")>=0&&L.indexOf("type")>=0&&"object"==typeof $.value;if("propertyObject"===$.type||k){const F=function(R,z){if(!R.value)return;const G=Object.keys(R.value);for(let j=0;j<G.length;j++){const X=G[j],ee=R.value[X],ne=z+"_"+X;if("object"!=typeof ee||null===ee)break;const q=Object.keys(ee);if(!(q.indexOf("value")>=0&&q.indexOf("type")>=0))break;if("array"!==R.type&&(R.isHierarchicalProperty=!0),ee.parentPropertyName=z,m){const J=m._properties[ne];if(R.value.hasOwnProperty(X)){if(J.isDefined)continue;delete R.value[X]}J.isDefined=!0,Object.defineProperty(R.value,X,{configurable:!1,enumerable:!0,get:()=>m._properties[ne].value,set(U){m.updateProperty(m,m._properties[ne],U)}})}f[ne]||(f[ne]=ee,f.length++),("propertyObject"===ee.type||"object"==typeof ee.value&&"array"!==ee.type)&&F(m?m._properties[ne]:ee,ne)}};F($,E)}}})(d),f.length>0&&!m&&this.defineElementProperties(f)}defineElement(){const d=this,m=d.constructor.prototype,h=d.getStaticMember("properties"),f=Object.getOwnPropertyNames(m);m.extendedProperties={},m.boundProperties={},m.templateListeners={},d.defineElementModules(),d.defineElementMethods(f,m),d.defineElementProperties(h),d.defineElementHierarchicalProperties(d.extendedProperties),m._initElement=function(){const _=this,w=m.extendedProperties,S=Object.keys(w),E=_.modules;_.$=D.Extend(_),_.$document=T,_.smartId=(Date.now().toString(36)+Math.random().toString(36).substr(2,5)).toUpperCase(),_.isCreated||(_.modulesList=[],_._properties=[],_._beforeCreatedProperties&&(_._properties=_._beforeCreatedProperties,delete _._beforeCreatedProperties),_.detachedChildren=[],_.propertyByAttributeName=[]);for(let $=0;$<E.length;$+=1){let L=new E[$];L._initModule(_),_.modulesList.push(L)}for(let $=0;$<S.length;$+=1){const L=S[$],k=w[L];let F=k.value;if(_._properties[L]){if(void 0!==_._properties[L].notify)continue;delete _._properties[L]}if(V&&"innerHTML"===L&&delete _[L],-1===window.navigator.userAgent.indexOf("PhantomJS")&&_.hasOwnProperty(L)&&(F=_[L],delete _[L]),"array"===k.type&&null!=F&&(F=F.slice(0)),"object"===k.type&&null!=F&&(F=Array.isArray(F)?F.slice(0):Object.assign({},F)),_._properties[L]={name:L,notify:k.notify,allowedValues:k.allowedValues,type:k.type,nullable:k.nullable,reflectToAttribute:k.reflectToAttribute,defaultReflectToAttribute:k.defaultReflectToAttribute,defaultReflectToAttributeConditions:k.defaultReflectToAttributeConditions,value:F,readOnly:k.readOnly,defaultValue:F,attributeName:k.attributeName,observer:k.observer,inherit:k.inherit,extend:k.extend,validator:k.validator},_.propertyByAttributeName[k.attributeName]=_._properties[L],!k.hasOwnProperty("type")){const z=_.localize("propertyUnknownType",{name:L});_.log(z)}if("any"===k.type||"propertyObject"===k.type)continue;const R=D.Types.getType(F);if(null!=F&&k.type!==R&&!k.validator){if("object"===k.type&&"array"===R||"number"===R&&["integer","int","float"].findIndex(G=>G===k.type)>=0)continue;const z=_.localize("propertyInvalidValueType",{name:L,actualType:R,type:k.type});_.log(z)}}_.defineElementHierarchicalProperties(_._properties,_),_.isCreated=!0},m.registered()}defineElementMethods(d,m){const h=this.constructor.prototype,f=function(w,S){const E=Array.prototype.slice.call(arguments,2);return function(){if(!this.isReady&&"localize"!==S&&"localize"!==S&&"cloneNode"!==S&&"importStyle"!==S&&"log"!==S&&"parseAttributes"!==S){const j=this.localize("elementNotInDOM");this.log(j)}let L=this;for(let j=0;j<this.modulesList.length;j++){let X=this.modulesList[j];if(S in X){L=X;break}}const k=this.context,F=E.concat(Array.prototype.slice.call(arguments));let R=null;const z=function(j,X){return j===X||"number"===j&&("int"===X||"integer"===X||"float"===X)||"bool"===j&&"boolean"===X||"boolean"===j&&"bool"===X||"object"===j&&"any"===X||void 0};if(this.methods){const j=this.methods[S];if(j){const X=j.split(":");R=X[X.length-1].trim();const ee=[],ne=j.substring(1+j.indexOf("("),j.lastIndexOf(")")).split(",");let q="";for(let U=0;U<ne.length;U++){const ae=ne[U];q+=ae,ae.indexOf(":")>=0?(ee.push(q),q=""):q+=","}let J=ee.length;for(let U=0;U<ee.length;U++){const ae=ee[U].trim().split(":"),ie=ae[0].split("=")[0].trim().indexOf("?")>=0,ce=ae[1].indexOf("?")>=0,de=ae[1].replace(/\?/gi,"").trim(),me=de.split("|");let Q=ae[0].split("=")[1];const pe=D.Types.getType(F[U]);if(void 0===F[U]&&Q){switch(Q=Q.trim(),de[0]){case"date":{let oe=Q.substring(Q.indexOf("(")+1,Q.lastIndexOf(")"));oe=oe.length>0?oe.split(",").map(le=>parseInt(le)):[],Q=0===oe.length?new Date:new Date(oe[0],oe[1],oe[2]);break}case"bool":case"boolean":Q="true"===Q||"1"===Q;break;case"int":case"integer":Q=parseInt(Q);break;case"float":case"number":Q=parseFloat(Q);break;case"any":case"object":Q=Q.indexOf("{")>=0?JSON.parse(Q):Q}F.push(Q)}else ie&&J--;if(de!==pe&&pe){let oe=!0;for(let le=0;le<me.length;le++)if(z(pe,me[le])){oe=!1;break}if(oe&&(null!==F[U]||!ce)){const le=this.localize("methodInvalidValueType",{name:S,actualType:pe,type:de,argumentIndex:U});this.log(le)}}if(F.length<J){const oe=this.localize("methodInvalidArgumentsCount",{name:S,actualArgumentsCount:F.length,argumentsCount:J});this.log(oe)}}}}this.context=this;const G=w.apply(L,F);if(R){const j=void 0===D.Types.getType(G)?"void":D.Types.getType(G);if(!z(j,R)){const X=this.localize("methodInvalidReturnType",{name:S,actualType:j,type:R});this.log(X)}}return this.context=k,G}},_=["constructor","ready","created","render","attached","detached","appendChild","insertBefore","removeChild","connect","disconnectedCallback","connectedCallback","attributeChangedCallback","propertyChangedHandler","enableShadowDOM","isInShadowDOM","addPropertyBindings"];for(let w in d){let S=d[w];S.startsWith("_")||void 0!==_.find(E=>E===S)||h.extendedProperties[S]||D.Types.isFunction(m[S])&&(h[S]=f(m[S],S))}}defineElementProperties(d){if(!d)return;const m=this,h=m.constructor.prototype,f=Object.keys(d),_=m.getStaticMember("properties");Object.assign(h.extendedProperties,d),m.updateProperty=function(w,S,E){const $=w;if(!S||S.readOnly)return;if(S.allowedValues){let F=!1;for(let R=0;R<S.allowedValues.length;R++)if(S.allowedValues[R]===E){F=!0;break}if(!F){const R=JSON.stringify(S.allowedValues).replace(/\[|\]/gi,"").replace(",",", ").replace(/"/gi,"'"),G=$.localize("propertyInvalidValue",{name:S.name,actualValue:"'"+E+"'",value:R});return void $.log(G)}}const L=S.name,k=$._properties[L].value;if(S.validator&&$[S.validator]){const F=$.context;$.context=$;const R=$[S.validator](k,E);void 0!==R&&(E=R),$.context=F}if(k!==E){if($.propertyChanging){const F=$.propertyChanging(L,k,E);if(!1===F||null===F)return}if(!S.hasOwnProperty("type")){const F=$.localize("propertyUnknownType",{name:L});$.log(F)}if("array"!==S.type||JSON.stringify(k)!==JSON.stringify(E)){if(null!=E&&"any"!==S.type&&"propertyObject"!==S.type&&S.type!==D.Types.getType(E)&&!S.validator||null===E&&!S.nullable){let F=!0;if("object"===S.type&&"array"===D.Types.getType(E)&&(F=!1),"number"===D.Types.getType(E)&&["integer","int","float"].findIndex(R=>R===S.type)>=0&&(F=!1),F){const R=$.localize("propertyInvalidValueType",{name:L,actualType:D.Types.getType(E),type:S.type});return void $.error(R)}}if(S.isUpdating=!0,S.isHierarchicalProperty){const F=function(R,z){const G=Object.keys(R);for(let j=0;j<G.length;j++){const X=G[j],ee=R[X];"object"==typeof ee&&!D.Types.isArray(ee)&&ee&&ee.constructor!==Date?F(ee,z+"_"+X):$[z+"_"+X]=ee}};F(E,L)}else $._properties[L].value=E;if(!S.isUpdatingFromAttribute&&S.reflectToAttribute&&$.$.setAttributeValue(S.attributeName,E,S.type),$.isReady&&(!$.ownerElement||$.ownerElement&&$.ownerElement.isReady)){if("wait"===L&&(E||!k||$.isCompleted||($.classList.remove("smart-visibility-hidden"),$.ownerElement&&$.ownerElement.updateBoundMappedNodes(),$.updateBoundMappedNodes(),$.complete())),"renderMode"===L)return;if($.context!==$&&!$.wait){const R=$.context;$.context=$,$.propertyChangedHandler(L,k,E),$.context=R,S.observer&&$[S.observer]&&($.context=$,$[S.observer](k,E),$.context=document),$._watch&&$._watch.properties.indexOf(L)>=0&&$._watch.propertyChangedCallback(L,k,E)}const F=S.notify||$.boundProperties[L];F&&($.$.fireEvent(S.attributeName+"-changed",{context:$.context,oldValue:k,value:$[L]}),$.boundProperties[L]&&$.updateBoundNodes(L)),F&&$.templateProperties&&$.templateProperties[L]&&$.refreshTemplate(),$.dataContextProperties&&("dataContext"===L?$.applyDataContext():$.dataContextProperties[L]&&$.updateDataContextProperty(L))}S.isUpdating=!1}}};for(let w=0;w<f.length;w+=1){const S=f[w],E=d[S],$=D.Core.toDash(S),L=E.type||"any",k=L.indexOf("?")>=0||"any"===L;k&&"any"!==L&&(E.type=L.substring(0,L.length-1)),E.nullable=k,E.attributeName=$.toLowerCase(),E.name=S,E.reflectToAttribute=void 0===E.reflectToAttribute||E.reflectToAttribute,E.inherit&&_[S]&&(E.value=_[S].value),E.extend&&_[S]&&D.Core.assign(E.value,_[S].value),h.hasOwnProperty(S)||Object.defineProperty(h,S,{configurable:!1,enumerable:!0,get(){if(this._properties[S])return this._properties[S].value},set(F){const R=this;R.updateProperty(R,R._properties[S],F)}})}}}let O=[],N=[],P=[],V=!1;const Y=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);Y&&parseInt(Y[2],10)<=50&&(V=!0);class K{static register(d,m){const h=m.prototype;let f=l.toCamelCase(d).replace(/[a-z]+/,""),_=m.version||window[n].Version;if(window.customElements.get(d)&&window.customElements.get(d).version===_)return;let w=d;for(_=_.split(".");window.customElements.get(d);)d=w+"-"+_.join("."),_[2]=parseInt(_[2])+1;if(!O[d]){if(d.startsWith(n.toLowerCase()))O[d]=window[n][f]=window[n.toLowerCase()+f]=m;else{let S=d.split("-")[0];S=S.substring(0,1).toUpperCase()+S.substring(1),window[n][S]||(window[n][S]={}),O[d]=window[n][S][f]=window[S.toLowerCase()+f]=m,window[n][f]&&(f=l.toCamelCase(d)),window[n][f]=m}h.elementName=f,h.defineElement(),N[d]&&N[d](h),window.customElements.define(d,m)}}static registerElements(){const d=this;if(d.toRegister){d.isRegistering=!0;for(let m=0;m<d.toRegister.length;m++){const h=d.toRegister[m];d.register(h.tagName,h.element)}d.isRegistering=!1}}static get(d){if(O[d])return O[d]}static whenRegistered(d,m){if(!d)throw new Error("Syntax Error: Invalid tag name");const h=N[d],f=this.get(d),_=f?f.modules.length:3;try{h||f?!h&&f?(m(f.prototype),N[d]=void 0):h&&!f?N[d]=function(w){h(w),m(w)}:h&&f&&(f.proto&&(h(f.proto),m(f.proto)),N[d]=void 0):N[d]=function(w){try{m(w)}catch(S){const E=S instanceof Error?S.message:S.toString();console.log(E)}}}catch(w){const S=w instanceof Error?w.message:w.toString();console.log(S)}if(f&&_!==f.prototype.modules.length){const w=document.querySelectorAll(d);for(let S=0;S<w.length;S++){const E=w[S];E.isCreated&&E._initElement()}}}}K.lazyRegister=!1,K.tagNames=[];class W{constructor(){const d=this;d.name="observableArray",d.observables=arguments.length<3?null:arguments[2];const m=new Proxy(d,{deleteProperty:function(h,f){return delete h[f],!0},apply:function(h,f,_){return h.apply(f,_)},get:function(h,f){return h[f]||isNaN(parseInt(f))?h[f]:d.getItem(parseInt(f))},set:function(h,f,_){return h[f]||isNaN(parseInt(f))?(h[f]=_,!0):(d.setItem(parseInt(f),_),!0)}});if(d._addArgs={eventName:"change",object:m,action:"add",index:null,removed:new Array,addedCount:1},d._removeArgs={eventName:"change",object:m,action:"remove",index:null,removed:null,addedCount:0},arguments.length>=1&&Array.isArray(arguments[0])){d._array=[];const h=arguments[0];for(let f=0,_=h.length;f<_;f++){const w=d._getItem(d._array.length,h[f]);d._array.push(w)}}else d._array=Array.apply(null,arguments);return 2===arguments.length&&(d.notifyFn=arguments[1]),m}get canNotify(){const d=this;return void 0===d._canNotify&&(d._canNotify=!0),d._canNotify}set canNotify(d){this._canNotify=d}_notify(d){const m=this;m.canNotify&&m.notifyFn&&m.notifyFn(d)}notify(d){d&&(this.notifyFn=d)}toArray(){return this._array}_getItem(d,m){const h=this;return"string"==typeof m||"number"==typeof m||void 0===m?m:new Proxy(m,{deleteProperty:function(f,_){return delete f[_],!0},set:function(f,_,w){const S=f[_];return f[_]=w,!h._canNotify||!1===f.canNotify||(h.observables&&!h.observables[_]||h._notify({eventName:"change",object:h,target:f,action:"update",index:d,path:d+"."+_,oldValue:S,newValue:w,propertyName:_}),!0)}})}getItem(d){return this._array[d]}setItem(d,m){const h=this,f=h._array[d];h._array[d]=h._getItem(d,m),h._notify({eventName:"change",object:h._array,action:"update",index:d,removed:[f],addedCount:1})}get length(){return this._array.length}set length(d){const m=this;i.isNumber(d)&&m._array&&m._array.length!==d&&m.splice(d,m._array.length-d)}toString(){return this._array.toString()}toLocaleString(){return this._array.toLocaleString()}concat(){const d=this;d._addArgs.index=d._array.length;const m=d._array.concat.apply(d._array,arguments);return new Smart.ObservableArray(m)}join(d){return this._array.join(d)}pop(){const d=this;d._removeArgs.index=d._array.length-1,delete d[d._array.length-1];const m=d._array.pop();return d._removeArgs.removed=[m],d._notify(d._removeArgs),d._notifyLengthChange(),m}push(){const d=this;if(d._addArgs.index=d._array.length,1===arguments.length&&Array.isArray(arguments[0])){const m=arguments[0];for(let h=0,f=m.length;h<f;h++){const _=d._getItem(d._array.length,m[h]);d._array.push(_)}}else{const m=d._getItem(d._addArgs.index,arguments[0]);d._array.push.apply(d._array,[m])}return d._addArgs.addedCount=d._array.length-d._addArgs.index,d._notify(d._addArgs),d._notifyLengthChange(),d._array.length}_notifyLengthChange(){const d=this;if(!d.canNotify)return;const m=d._createPropertyChangeData("length",d._array.length);d._notify(m)}_createPropertyChangeData(d,m,h){return{eventName:"change",object:this,action:d,value:m,oldValue:h}}reverse(){return this._array.reverse()}shift(){const d=this,m=d._array.shift();return d._removeArgs.index=0,d._removeArgs.removed=[m],d._notify(d._removeArgs),d._notifyLengthChange(),m}slice(d,m){return this._array.slice(d,m)}sort(d){return this._array.sort(d)}splice(d,m,h){const f=this,_=f._array.length;let w;if(h&&h.length)for(let S=0;S<h.length;S++)w=f._array.splice(d+S,m,h[S]);else w=f._array.splice.apply(f._array,arguments);if(h){let S=f.canNotify;if(f.canNotify=!1,h.length)for(let E=0;E<h.length;E++)f.setItem(d+E,h[E]);else f.setItem(d,h);f.canNotify=S,f._notify({eventName:"change",object:this,action:"add",index:d,added:w,addedCount:f._array.length>_?f._array.length-_:0})}else f._notify({eventName:"change",object:this,action:"remove",index:d,removed:w,addedCount:f._array.length>_?f._array.length-_:0});return f._array.length!==_&&f._notifyLengthChange(),w}unshift(){const d=this,m=d._array.length,h=d._array.unshift.apply(d._array,arguments);return d._addArgs.index=0,d._addArgs.addedCount=h-m,d._notify(this._addArgs),d._notifyLengthChange(),h}indexOf(d,m){const h=this;for(let f=m||0,_=h._array.length;f<_;f++)if(h._array[f]===d)return f;return-1}lastIndexOf(d,m){const h=this;for(let f=m||h._array.length-1;f>=0;f--)if(h._array[f]===d)return f;return-1}find(d,m){return this._array.find(d,m)}findIndex(d,m){return this._array.findIndex(d,m)}every(d,m){return this._array.every(d,m)}some(d,m){return this._array.some(d,m)}forEach(d,m){this._array.forEach(d,m)}map(d,m){return this._array.map(d,m)}filter(d,m){return this._array.filter(d,m)}reduce(d,m){return void 0!==m?this._array.reduce(d,m):this._array.reduce(d)}reduceRight(d,m){return void 0!==m?this._array.reduceRight(d,m):this._array.reduceRight(d)}move(d,m){this.splice(m,0,this.splice(d,1)[0])}}let Z={};window[n]&&(Z=window[n]),window[n]=function(C,d){let m=C;if(C){if(C.indexOf("#")>=0||C.indexOf(".")>=0)return p[C]?p[C]:d?(p[C]=new d,function(h,f){const _=f.properties;f._properties=[];const w=function(E,$){const L=Object.keys(E);for(let k=0;k<L.length;k++){const F=L[k],R=E[F];f._properties[$+F]=R,Array.isArray(R)?f._properties[$+F]=new W(R,function(z){const G=F+"."+z.path,j=z.newValue,X=document.querySelector(h);if(X){const ee=G.split(".");let ne=X;for(let q=0;q<ee.length;q++)ne=ne[ee[q]];ne=j}}):(Object.defineProperty(E,F,{configurable:!1,enumerable:!0,get:()=>f._properties[$+F],set(z){f._properties[$+F]=z}}),R&&"DataAdapter"===R.constructor.name||R&&"object"==typeof R&&Smart.DataAdapter&&R instanceof Smart.DataAdapter||"object"==typeof R&&R&&Object.keys(R).length>0&&w(R,$+F+"."))}};w(_,""),Object.defineProperty(f,"properties",{configurable:!1,enumerable:!0,get:()=>_});const S=document.querySelector(h);if(S&&S.isReady)for(let E in _)S[E]=_[E];else if(S){S.props={};for(let E in _)S.props[E]=_[E]}}(C,p[C]),p[C]):void 0;if(d){if(K.tagNames[C]=d,K.lazyRegister){K.toRegister||(K.toRegister=[]);const h=l.toCamelCase(m).replace(/[a-z]+/,"");return window[n][h]=d,void K.toRegister.push({tagName:m,element:d})}K.register(m,d)}}},window.addEventListener("load",function(){const C=window[n].Elements.tagNames;let d=[];for(let m in C){const h=C[m];let f=document.querySelectorAll("["+m+"]");for(let w=0;w<f.length;w++){const S=f[w];S instanceof HTMLDivElement&&(S.__proto__=h.prototype,S.created(),S.connectedCallback()),S.classList.add("smart-element-ready")}let _=h.name;"Item"===_&&(_="ListItem"),f=document.querySelectorAll('[is="'+n.toLocaleLowerCase()+_+'"]');for(let w=0;w<f.length;w++)d.push(f[w])}if(d.length>0){const m=h=>{let f=[],_=h.parentNode;for(;_&&9!==_.nodeType;)_ instanceof HTMLElement==1&&f.push(_),_=_.parentNode;return f};d.sort(function(h,f){let _=m(h).length,w=m(f).length;return _<w?1:_>w?-1:0});for(let h=0;h<d.length;h++){const f=d[h],_=f.getAttribute("is");let w;w="smartItem"===_?new window.smartListItem(f):new window[_](f),w.removeAttribute("is")}}});const te=function(){if("complete"===document.readyState&&"manual"!==window[n].RenderMode){P.sort(function(C,d){let m=C.element.parents.length,h=d.element.parents.length;return m<h?-1:m>h?1:0});for(let C=0;C<P.length;C++)window[n].RenderMode="",P[C].element.isLoading=!1,P[C].callback(),window[n].RenderMode="";P=[],document.removeEventListener("readystatechange",te)}};Object.assign(window[n],{Elements:K,Modules:[],BaseElement:class extends B{static get observedAttributes(){let C=this,d=["external-style"];for(let m in C.prototype.extendedProperties)d.push(C.prototype.extendedProperties[m].attributeName);return d}static get styleUrls(){return[]}static get styles(){return""}get styleUrl(){return this._styleUrl}set styleUrl(C){this._styleUrl=C}get isInShadowDOM(){const C=this,d=C.getRootNode();return!C.hasAttribute("smart-blazor")&&d!==document&&d!==C}getShadowRootOrBody(){return this.isInShadowDOM?this.getRootNode().host.shadowRoot:document.body}get enableShadowDOM(){return window[n].EnableShadowDOM}importStyle(C,d){this._importStyle(C,d)}_importStyle(C,d){const m=this;if(!m.shadowRoot||!C)return;const h=w=>{const S=m.shadowRoot.children;for(let $=0;$<S.length;$++){const L=S[$];if(L instanceof HTMLLinkElement&&L.href===w)return d&&d(),null}const E=document.createElement("link");return E.rel="stylesheet",E.type="text/css",E.href=w,E.onload=d,E},f=(()=>{const w=m.shadowRoot.children;let S=null;for(let E=0;E<w.length;E++){const $=w[E];$ instanceof HTMLLinkElement&&(S=$)}return S})(),_=(w,S)=>{S.parentNode.insertBefore(w,S.nextSibling)};if(Array.isArray(C)){const w=document.createDocumentFragment();for(let S=0;S<C.length;S++){const E=h(C[S]);E&&w.appendChild(E)}f?_(w,f):m.shadowRoot.insertBefore(w,m.shadowRoot.firstChild)}else{const w=h(C);if(!w)return;f?_(w,f):m.shadowRoot.insertBefore(w,m.shadowRoot.firstChild)}}attributeChanged(C,d,m){"style-url"===C&&(this.styleUrl=m)}attributeChangedCallback(C,d,m){this.isReady&&super.attributeChangedCallback(C,d,m)}constructor(C,d){super();const m=this;if(C){d&&(m._initProperties=d);const h=f=>{if("string"==typeof f?document.querySelector(f):f){const _="string"==typeof f?document.querySelector(f):f;if(_ instanceof HTMLDivElement){const w=document.createElement(m.tagName);for(let S of _.attributes)w.setAttribute(S.name,_.getAttribute(S.name));for(;_.childNodes.length;)w.appendChild(_.firstChild);return"string"==typeof f&&(w.id=f.substring(1)),w._initProperties=d,_.parentNode&&_.parentNode.replaceChild(w,_),w}if(d){const w=_.context;if(_._initProperties=d,_.isReady){_.context=_;const S={},E={};for(let $ in d)S[$]=_[$],E[$]=d[$];Object.getOwnPropertyNames(d).length>0&&(_.initProperties(),_.propertyChangedHandler(d,S,E)),_.context=w}}return _}};if("string"==typeof C){const f=document.querySelectorAll(C),_=[];if(f.length>1){for(let w=0;w<f.length;w++){const S=h(f[w]);_.push(S)}return _}}else if(C&&C.length>0){const f=C;if(f.length>1){for(let _=0;_<f.length;_++){const w=h(f[_]);O.push(w)}return O}}return h(C)}m._styleUrl="",m.isUtilityElement||m.created()}_getRootShadowParent(){let C=this.shadowParent;for(;C;){if(!C.shadowParent)return C;C=C.shadowParent}return C||this.shadowParent}_getStyleUrl(C){let d=D.Core.getScriptLocation()+window[n].StyleBaseUrl+C;return this.shadowParent&&(d=d.replace("scoped/","")),d}_getStyleUrls(){const C=this;C.nodeName.startsWith(n);const d=C.getStaticMember("styleUrls","array"),m=[];for(let h=0;h<d.length;h++){const _=C._getStyleUrl(d[h]);m.push(_)}return m}_setupShadowRoot(){const C=this;C.classList.add("smart-element-init");const d=m=>{m.$.root&&(m.$.root.classList.add(n.toLowerCase()+"-element"),m.$.root.classList.add(C.nodeName.toLowerCase())),m.setup(),m.classList.remove("smart-element-init")};if(document.adoptedStyleSheets)if(window[n].AdoptedStyleSheets)window[n].AdoptedStyleSheetsLoaded?(C.shadowRoot.adoptedStyleSheets=window[n].AdoptedStyleSheets,d(C)):(C.shadowRoot.adoptedStyleSheets=window[n].AdoptedStyleSheets,window[n].AdoptedStyleSheetsLoadedQueue||(window[n].AdoptedStyleSheetsLoadedQueue=[]),window[n].AdoptedStyleSheetsLoadedQueue.push(C));else{const m=new CSSStyleSheet;let h=D.Core.getScriptLocation()+"/styles/smart.default.css";m.replace('@import url("'+h+'")').then(()=>{if(d(C),window[n].AdoptedStyleSheetsLoaded=!0,window[n].AdoptedStyleSheetsLoadedQueue){const f=window[n].AdoptedStyleSheetsLoadedQueue;for(let _=0;_<f.length;_++)d(f[_]);delete window[n].AdoptedStyleSheetsLoadedQueue}}).catch(f=>{console.error("Failed to load:",f)}),window[n].AdoptedStyleSheets=[m],document.adoptedStyleSheets=[m],C.shadowRoot.adoptedStyleSheets=window[n].AdoptedStyleSheets}}connect(){const C=this;window[n].EnableShadowDOM&&!C.shadowRoot&&!0!==C.isInShadowDOM&&(C.attachShadow({mode:"open"}),C.shadowRoot&&C.$.root&&(C.shadowRoot.appendChild(C.$.root),C.$.root.classList.add(C.nodeName.toLowerCase()))),C.shadowRoot||C.shadowParent?C.shadowRoot?C._setupShadowRoot():(C.shadowParent&&window,C.setup()):C.setup()}connectedCallback(){const C=this;if(C.isLoading||C.isUtilityElement)return;C.classList.add("smart-element-init");const d=function(){C.classList.remove("smart-element-init")};if("complete"===document.readyState&&(void 0===window[n].isAngular&&(window[n].isAngular=null!==document.body.querySelector("[ng-version]")),window[n].isAngular))for(let m=0;m<C.parents.length&&!C.parents[m].nodeName.toLowerCase().startsWith(n.toLowerCase()+"-");m++)if(C.parents[m].hasAttribute("ng-version")&&!C.classList.contains("smart-angular")){window[n].RenderMode="manual";break}if("complete"===document.readyState&&"manual"!==window[n].RenderMode){const m=C.parents;m.length&&"HTML"===m[m.length-1].nodeName||C.getRootNode().host?(C.checkIsInDomTimer&&clearInterval(C.checkIsInDomTimer),d(),C.connect()):(C.checkIsInDomTimer&&clearInterval(C.checkIsInDomTimer),m.length>0&&(C.checkIsInDomTimer=setInterval(()=>{const h=C.parents;0===h.length&&clearInterval(C.checkIsInDomTimer),h.length>0&&"HTML"===h[h.length-1].nodeName&&(clearInterval(C.checkIsInDomTimer),d(),C.connect())},100)))}else C.isLoading=!0,P.push({element:this,callback:function(){this.isReady||(d(),this.connect())}.bind(C)})}disconnectedCallback(){const C=this;C.isAttached?(C.shadowParent=null,C.detached()):C._resetShadowParent()}adoptedCallback(){this.setup()}appendTemplate(C){const d=this;d.shadowRoot?d.shadowRoot.appendChild(C):d.appendChild(C)}_resetShadowParent(){const C=this;if(!window[n].EnableShadowDOM||null===C.shadowParent)return;const d=[];let m=C.parentNode;for(;m&&9!==m.nodeType;){if(m instanceof HTMLElement==1)d.push(m);else if(11===m.nodeType&&m.host){m=m.host;continue}m=m.parentNode}for(let h=0;h<d.length;h++)if(d[h]===C.shadowParent)return;d.length>0&&"HTML"===d[d.length-1].nodeName&&(C.shadowParent=null)}},Utilities:D,Import:function(C,d){let m=0;const h=function(f,_){return new Promise(w=>{const S=document.createElement("script");S.src=f,S.onload=w;for(let E=0;E<document.head.children.length;E++){const $=document.head.children[E];if($.src&&$.src.toString().indexOf(_)>=0)return void w()}document.head.appendChild(S)})};return new Promise(f=>{const _=D.Core.getScriptLocation(),w=function(S){C[S]&&h(_+"/"+C[S],C[S]).then(function(){m++,m===C.length&&f(),w(S+1)})};if(d)for(let S=0;S<C.length;S++)h(_+"/"+C[S],C[S]).then(function(){m++,m===C.length&&f()});else w(0)})},ObservableArray:W,Observable:class{constructor(C,d){const m=this;var h;return this.name="observable",C&&Object.assign(m,C),h=C,Object.getOwnPropertyNames(Object.getPrototypeOf(h)).forEach(f=>"constructor"===f||!!f.startsWith("_")||void(m[f]=h[f])),new Proxy(m,{deleteProperty:function(f,_){return delete f[_],!0},get:function(f,_){return f[_]},set:function(f,_,w){const S=f[_];return S===w||(f[_]=w,!("notifyFn"!==_&&!_.startsWith("_")&&"canNotify"!==_&&(!d||-1!==d.indexOf(_))&&m.canNotify&&(m._notify({target:f,propertyName:_,oldValue:S,newValue:w}),0)))}})}get canNotify(){const C=this;return void 0===C._canNotify&&(C._canNotify=!0),C._canNotify}set canNotify(C){this._canNotify=C}_notify(C){const d=this;if(d.canNotify&&d.notifyFn)for(let m=0;m<d.notifyFn.length;m++)d.notifyFn[m](C)}notify(C){const d=this;C&&(d.notifyFn||(d.notifyFn=[]),d.notifyFn.push(C))}},Component:class{constructor(C,d){const m=this.name;let h=null;return C?h=new window[m](C,d):(h=new window[m],h._initProperties=d),this._element=h,h}get name(){return"Component"}get element(){return this._element}},Theme:Z.Theme||"",EnableShadowDOM:Z.ShadowDom||!1,BaseUrl:"./",StyleBaseUrl:"/styles/default/",Version:e,Templates:t,RenderMode:Z.RenderMode||"auto",Render:function(){const C=()=>{window[n].RenderMode="",te()};"complete"===document.readyState?C():(window.removeEventListener("load",C),window.addEventListener("load",C))},Data:p,Mode:Z.Mode||"production",License:"Evaluation"});let re=window[n].Theme;"manual"!==window[n].RenderMode&&document.addEventListener("readystatechange",te),Object.defineProperty(window[n],"Theme",{configurable:!1,enumerable:!0,get:()=>re,set(C){const d=re;re=C,T.fireEvent("theme-changed",{oldValue:d,newValue:C},{bubbles:!0,cancelable:!0})}}),window[n]("smart-base-element",window[n].BaseElement),window[n]("smart-content-element",class extends window[n].BaseElement{static get properties(){return{content:{type:"any",reflectToAttribute:!1},innerHTML:{type:"string",reflectToAttribute:!1}}}template(){return"<div inner-h-t-m-l='[[innerHTML]]'></div>"}ready(){super.ready(),this.applyContent()}refresh(){}clearContent(){const C=this;for(;C.$.content.firstChild;)C.$.content.removeChild(C.$.content.firstChild)}applyContent(){const C=this;if(void 0===C.content)return void(C.content=C.$.content);if(""===C.content||null===C.content)return void C.clearContent();if(C.content instanceof HTMLElement)return C.clearContent(),void C.$.content.appendChild(C.content);const d=document.createDocumentFragment();let m=document.createElement("div");d.appendChild(m),C.content instanceof HTMLElement?m.appendChild(C.content):m.innerHTML=C.content;let h=Array.from(m.childNodes);m.parentNode.removeChild(m);for(let f=0;f<h.length;f++)d.appendChild(h[f]);C.clearContent(),C.$.content.appendChild(d)}propertyChangedHandler(C,d,m){super.propertyChangedHandler(C,d,m);const h=this;d!==m&&("innerHTML"===C&&(h.content=m,h.applyContent(),h.innerHTML=h.content=D.Core.html(h.$.content)),"content"===C&&h.applyContent())}}),window[n]("smart-scroll-viewer",class extends window[n].ContentElement{static get properties(){return{horizontalScrollBarVisibility:{type:"string",value:"auto",allowedValues:["auto","disabled","hidden","visible"]},touchScrollRatio:{type:"any",value:null},touchVelocityCoefficient:{type:"number",value:50},verticalScrollBarVisibility:{type:"string",value:"auto",allowedValues:["auto","disabled","hidden","visible"]}}}static get listeners(){return{touchmove:"_touchmoveHandler",touchstart:"_touchstartHandler",wheel:"_mouseWheelHandler","document.up":"_upHandler"}}static get styleUrls(){return["smart.scrollviewer.css"]}template(){return'<div id="container" class="smart-container" role="presentation">\n                        <div id="scrollViewerContainer" class="smart-scroll-viewer-container" role="presentation">\n                            <div id="scrollViewerContentContainer" inner-h-t-m-l=\'[[innerHTML]]\' class="smart-scroll-viewer-content-container" role="presentation">\n                                <content></content>\n                            </div>\n                        </div>\n                        <smart-scroll-bar id="verticalScrollBar" theme="[[theme]]"  animation="[[animation]]" disabled="[[disabled]]" right-to-left="[[rightToLeft]]" orientation="vertical"></smart-scroll-bar>\n                        <smart-scroll-bar id="horizontalScrollBar" theme="[[theme]]" disabled="[[disabled]]" right-to-left="[[rightToLeft]]"></smart-scroll-bar>\n                    </div>'}appendChild(C){const d=this;if(C){if(!d.isCompleted||C.classList&&C.classList.contains("smart-resize-trigger-container")){const m=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.appendChild.apply(d,m.concat(Array.prototype.slice.call(arguments)))}d.$.scrollViewerContentContainer.appendChild(C)}}removeChild(C){const d=this;if(C){if(!d.isCompleted||C.classList&&C.classList.contains("smart-resize-trigger-container")){const m=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.removeChild.apply(d,m.concat(Array.prototype.slice.call(arguments)))}d.$.scrollViewerContentContainer.removeChild(C)}}removeAll(){this.isCompleted&&(this.$.scrollViewerContentContainer.innerHTML="")}_horizontalScrollbarHandler(C){const d=this;d.$.scrollViewerContentContainer.style.left=(d.rightToLeft?1:-1)*d.scrollLeft+"px",C.stopPropagation&&C.stopPropagation(),d.onHorizontalChange&&d.onHorizontalChange(C)}_verticalScrollbarHandler(C){const d=this;d.$.scrollViewerContentContainer.style.top=-d.scrollTop+"px",C.stopPropagation&&C.stopPropagation(),d.onVerticalChange&&d.onVerticalChange(C)}_touchmoveHandler(C){const d=this;if(d._touchmoveInside&&C.cancelable)return C.preventDefault(),void C.stopPropagation();const m=d.scrollHeight>0,f=d._touchCoords;if(!m&&!(d.scrollWidth>0)||!f)return;const _=C.touches[0];let w,S,E,$;d._touchCoords=[_.pageX,_.pageY],m?(w=d.scrollTop,S=d.scrollHeight,E=_.pageY,$=f[1]):(w=d.scrollLeft,S=d.scrollWidth,E=_.pageX,$=f[0]);const L=parseFloat(E.toFixed(5)),k=parseFloat($.toFixed(5));0===w&&L>=k||w===S&&L<=k||(E!==$&&(d._touchmoveInside=!0),C.cancelable&&(C.preventDefault(),C.stopPropagation()))}_touchstartHandler(C){const d=C.touches[0];this._touchCoords=[d.pageX,d.pageY]}_mouseWheelHandler(C){const d=this;if(!d.disabled&&(d.computedHorizontalScrollBarVisibility||d.computedVerticalScrollBarVisibility)){if(C.shiftKey&&d.computedHorizontalScrollBarVisibility){const m=d.scrollLeft;return 0===m&&C.deltaX<0||m===d.scrollHeight&&C.deltaX>0?void 0:(C.stopPropagation(),C.preventDefault(),void(d.scrollWidth>0&&d.scrollTo(void 0,d.scrollLeft+d._getScrollCoefficient(C,d.offsetWidth))))}if(d.computedVerticalScrollBarVisibility){const m=d.scrollTop;if(0===m&&C.deltaY<0||m===d.scrollHeight&&C.deltaY>0)return;C.stopPropagation(),C.preventDefault(),d.scrollHeight>0&&d.scrollTo(d.scrollTop+d._getScrollCoefficient(C,d.offsetHeight))}}}_overriddenHandler(){}_upHandler(){delete this._touchCoords,delete this._touchmoveInside}_getScrollCoefficient(C,d){const m=C.deltaMode,h=Math.abs(C.deltaY);let f;return 0===m?f=h<100/3?h:d:1===m?f=h<1?h*(100/3):d:2===m&&(f=d),C.deltaY<0?-f:f}applyContent(){super.applyContent(),this.refresh()}get computedHorizontalScrollBarVisibility(){const C=this;return C._scrollView&&C._scrollView.hScrollBar?!C._scrollView.hScrollBar.$.hasClass("smart-hidden"):null}get computedVerticalScrollBarVisibility(){const C=this;return C._scrollView&&C._scrollView.vScrollBar?!C._scrollView.vScrollBar.$.hasClass("smart-hidden"):null}scrollTo(C,d){const m=this;m._scrollView&&(void 0!==C&&m._scrollView.scrollTo(C),void 0!==d&&m._scrollView.scrollTo(d,!1))}refreshScrollBarsVisibility(){const C=this;C._scrollView&&(C._scrollView.hScrollBar.disabled=C.disabled,C._scrollView.vScrollBar.disabled=C.disabled,"disabled"===C.horizontalScrollBarVisibility&&(C._scrollView.hScrollBar.disabled=!0),"disabled"===C.verticalScrollBarVisibility&&(C._scrollView.vScrollBar.disabled=!0),C.scrollWidth>0?C._scrollView.hScrollBar.$.removeClass("smart-hidden"):"visible"!==C.horizontalScrollBarVisibility&&C._scrollView.hScrollBar.$.addClass("smart-hidden"),C.scrollHeight>0?C._scrollView.vScrollBar.$.removeClass("smart-hidden"):"visible"!==C.verticalScrollBarVisibility&&C._scrollView.vScrollBar.$.addClass("smart-hidden"),"hidden"===C.horizontalScrollBarVisibility&&C._scrollView.hScrollBar.$.addClass("smart-hidden"),"hidden"===C.verticalScrollBarVisibility&&C._scrollView.vScrollBar.$.addClass("smart-hidden"),"visible"===C.horizontalScrollBarVisibility&&C._scrollView.hScrollBar.$.removeClass("smart-hidden"),"visible"===C.verticalScrollBarVisibility&&(C._scrollView.vScrollBar.$.removeClass("smart-hidden"),C.disabled||(C._scrollView.vScrollBar.disabled=C.scrollHeight<=0)),C.computedHorizontalScrollBarVisibility&&C.computedVerticalScrollBarVisibility?(C._scrollView.hScrollBar.$.addClass("bottom-corner"),C._scrollView.vScrollBar.$.addClass("bottom-corner")):(C._scrollView.hScrollBar.$.removeClass("bottom-corner"),C._scrollView.vScrollBar.$.removeClass("bottom-corner")))}ready(){super.ready();const C=this;C.$.verticalScrollBar.onChange=d=>{d.detail=d,C._verticalScrollbarHandler(d)},C.$.horizontalScrollBar.onChange=d=>{d.detail=d,C._horizontalScrollbarHandler(d)},C.$.verticalScrollBar.setAttribute("aria-controls",C.id),C.$.horizontalScrollBar.setAttribute("aria-controls",C.id),C._customScrollView||(C._scrollView=new Smart.Utilities.Scroll(C,C.$.horizontalScrollBar,C.$.verticalScrollBar)),C.refresh()}refresh(){const C=this;function d(){const _=C.$.scrollViewerContainer.classList.contains("vscroll");C.$.scrollViewerContainer.classList.remove("vscroll");const w=C.$.scrollViewerContentContainer.offsetWidth-C.$.scrollViewerContainer.offsetWidth;return w>0&&"hidden"!==C.horizontalScrollBarVisibility||"visible"===C.horizontalScrollBarVisibility?C.$.scrollViewerContainer.classList.add("hscroll"):C.$.scrollViewerContainer.classList.remove("hscroll"),_&&C.$.scrollViewerContainer.classList.add("vscroll"),w}function m(){let _;const w=C.$.scrollViewerContainer.classList.contains("hscroll");if(C.$.scrollViewerContainer.classList.remove("hscroll"),Smart.Utilities.Core.Browser.Safari){const S=C.$.scrollViewerContentContainer.getBoundingClientRect().height,E=C.$.scrollViewerContainer.getBoundingClientRect().height;_=S&&E?parseInt(S)-parseInt(E):C.$.scrollViewerContentContainer.offsetHeight-C.$.scrollViewerContainer.offsetHeight}else _=C.$.scrollViewerContentContainer.offsetHeight-C.$.scrollViewerContainer.offsetHeight;return _>0&&"hidden"!==C.verticalScrollBarVisibility||"visible"===C.verticalScrollBarVisibility?C.$.scrollViewerContainer.classList.add("vscroll"):C.$.scrollViewerContainer.classList.remove("vscroll"),w&&C.$.scrollViewerContainer.classList.add("hscroll"),_}if(!C.$.scrollViewerContentContainer)return;let h=C.scrollWidth,f=C.scrollHeight;C.scrollWidth=d(),C.scrollHeight=m(),C.scrollHeight&&f===C.scrollHeight||(C.scrollWidth=d()),C.scrollWidth&&h===C.scrollWidth||(C.scrollHeight=m()),C.computedVerticalScrollBarVisibility&&(C.scrollHeight+=C._scrollView.hScrollBar.offsetHeight),C.computedHorizontalScrollBarVisibility&&(C.scrollWidth+=C._scrollView.vScrollBar.offsetWidth),0===C.scrollHeight&&C.scrollWidth>0&&C.$.container.offsetHeight-C.$.content.offsetHeight<5&&(C.$.container.style.paddingBottom=C._scrollView.hScrollBar.offsetHeight+"px")}attached(){const C=this;super.attached(),C._scrollView||C._customScrollView||(C._scrollView=new Smart.Utilities.Scroll(C,C.$.horizontalScrollBar,C.$.verticalScrollBar))}detached(){const C=this;super.detached(),C._scrollView&&(C._scrollView.unlisten(),delete C._scrollView)}get scrollWidth(){const C=this;return C._scrollView&&C._scrollView.hScrollBar?1===C._scrollView.hScrollBar.max&&"visible"===C.horizontalScrollBarVisibility?0:C._scrollView.hScrollBar.max:-1}set scrollWidth(C){const d=this;C<0&&(C=0),d._scrollView&&d._scrollView.hScrollBar&&(d._scrollView.hScrollBar.max=0===C&&"visible"===d.horizontalScrollBarVisibility?0:C,d.refreshScrollBarsVisibility())}get scrollHeight(){const C=this;return C._scrollView&&C._scrollView.vScrollBar?1===C._scrollView.vScrollBar.max&&"visible"===C.verticalScrollBarVisibility?0:C._scrollView.vScrollBar.max:0}set scrollHeight(C){const d=this;C<0&&(C=0),d._scrollView&&d._scrollView.vScrollBar&&(d._scrollView.vScrollBar.max=0===C&&"visible"===d.verticalScrollBarVisibility?1:C,d.refreshScrollBarsVisibility())}get scrollLeft(){const C=this;return C._scrollView&&C._scrollView.hScrollBar?C._scrollView.hScrollBar.value:0}set scrollLeft(C){const d=this;C<0&&(C=0),d._scrollView&&d._scrollView.hScrollBar&&(d._scrollView.hScrollBar.value=C)}get scrollTop(){const C=this;return C._scrollView&&C._scrollView.vScrollBar?C._scrollView.vScrollBar.value:0}set scrollTop(C){const d=this;C<0&&(C=0),d._scrollView&&d._scrollView.vScrollBar&&(d._scrollView.vScrollBar.value=C)}propertyChangedHandler(C,d,m){super.propertyChangedHandler(C,d,m),"animation"!==C&&"theme"!==C&&this.refresh()}}),window[n].Utilities.Assign("PositionDetection",class{constructor(C,d,m,h){const f=this;if(d){const _="dropDown"+Math.floor(65536*(1+Math.random())).toString(16).substring(1);d.id=_,C.setAttribute("aria-owns",_)}f.context=C,f.dropDown=d,f.defaultParent=m,f.closeMethod=h}handleAutoPositioning(){const C=this,d=C.context;if("auto"!==d.dropDownPosition||d.disabled||d.isHidden)return;const m=window.requestAnimationFrame;let h,f=Date.now();return h=m(function _(){d.isHidden||document.hidden||(h=m(_),"auto"===d.dropDownPosition&&!d.disabled&&(d.isInShadowDOM?document.body.contains(d.shadowParent):document.body.contains(d))||cancelAnimationFrame(h),d.isHidden&&cancelAnimationFrame(h),Date.now()-f>=200&&(C.scrollHandler(),f=Date.now()))})}checkBrowserBounds(C){const d=this.context;if("auto"===d.dropDownPosition&&!d.disabled)switch(C){case"vertically":this.checkBrowserBoundsVertically();break;case"horizontally":this.checkBrowserBoundsHorizontally();break;default:this.checkBrowserBoundsVertically(),this.checkBrowserBoundsHorizontally()}}checkBrowserBoundsHorizontally(){const C=this.context,d=this.dropDown;let m,h=0;l.isMobile||window.innerWidth===document.documentElement.clientWidth||(h=window.innerWidth-document.documentElement.clientWidth),null!==C._dropDownParent?m=!0:d.style.left="";const f=window.innerWidth-h;let _=C.getBoundingClientRect().left;if(_<0&&(d.style.left=(m?0:Math.abs(_))+"px",_=parseFloat(d.style.left)),_+d.offsetWidth>f){let w=_-Math.abs(f-_-d.offsetWidth);m&&(w+=window.pageXOffset),d.style.left=(m?w:w-_)+"px",window.innerWidth===document.documentElement.clientWidth&&(d.style.left=parseFloat(d.style.left)+h+"px"),m&&window.innerHeight===document.documentElement.clientHeight&&this.positionDropDown(!0)}}checkBrowserBoundsVertically(C){const d=this.context,m=this.dropDown,h=d._dropDownListPosition;C||(C=d.getBoundingClientRect()),0!==C.height&&(d._dropDownListPosition=document.documentElement.clientHeight-Math.abs(C.top+C.height+m.offsetHeight)>=0?"bottom":C.top-m.offsetHeight>=0?"top":"overlay-center",this.updatePositionAttribute(h,d._dropDownListPosition))}scrollHandler(){const C=this.context;if(!C.parentElement)return;const d=C.getBoundingClientRect();if(d.top===C._positionTop)return;const m=C._dropDownListPosition;this.checkBrowserBoundsVertically(d),C._dropDownListPosition!==m&&this.positionDropDown(),C._positionTop=d.top}getDropDownParent(C){const d=this.context,m=this.dropDown;let h=d.dropDownAppendTo;d._positionedParent=null,null===h?d._dropDownParent=null:"body"===h||h===document.body?d._dropDownParent=d.getRootNode().host?d.getRootNode().host.shadowRoot:document.body:h instanceof HTMLElement?d._dropDownParent=h:"string"==typeof h?(h=document.getElementById(h),h instanceof HTMLElement?d._dropDownParent=h:(d.dropDownAppendTo=null,d._dropDownParent=null)):(d.dropDownAppendTo=null,d._dropDownParent=null);let f=d._dropDownParent;if(null!==f){for(;f&&f instanceof HTMLElement&&"static"===window.getComputedStyle(f).position&&f!==d.getShadowRootOrBody();)f=f.parentElement;d._positionedParent=f===document.body?null:f,m&&(m.setAttribute("animation",d.animation),""!==d.theme&&m.$.addClass(d.theme),C&&(d._dropDownParent.appendChild(m),m.$.addClass("smart-drop-down-repositioned")),-1===d.detachedChildren.indexOf(m)&&d.detachedChildren.push(m))}}dropDownAppendToChangedHandler(){const C=this.context,d=this.dropDown,m=C._dropDownParent;this.getDropDownParent(),C._dropDownParent!==m&&(C[this.closeMethod](),["left","top","font-size","font-family","font-style","font-weight"].forEach(h=>d.style[h]=null),null===C._dropDownParent?(this.defaultParent.appendChild(d),d.$.removeClass("smart-drop-down-repositioned")):(C._dropDownParent.appendChild(d),d.$.addClass("smart-drop-down-repositioned")))}dropDownPositionChangedHandler(){const C=this;C.dropDown.style.transition="none",C.context[C.closeMethod](),C.setDropDownPosition(),C.handleAutoPositioning()}dropDownAttached(C){const d=this.context;null!==d._dropDownParent&&(d._dropDownParent.appendChild(this.dropDown),this.handleAutoPositioning(),C&&d[C]())}dropDownDetached(){const C=this.context;null!==C._dropDownParent&&document.body.contains(this.dropDown)&&document.body.contains(C._dropDownParent)&&C._dropDownParent.removeChild(this.dropDown)}setDropDownPosition(){const C=this.context,d=C.dropDownPosition,m=C._dropDownListPosition;"auto"===d?this.checkBrowserBounds():C._dropDownListPosition=d,this.updatePositionAttribute(m,C._dropDownListPosition)}updatePositionAttribute(C,d){const m=this.context,h=this.dropDown;m.$.dropDownButton&&!m.$.dropDownButton.hasAttribute(d)&&(m.$.dropDownButton.removeAttribute(C),m.$.dropDownButton.setAttribute(d,"")),h.hasAttribute(d)||(h.style.transition="none",h.removeAttribute(C),h.setAttribute(d,""),requestAnimationFrame(function(){h.style.transition=null}))}positionDropDown(C){const d=this.context,m=this.dropDown;if(!d.opened||null===d._dropDownParent)return;const h=d.getBoundingClientRect();let f,_;if(this.customPositionDropDown){const S=this.customPositionDropDown(h);f=S.left,_=S.top}else switch(f=h.left,_=h.top,d._dropDownListPosition){case"bottom":_+=d.$.container.offsetHeight-1;break;case"center-bottom":_+=d.$.container.offsetHeight-1,f+=d.offsetWidth-m.offsetWidth/2;break;case"center-top":_-=m.offsetHeight-1,f+=d.offsetWidth-m.offsetWidth/2;break;case"top":_-=m.offsetHeight-1;break;case"overlay-bottom":break;case"overlay-center":_-=m.offsetHeight/2-d.offsetHeight/2;break;case"overlay-top":_-=m.offsetHeight-d.offsetHeight}const w=this.getDropDownOffset();m.style.top=_+w.y+"px",C||(m.style.left=f+w.x+"px")}getDropDownOffset(){const C=this.context._positionedParent;let d,m;if(C&&"#document-fragment"!==C.nodeName){const h=C.getBoundingClientRect();d=-h.left,m=-h.top}else d=window.pageXOffset,m=window.pageYOffset;return{x:d,y:m}}placeOverlay(){const C=this.context;if(!C.dropDownOverlay||C._overlay)return;const d=document.createElement("div");d.classList.add("smart-drop-down-overlay"),d.style.width=document.documentElement.scrollWidth+"px",d.style.height=document.documentElement.scrollHeight+"px",document.body.appendChild(d),C._overlay=d}removeOverlay(C){const d=this,m=d.context;m._overlay&&(m.hasAnimation&&C?requestAnimationFrame(function h(){d.dropDown.getBoundingClientRect().height>0?requestAnimationFrame(h):(document.body.removeChild(m._overlay),delete m._overlay)}):(document.body.removeChild(m._overlay),delete m._overlay))}})}()},5707:()=>{Smart("smart-list-item",class extends Smart.ContentElement{static get properties(){return{alternationIndex:{value:-1,type:"int"},color:{value:"",type:"string"},displayMode:{allowedValues:["plain","checkBox","radioButton"],value:"plain",type:"string"},grouped:{value:!1,type:"boolean"},selected:{value:!1,type:"boolean"},value:{value:"",type:"string"},label:{value:"",type:"string"},details:{value:"",type:"string"},group:{value:"",type:"string"},hidden:{value:!1,type:"boolean"},readonly:{value:!1,type:"boolean"}}}get hasStyleObserver(){return!1}get enableShadowDOM(){return!1}get _focused(){const e=this;return void 0===e.__focused&&(e.__focused=!1),e.__focused}set _focused(e){const t=this;t.__focused=e,e?(t.setAttribute("focus",""),t.ownerListBox&&t.ownerListBox.ownerElement&&Smart.ComboBox&&t.ownerListBox.ownerElement instanceof Smart.ComboBox&&t.ownerListBox.ownerElement.$.input.setAttribute("aria-activedescendant",t.id)):t.removeAttribute("focus")}template(){return'<div id="container">\n                   <span id=\'itemInput\' class=\'smart-input smart-hidden\'></span>\n                    <span class="smart-overlay" id="overlay"></span>\n                    <div id="itemContainer" class="smart-content smart-list-item-container"><span class="smart-content-label" inner-h-t-m-l=\'[[innerHTML]]\' role="presentation"><content></content></span><span inner-h-t-m-l=\'[[details]]\' id="details" class="smart-content-details"></span></div>\n                </div>'}appendChild(e){const t=this;if(!t.isCompleted||e.classList&&e.classList.contains("smart-ripple")){const n=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.appendChild.apply(t,n.concat(Array.prototype.slice.call(arguments)))}window.smartBlazor?t.$.itemContainer.appendChild(e):(t.$.itemContainer.innerHTML="",e instanceof HTMLElement&&t.$.itemContainer.appendChild(e))}insertBefore(e,t){const n=this;if(!n.isCompleted){const a=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.insertBefore.apply(n,a.concat(Array.prototype.slice.call(arguments)))}t.parentNode.insertBefore(e,t)}removeChild(e){const t=this;if(!t.isCompleted||e.classList.contains("smart-ripple")){const n=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.removeChild.apply(t,n.concat(Array.prototype.slice.call(arguments)))}e instanceof HTMLElement&&t.$.itemContainer.removeChild(e)}attached(){super.attached(),this.ownerListBox=this.getListBox()}static get listeners(){return{mouseenter:"_itemOnMouseEnter",mouseleave:"_itemOnMouseLeave"}}ready(){super.ready();const e=this;e.setAttribute("role","option"),""!==e.label?e.innerHTML=e.label:""!==e.innerHTML&&(e.label=e.innerHTML),e._setDisplayMode(e.displayMode),e._setItemColor(),e.$.container.noRipple=!0}propertyChangedHandler(e,t,n){const a=this;if(super.propertyChangedHandler(e,t,n),"hidden"===e)n?a.$.addClass("smart-hidden"):a.$.removeClass("smart-hidden");else if("color"===e)a._setItemColor();else if("displayMode"===e)a._setDisplayMode(n);else if("label"===e||"value"===e){const i=a.context;a.context=document,"label"===e&&(a.innerHTML=n);const o=a.getListBox();o._applyTemplate(a),o.onItemUpdated(a),a.context=i}else if("details"===e){const i=a.context;a.context=document,a.$.details.innerHTML=n,a.getListBox().onItemUpdated(a),a.context=i}else if("innerHTML"===e)a.getListBox().onItemUpdated(a);else if("selected"===e)if(n)a.setAttribute("aria-selected",!0);else{const i=a.getListBox();a.readonly||a.disabled||!i||-1===["oneOrManyExtended","zeroOrMany","oneOrMany","checkBox"].indexOf(i.selectionMode)?a.removeAttribute("aria-selected"):a.setAttribute("aria-selected",!1)}}getListBox(){const e=this;if(!Smart.ListBox)return e.getRootNode().host;let t=e.parentNode;for(;t instanceof Smart.ListBox==0&&null!==t;)t=t.parentNode;return!t&&Smart.EnableShadowDOM?e.getRootNode().host:t}_itemOnMouseEnter(){const e=this;!e.disabled&&e.ownerListBox&&(Smart.ListBox.DragDrop.Dragging&&e.ownerListBox.allowDrop&&(Smart.ListBox.DragDrop.DropDetails={item:e,position:"bottom"}),e.ownerListBox.$.verticalScrollBar.thumbCapture||e.ownerListBox.$.horizontalScrollBar.thumbCapture||e.setAttribute("hover",""))}_itemOnMouseMove(e){const t=this;if(t.ownerListBox&&Smart.ListBox.DragDrop.Dragging&&t.ownerListBox.allowDrop&&!Smart.Utilities.Core.isMobile){const n=[].slice.call(t.ownerListBox.getElementsByClassName("smart-list-item-bottom-line-feedback"));for(let i=0;i<n.length;i++)n[i].$.removeClass("smart-list-item-line-feedback"),n[i].$.removeClass("smart-list-item-bottom-line-feedback");if(Smart.ListBox.DragDrop.DropDetails={item:t,position:"top"},!t.ownerListBox._areCSSVarsSupported){if(t.ownerListBox._indexOf(t)===t.ownerListBox._items.length-1||t.parentNode.lastElementChild===t){const i=t.getBoundingClientRect();e.pageY-window.pageYOffset>i.top+i.height/2-1&&(Smart.ListBox.DragDrop.DropDetails={item:t,position:"bottom"})}return}if(t.$.removeClass("smart-list-item-line-feedback"),t.$.removeClass("smart-list-item-bottom-line-feedback"),t.ownerListBox.sorted&&t.ownerListBox.autoSort)return;const a=t.ownerListBox._items.filter(i=>!i.hidden);if(a.indexOf(t)===a.length-1||t.parentNode.lastElementChild===t){const i=t.getBoundingClientRect();e.pageY-window.pageYOffset>i.top+i.height/2-1?(t.$.addClass("smart-list-item-bottom-line-feedback"),Smart.ListBox.DragDrop.DropDetails={item:t,position:"bottom"}):arguments[1]||t.$.addClass("smart-list-item-line-feedback")}else arguments[1]||t.$.addClass("smart-list-item-line-feedback")}}_itemOnMouseLeave(){const e=this;e.ownerListBox&&(Smart.ListBox.DragDrop.Dragging&&(e.$.removeClass("smart-list-item-line-feedback"),e.$.removeClass("smart-list-item-bottom-line-feedback")),e.removeAttribute("hover"))}_setDisplayMode(e){const t=this,n=t.getListBox();n&&(t.displayMode=e="checkBox"===n.selectionMode||"radioButton"===n.selectionMode?n.selectionMode:"plain"),"plain"!==e?t.$itemInput.removeClass("smart-hidden"):t.$itemInput.addClass("smart-hidden")}_setItemColor(){const e=this,t=e.querySelector(".smart-content-label"),n=/(^#[0-9A-F]{3}$)|(^#[0-9A-F]{6}$)|(^#[0-9A-F]{8}$)/i.test(e.color)?e.color:"";t.style.backgroundColor=n,t.style.color=e._getContrastColor(n)}_getContrastColor(e){if(!e)return"";let t=(n=e.slice(1,3),a=e.slice(3,5),i=e.slice(5,7),[parseInt(n,16),parseInt(a,16),parseInt(i,16)]);var n,a,i;return parseFloat(((.299*t[0]+.61*t[1]+.114*t[2])/255).toFixed(2))>.65?"#000000":"#FFFFFF"}}),Smart("smart-list-items-group",class extends Smart.ContentElement{static get properties(){return{label:{value:"",type:"string"}}}get enableShadowDOM(){return!1}template(){return'<div id="container" role="presentation">\n                 <span id="itemsLabel" class="smart-list-items-group-label">[[label]]</span>\n                 <div id="listItemsGroupContainer" inner-h-t-m-l=\'[[innerHTML]]\' class="smart-list-items-group-container" role="presentation">\n                    <content></content>\n                 </div>\n               </div>'}appendChild(e){const t=this;if(!t.isCompleted){const n=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.appendChild.apply(t,n.concat(Array.prototype.slice.call(arguments)))}e instanceof HTMLElement&&t.$.listItemsGroupContainer.appendChild(e)}removeChild(e){const t=this;if(!t.isCompleted){const n=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.removeChild.apply(t,n.concat(Array.prototype.slice.call(arguments)))}e instanceof HTMLElement&&t.$.listItemsGroupContainer.removeChild(e)}getListBox(){let e=this.parentNode;for(;e instanceof Smart.ListBox==0&&null!==e;)e=e.parentNode;return e}attached(){const e=this;super.attached(),e.ownerListBox||(e.ownerListBox=e.getListBox()),e.setAttribute("role","group"),e.$.itemsLabel.id||(e.$.itemsLabel.id=e.id+"Label"),e.setAttribute("aria-labelledby",e.$.itemsLabel.id)}}),Smart("smart-list-box",class extends Smart.ScrollViewer{static get properties(){return{allowDrag:{value:!1,type:"boolean"},allowDrop:{value:!1,type:"boolean"},alternationStart:{value:0,type:"int"},alternationEnd:{value:0,type:"int"},alternationCount:{value:0,type:"int"},autoSort:{value:!0,type:"boolean"},dataSource:{value:null,type:"any?",reflectToAttribute:!1},dragFeedbackFormatFunction:{value:null,type:"function?"},dragOffset:{value:[10,10],type:"array"},displayLoadingIndicator:{value:!1,type:"boolean"},displayMember:{value:"",type:"string"},shadowDomMode:{allowedValues:["light","shadow"],value:"shadow",type:"string"},dropAction:{value:"move",type:"string",allowedValues:["copy","move","none"]},editable:{value:!1,type:"boolean"},filterable:{value:!1,type:"boolean"},filterCallback:{value:null,type:"function?"},filterMode:{value:"containsIgnoreCase",allowedValues:["contains","containsIgnoreCase","doesNotContain","doesNotContainIgnoreCase","equals","equalsIgnoreCase","startsWith","startsWithIgnoreCase","endsWith","endsWithIgnoreCase","custom"],type:"string"},filterInputPlaceholder:{value:"",type:"string"},grouped:{value:!1,type:"boolean"},groupMember:{value:"",type:"string"},itemTemplate:{value:null,type:"any"},itemHeight:{value:null,type:"number?"},incrementalSearchDelay:{value:700,type:"number?"},incrementalSearchMode:{value:"startsWithIgnoreCase",allowedValues:["contains","containsIgnoreCase","doesNotContain","doesNotContainIgnoreCase","equals","equalsIgnoreCase","startsWith","startsWithIgnoreCase","endsWith","endsWithIgnoreCase"],type:"string"},itemMeasureMode:{value:"auto",allowedValues:["auto","precise"],type:"string"},loadingIndicatorPlaceholder:{value:"Loading...",type:"string"},loadingIndicatorPosition:{value:"center",allowedValues:["bottom","center","top"],type:"string"},messages:{extend:!0,value:{en:{overridingProperties:'{{elementType}}: Overriding properties {{property1}} and {{property2}} applied. The "{{property1}}" property is used by default.',invalidIndex:'{{elementType}}: "{{method}}" method accepts an index of type number or an Array of numbers.',indexOutOfBound:'{{elementType}}: Out of bound index/indexes in "{{method}}" method.',invalidItem:'{{elementType}}: "{{method}}" method accepts an object or an array of objects as it\'s second parameter.',invalidSettings:'{{elementType}}: "{{method}}" method accepts a string or an object as it\'s second parameter.'}},type:"object"},name:{value:"",type:"string"},placeholder:{value:"No Items",type:"string"},selectedIndexes:{value:[],type:"array"},selectedValues:{value:[],type:"array"},selectionMode:{value:"oneOrManyExtended",allowedValues:["none","oneOrManyExtended","zeroOrMany","oneOrMany","zeroOrOne","zeroAndOne","one","checkBox","radioButton"],type:"string"},selectionChangeAction:{value:"release",allowedValues:["press","release"],type:"string"},sorted:{value:!1,type:"boolean"},sortDirection:{value:"asc",type:"string"},topVisibleIndex:{value:-1,type:"int"},type:{value:"list",type:"string",defaultReflectToAttribute:!0,readonly:!0},valueMember:{value:"",type:"string"},virtualized:{value:!1,type:"boolean"}}}static get requires(){return{"Smart.ScrollBar":"smart.scrollbar.js"}}static get styleUrls(){return["smart.listbox.css","smart.dropdown.css","smart.scrollbar.css"]}static get listeners(){return{focus:"_focusHandler",blur:"_blurHandler","container.wheel":"_mouseWheelHandler","editInput.change":"_editInputEventHandler","editInput.blur":"_editInputEventHandler","editInput.keydown":"_editInputEventHandler","horizontalScrollBar.change":"_horizontalScrollbarHandler","itemsInnerContainer.down":"_downHandler","itemsInnerContainer.dblclick":"_dblclickEventHandler","itemsInnerContainer.move":"_itemsContainerMoveHandler","itemsContainer.mouseleave":"_mouseLeaveHandler","itemsInnerContainer.touchmove":"_touchmoveHandler","itemsInnerContainer.touchstart":"_touchstartHandler","document.move":"_moveHandler",keydown:"_keyDownHandler",keyup:"_keyUpHandler",resize:"_resizeHandler",selectstart:"_selectStartHandler",styleChanged:"_styleChangedHandler",swipeleft:"_swipeLeftHandler",swiperight:"_swipeRightHandler",touchmove:"_overriddenHandler",touchstart:"_overriddenHandler","verticalScrollBar.change":"_verticalScrollbarHandler"}}template(){return'<div id="container" class="smart-container" role="presentation">\n                    <div class="smart-list-box-filter-input-container smart-hidden" id="filterInputContainer" role="presentation"><input id="filterInput" disabled="[[disabled]]" placeholder=\'[[filterInputPlaceholder]]\' role="searchbox" aria-label="[[filterInputPlaceholder]]"></div>\n                    <div id="itemsContainer" class="smart-list-items-container" role="presentation">\n                        <div id="placeholder" class="smart-placeholder" role="presentation" aria-hidden="true">[[placeholder]]</div>\n                        <div id="itemsInnerContainer" inner-h-t-m-l=\'[[innerHTML]]\' class="smart-list-items-inner-container" role="presentation">\n                            <content></content>\n                        </div>\n                        <input type="text" id="editInput" class= "smart-hidden"/>\n                    </div>\n                    <smart-scroll-bar wait theme="[[theme]]" right-to-left="[[rightToLeft]]" id="verticalScrollBar" disabled="[[disabled]]" orientation="vertical"></smart-scroll-bar>\n                    <smart-scroll-bar wait theme="[[theme]]" right-to-left="[[rightToLeft]]" id="horizontalScrollBar" disabled="[[disabled]]"></smart-scroll-bar>\n                    <div id="loadingIndicatorContainer" class="smart-loader-container" role="presentation">\n                        <span id="loadingIndicator" class="smart-loader" role="img" aria-label="[[loadingIndicatorPlaceholder]]"></span>\n                        <span id="loadingIndicatorPlaceHolder" class="smart-loader-label smart-hidden">[[loadingIndicatorPlaceholder]]</span>\n                    </div>\n                    <input id="hiddenInput" type="hidden" name="[[name]]">\n                </div>'}get value(){const e=this;return e.isRendered&&e._selectedItems.length>0?e._selectedItems.map(t=>({label:t.label,value:t.value})):null}set value(e){const t=this;if(Array.isArray(e)){const a=t.context;t.context=t,t._isUpdating++,t.selectedValues=[],t.clearSelection();for(let i=0;i<e.length;i++){const r=t.getItem(e[i]);r&&("oneOrManyExtended"===t.selectionMode?t._select(r):t.select(r))}return t.context=a,void t._isUpdating--}const n=t.getItem(e);n&&t.select(n)}get _selectedItems(){const e=this,t=[];if(e.isRendered)for(let n=0;n<e._items.length;n++){const a=e._items[n];a.selected&&t.push(a)}return t}_mouseLeaveHandler(){const e=[].slice.call(this.getElementsByClassName("smart-list-item-bottom-line-feedback"));for(let t=0;t<e.length;t++)e[t].$.removeClass("smart-list-item-line-feedback"),e[t].$.removeClass("smart-list-item-bottom-line-feedback")}_downHandler(e){const t=this;if(t.disabled||t.displayLoadingIndicator||t.readonly)return;let n=e.originalEvent.target,a=null;if(!(n instanceof Smart.ListItem)||n.disabled||n.hidden||n instanceof Smart.ListItemsGroup)for(;n.parentElement;){if(n instanceof Smart.ListItem&&!n.disabled&&!n.hidden&&!(n instanceof Smart.ListItemsGroup)){a=n.dataItem;break}n=n.parentElement}else a=n.dataItem;Smart.ListBox.DragDrop.StartTime=new Date,Smart.ListBox.DragDrop.StartPosition={left:e.pageX,top:e.pageY},a&&(e.stopPropagation(),t.hasRippleAnimation&&(a.readonly||a.disabled||Smart.Utilities.Animation.Ripple.animate(n.$.overlay,e.pageX,e.pageY)),Smart.Utilities.Core.isMobile||"press"!==t.selectionChangeAction||(t._focus(a),t.select(a)),!Smart.ListBox.DragDrop.Feedback&&t.allowDrag&&(Smart.ListBox.DragDrop.DraggedFrom=t,Smart.ListBox.DragDrop.Feedback=document.createElement("span"),t.rightToLeft?Smart.ListBox.DragDrop.Feedback.setAttribute("right-to-left",!0):Smart.ListBox.DragDrop.Feedback.removeAttribute("right-to-left"),t.dragFeedbackFormatFunction?Smart.ListBox.DragDrop.Feedback.innerHTML=t.dragFeedbackFormatFunction(a):Smart.ListBox.DragDrop.Feedback.appendChild(a.offsetHeight?a.cloneNode(!0):t._createItem(a)),Smart.ListBox.DragDrop.Item=a,Smart.Utilities.Extend(Smart.ListBox.DragDrop.Feedback).addClass("smart-popup smart-list-item smart-list-item-feedback")))}_dblclickEventHandler(e){const t=this;if(!t.editable)return;const n=e.target.closest("smart-list-item");n instanceof Smart.ListItem&&!n.disabled&&!n.readonly?(t.$.editInput.dir=t.rightToLeft?"rtl":"ltr",t.$.editInput.style.width=t.$.itemsInnerContainer.offsetWidth+"px",t.$.editInput.owner=n,t.$.editInput.value=n.label,t.$.editInput.style.height=n.offsetHeight+"px",t.$.editInput.style.top=n.offsetTop+t.$.itemsInnerContainer.offsetTop+"px",t.$.editInput.setAttribute("aria-label","Edit item "+n.label),t.$editInput.hasClass("smart-hidden")&&t.$editInput.removeClass("smart-hidden"),t.$.editInput.focus({preventScroll:!0})):t.$editInput.addClass("smart-hidden")}_editInputEventHandler(e){const t=this;if("blur"===e.type||"keydown"===e.type&&"Escape"===e.key)return t.$editInput.hasClass("smart-hidden")||t.$editInput.addClass("smart-hidden"),void t.focus();if("keydown"===e.type||t.$editInput.hasClass("smart-hidden"))return;const n=e.target;if(e.stopPropagation(),n.owner.label!==n.value&&(n.owner.label=n.value,t.itemTemplate&&t._applyTemplate(n.owner),t.dataSource)){const i=t.dataSource[n.owner.dataIndex];i&&(t.displayMember?i[t.displayMember]=n.value:i.label=n.value)}t.$editInput.addClass("smart-hidden"),t.$.fireEvent("itemLabelChange",{selected:n.owner.selected,disabled:n.owner.disabled,index:t._indexOf(n.owner),label:n.owner.label,value:n.owner.value})}_pointerUpHandler(e){const t=this;let n=e.originalEvent,a=n.target;(t.shadowRoot||t.isInShadowDOM)&&(a=n.originalEvent?n.originalEvent.composedPath()[0]:n.composedPath()[0]);const i=o=>{const r=o.ownerListBox;r.disabled||r!==t||r.displayLoadingIndicator||"none"===r.selectionMode||o.grouped||o.readonly||(r._focus(o),r.select(o),Smart.ListBox.DragDrop.StartPosition=null,t.$.fireEvent("itemClick",{selected:a.selected,disabled:a.disabled,index:t._indexOf(a),label:a.label,value:a.value}))};if(!(n.target instanceof Smart.ListItem)||n.target.disabled||n.target instanceof Smart.ListItemsGroup){for(;a.parentElement;){if(a instanceof Smart.ListItem&&!a.disabled&&!(a instanceof Smart.ListItemsGroup))return void i(a.dataItem);a=a.parentElement}if(this.shadowRoot&&"shadow"===this.shadowDomMode){const o=n.composedPath();for(let r=0;r<o.length;r++){const l=o[r];l instanceof Smart.ListItem&&!l.disabled&&i(l.dataItem)}}}else i(a.dataItem)}_upHandler(e){const t=this;if(super._upHandler(),!t.disabled&&!t.readonly&&Smart.ListBox.DragDrop.StartPosition){if(Smart.Utilities.Core.isMobile&&!Smart.ListBox.DragDrop.Dragging){const n=Math.abs(e.pageX-Smart.ListBox.DragDrop.StartPosition.left),a=Math.abs(e.pageY-Smart.ListBox.DragDrop.StartPosition.top);let i=n>=0&&n<=3&&a>=0&&a<=3;if(Smart.Utilities.Core.isMobile&&new Date-Smart.ListBox.DragDrop.StartTime>=300&&(i=!1,Smart.ListBox.DragDrop.StartTime=null),i){const o=e.originalEvent.target.closest("smart-list-box");o?o._pointerUpHandler(e):t._pointerUpHandler(e),Smart.ListBox.DragDrop.StartPosition=null}else{let o=e.originalEvent.target;if(!(e.target instanceof Smart.ListItem)||o.readonly||e.target.disabled||e.target instanceof Smart.ListItemsGroup)for(;o.parentElement;){if(o instanceof Smart.ListItem&&!o.readonly&&!o.disabled&&!(o instanceof Smart.ListItemsGroup)){e.stopPropagation();break}o=o.parentElement}else e.stopPropagation()}}else if(!Smart.Utilities.Core.isMobile&&!Smart.ListBox.DragDrop.Dragging&&"release"===t.selectionChangeAction){const n=(t.shadowRoot||t.isInShadowDOM?e.originalEvent.composedPath()[0]:e.originalEvent.target).closest("smart-list-box");n?n._pointerUpHandler(e):t._pointerUpHandler(e)}if(Smart.ListBox.DragDrop.Feedback){let n;if(Smart.ListBox.DragDrop.Feedback.parentNode&&Smart.ListBox.DragDrop.Feedback.parentNode.removeChild(Smart.ListBox.DragDrop.Feedback),Smart.ListBox.DragDrop.Feedback=null,Smart.Utilities.Core.isMobile&&Smart.ListBox.DragDrop.Dragging)for(let a=0;a<Smart.ListBox.DragDrop.ListBoxes.length;a++){const i=Smart.ListBox.DragDrop.ListBoxes[a],o=i.getBoundingClientRect();if(i.allowDrop&&!i.closest(".smart-visibility-hidden")&&o.left<=e.clientX&&e.clientX<=o.left+o.width&&o.top<=e.clientY&&e.clientY<=o.top+o.height){n=i;const r=i._items.filter(l=>!l.hidden);for(let l=0;l<r.length;l++){const s=r[l],c=s.getBoundingClientRect();if((r.indexOf(s)===r.length-1||s.parentNode.lastElementChild===s)&&e.clientY>=o.top+s.offsetTop-i.scrollTop+c.height/2&&e.clientY<=o.top-i.scrollTop+s.offsetTop+c.height){Smart.ListBox.DragDrop.DropDetails={item:s,position:"bottom"};break}if(e.clientY>=o.top+s.offsetTop-i.scrollTop&&e.clientY<=o.top+s.offsetTop+c.height-i.scrollTop){Smart.ListBox.DragDrop.DropDetails={item:s,position:"top"};break}}}}if(Smart.ListBox.DragDrop.Dragging){if(Smart.ListBox.DragDrop.DropDetails){let a=Smart.ListBox.DragDrop.DropDetails.item,i=Smart.ListBox.DragDrop.Item;const o=i.ownerListBox;let r=e.originalEvent.target;if(t.isInShadowDOM&&(r=e.originalEvent?e.originalEvent.composedPath()[0]:e.composedPath()[0]),n=!n&&r.closest?r.closest("smart-list-box"):n,document.body.classList.remove("smart-dragging"),a.$.removeClass("smart-list-item-line-feedback"),a.$.removeClass("smart-list-item-bottom-line-feedback"),n&&a.ownerListBox!==n&&n.items.length>0&&(a=n.items[n.items.length-1]),Smart.ListBox.DragDrop.Item===a||n!==a.ownerListBox&&!Smart.Utilities.Core.isMobile)n&&0===n._items.length&&"none"!==n.dropAction&&("move"===n.dropAction?Smart.ListBox.DragDrop.Item.ownerListBox.removeChild(Smart.ListBox.DragDrop.Item):"copy"===n.dropAction&&(i=i.cloneNode(!0)),n.appendChild(i));else if("none"!==i.ownerListBox.dropAction){a.ownerListBox!==i.ownerListBox&&"move"===i.ownerListBox.dropAction&&Smart.ListBox.DragDrop.Item.ownerListBox.removeChild(Smart.ListBox.DragDrop.Item),"copy"===i.ownerListBox.dropAction&&(i=i.cloneNode(!0)),Smart.ListBox.DragDrop.Item.group=a.group;const c=a.ownerListBox;"checkBox"!==c.selectionMode&&"radioButton"!==c.selectionMode&&c.clearSelection(),"top"===Smart.ListBox.DragDrop.DropDetails.position?c.insertBefore(i,a):a.parentNode.lastElementChild===a?c.appendChild(i):c.appendChild(i,a),c.ensureVisible(i),"checkBox"===c.selectionMode||"radioButton"===c.selectionMode?(c._focus(i),c._refreshSelection()):(c.clearSelection(),c.select(i))}i.selected&&n!==o&&o._refreshSelection();const l=Smart.ListBox.DragDrop.Item,s=l.ownerListBox;l.displayMode="checkBox"===s.selectionMode||"radioButton"===s.selectionMode?s.selectionMode:"plain",s.$.fireEvent("dragEnd",{item:l,target:a,data:Smart.ListBox.DragDrop,previousContainer:o,container:n,originalEvent:e}),s._focus(l)}else{const a=Smart.ListBox.DragDrop.Item,i=a.ownerListBox;a.displayMode="checkBox"===i.selectionMode||"radioButton"===i.selectionMode?i.selectionMode:"plain",document.body.classList.remove("smart-dragging"),i.$.fireEvent("dragEnd",{item:a,target:null,data:Smart.ListBox.DragDrop,previousContainer:i,container:i,originalEvent:e}),i._focus(a)}e.preventDefault()}delete Smart.ListBox.DragDrop.DraggedFrom,Smart.ListBox.DragDrop.Dragging=!1,Smart.ListBox.DragDrop.Item=null,Smart.ListBox.DragDrop.DropDetails=null}for(let n=0;n<Smart.ListBox.DragDrop.ListBoxes.length;n++){const a=Smart.ListBox.DragDrop.ListBoxes[n];a._dragInterval&&clearInterval(a._dragInterval)}}}_itemsContainerMoveHandler(e){if(Smart.ListBox.DragDrop.Dragging)return this._applyItemFeedback(e),this._moveHandler(e),e.originalEvent.preventDefault(),e.originalEvent.stopPropagation(),!1}_touchmoveHandler(e){if(Smart.ListBox.DragDrop.Dragging&&e.cancelable)return e.preventDefault(),void e.stopPropagation();super._touchmoveHandler(e)}_applyItemFeedback(e){const t=this,n=e.originalEvent.target,a=n.closest?n.closest("smart-list-item"):n;Smart.Utilities.Core.isMobile?Smart.ListBox.DragDrop.DropDetails={item:Smart.ListBox.DragDrop.Item,position:"bottom"}:0!==t.items.length&&(a?a._itemOnMouseMove(e):t.items[t.items.length-1]._itemOnMouseMove(e,!0))}_moveHandler(e){const t=this;if(!Smart.ListBox.DragDrop.Feedback||Smart.ListBox.DragDrop.DraggedFrom!==t)return;const n=t.dragOffset;if(Smart.ListBox.DragDrop.Dragging){Smart.ListBox.DragDrop.Feedback.style.left=n[0]+e.pageX+"px",Smart.ListBox.DragDrop.Feedback.style.top=n[1]+e.pageY+"px",t.$.fireEvent("dragging",{item:Smart.ListBox.DragDrop.Item,data:Smart.ListBox.DragDrop,originalEvent:e.originalEvent});for(let a=0;a<Smart.ListBox.DragDrop.ListBoxes.length;a++){const i=Smart.ListBox.DragDrop.ListBoxes[a];i._dragInterval&&clearInterval(i._dragInterval),i._dragInterval=setInterval(function(){const o=i.getBoundingClientRect();o.left<=e.clientX&&o.left+o.width>=e.clientX&&(e.clientY>=o.top&&e.clientY<=o.top+20?i.scrollTop-=2:e.clientY>=o.top+o.height-20&&e.clientY<=o.top+o.height&&(i.scrollTop+=2))},1)}return e.preventDefault(),e.stopPropagation(),e.originalEvent.preventDefault(),e.originalEvent.stopPropagation(),!1}{const a=Math.abs(e.pageX-Smart.ListBox.DragDrop.StartPosition.left),i=Math.abs(e.pageY-Smart.ListBox.DragDrop.StartPosition.top),o=new Date-Smart.ListBox.DragDrop.StartTime;let r=a>=5&&a<=15||i>=5&&i<=15;if(Smart.Utilities.Core.isMobile&&(o<300||o>1e3)&&(r=!1),r){Smart.ListBox.DragDrop.Dragging=!0,Smart.ListBox.DragDrop.Feedback.style.left=n[0]+e.pageX+"px",Smart.ListBox.DragDrop.Feedback.style.top=n[1]+e.pageY+"px",t.getShadowRootOrBody().appendChild(Smart.ListBox.DragDrop.Feedback),e.preventDefault(),e.stopPropagation(),e.originalEvent.preventDefault(),e.originalEvent.stopPropagation();const l=Smart.ListBox.DragDrop.Item,s=l.ownerListBox;s.$.fireEvent("dragStart",{item:l,data:Smart.ListBox.DragDrop,container:s,previousContainer:s,originalEvent:e.originalEvent}),document.body.classList.add("smart-dragging")}}}_focusHandler(){this._focused=!0,this.setAttribute("focus","")}_blurHandler(){this._focused=!1,this.removeAttribute("focus")}appendChild(e){const t=this;if(!t.isCompleted){const n=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.appendChild.apply(t,n.concat(Array.prototype.slice.call(arguments)))}t.isVirtualized?(t._items.indexOf(e)>-1&&t._items.splice(t._items.indexOf(e),1),t._items.push(e)):(e.dataItem=e,t.shadowRoot&&"light"===t.shadowDomMode?t.appendChild(e):t.$.itemsInnerContainer.appendChild(e),t._items.indexOf(e)>-1&&t._items.splice(t._items.indexOf(e),1),t._items.push(e)),t._refreshItems(),t._refreshSelection()}insertBefore(e,t){const n=this;if(!n.isCompleted){const a=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.insertBefore.apply(n,a.concat(Array.prototype.slice.call(arguments)))}n.isVirtualized?(n._items.indexOf(e)>-1&&n._items.splice(n._items.indexOf(e),1),n._items.splice(n._indexOf(t),0,e)):(e.dataItem=e,t.parentNode.insertBefore(e,t),n._items.indexOf(e)>-1&&n._items.splice(n._items.indexOf(e),1),n._items.splice(n._indexOf(t),0,e)),n._refreshItems(),n._refreshSelection()}removeChild(e){const t=this;if(!t.isCompleted){const n=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.removeChild.apply(t,n.concat(Array.prototype.slice.call(arguments)))}if(t.isVirtualized)t._items.splice(t._indexOf(e),1);else if(e.parentNode){const n=t.selectedIndexes.slice(0),a=t.selectedValues.slice(0),i=n.indexOf(e.dataIndex);e.parentNode.removeChild(e),i>-1&&(n.splice(i,1),a.splice(i,1),t.selectedIndexes=n,t.selectedValues=a)}t._refreshItems()}propertyChangedHandler(e,t,n){if("dataSource"===e&&(!n||n&&Array.isArray(n)&&0===n.length))return void this.clearItems();super.propertyChangedHandler(e,t,n);const a=this;switch(e){case"innerHTML":a.clearSelection(),a._dataBind(),a.innerHTML=a.content=Smart.Utilities.Core.html(a.$.content);break;case"dataSource":case"valueMember":case"groupMember":case"displayMember":a.clearSelection(),a._dataBind(),a._applyDefaultSelection();break;case"disabled":case"unfocusable":a._setFocusable();break;case"displayLoadingIndicator":a._setLoadingIndicatorVisibility();break;case"filterable":a._refreshFilter(),a._refreshLayout();break;case"grouped":if(n?a._group():a._ungroup(),"radioButton"===a.selectionMode){if(a.selectedValues.length>0){const i=a.selectedValues;a.clearSelection(),a.select(i[0])}}else a._refreshSelection();a._refreshLayout();break;case"itemTemplate":{if(null===n||""===n)return a._items.map(r=>r.innerHTML=r.label),delete a._bindingDetails,void a._refreshLayout();const i=a.querySelectorAll("smart-list-item"),o=function(){a._handleItemTemplate(n)&&(a._items.map(r=>a._applyTemplate(r)),a._refreshLayout()),a.ownerElement&&a.ownerElement._setDropDownSize&&a.ownerElement._setDropDownSize(),a.$.fireEvent("bindingComplete")};0===i.length?o():a._ensureItemsReady(i,o);break}case"selectedIndexes":case"selectedValues":{let i=a.selectedIndexes.slice(0),o=a.selectedValues.slice(0);if(!a._items||0===a._items.length)return a.selectedIndexes=[],a.selectedValues=[],void(a.$.hiddenInput.value=a.selectedValues.toString());if(a._propertyChanging=!0,"selectedIndexes"===e){i=t.slice(0),a.clearSelection();for(let r=0;r<n.length;r++){const s=a._items[n[r]];s&&("oneOrManyExtended"===a.selectionMode||"oneOrMany"===a.selectionMode?(a.selectedIndexes.length>0&&0===r&&a.clearSelection(),a._select(s)):a.select(s))}}else{o=t.slice(0),a.selectedValues=[],a.clearSelection();for(let r=0;r<n.length;r++){const s=a.getItem(n[r]);s&&("oneOrManyExtended"===a.selectionMode?a._select(s):a.select(s))}}if(a.selectedIndexes.length>0&&a._focus(a._items[a.selectedIndexes[0]]),a._propertyChanging=!1,JSON.stringify(o)!==JSON.stringify(a.selectedValues.slice(0))){let r=[],l=[];for(let c=0;c<i.length;c++)a.selectedIndexes.indexOf(i[c])<0&&l.push(a._items[i[c]]);for(let c=0;c<a.selectedIndexes.length;c++)i.indexOf(a.selectedIndexes[c])<0&&r.push(a._items[a.selectedIndexes[c]]);let s={addedItems:r,removedItems:l};if(a.selectedIndexes.length>0){const c=a._items[a.selectedIndexes[a.selectedIndexes.length-1]];void 0!==c&&(s.selected=c.selected,s.disabled=c.disabled,s.index=a._indexOf(c),s.label=c.label,s.value=c.value)}else s.selected=!1,s.disabled=!1,s.index=-1,s.label="",s.value="";a.$.fireEvent("change",s)}break}case"selectionMode":{const i="checkBox"===a.selectionMode||"radioButton"===a.selectionMode?a.selectionMode:"plain",o=a.selectedIndexes.slice(0),r=a.selectedValues.slice(0);a._propertyChanging=!0;const l=a.selectedValues;a.setAttribute("aria-multiselectable",-1!==["oneOrManyExtended","zeroOrMany","oneOrMany","checkBox","radioButton"].indexOf(n)),a.selectedValues=[],a.clearSelection();for(let s=0;s<l.length;s++){const u=a.getItem(l[s]);u&&("oneOrManyExtended"===a.selectionMode?a._select(u):a.select(u))}if(a._items.forEach(s=>s.displayMode=i),a._recycle(),a._propertyChanging=!1,JSON.stringify(r)!==JSON.stringify(a.selectedValues.slice(0))){let s=[],c=[];for(let p=0;p<o.length;p++)a.selectedIndexes.indexOf(o[p])<0&&c.push(a._items[o[p]]);for(let p=0;p<a.selectedIndexes.length;p++)o.indexOf(a.selectedIndexes[p])<0&&s.push(a._items[a.selectedIndexes[p]]);let u={addedItems:s,removedItems:c};if(o.length>0){const p=a._items[o[o.length-1]];p&&(u.selected=p.selected,u.disabled=p.disabled,u.index=a._indexOf(p),u.label=p.label,u.value=p.value)}a.$.fireEvent("change",u)}a._applyAriaSelected(),"checkBox"!==n&&"radioButton"!==n&&"checkBox"!==t&&"radioButton"!==t||a._refreshLayout();break}case"topVisibleIndex":a._setTopVisibleIndex(n);break;case"autoSort":a._canSort=n;break;case"alternationStart":case"alternationEnd":case"alternationCount":a._refreshItems(),a._refreshLayout();break;case"sortDirection":case"sorted":{a._canSort=!0,n?a._sort():a._unsort();const i=a.selectedValues;a.selectedValues=[],a._refreshSelection();for(let o=0;o<i.length;o++){const l=a.getItem(i[o]);l&&("oneOrManyExtended"===a.selectionMode?a._select(l):a.select(l))}a._refreshLayout(),a._canSort=a.autoSort;break}}}_refreshSelection(){const e=this;if(!e._items||0===e._items.length)return;const t=e.selectedValues;e.selectedIndexes=[],e.selectedValues=[];for(let n=0;n<e._items.length;n++){const a=e._items[n];a.selected=!1,t.indexOf(a.value)>-1&&e.select(a)}e._recycle()}clearSelection(){const e=this;if(!e._items||0===e._items.length)return;let t=[];for(let a=0;a<e._items.length;a++)e._items[a].selected&&t.push(e._items[a]);e._items.map(a=>a.selected=!1),e.selectedValues.slice(0);const n=e.selectedIndexes.slice(0);if(e.selectedIndexes=[],e.selectedValues=[],e.$.hiddenInput.value=e.selectedValues.toString(),e._recycle(),e.context!==e){let a={addedItems:[],removedItems:t};if(n.length>0){const i=e._items[n[n.length-1]];i&&(a.selected=i.selected,a.disabled=i.disabled,a.index=e._indexOf(i),a.label=i.label,a.value=i.value)}e.$.fireEvent("change",a)}}ensureVisible(e){const t=this;if(e)return!("string"==typeof e&&!(e=t.getItem(e))||(t.isVirtualized||t.$.itemsContainer.scrollTop===t.scrollTop||(t.scrollTop=t.$.itemsContainer.scrollTop),e.top+e.height>=t.scrollTop+t.offsetHeight&&(t.scrollTop=t.scrollTop+e.height,t.isVirtualized||(t.$.itemsContainer.scrollTop=t.scrollTop)),(e.top<=t.scrollTop||e.top>=t.scrollTop+t.$.itemsContainer.offsetHeight)&&(t.scrollTop=e.top,t.isVirtualized||(t.$.itemsContainer.scrollTop=t.scrollTop)),0===t._indexOf(e)||1===t._indexOf(e)&&t._items.length>1&&t._items[0].grouped?(t.scrollTop=0,t.isVirtualized||(t.$.itemsContainer.scrollTop=t.scrollTop)):t._indexOf(e)===t._items.length-1&&(t.scrollTop=t.scrollHeight,t.isVirtualized||(t.$.itemsContainer.scrollTop=t.scrollTop)),0))}get items(){const e=this;if(!window.__karma__&&!window.karma&&e instanceof Element&&e.isRendered&&e.hasAttribute&&e.hasAttribute("smart-blazor")){let t=[];for(let n=0;n<e._items.length;n++){const a=e._items[n];t.push({label:a.label,value:a.value})}return t}return e._filteredItems?e._filteredItems:e._items}getItems(){const e=this,t=e._filteredItems?e._filteredItems:e._items;let n=[];if(t&&t.length>0)for(let a=0;a<t.length;a++){const i=t[a];n.push({label:i.label,value:i.value})}return n}ready(){super.ready();const e=this;if(e.shadowRoot&&"light"===e.shadowDomMode){const a=document.createDocumentFragment();[].slice.call(e.$.itemsInnerContainer.children).map(i=>a.appendChild(i)),e.appendChild(a),e.$.itemsInnerContainer.appendChild(document.createElement("slot"))}e._areCSSVarsSupported=Smart.Utilities.Core.CSSVariablesSupport(),e.isUpdating=0,e._scrollView&&(e._scrollView=new Smart.Utilities.Scroll(e,e.$.horizontalScrollBar,e.$.verticalScrollBar),e._scrollView.hScrollBar.$.addClass("smart-hidden"),e._scrollView.vScrollBar.$.addClass("smart-hidden"));const t=e._scrollView.vScrollBar,n=e._scrollView.hScrollBar;t.hasStyleObserver=!1,n.hasStyleObserver=!1,t.hasResizeObserver=!1,n.hasResizeObserver=!1,t.wait=!1,n.wait=!1,e._setFocusable()}render(){const e=this;e.setAttribute("role","listbox"),e.setAttribute("aria-orientation","vertical"),e.$.verticalScrollBar.setAttribute("aria-controls",e.id),e.$.horizontalScrollBar.setAttribute("aria-controls",e.id),e._keysPressed={},e._incrementalSearchQuery="",e._incrementalSearchItems=[],e._canSort=!0,e._previousEntry="",e._setLoadingIndicatorVisibility(),e._refreshFilter(),e._initializeInnerHTML(),e._dataBind(),e._applyDefaultSelection(),e.enableShadowDOM&&HTMLElement.prototype.appendChild.apply(e,[e.$.hiddenInput]),e.setAttribute("aria-multiselectable",-1!==["oneOrManyExtended","zeroOrMany","oneOrMany","checkBox","radioButton"].indexOf(e.selectionMode)),super.render()}_applyDefaultSelection(){const e=this;!e._focusedItem&&e._items&&e._items.length>0&&0===e.selectedIndexes.length&&("one"!==e.selectionMode&&"oneOrMany"!==e.selectionMode&&"oneOrManyExtended"!==e.selectionMode||e.select(e._items[0]))}attached(){const e=this;super.attached(),Smart.ListBox.DragDrop||(Smart.ListBox.DragDrop={ListBoxes:[]}),Smart.ListBox.DragDrop.ListBoxes.push(e),e._scrollView||(e._scrollView=new Smart.Utilities.Scroll(e,e.$.horizontalScrollBar,e.$.verticalScrollBar)),e.selectedIndexes.length>0&&e._items&&e.ensureVisible(e._items[e.selectedIndexes[0]])}detached(){const e=this;if(super.detached(),e._scrollView&&(e._scrollView.unlisten(),delete e._scrollView),Smart.ListBox.DragDrop&&Smart.ListBox.DragDrop.ListBoxes){const t=Smart.ListBox.DragDrop.ListBoxes.indexOf(e);Smart.ListBox.DragDrop.ListBoxes.splice(t,1)}}_createItem(e,t,n){const a=this,i="checkBox"===a.selectionMode||"radioButton"===a.selectionMode?a.selectionMode:"plain",o=n?{}:document.createElement("smart-list-item");o.ownerListBox=a,"number"==typeof e&&(e=""+e);const r=function(u,p){return void 0!==e[u]?""+e[u]:e[p]};let l="string"==typeof e?e:r(a.displayMember,"label"),s="string"==typeof e?e:r(a.valueMember,"value"),c=r(a.groupMember,"group");return void 0===l&&(l=void 0!==t?""+t:""),o.label=o.innerHTML=""+l,void 0===s&&(s=void 0!==t?""+t:l),e.color&&(o.color=e.color),o.value=""+s,o.displayMode=i,o.selected=!!e.selected&&e.selected,o.disabled=!!e.disabled&&e.disabled,o.dataItem=o,void 0!==t&&(o.dataIndex=t),a._alternateItem(o),e.title&&(o.title=e.title),c&&(o.group=""+c),o}_alternateItem(e){const t=this,n=t.alternationStart,a=t.alternationEnd>0?t.alternationEnd:1/0;t.alternationCount<=0||(void 0===t._alternationIndexCounter&&(t._alternationIndexCounter=0),e.dataIndex>=n&&e.dataIndex<=a&&(e.alternationIndex=t._alternationIndexCounter++,t._alternationIndexCounter===t.alternationCount&&(t._alternationIndexCounter=0)))}_beginUpdate(){this.isUpdating++}_isUpdating(){return this.isUpdating>0}_endUpdate(){this.isUpdating--}get _scrollHeight(){const e=this;if(0===e._items.length||e._items.filter(n=>!n.hidden).length<1)return 0;let t=0;if(e.isVirtualized){if(e.__scrollHeight)return e.__scrollHeight;if(0===e._items.length)return 0;e.isUpdating++;const n=e._createItem(e.dataSource[0]);e.$.itemsInnerContainer.appendChild(n);for(let a=0;a<e._items.length;a++){const i=e._items[a];i.hidden?(i.height=0,i.top=t):(e.itemHeight?(e.itemHeight<32&&(e.itemHeight=32),i.height=e.itemHeight):(n.$&&n.$.itemContainer?n.$.itemContainer.firstElementChild.innerHTML=i.label:n.label=i.label,i.height=n.offsetHeight),i.top=t,t+=i.height)}e.$.itemsInnerContainer.removeChild(n),e.__scrollHeight=t-e.$.itemsInnerContainer.offsetHeight,e.filterable&&(e.__scrollHeight+=e.$.filterInput.offsetHeight),t=e.__scrollHeight,e.isUpdating--}else{for(let n=0;n<e._items.length;n++){const a=e._items[n];a.hidden?(a.height=0,a.top=t):(e.itemHeight?"auto"!==e.itemHeight&&(a.height=e.itemHeight,a.style.height=a.height+"px"):a.height=a.offsetHeight,a.top=a.offsetTop,t+=a.height)}t=e.$.itemsInnerContainer.scrollHeight-e.$.itemsInnerContainer.offsetHeight,e.filterable&&t>0&&(t+=e.$.filterInput.offsetHeight),e.__scrollHeight=t}return t}_initializeRecyclingItems(){const e=this;if(!e.dataSource||e.dataSource&&0===e.dataSource.length||!e.isVirtualized)return;let t=0,n=e.offsetHeight||400;e.$.itemsInnerContainer.innerHTML="",e._recyclingItems=[];const a=function(){for(let o=0;o<e.dataSource.length;o++){const l=e._createItem(e.dataSource[o]);if(e.itemHeight&&"auto"!==e.itemHeight&&(l.style.height=e.itemHeight+"px"),e.$.itemsInnerContainer.appendChild(l),t+=l.offsetHeight,l.dataItem=e._items[o],e._recyclingItems.push(l),t>1.5*n)break}};a();let i=0;for(;t<1.5*n&&++i<5;)a()}_dataBind(){const e=this;if(e._scrollView||(e._scrollView=new Smart.Utilities.Scroll(e,e.$.horizontalScrollBar,e.$.verticalScrollBar)),"function"==typeof e.dataSource&&(e._items=[],delete e._filteredItems),"string"==typeof e.dataSource&&(e.dataSource=JSON.parse(e.dataSource)),null!==e.dataSource&&Array.isArray(e.dataSource)){e.isUpdating++;const a=i=>{e._items=[],e._groups=[],delete e._filteredItems;const o=e.dataSource;for(let r=0;r<o.length;r++){const s=e._createItem(o[r],r,!i);e._items[r]=s,i&&i.appendChild(s)}};if(e.isVirtualized)a(),e._initializeRecyclingItems();else{const i=document.createDocumentFragment();e.$.itemsInnerContainer.innerHTML="",a(i),e.$.itemsInnerContainer.appendChild(i)}e.isUpdating--}const t=e.shadowRoot?e.shadowRoot.querySelectorAll("smart-list-item"):e.querySelectorAll("smart-list-item"),n=function(){e.isUpdating++,e.dataSource||(e._initializeHtmlListItems(),e._initializeHtmlListGroups()),e.grouped&&e._group(),e.sorted&&e._sort(),e._refreshLayout(),e._initializeSelection(),e.isInitialized=!0,e._canSort=e.autoSort,e.isUpdating--,e.itemTemplate&&e._handleItemTemplate(e.itemTemplate)&&(e._items.map(a=>e._applyTemplate(a)),e._refreshLayout()),e.__onCompleted&&(e._onCompleted=e.__onCompleted,e.__onCompleted=null,e._onCompleted()),e.topVisibleIndex>-1&&e._setTopVisibleIndex(e.topVisibleIndex),e.$.fireEvent("bindingComplete"),e._updateTopVisibleIndex(),0===e._items.length&&e.clearItems(),e._applyAriaSelected()};0===t.length?n():(e._onCompleted&&(e.__onCompleted=e._onCompleted,e._onCompleted=null),e._ensureItemsReady(t,n))}_ensureItemsReady(e,t){const n=this,a=function(){const i=function(o){for(let r=0;r<e.length;r++)e[r].context="node"===o?e[r]:document};i("node"),t(),i()};if(0===e.length)a();else{n._nodesReadyListeners=0;for(let i=0;i<e.length;i++){const o=e[i],r=function(){n._nodesReadyListeners--,0===n._nodesReadyListeners&&(a(),delete n._nodesReadyListeners)}.bind(n);o.isCompleted||(n._nodesReadyListeners++,o._onCompleted=r)}0===n._nodesReadyListeners&&a()}}_initializeInnerHTML(){const e=this;e.$.itemsInnerContainer.innerHTML.indexOf("<option")>=0?e.$.itemsInnerContainer.innerHTML=e.$.itemsInnerContainer.innerHTML.replace(/<optgroup/gi,"<smart-list-items-group").replace(/<\/optgroup/gi,"</smart-list-items-group").replace(/<option/gi,"<smart-list-item").replace(/<\/option/gi,"</smart-list-item"):e.$.itemsInnerContainer.innerHTML.indexOf("<ul")>=0&&(e.$.itemsInnerContainer.innerHTML=e.$.itemsInnerContainer.innerHTML.replace(/<ul/gi,"<smart-list-items-group").replace(/<\/ul/gi,"</smart-list-items-group").replace(/<li/gi,"<smart-list-item").replace(/<\/li/gi,"</smart-list-item"))}_initializeHtmlListItems(){const e=this,t=e.shadowRoot&&"shadow"===e.shadowDomMode?e.shadowRoot.querySelectorAll("smart-list-item"):e.querySelectorAll("smart-list-item"),n="checkBox"===e.selectionMode||"radioButton"===e.selectionMode?e.selectionMode:"plain",a=function(o,r,l){return void 0!==o[r]?""+o[r]:o[l]};e._items=[];let i=0;for(let o=0;o<t.length;o++){const r=t[o];r.dataIndex=o,r.label=r.innerHTML,r.dataItem=r,r.top||(r.top=i),r.height||(r.height=r.offsetHeight),i+=r.height,r.value||(r.value=""+o);const l=a(r,e.displayMember,"label"),s=a(r,e.valueMember,"value"),c=a(r,e.groupMember,"group");r.label!==l&&(r.label=l),r.value!==s&&(r.value=s),r.group!==c&&(r.group=c);const u=r.context;r.context=document,r.displayMode=n,r.context=u,e._alternateItem(r),r.selected&&(e.selectedIndexes.push(o),e.selectedValues.push(r.value)),e._items.push(r)}e.itemTemplate&&e._handleItemTemplate(e.itemTemplate)&&e._items.map(o=>e._applyTemplate(o))}_group(){const e=this;e.isUpdating++;let t=[],n=[];e._canSort&&e._unsort();for(let a=0;a<e._items.length;a++){const i=e._items[a];let o=i.group?i.group.trim():i.innerHTML.charAt(0)||i.label.charAt(0);o+=" ",t[o]?t[o].items.push(i):t[t.length++]=t[o]={items:[i],label:o}}if(e.isVirtualized){e._groups=[];for(let a=0;a<t.length;a++){const i=t[a];i.dataIndex=a,i.grouped=!0,i.hidden=!1,i.displayMode="plain",n.push(i);for(let o=0;o<t[a].items.length;o++){const r=i.items[o];r.group=i,n.push(r)}}e._groups=t,e._items=n}else{for(;e.$.itemsInnerContainer.firstChild;)e.$.itemsInnerContainer.removeChild(e.$.itemsInnerContainer.firstChild);const a=document.createDocumentFragment();e._groups=[];for(let i=0;i<t.length;i++){const o=t[i],r=document.createElement("smart-list-items-group");r.label=o.label,r.dataIndex=i;for(let l=0;l<t[i].items.length;l++){const s=o.items[l];n.push(s),s.group=o.label,r.appendChild(s)}e._groups.push(r),a.appendChild(r)}e._items=n,/Trident|Edge/.test(navigator.userAgent)?setTimeout(function(){e.$.itemsInnerContainer.appendChild(a)},50):e.$.itemsInnerContainer.appendChild(a)}e.sorted&&e._sort(),e.isUpdating--}_ungroup(){const e=this;e.isUpdating++,e._groups=[],e._canSort&&e._unsort();let t=[];if(e.isVirtualized)for(let n=0;n<e._items.length;n++){const a=e._items[n];a.grouped||t.push(a)}else{const n=document.createDocumentFragment();for(let a=0;a<e._items.length;a++){const i=e._items[a];n.appendChild(i),t.push(i)}t.length>0&&(e.$.itemsInnerContainer.innerHTML="",e.$.itemsInnerContainer.appendChild(n))}e._items=t,e.sorted&&e._sort(),e.isUpdating--}_initializeHtmlListGroups(){const e=this,t=e.$.itemsInnerContainer.querySelectorAll("smart-list-items-group");e._groups=[];for(let n=0;n<t.length;n++){const a=t[n];a.dataIndex=n,e._groups.push(a)}}_initializeSelection(){const e=this,t=e.selectedIndexes.slice(0),n=e.selectedValues.slice(0);e.clearSelection(),"oneOrManyExtended"===e.selectionMode&&(e._keysPressed.Control=!0);for(let a=0;a<e._items.length;a++){const i=e._items[a];(t.indexOf(a)>=0||n.indexOf(i.value||i.label)>=0)&&(e._focusedItem&&(e._focusedItem._focused=!1),e._focusedItem=null,e.select(i))}"oneOrManyExtended"===e.selectionMode&&(e._keysPressed.Control=!1)}onItemUpdated(){const e=this;e.isInitialized&&!e._isUpdating()&&(e.isUpdating++,e._refreshLayout(),e.isUpdating--)}_refreshItems(){const e=this;if(e.isInitialized&&!e._isUpdating()){if(e.isUpdating++,e.grouped?e._ungroup():e.sorted&&e._canSort&&e._unsort(),!e.isVirtualized){e._items=[];const t=e.shadowRoot?e.shadowRoot.querySelectorAll("smart-list-item"):e.querySelectorAll("smart-list-item");for(let n=0;n<t.length;n++)t[n].dataIndex=n,e._alternateItem(t[n]),e._items.push(t[n])}e.grouped?e._group():e.sorted&&e._sort(),e._refreshLayout(),e.isUpdating--}}_applyIncrementalSearch(e){const t=this;null===t.incrementalSearchDelay||isNaN(t.incrementalSearchDelay)||["Shift","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Control","Home","End","PageUp","PageDown"].indexOf(e)>-1||(0!==t._incrementalSearchQuery.indexOf(e)&&(t._incrementalSearchQuery+=e),t._incrementalSearchTimer&&clearTimeout(t._incrementalSearchTimer),t._incrementalSearch(),t._incrementalSearchTimer=setTimeout(function(){t._incrementalSearchQuery=""},t.incrementalSearchDelay))}select(e){const t=this;if(("string"!=typeof e||(e=t.getItem(e)))&&("number"!=typeof e||(e=t.getItem(e)))&&!(e.grouped||e.readonly||!t._items.length||e instanceof HTMLElement&&!t.contains(e))){if("none"===t.selectionMode)return t.selectedIndexes=[],void(t.selectedValues=[]);switch(!t._focusedItem!==e&&"none"!==t.selectionMode&&(t._focusedItem&&(t._focusedItem._focused=!1),t._focusedItem=e,e._focused=!0),t.selectionMode){case"one":case"zeroAndOne":return(1!==t.selectedIndexes.length||t.selectedIndexes[0]!==t._indexOf(e))&&(t._previouslySelectedIndexes=t.selectedIndexes,t.selectedIndexes.length>=1&&t.clearSelection(),t._select(e),delete t._previouslySelectedIndexes,!0);case"zeroOrOne":return 1===t.selectedIndexes.length&&t.selectedIndexes[0]===t._indexOf(e)?(t.unselect(e),!0):(t._previouslySelectedIndexes=t.selectedIndexes,t.selectedIndexes.length>=1&&t.clearSelection(),t._select(e),delete t._previouslySelectedIndexes,!0);case"radioButton":if(t._previouslySelectedIndexes=t.selectedIndexes,t.$.itemsInnerContainer.querySelectorAll("smart-list-items-group").length>0){const n=e.parentNode;if(!e.selected){for(let a in n.children){const i=n.children[a];i.selected&&t.unselect(i)}t._select(e)}return delete t._previouslySelectedIndexes,!0}if(t.isVirtualized&&t._groups.length>0){const n=e.group;if(!e.selected){for(let a in n.items){const i=n.items[a];i.selected&&t.unselect(i)}t._select(e)}return delete t._previouslySelectedIndexes,!0}return e.selected||(t.selectedIndexes.length>=1&&t.clearSelection(),t._select(e)),delete t._previouslySelectedIndexes,!0;case"oneOrMany":return e.selected?t.selectedIndexes.length>1&&t.unselect(e):t._select(e),!0;case"zeroOrMany":case"checkBox":return e.selected?t.unselect(e):t._select(e),!0;case"oneOrManyExtended":{const n=t.selectedValues;if(t._keysPressed.Control)return t.selectedIndexes.length>1&&e.selected?(t.unselect(e),t._focus(t._items[t.selectedIndexes[0]])):t._select(e),!0;if(t._keysPressed.Shift){const a=t._items[t.selectedIndexes[0]];let i;t.clearSelection();const o=n.indexOf(a.value)>=0||a.selected;if(t._select(a,o),t._indexOf(a)>t._indexOf(e))for(i=t._indexOf(a)-1;i>=t._indexOf(e);){const l=t._items[i],s=n.indexOf(l.value)>=0||l.selected;t._select(l,s),i--}else for(i=t._indexOf(a)+1;i<=t._indexOf(e);){const l=t._items[i],s=n.indexOf(l.value)>=0||l.selected;t._select(l,s),i++}const r=[];for(let l=0;l<n.length;l++)r.push(t.getItem(n[l]));if(r.length>0&&!t._propertyChanging){let l=[];for(let s=0;s<t.selectedValues.length;s++){const c=t.selectedValues[s];n.indexOf(c)<0&&l.push(t.getItem(c))}t.$.fireEvent("change",{addedItems:l,removedItems:r,selected:e.selected,disabled:e.disabled,index:t._indexOf(e),label:e.label,value:e.value})}return!0}for(let a=0;a<n.length;a++){const o=t.getItem(n[a]);e!==o&&t.unselect(o)}return t.clearSelection(),t._select(e,n.indexOf(e.value)>=0),!0}}return!1}}_applyTemplate(e,t){const n=this;if(null===n.itemTemplate)return;if("function"==typeof n.itemTemplate)return void n.itemTemplate(e,{label:e.label,value:e.value,index:n._items.indexOf(e)});if(!n._bindingDetails||0===n._bindingDetails.length)return;const a=n._bindingDetails.length;let i,o,r=document.importNode(n._template.content,!0);for(let l=0;l<a;l++){i=r.childNodes[n._bindingDetails[l].childNodeIndex],o=n._bindingDetails[l].bindingString.length;for(let s=0;s<o;s++){const c=n._bindingDetails[l].bindingString[s],u=c.indexOf("label")>=0?e.label:e.value;i.innerHTML=i.innerHTML.replace(c,u)}}e.innerHTML="";for(let l=0;l<r.childNodes.length;l++)r.childNodes[l].outerHTML&&(e.innerHTML+=r.childNodes[l].outerHTML);!1!==t&&(n._scrollHeightTimer&&(clearInterval(n._scrollHeightTimer),n._scrollHeightCounter=0),n._scrollHeightTimer=setInterval(function(){n._lastScrollHeight===n.$.itemsInnerContainer.scrollHeight&&10!==n._scrollHeightCounter||(n._refreshLayout(),clearInterval(n._scrollHeightTimer)),n._lastScrollHeight=n.$.itemsInnerContainer.scrollHeight,n._scrollHeightCounter++},50))}_filterItems(e,t,n){const a=this,i=a.$.filterInput.value;let o,r;const l=function(){if(0===r.length)return a._filteredItems=[],void(t&&t());o=a._queryItems(i,a.filterMode);for(let s=0;s<r.length;s++)r[s].hidden=!0,r[s].$&&r[s].$.addClass("smart-hidden");for(let s=0;s<o.length;s++){const c=o[s];c.hidden=!1,r[s].$&&c.$.removeClass("smart-hidden")}if(a.grouped&&a.isVirtualized)for(let s=0;s<a._groups.length;s++){const c=a._groups[s],u=c.items;let p=!0;for(let g=0;g<u.length;g++)u[g].hidden||(p=!1);p&&(c.hidden=!0)}if(a.grouped&&!a.isVirtualized)for(let s=0;s<a._groups.length;s++){const c=a._groups[s],u=[].concat(...c.querySelectorAll("smart-list-item"));let p=!0;for(let g=0;g<u.length;g++)u[g].$.hasClass("smart-hidden")||(p=!1);p?c.$.addClass("smart-hidden"):c.$.removeClass("smart-hidden")}a._filteredItems=o,a._refreshLayout(),t&&t(),e||a._refreshSelection()};if("function"==typeof a.dataSource)if(i||n){const s=function(u){(i||n)&&a.isAttached&&(a._updateListBoxAfterQuery=function(){o=r=a._items,l()},a.clearItems(),a.insert(0,u))},c=a.dataSource(i,s);if(c){if(!i&&!n)return;a._updateListBoxAfterQuery=function(){o=r=a._items,l()},a.clearItems(),a.insert(0,c)}}else a.clearItems(),o=r=a._items,l(),a.$.fireEvent("bindingComplete");else{if(r=a._items,0===r.length)return;l()}}_getNextItem(e){const t=this._items,n=this._items.length;let a=Math.max(e+1,0);for(;a<n;){const i=t[a];if(!(i.disabled||i.hidden||i.grouped||i.readonly))return i;a++}return t[e]}_getPreviousItem(e){const t=this._items;let n=Math.max(e-1,0);for(;n>-1;){const a=t[n];if(!(a.disabled||a.hidden||a.grouped||a.readonly))return a;n--}return t[e]}get _scrollWidth(){const e=this,t=e._items;return e.__scrollWidth||(e.__scrollWidth=(()=>{const n=this,a=n.virtualized,i=n.itemMeasureMode;let o=0,r="";function l(s){const c=n._createItem({label:s});c.style.position="absolute",n.$.itemsContainer.appendChild(c),c.label=s,c.style.width="auto",c.isCompleted&&(c.$.itemContainer.style.width="auto");const u=getComputedStyle(c),p=parseInt(u.paddingLeft)+parseInt(u.paddingRight),g=c.$.itemContainer||c,b=g.offsetWidth+g.offsetLeft+p;return c.parentNode.removeChild(c),b}for(let s=0;s<t.length;s++){const c=t[s];if(!c.hidden)if("auto"===i){const u=a?c.label:c.textContent.trim();u.length>r.length&&(r=u)}else o=Math.max(o,l(c.label))}return"auto"===i?l(r):o})()),e.__scrollWidth}update(e,t){const n=this,a=n._items[e];if(a){if("string"==typeof t)a.label=t,void 0===a.value&&(a.value=t);else for(let i in t)"selected"===i&&a[i]!==t[i]?n.select(a):a[i]=t[i],"group"===i&&n._refreshItems();(n.sorted||n.grouped||n.isVirtualized)&&(n._refreshItems(),n._refreshSelection())}else n.error(n.localize("indexOutOfBound",{elementType:n.nodeName.toLowerCase(),method:"update"}))}insert(e,t){const n=this;let a=[];if((!e||e<0)&&(e=0),Array.isArray(t)){n.isUpdating++;for(let i=0;i<t.length;i++){const r=n._createItem(t[i]);a.push(r),e>=n._items.length||0===n._items.length?n.appendChild(r):n.insertBefore(r,n._items[e])}n.isUpdating--}else{const i=n._createItem(t);a.push(i),e>=n._items.length||0===n._items.length?n.appendChild(i):n.insertBefore(i,n._items[e])}a.length>0?(a.map(i=>n._applyTemplate(i)),n._ensureItemsReady(a,function(){n._refreshItems(),0!==n._items.length&&(n._updateListBoxAfterQuery&&(n._updateListBoxAfterQuery(),delete n._updateListBoxAfterQuery),n._refreshSelection(),n.$.fireEvent("bindingComplete"))})):n._updateListBoxAfterQuery&&(n._updateListBoxAfterQuery(),delete n._updateListBoxAfterQuery)}removeAt(e){const t=this,n=t._items[e];n?(n.selected&&t.unselect(n),t.isVirtualized?t._items.splice(e,1):n.parentNode.removeChild(n),t._refreshItems(),t._refreshSelection(),0===t.selectedIndexes.length&&t._items.length>0&&("oneOrMany"!==t.selectionMode&&"one"!==t.selectionMode&&"oneOrManyExtended"!==t.selectionMode||t.select(t._items[0]))):t.error(t.localize("indexOutOfBound",{elementType:t.nodeName.toLowerCase(),method:"remove"}))}_queryItems(e,t){const n=this,a=[],i=function(o,r){if(o.grouped)return o;switch(t){case"startsWith":if(0===o.label.indexOf(r))return o;break;case"startsWithIgnoreCase":if(0===o.label.toLowerCase().indexOf(r.toLowerCase()))return o;break;case"doesNotContain":if(o.label.indexOf(r)<0)return o;break;case"doesNotContainIgnoreCase":if(o.label.toLowerCase().indexOf(r.toLowerCase())<0)return o;break;case"contains":if(o.label.indexOf(r)>-1)return o;break;case"containsIgnoreCase":if(o.label.toLowerCase().indexOf(r.toLowerCase())>-1)return o;break;case"equals":if(0===o.label.localeCompare(r))return o;break;case"equalsIgnoreCase":if(0===o.label.toLowerCase().localeCompare(r.toLowerCase()))return o;break;case"endsWith":if(o.label.endsWith(r))return o;break;case"endsWithIgnoreCase":if(o.label.toLowerCase().endsWith(r.toLowerCase()))return o;break;case"custom":if(n.filterCallback(o,e))return o}return null};if(0===e.length)return n._items;for(let o=0;o<n._items.length;o++){const r=i(n._items[o],e);r&&a.push(r)}return a}_select(e,t){const n=this,a=n.selectedIndexes.indexOf(n._indexOf(e)),i=n.selectedIndexes.slice(0),o=n.selectedValues.slice(0);if(e.selected=!0,-1!==a)return n._recycle(),!1;if(i.push(n._indexOf(e)),o.push(e.value||e.label),n.selectedIndexes=i,n.selectedValues=o,n._recycle(),n.$.hiddenInput.value=o.toString(),!n.isCompleted||t||!n.isInitialized||n._propertyChanging)return;let r=[];if(n._previouslySelectedIndexes){for(let l=0;l<n._previouslySelectedIndexes.length;l++)n.selectedIndexes.indexOf(n._previouslySelectedIndexes[l])<0&&r.push(n._items[n._previouslySelectedIndexes[l]]);delete n._previouslySelectedIndexes}return n.$.fireEvent("change",{addedItems:[e],removedItems:r,selected:e.selected,disabled:e.disabled,index:n._indexOf(e),label:e.label,value:e.value}),!0}_setTopVisibleIndex(e){const t=this;if("number"==typeof e&&(t.topVisibleIndex=Math.max(0,e),e=t._items[t.topVisibleIndex]),!e)return!1;e.top!==t.scrollTop&&(t.scrollTop=e.top,t.isVirtualized||(t.$.itemsContainer.scrollTop=t.scrollTop),t.scrollHeight===t.scrollTop&&t._updateTopVisibleIndex())}_updateTopVisibleIndex(){const e=this,t=e.scrollTop+e._scrollView.verticalScrollBar.offsetHeight-e.offsetHeight;let n;if(e.scrollTop<e.scrollHeight/2){for(let a=0;a<e._items.length;a++)if(e._items[a].top>=t){n=e._items[a];break}}else for(let a=e._items.length-1;a>=0&&!(e._items[a].top<t);a--)n=e._items[a];if(n){const a=e.context;e.context=e,e.topVisibleIndex=n.dataIndex,e.context=a}}unselect(e){const t=this;if(!e||"string"==typeof e&&!(e=t.getItem(e)))return;if("none"===t.selectionMode)return void t.clearSelection();const n=t.selectedIndexes.indexOf(t._indexOf(e)),a=t.selectedIndexes.slice(0),i=t.selectedValues.slice(0);return e.selected=!1,n>=0&&(a.splice(n,1),i.splice(n,1),t.selectedIndexes=a,t.selectedValues=i,t.$.hiddenInput.value=i.toString(),t.isCompleted&&!t._propertyChanging?(t.$.fireEvent("change",{addedItems:[],removedItems:[e],selected:e.selected,disabled:e.disabled,index:t._indexOf(e),label:e.label,value:e.value}),t._recycle(),!0):void 0)}_handleItemTemplate(e){if(null===e||!e)return;if("function"==typeof e)return e;const t=this;if(!("content"in document.createElement("template")))return t.error(t.localize("htmlTemplateNotSuported",{elementType:t.nodeName.toLowerCase()})),void(t.itemTemplate=null);if(null===(e=document.getElementById(e))||!("content"in e))return t.error(t.localize("invalidTemplate",{elementType:t.nodeName.toLowerCase(),property:"itemTemplate"})),void(t.itemTemplate=null);const n=e.content,a=n.childNodes.length,i=/{{\w+}}/g;let o,r;t._bindingDetails=[],t._template=e;for(let l=0;l<a;l++){for(r=[];o=i.exec(n.childNodes[l].innerHTML);)r.push(o[0]);r.length>0&&t._bindingDetails.push({childNodeIndex:l,bindingString:r})}return!0}_handleKeyStrokes(e){const t=this,n="radioButton"===t.selectionMode||"checkBox"===t.selectionMode||"zeroOrMany"===t.selectionMode||"oneOrMany"===t.selectionMode||"zeroOrOne"===t.selectionMode;let a=t._items;if(t.filterable&&t.$.filterInput.value.length>0&&(a=t._filteredItems),!t.disabled&&!t.readonly&&a.length){switch(e){case"ArrowLeft":case"ArrowUp":t._handleArrowKeys(!0);break;case"ArrowRight":case"ArrowDown":t._handleArrowKeys(!1);break;case" ":{if(t.selectedIndexes.length<1&&!t._focusedItem)return;const i=t._focusedItem?t._focusedItem:t._items[t.selectedIndexes[t.selectedIndexes.length-1]],o=r=>{r.selected&&"radioButton"!==t.selectionMode?t.unselect(r):t.select(r)};if("oneOrMany"===t.selectionMode)return void(i.selected&&t.selectedIndexes.length>1?o(i):i.selected||o(i));o(i);break}case"Home":if(0===a.length)return;n||(t._keysPressed.Shift||t.clearSelection(),t.select(a[0])),t._focus(a[0]),t.scrollTop=0;break;case"End":if(0===a.length)return;n||(t._keysPressed.Shift||t.clearSelection(),t.select(a[a.length-1])),t._focus(a[a.length-1]),t.scrollTop=t.scrollHeight;break;case"PageUp":t._pageUpKeyHandler(a);break;case"PageDown":t._pageDownKeyHandler(a)}t._recycle()}}_horizontalScrollbarHandler(e){const t=this;e&&e.stopPropagation&&e.stopPropagation(),t.isVirtualized?t._recycle():t.$.itemsContainer.scrollLeft=t._getScrollLeft(e.detail.value)}_getScrollLeft(e,t){const n=this;if(!n.rightToLeft)return e;if(Smart.Utilities.Core.Browser.Chrome){if(!t){const a=2*(parseInt(getComputedStyle(n.$.itemsInnerContainer).getPropertyValue("--smart-list-item-horizontal-offset"))||0);t=n._scrollWidth-n.$.itemsContainer.offsetWidth-a}e=t-e}else e*=-1;return e}_unsort(){const e=this;e.isUpdating++;const t=function(n,a){let i=n.dataIndex,o=a.dataIndex;return i<o?-1:i>o?1:0};if(e.isVirtualized)if(e._groups.length>0){e._groups.sort(t);let n=[];for(let a=0;a<e._groups.length;a++){const i=e._groups[a],o=[].concat(...i.items);o.sort(t),n.push(i),n=n.concat(o)}e._items=n}else e._items.sort(t);else{if(e._groups.length>0){e._groups.sort(t);let n=[];for(let a=0;a<e._groups.length;a++){const o=[].concat(...e._groups[a].querySelectorAll("smart-list-item"));o.sort(t),n=n.concat(o)}e._items=n}else e._items.sort(t);e._applySortOrder()}e.isUpdating--}_applySortOrder(){const e=function(t){for(let n=0;n<t.length;n++){const a=t[n],i=a.parentNode;i&&i.appendChild(a)}};e(this._items),e(this._groups)}_sort(){const e=this;if(!e._canSort)return;e.isUpdating++;const t=function(n,a){let i=n.label,o=a.label;if("asc"===e.sortDirection){if(i<o)return-1;if(i>o)return 1}else{if(i<o)return 1;if(i>o)return-1}return 0};if(e._groups.sort(t),e.isVirtualized)if(e._groups.length>0){let n=[];for(let a=0;a<e._groups.length;a++){const i=e._groups[a],o=[].concat(...i.items);n.push(i),o.sort(t),n=n.concat(o)}e._items=n}else e._items.sort(t);else{if(e._groups.length>0){let n=[];for(let a=0;a<e._groups.length;a++){const o=[].concat(...e._groups[a].querySelectorAll("smart-list-item"));o.sort(t),n=n.concat(o)}e._items=n}else e._items.sort(t);e._applySortOrder()}e.isUpdating--}getItem(e){const t=this;for(let n=0;n<t._items.length;n++)if(t._items[n].value===e)return t._items[n];return null}_focus(e){const t=this;!e||"none"===t.selectionMode||t.disabled||t.readonly||(t._focusedItem&&(t._focusedItem._focused=!1),t._focusedItem=e,t._focusedItem._focused=!0)}_keyDownHandler(e){const t=this,n=(t.shadowRoot||t.getRootNode()).activeElement||document.activeElement;let a=e.key;if(e.metaKey&&(a="Control"),!t.disabled&&!t.readonly&&(!t.filterable||t.$.filterInput!==n)&&t._focused&&0!==t._items.length&&!t.disabled&&!t.displayLoadingIndicator){if(t.editable){if("F2"===a)return void t._dblclickEventHandler({target:t._focusedItem});if(t.$.editInput===n)return}if("none"!==t.selectionMode){switch(e.stopPropagation(),a){case"Down":case"Right":case"Left":case"Up":a="Arrow"+a}if(t.filterable)switch(a){case"ArrowLeft":case"ArrowRight":return;case"ArrowUp":case"ArrowDown":e.preventDefault()}if(t._applyIncrementalSearch(a),!(["Shift","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Control"," ","Home","End","PageUp","PageDown"].indexOf(a)<0))if(e.preventDefault(),!t._focusedItem&&t._items.length>0)"one"===t.selectionMode||"oneOrMany"===t.selectionMode||"oneOrManyExtended"===t.selectionMode?t.select(t._items[0]):t._focus(t._items[0]);else switch(t.selectionMode){case"one":case"zeroAndOne":if("Shift"===a||"Control"===a||" "===a)return;t._handleKeyStrokes(a);break;case"oneOrMany":case"zeroOrOne":case"zeroOrMany":case"radioButton":case"checkBox":if("Shift"===a||"Control"===a)return;t._handleKeyStrokes(a);break;case"oneOrManyExtended":if(" "===a)return;t._keysPressed[a]="keydown"===e.type,t._handleKeyStrokes(a)}}}}_keyUpHandler(e){const t=this,n=(t.shadowRoot||t.getRootNode()).activeElement||document.activeElement;if(!t.editable||t.$.editInput!==n){if(t.filterable&&t.$.filterInput===n)return t._filterTimer&&clearTimeout(t._filterTimer),void(t._filterTimer=setTimeout(function(){const a=t.context;t.context=t,t._filterItems(),t.scrollTop=t.$.itemsContainer.scrollTop=0,t.scrollLeft=t.$.itemsContainer.scrollLeft=t._getScrollLeft(0),t.context=a},300));if(t._focused){if(t._focusedItem&&t._focusedItem.hidden&&t._filteredItems.length>0){let a=t._filteredItems[0];a.grouped&&t._filteredItems.length>1&&(a=t._filteredItems[1]),t._focus(a),t._recycle()}e.stopPropagation(),e.preventDefault(),t.disabled||("Escape"===e.key&&Smart.ListBox.DragDrop.Dragging&&t._cancelDrag(),["Shift","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Control"," ","PageUp","PageDown"].indexOf(e.key)<0||(t._keysPressed[e.key]=!1))}}}_cancelDrag(){if(!Smart.ListBox.DragDrop.Dragging)return;Smart.ListBox.DragDrop.Feedback.parentNode&&Smart.ListBox.DragDrop.Feedback.parentNode.removeChild(Smart.ListBox.DragDrop.Feedback);const e=Smart.ListBox.DragDrop.Item,t=e.ownerListBox;if(t.$.fireEvent("dragCancel",{item:e,data:Smart.ListBox.DragDrop,container:t,previousContainer:t}),Smart.ListBox.DragDrop.Feedback=null,Smart.ListBox.DragDrop.DropDetails){let n=Smart.ListBox.DragDrop.DropDetails.item;n&&(n.$.removeClass("smart-list-item-line-feedback"),n.$.removeClass("smart-list-item-bottom-line-feedback"))}document.body.classList.remove("smart-dragging"),delete Smart.ListBox.DragDrop.DraggedFrom,Smart.ListBox.DragDrop.Dragging=!1,Smart.ListBox.DragDrop.Item=null,Smart.ListBox.DragDrop.DropDetails=null}_mouseWheelHandler(e){const t=this;if((t.computedHorizontalScrollBarVisibility||t.computedVerticalScrollBarVisibility)&&!t.disabled&&t.computedVerticalScrollBarVisibility){const n=t.scrollTop;if(0===n&&e.deltaY<0||n===t.scrollHeight&&e.deltaY>0)return;e.stopPropagation(),e.preventDefault(),t.scrollTo(n+t._getScrollCoefficient(e,t.offsetHeight))}}_pageDownKeyHandler(e){const t=this;if(0===e.length)return;let n,a=t._items[t.selectedIndexes[t.selectedIndexes.length-1]];if("checkBox"!==t.selectionMode&&"radioButton"!==t.selectionMode&&"zeroOrMany"!==t.selectionMode&&"oneOrMany"!==t.selectionMode&&"zeroOrOne"!==t.selectionMode||t._focusedItem&&(a=t._focusedItem),!a)return;const i=t._indexOf(a);let o=a.top+t.$.itemsContainer.offsetHeight-a.height;for(let r=i;r<e.length;r++)if(e[r].top>=o){n=e[r];break}n||(n=e[e.length-1]),"checkBox"===t.selectionMode||"radioButton"===t.selectionMode||"zeroOrMany"===t.selectionMode||"oneOrMany"===t.selectionMode||"zeroOrOne"===t.selectionMode?t._focus(n):n.selected||(t._keysPressed.Shift||t.clearSelection(),t.select(n),t._focus(n)),(n.height+n.top>t.$.itemsContainer.scrollTop+t.$.itemsContainer.offsetHeight||n.top<t.$.itemsContainer.scrollTop)&&(t.scrollTop=n.top-t.$.itemsContainer.offsetHeight+n.height)}_pageUpKeyHandler(e){const t=this;if(0===e.length)return;let n=t._items[t.selectedIndexes[t.selectedIndexes.length-1]];if("checkBox"!==t.selectionMode&&"radioButton"!==t.selectionMode&&"zeroOrMany"!==t.selectionMode&&"oneOrMany"!==t.selectionMode&&"zeroOrOne"!==t.selectionMode||t._focusedItem&&(n=t._focusedItem),!n)return;const a=n.top-t.$.itemsContainer.offsetHeight;let i;for(let o=t._indexOf(n);o>0;o--)if(e[o].top<=a){i=e[o];break}i||(i=e[0]),"checkBox"===t.selectionMode||"radioButton"===t.selectionMode||"zeroOrMany"===t.selectionMode||"oneOrMany"===t.selectionMode||"zeroOrOne"===t.selectionMode?t._focus(i):i.selected||(t._keysPressed.Shift||t.clearSelection(),t.select(i),t._focus(i)),t.scrollTop=i.top,0===t._indexOf(i)&&(t.scrollTop=0)}clearItems(){const e=this;e.clearSelection(),e.$.itemsInnerContainer.innerHTML="",e._items=[],delete e._focusedItem,e.$placeholder.removeClass("smart-hidden"),e.refresh()}_resizeHandler(e){this.refresh(e)}refresh(e){const t=this;if(!e&&!t._isUpdatingScrollBars&&t.isInitialized)return t._isUpdatingScrollBars=!0,t._initializeRecyclingItems(),t._refreshLayout(),void(t._isUpdatingScrollBars=!1);e&&e.target===t&&!t._isUpdatingScrollBars&&(t._isUpdatingScrollBars=!0,t._initializeRecyclingItems(),t._refreshLayout(),t._isUpdatingScrollBars=!1)}_indexOf(e){const t=this;if(!e)return-1;let n=t._items.indexOf(e);return-1===n&&(n=t._items.indexOf(t.getItem(e.value))),n}_incrementalSearch(){const e=this,t="radioButton"!==e.selectionMode&&"checkBox"!==e.selectionMode&&"zeroOrMany"!==e.selectionMode&&"oneOrMany"!==e.selectionMode&&"zeroOrOne"!==e.selectionMode;let n,a=0;switch(e.incrementalSearchMode){case"containsIgnoreCase":case"equalsIgnoreCase":case"startsWithIgnoreCase":case"endsWithIgnoreCase":n=e._incrementalSearchQuery.toLowerCase();break;default:n=e._incrementalSearchQuery}const i=function(r){r.grouped||r.readonly||(t?(e.selectedIndexes.length>0&&e.clearSelection(),e._focus(r),e.select(r)):e._focus(r),(r.height+r.top>e.$.itemsContainer.scrollTop+e.$.itemsContainer.offsetHeight||r.top<e.scrollTop)&&(e.scrollTop=r.top),0===e._indexOf(r)&&(e.scrollTop=0),e._indexOf(r)===e._items.length-1&&(e.scrollTop=e.scrollHeight))};0!==e._previousEntry.localeCompare(n)&&(e._incrementalSearchItems=e._queryItems(e._incrementalSearchQuery,e.incrementalSearchMode),delete e._itemPosition),e._previousEntry=n;const o=e._incrementalSearchItems.length;if(0!==o)if(1!==o)for(void 0!==e._itemPosition?e._itemPosition<o-1?a=e._itemPosition:(a=0,t?(e._incrementalSearchItems[e._itemPosition].selected=!1,e.selectedIndexes=[],e.selectedValues=[]):e._incrementalSearchItems[e._itemPosition]._focused=!1):t&&e.clearSelection();a<o;a++)if(e._incrementalSearchItems[a].selected&&t)e._incrementalSearchItems[a].selected=!1,e.selectedIndexes=[],e.selectedValues=[];else{if(t||!e._incrementalSearchItems[a]._focused)return i(e._incrementalSearchItems[a]),void(e._itemPosition=a);e._incrementalSearchItems[a]._focused=!1}else i(e._incrementalSearchItems[0])}_selectStartHandler(e){const t=this,n=(t.shadowRoot||t.getRootNode()).activeElement;t.$.filterInput!==n&&t.$.editInput!==n&&e.preventDefault()}_handleArrowKeys(e){const t=this,n="radioButton"!==t.selectionMode&&"checkBox"!==t.selectionMode&&"zeroOrMany"!==t.selectionMode&&"oneOrMany"!==t.selectionMode&&"zeroOrOne"!==t.selectionMode;if(t.disabled||t.readonly)return;let a;if(t._focusedItem&&!t._keysPressed.Shift)a=t._indexOf(t._focusedItem),t._focusedItem._focused=!1;else{if(0===t.selectedIndexes.length)return;a=t.selectedIndexes[t.selectedIndexes.length-1]}const i=e?t._getPreviousItem(a):t._getNextItem(a);t._focus(i),n&&(t._keysPressed.Shift?t.select(i):t._items[a]!==i&&(t.clearSelection(),t.select(i))),t.ensureVisible(i)}_refreshFilter(){const e=this;if(e.filterable)return e.$.filterInput.disabled=!(!e.disabled&&!e.displayLoadingIndicator),e.$filterInputContainer.removeClass("smart-hidden"),void e.$itemsContainer.addClass("filter");e.$.filterInput.disabled=!0,e.$filterInputContainer.addClass("smart-hidden"),e.$itemsContainer.removeClass("filter")}_setFocusable(){const e=this;e.disabled||e.unfocusable?e.removeAttribute("tabindex"):e.tabIndex=e.tabIndex>0?e.tabIndex:0}_setLoadingIndicatorVisibility(){const e=this;e.displayLoadingIndicator?e.$loadingIndicatorContainer.hasClass("smart-visibility-hidden")?e.$loadingIndicatorContainer.removeClass("smart-visibility-hidden"):e.$loadingIndicatorContainer.removeClass("smart-hidden"):e.$loadingIndicatorContainer.addClass(e._areCSSVarsSupported?"smart-hidden":"smart-visibility-hidden")}_refreshLayout(){const e=this,t=e._filteredItems||e._items;if(e.__scrollHeight=null,e.__scrollWidth=null,e._height=null,e._scrollView||(e._scrollView=new Smart.Utilities.Scroll(e,e.$.horizontalScrollBar,e.$.verticalScrollBar)),e.$itemsContainer.removeClass("hscroll"),e.$itemsContainer.removeClass("vscroll"),!t||null===t||0===t.length)return e.scrollWidth=0,e.scrollHeight=0,e.$filterInputContainer.removeClass("vscroll"),e.$placeholder.removeClass("smart-hidden"),e.isVirtualized&&e._recycle(),void(e.$.itemsInnerContainer.style.width="");e.$placeholder.addClass("smart-hidden");const n=2*(parseInt(getComputedStyle(e.$.itemsContainer).getPropertyValue("--smart-list-item-horizontal-offset"))||0);let a=e._scrollWidth-e.$.itemsContainer.offsetWidth-n,i=e._scrollHeight;if(e._refreshHorizontalScrollBarVisibility(a),e._refreshVerticalScrollBarVisibility(i),e.$.itemsInnerContainer.style.width="",e.$.itemsInnerContainer.style.width="hidden"===e.horizontalScrollBarVisibility?e.$.itemsContainer.offsetWidth-n:Math.max(e.$.itemsContainer.offsetWidth-n,-n+e.__scrollWidth)+"px",e.computedVerticalScrollBarVisibility)return a=e._scrollWidth-e.$.itemsContainer.offsetWidth-n,e._refreshHorizontalScrollBarVisibility(a),"hidden"!==e.horizontalScrollBarVisibility&&(e.$.itemsInnerContainer.style.width="",e.$.itemsInnerContainer.style.width=Math.max(e.$.itemsContainer.offsetWidth-n,-n+e.__scrollWidth)+"px"),e.computedHorizontalScrollBarVisibility&&(("visible"!==e.horizontalScrollBarVisibility||0!==e.scrollWidth||"visible"===e.horizontalScrollBarVisibility)&&(e.__scrollHeight+=e._scrollView.hScrollBar.offsetHeight),e.scrollHeight=e.__scrollHeight,e._scrollView.hScrollBar.$.hasClass("bottom-corner")&&e._scrollView.hScrollBar.refresh()),void(e.isVirtualized&&e._recycle());a=e._scrollWidth-e.$.itemsContainer.offsetWidth-n,e._refreshHorizontalScrollBarVisibility(a),e.computedHorizontalScrollBarVisibility&&(e.scrollHeight=e._scrollHeight,e._refreshVerticalScrollBarVisibility(e.scrollHeight),e.computedVerticalScrollBarVisibility&&(a=e._scrollWidth-e.$.itemsContainer.offsetWidth-e._scrollView.vScrollBar.offsetWidth,e._refreshHorizontalScrollBarVisibility(a)),e._scrollView.vScrollBar.$.hasClass("bottom-corner")&&e._scrollView.vScrollBar.refresh(),e._scrollView.hScrollBar.$.hasClass("bottom-corner")&&e._scrollView.hScrollBar.refresh()),e.isVirtualized&&e._recycle();const o=/Trident|Edge/.test(navigator.userAgent);!e.isRefreshing&&o&&setTimeout(function(){e.isRefreshing=!0,e._refreshLayout(),e.isRefreshing=!1},50)}_styleChangedHandler(){this._refreshLayout()}_swipeLeftHandler(){}_swipeRightHandler(){}_refreshHorizontalScrollBarVisibility(e){const t=this;t.scrollWidth=e,t.computedHorizontalScrollBarVisibility?(t.scrollLeft=t._getScrollLeft(t.$.itemsContainer.scrollLeft,e),t.$itemsContainer.addClass("hscroll")):t.$itemsContainer.removeClass("hscroll")}_refreshVerticalScrollBarVisibility(e){const t=this;t.scrollHeight=e,t.computedVerticalScrollBarVisibility?(t.$itemsContainer.addClass("vscroll"),t.$filterInputContainer.addClass("vscroll")):(t.$itemsContainer.removeClass("vscroll"),t.$filterInputContainer.removeClass("vscroll"))}_validateTemplate(e,t){if(null===t||!t)return;const n=this;return"content"in document.createElement("template")?null!==(t=document.getElementById(t))&&"content"in t?t:(n.error(n.localize("invalidTemplate",{elementType:n.nodeName.toLowerCase(),property:e})),void(n[e]=null)):(n.error(n.localize("htmlTemplateNotSuported",{elementType:n.nodeName.toLowerCase()})),void(n[e]=null))}_getItemIndexByPosition(e){const t=this;return(n=>{let a=0,i=n.length-1;if(e<=0)return 0;if(n[n.length-1].top<=e)return n.length-1;for(;;){const o=Math.floor((a+i)/2),r=n[o];if(t._isItemInPosition(r,e))return o;r.top<e?a=o+1:r.top>e&&(i=o-1)}})(t.filterable&&t.$.filterInput.value.length>0?t._filteredItems:t._items)}_isItemInPosition(e,t){return e.top<=t&&e.top+e.height>t}get isVirtualized(){const e=this;return e.virtualized&&e.dataSource&&e.dataSource.length>0}_recycle(){const e=this;if(!e._recyclingItems)return;let t=e._height;e._height||(t=e._height=e.$.itemsContainer.offsetHeight);let n=0;const a=e.scrollTop,i=e._getItemIndexByPosition(a),o=e.filterable&&e.$.filterInput.value.length>0?e._filteredItems:e._items,r=o[i];let l=r?r.top:0;if(e.$.itemsInnerContainer.style.left=-e.scrollLeft+"px",e.$.itemsInnerContainer.style.top=-a+l+"px",e.isUpdating++,i>=0){const s=o.length;for(let c=i;c<s;c++){const u=o[c];if(0!==u.height){if(!(l+u.height>=a&&l<=a+t))break;{const p=e._recyclingItems[n++];if(!p)break;p.setAttribute("aria-setsize",s),p.setAttribute("aria-posinset",c),p.context=document,p.dataItem=u,p.label=u.label,p.value=u.value,p.selected=u.selected,p._focused=u._focused,p.hidden=u.hidden,p.grouped=u.grouped,p.readonly=u.readonly,p.style.height=u.height+"px",e._alternateItem(p),p.title=u.title?u.title:"",p.displayMode=u.grouped?"plain":u.displayMode,e.scrollWidth>0&&(p.style.width=e.$.itemsInnerContainer.offsetWidth+e.scrollWidth+"px"),e.itemTemplate&&e._handleItemTemplate(e.itemTemplate)&&e._applyTemplate(p,!1)}l+=u.height}}}if(n<e._recyclingItems.length)for(let s=n;s<e._recyclingItems.length;s++){const c=e._recyclingItems[n++],u=c.context;c.context=document,c.hidden=!0,c.context=u}e.isUpdating--}_verticalScrollbarHandler(e){const t=this,n=e.detail.value;e&&e.stopPropagation&&e.stopPropagation(),t.isVirtualized?t._recycle():t.$.itemsContainer.scrollTop=n,t._updateTopVisibleIndex(),e.context.max!==e.context.value?e.context.min===e.context.value&&t.$.fireEvent("scrollTopReached"):t.$.fireEvent("scrollBottomReached")}_applyAriaSelected(){const e=this,t=e.isVirtualized?e._recyclingItems:e._items,n=e.selectionMode;for(let a=0;a<t.length;a++){const i=t[a];i.selected?i.setAttribute("aria-selected",!0):i.readonly||i.disabled||-1===["oneOrManyExtended","zeroOrMany","oneOrMany","checkBox"].indexOf(n)?i.removeAttribute("aria-selected"):i.setAttribute("aria-selected",!1)}}})},1115:()=>{Smart("smart-multiline-text-box",class extends Smart.TextBox{static get properties(){return{autoCapitalize:{value:"none",allowedValues:["none","words","characters"],type:"string"},autoComplete:{value:"off",allowedValues:["on","off"],type:"string"},autoExpand:{value:!1,type:"boolean"},cols:{value:20,type:"number?"},enterKeyBehavior:{value:"newLine",allowedValues:["submit","clearOnSubmit","newLine"],type:"string"},horizontalScrollBarVisibility:{type:"string",value:"auto",allowedValues:["auto","disabled","hidden","visible"]},minLength:{value:0,type:"number"},resizable:{value:!1,type:"boolean"},rows:{value:5,type:"number?"},selectionDirection:{value:"none",allowedValues:["forward","backward","none"],type:"string"},selectionEnd:{value:0,reflectToAttribute:!1,type:"number"},selectionStart:{value:0,reflectToAttribute:!1,type:"number"},spellCheck:{value:!1,type:"boolean"},type:{value:"textarea",type:"string",defaultReflectToAttribute:!0,readonly:!0},verticalScrollBarVisibility:{type:"string",value:"auto",allowedValues:["auto","disabled","hidden","visible"]},wrap:{value:"soft",allowedValues:["hard","soft","off"],type:"string"}}}static get styleUrls(){return["smart.textbox.css","smart.multilinetextbox.css"]}static get listeners(){return{"document.mousemove":"_documentSelectionOutsideHandler","container.resize":"_handleScrollbarsDisplay","document.move":"_resizeMoveHandler","document.up":"_upHandler",focus:"_focusHandler","horizontalScrollBar.change":"_horizontalScrollbarHandler",keydown:"_keyDownHandler",mouseenter:"_mouseEventsHandler",mouseleave:"_mouseEventsHandler",resize:"_handleScrollbarsDisplay","resizeElement.down":"_resizeDownHandler",styleChanged:"_handleScrollbarsDisplay","input.change":"_textBoxChangeHandler","input.focus":"_focusHandler","input.blur":"_blurHandler","input.keydown":"_textBoxKeyDownHandler","input.keyup":"_keyUpHandler","input.paste":"_textBoxChangeHandler","input.select":"_textBoxSelectHandler","input.touchmove":"_inputTouchmoveHandler","input.touchstart":"_inputTouchstartHandler",wheel:"_mouseWheelHandler","verticalScrollBar.change":"_verticalScrollbarHandler"}}attached(){const e=this;super.attached(),e._scrollView||(e._scrollView=new Smart.Utilities.Scroll(e.$.input,e.$.horizontalScrollBar,e.$.verticalScrollBar))}detached(){const e=this;super.detached(),e._scrollView&&(e._scrollView.unlisten(),delete e._scrollView)}static get requires(){return{"Smart.ScrollBar":"smart.scrollbar.js"}}template(){return'<div id="container" role="presentation">\n                    <span id="label" class="smart-label">[[label]]</span>\n                    <div id="innerContainer" class="smart-inner-container" role="presentation">\n                            <textarea class="smart-input" id="input"\n                                autocapitalize="[[autoCapitalize]]"\n                                autocomplete="off"\n                                cols="[[cols]]"\n                                disabled="[[disabled]]"\n                                maxlength="[[maxLength]]"\n                                minlength="[[minLength]]"\n                                name="[[name]]"\n                                placeholder="[[placeholder]]"\n                                readonly="[[readonly]]"\n                                required="[[required]]"\n                                rows="[[rows]]"\n                                spellcheck="[[spellCheck]]"\n                                wrap="[[wrap]]"\n                                aria-label="[[placeholder]]"\n                                autocomplete="[[inputPurpose]]"></textarea>\n                            <smart-scroll-bar id="verticalScrollBar" theme="[[theme]]" right-to-left="[[rightToLeft]]" animation="[[animation]]" disabled="[[disabled]]" orientation="vertical"></smart-scroll-bar>\n                            <smart-scroll-bar id="horizontalScrollBar" theme="[[theme]]" right-to-left="[[rightToLeft]]" animation="[[animation]]" disabled="[[disabled]]"></smart-scroll-bar>\n                            <div id="resizeElement" class="smart-resize-element" aria-label="Resize"></div>\n\n                            <textarea id="textBoxHidden"\n                            class="smart-text-box-hidden"\n                            autocapitalize="[[autoCapitalize]]"\n                            autocomplete="off"\n                            cols="[[cols]]"\n                            disabled="[[disabled]]"\n                            inner-h-t-m-l="[[value]]"\n                            maxlength="[[maxLength]]"\n                            minlength="[[minLength]]"\n                            name="[[name]]"\n                            placeholder="[[placeholder]]"\n                            readonly="[[readonly]]"\n                            required="[[required]]"\n                            rows="[[rows]]"\n                            spellcheck="[[spellCheck]]"\n                            wrap="[[wrap]]"></textarea>\n                    </div>\n                    <span id="hint" class="smart-hidden smart-hint">[[hint]]</span>\n                </div>'}propertyChangedHandler(e,t,n){const a=this;switch(e){case"autoExpand":a._autoExpandUpdate();break;case"displayMode":switch(n){case"escaped":a.$.input.value=a._toEscapedDisplayMode(a.value);break;default:a.$.input.value=a.value=a._toDefaultDisplayMode(a.$.input.value)}a._autoExpandUpdate(),a._handleScrollbarsDisplay();break;case"value":switch(a._preventProgramaticValueChange?(a._userValue="escaped"===a.displayMode?a._toDefaultDisplayMode(a.$.input.value):a.$.input.value,a._programmaticValue=n):a._userValue=a._programmaticValue=n,a.displayMode){case"escaped":a.$.input.value=a._toEscapedDisplayMode(a._userValue);break;default:a.$.input.value=a._userValue}a._oldValue=t,a._autoExpandUpdate(),a._handleScrollbarsDisplay();break;case"horizontalScrollBarVisibility":case"verticalScrollBarVisibility":case"singleLine":case"wrap":case"resizable":case"placeholder":a._autoExpandUpdate(),a._handleScrollbarsDisplay();break;case"selectionEnd":case"selectionStart":a._handleSelectedText();break;case"rows":case"cols":a._updateSizeRowsCols();break;case"disabled":a._setFocusable(),a._ariaPropertyChangedHandler("disabled",n);break;case"animation":break;case"readonly":a._ariaPropertyChangedHandler("readonly",n);break;default:super.propertyChangedHandler(e,t,n)}}selection(e){const t=this;let n=t.$.input.selectionStart,a=t.$.input.selectionEnd,i=t.value;return"escaped"===t.displayMode?(i=t.$.input.value.substring(n,a),"escaped"===e?i:t._toDefaultDisplayMode(i)):"escaped"===e?(i=i.substring(n,a),t._toEscapedDisplayMode(i)):(i=i.substring(n,a),i)}select(e,t){const n=this,a=Array.from(arguments).slice(0,2);let i,o;for(let r in a)a[r]=parseInt(a[r])||0;return 2===a.length?(i=Math.min([e,t]),o=Math.max([e,t])):i=a[0],2===a.length?(i=parseInt(i),i=i>0?i<n.$.input.length?n.$.input.length:i:0,o<i?o=i:o>n.$.input.length&&(i=0),n.$.input.focus(),void n.$.input.setSelectionRange(i,o)):1===a.length?(n.$.input.focus(),void n.$.input.setSelectionRange(i,i+1)):void n.$.input.select()}_autoExpandUpdate(){const e=this,t=e.$.input,n=e.$.textBoxHidden,a=e.$.verticalScrollBar;if(!e.autoExpand)return void(t.style.height=a.style.height=n.style.height=null);const i=parseFloat(window.getComputedStyle(e).getPropertyValue("max-height"));n.style.height=0,n.value=t.value;let o=0;e.resizeTrigger&&(o=e.resizeTrigger.clientHeight,o===e.clientHeight&&(o=0)),t.style.height=a.style.height=(isNaN(i)?n.scrollHeight:Math.min((i||0)-o,n.scrollHeight))+"px"}_blurHandler(){const e=this;e._outsideAutoScroll&&clearInterval(e._outsideAutoScroll),e.removeAttribute("focus"),e._preventProgramaticValueChange=!1,e._oldValue=e.value,e.value=e._userValue||e.value,e.$.fireEvent("blur")}_createElement(){const e=this;e.$.input.id||(e.$.input.id=e.id+"Input"),e.autoFocus&&(navigator.userAgent.match(/Edge/)?setTimeout(function(){e.$.input.focus(),e.setAttribute("focus","")},10):(e.$.input.focus(),e.setAttribute("focus","")));const t=e.$.input.innerHTML;e.value?e.$.input.innerHTML="escaped"===e.displayMode?e._toEscapedDisplayMode(e.value):e.value:t.length>0&&"escaped"===e.displayMode?(e.value=t,e.$.input.innerHTML=e._toEscapedDisplayMode(t)):t.length>0&&(e.value=t),e._setFocusable(),e._syncTextBoxContentOnInitialization(),e._scrollView=new Smart.Utilities.Scroll(e.$.input,e.$.horizontalScrollBar,e.$.verticalScrollBar),e._autoExpandUpdate(),e._handleScrollbarsDisplay(),e._initializationValue=e._oldValue=e.value,e.value.length>0?e.$.addClass("has-value"):e.$.removeClass("has-value"),e._handleHintContainer(),e.setAttribute("role","textbox"),e.setAttribute("aria-multiline",!0),e.setAttribute("aria-describedby",e.$.hint.id),e.setAttribute("aria-labelledby",e.$.label.id),e.$.verticalScrollBar.setAttribute("aria-controls",e.$.input.id),e.$.horizontalScrollBar.setAttribute("aria-controls",e.$.input.id)}_handleScrollbarsDisplay(e){const t=this,n=t.$.input;requestAnimationFrame(()=>{switch(t._autoExpandUpdate(),t.horizontalScrollBarVisibility){case"disabled":t.$container.addClass("hscroll"),t.$.horizontalScrollBar.disabled=!0;break;case"hidden":t.$container.removeClass("hscroll");break;case"visible":t.$container.addClass("hscroll"),t._scrollView.scrollWidth=n.scrollWidth-n.clientWidth,t._scrollView.scrollTo(t.$.input.scrollLeft,!0),t.$.horizontalScrollBar.disabled=!1;break;default:n.scrollWidth>n.clientWidth?(t.$container.addClass("hscroll"),t._scrollView.scrollWidth=n.scrollWidth-n.clientWidth,e&&"resize"===e.type?t.$.input.scrollLeft=t._scrollView.scrollLeft:t._scrollView.scrollTo(t.$.input.scrollLeft,!0)):t.$container.removeClass("hscroll"),t.$.horizontalScrollBar.disabled=!1}switch(t.verticalScrollBarVisibility){case"disabled":t.$container.addClass("vscroll"),t.$.verticalScrollBar.disabled=!0;break;case"hidden":t.$container.removeClass("vscroll");break;case"visible":t.$container.addClass("vscroll"),t._scrollView.scrollHeight=n.scrollHeight-n.clientHeight,t._scrollView.scrollTo(t.$.input.scrollTop),t.$.verticalScrollBar.disabled=!1;break;default:n.scrollHeight>n.clientHeight?(t.$container.addClass("vscroll"),t._scrollView.scrollHeight=n.scrollHeight-n.clientHeight,e&&"resize"===e.type?t.$.input.scrollTop=t._scrollView.scrollTop:t._scrollView.scrollTo(t.$.input.scrollTop)):t.$container.removeClass("vscroll"),t.$.verticalScrollBar.disabled=!1}})}_focusHandler(e){const t=this;if(!t.disabled){if(e.target===t)return t.$.input.focus(),void(t._edgeSelect=!1);if(t.setAttribute("focus",""),t.selectAllOnFocus)if(navigator.userAgent.match(/Edge/)){const n=t.$.input.scrollTop;if(t._edgeSelect)return void(t._edgeSelect=!1);setTimeout(function(){t._edgeSelect=!0,t.$.input.select(),t.$.input.scrollTop=n},5)}else t.$.input.select();t.$.fireEvent("focus")}}_getScrollLeft(e,t){const n=this;return n.rightToLeft&&(Smart.Utilities.Core.Browser.Chrome?(t||(t=n.$.input.scrollWidth-n.$.input.offsetWidth),e=t-e):e*=-1),e}_horizontalScrollbarHandler(e){const t=this;t.disabled||"hidden"===t.horizontalScrollBarVisibility||"disabled"===t.horizontalScrollBarVisibility||(e.stopPropagation(),t.$.input.scrollLeft=t._getScrollLeft(e.detail.value))}_keyDownHandler(e){const t=this,n=e.key,a=e.shiftKey,i=e.ctrlKey,o=t.$.input.value;function r(l){let s=t.$.input.selectionStart,c=t.$.input.selectionEnd,u=t.$.input.value;e.preventDefault(),t.$.input.value=u.substring(0,s)+l+u.substring(c,u.length),t.value=t._toDefaultDisplayMode(t.$.input.value),t.$.input.selectionStart=s+2,t.$.input.selectionEnd=s+2}if(t.allowVerticalScrollbar&&t.$.input.selectionEnd>t.$.input.value.length-5&&t._scrollView.scrollTo(t._scrollView.scrollTop+(e.deltaY<0?-t.offsetHeight:t.offsetHeight)),n.indexOf("Arrow")>-1)e.stopPropagation();else switch(n){case"Enter":if("newLine"===t.enterKeyBehavior&&!i&&!a||"newLine"!==t.enterKeyBehavior&&(i||a)){"escaped"===t.displayMode&&r("\\n");break}e.preventDefault(),t._userValue="escaped"===t.displayMode?t._toDefaultDisplayMode(t.$.input.value):t.$.input.value,t.value=t._userValue,("submit"===t.enterKeyBehavior||"clearOnSubmit"===t.enterKeyBehavior||""!==o&&t._userValue!==t._oldValue)&&t.$.fireEvent("change",{oldValue:t._oldValue,value:o,type:"submit"}),"clearOnSubmit"===t.enterKeyBehavior&&(t.$.input.value=""),t._oldValue=t.value=t._toDefaultDisplayMode(t.$.input.value),t._submitted=!0,"escaped"===t.displayMode&&t.enterKeyBehavior.toLowerCase().indexOf("submit")<0&&!i&&!a&&r("\\n"),("submit"===t.enterKeyBehavior||"newLine"===t.enterKeyBehavior&&i)&&t.$.input.blur();break;case"Escape":if("none"===t.escKeyMode)return;switch(t.escKeyMode){case"none":break;case"clearValue":t.value=t.$.input.value="";break;case"previousValue":t.$.input.value="escaped"===t.displayMode?t._toEscapedDisplayMode(t._oldValue):t._oldValue}break;case" ":"escaped"===t.displayMode&&r("\\s");break;case"Backspace":if("escaped"===t.displayMode&&t.$.input.selectionStart===t.$.input.selectionEnd){let l=t.$.input.selectionStart;"\\"!==o[l-2]||"s"!==o[l-1]&&"n"!==o[l-1]||(t.$.input.value=t.$.input.value.substring(0,l-2)+t.$.input.value.substring(l-2,t.$.input.value.length),t.$.input.selectionStart=l-2)}t._scrollView&&t._handleScrollbarsDisplay()}}_keyUpHandler(e){const t=this;switch(e.key){case"ArrowLeft":case"ArrowUp":case"ArrowDown":t._handlePointerInEscapedSymbol();break;case"ArrowRight":t._handlePointerInEscapedSymbol("next")}t._userValue="escaped"===t.displayMode?t._toDefaultDisplayMode(t.$.input.value):t.$.input.value,t._submitKeyUpHandler()}_textBoxKeyDownHandler(e){const t=this,n=e.key;t._scrollView&&t._handleScrollbarsDisplay(),t.value&&t.value.length>0?t.$.addClass("has-value"):t.$.removeClass("has-value"),-1===["Enter","Escape"].indexOf(n)&&(t._preventProgramaticValueChange=!0),["ArrowLeft","ArrowUp","ArrowDown","ArrowRight"].indexOf(n)>-1&&t._scrollView.scrollTo(t.$.input.scrollTop),["PageUp","PageDown"].indexOf(n)>-1&&Smart.Utilities.Core.Browser.Chrome&&("PageUp"===e.key&&(t.$.input.setSelectionRange(0,0),t.$.input.scrollTop=0),"PageDown"===e.key&&(t.$.input.setSelectionRange(t.$.input.value.length,t.$.input.value.length),t.$.input.scrollTop=t._scrollView.verticalScrollBar.max),e.preventDefault())}_mouseWheelHandler(e){const t=this;t.disabled||t.$.verticalScrollBar.disabled||(t._scrollView.scrollTo(t._scrollView.scrollTop+(e.deltaY<0?-t.offsetHeight:t.offsetHeight)),t.$.input.scrollTop+=e.deltaY<0?-t.offsetHeight:t.offsetHeight,t.$.input.scrollTop>0&&e.preventDefault())}_syncTextBoxContentOnInitialization(){const e=this;let t;t=""===e.value?e.innerHTML:e.value,"escaped"!==e.displayMode?e.$.input.value=e.value=e._initializationValue=t:t.match(/\r\n|\n\r|\n|\r|\s|\t|\f|\r/g)?(e.value=e._initializationValue=t,e.$.input.value=e._toEscapedDisplayMode(t)):(e.value=e._initializationValue=e._toDefaultDisplayMode(t),e.$.input.value=t)}_textBoxChangeHandler(e){const t=this,n=e.clipboardData||e.originalEvent&&e.originalEvent.clipboardData||window.clipboardData,a=t.value;if("escaped"===t.displayMode){const i=t.$.input.selectionStart,o=t.$.input.selectionEnd;if(n){let r=n.getData("text"),l=t.$.input.value;e.preventDefault(),r=t._toEscapedDisplayMode(r),t.$.input.value=l.substring(0,i)+r+l.substring(o,l.length)}t.value=t._toDefaultDisplayMode(t.$.input.value)}else t.value=t.$.input.value;t._handleScrollbarsDisplay(),t.value.length>0?t.$.addClass("has-value"):t.$.removeClass("has-value"),n||t.$.fireEvent("change",{value:t.value,oldValue:a,type:"blur"}),t._handleHintContainer()}_inputTouchmoveHandler(e){const t=this;if((t._resizeStarted||t._touchmoveInside)&&e.cancelable)return e.preventDefault(),void e.stopPropagation();const n=t.$.container.classList.contains("vscroll"),a=t._touchCoords;if(!t.$.container.classList.contains("hscroll")&&!n||!a)return;const i=t._scrollView,o=e.touches[0];let r,l,s,c;t._touchCoords=[o.pageX,o.pageY],n?(r=i.scrollTop,l=i.scrollHeight,s=o.pageY,c=a[1]):(r=i.scrollLeft,l=i.scrollWidth,s=o.pageX,c=a[0]);const u=parseFloat(s.toFixed(5)),p=parseFloat(c.toFixed(5));0===r&&u>=p||r===l&&u<=p||(s!==c&&(t._touchmoveInside=!0),e.cancelable&&(e.preventDefault(),e.stopPropagation()))}_inputTouchstartHandler(e){const t=e.touches[0];this._touchCoords=[t.pageX,t.pageY]}_resizeDownHandler(){const e=this;!e.disabled&&e.resizable&&(e._resizeStarted=!0,e.$container.addClass("smart-resize"),e.readonly||e.$.input.setAttribute("readonly",""))}_resizeMoveHandler(e){const t=this;if(t.disabled||!t.resizable||!t._resizeStarted)return;const n=t.getBoundingClientRect(),o=t.rightToLeft?n.width+n.left-e.clientX:e.clientX-n.left,r=e.clientY-n.top;o>50&&(t.style.width=o+"px"),r>50&&(t.style.height=r+"px")}_updateSizeRowsCols(){const e=this;e.$.container.removeAttribute("style"),setTimeout(function(){if(!("disabled"!==e.horizontalScrollBarVisibility&&"hidden"!==e.horizontalScrollBarVisibility||"disabled"!==e.verticalScrollBarVisibility&&"hidden"!==e.verticalScrollBarVisibility))return;const t=e.getBoundingClientRect();e.$.container.style.width=t.width+"px",e.$.container.style.height=t.height+"px"},0)}_upHandler(e){const t=this;delete t._touchCoords,delete t._touchmoveInside,t._selectionStarted=!1,t.disabled||(e.originalEvent.target!==t.$.input?(t.$container.removeClass("smart-resize"),t.readonly||t.$.input.removeAttribute("readonly"),t._resizeStarted&&t.$.input.focus(),t._resizeStarted=!1):t._handlePointerInEscapedSymbol())}_verticalScrollbarHandler(e){const t=this;t.disabled||"disabled"===t.verticalScrollBarVisibility||"hidden"===t.verticalScrollBarVisibility||(e.stopPropagation(),t.$.input.scrollTop=e.detail.value)}_documentDownHandler(e){const t=this;t._selectionStarted=!1,e.originalEvent&&t.$.input.contains(e.originalEvent.target)&&(t._selectionStarted=!0,t._selectionStartTime=new Date,t._pointerDown={pageX:e.pageX,pageY:e.pageY},t._edgeSelect=!1)}_documentSelectionOutsideHandler(e){const t=this;if(clearInterval(t._outsideAutoScroll),!t._selectionStarted)return;const n=t.$.input.getBoundingClientRect();function o(r){const l=t.getBoundingClientRect(),s=document.documentElement,c=r?"Left":"Top";(r?l.left+s.scrollLeft-e.pageX:l.top+s.scrollTop-e.pageY)>0?(t.$.input["scroll"+c]-=10,t._scrollView["scroll"+c]-=10):(t.$.input["scroll"+c]+=10,t._scrollView["scroll"+c]+=10)}e.pageY>n.y+10&&e.pageY<n.y+n.height-10||!(new Date-t._selectionStartTime<300)&&(Math.abs(t._pointerDown.pageX-e.pageX)>=3||Math.abs(t._pointerDown.pageY-e.pageY)>=3)&&(t._outsideAutoScroll=setInterval(function(){o(),o(!0)},10))}_selectStartHandler(){}_styleChangedHandler(){}})},5839:()=>{Smart("smart-base-progress-bar",class extends Smart.BaseElement{static get properties(){return{indeterminate:{value:!1,type:"boolean"},inverted:{value:!1,type:"boolean"},formatFunction:{value:null,type:"function"},max:{value:100,type:"number"},min:{value:0,type:"number"},showProgressValue:{value:!1,type:"boolean"},value:{value:0,type:"number?"}}}static get styleUrls(){return["smart.progressbar.css"]}render(){const e=this;e.$.label.id||(e.$.label.id=e.id+"Label"),e.setAttribute("role","progressbar"),e.setAttribute("aria-labelledby",e.$.label.id),e.setAttribute("aria-valuemin",e.min),e.setAttribute("aria-valuemax",e.max),null===e.value||e.indeterminate||(e.$.value.style.transition="none"),e._updateProgress(),requestAnimationFrame(()=>e.$.value.style.transition=""),super.render()}propertyChangedHandler(e,t,n){super.propertyChangedHandler(e,t,n);const a=this;a._updateProgress(),"value"===e?a.$.fireEvent("change",{value:n,oldValue:t,changeType:"api"}):"min"!==e&&"max"!==e||a.setAttribute("aria-value"+e,n)}_updateProgress(){const e=this,t=e.value;null===t||e.indeterminate?e.removeAttribute("aria-valuenow"):e.setAttribute("aria-valuenow",t)}get _percentageValue(){const e=this,t=Math.max(e.min,e.max),n=Math.min(e.min,e.max);return(Math.min(t,Math.max(n,e.value))-n)/(t-n)}}),Smart("smart-circular-progress-bar",class extends Smart.BaseProgressBar{template(){return'<div id="container" role="presentation">\n                    <svg width="100%" height="100%" viewPort="0 0 100 100" viewBox="0 0 100 100" role="presentation" aria-hidden="true">\n                        <circle id="value" class="smart-value-path" r="50" cx="50" cy="50" transform="rotate(270 50 50)"></circle>\n                        <circle id="value" class="smart-value" r="50" cx="50" cy="50" transform="rotate(270 50 50)"></circle>\n                    </svg>\n                    <div class="smart-label-container" role="presentation">\n                        <content></content>\n                        <span id="label" class="smart-label"></span>\n                    </div>\n                </div>'}static get listeners(){return{resize:"_resizeHandler"}}render(){const e=this;e.$.container.style.width=e.$.container.style.height=Math.min(e.offsetWidth,e.offsetHeight)+"px",e.$.hasClass("echo-animation")&&(e.value=e.max,e._updateProgress()),super.render()}_resizeHandler(){this.refresh()}refresh(){const e=this;e.$.container.style.width=e.$.container.style.height=Math.min(e.offsetWidth,e.offsetHeight)+"px"}_updateProgress(){var e=()=>super._updateProgress,t=this;return H(function*(){e().call(t);const n=t,a=n.indeterminate?100*Math.PI:100*Math.PI-n._percentageValue*Math.PI*100,i=!!document.documentMode,o=!i&&!!window.StyleMedia;if(n.showProgressValue){const r=parseInt(100*n._percentageValue);n.$.label.innerHTML=r+"%",n.formatFunction&&(n.$.label.innerHTML=yield n.formatFunction(r))}else n.$.label.innerHTML="";if(i||o)return null===n.value||n.indeterminate?(n.$.value.style.strokeDashoffset="",void n.$.value.setAttribute("class","smart-value smart-value-animation-ms")):(n.$.value.setAttribute("class","smart-value"),void(n.$.value.style.strokeDashoffset=n.inverted&&!n.rightToLeft||!n.inverted&&n.rightToLeft?-a:a));n.$.value.style.strokeDashoffset=n.inverted&&!n.rightToLeft||!n.inverted&&n.rightToLeft?-a:a,null===n.value||n.indeterminate?n.$value.addClass("smart-value-animation"):n.$value.removeClass("smart-value-animation")})()}}),Smart("smart-progress-bar",class extends Smart.BaseProgressBar{static get properties(){return{orientation:{value:"horizontal",allowedValues:["horizontal","vertical"],type:"string"}}}template(){return'<div role="presentation">\n                    <div id="value" class="smart-value"></div>\n                    <div id="label" class="smart-label"></div>\n                </div>'}_updateProgress(){var e=()=>super._updateProgress,t=this;return H(function*(){e().call(t);const n=t;if(n.showProgressValue){const a=parseInt(100*n._percentageValue);n.$.label.innerHTML=a+"%",n.formatFunction&&(n.$.label.innerHTML=yield n.formatFunction(a))}else n.$.label.innerHTML="";null===n.value||n.indeterminate?n.$value.addClass("smart-value-animation"):n.$value.removeClass("smart-value-animation"),n.$.value.style.transform="horizontal"===n.orientation?"scaleX("+n._percentageValue+")":"scaleY("+n._percentageValue+")"})()}})},9135:()=>{Smart("smart-scroll-bar",class extends Smart.BaseElement{static get properties(){return{clickRepeatDelay:{type:"integer",value:50},largeStep:{type:"integer",value:100},min:{type:"integer",value:0},max:{type:"integer",value:1e3},mechanicalAction:{value:"switchWhileDragging",allowedValues:["switchUntilReleased","switchWhenReleased","switchWhileDragging"],type:"string"},orientation:{type:"string",value:"horizontal",allowedValues:["horizontal","vertical"]},step:{type:"integer",value:10},showButtons:{type:"boolean",value:!0,defaultReflectToAttribute:!0},value:{type:"integer",value:0}}}static get styleUrls(){return["smart.scrollbar.css"]}template(){return'<div id="container" class="smart-container" role="presentation">\n                    <div id="nearButton" class="smart-scroll-button smart-arrow-left" role="presentation" aria-hidden="true"></div>\n                    <div  id="track" class="smart-track" role="presentation">\n                        <div id="thumb" class="smart-thumb" role="presentation"></div>\n                    </div>\n                    <div id="farButton" class="smart-scroll-button smart-arrow-right" role="presentation" aria-hidden="true"></div>\n            </div>'}static get listeners(){return{"nearButton.click":"_nearButtonClickHandler","nearButton.down":"_startRepeat","nearButton.up":"_stopRepeat","nearButton.pointerenter":"_updateInBoundsFlag","nearButton.pointerleave":"_updateInBoundsFlag","farButton.click":"_farButtonClickHandler","farButton.down":"_startRepeat","farButton.up":"_stopRepeat","farButton.pointerenter":"_updateInBoundsFlag","farButton.pointerleave":"_updateInBoundsFlag","track.down":"_trackDownHandler","track.click":"_trackClickHandler","track.move":"_trackMoveHandler","thumb.down":"_dragStartHandler","document.move":"_dragHandler","document.up":"_dragEndHandler",up:"_dragEndHandler","document.selectstart":"_selectStartHandler",resize:"_resizeHandler"}}_updateInBoundsFlag(e){const n=e.target;n._isPointerInBounds=!0,-1!==e.type.indexOf("leave")&&(n._isPointerInBounds=!1),1!==("buttons"in e?e.buttons:e.which)&&this._stopRepeat(e)}_startRepeat(e){const t=this;if(t.disabled)return;const n=e.target;n._initialTimer||(n._initialTimer=setTimeout(function(){n._repeatTimer=setInterval(()=>{n._isPointerInBounds&&n.$.fireEvent("click",{buttons:"buttons"in e?e.buttons:e.which,clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY,screenX:e.screenX,screenY:e.screenY})},t.clickRepeatDelay)},3*t.clickRepeatDelay))}_stopRepeat(e){if(this.disabled)return;const t=e.target;t._repeatTimer&&(clearInterval(t._repeatTimer),t._repeatTimer=null),t._initialTimer&&(clearTimeout(t._initialTimer),t._initialTimer=null)}_calculateThumbSize(e){const t=this,n=t.max-t.min;let i=0;return n>=1&&("horizontal"===t.orientation?t.$.track.offsetWidth>10:t.$.track.offsetHeight>10)?(i=e/(n+e)*e,t.$.thumb.className.indexOf("smart-hidden")>=0&&t.$thumb.removeClass("smart-hidden")):t.$thumb.addClass("smart-hidden"),Math.max(10,Math.min(i,e))}_dragStartHandler(e){const t=this;t.disabled||(t.thumbCapture=!0,t.dragStartX=e.clientX,t.dragStartY=e.clientY,t.dragStartValue=t.value,e.stopPropagation(),e.preventDefault())}_dragHandler(e){const t=this;if(!0!==t.thumbCapture)return;t._isThumbDragged=!0;const n=(t.max-t.min)/(t.scrollBarSize-t.thumbSize),a="horizontal"===t.orientation?(e.clientX-t.dragStartX)*n:(e.clientY-t.dragStartY)*n;let i=a;t.rightToLeft&&"horizontal"===t.orientation&&(i=-a),t._updateValue(t.dragStartValue+i),e.stopPropagation(),e.preventDefault(),e.originalEvent&&(e.originalEvent.stopPropagation(),e.originalEvent.preventDefault())}_dragEndHandler(e){const t=this;t._trackDownTimer&&(clearInterval(t._trackDownTimer),t._trackDownTimer=null),t.thumbCapture&&(t.thumbCapture=!1,t._isThumbDragged=!1,"switchWhenReleased"===t.mechanicalAction?t._updateValue(t.dragStartValue,t.value):"switchUntilReleased"===this.mechanicalAction&&t._updateValue(t.dragStartValue),e.preventDefault(),e.stopPropagation(),e.originalEvent.preventDefault(),e.originalEvent.stopPropagation())}_farButtonClickHandler(){const e=this;if(e.disabled)return;const t=e.value;e._updateValue(e.value+("horizontal"===e.orientation&&e.rightToLeft?-1:1)*e.step),"switchUntilReleased"===e.mechanicalAction&&e._updateValue(t)}_nearButtonClickHandler(){const e=this;if(e.disabled)return;const t=e.value;e._updateValue(e.value-("horizontal"===e.orientation&&e.rightToLeft?-1:1)*e.step),"switchUntilReleased"===e.mechanicalAction&&e._updateValue(t)}propertyChangedHandler(e,t,n){super.propertyChangedHandler(e,t,n);const a=this;switch(e){case"min":case"max":case"orientation":case"showButtons":a._layout(),"min"===e?a.setAttribute("aria-valuemin",n):"max"===e?a.setAttribute("aria-valuemax",n):"orientation"===e&&a.setAttribute("aria-orientation",n);break;case"value":a._updateValue(t,n);break;default:a._layout()}}render(){const e=this;e.setAttribute("role","scrollbar"),e.setAttribute("aria-orientation",e.orientation),e.setAttribute("aria-valuemin",e.min),e.setAttribute("aria-valuemax",e.max),e.setAttribute("aria-valuenow",e.value),e._layout(),super.render()}_resizeHandler(){this._layout()}refresh(){this._layout()}beginUpdate(){this._isUpdating=!0}endUpdate(){this._isUpdating=!1,this.refreshValue()}refreshValue(){const e=this;e._layout(),e._updateValue(e.value)}_layout(){const e=this;e._isUpdating||(e.scrollBarSize="horizontal"===e.orientation?e.$.track.offsetWidth:e.$.track.offsetHeight,e.thumbSize=e._calculateThumbSize(e.scrollBarSize),"horizontal"===e.orientation&&e.$.thumb.style.width!==e.thumbSize+"px"?e.$.thumb.style.width=e.thumbSize+"px":"vertical"===e.orientation&&e.$.thumb.style.height!==e.thumbSize+"px"&&(e.$.thumb.style.height=e.thumbSize+"px"),"horizontal"===e.orientation?(e.$.nearButton.classList.contains("smart-arrow-up")&&e.$.nearButton.classList.remove("smart-arrow-up"),e.$.farButton.classList.contains("smart-arrow-down")&&e.$.farButton.classList.remove("smart-arrow-down"),e.$.nearButton.classList.contains("smart-arrow-left")||e.$.nearButton.classList.add("smart-arrow-left"),e.$.farButton.classList.contains("smart-arrow-right")||e.$.farButton.classList.add("smart-arrow-right")):(e.$.nearButton.classList.contains("smart-arrow-left")&&e.$.nearButton.classList.remove("smart-arrow-left"),e.$.farButton.classList.contains("smart-arrow-right")&&e.$.farButton.classList.remove("smart-arrow-right"),e.$.nearButton.classList.contains("smart-arrow-up")||e.$.nearButton.classList.add("smart-arrow-up"),e.$.farButton.classList.contains("smart-arrow-down")||e.$.farButton.classList.add("smart-arrow-down")),e._updateThumbPosition(),(e.value>e.max||e.value<e.min)&&e._updateValue(e.value,e.value>e.max?e.max:e.min))}_selectStartHandler(e){this.thumbCapture&&e.preventDefault()}_trackDownHandler(e){const t=this;e.target===t.$.track&&(t._trackDownTimer&&clearInterval(t._trackDownTimer),t.thumbCapture||(t._trackDownTimer=setInterval(function(){t._trackClickHandler(e)},t.clickRepeatDelay),e.stopPropagation(),e.preventDefault()))}_trackClickHandler(e){const t=this;if(t.disabled)return;if(t._isThumbDragged)return clearInterval(t._trackDownTimer),void(t._trackDownTimer=null);const n=t.$.thumb.getBoundingClientRect(),a=e.pageX-window.pageXOffset,i=e.pageY-window.pageYOffset,o=(t.rightToLeft?-1:1)*t.value;"horizontal"===t.orientation?a>(t._isThumbDragged?t.dragStartX:n.right)?t._updateValue(t.value+(t.rightToLeft?-1:1)*t.largeStep):a<(t._isThumbDragged?t.dragStartX:n.left)&&t._updateValue(t.value-(t.rightToLeft?-1:1)*t.largeStep):i>(t._isThumbDragged?t.dragStartY:n.bottom)?t._updateValue(t.value+t.largeStep):i<(t._isThumbDragged?t.dragStartY:n.top)&&t._updateValue(t.value-t.largeStep),"switchUntilReleased"===t.mechanicalAction&&t._updateValue(o)}_trackMoveHandler(e){"touchmove"===e.originalEvent.type&&e.originalEvent.preventDefault()}_updateValue(e,t){const n=this;if(!n._isUpdating&&(1===arguments.length&&(t=e,e=n.value),(void 0===t||isNaN(t))&&(t=n.min),t>n.max&&(t=n.max),t<n.min&&(t=n.min),n.value=t,e!==t)){if(n.setAttribute("aria-valuenow",t),n._updateThumbPosition(),n.thumbCapture&&"switchWhenReleased"===n.mechanicalAction)return;if(n.onChange)return void n.onChange({value:n.value,oldValue:e,min:n.min,max:n.max,context:n});n.$.fireEvent("change",{value:n.value,oldValue:e,min:n.min,max:n.max})}}_updateThumbPosition(){const e=this,t="horizontal"===e.orientation?e.$.track.offsetWidth:e.$.track.offsetHeight,n=e._calculateThumbSize(t);let i=(t-n)/(e.max-e.min)*(e.value-e.min);e.rightToLeft&&"horizontal"===e.orientation&&(i=(t-n)/(e.max-e.min)*(e.max-e.value-e.min)),i=Math.min(t-n,Math.max(0,i)),"vertical"===e.orientation&&e.$.thumb.style.top!==i+"px"?e.$.thumb.style.top=i+"px":"horizontal"===e.orientation&&e.$.thumb.style.left!==i+"px"&&(e.$.thumb.style.left=i+"px")}})},3911:()=>{Smart("smart-text-box",class extends Smart.ComboBox{static get properties(){return{autoFocus:{value:!1,type:"boolean"},autoComplete:{allowedValues:["none","manual","auto","inline"],type:"string",value:"manual"},displayMode:{value:"default",allowedValues:["default","escaped"],type:"string"},dropDownOpenMode:{allowedValues:["none","default","auto"],value:"default",type:"string"},enterKeyBehavior:{value:"submit",allowedValues:["submit","clearOnSubmit"],type:"string"},form:{value:"",type:"string"},hint:{value:null,type:"any"},maxLength:{value:null,type:"number?"},minLength:{value:2,type:"number"},messages:{extend:!0,value:{en:{missingReference:"{{elementType}}: Missing reference to {{files}}."}},type:"object"},required:{value:!1,type:"boolean"},requiredMessage:{value:"",type:"string"},selectAllOnFocus:{value:!1,type:"boolean"},selectionMode:{value:"zeroOrOne",allowedValues:["none","oneOrManyExtended","zeroOrMany","oneOrMany","zeroOrOne","one","checkBox","radioButton"],type:"string"},type:{value:"input",type:"string",defaultReflectToAttribute:!0,readonly:!0},value:{value:"",type:"string"}}}static get listeners(){return{"document.up":"_documentUpHandler",focus:"_focusHandler",keydown:"_keyDownHandler",mouseenter:"_mouseEventsHandler",mouseleave:"_mouseEventsHandler","input.blur":"_focusHandler","input.change":"_textBoxChangeHandler","input.focus":"_focusHandler","input.keyup":"_textBoxKeyUpHandler","input.paste":"_textBoxChangeHandler","input.select":"_textBoxSelectHandler","listBox.bindingComplete":"_bindingCompleteHandler"}}template(){return'<div id="container" role="presentation">\n                    <span id="label" inner-h-t-m-l="[[label]]" class="smart-label"></span>\n                    <div id="content" class="smart-content" role="presentation">\n                        <input class="smart-input" type="text" id="input"\n                            disabled="[[disabled]]"\n                            maxlength="[[maxLength]]"\n                            name="[[name]]"\n                            placeholder="[[placeholder]]"\n                            readonly="[[readonly]]"\n                            role="textbox"\n                            aria-label="[[placeholder]]"\n                            autocomplete="[[inputPurpose]]">\n                        <div id="autoCompleteString"></div>\n                        <div id="dropDownContainer" class="smart-drop-down smart-drop-down-container smart-visibility-hidden" role="presentation">\n                            <smart-list-box id="listBox"\n                                data-source="[[dataSource]]"\n                                unfocusable="true"\n                                disabled="[[disabled]]"\n                                display-loading-indicator="[[displayLoadingIndicator]]"\n                                display-member="[[displayMember]]"\n                                item-height="[[itemHeight]]"\n                                item-template="[[itemTemplate]]"\n                                item-measure-mode="[[itemMeasureMode]]"\n                                filter-callback="[[filterCallback]]"\n                                filter-mode="[[filterMode]]"\n                                loading-indicator-placeholder="[[loadingIndicatorPlaceholder]]"\n                                loading-indicator-position="[[loadingIndicatorPosition]]"\n                                placeholder="[[dropDownPlaceholder]]"\n                                readonly="[[readonly]]"\n                                right-to-left="[[rightToLeft]]"\n                                selection-mode="[[selectionMode]]"\n                                value-member="[[valueMember]]">\n                                <content></content>\n                            </smart-list-box>\n                        </div>\n                    </div>\n                    <span id="hint" class ="smart-hidden smart-hint"></span>\n                </div>'}propertyChangedHandler(e,t,n){const a=this;switch(e){case"autoComplete":a.$.listBox._filteredItems&&a.$.listBox._filteredItems.length!==a.$.listBox._items.length&&super._autoComplete(!0),a._setAriaAutocomplete();break;case"dataSource":case"valueMember":a._clearSelection(),a._setDropDownSize(),a._positionDetection.checkBrowserBounds("vertically"),a._positionDetection.positionDropDown(),a._positionDetection.checkBrowserBounds("horizontally");break;case"displayMember":case"inputMember":{const i=a.$.listBox;if(i.selectedIndexes.length){const o=i._items[i.selectedIndexes[0]][a.inputMember];a.$.listBox.$.filterInput.value=o,a.$.input.value="escaped"===a.displayMode?a._toEscapedDisplayMode(o):a._toDefaultDisplayMode(o),a.set("value",a._toDefaultDisplayMode(a.$.input.value))}break}case"displayMode":a.$.input.value="escaped"===n?a._toEscapedDisplayMode(a.value):a.value=a._toDefaultDisplayMode(a.$.input.value);break;case"dropDownOpenMode":a._setFocusable(),a.$dropDownContainer.addClass("smart-visibility-hidden"),a.opened=!1;break;case"value":(a.$.input!==document.activeElement||a.$.input===document.activeElement&&a.$.input.value===a._oldValue)&&(a.$.input.value="escaped"===a.displayMode?a._toEscapedDisplayMode(a.value):a.value,a._oldValue=a._changingOldValue=t),a.value||a.clearSelection(),n.length>0?a.$.addClass("has-value"):a.$.removeClass("has-value");break;case"hint":if(null===n)return a.$.hint.innerHTML="",void a.$.removeClass("invalid");a._handleHintContainer();break;default:super.propertyChangedHandler(e,t,n)}}static get requires(){return{"Smart.ComboBox":"smart.combobox.js"}}static get styleUrls(){return["smart.textbox.css"]}open(){const e=this;0===e.$.listBox.items.length&&"function"!=typeof e.dataSource||"none"===e.autoComplete||(0===e.$.input.value.length&&e.$.listBox._filteredItems&&e.$.listBox._filteredItems.length!==e.$.listBox._items.length?super._autoComplete(!0):super.open())}close(){const e=this;super.close(),e.$.autoCompleteString.textContent="",e.$.listBox._focusedItem&&(e.$.listBox._focusedItem._focused=!1),"none"!==e.autoComplete&&e.$.input._filteredItems&&e.$.input._filteredItems[0]&&e.$.input._filteredItems[0]!==e.$.input.value&&super._autoComplete(!0)}cloneNode(){const e=this;let t=HTMLElement.prototype.cloneNode.apply(e,Array.prototype.slice.call(arguments,0,1));return e.$.listBox&&(t.dataSource=e.dataSource),t}focus(){this.$.input.focus()}_setFocusable(){const e=this;e.disabled||e.unfocusable?e.$.input.tabIndex=-1:e.$.input.removeAttribute("tabindex")}reset(){const e=this;"escaped"===e.displayMode?(e.value=e._initializationValue,e.$.input.value=e._toEscapedDisplayMode(e._initializationValue)):e.$.input.value=e.value=e._initializationValue,!e.value&&e.$.listBox&&e.clearSelection()}_bindingCompleteHandler(){const e=this;e.$.listBox&&e.isRendered&&(e._setDropDownSize(),e._positionDetection.checkBrowserBounds())}_createElement(){const e=this;e._browserIsIEorEdge=Smart.Utilities.Core.Browser.IE||Smart.Utilities.Core.Browser.Edge,e.value&&(e.$.input.value="escaped"===e.displayMode?e._toEscapedDisplayMode(e.value):e.value),e.autoFocus&&(e.$.input.focus(),e.selectAllOnFocus&&e.$.input.select()),e._setDropDownSize(),e._handleSelectedText(),e._setFocusable(),e._initializationValue=e._oldValue=e._changingOldValue=e.value,e.value.length>0?e.$.addClass("has-value"):e.$.removeClass("has-value"),e._handleHintContainer(),e._setAriaRelations()}_focusHandler(e){const t=this;if(e.target===t&&t.hasAttribute("tabindex")&&(t.$.input.tabIndex=t.disabled||t.unfocusable?-1:t.tabIndex,t.removeAttribute("tabindex")),"blur"===e.type){if(t._isDropDownClicked||e.target===t)return;if(t.removeAttribute("focus"),t.$.autoCompleteString.textContent="",t.value.length>0?t.$.addClass("has-value"):t.$.removeClass("has-value"),("auto"===t.autoComplete||"inline"===t.autoComplete)&&t.$.input.value.length>0&&t.$.listBox._focusedItem&&t.$.listBox._focusedItem._focused){const n=t.$.listBox._focusedItem[t.inputMember];t.$.input.value="escaped"===t.displayMode?t._toEscapedDisplayMode(n):t._toDefaultDisplayMode(n),t.set("value",t._toDefaultDisplayMode(n))}return t._preventDropDownClose||t.close(),t._oldValue!==t.value&&t.$.fireEvent("change",{oldValue:t._oldValue,value:t.value}),void t.$.fireEvent("blur")}t.disabled||(t.setAttribute("focus",""),t._oldValue=t._changingOldValue=t.value,t.selectAllOnFocus&&t.$.input.select(),e.target===t&&t.$.input.focus(),!1!==t._canFireFocus&&(t._canFireFocus=!1,t.$.fireEvent("focus"),t._canFireFocus=!0))}_handlePointerInEscapedSymbol(e){const t=this;if("escaped"!==t.displayMode)return;let n=t.$.input.selectionStart,a=t.$.input.selectionEnd,i=t.$.input.value;if("\\"===i[n-1]&&i[n].match(/n|r|s|t|f/g)){if(n===a){let o="next"===e?1:-1;return t.$.input.selectionStart=n+o,void(t.$.input.selectionEnd=n+o)}t.$.input.selectionStart=n-1,"\\"===i[a-1]&&i[a].match(/n|r|s|t|f/g)&&(t.$.input.selectionEnd=a+1)}}_handleSelectedText(){const e=this;null===e.selectionStart||null===e.selectionEnd||e.selectionStart===e.selectionEnd||e.selectAllOnFocus||(e.selectionStart=e.selectionStart<0?0:e.selectionStart,e.selectionEnd=e.selectionEnd>e.value.length?e.value.length:e.selectionEnd,e.$.input.setSelectionRange(e.selectionStart,e.selectionEnd))}_handleHintContainer(){const e=this;if(!e.hint)return;const t=e.$.hint;"function"==typeof e.hint?e.hint(e.value,t)?e.$.addClass("invalid"):e.$.removeClass("invalid"):"string"==typeof e.hint&&(t.innerHTML=e.hint,e.$.removeClass("invalid"),e.hint.length>0&&!e.classList.contains("outlined")&&!e.classList.contains("underlined")&&t.classList.remove("smart-hidden"))}_keyDownHandler(e){const t=this;switch(t._showAutoCompleteHighlighter=!1,e.key){case"ArrowUp":case"ArrowDown":if(e.altKey)return e.preventDefault(),void("ArrowDown"===e.key?t.open():t.close());if(t.opened){if(e.preventDefault(),t.$.listBox._handleKeyStrokes(e.key),"inline"!==t.autoComplete)break;t._showAutoCompleteHighlighter=!0,super._updateAutoCompleteHelper()}break;case"PageUp":case"PageDown":e.preventDefault(),t.$.input.selectionStart=t.$.input.selectionEnd="PageUp"===e.key?0:t.$.input.value.length;break;case"Enter":{const n="function"==typeof t.$.listBox._focusedItem?t.$.listBox._focusedItem():t.$.listBox._focusedItem;if(t.opened&&n&&n._focused&&(t.$.listBox.$.filterInput.value=n[t.inputMember],t.$.input.value="escaped"===t.displayMode?t._toEscapedDisplayMode(n[t.inputMember]):t._toDefaultDisplayMode(n[t.inputMember]),t.select(n),t.close()),"default"!==t.enterKeyBehavior){const a=t.$.input.value;t._oldValue!==a&&(t.close(),t.$.fireEvent("change",{oldValue:t._oldValue,value:a,type:"submit"}),"clearOnSubmit"===t.enterKeyBehavior&&(Smart.MaskedTextBox&&t instanceof Smart.MaskedTextBox?(t._cleanMask(),t._setMaskToInput(),t.$.input.selectionStart=t.$.input.selectionEnd=0):t.$.input.value=""),t._oldValue=t._changingOldValue=t.value=t._toDefaultDisplayMode(t.$.input.value)),t._submitted=!0}break}case"Escape":if(t.$.dropDownContainer&&t.close(),t._closedFromKeyCombination=!0,"none"===t.escKeyMode)return;switch(t.escKeyMode){case"none":break;case"clearValue":t.value=t.$.input.value="";break;case"previousValue":t.$.input.value="escaped"===t.displayMode?t._toEscapedDisplayMode(t._oldValue):t._oldValue}break;case" ":"escaped"===t.displayMode&&function(n){let a=t.$.input.selectionStart,i=t.$.input.selectionEnd,o=t.$.input.value;e.preventDefault(),o=o.substring(0,a)+"\\s"+o.substring(i,o.length),t.value=t._toDefaultDisplayMode(o),t.$.input.value=o,t.$.input.selectionStart=t.$.input.selectionEnd=a+2}();break;case"Backspace":if("escaped"===t.displayMode&&t.$.input.selectionStart===t.$.input.selectionEnd){let n=t.$.input.selectionStart;"\\"!==t.$.input.value[n-2]||"s"!==t.$.input.value[n-1]&&"n"!==t.$.input.value[n-1]||(t.$.input.value=t.$.input.value.substring(0,n-2)+t.$.input.value.substring(n-2,t.$.input.value.length),t.$.input.selectionStart=n-2)}}}_keyUpHandler(e){const t=this;if(!t.disabled&&"Escape"!==e.key&&e.target!==t.$.listBox.$.filterInput&&(e.target===t.$.input&&"oneOrManyExtended"===t.selectionMode&&(t.$.listBox._keysPressed[e.key]=!1),t.$.input)){const n=t.$.input.value;t._changingOldValue!==n&&t.$.fireEvent("changing",{oldValue:t._changingOldValue,value:n}),t._changingOldValue=n}}_listBoxItemClickHandler(e){const t=this,n=e.detail;if(super._listBoxItemClickHandler(e),n.selected){if("escaped"===t.displayMode){const a=t.$.input.value;t.value=t._toDefaultDisplayMode(a),t.$.input.value=a}else t.value=t.$.input.value;t._oldValue!==t.value&&(t.$.fireEvent("change",{oldValue:t._oldValue,value:t.value}),t.$.input.focus())}}_submitKeyUpHandler(){const e=this;e._submitted&&("clearOnSubmit"===e.enterKeyBehavior&&(e.$.input.selectionStart=e.$.input.selectionEnd=0),e._submitted=!1)}_textBoxKeyUpHandler(e){const t=this;if(t.disabled||e.altKey||e.ctrlKey)return;if("escaped"===t.displayMode){const a=t.$.input.value;t.value=t._toDefaultDisplayMode(t.$.input.value),t.$.input.value=a}else t.value=t.$.input.value;let n;if(1===t.$.listBox.selectedIndexes.length&&(n=t.$.listBox.getItem(t.$.listBox.selectedValues[0]),t.value!==n[t.inputMember]&&t.unselect(n)),t._showAutoCompleteHighlighter||(t.$.autoCompleteString.textContent=""),"Alt"===e.key||"Control"===e.key||!t.opened&&"Escape"===e.key||"Enter"===e.key)t._closedFromKeyCombination=!1;else if(e.key&&e.key.indexOf("Arrow")>-1)t._handlePointerInEscapedSymbol("ArrowRight"===e.key?"next":void 0);else{if("none"!==t.autoComplete&&(t.$.input.value.length>0||"auto"===t.dropDownOpenMode)){const a=super._autoComplete.bind(t);if(t._autoCompleteTimer&&clearTimeout(t._autoCompleteTimer),0===t.$.listBox._items.length&&"function"!=typeof t.dataSource)return void t.close();t._autoCompleteTimer=setTimeout(function(){a(!0)},t.autoCompleteDelay)}else t.close();"Enter"===e.key&&t.value!=t.value&&t._browserIsIEorEdge&&(t.value=t.$.input.value,t.$.fireEvent("change",{oldValue:t._oldValue,value:t.value}))}}_listBoxChangeHandler(e){const t=this;if(e.stopPropagation(),e.detail.selected){const n=t.$.listBox._items[e.detail.index];let a="";n&&(a=n[t.inputMember]),t.$.listBox.$.filterInput.value=a,t.$.input.value="escaped"===t.displayMode?t._toEscapedDisplayMode(a):t._toDefaultDisplayMode(a),t.set("value",t._toDefaultDisplayMode(t.$.input.value))}"none"!==t.autoComplete&&"function"!=typeof t.dataSource&&t._autoComplete(!0)}_mouseEventsHandler(e){"mouseenter"===e.type?this.setAttribute("hover",""):this.removeAttribute("hover")}_textBoxChangeHandler(e){const t=this;if(e.stopPropagation(),"escaped"===t.displayMode){const n=t.$.input.value,a=t.$.input.selectionStart,i=t.$.input.selectionEnd,o=e.clipboardData||e.originalEvent&&e.originalEvent.clipboardData||window.clipboardData;if(o){let r=o.getData("text"),l=t.$.input.value;e.preventDefault(),r=t._toEscapedDisplayMode(r),t.$.input.value=l.substring(0,a)+r+l.substring(i,l.length)}t.value=t._toDefaultDisplayMode(t.$.input.value),t.$.input.value=n}else t.value=t.$.input.value;t._handleHintContainer()}_textBoxSelectHandler(){const e=this;e.disabled||(e.selectionStart=e.$.input.selectionStart,e.selectionEnd=e.$.input.selectionEnd)}_toEscapedDisplayMode(e){const t=[{key:/\r\n|\n\r|\n|\r/g,value:"\\n"},{key:/\s/g,value:"\\s"},{key:/\n/g,value:"\\n"},{key:/\t/g,value:"\\t"},{key:/\f/g,value:"\\f"},{key:/\r/g,value:"\\r"}];for(let n=0;n<t.length;n++)e=e.replace(t[n].key,t[n].value);return e}_toDefaultDisplayMode(e){e||(e="");const t=[{key:/\\s/g,value:" "},{key:/\\n/g,value:"\n"},{key:/\\t/g,value:"\t"},{key:/\\f/g,value:"\f"},{key:/\\r/g,value:"\r"}];for(let n=0;n<t.length;n++)e=e.replace(t[n].key,t[n].value);return e}_documentDownHandler(e){const t=this;if(t.disabled||t.readonly)return;let n=e.originalEvent.target;if(t.enableShadowDOM)if(n=e.originalEvent.composedPath()[0],null===t._dropDownParent)t._isDropDownClicked=n.closest(".smart-drop-down-container")===t.$.dropDownContainer;else{let a=n.getRootNode().host;a&&a.closest(".smart-drop-down-container")===t.$.dropDownContainer&&(t._isDropDownClicked=!0)}else t._isDropDownClicked=n.closest(".smart-drop-down-container")===t.$.dropDownContainer;(e.originalEvent.target.closest("smart-list-item")||t._isDropDownClicked)&&(t._preventDropDownClose=!0)}_documentMoveHandler(){}_documentUpHandler(e){const t=this;if(t.disabled)return;let n=t.enableShadowDOM?e.originalEvent.composedPath()[0]:e.originalEvent.target;if(n)if("escaped"===t.displayMode&&n===t.$.input&&t._handlePointerInEscapedSymbol(),t._isDropDownClicked||t.readonly)delete t._isDropDownClicked;else if(n!==t.$.input||"auto"!==t.dropDownOpenMode){for(;n;){if(n instanceof Smart.ListItem&&n.ownerListBox===t.$.listBox)return n.unselectable||n.disabled?void 0:(t.$.input.value="escaped"===t.displayMode?t._toEscapedDisplayMode(n[t.inputMember]):t._toDefaultDisplayMode(n[t.inputMember]),t.value=t.$.input.value,t.$.fireEvent("change",{oldValue:t._oldValue,value:t.value,type:"submit"}),t._oldValue=t._changingOldValue=t.value,"clearOnSubmit"===t.enterKeyBehavior&&(t.$.input.value=t.value=""),super._autoComplete(!0),t.close(),n="item",void t.$.input.focus());if(n===t.$.listBox)return void(n="listBox");n=n.parentElement}"listBox"===n||"item"===n||t.close()}else super._autoComplete(!0)}})},8466:()=>{Smart("smart-window",class extends Smart.ContentElement{static get properties(){return{collapsed:{value:!1,type:"boolean"},closeOnMaskClick:{value:!1,type:"boolean"},disableSnap:{value:!1,type:"boolean"},footerPosition:{value:"bottom",allowedValues:["bottom","none"],type:"string"},footerTemplate:{value:null,type:"any"},headerButtons:{value:["close","maximize","minimize"],type:"array"},headerPosition:{value:"top",allowedValues:["top","bottom","left","right","none"],type:"string"},headerTemplate:{value:null,type:"any"},label:{value:"",type:"string"},liveResize:{value:!1,type:"boolean"},maximized:{value:!1,type:"boolean"},modal:{value:!1,type:"boolean"},minimized:{value:!1,type:"boolean"},opened:{value:!1,type:"boolean"},pinned:{value:!1,type:"boolean"},resizeIndicator:{value:!1,type:"boolean"},resizeMode:{allowedValues:["none","horizontal","vertical","both","top","bottom","left","right"],value:"none",type:"string"},windowParent:{value:null,type:"any"}}}static get listeners(){return{"document.dragstart":"_dragStartHandler","document.focusin":"_documentFocusInEventHandler","document.move":"_documentMoveHandler","document.up":"_documentUpHandler","document.wheel":"_mouseWheelHandler","document.selectstart":"_documentSelectStartHandler",down:"_downHandler",focus:"_focusHandler",blur:"_focusHandler",move:"_moveHandler",keydown:"_keyDownHandler",keyup:"_keyUpHandler"}}get hasStyleObserver(){return!1}static get styleUrls(){return["smart.button.css","smart.window.css"]}template(){return'<div role="presentation">\n                    <div class="smart-content-container" id="container">\n                        <div id="headerSection" class="smart-header-section" role="heading" aria-level="1">\n                            <div id="header" class="smart-header" role="presentation">[[label]]</div>\n                            <div id="buttonsContainer" class="smart-buttons-container" role="presentation">\n                                <button id="pinButton" class="smart-button smart-element smart-pin-button" aria-label="Pin"></button>\n                                <button id="collapseButton" class="smart-button smart-element smart-collapse-button" aria-label="Collapse"></button>\n                                <button id="minimizeButton" class="smart-button smart-element smart-minimize-button"aria-label="Minimize"></button>\n                                <button id="maximizeButton" class="smart-button smart-element smart-maximize-button" aria-label="Maximize"></button>\n                                <button id="closeButton" class="smart-button smart-element smart-close-button" aria-label="Close"></button>\n                            </div>\n                        </div>\n                        <div class="smart-content" inner-h-t-m-l="[[innerHTML]]"><content></content></div>\n                        <div id="footer" class="smart-footer"></div>\n                    </div>\n                </div>'}propertyChangedHandler(e,t,n){const a=this;switch(e){case"collapsed":n?a.collapse(!0):a.expand(!0);break;case"disabled":case"unfocusable":a._setFocusable();break;case"headerTemplate":case"footerTemplate":a._applyLayoutTemplate(a.$[e.split(/[T]/)[0]],n);break;case"headerButtons":a._setHeaderButtons();break;case"headerPosition":{const i=a.minimized;a._preventEventFiring=!0,a.restore(),delete a._preventEventFiring,i&&a.minimize();break}case"label":a.$.header.innerHTML=a.label;break;case"maximized":n?a.maximize(!0):a.restore(e);break;case"modal":a._setModal(),a.setAttribute("aria-modal",n);break;case"minimized":n?a.minimize(!0):a.restore(e);break;case"opened":n?a.open(!0):a.close(!0);break;case"resizeMode":a.$.container.classList.remove("smart-window-resizing-bottom-right","smart-window-resizing-top-right","smart-window-resizing-top-left","smart-window-resizing-bottom-left","smart-window-resizing-top","smart-window-resizing-bottom","smart-window-resizing-left","smart-window-resizing-right");break;case"windowParent":a._setElementParent(n);break;default:super.propertyChangedHandler(e,t,n)}}ready(){super.ready(),this._windowParent={initialParent:this.parentElement}}render(){const e=this,t=e.animation;e.$.header.id||(e.$.header.id=e.id+"Header"),e.$.content.id||(e.$.content.id=e.id+"Content"),e.opened||(e.animation="none"),e._windowParent={initialParent:e.parentElement},e.$.addClass("smart-window"),e._createElement(),e._setElementParent(e.windowParent),e._setHeaderButtons(),e.headerTemplate&&e._applyLayoutTemplate(e.$.header,e.headerTemplate),e.footerTemplate&&e._applyLayoutTemplate(e.$.footer,e.footerTemplate),e.opened?e.open():e.close(),e.maximized&&e.maximize(!0),e.minimized&&e.minimize(!0),e.collapsed&&e.collapse(!0),e.pinned?e.pin():e.unpin(),e._setFocusable(),e.animation=t,e.setAttribute("aria-modal",e.modal),e.setAttribute("aria-labelledby",e.$.header.id),e._setupDismissTargets(),super.render()}refresh(){const e=this;e.headerTemplate&&e._applyLayoutTemplate(e.$.header,e.headerTemplate),e.footerTemplate&&e._applyLayoutTemplate(e.$.footer,e.footerTemplate),e.opened?e.open():e.close(),e.maximized&&e.maximize(!0),e.minimized&&e.minimize(!0),e.collapsed&&e.collapse(!0),e.pinned?e.pin():e.unpin()}static get requires(){return{"Smart.Button":"smart.button.js"}}_setFocusable(){const e=this;e.disabled||e.unfocusable?e.removeAttribute("tabindex"):e.setAttribute("tabindex",e.tabIndex>0?e.tabIndex:0)}appendChild(e){const t=this;if(!t.isCompleted||e instanceof HTMLElement&&e.classList.contains("smart-resize-trigger-container")){const n=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.appendChild.apply(t,n.concat(Array.prototype.slice.call(arguments)))}e?t.$.content.appendChild(e):t.error(t.localize("invalidNode",{elementType:t.nodeName.toLowerCase(),method:"appendChild",node:"node"}))}collapse(e){const t=this;!e&&t.collapsed||(t.collapsed=!0,t.$.fireEvent("collapse"),"left"===t.headerPosition||"right"===t.headerPosition?t.style.width="":t.style.height="")}close(e){const t=this;if(e||!t.$.hasClass("smart-visibility-hidden")){if(t.isCompleted){if(t.$.fireEvent("closing").defaultPrevented)return;t.$.addClass("smart-visibility-hidden"),t.opened=!1,t.isRendered&&t.$.fireEvent("close")}else t.$.addClass("smart-visibility-hidden"),t.opened=!1;t._setModal(),t.removeAttribute("ontop")}}attached(){super.attached();const e=this;e._windowParent.parent&&e._windowParent.parent!==e.getShadowRootOrBody()&&e._windowParent.parent.querySelectorAll("smart-window, smart-dialog-window, smart-progress-window, smart-wait-window, smart-alert-window, smart-prompt-window, smart-multiline-prompt-window")&&"static"===window.getComputedStyle(e._windowParent.parent).getPropertyValue("position")&&(e._windowParent.parent.style.position="relative"),e.opened&&e._modal&&e.parentElement.insertBefore(e._modal,e)}bringToFront(){const e=this;if(!e.parentElement)return;const t=e.parentElement.closest(".smart-window");if(t)return void t.bringToFront();const n=document.body.getElementsByClassName("smart-window");let a=[];for(let i=0;i<n.length;i++){const o=n[i];o.removeAttribute("ontop"),o.opened&&a.push(o)}1===a.length&&a[0]===e||e.setAttribute("ontop","")}clear(){const e=this;e.isCompleted&&"Smart-WINDOW"===e.nodeName&&(e.innerHTML=e.$.content.innerHTML="")}detached(){super.detached();const e=this;e._windowParent.parent&&!e._windowParent.parent.querySelectorAll("smart-window, smart-dialog-window, smart-progress-window, smart-wait-window, smart-alert-window, smart-prompt-window, smart-multiline-prompt-window")&&(e._windowParent.parent.style.position=""),e._modal&&e._modal.parentElement&&e._modal.parentElement.removeChild(e._modal),e._resizeDummy&&e._resizeDummy.parentElement&&e._handleWindowResizeDummy(),e._refreshMinimizedWindowsPosition()}expand(e){const t=this;(e||t.collapsed)&&(t.collapsed=!1,t.$.fireEvent("expand"),t.maximized?"left"===t.headerPosition||"right"===t.headerPosition?t.style.width=Math.max(t._windowParent.scrollElement.scrollWidth,t._windowParent.element.clientWidth)-t._windowParent.borderWidth+"px":t.style.height=Math.max(t._windowParent.scrollElement.scrollHeight,t._windowParent.element.clientHeight)-t._windowParent.borderWidth+"px":"left"===t.headerPosition||"right"===t.headerPosition?t.style.width=t.className.indexOf("smart-window-snapped-")<0&&t._dragDetails?t._dragDetails.width+"px":"":t.style.height=t.className.indexOf("smart-window-snapped-")<0&&t._dragDetails?t._dragDetails.height+"px":"")}maximize(e){const t=this;if(!e&&t.maximized)return;t.minimized&&t._restoreFromMinimization(e),t._setDragDetails("minimize"),"none"!==t.resizeMode&&t.$.container.classList.remove("smart-window-resizing-bottom-right","smart-window-resizing-top-right","smart-window-resizing-top-left","smart-window-resizing-bottom-left","smart-window-resizing-top","smart-window-resizing-bottom","smart-window-resizing-left","smart-window-resizing-right"),t._snapDummy&&t.$.hasClass("smart-window-snapped-"+t._snapDummy._position)&&t.classList.remove("smart-window-snapped-"+t._snapDummy._position),t.maximized=!0,t.$.fireEvent("maximize"),t.style.left=t.style.top=0,t.style.maxWidth=t.style.maxHeight="none";const n=t._windowParent.scrollElement.scrollHeight,a=t._windowParent.scrollElement.scrollWidth,i=t._windowParent.element.clientHeight,o=t._windowParent.element.clientWidth,r=Math.max(n,i),l=Math.max(a,o);"top"===t.headerPosition||"bottom"===t.headerPosition?(t.style.width=a>o?l-t._windowParent.borderWidth+"px":"100%",t.collapsed||(t.style.height=n>i?r-t._windowParent.borderWidth+"px":"100%")):(t.collapsed||(t.style.width=a>o?l-t._windowParent.borderWidth+"px":"100%"),t.style.height=n>i?r-t._windowParent.borderWidth+"px":"100%"),"100%"!==t.style.height&&t.addEventListener("transitionend",function s(){if(!t.maximized||!t.hasAnimation)return;const c=t._windowParent.scrollElement.scrollHeight,u=t._windowParent.element.clientHeight,p=Math.max(c,u);("top"===t.headerPosition||"bottom"===t.headerPosition)&&t.collapsed||(t.style.height=c>u?p-t._windowParent.borderWidth+"px":"100%"),t.removeEventListener("transitionend",s)})}minimize(e){const t=this;if(!e&&t.minimized)return;t.maximized&&(t._preventEventFiring=!0,t.restore(),delete t._preventEventFiring),t._setDragDetails(),t.minimized=!0,t.$.fireEvent("minimize"),t._snapDummy&&t.$.hasClass("smart-window-snapped-"+t._snapDummy._position)&&(t.$.removeClass("smart-window-snapped-"+t._snapDummy._position),t.style.right=t.style.top=t.style.left="");const n=t._getAllMinimizedWindows(t._windowParent.element);if(n.length>0){const a=n[n.length-1];t.style.left=(a.offsetLeft+a.offsetWidth+t._dragDetails.minWidth+10>t._windowParent.element.clientWidth?a.offsetLeft:a.offsetLeft+a.offsetWidth+5)+"px",t.style.top=a.offsetTop+"px"}else t.style.left="5px",t.style.top=t._windowParent.element.clientHeight+t._windowParent.scrollElement.scrollTop-t.$.headerSection.offsetHeight-5+"px";t.style.width="",t.style.height=t.$.headerSection.offsetHeight+"px"}_createElement(){this.setAttribute("role","dialog")}removeChild(e){const t=this;if(!t.isCompleted){const n=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.removeChild.apply(t,n.concat(Array.prototype.slice.call(arguments)))}e?t.$.content.removeChild(e):t.error(t.localize("invalidNode",{elementType:t.nodeName.toLowerCase(),method:"removeChild",node:"node"}))}restore(e){const t=this;if("maximized"===e||t.maximized?(t.maximized=!1,t.style.width=t.style.height=t.style.top=t.style.left=""):("minimized"===e||t.minimized)&&t._restoreFromMinimization(e),t._preventEventFiring||t.$.fireEvent("restore"),t.style.maxWidth=t.style.maxHeight="",t._dragDetails){if(t.style.left=Math.max(0,Math.min(t._dragDetails.windowX,t._windowParent.element.clientWidth-t._dragDetails.width))+"px",t.style.top=Math.max(0,Math.min(t._dragDetails.windowY,t._windowParent.scrollElement.scrollHeight-t._dragDetails.height))+"px",t.collapsed)return void("top"===t.headerPosition||"bottom"===t.headerPosition?t.style.width=t._dragDetails.width+"px":t.style.height=t._dragDetails.height+"px");t._dragDetails.resized&&(t.style.width=t._dragDetails.width+"px",t.style.height=t._dragDetails.height+"px")}}toggle(){const e=this;e.opened?e.close():e.open()}openModal(){this.modal=!0,this.open()}open(e){const t=this;if(e||t.$.hasClass("smart-visibility-hidden")){if(t.isCompleted){if(t.$.fireEvent("opening").defaultPrevented)return;t.$.removeClass("smart-visibility-hidden"),t.opened=!0,t.$.fireEvent("open")}else t.$.removeClass("smart-visibility-hidden"),t.opened=!0;t.bringToFront(),t._setModal(),t._handleActiveState(),t.hasAnimation?t.addEventListener("transitionend",n):n()}function n(a){if(!t.hasAnimation||a&&a.target===t){if(t.removeEventListener("transitionend",n),t._onOpenCallback)return void t._onOpenCallback();t.focus()}}}_setupDismissTargets(){const e=this;if(e.querySelector('[data-dismiss="modal"]')){const t=e.querySelectorAll('[data-dismiss="modal"]'),n=()=>{e.close()};for(let a=0;a<t.length;a++)t[a].removeEventListener("click",n,null),t[a].addEventListener("click",n)}}pin(){this.pinned=!0}unpin(){this.pinned=!1}_applyLayoutTemplate(e,t){const n=this;if(!t)return e.innerHTML="",void(e===n.$.header&&n.label&&(e.innerHTML=n.label));"content"in document.createElement("template")?(t instanceof HTMLTemplateElement||(t=document.getElementById(t)),null!==t&&"content"in t?(e.innerHTML="",e.appendChild(document.importNode(t.content,!0))):n.error(n.localize("invalidTemplate",{elementType:n.nodeName.toLowerCase(),property:e===n.$.footer?"footerTemplate":"headerTemplate"}))):n.error(n.localize("htmlTemplateNotSuported",{elementType:n.nodeName.toLowerCase()}))}_cancelDragging(e){const t=this;if(t._dragDetails&&t._dragDetails.started&&"drag"===t._dragDetails.type){if(!e){const n=t.getBoundingClientRect();e={pageX:n.left,pageY:n.top}}t.$.fireEvent("dragEnd",{left:e.pageX,top:e.pageY}),t.removeAttribute("dragged"),t._dragDetails.started=!1,delete t._mouseManipulation}}_documentFocusInEventHandler(e){const t=this;t._changingFocus&&(t.contains(e.target)||t.contains(e.composedPath()[0])||t.focus(),delete t._changingFocus)}_downHandler(e){const t=this;let n=Smart.Utilities.Core.isMobile?document.elementFromPoint(e.pageX-window.pageXOffset,e.pageY-window.pageYOffset):e.originalEvent.target;if((t.shadowRoot||t.isInShadowDOM)&&(n=e.originalEvent.composedPath()[0]),e.stopPropagation(),t.disabled||!Smart.Utilities.Core.isMobile&&1!==e.which)return;if(t._tabsWindow&&(t._tabsWindow._isAutoHideWindowClicked=!0),t.hasAttribute("ontop")||t.bringToFront(),n.closest&&n.closest(".smart-buttons-container")===t.$.buttonsContainer){if(t._buttonPressed=n.closest(".smart-button"),t._buttonPressed)return}else if(n.getRootNode()&&n.getRootNode().host&&(t._buttonPressed=n.getRootNode().host,t._buttonPressed.closest(".smart-buttons-container")===t.$.buttonsContainer))return;t._isWindowContentClicked=n.closest(".smart-content");let a=t.closest("smart-docking-layout");if(t.isInShadowDOM&&!a){let i=t.getRootNode().host;for(;i&&(a=i.closest("smart-docking-layout"),!a)&&i.getRootNode();)i=i.getRootNode().host}if(!(t instanceof Smart.TabsWindow&&a&&a.disabled)){if(t._handleActiveState(),!(t instanceof Smart.TabsWindow&&a))return n.closest(".smart-header-section")===t.$.headerSection&&(void 0===t._dblClickDetails&&(t._dblClickDetails={clicks:0}),clearTimeout(t._dblClickDetails.timeOut),t._dblClickDetails.clicks++,t._dblClickDetails.timeOut=setTimeout(function(){t._dblClickDetails&&(t._dblClickDetails.clicks=0)},300),2===t._dblClickDetails.clicks)?(t._headerDblCickHandler(e),void(t._dblClickDetails.clicks=0)):void(t.maximized||(Smart.Utilities.Core.isMobile&&t._moveHandler(e),!t.pinned&&!t.minimized&&t.$.container.className.indexOf("smart-window-resizing")<0&&(n=n.closest(".smart-header-section"),n&&n===t.$.headerSection&&(t._mouseManipulation=!0,t._setDragDetails("drag",e))),"none"!==t.resizeMode&&t.$.container.className.indexOf("smart-window-resizing")>-1&&(t._mouseManipulation=!0,t._setDragDetails("resize",e))));t.$.hasClass("smart-docking-layout-auto-hide-window")&&(Smart.Utilities.Core.isMobile&&t._moveHandler(e),"none"!==t.resizeMode&&t.$.container.className.indexOf("smart-window-resizing")>-1&&(t._mouseManipulation=!0,t._setDragDetails("resize",e)))}}_documentMoveHandler(e){const t=this;!t._dragDetails||!t._dragDetails.started||t.minimized||!t._mouseManipulation||Math.abs(e.pageX-t._dragDetails.x)<=5&&Math.abs(e.pageY-t._dragDetails.y)<=5||(t.hasAttribute("dragged")||t.hasAttribute("resized")||t.$.fireEvent(t._dragDetails.type+"Start",{left:e.pageX,top:e.pageY,width:t.offsetWidth,height:t.offsetHeight}),e.stopPropagation(),"drag"!==t._dragDetails.type||t.pinned?(t._dragDetails.resized=!0,t._resize(t._dragDetails.side,e),t._dragDetails.x=Math.max(t._windowParent.offsetLeft+t._dragDetails.left,Math.min(t._windowParent.offsetLeft+t._dragDetails.left+(t._dragDetails.side.toLowerCase().indexOf("left")>-1?0:t._dragDetails.newWidth),e.pageX)),t._dragDetails.y=Math.max(t._windowParent.offsetTop+t._dragDetails.top,Math.min(t._windowParent.offsetTop+t._dragDetails.top+(t._dragDetails.side.toLowerCase().indexOf("top")>-1?0:t._dragDetails.newHeight),e.pageY))):(t.setAttribute("dragged",""),t._snapDummy&&t.$.hasClass("smart-window-snapped-"+t._snapDummy._position)&&(t.$.removeClass("smart-window-snapped-"+t._snapDummy._position),t.style.right=t.style.top=t.style.left="",t.collapsed||(t.style.height=t._dragDetails.height+"px",t.style.width=t._dragDetails.width+"px")),t._drag(e,"both"),t._dragDetails.x=Math.max(t._windowParent.offsetLeft+t._dragDetails.offsetX-t._windowParent.scrollElement.scrollLeft,Math.min(t._windowParent.offsetLeft+t._windowParent.element.offsetWidth-(t._windowParent.element.offsetWidth-t.offsetLeft)+t._dragDetails.offsetX,e.pageX)),t._dragDetails.y=Math.max(t._windowParent.offsetTop+t._dragDetails.offsetY-t._windowParent.scrollElement.scrollTop,Math.min(t._windowParent.offsetTop+t._windowParent.element.offsetHeight-(t._windowParent.element.offsetHeight-t.offsetTop)+t._dragDetails.offsetY,e.pageY)),e.pageX>=t._windowParent.offsetLeft+t._windowParent.scrollElement.scrollWidth-1?t._handleSnapping("right"):e.pageY<=t._windowParent.offsetTop?t._handleSnapping("top"):e.pageX<=t._windowParent.offsetLeft?t._handleSnapping("left"):t._handleSnapping()))}_documentUpHandler(e){const t=this,n=t.shadowRoot||t.isInShadowDOM?e.originalEvent.composedPath()[0]:e.originalEvent.target;if(t.disabled)return t.removeAttribute("active"),delete t._buttonPressed,void delete t._isWindowContentClicked;if(t._dragDetails&&t._dragDetails.started&&(t.hasAttribute("resized")&&(t.$.fireEvent(t._dragDetails.type+"End",{left:e.pageX,top:e.pageY,width:t._dragDetails.newWidth,height:t._dragDetails.newHeight}),t.removeAttribute("resized"),t._handleWindowResizeDummy(),t.$.container.classList.remove("smart-window-resizing-bottom-right","smart-window-resizing-top-right","smart-window-resizing-top-left","smart-window-resizing-bottom-left","smart-window-resizing-top","smart-window-resizing-bottom","smart-window-resizing-left","smart-window-resizing-right")),setTimeout(function(){t.$.removeClass("no-transition")},20),t.hasAttribute("dragged")&&(t.$.fireEvent(t._dragDetails.type+"End",{left:e.pageX,top:e.pageY}),t.removeAttribute("dragged")),t._dragDetails.started=!1,delete t._mouseManipulation),t._snapDummy&&!t._snapDummy.classList.contains("smart-visibility-hidden")){switch(t._snapDummy._position){case"left":case"top":t.style.left=t.style.top="0",t.style.right="auto";break;case"right":t.style.left="auto",t.style.top=t.style.right="0"}t.style.width="top"===t._snapDummy._position?"100%":"50%",t.style.height="100%",t.$.addClass("smart-window-snapped-"+t._snapDummy._position),t._handleSnapping()}t._modal&&n===t._modal&&!t._isWindowContentClicked&&(t.closeOnMaskClick?t.close():t.focus()),t._isWindowButton(n)&&t.focus(),delete t._isWindowContentClicked,delete t._buttonPressed;const a=t.shadowRoot&&t._windowParent.element&&t._windowParent.element.getRootNode()?t._windowParent.element.getRootNode().activeElement:document.activeElement;if(!t.hasAttribute("active")||a===t||!n.closest)return;let i=n.closest(".smart-window");for(;i&&i!==t;)i=i.parentElement,i&&(i=i.closest(".smart-window"));t.opened&&i!==t&&t.removeAttribute("active")}_documentSelectStartHandler(e){this._dragDetails&&this._dragDetails.started&&e.preventDefault()}_drag(e,t){const n=this;if(!e||n.pinned||n.maximized)return;let a,i;n._dragDetails&&n._dragDetails.started||n._setDragDetails("drag",e),n.$.addClass("no-transition"),"object"==typeof e?(a=e.pageX-n._dragDetails.x,i=e.pageY-n._dragDetails.y):a=i=e;const o=Math.max(n._windowParent.element.clientHeight,n._windowParent.scrollElement.scrollHeight),r=Math.max(n._windowParent.element.clientWidth,n._windowParent.scrollElement.scrollWidth);switch(t){case"horizontal":n._dragDetails.windowX=Math.max(0,Math.min(n._dragDetails.windowX+a,r-n.offsetWidth)),n.style.left=n._dragDetails.windowX+"px";break;case"vertical":n._dragDetails.windowY=Math.max(0,Math.min(n._dragDetails.windowY+i,o-n.offsetHeight)),n.style.top=n._dragDetails.windowY+"px";break;case"both":n._dragDetails.windowX=Math.max(0,Math.min(n._dragDetails.windowX+a,r-n.offsetWidth)),n._dragDetails.windowY=Math.max(0,Math.min(n._dragDetails.windowY+i,o-n.offsetHeight)),n.style.left=n._dragDetails.windowX+"px",n.style.top=n._dragDetails.windowY+"px"}n._dragDetails.top=n.offsetTop,n._dragDetails.left=n.offsetLeft}_dragStartHandler(e){this._dragDetails&&this._dragDetails.started&&e.preventDefault()}_focusHandler(e){const t=this;"focus"===e.type?(t.setAttribute("focus",""),t.bringToFront()):t._buttonPressed||(t.removeAttribute("focus"),t._dragDetails&&t._dragDetails.started&&t._handleWindowResizeDummy())}_getAllMinimizedWindows(e){const t=this;let n=[];e||(e=t._windowParent.element);const a=e.querySelectorAll("smart-window");for(let i=0;i<a.length;i++)a[i]!==t&&a[i].hasAttribute("minimized")&&n.push(a[i]);return n.sort(function(i,o){let r=i.getBoundingClientRect(),l=o.getBoundingClientRect();return r.right-l.right}),n}_handleSnapping(e){const t=this;e?t.disableSnap||t.collapsed||(t._snapDummy||(t._snapDummy=document.createElement("div"),t._snapDummy.addEventListener("transitionend",function(){t._snapDummy.classList.contains("smart-visibility-hidden")&&t._snapDummy.parentElement&&t._snapDummy.parentElement.removeChild(t._snapDummy)})),t._snapDummy.className="smart-window-snap-"+e+"-feedback",t._snapDummy._position=e,t._snapDummy.parentElement||t._windowParent.element.appendChild(t._snapDummy)):t._snapDummy&&t._snapDummy.parentElement&&t._snapDummy.classList.add("smart-visibility-hidden")}_headerDblCickHandler(e){const t=this,n=t.shadowRoot||t.isInShadowDOM?e.originalEvent.composedPath()[0]:e.originalEvent.target;n!==t.$.headerSection&&n!==t.$.header||t.$.maximizeButton&&0===t.$.maximizeButton.offsetHeight||(t.maximized?t.restore():t.maximize())}_isWindowButton(e){const t=this;for(;e&&(e.closest&&e.closest(".smart-buttons-container"))!==t.$.buttonsContainer;)e=e.getRootNode().host;if(!e)return;const n=/smart-(\w+[-]*\w*)-button/gi;if((e=e.closest(".smart-button"))&&e===t._buttonPressed)switch(e){case t.$.closeButton:return t.close(),!0;case t.$.collapseButton:return t.collapsed?t.expand():t.collapse(),!0;case t.$.maximizeButton:return t.maximized?t.restore():t.maximize(),!0;case t.$.minimizeButton:return t.minimized?t.restore():t.minimize(),!0;case t.$.pinButton:return t.pinned?t.unpin():t.pin(),!0;default:return n.test(e.className)?(t.$.fireEvent(Smart.Utilities.Core.toCamelCase(e.className.match(n).toString().replace("smart-","").replace("-button","")),{button:e}),!0):void 0}}_keyDownHandler(e){const t=this;if(delete t._changingFocus,t.disabled||(t.hasAttribute("dragged")||t.hasAttribute("resized"))&&t._mouseManipulation)return;const n="ArrowDown"===e.key||"ArrowRight"===e.key?10:-10,a=t.enableShadowDOM&&t._windowParent.element.getRootNode()?t._windowParent.element.getRootNode().activeElement:document.activeElement;switch(e.key){case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":{if(t.minimized||a!==t)return;let i=e.key.indexOf("Right")>-1||e.key.indexOf("Left")>-1;e.preventDefault();const o=(t.isInShadowDOM?t.getRootNode().host:t).closest("smart-docking-layout");if(!i&&e.altKey&&!(t instanceof Smart.TabsWindow&&o))return void("ArrowUp"===e.key?t.maximize():t.restore());if(t.maximized)return;if(t.$.addClass("no-transition"),e.ctrlKey&&"none"!==t.resizeMode&&!t.collapsed)return i=-1===["horizontal","vertical","both"].indexOf(t.resizeMode)?t.resizeMode:i?"right":"bottom",t.hasAttribute("dragged")&&t._cancelDragging(e),t.hasAttribute("resized")||t.$.fireEvent("resizeStart",{position:{x:e.pageX,y:e.pageY}}),void t._resize(i,n);t.pinned||(t.hasAttribute("dragged")||(t.setAttribute("dragged",""),t.$.fireEvent("dragStart",{left:e.pageX,top:e.pageY})),t._drag(n,i?"horizontal":"vertical")),t.$.removeClass("no-transition");break}case"Escape":t.headerButtons.indexOf("close")>-1&&t.close();break;case"p":e.altKey&&t.headerButtons.indexOf("pin")>-1&&(t.pinned?t.unpin():t.pin());break;case"c":e.altKey&&t.headerButtons.indexOf("collapse")>-1&&(t.collapsed?t.expand():t.collapse());break;case"m":e.altKey&&t.headerButtons.indexOf("minimize")>-1&&(t.minimized?t.restore():t.minimize());break;case"Tab":t.opened&&t.modal&&(t._changingFocus=!0);break;case"Enter":case" ":{let i;if(t.shadowRoot||t.isInShadowDOM?(i=e.composedPath()[0],t._buttonPressed=i.getRootNode().host):(i=e.target.closest&&e.target.closest(".smart-button"),t._buttonPressed=i),!i)return;t._isWindowButton(i),delete t._buttonPressed;break}}}_keyUpHandler(e){const t=this;if(e.key){if("Control"===e.key&&t._dragDetails&&t.hasAttribute("resized")&&!t._mouseManipulation){if(!t._dragDetails.started)return;"drag"!==t._dragDetails.type&&(t.removeAttribute("resized"),t.$.fireEvent("resizeEnd",{left:e.pageX,top:e.pageY,width:t._dragDetails.newWidth,height:t._dragDetails.newHeight}),t._handleWindowResizeDummy()),t._dragDetails.started=!1}e.key.indexOf("Arrow")>-1&&t.hasAttribute("dragged")&&!t._mouseManipulation&&t._cancelDragging(e)}}_mouseWheelHandler(e){const t=this;!t.disabled&&t._dragDetails&&t._dragDetails.started&&(e.deltaY<0&&t._windowParent.scrollElement.scrollTop+e.deltaY<=0?t.style.top=Math.max(0,t._dragDetails.windowY)+"px":e.deltaY>0&&(t._dragDetails.windowY+t.offsetHeight+e.deltaY>=t._windowParent.scrollElement.scrollHeight||t._windowParent.scrollElement.scrollTop+t._windowParent.element.clientHeight===t._windowParent.scrollElement.scrollHeight)||("drag"===t._dragDetails.type?(t._dragDetails.windowY+=e.deltaY,t.style.top=t._dragDetails.windowY+"px"):(t._dragDetails.height+=e.deltaY,t.style.height=t._dragDetails.height+"px")))}_moveHandler(e){const t=this;if(!(t.disabled||t.collapsed||t.maximized||t.minimized||(Smart.Utilities.Core.isMobile&&navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform)&&t.hasAttribute("dragged")&&e.originalEvent.preventDefault(),t._mouseManipulation||(t.$.container.className.indexOf("smart-window-resizing")>-1&&t.$.container.classList.remove("smart-window-resizing-bottom-right","smart-window-resizing-top-right","smart-window-resizing-top-left","smart-window-resizing-bottom-left","smart-window-resizing-top","smart-window-resizing-bottom","smart-window-resizing-left","smart-window-resizing-right"),"none"===t.resizeMode)))){const n=t.getBoundingClientRect(),a=e.clientY<n.top+10,i=e.clientY>n.bottom-10,o=e.clientX>n.right-10,r=e.clientX<n.left+10;switch(t.resizeMode){case"none":break;case"both":if(t.resizeIndicator)return void(i&&o&&t.$.container.classList.add("smart-window-resizing-bottom-right"));if(r||o)return a?void t.$.container.classList.add("smart-window-resizing-top-"+(r?"left":"right")):i?void t.$.container.classList.add("smart-window-resizing-bottom-"+(r?"left":"right")):void t.$.container.classList.add("smart-window-resizing-"+(r?"left":"right"));if(a||i){if(o)return void t.$.container.classList.add("smart-window-resizing-"+(a?"top-right":"bottom-right"));if(r)return void t.$.container.classList.add("smart-window-resizing-"+(a?"top-left":"bottom-left"));t.$.container.classList.add("smart-window-resizing-"+(a?"top":"bottom"))}break;case"horizontal":if(t.resizeIndicator)return void(i&&o&&t.$.container.classList.add("smart-window-resizing-right"));if(r)return void t.$.container.classList.add("smart-window-resizing-left");o&&t.$.container.classList.add("smart-window-resizing-right");break;case"vertical":if(t.resizeIndicator)return void(i&&o&&t.$.container.classList.add("smart-window-resizing-bottom"));if(a)return void t.$.container.classList.add("smart-window-resizing-top");i&&t.$.container.classList.add("smart-window-resizing-bottom");break;case"top":if(a){if(t.resizeIndicator&&!r)return;t.$.container.classList.add("smart-window-resizing-top")}break;case"bottom":if(i){if(t.resizeIndicator&&!o)return;t.$.container.classList.add("smart-window-resizing-bottom")}break;case"left":if(r){if(t.resizeIndicator&&!a)return;t.$.container.classList.add("smart-window-resizing-left")}break;case"right":if(o){if(t.resizeIndicator&&!i)return;t.$.container.classList.add("smart-window-resizing-right")}}}}_handleActiveState(){const e=this,t=document.querySelectorAll(".smart-window");for(let n=0;n<t.length;n++)t[n].contains(e)||e.contains(t[n])||(t[n].removeAttribute("active"),t[n].removeAttribute("focus"));e.setAttribute("active","")}_handleWindowResizeDummy(){const e=this;if(e._resizeDummy||(e._resizeDummy=document.createElement("div"),e._resizeDummy.classList.add("smart-window-resize-feedback")),!e.hasAttribute("resized"))return e._resizeDummy&&e._resizeDummy.remove(),void(!e.liveResize&&"resize"===e._dragDetails.type&&e._dragDetails.started&&(e.style.top=e._dragDetails.top+"px",e.style.left=e._dragDetails.left+"px",e.style.width=e._dragDetails.newWidth+"px",e.style.height=e._dragDetails.newHeight+"px"));e._resizeDummy.parentElement||e._resizeDummy.getRootNode().host||(e._resizeDummy.style.width=e.offsetWidth+"px",e._resizeDummy.style.height=e.offsetHeight+"px",e._resizeDummy.style.top=e.offsetTop+"px",e._resizeDummy.style.left=e.offsetLeft+"px",e._windowParent.element.appendChild(e._resizeDummy))}_resize(e,t){const n=this;let a;if((!n._dragDetails||n._dragDetails&&"drag"===n._dragDetails.type)&&n._setDragDetails("resize"),!n._dragDetails)return;n._dragDetails.started=!0,n.hasAttribute("resized")||(n.setAttribute("resized",""),n.hasAnimation&&n.$.addClass("no-transition")),n.liveResize||n._handleWindowResizeDummy();const i=n._snapDummy&&n.$.hasClass("smart-window-snapped-"+n._snapDummy._position)?"snapWindowWidth":"width";switch(e){case"left":a="object"==typeof t?t.pageX-n._dragDetails.x:t,a=a>0?Math.min(a,n._dragDetails[i]-n._dragDetails.minWidth):-1*Math.min(n._dragDetails.maxWidth?n._dragDetails.maxWidth-n._dragDetails[i]:n._dragDetails.left,Math.abs(a)),n._dragDetails[i]=Math.min(n._dragDetails[i]+n._dragDetails.left-n._windowParent.scrollElement.scrollLeft,n._dragDetails[i]-a),n._dragDetails.windowX=Math.max(n._windowParent.scrollElement.scrollLeft,n._dragDetails.windowX+a),"object"!=typeof t&&(n._dragDetails[i]=Math.max(n._dragDetails[i],n._dragDetails.minWidth)),n._dragDetails[i]>=n._dragDetails.minWidth&&(n._dragDetails.left=n._dragDetails.windowX,n._dragDetails.newWidth=n._dragDetails[i]);break;case"right":{const r=n._windowParent.element.clientWidth!==n._windowParent.element.offsetWidth?n._windowParent.borderWidth:0,l=n._snapDummy&&n.$.hasClass("smart-window-snapped-"+n._snapDummy._position)?"snapWindowWidth":"width";a="object"==typeof t?t.pageX-n._dragDetails.x:t,a>0&&n._dragDetails.maxWidth&&(a=Math.min(n._dragDetails.maxWidth-n._dragDetails[l],a)),n._dragDetails[l]=Math.min(n._windowParent.element.clientWidth+n._windowParent.scrollElement.scrollLeft-n._dragDetails.left-r,Math.max(0,n._dragDetails[l]+a)),"object"!=typeof t&&(n._dragDetails[l]=Math.max(n._dragDetails[l],n._dragDetails.minWidth)),n._dragDetails.left=n.offsetLeft,n._dragDetails.newWidth=Math.max(n._dragDetails.minWidth,n._dragDetails[l]);break}case"top":n._snapDummy&&n.$.hasClass("smart-window-snapped-"+n._snapDummy._position)&&(n._dragDetails.height=n._dragDetails.snapWindowHeight),a="object"==typeof t?t.pageY-n._dragDetails.y:t,a=a>0?Math.min(a,n._dragDetails.height-n._dragDetails.minHeight):-1*Math.min(n._dragDetails.maxHeight?n._dragDetails.maxHeight-n._dragDetails.height:n._dragDetails.top,Math.abs(a)),n._dragDetails.snapWindowHeight=n._dragDetails.height=Math.min(n._dragDetails.height+n._dragDetails.top-n._windowParent.scrollElement.scrollTop,n._dragDetails.height-a),n._dragDetails.windowY=Math.max(n._windowParent.scrollElement.scrollTop,n._dragDetails.windowY+a),"object"!=typeof t&&(n._dragDetails.snapWindowHeight=n._dragDetails.height=Math.max(n._dragDetails.height,n._dragDetails.minHeight)),n._dragDetails.height>=n._dragDetails.minHeight&&(n._dragDetails.top=n._dragDetails.windowY,n._dragDetails.newHeight=n._dragDetails.height),n._dragDetails.newWidth=Math.max(n._dragDetails[i],n._dragDetails.newWidth);break;case"bottom":n._snapDummy&&n.$.hasClass("smart-window-snapped-"+n._snapDummy._position)&&(n._dragDetails.height=n._dragDetails.snapWindowHeight),a="object"==typeof t?t.pageY-n._dragDetails.y:t,a>0&&n._dragDetails.maxHeight&&(a=Math.min(n._dragDetails.maxHeight-n._dragDetails.height,a)),n._dragDetails.snapWindowHeight=n._dragDetails.height=Math.min(n._windowParent.element.clientHeight+n._windowParent.scrollElement.scrollTop-n._dragDetails.top-n._windowParent.borderWidth,Math.max(0,n._dragDetails.height+a)),"object"!=typeof t&&(n._dragDetails.snapWindowHeight=n._dragDetails.height=Math.max(n._dragDetails.height,n._dragDetails.minHeight)),n._dragDetails.newHeight=Math.max(n._dragDetails.minHeight,n._dragDetails.height),n._dragDetails.newWidth=Math.max(n._dragDetails[i],n._dragDetails.newWidth);break;case"bottomLeftCorner":n._resize("bottom",t),n._resize("left",t);break;case"bottomRightCorner":n._resize("bottom",t),n._resize("right",t);break;case"topLeftCorner":n._resize("top",t),n._resize("left",t);break;case"topRightCorner":n._resize("top",t),n._resize("right",t)}const o=n.liveResize?n:n._resizeDummy;n._dragDetails.newHeight=Math.max(n._dragDetails.snapWindowHeight,n._dragDetails.newHeight),o.style.top=n._dragDetails.top+"px",o.style.left=n._dragDetails.left+"px",o.style.width=n._dragDetails.newWidth+"px",o.style.height=n._dragDetails.newHeight+"px"}_restoreFromMinimization(){const e=this;e.minimized=!1,e.style.width=e.style.height=e.style.top=e.style.left="",e._refreshMinimizedWindowsPosition()}_refreshMinimizedWindowsPosition(){const e=this,t=e._getAllMinimizedWindows();if(0===t.length)return;let n;t[0].style.left="5px";for(let a=1;a<t.length;a++)parseFloat(t[a-1].style.left)+t[a-1].offsetWidth+t[a].offsetWidth+10<e._windowParent.element.clientWidth?(t[a].style.left=parseFloat(t[a-1].style.left)+t[a-1].offsetWidth+5+"px",t[a].style.top=t[a-1].offsetTop+"px",n=t[a]):(t[a].style.left=parseFloat(n.style.left)+"px",t[a].style.top=n.offsetTop+"px")}_setHeaderButtons(){const e=this,t=e.headerButtons,n=e.$.buttonsContainer.children,a=function(i){const o=e.$.buttonsContainer.getElementsByClassName("smart-"+(i+"").split(/(?=[A-Z])/).join("-").toLowerCase()+"-button")[0];return o&&o.classList.remove("smart-hidden"),o};for(let i=0;i<n.length;i++)n[i].classList.add("smart-hidden");if(t.length>0)for(let i=0;i<t.length;i++){let o=a(t[i]);if(!o){const r=(t[i]+"").split(/(?=[A-Z])/);o=document.createElement("button"),o.setAttribute("aria-label",r.map(l=>l.slice(0,1).toUpperCase()+l.slice(1)).join(" ")),o.classList.add("smart-"+r.join("-").toLowerCase()+"-button","smart-button","smart-element")}e.$.buttonsContainer.insertBefore(o,e.$.buttonsContainer.firstElementChild)}}_setDragDetails(e,t){const n=this;if(n._dragDetails||(n._dragDetails={}),void 0===n._dragDetails.minWidth||void 0===n._dragDetails.minHeight||void 0===n._dragDetails.maxWidth||void 0===n._dragDetails.maxHeight){const i=getComputedStyle(n);n._dragDetails.minWidth=parseFloat(i.getPropertyValue("min-width"))||0,n._dragDetails.minHeight=parseFloat(i.getPropertyValue("min-height"))||0,n._dragDetails.maxWidth=parseFloat(i.getPropertyValue("max-width"))||0,n._dragDetails.maxHeight=parseFloat(i.getPropertyValue("max-height"))||0}n._dragDetails.windowX=n.offsetLeft,n._dragDetails.windowY=n.offsetTop;const a=n.getBoundingClientRect();if(n._snapDummy&&n.$.hasClass("smart-window-snapped-"+n._snapDummy._position))"right"===n.headerPosition&&n.collapsed&&(n._dragDetails.offsetX=a.left+n.offsetWidth-t.clientX);else{const i=n.parentElement===document.body?document.documentElement.getBoundingClientRect():n.parentElement?n.parentElement.getBoundingClientRect():document.documentElement.getBoundingClientRect(),o=window.scrollX||window.pageXOffset,r=window.scrollY||window.pageYOffset;n._windowParent.offsetLeft=i.left+o,n._windowParent.offsetTop=i.top+r,t&&"object"==typeof t&&(n._dragDetails.offsetX=t.clientX-a.left,n._dragDetails.offsetY=t.clientY-a.top),n.collapsed||(n.hasAnimation&&"minimize"===e?(n._dragDetails.width=n._dragDetails.width?n._dragDetails.width:n.offsetWidth,n._dragDetails.height=n._dragDetails.height?n._dragDetails.height:n.offsetHeight):(n._dragDetails.width=n.offsetWidth,n._dragDetails.height=n.offsetHeight),(n.style.width||n.style.height)&&(n._dragDetails.resized=!0))}if("minimize"!==e&&e&&(n._dragDetails.type=e,n._dragDetails.started=!0,n._dragDetails.snapWindowWidth=n.offsetWidth,n._dragDetails.snapWindowHeight=n.offsetHeight,t&&"object"==typeof t?(n._dragDetails.x=t.pageX,n._dragDetails.y=t.pageY):(n._dragDetails.x=n.offsetLeft,n._dragDetails.y=n.offsetTop),"resize"===e)){if("none"===n.resizeMode)return void delete n._dragDetails;n._dragDetails.top=n.offsetTop,n._dragDetails.left=n.offsetLeft,n._dragDetails.newWidth=n._dragDetails.width,n._dragDetails.newHeight=n._dragDetails.height,n.$container.hasClass("smart-window-resizing-right")?n._dragDetails.side="right":n.$container.hasClass("smart-window-resizing-left")?n._dragDetails.side="left":n.$container.hasClass("smart-window-resizing-top")?n._dragDetails.side="top":n.$container.hasClass("smart-window-resizing-bottom")?n._dragDetails.side="bottom":n.$container.hasClass("smart-window-resizing-top-left")?n._dragDetails.side="topLeftCorner":n.$container.hasClass("smart-window-resizing-bottom-left")?n._dragDetails.side="bottomLeftCorner":n.$container.hasClass("smart-window-resizing-top-right")?n._dragDetails.side="topRightCorner":n.$container.hasClass("smart-window-resizing-bottom-right")&&(n._dragDetails.side="bottomRightCorner")}}_setElementParent(e){const t=this;if(t._windowParent.element=void 0,t._windowParent.parent&&!t._windowParent.parent.querySelectorAll("smart-window, smart-dialog-window, smart-progress-window, smart-wait-window, smart-alert-window, smart-prompt-window, smart-multiline-prompt-window")&&(t._windowParent.parent.style.position=""),e instanceof HTMLElement)t._windowParent.element=e;else if("string"==typeof e)if("body"===e){const n=t.getRootNode();t._windowParent.element=n&&n.host?t.getShadowRootOrBody():document.body}else t._windowParent.element=document.getElementById(e);if(t._windowParent.element||(t._windowParent.element=t._windowParent.initialParent&&t._windowParent.initialParent.parentElement?t._windowParent.initialParent:t.getShadowRootOrBody()),t.parentElement!==t._windowParent.element&&t._windowParent.element.appendChild(t),t._windowParent.element===document.body)t._windowParent.element=document.documentElement,t._windowParent.scrollElement=document.scrollingElement,t._windowParent.parent=document.body,t._windowParent.borderWidth=0;else{if(t.parentElement instanceof Smart.Window&&!t.parentElement.isCompleted)return void t.parentElement.whenRendered(function(){t.parentElement.appendChild(t),t._setElementParent(t.windowParent)});t._windowParent.element instanceof Smart.Window&&(t._windowParent.element=t._windowParent.element.$.content);const n=getComputedStyle(t.parentElement),a=n.getPropertyValue("position");t._windowParent.borderWidth=2*parseInt(n.getPropertyValue("border-width")||0),t._windowParent.parent=t.parentElement,t._windowParent.scrollElement=t._windowParent.element,"static"===a&&(t.parentElement.style.position="relative")}t._setModal(),t.style.left&&t.offsetLeft>t._windowParent.scrollElement.scrollWidth&&(t.style.left=t._windowParent.scrollElement.scrollWidth-t.offsetWidth+"px"),t.style.top&&t.offsetTop>t._windowParent.scrollElement.scrollHeight&&(t.style.top=t._windowParent.scrollElement.scrollHeight-t.offsetHeight+"px")}_setModal(){const e=this;if(delete e._changingFocus,e._windowParent.element)if(e.modal)if(e._modal||(e._modal=document.createElement("div"),e._modal.classList.add("smart-modal")),e._windowParent.parent!==document.body?e._modal.setAttribute("nested-modal",""):e._modal.removeAttribute("nested-modal"),e._modal._window=e,e.opened&&!e._modal.parentElement){const t=parseInt(getComputedStyle(e).getPropertyValue("z-index"));isNaN(t)||(e._modal.style.zIndex=t-1),e.parentElement.insertBefore(e._modal,e)}else e._modal.parentElement&&e._modal.parentElement.removeChild(e._modal);else e._modal&&e._modal.parentElement&&(e._modal.parentElement.removeChild(e._modal),delete e._modal)}}),Smart("smart-dialog-window",class extends Smart.Window{static get properties(){return{cancelLabel:{value:"Cancel",type:"string"},confirmLabel:{value:"Ok",type:"string"},disableSnap:{value:!0,readOnly:!0,type:"boolean"},headerButtons:{value:["close"],type:"array"},modal:{value:!0,readOnly:!0,type:"boolean",defaultReflectToAttribute:!0}}}static get listeners(){return{"footer.click":"_footerClickHandler"}}template(){return'<div role="presentation">\n                    <div class="smart-content-container" id="container">\n                        <div id="headerSection" class="smart-header-section" role="heading" aria-level="1">\n                            <div id="header" class="smart-header">[[label]]</div>\n                            <div id="buttonsContainer" class="smart-buttons-container">\n                                <button id="pinButton" class="smart-pin-button" aria-label="Pin"></button>\n                                <button id="collapseButton" class="smart-button smart-element smart-collapse-button" aria-label="Collapse"></button>\n                                <button id="minimizeButton" class="smart-button smart-element smart-minimize-button" aria-label="Minimize"></button>\n                                <button id="maximizeButton" class="smart-button smart-element smart-maximize-button" aria-label="Maximize"></button>\n                                <button id="closeButton" class="smart-button smart-element smart-close-button" aria-label="Close"></button>\n                            </div>\n                        </div>\n                        <div class="smart-content">\n                            <content></content>\n                        </div>\n                        <div id="footer" class="smart-footer">\n                            <button id="confirmButton" class="smart-button smart-element smart-confirm-button">[[confirmLabel]]</button>\n                            <button id="cancelButton" class="smart-button smart-element smart-cancel-button">[[cancelLabel]]</button>\n                        </div>\n                    </div>\n                </div>'}_createElement(){const e=this;e.setAttribute("role","alertdialog"),e.setAttribute("aria-describedby",e.$.content.id)}_footerClickHandler(e){const n=e.target;n.closest(".smart-confirm-button")?this.$.fireEvent("confirm"):n.closest(".smart-cancel-button")&&this.$.fireEvent("cancel")}_keyDownHandler(e){const t=this;if(delete t._changingFocus,t.disabled||(t.hasAttribute("dragged")||t.hasAttribute("resized"))&&t._mouseManipulation)return;e.stopPropagation();const n="ArrowDown"===e.key||"ArrowRight"===e.key?10:-10,a=t.enableShadowDOM&&t._windowParent.element.getRootNode()?t._windowParent.element.getRootNode().activeElement:document.activeElement;switch(e.key){case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":{if(t.minimized||a!==t)return;const i=e.key.indexOf("Right")>-1||e.key.indexOf("Left")>-1;if(e.preventDefault(),!i&&e.altKey)return void("ArrowUp"===e.key?t.maximize():t.restore());if(t.$.addClass("no-transition"),t.maximized)return;if(e.ctrlKey&&"none"!==t.resizeMode)return t.hasAttribute("dragged")&&t._cancelDragging(e),t.hasAttribute("resized")||t.$.fireEvent("resizeStart",{position:{x:e.pageX,y:e.pageY}}),void t._resize(i?"right":"bottom",n);t.pinned||(t.hasAttribute("dragged")||(t.setAttribute("dragged",""),t.$.fireEvent("dragStart",{left:e.pageX,top:e.pageY})),t._drag(n,i?"horizontal":"vertical")),t.$.removeClass("no-transition");break}case"Escape":t.headerButtons.indexOf("close")>-1&&t.close();break;case"Tab":t.opened&&t.modal&&(t._changingFocus=!0);break;case"Enter":case" ":{let i;if(t.shadowRoot||t.isInShadowDOM?(i=e.composedPath()[0],t._buttonPressed=i.getRootNode().host):(i=e.target.closest&&e.target.closest(".smart-button"),t._buttonPressed=i),!i)return;t._isWindowButton(i),delete t._buttonPressed;break}}}}),Smart("smart-alert-window",class extends Smart.DialogWindow{static get properties(){return{headerButtons:{value:[],type:"array"}}}_createElement(){const e=this;e.setAttribute("role","alertdialog"),e.setAttribute("aria-describedby",e.$.content.id)}}),Smart("smart-prompt-window",class extends Smart.DialogWindow{static get properties(){return{autoComplete:{allowedValues:["none","manual","auto","inline"],type:"string",value:"manual"},confirmLabel:{value:"Ok",type:"string"},cancelLabel:{value:"Cancel",type:"string"},disableSnap:{value:!0,readOnly:!0,type:"boolean"},displayMode:{value:"default",allowedValues:["default","escaped"],type:"string"},headerButtons:{value:["close"],type:"array"},form:{value:"",type:"string"},hint:{value:null,type:"any?"},maxLength:{value:null,type:"number?"},minLength:{value:2,type:"number"},messages:{extend:!0,value:{en:{missingReference:"{{elementType}}: Missing reference to {{files}}."}},type:"object"},modal:{value:!0,readOnly:!0,type:"boolean",defaultReflectToAttribute:!0},name:{value:"",type:"string"},placeholder:{value:"",type:"string"},promptLabel:{value:"",type:"string?"},required:{value:!1,type:"boolean"},requiredMessage:{value:"",type:"string"},selectAllOnFocus:{value:!1,type:"boolean"},value:{value:"",type:"string"}}}template(){return'<div role="presentation">\n                    <div class="smart-content-container" id="container">\n                        <div id="headerSection" class="smart-header-section" role="heading" aria-level="1">\n                            <div id="header" class="smart-header">[[label]]</div>\n                            <div id="buttonsContainer" class="smart-buttons-container">\n                                <button id="closeButton" class="smart-button smart-element smart-close-button" aria-label="Close"></button>\n                            </div>\n                        </div>\n                        <div class="smart-content">\n                            <content></content>\n                            <smart-text-box id="textBox"\n                                animation="[[animation]]"\n                                auto-complete="[[autoComplete]]"\n                                max-length="[[maxLength]]"\n                                value="{{value}}"\n                                form="[[form]]"\n                                label="[[promptLabel]]"\n                                hint="[[hint]]"\n                                display-mode="[[displayMode]]"\n                                max-length="[[maxLength]]"\n                                placeholder="[[placeholder]]"\n                                required="[[required]]"\n                                required-message="[[requiredMessage]]"\n                                select-all-on-focus="[[selectAllOnFocus]]"\n                                theme="[[theme]]"\n                                right-to-left="[[rightToLeft]]">\n                            </smart-text-box>\n                        </div>\n                        <div id="footer" class="smart-footer">\n                            <button id="confirmButton" class="smart-button smart-element smart-confirm-button flat">[[confirmLabel]]</button>\n                            <button id="cancelButton" class="smart-button smart-element smart-cancel-button flat">[[cancelLabel]]</button>\n                        </div>\n                    </div>\n                </div>'}static get listeners(){return{"footer.click":"_footerClickHandler"}}static get requires(){return{"Smart.TextBox":"smart.textbox.js"}}_footerClickHandler(e){const t=this,n=e.target;n.closest(".smart-confirm-button")?t.$.fireEvent("confirm",{value:t.$.textBox.value}):n.closest(".smart-cancel-button")&&t.$.fireEvent("cancel",{value:t.$.textBox.value})}_keyDownHandler(e){const t=this;function n(){t._dragDetails&&(t._dragDetails.started=!1),t.$.removeClass("no-transition")}if(delete t._changingFocus,t.disabled||t._dragDetails&&t._dragDetails.started)return;e.stopPropagation();const a="ArrowDown"===e.key||"ArrowRight"===e.key?10:-10,i=t.enableShadowDOM&&t._windowParent.element.getRootNode()?t._windowParent.element.getRootNode().activeElement:document.activeElement;switch(t.$.removeClass("no-transition"),e.key){case"ArrowUp":case"ArrowDown":if(i!==t)return;if(e.preventDefault(),e.altKey)return"ArrowUp"===e.key?t.maximize():t.restore(),void n();if(t.$.addClass("no-transition"),e.ctrlKey)return t._resize("bottom",a),void n();t._drag(a,"vertical");break;case"ArrowLeft":case"ArrowRight":if(i!==t)return;if(e.preventDefault(),t.$.addClass("no-transition"),e.ctrlKey)return t._resize("right",a),void n();t._drag(a,"horizontal"),t.$.removeClass("no-transition");break;case"Escape":t.headerButtons.indexOf("close")>-1&&t.close();break;case"Tab":t.opened&&t.modal&&(t._changingFocus=!0);break;case"Enter":case" ":{let o;if(t.shadowRoot||t.isInShadowDOM?(o=e.composedPath()[0],t._buttonPressed=o.getRootNode().host):(o=e.target.closest&&e.target.closest(".smart-button"),t._buttonPressed=o),!o)return;t._isWindowButton(o),delete t._buttonPressed;break}}n()}}),Smart("smart-multiline-prompt-window",class extends Smart.PromptWindow{static get properties(){return{autoCapitalize:{value:"none",allowedValues:["none","words","characters"],type:"string"},autoExpand:{value:!1,type:"boolean"},headerButtons:{value:["close"],type:"array"},horizontalScrollBarVisibility:{type:"string",value:"auto",allowedValues:["auto","disabled","hidden","visible"]},modal:{value:!0,readOnly:!0,type:"boolean",defaultReflectToAttribute:!0},selectionDirection:{value:"none",allowedValues:["forward","backward","none"],type:"string"},selectionEnd:{value:0,reflectToAttribute:!1,type:"number"},selectionStart:{value:0,reflectToAttribute:!1,type:"number"},spellCheck:{value:!1,type:"boolean"},verticalScrollBarVisibility:{type:"string",value:"auto",allowedValues:["auto","disabled","hidden","visible"]},wrap:{value:"soft",allowedValues:["hard","soft","off"],type:"string"}}}template(){return'<div role="presentation">\n                    <div class="smart-content-container" id="container">\n                        <div id="headerSection" class="smart-header-section" role="heading" aria-level="1">\n                            <div id="header" class="smart-header">[[label]]</div>\n                            <div id="buttonsContainer" class="smart-buttons-container">\n                                <button id="closeButton" class="smart-button smart-element smart-close-button" aria-label="Close"></button>\n                            </div>\n                        </div>\n                        <div class="smart-content">\n                            <content></content>\n                           <smart-multiline-text-box id="textBox"\n                                animation="[[animation]]"\n                                horizontal-scroll-bar-visibility= "[[horizontalScrollBarVisibility]]"\n                                vertical-scroll-bar-visibility= "[[verticalScrollBarVisibility]]"\n                                auto-capitalize="[[autoCapitalize]]"\n                                auto-expand = "[[autoExpand]]"\n                                selection-direction= "[[selectionDirection]]"\n                                selection-end= "[[selectionEnd]]"\n                                selection-start="[[selectionStart]]"\n                                spell-check= "[[spellCheck]]"\n                                wrap="[[wrap]]"\n                                max-length="[[maxLength]]"\n                                value="{{value}}"\n                                form="[[form]]"\n                                label="[[promptLabel]]"\n                                hint="[[hint]]"\n                                display-mode="[[displayMode]]"\n                                max-length="[[maxLength]]"\n                                placeholder="[[placeholder]]"\n                                required="[[required]]"\n                                required-message="[[requiredMessage]]"\n                                select-all-on-focus="[[selectAllOnFocus]]"\n                                theme="[[theme]]"\n                                right-to-left="[[rightToLeft]]">\n                           </smart-multiline-text-box>\n                        </div>\n                        <div id="footer" class="smart-footer">\n                            <button id="confirmButton" class="smart-button smart-element smart-confirm-button flat">[[confirmLabel]]</button>\n                            <button id="cancelButton" class="smart-button smart-element smart-cancel-button flat">[[cancelLabel]]</button>\n                        </div>\n                    </div>\n                </div>'}static get listeners(){return{"footer.click":"_footerClickHandler"}}static get requires(){return{"Smart.MultilineTextBox":"smart.multilinetextbox.js"}}_footerClickHandler(e){const t=this,n=e.target;n.closest(".smart-confirm-button")?t.$.fireEvent("confirm",{value:t.$.textBox.value}):n.closest(".smart-cancel-button")&&t.$.fireEvent("cancel",{value:t.$.textBox.value})}}),Smart("smart-progress-window",class extends Smart.Window{static get properties(){return{completeLabel:{value:"Continue",type:"string"},disableSnap:{value:!0,readOnly:!0,type:"boolean"},headerButtons:{value:["close"],type:"array"},indeterminate:{value:!1,type:"boolean"},inverted:{value:!1,type:"boolean"},formatFunction:{value:null,type:"function"},max:{value:100,type:"number"},modal:{value:!0,readOnly:!0,type:"boolean",defaultReflectToAttribute:!0},min:{value:0,type:"number"},showProgressValue:{value:!1,type:"boolean"},value:{value:0,type:"number?"}}}template(){return'<div role="presentation">\n                    <div class="smart-content-container" id="container">\n                        <div id="headerSection" class="smart-header-section" role="heading" aria-level="1">\n                            <div id="header" class="smart-header">[[label]]</div>\n                            <div id="buttonsContainer" class="smart-buttons-container">\n                                <button id="closeButton" class="smart-button smart-element smart-close-button" aria-label="Close"></button>\n                            </div>\n                        </div>\n                        <div class="smart-content" inner-h-t-m-l="[[innerHTML]]">\n                            <content></content>\n                        </div>\n                        <div id="footer" class="smart-footer">\n                            <smart-progress-bar id="progressBar"\n                                animation="[[animation]]"\n                                min="[[min]]"\n                                max="[[max]]"\n                                indeterminate="[[inditerminate]]"\n                                inverted="[[inverted]]"\n                                format-function="[[formatFunction]]"\n                                show-progress-value="[[showProgressValue]]"\n                                theme="[[theme]]"\n                                right-to-left="[[rightToLeft]]"\n                                value="{{value}}">\n                            </smart-progress-bar>\n                            <button id="completeButton" class="smart-button smart-element smart-complete-button smart-visibility-hidden">[[completeLabel]]</button>\n                        </div>\n                    </div>\n                </div>'}static get requires(){return{"Smart.ProgressBar":"smart.progressbar.js"}}propertyChangedHandler(e,t,n){const a=this;switch(e){case"value":a._handleCompletion();break;default:super.propertyChangedHandler(e,t,n)}}_createElement(){this.setAttribute("role","dialog"),this._handleCompletion()}_handleCompletion(){const e=this;e.$.completeButton&&(e.value>=e.max?(e.$completeButton.removeClass("smart-visibility-hidden"),e.$progressBar.addClass("smart-visibility-hidden")):(e.$completeButton.addClass("smart-visibility-hidden"),e.$progressBar.removeClass("smart-visibility-hidden")))}_keyDownHandler(e){const t=this;function n(){t._dragDetails&&(t._dragDetails.started=!1),t.$.removeClass("no-transition")}if(delete t._changingFocus,t.disabled||t._dragDetails&&t._dragDetails.started)return;e.stopPropagation();const a="ArrowDown"===e.key||"ArrowRight"===e.key?10:-10,i=t.enableShadowDOM&&t._windowParent.element.getRootNode()?t._windowParent.element.getRootNode().activeElement:document.activeElement;switch(t.$.removeClass("no-transition"),e.key){case"ArrowUp":case"ArrowDown":if(i!==t)return;if(e.preventDefault(),e.altKey)return"ArrowUp"===e.key?t.maximize():t.restore(),void n();if(t.$.addClass("no-transition"),e.ctrlKey)return t._resize("bottom",a),void n();t._drag(a,"vertical"),t.$.removeClass("no-transition");break;case"ArrowLeft":case"ArrowRight":if(i!==t)return;if(e.preventDefault(),t.$.addClass("no-transition"),e.ctrlKey)return t._resize("right",a),void n();t._drag(a,"horizontal"),t.$.removeClass("no-transition");break;case"Escape":t.headerButtons.indexOf("close")>-1&&t.close();break;case"Tab":t.opened&&t.modal&&(t._changingFocus=!0);break;case"Enter":case" ":{let o;if(t.shadowRoot||t.isInShadowDOM?(o=e.composedPath()[0],t._buttonPressed=o.getRootNode().host):(o=e.target.closest&&e.target.closest(".smart-button"),t._buttonPressed=o),!o)return;t._isWindowButton(o),delete t._buttonPressed;break}}n()}}),Smart("smart-tabs-window",class extends Smart.Window{static get properties(){return{disableSnap:{value:!0,readOnly:!0,type:"boolean"},dropPosition:{value:["all"],type:"array"},addNewTab:{value:!1,type:"boolean"},allowToggle:{value:!1,type:"boolean"},autoHide:{value:!1,type:"boolean"},autoHideWindow:{value:null,type:"any"},dataSource:{value:null,type:"array?",reflectToAttribute:!1},tabCloseButtonMode:{value:"default",allowedValues:["default","selected"],type:"string"},tabCloseButtons:{value:!1,type:"boolean"},messages:{value:{en:{ambiguousIndexes:"smart-tabs: Initially set smart-tab-item indexes are ambiguous and are ignored in favour of the HTML structure.",detailsObjectRequired:'smart-tabs: The method "insert" requires a details Object to be passed as a second argument.',invalidIndex:'smart-tabs: "{{method}}" method accepts an index of type number.',referenceNodeNotChild:"smart-tabs: Passed {{argument}} is not part of this smart-tabs element.",tabItemRequired:'smart-tabs: The method "{{method}}" requires a "smart-tab-item" element to be passed as an argument.'}},type:"object",extend:!0},tabOverflow:{value:"auto",allowedValues:["auto","hidden","scroll"],type:"string"},tabReorder:{value:!1,type:"boolean"},tabResize:{value:!1,type:"boolean"},tabScrollButtonsPosition:{value:"both",allowedValues:["near","far","both"],type:"string"},selectedIndex:{value:null,type:"number?"},selectionMode:{value:"click",allowedValues:["click","dblclick","mouseenter","none"],type:"string"},collapsed:{value:!1,type:"boolean"},collapsible:{value:!1,type:"boolean"},locked:{value:!1,type:"boolean"},max:{value:"",type:"any"},min:{value:"",type:"any"},size:{value:"",type:"any"},tabLayout:{value:"scroll",allowedValues:["scroll","dropdown","wrap","shrink"],type:"string",defaultReflectToAttribute:!0},tabPosition:{value:"top",allowedValues:["top","bottom","left","right","hidden"],type:"string"},tabTextOrientation:{value:"horizontal",allowedValues:["horizontal","vertical"],type:"string"},layout:{value:null,type:"any"}}}static get listeners(){return{"tabsElement.blur":"_tabsFocusHandler","tabsElement.change":"_tabsChangeHandler","tabsElement.focus":"_tabsFocusHandler","autoHideWindow.close":"_autoHideWindowCloseHandler","autoHideWindow.open":"_autoHideWindowOpenHandler"}}template(){return'<div role="presentation">\n                    <div class="smart-content-container" id="container">\n                        <div id="headerSection" class="smart-header-section" role="heading" aria-level="1">\n                            <div id="header" class="smart-header">[[label]]</div>\n                            <div id="buttonsContainer" class="smart-buttons-container">\n                                <button id="minimizeButton" class="smart-button smart-element smart-minimize-button" aria-label="Minimize"></button>\n                                <button id="maximizeButton" class="smart-button smart-element smart-maximize-button" aria-label="Maximize"></button>\n                                <button id="closeButton" class="smart-button smart-element smart-close-button" aria-label="Close"></button>\n                            </div>\n                        </div>\n                        <div id="contentSection" class="smart-content">\n                           <smart-tabs id="tabsElement"\n                                animation="[[animation]]"\n                                add-new-tab="[[addNewTab]]"\n                                allow-toggle="[[allowToggle]]"\n                                close-button-mode="[[tabCloseButtonMode]]"\n                                close-buttons="[[tabCloseButtons]]"\n                                disabled="[[disabled]]"\n                                overflow="[[tabOverflow]]"\n                                reorder="[[tabReorder]]"\n                                resize="[[tabResize]]"\n                                scroll-buttons-position="[[tabScrollButtonsPosition]]"\n                                selected-index="{{selectedIndex}}"\n                                selection-mode="[[selectionMode]]"\n                                tab-layout="[[tabLayout]]"\n                                tab-position="[[tabPosition]]"\n                                tab-text-orientation="[[tabTextOrientation]]"\n                                theme="[[theme]]"\n                                right-to-left="[[rightToLeft]]">\n                                <content></content>\n                            </smart-tabs>\n                        </div>\n                        <div id="footer" class="smart-footer smart-hidden"></div>\n                    </div>\n                </div>'}static get requires(){return{"Smart.Tabs":"smart.tabs.js"}}appendChild(e){const t=this;if(!t.isCompleted||e instanceof HTMLElement&&e.classList.contains("smart-resize-trigger-container")){const n=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.appendChild.apply(t,n.concat(Array.prototype.slice.call(arguments)))}e?(e instanceof Smart.TabItem||t.error(t.localize("tabItemRequired",{method:"removeChild"})),t.$.tabsElement.appendChild(e)):t.error(t.localize("invalidNode",{elementType:t.nodeName.toLowerCase(),method:"appendChild",node:"node"}))}insert(e,t){this.$.tabsElement.insert(e,t);const n=this.$.tabsElement._tabs[e];n&&(n.draggable=void 0===t.draggable||t.draggable,n.floatable=void 0===t.floatable||t.floatable)}insertBefore(e,t){this.$.tabsElement.insertBefore(e,t)}removeAt(e){this.$.tabsElement.removeAt(e)}removeChild(e){const t=this;if(!t.isCompleted||e instanceof HTMLElement&&e.classList.contains("smart-resize-trigger-container")){const n=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.removeChild.apply(t,n.concat(Array.prototype.slice.call(arguments)))}e?(e instanceof Smart.TabItem||t.error(t.localize("tabItemRequired",{method:"removeChild"})),(t.shadowRoot||t).contains(e)||t.error(t.localize("referenceNodeNotChild",{argument:"node"})),t.$.tabsElement.removeChild(e)):t.error(t.localize("invalidNode",{elementType:t.nodeName.toLowerCase(),method:"removeChild",node:"node"}))}refreshTabHeader(){const e=this;e.$.tabsElement&&e.$.tabsElement.isCompleted&&e.$.tabsElement.refreshTabHeader()}refreshTabs(){const e=this;e.$.tabsElement&&e.$.tabsElement.isCompleted&&e.$.tabsElement._applyTabOverflow()}select(e){this.$.tabsElement.select(e)}update(e,t,n){this.$.tabsElement.update(e,t,n)}get items(){return this.isCompleted&&this.$.tabsElement?this.$.tabsElement._tabs:null}get itemLabels(){return this.$?this.$.tabsElement._tabLabelContainers:null}get siblings(){const e=this;let t=[];if(!e.isCompleted)return t;const n=e.closest("smart-splitter");if(!n||!n.closest("smart-docking-layout"))return t;const a=n._items;if(!a||!a.length)return t;for(let i=0;i<a.length;i++){const o=a[i];o!==e.closest("smart-splitter-item")&&o.querySelector("smart-tabs-window").closest("smart-splitter")===n&&t.push(o.querySelector("smart-tabs-window"))}return t}propertyChangedHandler(e,t,n){const a=this;switch("collapsed"!==e&&super.propertyChangedHandler(e,t,n),e){case"theme":""!==t&&(a.$.closeButton.classList.remove(t),a.$.collapseButton.classList.remove(t),a.$.maximizeButton.classList.remove(t),a.$.pinButton.classList.remove(t)),a._applyTheme(n);break;case"autoHideWindow":a._handleAutoHideWindow();break;case"autoHide":n||(null!==a.$.tabsElement.selectedIndex&&(a.$.tabsElement._tabs[a.$.tabsElement.selectedIndex]._autoHideWindowSize=void 0),a._autoHideWindow&&a._autoHideWindow.close());break;case"dataSource":a.$.tabsElement.dataSource=n;break;case"layout":a._handleLayoutProperty();break;case"collapsible":case"collapsed":case"locked":case"max":case"min":case"size":{const i=a.getRootNode(),o=(i&&i.host?i.host:a).closest("smart-docking-layout"),r=a.closest("smart-splitter-item");if(!o)return void("collapsed"===e&&super.propertyChangedHandler(e,t,n));r&&(r[e]=n);break}}}_applyTheme(e){if(""!==e){const t=this.$.buttonsContainer.children;for(let n=0;n<t.length;n++)t[n].classList.add(e)}}_autoHideWindowCloseHandler(){const e=this;e.allowToggle&&null!==e.$.tabsElement.selectedIndex&&e.$.tabsElement.select(e.$.tabsElement.selectedIndex),e._autoHideWindow&&e._moveContent(e._autoHideWindow.items[0],e._autoHideWindow._tab)}_autoHideWindowOpenHandler(){const e=this;e.$.tabsElement.selectedIndex&&e._handleAutoHide(e.$.tabsElement.selectedIndex)}_createElement(){const e=this;e.setAttribute("role","dialog"),e.$.tabsElement.$.tabHeaderControls&&!e.$.tabsElement.$.tabHeaderControls.innerHTML&&e.$.tabsElement.$tabHeaderControls.addClass("smart-hidden"),e.$.tabsElement.dataSource=e.dataSource,e._applyTheme(e.theme),e._handleAutoHideWindow(),e.autoHide&&e._handleAutoHide(e.$.tabsElement.selectedIndex),e.allowToggle||e.selectedIndex||null===e.$.tabsElement.selectedIndex||(e.selectedIndex=e.$.tabsElement.selectedIndex,e.$.tabsElement.setAttribute("selected-index",e.selectedIndex)),e._handleLayoutProperty();const t=(e.isInShadowDOM?e.getRootNode().host:e||e).closest("smart-docking-layout"),n=e.closest("smart-splitter-item");t&&n&&(n.collapsible=e.collapsible,n.collapsed=e.collapsed,n.min=e.min,n.max=e.max,n.size=e.size,n.locked=e.locked)}attached(){super.attached();const e=this;e.classList.add("smart-window"),e.shadowRoot&&e.$.root.classList.add("smart-window")}_handleLayoutProperty(){const e=this;let t=e.closest("smart-docking-layout");if(Smart.DockingLayout){if(!e.ownerLayout&&e.getRootNode()){let n=e.getRootNode().host;for(;n;){if(!n.closest)return;if(n.closest("smart-docking-layout")){t=n.closest("smart-docking-layout");break}n=n.getRootNode()?n.getRootNode().host:void 0}}t?e.layout=t:e.layout instanceof Smart.DockingLayout||"string"==typeof e.layout&&(e.layout=document.getElementById(e.layout))}}_headerDblCickHandler(e){const t=this,n=t.shadowRoot||t.isInShadowDOM?e.originalEvent.composedPath()[0]:e.originalEvent.target;e.ctrlKey||n!==t.$.headerSection&&n!==t.$.header||t.$.maximizeButton&&0===t.$.maximizeButton.offsetHeight||(t.maximized?t.restore():t.maximize())}_documentUpHandler(e){const t=this;let n=e.originalEvent.target.closest?e.originalEvent.target.closest(".smart-window"):e.originalEvent.target,a=n===t||n===t._autoHideWindow||t._isAutoHideWindowClicked,i=t.closest("smart-docking-layout");(t.shadowRoot||t.isInShadowDOM)&&(n=e.originalEvent.composedPath()[0],a=n.getRootNode()===t.shadowRoot||n.closest(".smart-window")===t||n.closest(".smart-window")===t._autoHideWindow||t._isAutoHideWindowClicked),i=((t.isInShadowDOM?t.getRootNode().host:t)||t).closest("smart-docking-layout"),i&&i.disabled?delete t._isWindowContentClicked:(super._documentUpHandler(e),delete t._isAutoHideWindowClicked,t.autoHide&&t._autoHideWindow&&(a&&t._autoHideWindow.opened||(t.selectedIndex=null,t._autoHideWindow.parentElement&&t._autoHideWindow.parentElement.closest(".smart-window")===t&&t._autoHideWindow.close())))}_handleAutoHide(e){const t=this;if(!t.autoHide||null===e||(t._autoHideWindow||t._handleAutoHideWindow(!0),!t._autoHideWindow))return;t._autoHideWindow._tabsWindow&&t._autoHideWindow._tabsWindow!==t&&(t._autoHideWindow._tabsWindow.selectedIndex=null);const n=t.$.tabsElement._tabs[e];t._autoHideWindow._tab!==n&&t._moveContent(t._autoHideWindow.items[0],t._autoHideWindow._tab),t._autoHideWindow.label=n.label,t._autoHideWindow.draggable=n.draggable,t._autoHideWindow.floatable=n.floatable,t._autoHideWindow._tab=n,t._moveContent(t._autoHideWindow._tab,t._autoHideWindow.items[0]),t._autoHideWindow.bringToFront(),t._setAutoHideWindowSize(e),t._autoHideWindow.open(),t._autoHideWindow._tabsWindow=t,t._autoHideWindow.controlledBy&&t._autoHideWindow.controlledBy.removeAttribute("aria-controls"),t._autoHideWindow.controlledBy=t.$.tabsElement._tabLabelContainers[e],t._autoHideWindow.controlledBy.setAttribute("aria-controls",t._autoHideWindow.id)}_moveHandler(e){const t=this,n=t.closest("smart-docking-layout");n&&n.items.indexOf(t)>-1||(Smart.Utilities.Core.isMobile&&navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform)&&t.layout instanceof Smart.DockingLayout&&t.layout.hasAttribute("dragged")&&e.originalEvent.preventDefault(),super._moveHandler(e))}_setAutoHideWindowSize(e){const t=this;if(!t._autoHideWindow)return;t._autoHideWindow.$.addClass("no-transition"),t._autoHideWindow.style.maxWidth=t._autoHideWindow.style.maxHeight="";const n=t.$.tabsElement._tabs[e],a=(t._autoHideWindow.isInShadowDOM?t._autoHideWindow.getRootNode().host:t._autoHideWindow).closest("smart-docking-layout")||t._autoHideWindow.parentElement;let i,o;if(n){if("top"===t.tabPosition||"bottom"===t.tabPosition){t._autoHideWindow.resizeMode="top"===t.tabPosition?"bottom":"top",t._autoHideWindow.style.width=t.$.tabsElement.offsetWidth+"px",i=a.getBoundingClientRect(),o=t.$.tabsElement.getBoundingClientRect();let r=n._autoHideWindowSize&&parseFloat(n._autoHideWindowSize)||"";Smart.DockingLayout&&a instanceof Smart.DockingLayout&&(r&&(r=Math.min(a.$.itemsContainer.offsetHeight,r)+"px"),t._autoHideWindow.style.maxHeight=a.$.itemsContainer.offsetHeight+"px"),t._autoHideWindow.style.height=r,t._autoHideWindow.style.left=o.left-i.left+"px",t._autoHideWindow&&(t._autoHideWindow.style.top="top"===t.tabPosition?o.top+-i.top+o.height+"px":o.top-i.top-t._autoHideWindow.offsetHeight+"px")}else{t._autoHideWindow.resizeMode="left"===t.tabPosition?"right":"left",t._autoHideWindow.style.height=t.$.tabsElement.offsetHeight+"px";let r=n._autoHideWindowSize&&parseFloat(n._autoHideWindowSize)||"";a instanceof Smart.DockingLayout&&(r&&(r=Math.min(a.$.itemsContainer.offsetWidth,r)+"px"),t._autoHideWindow.style.maxWidth=a.$.itemsContainer.offsetWidth+"px"),t._autoHideWindow.style.width=r,i=a.getBoundingClientRect(),o=t.$.tabsElement.getBoundingClientRect(),t._autoHideWindow.style.top=o.top-i.top+"px",t._autoHideWindow.style.left="left"===t.tabPosition?o.left-i.left+t.$.tabsElement.offsetWidth+"px":o.left-i.left-t._autoHideWindow.offsetWidth+"px"}t._autoHideWindow._dragDetails&&(t._autoHideWindow._dragDetails.maxWidth=void 0),t._autoHideWindow._setDragDetails("resize"),t._autoHideWindow._dragDetails.started=!1,t._autoHideWindow.$.removeClass("no-transition")}}_handleAutoHideWindow(e){const t=this;if(t.autoHideWindow){if(t._autoHideWindow&&t._autoHideWindow.parentElement.removeChild(t._autoHideWindow),"string"==typeof t.autoHideWindow)return void(t._autoHideWindow=document.getElementById(t.autoHideWindow));if(t.autoHideWindow instanceof Smart.Window)return void(t._autoHideWindow=t.autoHideWindow)}if(!e||t._autoHideWindow||2===t.$.contentSection.children.length&&t.$.contentSection.children[1]instanceof Smart.Window)return;const n=document.createElement("smart-window");n.$=Smart.Utilities.Extend(n),n.disableSnap=n.pinned=!0,n.headerButtons=["close"],t.$.contentSection.appendChild(n),t._autoHideWindow=n}_moveContent(e,t){if(!e||!t)return;const n=[].slice.call(e.$.content.childNodes);for(let a=0;a<n.length;a++)t.appendChild(n[a])}_tabsChangeHandler(e){const t=this;if(e.target===t.$.tabsElement&&t.autoHide){if(t._autoHideWindow||t._handleAutoHideWindow(!0),null!==e.detail.oldIndex&&t._autoHideWindow.opened&&(t.$.tabsElement._tabs[e.detail.oldIndex]._autoHideWindowSize=t._autoHideWindow.style["right"===t.$.tabsElement.tabPosition||"left"===t.$.tabsElement.tabPosition?"width":"height"]),!t.autoHide||null==e.detail.index)return t._autoHideWindow.setAttribute("active",""),void t._autoHideWindow.close();t._handleAutoHide(e.detail.index)}}_tabsFocusHandler(e){const t=this;"focus"===e.type?(t.bringToFront(),t.setAttribute("focus","")):t.removeAttribute("focus")}}),Smart("smart-wait-window",class extends Smart.ProgressWindow{static get properties(){return{headerButtons:{value:[],type:"array"},disableSnap:{value:!0,readOnly:!0,type:"boolean"},modal:{value:!0,readOnly:!0,type:"boolean",defaultReflectToAttribute:!0},pinned:{value:!0,type:"boolean",readOnly:!0}}}template(){return'<div role="presentation">\n                    <div class="smart-content-container" id="container">\n                        <div id="headerSection" class="smart-header-section" role="heading" aria-level="1">\n                            <div id="header" class="smart-header">[[label]]</div>\n                            <div id="buttonsContainer" class="smart-buttons-container">\n                                <button id="closeButton" class="smart-button smart-element smart-close-button" aria-label="Close"></button>\n                            </div>\n                        </div>\n                        <div class="smart-content">\n                            <content></content>\n                            <smart-progress-bar id="progressBar" animation="[[animation]]" indeterminate theme="[[theme]]" right-to-left="[[rightToLeft]]"></smart-progress-bar>\n                        </div>\n                        <div id="footer" class="smart-footer"></div>\n                    </div>\n                </div>'}_keyDownHandler(e){const t=this;function n(){t._dragDetails&&(t._dragDetails.started=!1),t.$.removeClass("no-transition")}if(delete t._changingFocus,t.disabled||t._dragDetails&&t._dragDetails.started)return;const a=t.shadowRoot||t._windowParent.element.getRootNode()?t._windowParent.element.getRootNode().activeElement:document.activeElement;e.stopPropagation();const i="ArrowDown"===e.key||"ArrowRight"===e.key?10:-10;switch(t.$.removeClass("no-transition"),e.key){case"ArrowUp":case"ArrowDown":if(a!==t)return;if(e.preventDefault(),e.altKey)return"ArrowUp"===e.key?t.maximize():t.restore(),void n();if(t.$.addClass("no-transition"),e.ctrlKey)return t._resize("bottom",i),void n();t._drag(i,"vertical");break;case"ArrowLeft":case"ArrowRight":if(a!==t)return;if(e.preventDefault(),t.$.addClass("no-transition"),e.ctrlKey)return t._resize("right",i),void n();t._drag(i,"horizontal");break;case"Tab":t.opened&&t.modal&&(t._changingFocus=!0);break;case"Enter":case" ":{let o;if(t.shadowRoot||t.isInShadowDOM?(o=e.composedPath()[0],t._buttonPressed=o.getRootNode().host):(o=e.target.closest&&e.target.closest(".smart-button"),t._buttonPressed=o),!o)return;t._isWindowButton(o),delete t._buttonPressed;break}}n()}})}},ge={};function I(e){var t=ge[e];if(void 0!==t)return t.exports;var n=ge[e]={exports:{}};return he[e](n,n.exports,I),n.exports}I.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return I.d(t,{a:t}),t},I.d=(e,t)=>{for(var n in t)I.o(t,n)&&!I.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},I.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";I(2737),I(6321),I(2612),I(9135),I(5707),I(7650),I(1139),I(3911),I(1115),I(5839),I(8466),Smart,Smart,Smart,Smart,Smart,Smart,Smart,Smart})()})()}}]);