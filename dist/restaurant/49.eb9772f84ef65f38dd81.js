"use strict";(self.webpackChunkang_fire=self.webpackChunkang_fire||[]).push([[49],{756:(A,M,s)=>{s.d(M,{Bt:()=>c.Bt});var c=s(9665)},49:(A,M,s)=>{s.r(M),s.d(M,{MenuPageModule:()=>We});var c=s(6274),f=s(8718),e=s(2741),v=s(8088),y=s(7632);let a=(()=>{class o{constructor(){this.navLinks=[{text:"All Menu Groups",url:"/home/menu/all-menu-groups",icon:"bi bi-list-ul"},{text:"All Menu Items",url:"/home/menu/all-menu-items",icon:"bi bi-list-ul"}]}ngOnInit(){}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["app-menu-page"]],decls:6,vars:4,consts:[[3,"navBrand","source"],["id","wrapper"],[3,"navLinks","heading"],["id","content-wrapper",1,"d-flex","flex-column"],["id","content"]],template:function(t,n){1&t&&(e.\u0275\u0275element(0,"app-main-navbar",0),e.\u0275\u0275elementStart(1,"div",1),e.\u0275\u0275element(2,"app-module-sidenav",2),e.\u0275\u0275elementStart(3,"div",3),e.\u0275\u0275elementStart(4,"div",4),e.\u0275\u0275element(5,"router-outlet"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275property("navBrand","nR Restaurant")("source","Restaurant"),e.\u0275\u0275advance(2),e.\u0275\u0275property("navLinks",n.navLinks)("heading","Menu"))},directives:[v.D,y.m,f.lC],styles:[""]}),o})();var u=s(8361),p=s.n(u),h=s(1580),I=s(8512),b=s(8972),x=s(6508);const Q=["connectionToastComponentReference"];let T=(()=>{class o{constructor(t){this.menuApi=t,this.navHeading=[{text:"Dashboard",url:"/home/menu/dashboard"}],this.weekMenuGroupsCount=0,this.weekMenuItemsCount=0,this.menuGroupsLineChartData=[{data:[0],label:"Menu Groups"}],this.menuGroupsLineChartLabels=[""],this.menuItemsLineChartData=[{data:[0],label:"Menu Items"}],this.menuItemsLineChartLabels=[""],this.chartOptions={},this.today=p()()}ngOnInit(){this.initChart(),this.getWeekMenuGroup(),this.getWeekMenuItem()}initChart(){this.chartOptions={responsive:!0,scales:{yAxes:[{min:0,ticks:{stepSize:1,beginAtZero:!0}}]}}}getWeekMenuGroup(){this.menuApi.getWeekMenuGroup(p()(this.today).add(-6,"days").toDate(),this.today.toDate()).then(t=>{console.log(t),this.weekMenuGroupsData=t.docs,this.weekMenuGroupsCount=t.docs.length,this.setMenuGroupChartData()},t=>{console.log(t),this.connectionToast.openToast()})}getWeekMenuItem(){this.menuApi.getWeekMenuItem(p()(this.today).add(-6,"days").toDate(),this.today.toDate()).then(t=>{console.log(t),this.weekMenuItemsData=t.docs,this.weekMenuItemsCount=t.docs.length,this.setMenuItemChartData()},t=>{console.log(t),this.connectionToast.openToast()})}setMenuGroupChartData(){this.menuGroupsLineChartLabels=[];for(let r=6;r>=0;r--){var t=p()(this.today).add(-r,"days");this.menuGroupsLineChartLabels.push(t.toDate().toISOString().slice(0,10))}console.log(this.menuGroupsLineChartLabels);let n=[];for(let r=6;r>=0;r--)n.push(0);console.log(n),this.weekMenuGroupsData.forEach(r=>{var l=r.data().created_at.toDate().toISOString().slice(0,10);for(let d=6;d>=0;d--)this.menuGroupsLineChartLabels[d]==l&&n[d]++}),console.log(n),this.menuGroupsLineChartData=[{data:n,label:"MenuGroups"}]}setMenuItemChartData(){this.menuItemsLineChartLabels=[];for(let r=6;r>=0;r--){var t=p()(this.today).add(-r,"days");this.menuItemsLineChartLabels.push(t.toDate().toISOString().slice(0,10))}console.log(this.menuItemsLineChartLabels);let n=[];for(let r=6;r>=0;r--)n.push(0);console.log(n),this.weekMenuItemsData.forEach(r=>{var l=r.data().created_at.toDate().toISOString().slice(0,10);for(let d=6;d>=0;d--)this.menuItemsLineChartLabels[d]==l&&n[d]++}),console.log(n),this.menuItemsLineChartData=[{data:n,label:"MenuItems"}]}}return o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275directiveInject(I.D))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["app-dashboard"]],viewQuery:function(t,n){if(1&t&&e.\u0275\u0275viewQuery(Q,5,h.Y),2&t){let r;e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(n.connectionToast=r.first)}},decls:41,vars:13,consts:[[3,"headings"],[1,"container"],[1,"row"],[1,"col-md-3","mb-4"],[1,"card","border-left-secondary","shadow","h-100","py-2"],[1,"card-body"],[1,"row","no-gutters","align-items-center"],[1,"col","mr-2"],[1,"text-xs","font-weight-bold","text-uppercase","mb-1"],[1,"h5","mb-0","font-weight-bold","text-gray-800"],[1,"col-md-8"],[1,"card","shadow","mb-4"],[1,"card-header","py-3","d-flex","flex-row","align-items-center","justify-content-between"],[1,"m-0","font-weight-bold"],[1,"chart-area"],["baseChart","",3,"datasets","labels","options","legend","chartType"],["connectionToastComponentReference",""]],template:function(t,n){1&t&&(e.\u0275\u0275element(0,"app-module-topnav",0),e.\u0275\u0275elementStart(1,"div",1),e.\u0275\u0275elementStart(2,"div",2),e.\u0275\u0275elementStart(3,"div",3),e.\u0275\u0275elementStart(4,"div",4),e.\u0275\u0275elementStart(5,"div",5),e.\u0275\u0275elementStart(6,"div",6),e.\u0275\u0275elementStart(7,"div",7),e.\u0275\u0275elementStart(8,"div",8),e.\u0275\u0275text(9,"Menu Groups this Week"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"div",9),e.\u0275\u0275text(11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"div",3),e.\u0275\u0275elementStart(13,"div",4),e.\u0275\u0275elementStart(14,"div",5),e.\u0275\u0275elementStart(15,"div",6),e.\u0275\u0275elementStart(16,"div",7),e.\u0275\u0275elementStart(17,"div",8),e.\u0275\u0275text(18,"Menu Items this Week"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"div",9),e.\u0275\u0275text(20),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(21,"div",2),e.\u0275\u0275elementStart(22,"div",10),e.\u0275\u0275elementStart(23,"div",11),e.\u0275\u0275elementStart(24,"div",12),e.\u0275\u0275elementStart(25,"h6",13),e.\u0275\u0275text(26,"Total Menu Groups by Day"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(27,"div",5),e.\u0275\u0275elementStart(28,"div",14),e.\u0275\u0275element(29,"canvas",15),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(30,"div",2),e.\u0275\u0275elementStart(31,"div",10),e.\u0275\u0275elementStart(32,"div",11),e.\u0275\u0275elementStart(33,"div",12),e.\u0275\u0275elementStart(34,"h6",13),e.\u0275\u0275text(35,"Total Menu Items by Day"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(36,"div",5),e.\u0275\u0275elementStart(37,"div",14),e.\u0275\u0275element(38,"canvas",15),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(39,"app-connection-toast",null,16)),2&t&&(e.\u0275\u0275property("headings",n.navHeading),e.\u0275\u0275advance(11),e.\u0275\u0275textInterpolate(n.weekMenuGroupsCount),e.\u0275\u0275advance(9),e.\u0275\u0275textInterpolate(n.weekMenuItemsCount),e.\u0275\u0275advance(9),e.\u0275\u0275property("datasets",n.menuGroupsLineChartData)("labels",n.menuGroupsLineChartLabels)("options",n.chartOptions)("legend",!0)("chartType","line"),e.\u0275\u0275advance(9),e.\u0275\u0275property("datasets",n.menuItemsLineChartData)("labels",n.menuItemsLineChartLabels)("options",n.chartOptions)("legend",!0)("chartType","line"))},directives:[b.H,x.jh,h.Y],styles:[""]}),o})();var m=s(3324),D=s(756);const O=["newButtonElementReference"],j=["dismissButtonElementReference"],H=["connectionToastComponentReference"];let k=(()=>{class o{constructor(t,n){this.router=t,this.menuApi=n,this.menuGroupForm=new m.cw({}),this.isMenuGroupSaving=!1}ngOnInit(){this.initMenuGroupForm()}openModal(){this.newButton.nativeElement.click()}initMenuGroupForm(){this.menuGroupForm=new m.cw({menuGroup:new m.NI(""),category:new m.NI("")})}createMenuGroup(){let t={created_at:(0,D.Bt)(),account:localStorage.getItem("restaurant_id"),menu_group:this.menuGroupForm.controls.menuGroup.value,category:this.menuGroupForm.controls.category.value};console.log(t),this.isMenuGroupSaving=!0,this.menuApi.createMenuGroup(t).then(n=>{console.log(n),n.id&&(sessionStorage.setItem("restaurant_menu_group_id",n.id),this.dismissButton.nativeElement.click(),this.router.navigateByUrl("/home/menu/view-menu-group")),this.isMenuGroupSaving=!1},n=>{console.log(n),this.isMenuGroupSaving=!1,this.connectionToast.openToast()})}}return o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275directiveInject(f.F0),e.\u0275\u0275directiveInject(I.D))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["app-new-menu-group"]],viewQuery:function(t,n){if(1&t&&(e.\u0275\u0275viewQuery(O,5,e.ElementRef),e.\u0275\u0275viewQuery(j,5,e.ElementRef),e.\u0275\u0275viewQuery(H,5,h.Y)),2&t){let r;e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(n.newButton=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(n.dismissButton=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(n.connectionToast=r.first)}},decls:32,vars:3,consts:[["data-bs-toggle","modal","data-bs-target","#newMenuGroupModal",3,"hidden"],["newButtonElementReference",""],["id","newMenuGroupModal","tabindex","-1","aria-labelledby","newMenuGroupModalLabel","aria-hidden","true",1,"modal","fade","form-modal"],[1,"modal-dialog"],[1,"modal-content"],[1,"page-form",3,"formGroup","ngSubmit"],[1,"modal-header","bg-light"],["id","newMenuGroupModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],["dismissButtonElementReference",""],[1,"modal-body"],[1,"row","mb-1"],[1,"col-md-4"],[1,"float-md-end","float-sm-start","mt-1"],[1,"col-md-8"],["formControlName","menuGroup",1,"form-control","form-control-sm","w-100"],["formControlName","category",1,"form-control","form-control-sm","w-100"],[1,"modal-footer"],["type","submit",1,"btn","btn-sm","btn-secondary","modal-form-btn",3,"disabled"],["type","button","data-bs-dismiss","modal",1,"btn","btn-sm","btn-secondary","modal-form-btn"],["connectionToastComponentReference",""]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"button",0,1),e.\u0275\u0275text(2," Launch demo modal\n"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",2),e.\u0275\u0275elementStart(4,"div",3),e.\u0275\u0275elementStart(5,"div",4),e.\u0275\u0275elementStart(6,"form",5),e.\u0275\u0275listener("ngSubmit",function(){return n.createMenuGroup()}),e.\u0275\u0275elementStart(7,"div",6),e.\u0275\u0275elementStart(8,"span",7),e.\u0275\u0275text(9,"Add New Menu Group"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(10,"button",8,9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"div",10),e.\u0275\u0275elementStart(13,"div",11),e.\u0275\u0275elementStart(14,"div",12),e.\u0275\u0275elementStart(15,"label",13),e.\u0275\u0275text(16,"Menu Group :"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"div",14),e.\u0275\u0275element(18,"input",15),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"div",11),e.\u0275\u0275elementStart(20,"div",12),e.\u0275\u0275elementStart(21,"label",13),e.\u0275\u0275text(22,"Category :"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(23,"div",14),e.\u0275\u0275element(24,"input",16),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(25,"div",17),e.\u0275\u0275elementStart(26,"button",18),e.\u0275\u0275text(27,"Save"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(28,"button",19),e.\u0275\u0275text(29,"Cancel"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(30,"app-connection-toast",null,20)),2&t&&(e.\u0275\u0275property("hidden",!0),e.\u0275\u0275advance(6),e.\u0275\u0275property("formGroup",n.menuGroupForm),e.\u0275\u0275advance(20),e.\u0275\u0275property("disabled",n.isMenuGroupSaving))},directives:[m._Y,m.JL,m.sg,m.Fj,m.JJ,m.u,h.Y],styles:[""]}),o})();var C=s(1921),Y=s(6424);let G=(()=>{class o{constructor(t,n){this.pdfPrint=t,this.menuApi=n}printAllMenuGroup(){var t=this;return(0,C.Z)(function*(){const n=yield t.menuApi.getAllAccountMenuGroup();var r=[["Menu Group","Category"]];for(let g of n.docs){var l=[];let _=g.data();l.push(_.menu_group),l.push(_.category),r.push(l)}t.pdfPrint.openPdf([{layout:"lightHorizontalLines",table:{headerRows:1,widths:["60%","40%"],body:r}}])})()}printViewMenuGroup(){var t=this;return(0,C.Z)(function*(){const n=t.menuApi.getMenuGroup(),r=t.menuApi.getMenuGroupMenuItem(),[l,d]=yield Promise.all([n,r]);let g=l.data();var _=[["Item ID","Item Name","Price"]];for(let Je of d.docs){var E=[];let w=Je.data();E.push(w.item_code),E.push(w.item_name),E.push(w.price),_.push(E)}t.pdfPrint.openPdf([{columns:[[{text:"Menu Group: "+g.menu_group},{text:"Category: "+g.category}],[]]},{text:"Menu Items",bold:!0,margin:[0,20,0,10]},{layout:"lightHorizontalLines",table:{headerRows:1,widths:["25%","50%","25%"],body:_}}])})()}printAllMenuItems(){var t=this;return(0,C.Z)(function*(){const n=yield t.menuApi.getAllAccountMenuItem();var r=[["Item ID","Item Name","Price","Menu Group","Category"]];for(let g of n.docs){var l=[];let _=g.data();l.push(_.item_code),l.push(_.item_name),l.push(_.price),l.push(_.menu_group.data.menu_group),l.push(_.menu_group.data.category),r.push(l)}t.pdfPrint.openPdf([{layout:"lightHorizontalLines",table:{headerRows:1,widths:["15%","30%","15%","20%","20%"],body:r}}])})()}}return o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275inject(Y.n),e.\u0275\u0275inject(I.D))},o.\u0275prov=e.\u0275\u0275defineInjectable({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const z=["newMenuGroupComponentReference"],W=["connectionToastComponentReference"];function U(o,i){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",32),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("menu_group","desc")}),e.\u0275\u0275elementEnd()}}function J(o,i){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",33),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("menu_group","asc")}),e.\u0275\u0275elementEnd()}}function $(o,i){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",34),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("menu_group","desc")}),e.\u0275\u0275elementEnd()}}function Z(o,i){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",32),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("category","desc")}),e.\u0275\u0275elementEnd()}}function K(o,i){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",33),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("category","asc")}),e.\u0275\u0275elementEnd()}}function X(o,i){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",34),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("category","desc")}),e.\u0275\u0275elementEnd()}}function q(o,i){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"tr",35),e.\u0275\u0275listener("dblclick",function(){const l=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275nextContext().viewMenuGroup(l.id)}),e.\u0275\u0275elementStart(1,"td"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"td"),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()}if(2&o){const t=i.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null==t?null:t.data().menu_group),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null==t?null:t.data().category)}}function ee(o,i){1&o&&(e.\u0275\u0275elementStart(0,"tr",36),e.\u0275\u0275elementStart(1,"td",20),e.\u0275\u0275elementStart(2,"div",37),e.\u0275\u0275elementStart(3,"span",38),e.\u0275\u0275text(4,"Loading..."),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd())}function te(o,i){1&o&&(e.\u0275\u0275elementStart(0,"tr",36),e.\u0275\u0275elementStart(1,"td",20),e.\u0275\u0275elementStart(2,"p",39),e.\u0275\u0275text(3,"No data available"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd())}let ne=(()=>{class o{constructor(t,n,r){this.router=t,this.menuApi=n,this.menuPrint=r,this.navHeading=[{text:"All Menu Groups",url:"/home/menu/all-menu-groups"}],this.menuGroupGridData=[],this.isFetchingGridData=!1,this.isDataAvailable=!0,this.firstInResponse=[],this.lastInResponse=[],this.nextStartAfter=[],this.prevStartAt=[],this.pageNumber=0,this.disableNext=!0,this.disablePrev=!0,this.sortParams={field:"created_at",direction:"desc"}}ngOnInit(){this.getAccountMenuGroup()}getAccountMenuGroup(){this.isFetchingGridData=!0,this.menuApi.getAccountMenuGroup(this.sortParams,20).then(t=>{console.log(t),this.menuGroupGridData=t.docs,this.isFetchingGridData=!1,this.prevStartAt=this.firstInResponse,this.nextStartAfter=t.docs[t.docs.length-1],this.firstInResponse=t.docs[0],this.pageNumber=1,this.isDataAvailable=!!t.docs.length,!t.docs.length||t.docs.length<20?(this.disableNext=!0,this.disablePrev=!0):(this.disableNext=!1,this.disablePrev=!0)},t=>{console.log(t),this.isFetchingGridData=!1,this.connectionToast.openToast()})}nextPage(t){t.preventDefault(),this.isFetchingGridData=!0,this.menuApi.getAccountMenuGroupNext(this.sortParams,20,this.nextStartAfter).then(n=>{console.log(n),this.menuGroupGridData=n.docs,this.isFetchingGridData=!1,this.prevStartAt=this.firstInResponse,this.nextStartAfter=n.docs[n.docs.length-1],this.firstInResponse=n.docs[0],this.pageNumber++,n.docs.length<20&&(this.disableNext=!0,this.disablePrev=!1)},n=>{console.log(n),this.isFetchingGridData=!1,this.connectionToast.openToast()})}previousPage(t){t.preventDefault(),this.isFetchingGridData=!0,this.menuApi.getAccountMenuGroupPrev(this.sortParams,20,this.prevStartAt).then(n=>{console.log(n),this.menuGroupGridData=n.docs,this.isFetchingGridData=!1,n.docs.length||(this.isDataAvailable=!1),this.prevStartAt=this.firstInResponse,this.nextStartAfter=n.docs[n.docs.length-1],this.firstInResponse=n.docs[0],this.pageNumber--,1==this.pageNumber&&(this.disableNext=!1,this.disablePrev=!0)},n=>{console.log(n),this.isFetchingGridData=!1,this.connectionToast.openToast()})}sortTable(t,n){this.sortParams.field=t,this.sortParams.direction=n,this.getAccountMenuGroup()}viewMenuGroup(t){console.log(t),sessionStorage.setItem("restaurant_menu_group_id",t),this.router.navigateByUrl("/home/menu/view-menu-group")}onPrint(){console.log("lets start printing..."),this.menuPrint.printAllMenuGroup()}}return o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275directiveInject(f.F0),e.\u0275\u0275directiveInject(I.D),e.\u0275\u0275directiveInject(G))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["app-all-menu-groups"]],viewQuery:function(t,n){if(1&t&&(e.\u0275\u0275viewQuery(z,5,k),e.\u0275\u0275viewQuery(W,5,h.Y)),2&t){let r;e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(n.newMenuGroup=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(n.connectionToast=r.first)}},decls:47,vars:15,consts:[[3,"headings","showPrint","print"],[1,"container"],["print",""],[1,"row"],[1,"col-md-7"],[1,"row","mb-3"],[1,"col-md-12"],[1,"btn","btn-secondary","page-add-btn",3,"click"],[1,"btn","btn-light","border","float-end","page-refresh-btn",3,"disabled","click"],[1,"bi","bi-arrow-clockwise"],[1,"overflow-auto"],[1,"table","table-bordered","table-sm","w-100","page-table"],[1,"bg-light"],["width","60%",1,"min-width-4"],["class","bi bi-filter float-end list-pointer",3,"click",4,"ngIf"],["class","bi bi-sort-down float-end list-pointer",3,"click",4,"ngIf"],["class","bi bi-sort-up float-end list-pointer",3,"click",4,"ngIf"],["width","40%",1,"min-width-3"],["class","table-pointer",3,"dblclick",4,"ngFor","ngForOf"],["class","text-center",4,"ngIf"],["colspan","2"],["aria-label","Page navigation",1,"nav-light","float-end"],[1,"pagination","pagination-sm","mb-0","justify-content-end"],[1,"page-item",3,"ngClass"],["href","#","aria-label","First",1,"page-link",3,"click"],[1,"bi","bi-caret-left-fill"],[1,"page-item"],["href","#","aria-label","Current",1,"page-link",3,"click"],["href","#","aria-label","Last",1,"page-link",3,"click"],[1,"bi","bi-caret-right-fill"],["newMenuGroupComponentReference",""],["connectionToastComponentReference",""],[1,"bi","bi-filter","float-end","list-pointer",3,"click"],[1,"bi","bi-sort-down","float-end","list-pointer",3,"click"],[1,"bi","bi-sort-up","float-end","list-pointer",3,"click"],[1,"table-pointer",3,"dblclick"],[1,"text-center"],["role","status",1,"spinner-grow","m-4"],[1,"visually-hidden"],[1,"m-4"]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"app-module-topnav",0),e.\u0275\u0275listener("print",function(){return n.onPrint()}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(1,"div",1,2),e.\u0275\u0275elementStart(3,"div",3),e.\u0275\u0275elementStart(4,"div",4),e.\u0275\u0275elementStart(5,"div",5),e.\u0275\u0275elementStart(6,"div",6),e.\u0275\u0275elementStart(7,"button",7),e.\u0275\u0275listener("click",function(){return n.newMenuGroup.openModal()}),e.\u0275\u0275text(8,"New Menu Group"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"button",8),e.\u0275\u0275listener("click",function(){return n.getAccountMenuGroup()}),e.\u0275\u0275element(10,"i",9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"div",10),e.\u0275\u0275elementStart(12,"table",11),e.\u0275\u0275elementStart(13,"thead"),e.\u0275\u0275elementStart(14,"tr",12),e.\u0275\u0275elementStart(15,"th",13),e.\u0275\u0275text(16," Menu Group "),e.\u0275\u0275template(17,U,1,0,"i",14),e.\u0275\u0275template(18,J,1,0,"i",15),e.\u0275\u0275template(19,$,1,0,"i",16),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"th",17),e.\u0275\u0275text(21," Category "),e.\u0275\u0275template(22,Z,1,0,"i",14),e.\u0275\u0275template(23,K,1,0,"i",15),e.\u0275\u0275template(24,X,1,0,"i",16),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(25,"tbody"),e.\u0275\u0275template(26,q,5,2,"tr",18),e.\u0275\u0275template(27,ee,5,0,"tr",19),e.\u0275\u0275template(28,te,4,0,"tr",19),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(29,"tfoot"),e.\u0275\u0275elementStart(30,"tr",12),e.\u0275\u0275elementStart(31,"td",20),e.\u0275\u0275elementStart(32,"nav",21),e.\u0275\u0275elementStart(33,"ul",22),e.\u0275\u0275elementStart(34,"li",23),e.\u0275\u0275elementStart(35,"a",24),e.\u0275\u0275listener("click",function(l){return n.previousPage(l)}),e.\u0275\u0275element(36,"i",25),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(37,"li",26),e.\u0275\u0275elementStart(38,"a",27),e.\u0275\u0275listener("click",function(l){return l.preventDefault()}),e.\u0275\u0275text(39),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(40,"li",23),e.\u0275\u0275elementStart(41,"a",28),e.\u0275\u0275listener("click",function(l){return n.nextPage(l)}),e.\u0275\u0275element(42,"i",29),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(43,"app-new-menu-group",null,30),e.\u0275\u0275element(45,"app-connection-toast",null,31)),2&t&&(e.\u0275\u0275property("headings",n.navHeading)("showPrint",!0),e.\u0275\u0275advance(9),e.\u0275\u0275property("disabled",n.isFetchingGridData),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf","menu_group"!=n.sortParams.field),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","menu_group"==n.sortParams.field&&"desc"==n.sortParams.direction),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","menu_group"==n.sortParams.field&&"asc"==n.sortParams.direction),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf","category"!=n.sortParams.field),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","category"==n.sortParams.field&&"desc"==n.sortParams.direction),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","category"==n.sortParams.field&&"asc"==n.sortParams.direction),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",n.menuGroupGridData),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.isFetchingGridData),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!n.isDataAvailable&&!n.isFetchingGridData),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngClass",n.disablePrev?"disabled":""),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate1(" ",n.pageNumber," "),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",n.disableNext?"disabled":""))},directives:[b.H,c.O5,c.sg,c.mk,k,h.Y],styles:[""]}),o})();var F=s(7813),P=s(4154);const oe=["imageInputComponentReference"];let S=(()=>{class o{constructor(){this.menuItemForm=new m.cw({})}ngOnInit(){this.initMenuItemForm()}initMenuItemForm(){this.menuItemForm=new m.cw({itemCode:new m.NI(""),itemName:new m.NI(""),price:new m.NI(1)})}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["app-menu-item-form"]],viewQuery:function(t,n){if(1&t&&e.\u0275\u0275viewQuery(oe,5,P.F),2&t){let r;e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(n.image=r.first)}},decls:26,vars:4,consts:[[1,"page-form",3,"formGroup"],[1,"row","mb-1"],[1,"col-md-4"],[1,"float-md-end","float-sm-start","mt-1"],[1,"col-md-8"],["formControlName","itemCode",1,"form-control","form-control-sm","w-100"],["formControlName","itemName",1,"form-control","form-control-sm","w-100"],["type","number","min","1.00","step",".01","formControlName","price",1,"form-control","form-control-sm","w-100"],[3,"width","height","imgType"],["imageInputComponentReference",""]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"form",0),e.\u0275\u0275elementStart(1,"div",1),e.\u0275\u0275elementStart(2,"div",2),e.\u0275\u0275elementStart(3,"label",3),e.\u0275\u0275text(4,"Item ID :"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"div",4),e.\u0275\u0275element(6,"input",5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"div",1),e.\u0275\u0275elementStart(8,"div",2),e.\u0275\u0275elementStart(9,"label",3),e.\u0275\u0275text(10,"Item Name :"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"div",4),e.\u0275\u0275element(12,"input",6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"div",1),e.\u0275\u0275elementStart(14,"div",2),e.\u0275\u0275elementStart(15,"label",3),e.\u0275\u0275text(16,"Price :"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"div",4),e.\u0275\u0275element(18,"input",7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"div",1),e.\u0275\u0275elementStart(20,"div",2),e.\u0275\u0275elementStart(21,"label",3),e.\u0275\u0275text(22,"Item Image :"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(23,"div",4),e.\u0275\u0275element(24,"app-image-input",8,9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275property("formGroup",n.menuItemForm),e.\u0275\u0275advance(24),e.\u0275\u0275property("width",160)("height",120)("imgType","logo"))},directives:[m._Y,m.JL,m.sg,m.Fj,m.JJ,m.u,m.qQ,m.wV,P.F],styles:[""]}),o})();const re=["addButtonElementReference"],ie=["dismissButtonElementReference"],ae=["menuItemFormComponentReference"];let R=(()=>{class o{constructor(){this.saveMenuItemEvent=new e.EventEmitter,this.isMenuItemSaving=!1}ngOnInit(){}openModal(){this.menuItemForm.menuItemForm.controls.price.setValue(1),this.addButton.nativeElement.click()}saveMenuItem(){let t={created_at:(0,D.Bt)(),item_code:this.menuItemForm.menuItemForm.controls.itemCode.value,item_name:this.menuItemForm.menuItemForm.controls.itemName.value,price:this.menuItemForm.menuItemForm.controls.price.value,image:"",menu_group:{id:sessionStorage.getItem("restaurant_menu_group_id"),data:this.menuGroupData}};this.saveMenuItemEvent.emit(t)}resetForm(){this.menuItemForm.menuItemForm.controls.itemCode.setValue(""),this.menuItemForm.menuItemForm.controls.itemName.setValue(""),this.menuItemForm.menuItemForm.controls.price.setValue(1),this.menuItemForm.image.setPlaceholderImage()}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["app-add-menu-item"]],viewQuery:function(t,n){if(1&t&&(e.\u0275\u0275viewQuery(re,5,e.ElementRef),e.\u0275\u0275viewQuery(ie,5,e.ElementRef),e.\u0275\u0275viewQuery(ae,5,S)),2&t){let r;e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(n.addButton=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(n.dismissButton=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(n.menuItemForm=r.first)}},outputs:{saveMenuItemEvent:"saveMenuItemEvent"},decls:19,vars:2,consts:[["data-bs-toggle","modal","data-bs-target","#addMenuItemModal",3,"hidden"],["addButtonElementReference",""],["id","addMenuItemModal","tabindex","-1","aria-labelledby","addMenuItemModalLabel","aria-hidden","true",1,"modal","fade","form-modal"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header","bg-light"],["id","addMenuItemModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],["dismissButtonElementReference",""],[1,"modal-body"],["menuItemFormComponentReference",""],[1,"modal-footer"],[1,"btn","btn-sm","btn-secondary","modal-form-btn",3,"disabled","click"],["data-bs-dismiss","modal",1,"btn","btn-sm","btn-secondary","modal-form-btn"]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"button",0,1),e.\u0275\u0275text(2," Launch demo modal\n"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",2),e.\u0275\u0275elementStart(4,"div",3),e.\u0275\u0275elementStart(5,"div",4),e.\u0275\u0275elementStart(6,"div",5),e.\u0275\u0275elementStart(7,"span",6),e.\u0275\u0275text(8,"Add Item"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(9,"button",7,8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"div",9),e.\u0275\u0275element(12,"app-menu-item-form",null,10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"div",11),e.\u0275\u0275elementStart(15,"button",12),e.\u0275\u0275listener("click",function(){return n.saveMenuItem()}),e.\u0275\u0275text(16,"Save"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"button",13),e.\u0275\u0275text(18,"Cancel"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275property("hidden",!0),e.\u0275\u0275advance(15),e.\u0275\u0275property("disabled",n.isMenuItemSaving))},directives:[S],styles:[""]}),o})();const le=["editButtonElementReference"],me=["dismissButtonElementReference"],se=["menuItemFormComponentReference"];let V=(()=>{class o{constructor(){this.saveMenuItemEvent=new e.EventEmitter,this.deleteMenuItemEvent=new e.EventEmitter,this.isMenuItemSaving=!1,this.isMenuItemDeleting=!1}ngOnInit(){}openModal(t){this.menuItemData=t,this.menuItemForm.menuItemForm.controls.itemCode.setValue(t.data().item_code),this.menuItemForm.menuItemForm.controls.itemName.setValue(t.data().item_name),this.menuItemForm.menuItemForm.controls.price.setValue(t.data().price),""!=t.data().image&&(this.menuItemForm.image.imgSrc=t.data().image),this.editButton.nativeElement.click()}saveMenuItem(){this.saveMenuItemEvent.emit({id:this.menuItemData.id,data:{item_code:this.menuItemForm.menuItemForm.controls.itemCode.value,item_name:this.menuItemForm.menuItemForm.controls.itemName.value,price:this.menuItemForm.menuItemForm.controls.price.value}})}deleteMenuItem(){this.deleteMenuItemEvent.emit(this.menuItemData.id)}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["app-edit-menu-item"]],viewQuery:function(t,n){if(1&t&&(e.\u0275\u0275viewQuery(le,5,e.ElementRef),e.\u0275\u0275viewQuery(me,5,e.ElementRef),e.\u0275\u0275viewQuery(se,5,S)),2&t){let r;e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(n.editButton=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(n.dismissButton=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(n.menuItemForm=r.first)}},outputs:{saveMenuItemEvent:"saveMenuItemEvent",deleteMenuItemEvent:"deleteMenuItemEvent"},decls:21,vars:3,consts:[["data-bs-toggle","modal","data-bs-target","#editMenuItemModal",3,"hidden"],["editButtonElementReference",""],["id","editMenuItemModal","tabindex","-1","aria-labelledby","editMenuItemModalLabel","aria-hidden","true",1,"modal","fade","form-modal"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header","bg-light"],["id","editMenuItemModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],["dismissButtonElementReference",""],[1,"modal-body"],["menuItemFormComponentReference",""],[1,"modal-footer"],[1,"btn","btn-sm","btn-secondary","modal-form-btn",3,"disabled","click"],["data-bs-dismiss","modal",1,"btn","btn-sm","btn-secondary","modal-form-btn"]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"button",0,1),e.\u0275\u0275text(2," Launch demo modal\n"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",2),e.\u0275\u0275elementStart(4,"div",3),e.\u0275\u0275elementStart(5,"div",4),e.\u0275\u0275elementStart(6,"div",5),e.\u0275\u0275elementStart(7,"span",6),e.\u0275\u0275text(8,"Edit Item"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(9,"button",7,8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"div",9),e.\u0275\u0275element(12,"app-menu-item-form",null,10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"div",11),e.\u0275\u0275elementStart(15,"button",12),e.\u0275\u0275listener("click",function(){return n.saveMenuItem()}),e.\u0275\u0275text(16,"Save"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"button",12),e.\u0275\u0275listener("click",function(){return n.deleteMenuItem()}),e.\u0275\u0275text(18,"Delete"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"button",13),e.\u0275\u0275text(20,"Cancel"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275property("hidden",!0),e.\u0275\u0275advance(15),e.\u0275\u0275property("disabled",n.isMenuItemSaving),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",n.isMenuItemDeleting))},directives:[S],styles:[""]}),o})();var ue=s(4477);const de=["addMenuItemComponentReference"],ce=["editMenuItemComponentReference"],pe=["connectionToastComponentReference"],he=["modalButtonElementReference"];function fe(o,i){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"tr",25),e.\u0275\u0275listener("dblclick",function(){const l=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275nextContext().openEditMenuItem(l)}),e.\u0275\u0275elementStart(1,"td"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"td"),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"td"),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()}if(2&o){const t=i.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null==t?null:t.data().item_code),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null==t?null:t.data().item_name),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null==t?null:t.data().price)}}function _e(o,i){1&o&&(e.\u0275\u0275elementStart(0,"tr",26),e.\u0275\u0275elementStart(1,"td",27),e.\u0275\u0275elementStart(2,"div",28),e.\u0275\u0275elementStart(3,"span",29),e.\u0275\u0275text(4,"Loading..."),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd())}let L=(()=>{class o{constructor(t,n){this.storage=t,this.menuApi=n,this.storageBasePath="/restaurant/"+localStorage.getItem("restaurant_id")+"/module_menu/",this.menuItemsGridData=[],this.deleteId="",this.isFetchingGridData=!1}ngOnInit(){this.getMenuGroupMenuItem()}getMenuGroupMenuItem(){this.isFetchingGridData=!0,this.menuApi.getMenuGroupMenuItem().then(t=>{console.log(t),this.menuItemsGridData=t.docs,this.isFetchingGridData=!1},t=>{console.log(t),this.isFetchingGridData=!1,this.connectionToast.openToast()})}createMenuItem(t){console.log(t),this.addMenuItem.isMenuItemSaving=!0,this.menuApi.createMenuItem(t).then(n=>{if(console.log(n),this.addMenuItem.menuItemForm.image.isImageSet){const r=this.storageBasePath+n.id,l=this.storage.ref(r);this.storage.upload(r,this.addMenuItem.menuItemForm.image.image).snapshotChanges().pipe((0,F.x)(()=>{l.getDownloadURL().subscribe(g=>{this.updateImage(n.id,{image:g})})})).subscribe()}else this.addMenuItem.isMenuItemSaving=!1,this.addMenuItem.dismissButton.nativeElement.click(),this.addMenuItem.resetForm(),this.getMenuGroupMenuItem()},n=>{console.log(n),this.addMenuItem.dismissButton.nativeElement.click(),this.addMenuItem.isMenuItemSaving=!1,this.connectionToast.openToast()})}updateMenuItem(t){this.editMenuItem.isMenuItemSaving=!0,console.log(t),this.menuApi.updateMenuItem(t.id,t.data).then(n=>{if(console.log(n),this.editMenuItem.menuItemForm.image.isImageSet){const r=this.storageBasePath+t.id,l=this.storage.ref(r);this.storage.upload(r,this.editMenuItem.menuItemForm.image.image).snapshotChanges().pipe((0,F.x)(()=>{l.getDownloadURL().subscribe(g=>{this.updateImage(t.id,{image:g})})})).subscribe()}else this.editMenuItem.isMenuItemSaving=!1,this.editMenuItem.dismissButton.nativeElement.click(),this.getMenuGroupMenuItem()},n=>{console.log(n),this.editMenuItem.dismissButton.nativeElement.click(),this.editMenuItem.isMenuItemSaving=!1,this.connectionToast.openToast()})}deleteMenuItem(){this.editMenuItem.isMenuItemDeleting=!0,this.menuApi.deleteMenuItem(this.deleteId).then(t=>{console.log(t),this.editMenuItem.isMenuItemDeleting=!1,this.editMenuItem.dismissButton.nativeElement.click(),this.getMenuGroupMenuItem()},t=>{console.log(t),this.editMenuItem.isMenuItemDeleting=!1,this.editMenuItem.dismissButton.nativeElement.click(),this.connectionToast.openToast()})}updateImage(t,n){console.log("u are updating menu item image url"),console.log(n),this.menuApi.updateMenuItem(t,n).then(r=>{console.log(r),this.addMenuItem.dismissButton.nativeElement.click(),this.editMenuItem.dismissButton.nativeElement.click(),this.addMenuItem.resetForm(),this.getMenuGroupMenuItem()},r=>{console.log(r),this.connectionToast.openToast()})}openEditMenuItem(t){console.log(t),this.editMenuItem.openModal(t)}confirmDelete(t){this.deleteId=t,this.modalButton.nativeElement.click()}}return o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275directiveInject(ue.Q1),e.\u0275\u0275directiveInject(I.D))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["app-menu-items"]],viewQuery:function(t,n){if(1&t&&(e.\u0275\u0275viewQuery(de,5,R),e.\u0275\u0275viewQuery(ce,5,V),e.\u0275\u0275viewQuery(pe,5,h.Y),e.\u0275\u0275viewQuery(he,5,e.ElementRef)),2&t){let r;e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(n.addMenuItem=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(n.editMenuItem=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(n.connectionToast=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(n.modalButton=r.first)}},decls:37,vars:3,consts:[[1,"row","mb-3"],[1,"col-md-12"],[1,"btn","btn-secondary","page-add-btn",3,"click"],[1,"overflow-auto"],[1,"table","table-bordered","table-sm","w-100","page-table"],[1,"bg-light"],["width","25%",1,"min-width-2"],["width","50%",1,"min-width-3"],["class","table-pointer",3,"dblclick",4,"ngFor","ngForOf"],["class","text-center",4,"ngIf"],["data-bs-toggle","modal","data-bs-target","#pageDeleteConfirmationModal",3,"hidden"],["modalButtonElementReference",""],["id","pageDeleteConfirmationModal","tabindex","-1","aria-labelledby","pageDeleteConfirmationModalLabel","aria-hidden","true",1,"modal","fade","form-modal"],[1,"modal-dialog"],[1,"modal-content","text-center"],[1,"modal-body"],[1,"pt-4"],[1,"modal-footer"],["data-bs-dismiss","modal",1,"btn","btn-sm","btn-secondary","modal-form-btn",3,"click"],["data-bs-dismiss","modal",1,"btn","btn-sm","btn-secondary","modal-form-btn"],[3,"saveMenuItemEvent"],["addMenuItemComponentReference",""],[3,"saveMenuItemEvent","deleteMenuItemEvent"],["editMenuItemComponentReference",""],["connectionToastComponentReference",""],[1,"table-pointer",3,"dblclick"],[1,"text-center"],["colspan","5"],["role","status",1,"spinner-grow","m-2"],[1,"visually-hidden"]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275elementStart(1,"div",1),e.\u0275\u0275elementStart(2,"button",2),e.\u0275\u0275listener("click",function(){return n.addMenuItem.openModal()}),e.\u0275\u0275text(3,"Add Item"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",3),e.\u0275\u0275elementStart(5,"table",4),e.\u0275\u0275elementStart(6,"thead"),e.\u0275\u0275elementStart(7,"tr",5),e.\u0275\u0275elementStart(8,"th",6),e.\u0275\u0275text(9,"Item ID"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"th",7),e.\u0275\u0275text(11,"Item Name"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"th",6),e.\u0275\u0275text(13,"Price"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"tbody"),e.\u0275\u0275template(15,fe,7,3,"tr",8),e.\u0275\u0275template(16,_e,5,0,"tr",9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"button",10,11),e.\u0275\u0275text(19," Launch demo modal\n"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"div",12),e.\u0275\u0275elementStart(21,"div",13),e.\u0275\u0275elementStart(22,"div",14),e.\u0275\u0275elementStart(23,"div",15),e.\u0275\u0275elementStart(24,"p",16),e.\u0275\u0275text(25,"Are you sure you want to delete this item?"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(26,"div",17),e.\u0275\u0275elementStart(27,"button",18),e.\u0275\u0275listener("click",function(){return n.deleteMenuItem()}),e.\u0275\u0275text(28,"Yes"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(29,"button",19),e.\u0275\u0275text(30,"No"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(31,"app-add-menu-item",20,21),e.\u0275\u0275listener("saveMenuItemEvent",function(l){return n.createMenuItem(l)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(33,"app-edit-menu-item",22,23),e.\u0275\u0275listener("saveMenuItemEvent",function(l){return n.updateMenuItem(l)})("deleteMenuItemEvent",function(l){return n.confirmDelete(l)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(35,"app-connection-toast",null,24)),2&t&&(e.\u0275\u0275advance(15),e.\u0275\u0275property("ngForOf",n.menuItemsGridData),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.isFetchingGridData),e.\u0275\u0275advance(1),e.\u0275\u0275property("hidden",!0))},directives:[c.sg,c.O5,R,V,h.Y],styles:["#pageDeleteConfirmationModal[_ngcontent-%COMP%]{z-index:1080}"]}),o})();var N=s(8622);const ge=["menuItemsComponentReference"],ve=["connectionToastComponentReference"],Ie=["deleteModalComponentReference"];function Me(o,i){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",13),e.\u0275\u0275elementStart(1,"div",20),e.\u0275\u0275elementStart(2,"button",21),e.\u0275\u0275text(3,"Cancel"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"button",22),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().confirmDelete()}),e.\u0275\u0275text(5,"Delete"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"button",23),e.\u0275\u0275text(7,"Save"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()}if(2&o){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(6),e.\u0275\u0275property("disabled",t.isMenuGroupSaving)}}function be(o,i){1&o&&(e.\u0275\u0275elementStart(0,"div",13),e.\u0275\u0275elementStart(1,"div",20),e.\u0275\u0275elementStart(2,"button",24),e.\u0275\u0275elementStart(3,"div",25),e.\u0275\u0275elementStart(4,"span",26),e.\u0275\u0275text(5,"Loading..."),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd())}const Ee=["connectionToastComponentReference"];function ye(o,i){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",31),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("item_code","desc")}),e.\u0275\u0275elementEnd()}}function Ce(o,i){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",32),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("item_code","asc")}),e.\u0275\u0275elementEnd()}}function Ge(o,i){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",33),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("item_code","desc")}),e.\u0275\u0275elementEnd()}}function we(o,i){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",31),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("item_name","desc")}),e.\u0275\u0275elementEnd()}}function Ae(o,i){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",32),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("item_name","asc")}),e.\u0275\u0275elementEnd()}}function xe(o,i){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",33),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("item_name","desc")}),e.\u0275\u0275elementEnd()}}function Te(o,i){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",31),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("price","desc")}),e.\u0275\u0275elementEnd()}}function De(o,i){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",32),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("price","asc")}),e.\u0275\u0275elementEnd()}}function ke(o,i){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",33),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("price","desc")}),e.\u0275\u0275elementEnd()}}function Fe(o,i){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",31),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("menu_group","desc")}),e.\u0275\u0275elementEnd()}}function Pe(o,i){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",32),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("menu_group","asc")}),e.\u0275\u0275elementEnd()}}function Re(o,i){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",33),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("menu_group","desc")}),e.\u0275\u0275elementEnd()}}function Ve(o,i){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",31),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("category","desc")}),e.\u0275\u0275elementEnd()}}function Le(o,i){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",32),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("category","asc")}),e.\u0275\u0275elementEnd()}}function Ne(o,i){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",33),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("category","desc")}),e.\u0275\u0275elementEnd()}}function Be(o,i){if(1&o&&(e.\u0275\u0275elementStart(0,"tr"),e.\u0275\u0275elementStart(1,"td"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"td"),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"td"),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"td"),e.\u0275\u0275text(8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"td"),e.\u0275\u0275text(10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()),2&o){const t=i.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null==t?null:t.data().item_code),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null==t?null:t.data().item_name),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null==t?null:t.data().price),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null==t?null:t.data().menu_group.data.menu_group),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null==t?null:t.data().menu_group.data.category)}}function Qe(o,i){1&o&&(e.\u0275\u0275elementStart(0,"tr",34),e.\u0275\u0275elementStart(1,"td",20),e.\u0275\u0275elementStart(2,"div",35),e.\u0275\u0275elementStart(3,"span",36),e.\u0275\u0275text(4,"Loading..."),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd())}function Oe(o,i){1&o&&(e.\u0275\u0275elementStart(0,"tr",34),e.\u0275\u0275elementStart(1,"td",20),e.\u0275\u0275elementStart(2,"p",37),e.\u0275\u0275text(3,"No data available"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd())}const je=[{path:"",component:a,children:[{path:"",component:T},{path:"dashboard",component:T},{path:"all-menu-groups",component:ne},{path:"view-menu-group",component:(()=>{class o{constructor(t,n,r){this.router=t,this.menuApi=n,this.menuPrint=r,this.navHeading=[{text:"All Menu Groups",url:"/home/menu/all-menu-groups"},{text:"View Menu Group",url:"/home/menu/view-menu-group"}],this.menuGroupForm=new m.cw({}),this.isMenuGroupLoading=!1,this.isMenuGroupSaving=!1,this.isMenuGroupDeleting=!1}ngOnInit(){this.initBudgetForm(),this.getMenuGroup()}initBudgetForm(){this.menuGroupForm=new m.cw({menuGroup:new m.NI(""),category:new m.NI("")})}getMenuGroup(){this.isMenuGroupLoading=!0,this.menuApi.getMenuGroup().then(t=>{console.log(t),this.menuGroupFormData=t,this.menuItems.addMenuItem.menuGroupData=t.data(),this.menuGroupForm.controls.menuGroup.setValue(this.menuGroupFormData.data().menu_group),this.menuGroupForm.controls.category.setValue(this.menuGroupFormData.data().category),this.isMenuGroupLoading=!1},t=>{console.log(t),this.isMenuGroupLoading=!1,this.connectionToast.openToast()})}updateMenuGroup(){console.log("u are updating a menu group");let t={menu_group:this.menuGroupForm.controls.menuGroup.value,category:this.menuGroupForm.controls.category.value};this.isMenuGroupSaving=!0,this.menuApi.updateMenuGroup(t).then(n=>{console.log(n),this.isMenuGroupSaving=!1},n=>{console.log(n),this.isMenuGroupSaving=!1,this.connectionToast.openToast()}),console.log(t)}confirmDelete(){this.deleteModal.openModal()}deleteMenuGroup(){this.isMenuGroupDeleting=!0,this.menuApi.deleteMenuGroup().then(t=>{console.log(t),this.router.navigateByUrl("/home/menu/all-menu-groups")},t=>{console.log(t),this.connectionToast.openToast()})}onPrint(){console.log("lets start printing..."),this.menuPrint.printViewMenuGroup()}}return o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275directiveInject(f.F0),e.\u0275\u0275directiveInject(I.D),e.\u0275\u0275directiveInject(G))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["app-view-menu-group"]],viewQuery:function(t,n){if(1&t&&(e.\u0275\u0275viewQuery(ge,5,L),e.\u0275\u0275viewQuery(ve,5,h.Y),e.\u0275\u0275viewQuery(Ie,5,N.z)),2&t){let r;e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(n.menuItems=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(n.connectionToast=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(n.deleteModal=r.first)}},decls:32,vars:5,consts:[[3,"headings","showPrint","print"],[1,"container"],[1,"row","page-form"],[1,"col-md-6"],[1,"page-form",3,"formGroup","ngSubmit"],[1,"mb-3"],[1,"row","mb-1"],[1,"col-md-4"],[1,"float-md-end","float-sm-start","mt-1"],[1,"col-md-8"],["formControlName","menuGroup",1,"form-control","form-control-sm","w-100"],["formControlName","category",1,"form-control","form-control-sm","w-100"],["class","row",4,"ngIf"],[1,"row"],[1,"top-divider"],[1,"bottom-divider"],["menuItemsComponentReference",""],[3,"confirmEvent"],["deleteModalComponentReference",""],["connectionToastComponentReference",""],[1,"col-md-12"],["type","button","routerLink","/home/menu/all-menu-groups",1,"btn","btn-secondary","btn-sm","float-end","ms-1","page-form-btn"],["type","button",1,"btn","btn-secondary","btn-sm","float-end","ms-1","page-form-btn",3,"click"],["type","submit",1,"btn","btn-secondary","btn-sm","float-end","ms-1","page-form-btn",3,"disabled"],["type","button",1,"btn","btn-sm","float-end","ms-1","btn-light","page-form-btn"],["role","status",1,"spinner-grow","spinner-grow-sm"],[1,"visually-hidden"]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"app-module-topnav",0),e.\u0275\u0275listener("print",function(){return n.onPrint()}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(1,"div",1),e.\u0275\u0275elementStart(2,"div",2),e.\u0275\u0275elementStart(3,"div",3),e.\u0275\u0275elementStart(4,"form",4),e.\u0275\u0275listener("ngSubmit",function(){return n.updateMenuGroup()}),e.\u0275\u0275elementStart(5,"h4",5),e.\u0275\u0275text(6,"Menu Group Details"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"div",6),e.\u0275\u0275elementStart(8,"div",7),e.\u0275\u0275elementStart(9,"label",8),e.\u0275\u0275text(10,"Menu Group :"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"div",9),e.\u0275\u0275element(12,"input",10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"div",6),e.\u0275\u0275elementStart(14,"div",7),e.\u0275\u0275elementStart(15,"label",8),e.\u0275\u0275text(16,"Category :"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"div",9),e.\u0275\u0275element(18,"input",11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(19,"hr"),e.\u0275\u0275template(20,Me,8,1,"div",12),e.\u0275\u0275template(21,be,6,0,"div",12),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(22,"div",13),e.\u0275\u0275elementStart(23,"div",9),e.\u0275\u0275element(24,"hr",14),e.\u0275\u0275element(25,"hr",15),e.\u0275\u0275element(26,"app-menu-items",null,16),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(28,"app-delete-modal",17,18),e.\u0275\u0275listener("confirmEvent",function(){return n.deleteMenuGroup()}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(30,"app-connection-toast",null,19)),2&t&&(e.\u0275\u0275property("headings",n.navHeading)("showPrint",!0),e.\u0275\u0275advance(4),e.\u0275\u0275property("formGroup",n.menuGroupForm),e.\u0275\u0275advance(16),e.\u0275\u0275property("ngIf",!n.isMenuGroupLoading),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.isMenuGroupLoading))},directives:[b.H,m._Y,m.JL,m.sg,m.Fj,m.JJ,m.u,c.O5,L,N.z,h.Y,f.rH],styles:[".smart-window.smart-grid-dialog .col-md-6{padding:0;max-width:100%}  .smart-grid-layout .col-sm-6{grid-column:span 12;max-width:100%}  .smart-window.smart-grid-dialog [editor]:not([template=checkBox]){width:350px;height:32px;max-width:100%}  .smart-window.smart-grid-dialog .column label{padding:0;margin:0}"]}),o})(),canActivate:[(()=>{class o{constructor(t){this.router=t}canActivate(t){return!!sessionStorage.getItem("restaurant_menu_group_id")||(this.router.navigateByUrl("/home/menu"),!1)}}return o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275inject(f.F0))},o.\u0275prov=e.\u0275\u0275defineInjectable({token:o,factory:o.\u0275fac,providedIn:"root"}),o})()]},{path:"all-menu-items",component:(()=>{class o{constructor(t,n){this.menuApi=t,this.menuPrint=n,this.navHeading=[{text:"All Menu Items",url:"/home/menu/all-menu-items"}],this.menuItemsGridData=[],this.isFetchingGridData=!1,this.isDataAvailable=!0,this.firstInResponse=[],this.lastInResponse=[],this.nextStartAfter=[],this.prevStartAt=[],this.pageNumber=0,this.disableNext=!0,this.disablePrev=!0,this.sortParams={field:"created_at",direction:"desc"}}ngOnInit(){this.getAccountMenuItem()}getAccountMenuItem(){this.isFetchingGridData=!0,this.menuApi.getAccountMenuItem(this.sortParams,20).then(t=>{console.log(t),this.menuItemsGridData=t.docs,this.isFetchingGridData=!1,this.prevStartAt=this.firstInResponse,this.nextStartAfter=t.docs[t.docs.length-1],this.firstInResponse=t.docs[0],this.pageNumber=1,this.isDataAvailable=!!t.docs.length,!t.docs.length||t.docs.length<20?(this.disableNext=!0,this.disablePrev=!0):(this.disableNext=!1,this.disablePrev=!0)},t=>{console.log(t),this.isFetchingGridData=!1,this.connectionToast.openToast()})}nextPage(t){t.preventDefault(),this.isFetchingGridData=!0,this.menuApi.getAccountMenuItemNext(this.sortParams,20,this.nextStartAfter).then(n=>{console.log(n),this.menuItemsGridData=n.docs,this.isFetchingGridData=!1,this.prevStartAt=this.firstInResponse,this.nextStartAfter=n.docs[n.docs.length-1],this.firstInResponse=n.docs[0],this.pageNumber++,n.docs.length<20&&(this.disableNext=!0,this.disablePrev=!1)},n=>{console.log(n),this.isFetchingGridData=!1,this.connectionToast.openToast()})}previousPage(t){t.preventDefault(),this.isFetchingGridData=!0,this.menuApi.getAccountMenuItemPrev(this.sortParams,20,this.prevStartAt).then(n=>{console.log(n),this.menuItemsGridData=n.docs,this.isFetchingGridData=!1,n.docs.length||(this.isDataAvailable=!1),this.prevStartAt=this.firstInResponse,this.nextStartAfter=n.docs[n.docs.length-1],this.firstInResponse=n.docs[0],this.pageNumber--,1==this.pageNumber&&(this.disableNext=!1,this.disablePrev=!0)},n=>{console.log(n),this.isFetchingGridData=!1,this.connectionToast.openToast()})}sortTable(t,n){this.sortParams.field=t,this.sortParams.direction=n,this.getAccountMenuItem()}onPrint(){console.log("lets start printing..."),this.menuPrint.printAllMenuItems()}}return o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275directiveInject(I.D),e.\u0275\u0275directiveInject(G))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["app-all-menu-items"]],viewQuery:function(t,n){if(1&t&&e.\u0275\u0275viewQuery(Ee,5,h.Y),2&t){let r;e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(n.connectionToast=r.first)}},decls:57,vars:24,consts:[[3,"headings","showPrint","print"],[1,"container"],[1,"row"],[1,"col-md-10"],[1,"row","mb-3"],[1,"col-md-12"],[1,"btn","btn-light","border","float-end","page-refresh-btn",3,"disabled","click"],[1,"bi","bi-arrow-clockwise"],[1,"overflow-auto"],[1,"table","table-bordered","table-sm","w-100","page-table"],[1,"bg-light"],["width","15%",1,"min-width-2"],["class","bi bi-filter float-end list-pointer",3,"click",4,"ngIf"],["class","bi bi-sort-down float-end list-pointer",3,"click",4,"ngIf"],["class","bi bi-sort-up float-end list-pointer",3,"click",4,"ngIf"],["width","30%",1,"min-width-4"],["width","20%",1,"min-width-3"],["width","20%",1,"min-width-2"],[4,"ngFor","ngForOf"],["class","text-center",4,"ngIf"],["colspan","5"],["aria-label","Page navigation",1,"nav-light","float-end"],[1,"pagination","pagination-sm","mb-0","justify-content-end"],[1,"page-item",3,"ngClass"],["href","#","aria-label","First",1,"page-link",3,"click"],[1,"bi","bi-caret-left-fill"],[1,"page-item"],["href","#","aria-label","Current",1,"page-link",3,"click"],["href","#","aria-label","Last",1,"page-link",3,"click"],[1,"bi","bi-caret-right-fill"],["connectionToastComponentReference",""],[1,"bi","bi-filter","float-end","list-pointer",3,"click"],[1,"bi","bi-sort-down","float-end","list-pointer",3,"click"],[1,"bi","bi-sort-up","float-end","list-pointer",3,"click"],[1,"text-center"],["role","status",1,"spinner-grow","m-4"],[1,"visually-hidden"],[1,"m-4"]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"app-module-topnav",0),e.\u0275\u0275listener("print",function(){return n.onPrint()}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(1,"div",1),e.\u0275\u0275elementStart(2,"div",2),e.\u0275\u0275elementStart(3,"div",3),e.\u0275\u0275elementStart(4,"div",4),e.\u0275\u0275elementStart(5,"div",5),e.\u0275\u0275elementStart(6,"button",6),e.\u0275\u0275listener("click",function(){return n.getAccountMenuItem()}),e.\u0275\u0275element(7,"i",7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"div",8),e.\u0275\u0275elementStart(9,"table",9),e.\u0275\u0275elementStart(10,"thead"),e.\u0275\u0275elementStart(11,"tr",10),e.\u0275\u0275elementStart(12,"th",11),e.\u0275\u0275text(13," Item ID "),e.\u0275\u0275template(14,ye,1,0,"i",12),e.\u0275\u0275template(15,Ce,1,0,"i",13),e.\u0275\u0275template(16,Ge,1,0,"i",14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"th",15),e.\u0275\u0275text(18," Item Name "),e.\u0275\u0275template(19,we,1,0,"i",12),e.\u0275\u0275template(20,Ae,1,0,"i",13),e.\u0275\u0275template(21,xe,1,0,"i",14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(22,"th",11),e.\u0275\u0275text(23," Price "),e.\u0275\u0275template(24,Te,1,0,"i",12),e.\u0275\u0275template(25,De,1,0,"i",13),e.\u0275\u0275template(26,ke,1,0,"i",14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(27,"th",16),e.\u0275\u0275text(28," Menu Group "),e.\u0275\u0275template(29,Fe,1,0,"i",12),e.\u0275\u0275template(30,Pe,1,0,"i",13),e.\u0275\u0275template(31,Re,1,0,"i",14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(32,"th",17),e.\u0275\u0275text(33," Category "),e.\u0275\u0275template(34,Ve,1,0,"i",12),e.\u0275\u0275template(35,Le,1,0,"i",13),e.\u0275\u0275template(36,Ne,1,0,"i",14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(37,"tbody"),e.\u0275\u0275template(38,Be,11,5,"tr",18),e.\u0275\u0275template(39,Qe,5,0,"tr",19),e.\u0275\u0275template(40,Oe,4,0,"tr",19),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(41,"tfoot"),e.\u0275\u0275elementStart(42,"tr",10),e.\u0275\u0275elementStart(43,"td",20),e.\u0275\u0275elementStart(44,"nav",21),e.\u0275\u0275elementStart(45,"ul",22),e.\u0275\u0275elementStart(46,"li",23),e.\u0275\u0275elementStart(47,"a",24),e.\u0275\u0275listener("click",function(l){return n.previousPage(l)}),e.\u0275\u0275element(48,"i",25),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(49,"li",26),e.\u0275\u0275elementStart(50,"a",27),e.\u0275\u0275listener("click",function(l){return l.preventDefault()}),e.\u0275\u0275text(51),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(52,"li",23),e.\u0275\u0275elementStart(53,"a",28),e.\u0275\u0275listener("click",function(l){return n.nextPage(l)}),e.\u0275\u0275element(54,"i",29),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(55,"app-connection-toast",null,30)),2&t&&(e.\u0275\u0275property("headings",n.navHeading)("showPrint",!0),e.\u0275\u0275advance(6),e.\u0275\u0275property("disabled",n.isFetchingGridData),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf","item_code"!=n.sortParams.field),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","item_code"==n.sortParams.field&&"desc"==n.sortParams.direction),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","item_code"==n.sortParams.field&&"asc"==n.sortParams.direction),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf","item_name"!=n.sortParams.field),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","item_name"==n.sortParams.field&&"desc"==n.sortParams.direction),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","item_name"==n.sortParams.field&&"asc"==n.sortParams.direction),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf","price"!=n.sortParams.field),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","price"==n.sortParams.field&&"desc"==n.sortParams.direction),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","price"==n.sortParams.field&&"asc"==n.sortParams.direction),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf","menu_group"!=n.sortParams.field),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","menu_group"==n.sortParams.field&&"desc"==n.sortParams.direction),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","menu_group"==n.sortParams.field&&"asc"==n.sortParams.direction),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf","category"!=n.sortParams.field),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","category"==n.sortParams.field&&"desc"==n.sortParams.direction),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","category"==n.sortParams.field&&"asc"==n.sortParams.direction),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",n.menuItemsGridData),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.isFetchingGridData),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!n.isDataAvailable&&!n.isFetchingGridData),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngClass",n.disablePrev?"disabled":""),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate1(" ",n.pageNumber," "),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",n.disableNext?"disabled":""))},directives:[b.H,c.O5,c.sg,c.mk,h.Y],styles:[""]}),o})()}]}];let He=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.\u0275\u0275defineNgModule({type:o}),o.\u0275inj=e.\u0275\u0275defineInjector({imports:[[f.Bz.forChild(je)],f.Bz]}),o})();var Ye=s(7264),B=s(5018);let ze=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.\u0275\u0275defineNgModule({type:o}),o.\u0275inj=e.\u0275\u0275defineInjector({imports:[[c.ez,f.Bz,m.u5,m.UX,x.m9,B.p]]}),o})(),We=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.\u0275\u0275defineNgModule({type:o}),o.\u0275inj=e.\u0275\u0275defineInjector({imports:[[c.ez,He,Ye.M,B.p,ze]]}),o})()},8512:(A,M,s)=>{s.d(M,{D:()=>e});var c=s(2741),f=s(9805);let e=(()=>{class v{constructor(a){this.afs=a,this.menuGroupRef=this.afs.collection("restaurant/module_menu/restaurant_menu_group"),this.menuItemRef=this.afs.collection("restaurant/module_menu/restaurant_menu_item")}createMenuGroup(a){return this.menuGroupRef.add(a)}getMenuGroup(){return this.menuGroupRef.doc(String(sessionStorage.getItem("restaurant_menu_group_id"))).ref.get()}updateMenuGroup(a){return this.menuGroupRef.doc(String(sessionStorage.getItem("restaurant_menu_group_id"))).update(a)}deleteMenuGroup(){return this.menuGroupRef.doc(String(sessionStorage.getItem("restaurant_menu_group_id"))).delete()}getAccountMenuGroup(a,u){return this.menuGroupRef.ref.where("account","==",localStorage.getItem("restaurant_id")).orderBy(null==a?void 0:a.field,null==a?void 0:a.direction).limit(u).get()}getAccountMenuGroupNext(a,u,p){return this.menuGroupRef.ref.where("account","==",localStorage.getItem("restaurant_id")).orderBy(null==a?void 0:a.field,null==a?void 0:a.direction).startAfter(p).limit(u).get()}getAccountMenuGroupPrev(a,u,p){return this.menuGroupRef.ref.where("account","==",localStorage.getItem("restaurant_id")).orderBy(null==a?void 0:a.field,null==a?void 0:a.direction).startAt(p).limit(u).get()}getAllAccountMenuGroup(){return this.menuGroupRef.ref.where("account","==",localStorage.getItem("restaurant_id")).orderBy("created_at","desc").get()}createMenuItem(a){return this.menuItemRef.add(a)}getMenuItem(a){return this.menuItemRef.doc(a).ref.get()}updateMenuItem(a,u){return this.menuItemRef.doc(a).update(u)}deleteMenuItem(a){return this.menuItemRef.doc(a).delete()}getMenuGroupMenuItem(){return this.menuItemRef.ref.where("menu_group.id","==",sessionStorage.getItem("restaurant_menu_group_id")).orderBy("created_at","desc").get()}getAccountMenuItem(a,u){return this.menuItemRef.ref.where("menu_group.data.account","==",localStorage.getItem("restaurant_id")).orderBy(null==a?void 0:a.field,null==a?void 0:a.direction).limit(u).get()}getAccountMenuItemNext(a,u,p){return this.menuItemRef.ref.where("menu_group.data.account","==",localStorage.getItem("restaurant_id")).orderBy(null==a?void 0:a.field,null==a?void 0:a.direction).startAfter(p).limit(u).get()}getAccountMenuItemPrev(a,u,p){return this.menuItemRef.ref.where("menu_group.data.account","==",localStorage.getItem("restaurant_id")).orderBy(null==a?void 0:a.field,null==a?void 0:a.direction).startAt(p).limit(u).get()}getAllAccountMenuItem(){return this.menuItemRef.ref.where("menu_group.data.account","==",localStorage.getItem("restaurant_id")).orderBy("created_at","desc").get()}getWeekMenuGroup(a,u){return this.menuItemRef.ref.where("account","==",localStorage.getItem("restaurant_id")).where("created_at","<=",a).where("created_at",">=",u).get()}getWeekMenuItem(a,u){return this.menuItemRef.ref.where("menu_group.data.account","==",localStorage.getItem("restaurant_id")).where("created_at","<=",a).where("created_at",">=",u).get()}}return v.\u0275fac=function(a){return new(a||v)(c.\u0275\u0275inject(f.ST))},v.\u0275prov=c.\u0275\u0275defineInjectable({token:v,factory:v.\u0275fac,providedIn:"root"}),v})()}}]);