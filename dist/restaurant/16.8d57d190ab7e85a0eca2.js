"use strict";(self.webpackChunkang_fire=self.webpackChunkang_fire||[]).push([[16],{756:(w,h,l)=>{l.d(h,{Bt:()=>c.Bt});var c=l(9665)},3751:(w,h,l)=>{l.r(h),l.d(h,{PaymentsPageModule:()=>ye});var c=l(6274),d=l(8718),e=l(2741),u=l(8088),b=l(7632);let i=(()=>{class a{constructor(){this.navLinks=[{text:"All Payments",url:"/home/payments/all-payments",icon:"bi bi-list-ul"},{text:"New Payment",url:"/home/payments/new-payment",icon:"bi bi-plus-square"}]}ngOnInit(){}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.\u0275\u0275defineComponent({type:a,selectors:[["app-payments-page"]],decls:6,vars:4,consts:[[3,"navBrand","source"],["id","wrapper"],[3,"navLinks","heading"],["id","content-wrapper",1,"d-flex","flex-column"],["id","content"]],template:function(t,n){1&t&&(e.\u0275\u0275element(0,"app-main-navbar",0),e.\u0275\u0275elementStart(1,"div",1),e.\u0275\u0275element(2,"app-module-sidenav",2),e.\u0275\u0275elementStart(3,"div",3),e.\u0275\u0275elementStart(4,"div",4),e.\u0275\u0275element(5,"router-outlet"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275property("navBrand","nR Restaurant")("source","Restaurant"),e.\u0275\u0275advance(2),e.\u0275\u0275property("navLinks",n.navLinks)("heading","Payments"))},directives:[u.D,b.m,d.lC],styles:[""]}),a})();var p=l(8361),_=l.n(p),y=l(1580),v=l(6827),P=l(8972),E=l(6508);const D=["connectionToastComponentReference"];let x=(()=>{class a{constructor(t){this.paymentsApi=t,this.navHeading=[{text:"Dashboard",url:"/home/payments/dashboard"}],this.weekPaymentsCount=0,this.weekPaymentsTotal=0,this.paymentsLineChartData=[{data:[0],label:"Menu Groups"}],this.paymentsLineChartLabels=[""],this.chartOptions={},this.today=_()()}ngOnInit(){this.initChart(),this.getWeekPayment()}initChart(){this.chartOptions={responsive:!0,scales:{yAxes:[{min:0,ticks:{stepSize:1,beginAtZero:!0}}]}}}getWeekPayment(){this.paymentsApi.getWeekPayment(_()(this.today).add(-1,"months").toDate(),this.today.toDate()).then(t=>{console.log(t),this.weekPaymentsData=t.docs,this.weekPaymentsCount=t.docs.length,this.setPaymentChartData(),this.calculateTotalPayments()},t=>{console.log(t),this.connectionToast.openToast()})}setPaymentChartData(){this.paymentsLineChartLabels=[];for(let r=6;r>=0;r--){var t=_()(this.today).add(-r,"days");this.paymentsLineChartLabels.push(t.toDate().toISOString().slice(0,10))}console.log(this.paymentsLineChartLabels);let n=[];for(let r=6;r>=0;r--)n.push(0);console.log(n),this.weekPaymentsData.forEach(r=>{var m=r.data().created_at.toDate().toISOString().slice(0,10);for(let f=6;f>=0;f--)this.paymentsLineChartLabels[f]==m&&n[f]++}),console.log(n),this.paymentsLineChartData=[{data:n,label:"Payments"}]}calculateTotalPayments(){this.weekPaymentsTotal=0,this.weekPaymentsData.forEach(t=>{this.weekPaymentsTotal=t.data().amount_paid}),console.log(this.weekPaymentsTotal)}}return a.\u0275fac=function(t){return new(t||a)(e.\u0275\u0275directiveInject(v.Y))},a.\u0275cmp=e.\u0275\u0275defineComponent({type:a,selectors:[["app-dashboard"]],viewQuery:function(t,n){if(1&t&&e.\u0275\u0275viewQuery(D,5,y.Y),2&t){let r;e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(n.connectionToast=r.first)}},decls:32,vars:8,consts:[[3,"headings"],[1,"container"],[1,"row"],[1,"col-md-3","mb-4"],[1,"card","border-left-secondary","shadow","h-100","py-2"],[1,"card-body"],[1,"row","no-gutters","align-items-center"],[1,"col","mr-2"],[1,"text-xs","font-weight-bold","text-uppercase","mb-1"],[1,"h5","mb-0","font-weight-bold","text-gray-800"],[1,"col-md-8"],[1,"card","shadow","mb-4"],[1,"card-header","py-3","d-flex","flex-row","align-items-center","justify-content-between"],[1,"m-0","font-weight-bold"],[1,"chart-area"],["baseChart","",3,"datasets","labels","options","legend","chartType"],["connectionToastComponentReference",""]],template:function(t,n){1&t&&(e.\u0275\u0275element(0,"app-module-topnav",0),e.\u0275\u0275elementStart(1,"div",1),e.\u0275\u0275elementStart(2,"div",2),e.\u0275\u0275elementStart(3,"div",3),e.\u0275\u0275elementStart(4,"div",4),e.\u0275\u0275elementStart(5,"div",5),e.\u0275\u0275elementStart(6,"div",6),e.\u0275\u0275elementStart(7,"div",7),e.\u0275\u0275elementStart(8,"div",8),e.\u0275\u0275text(9,"No. of Payments this Week"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"div",9),e.\u0275\u0275text(11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"div",3),e.\u0275\u0275elementStart(13,"div",4),e.\u0275\u0275elementStart(14,"div",5),e.\u0275\u0275elementStart(15,"div",6),e.\u0275\u0275elementStart(16,"div",7),e.\u0275\u0275elementStart(17,"div",8),e.\u0275\u0275text(18,"Amount Paid this Week"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"div",9),e.\u0275\u0275text(20),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(21,"div",2),e.\u0275\u0275elementStart(22,"div",10),e.\u0275\u0275elementStart(23,"div",11),e.\u0275\u0275elementStart(24,"div",12),e.\u0275\u0275elementStart(25,"h6",13),e.\u0275\u0275text(26,"Total Payments by Day"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(27,"div",5),e.\u0275\u0275elementStart(28,"div",14),e.\u0275\u0275element(29,"canvas",15),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(30,"app-connection-toast",null,16)),2&t&&(e.\u0275\u0275property("headings",n.navHeading),e.\u0275\u0275advance(11),e.\u0275\u0275textInterpolate(n.weekPaymentsCount),e.\u0275\u0275advance(9),e.\u0275\u0275textInterpolate1("$ ",n.weekPaymentsTotal,""),e.\u0275\u0275advance(9),e.\u0275\u0275property("datasets",n.paymentsLineChartData)("labels",n.paymentsLineChartLabels)("options",n.chartOptions)("legend",!0)("chartType","line"))},directives:[P.H,E.jh,y.Y],styles:[""]}),a})();var C=l(1921),k=l(6424);let A=(()=>{class a{constructor(t,n){this.pdfPrint=t,this.paymentsApi=n}printAllPayments(){var t=this;return(0,C.Z)(function*(){const n=yield t.paymentsApi.getAllAccountPayment();var r=[["Order ID","Payment Date","Amount Paid","Order ID","Customer Name"]];for(let _e of n.docs){var m=[];let g=_e.data();m.push(g.order_code),m.push(g.payment_date.asDate()),m.push(g.amount_paid),m.push(g.order.order_code),m.push(g.order.customer_name),r.push(m)}t.pdfPrint.openPdf([{layout:"lightHorizontalLines",table:{headerRows:1,widths:["15%","20%","20%","15%","30%"],body:r}}])})()}printViewPayment(){var t=this;return(0,C.Z)(function*(){let r=(yield t.paymentsApi.getPayment()).data();t.pdfPrint.openPdf([{columns:[[{text:"Payment ID: "+r.payment_code},{text:"Payment Date: "+r.payment_date},{text:"Order ID: "+r.order.data.order_code},{text:"Customer Name: "+r.order.data.customer.customer_name},{text:"Amount Due: "+r.order.total_amount},{text:"Amount Paid: "+r.amount_paid},{text:"Balance: "+(r.order.total_amount-r.amount_paid)}],[]]}])})()}printPaymentRoll(){var t=this;return(0,C.Z)(function*(){let r=(yield t.paymentsApi.getPayment()).data();t.pdfPrint.printRoll([{columns:[[{text:"Payment ID: "+r.payment_code},{text:"Payment Date: "+r.payment_date},{text:"Order ID: "+r.order.data.order_code},{text:"Customer Name: "+r.order.data.customer.customer_name},{text:"Amount Due: "+r.order.total_amount},{text:"Amount Paid: "+r.amount_paid},{text:"Balance: "+(r.order.total_amount-r.amount_paid)}],[]]}])})()}}return a.\u0275fac=function(t){return new(t||a)(e.\u0275\u0275inject(k.n),e.\u0275\u0275inject(v.Y))},a.\u0275prov=e.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();const V=["connectionToastComponentReference"];function O(a,o){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",32),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("payment_code","desc")}),e.\u0275\u0275elementEnd()}}function R(a,o){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",33),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("payment_code","asc")}),e.\u0275\u0275elementEnd()}}function N(a,o){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",34),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("payment_code","desc")}),e.\u0275\u0275elementEnd()}}function L(a,o){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",32),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("payment_date","desc")}),e.\u0275\u0275elementEnd()}}function B(a,o){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",33),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("payment_date","asc")}),e.\u0275\u0275elementEnd()}}function G(a,o){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",34),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("payment_date","desc")}),e.\u0275\u0275elementEnd()}}function M(a,o){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",32),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("amount_paid","desc")}),e.\u0275\u0275elementEnd()}}function Q(a,o){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",33),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("amount_paid","asc")}),e.\u0275\u0275elementEnd()}}function j(a,o){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",34),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("amount_paid","desc")}),e.\u0275\u0275elementEnd()}}function H(a,o){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",32),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("order_code","desc")}),e.\u0275\u0275elementEnd()}}function Y(a,o){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",33),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("order_code","asc")}),e.\u0275\u0275elementEnd()}}function W(a,o){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",34),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("order_code","desc")}),e.\u0275\u0275elementEnd()}}function z(a,o){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",32),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("customer_name","desc")}),e.\u0275\u0275elementEnd()}}function U(a,o){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",33),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("customer_name","asc")}),e.\u0275\u0275elementEnd()}}function $(a,o){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",34),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("customer_name","desc")}),e.\u0275\u0275elementEnd()}}function Z(a,o){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"tr",35),e.\u0275\u0275listener("dblclick",function(){const m=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275nextContext().viewPayment(m.id)}),e.\u0275\u0275elementStart(1,"td"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"td"),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"td"),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"td"),e.\u0275\u0275text(8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"td"),e.\u0275\u0275text(10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()}if(2&a){const t=o.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null==t?null:t.data().payment_code),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null==t?null:t.data().payment_date),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null==t?null:t.data().amount_paid),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null==t?null:t.data().order.data.order_code),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null==t?null:t.data().order.data.customer.customer_name)}}function J(a,o){1&a&&(e.\u0275\u0275elementStart(0,"tr",36),e.\u0275\u0275elementStart(1,"td",21),e.\u0275\u0275elementStart(2,"div",37),e.\u0275\u0275elementStart(3,"span",38),e.\u0275\u0275text(4,"Loading..."),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd())}function K(a,o){1&a&&(e.\u0275\u0275elementStart(0,"tr",36),e.\u0275\u0275elementStart(1,"td",21),e.\u0275\u0275elementStart(2,"p",39),e.\u0275\u0275text(3,"No data available"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd())}let X=(()=>{class a{constructor(t,n,r){this.router=t,this.paymentsApi=n,this.paymentsPrint=r,this.navHeading=[{text:"All Payments",url:"/home/payments/all-payments"}],this.paymentsGridData=[],this.isFetchingGridData=!1,this.isDataAvailable=!0,this.firstInResponse=[],this.lastInResponse=[],this.nextStartAfter=[],this.prevStartAt=[],this.pageNumber=0,this.disableNext=!0,this.disablePrev=!0,this.sortParams={field:"created_at",direction:"desc"}}ngOnInit(){this.getAccountPayment()}getAccountPayment(){this.isFetchingGridData=!0,this.paymentsApi.getAccountPayment(this.sortParams,20).then(t=>{console.log(t),this.paymentsGridData=t.docs,this.isFetchingGridData=!1,this.prevStartAt=this.firstInResponse,this.nextStartAfter=t.docs[t.docs.length-1],this.firstInResponse=t.docs[0],this.pageNumber=1,this.isDataAvailable=!!t.docs.length,!t.docs.length||t.docs.length<20?(this.disableNext=!0,this.disablePrev=!0):(this.disableNext=!1,this.disablePrev=!0)},t=>{console.log(t),this.isFetchingGridData=!1,this.connectionToast.openToast()})}nextPage(t){t.preventDefault(),this.isFetchingGridData=!0,this.paymentsApi.getAccountPaymentNext(this.sortParams,20,this.nextStartAfter).then(n=>{console.log(n),this.paymentsGridData=n.docs,this.isFetchingGridData=!1,this.prevStartAt=this.firstInResponse,this.nextStartAfter=n.docs[n.docs.length-1],this.firstInResponse=n.docs[0],this.pageNumber++,n.docs.length<20&&(this.disableNext=!0,this.disablePrev=!1)},n=>{console.log(n),this.isFetchingGridData=!1,this.connectionToast.openToast()})}previousPage(t){t.preventDefault(),this.isFetchingGridData=!0,this.paymentsApi.getAccountPaymentPrev(this.sortParams,20,this.prevStartAt).then(n=>{console.log(n),this.paymentsGridData=n.docs,this.isFetchingGridData=!1,n.docs.length||(this.isDataAvailable=!1),this.prevStartAt=this.firstInResponse,this.nextStartAfter=n.docs[n.docs.length-1],this.firstInResponse=n.docs[0],this.pageNumber--,1==this.pageNumber&&(this.disableNext=!1,this.disablePrev=!0)},n=>{console.log(n),this.isFetchingGridData=!1,this.connectionToast.openToast()})}sortTable(t,n){this.sortParams.field=t,this.sortParams.direction=n,this.getAccountPayment()}viewPayment(t){console.log(t),sessionStorage.setItem("restaurant_payment_id",t),this.router.navigateByUrl("/home/payments/view-payment")}onPrint(){console.log("lets start printing..."),this.paymentsPrint.printAllPayments()}}return a.\u0275fac=function(t){return new(t||a)(e.\u0275\u0275directiveInject(d.F0),e.\u0275\u0275directiveInject(v.Y),e.\u0275\u0275directiveInject(A))},a.\u0275cmp=e.\u0275\u0275defineComponent({type:a,selectors:[["app-all-payments"]],viewQuery:function(t,n){if(1&t&&e.\u0275\u0275viewQuery(V,5,y.Y),2&t){let r;e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(n.connectionToast=r.first)}},decls:59,vars:24,consts:[[3,"headings","showPrint","print"],[1,"container"],[1,"row"],[1,"col-md-10"],[1,"row","mb-3"],[1,"col-md-12"],["routerLink","/home/payments/new-payment",1,"btn","btn-secondary","page-add-btn"],[1,"btn","btn-light","border","float-end","page-refresh-btn",3,"disabled","click"],[1,"bi","bi-arrow-clockwise"],[1,"overflow-auto"],[1,"table","table-bordered","table-sm","w-100","page-table"],[1,"bg-light"],["width","15%",1,"min-width-2"],["class","bi bi-filter float-end list-pointer",3,"click",4,"ngIf"],["class","bi bi-sort-down float-end list-pointer",3,"click",4,"ngIf"],["class","bi bi-sort-up float-end list-pointer",3,"click",4,"ngIf"],["width","20%",1,"min-width-3"],["width","20%",1,"min-width-2"],["width","30%",1,"min-width-3"],["class","table-pointer",3,"dblclick",4,"ngFor","ngForOf"],["class","text-center",4,"ngIf"],["colspan","5"],["aria-label","Page navigation",1,"nav-light","float-end"],[1,"pagination","pagination-sm","mb-0","justify-content-end"],[1,"page-item",3,"ngClass"],["href","#","aria-label","First",1,"page-link",3,"click"],[1,"bi","bi-caret-left-fill"],[1,"page-item"],["href","#","aria-label","Current",1,"page-link",3,"click"],["href","#","aria-label","Last",1,"page-link",3,"click"],[1,"bi","bi-caret-right-fill"],["connectionToastComponentReference",""],[1,"bi","bi-filter","float-end","list-pointer",3,"click"],[1,"bi","bi-sort-down","float-end","list-pointer",3,"click"],[1,"bi","bi-sort-up","float-end","list-pointer",3,"click"],[1,"table-pointer",3,"dblclick"],[1,"text-center"],["role","status",1,"spinner-grow","m-4"],[1,"visually-hidden"],[1,"m-4"]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"app-module-topnav",0),e.\u0275\u0275listener("print",function(){return n.onPrint()}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(1,"div",1),e.\u0275\u0275elementStart(2,"div",2),e.\u0275\u0275elementStart(3,"div",3),e.\u0275\u0275elementStart(4,"div",4),e.\u0275\u0275elementStart(5,"div",5),e.\u0275\u0275elementStart(6,"button",6),e.\u0275\u0275text(7,"New Payment"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"button",7),e.\u0275\u0275listener("click",function(){return n.getAccountPayment()}),e.\u0275\u0275element(9,"i",8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"div",9),e.\u0275\u0275elementStart(11,"table",10),e.\u0275\u0275elementStart(12,"thead"),e.\u0275\u0275elementStart(13,"tr",11),e.\u0275\u0275elementStart(14,"th",12),e.\u0275\u0275text(15," Payment ID "),e.\u0275\u0275template(16,O,1,0,"i",13),e.\u0275\u0275template(17,R,1,0,"i",14),e.\u0275\u0275template(18,N,1,0,"i",15),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"th",16),e.\u0275\u0275text(20," Payment Date "),e.\u0275\u0275template(21,L,1,0,"i",13),e.\u0275\u0275template(22,B,1,0,"i",14),e.\u0275\u0275template(23,G,1,0,"i",15),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(24,"th",17),e.\u0275\u0275text(25," Amount Paid "),e.\u0275\u0275template(26,M,1,0,"i",13),e.\u0275\u0275template(27,Q,1,0,"i",14),e.\u0275\u0275template(28,j,1,0,"i",15),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(29,"th",12),e.\u0275\u0275text(30," Order ID "),e.\u0275\u0275template(31,H,1,0,"i",13),e.\u0275\u0275template(32,Y,1,0,"i",14),e.\u0275\u0275template(33,W,1,0,"i",15),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(34,"th",18),e.\u0275\u0275text(35," Customer Name "),e.\u0275\u0275template(36,z,1,0,"i",13),e.\u0275\u0275template(37,U,1,0,"i",14),e.\u0275\u0275template(38,$,1,0,"i",15),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(39,"tbody"),e.\u0275\u0275template(40,Z,11,5,"tr",19),e.\u0275\u0275template(41,J,5,0,"tr",20),e.\u0275\u0275template(42,K,4,0,"tr",20),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(43,"tfoot"),e.\u0275\u0275elementStart(44,"tr",11),e.\u0275\u0275elementStart(45,"td",21),e.\u0275\u0275elementStart(46,"nav",22),e.\u0275\u0275elementStart(47,"ul",23),e.\u0275\u0275elementStart(48,"li",24),e.\u0275\u0275elementStart(49,"a",25),e.\u0275\u0275listener("click",function(m){return n.previousPage(m)}),e.\u0275\u0275element(50,"i",26),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(51,"li",27),e.\u0275\u0275elementStart(52,"a",28),e.\u0275\u0275listener("click",function(m){return m.preventDefault()}),e.\u0275\u0275text(53),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(54,"li",24),e.\u0275\u0275elementStart(55,"a",29),e.\u0275\u0275listener("click",function(m){return n.nextPage(m)}),e.\u0275\u0275element(56,"i",30),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(57,"app-connection-toast",null,31)),2&t&&(e.\u0275\u0275property("headings",n.navHeading)("showPrint",!0),e.\u0275\u0275advance(8),e.\u0275\u0275property("disabled",n.isFetchingGridData),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf","payment_code"!=n.sortParams.field),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","payment_code"==n.sortParams.field&&"desc"==n.sortParams.direction),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","payment_code"==n.sortParams.field&&"asc"==n.sortParams.direction),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf","payment_date"!=n.sortParams.field),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","payment_date"==n.sortParams.field&&"desc"==n.sortParams.direction),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","payment_date"==n.sortParams.field&&"asc"==n.sortParams.direction),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf","amount_paid"!=n.sortParams.field),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","amount_paid"==n.sortParams.field&&"desc"==n.sortParams.direction),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","amount_paid"==n.sortParams.field&&"asc"==n.sortParams.direction),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf","order_code"!=n.sortParams.field),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","order_code"==n.sortParams.field&&"desc"==n.sortParams.direction),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","order_code"==n.sortParams.field&&"asc"==n.sortParams.direction),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf","customer_name"!=n.sortParams.field),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","customer_name"==n.sortParams.field&&"desc"==n.sortParams.direction),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","customer_name"==n.sortParams.field&&"asc"==n.sortParams.direction),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",n.paymentsGridData),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.isFetchingGridData),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!n.isDataAvailable&&!n.isFetchingGridData),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngClass",n.disablePrev?"disabled":""),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate1(" ",n.pageNumber," "),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",n.disableNext?"disabled":""))},directives:[P.H,d.rH,c.O5,c.sg,c.mk,y.Y],styles:[""]}),a})();var q=l(756),s=l(3324),T=l(7276);const ee=["selectOrderComponentReference"];let S=(()=>{class a{constructor(){this.paymentForm=new s.cw({})}ngOnInit(){this.initPaymentForm()}initPaymentForm(){this.paymentForm=new s.cw({paymentCode:new s.NI(""),paymentDate:new s.NI(""),orderCode:new s.NI({value:"",disabled:!0}),customerName:new s.NI({value:"",disabled:!0}),totalAmount:new s.NI({value:0,disabled:!0}),amountPaid:new s.NI(""),balance:new s.NI({value:"",disabled:!0})})}onOrderSelected(t){console.log(t),this.selectedOrderId=t.id,this.selectedOrderData=t.data(),this.paymentForm.controls.orderCode.setValue(t.data().order_code),this.paymentForm.controls.customerName.setValue(t.data().customer.customer_name),this.paymentForm.controls.totalAmount.setValue(t.data().total_amount)}openOrderWindow(){console.log("You are opening select order window"),this.selectOrder.openModal()}setBalance(){this.paymentForm.controls.balance.setValue(this.paymentForm.controls.totalAmount.value-this.paymentForm.controls.amountPaid.value)}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.\u0275\u0275defineComponent({type:a,selectors:[["app-payment-form"]],viewQuery:function(t,n){if(1&t&&e.\u0275\u0275viewQuery(ee,5,T.$),2&t){let r;e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(n.selectOrder=r.first)}},decls:57,vars:1,consts:[[1,"page-form",3,"formGroup"],[1,"row"],[1,"col-md-12"],[1,"col-md-6"],[1,"row","mb-1"],[1,"col-md-4"],[1,"float-md-end","float-sm-start","mt-1"],[1,"col-md-8"],["formControlName","paymentCode",1,"form-control","form-control-sm","w-100"],[1,"row","mb-4"],["type","datetime-local","formControlName","paymentDate",1,"form-control","form-control-sm","w-100"],[1,"input-group","input-group-sm","w-100"],["formControlName","orderCode",1,"form-control"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"bi","bi-three-dots"],["formControlName","customerName",1,"form-control"],["type","number","min","0","step",".01","formControlName","totalAmount",1,"form-control","form-control-sm","w-100",3,"change"],["type","number","min","0","step",".01","formControlName","amountPaid",1,"form-control","form-control-sm","w-100",3,"change"],["type","number","min","0","step",".01","formControlName","balance",1,"form-control","form-control-sm","w-100"],[3,"rowSelected"],["selectOrderComponentReference",""]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"form",0),e.\u0275\u0275elementStart(1,"div",1),e.\u0275\u0275elementStart(2,"div",2),e.\u0275\u0275elementStart(3,"h4"),e.\u0275\u0275text(4,"Payment Details"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"div",3),e.\u0275\u0275elementStart(6,"div",4),e.\u0275\u0275elementStart(7,"div",5),e.\u0275\u0275elementStart(8,"label",6),e.\u0275\u0275text(9,"Payment ID :"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"div",7),e.\u0275\u0275element(11,"input",8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"div",9),e.\u0275\u0275elementStart(13,"div",5),e.\u0275\u0275elementStart(14,"label",6),e.\u0275\u0275text(15,"Payment Date :"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"div",7),e.\u0275\u0275element(17,"input",10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"div",4),e.\u0275\u0275elementStart(19,"div",5),e.\u0275\u0275elementStart(20,"label",6),e.\u0275\u0275text(21,"Order ID :"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(22,"div",7),e.\u0275\u0275elementStart(23,"div",11),e.\u0275\u0275element(24,"input",12),e.\u0275\u0275elementStart(25,"button",13),e.\u0275\u0275listener("click",function(){return n.openOrderWindow()}),e.\u0275\u0275element(26,"i",14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(27,"div",4),e.\u0275\u0275elementStart(28,"div",5),e.\u0275\u0275elementStart(29,"label",6),e.\u0275\u0275text(30,"Customer Name :"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(31,"div",7),e.\u0275\u0275elementStart(32,"div",11),e.\u0275\u0275element(33,"input",15),e.\u0275\u0275elementStart(34,"button",13),e.\u0275\u0275listener("click",function(){return n.openOrderWindow()}),e.\u0275\u0275element(35,"i",14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(36,"div",9),e.\u0275\u0275elementStart(37,"div",5),e.\u0275\u0275elementStart(38,"label",6),e.\u0275\u0275text(39,"Amount Due :"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(40,"div",7),e.\u0275\u0275elementStart(41,"input",16),e.\u0275\u0275listener("change",function(){return n.setBalance()}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(42,"div",4),e.\u0275\u0275elementStart(43,"div",5),e.\u0275\u0275elementStart(44,"label",6),e.\u0275\u0275text(45,"Amount Paid :"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(46,"div",7),e.\u0275\u0275elementStart(47,"input",17),e.\u0275\u0275listener("change",function(){return n.setBalance()}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(48,"div",4),e.\u0275\u0275elementStart(49,"div",5),e.\u0275\u0275elementStart(50,"label",6),e.\u0275\u0275text(51,"Balance :"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(52,"div",7),e.\u0275\u0275element(53,"input",18),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(54,"hr"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(55,"app-select-order",19,20),e.\u0275\u0275listener("rowSelected",function(m){return n.onOrderSelected(m)}),e.\u0275\u0275elementEnd()),2&t&&e.\u0275\u0275property("formGroup",n.paymentForm)},directives:[s._Y,s.JL,s.sg,s.Fj,s.JJ,s.u,s.qQ,s.wV,T.$],styles:[""]}),a})();const te=["paymentFormComponentReference"],ne=["connectionToastComponentReference"];let ae=(()=>{class a{constructor(t,n){this.router=t,this.paymentsApi=n,this.navHeading=[{text:"New Payment",url:"/home/payments/new-payment"}],this.isPaymentSaving=!1}ngOnInit(){}ngAfterViewInit(){this.paymentForm.paymentForm.controls.paymentDate.setValue((new Date).toISOString().slice(0,16))}createPayment(){console.log("u are saving a new payment");var t={created_at:(0,q.Bt)(),account:localStorage.getItem("restaurant_id"),payment_code:this.paymentForm.paymentForm.controls.paymentCode.value,payment_date:this.paymentForm.paymentForm.controls.paymentDate.value,amount_paid:this.paymentForm.paymentForm.controls.amountPaid.value,order:{id:this.paymentForm.selectedOrderId,data:this.paymentForm.selectedOrderData}};console.log(t),this.isPaymentSaving=!0,this.paymentsApi.createPayment(t).then(n=>{console.log(n),this.isPaymentSaving=!1,sessionStorage.setItem("restaurant_payment_id",n.id),this.router.navigateByUrl("/home/payments/view-payment")},n=>{console.log(n),this.isPaymentSaving=!1,this.connectionToast.openToast()})}}return a.\u0275fac=function(t){return new(t||a)(e.\u0275\u0275directiveInject(d.F0),e.\u0275\u0275directiveInject(v.Y))},a.\u0275cmp=e.\u0275\u0275defineComponent({type:a,selectors:[["app-new-payment"]],viewQuery:function(t,n){if(1&t&&(e.\u0275\u0275viewQuery(te,5,S),e.\u0275\u0275viewQuery(ne,5,y.Y)),2&t){let r;e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(n.paymentForm=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(n.connectionToast=r.first)}},decls:12,vars:2,consts:[[3,"headings"],[1,"container"],["paymentFormComponentReference",""],[1,"row","page-form"],[1,"col-md-6"],["type","button","routerLink","/home/payments/all-payments",1,"btn","btn-secondary","btn-sm","float-end","ms-1","page-form-btn"],[1,"btn","btn-secondary","btn-sm","float-end","ms-1","page-form-btn",3,"disabled","click"],["connectionToastComponentReference",""]],template:function(t,n){1&t&&(e.\u0275\u0275element(0,"app-module-topnav",0),e.\u0275\u0275elementStart(1,"div",1),e.\u0275\u0275element(2,"app-payment-form",null,2),e.\u0275\u0275elementStart(4,"div",3),e.\u0275\u0275elementStart(5,"div",4),e.\u0275\u0275elementStart(6,"button",5),e.\u0275\u0275text(7,"Cancel"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"button",6),e.\u0275\u0275listener("click",function(){return n.createPayment()}),e.\u0275\u0275text(9,"Save"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(10,"app-connection-toast",null,7)),2&t&&(e.\u0275\u0275property("headings",n.navHeading),e.\u0275\u0275advance(8),e.\u0275\u0275property("disabled",n.isPaymentSaving))},directives:[P.H,S,d.rH,y.Y],styles:[""]}),a})();var I=l(8622);const re=["paymentFormComponentReference"],oe=["connectionToastComponentReference"],ie=["deleteModalComponentReference"];function le(a,o){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",7),e.\u0275\u0275elementStart(1,"div",8),e.\u0275\u0275elementStart(2,"button",9),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().onPrintRoll()}),e.\u0275\u0275element(3,"i",10),e.\u0275\u0275text(4,"Print"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"button",11),e.\u0275\u0275text(6,"Cancel"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"button",12),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().confirmDelete()}),e.\u0275\u0275text(8,"Delete"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"button",13),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().updatePayment()}),e.\u0275\u0275text(10,"Save"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()}if(2&a){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(7),e.\u0275\u0275property("disabled",t.isPaymentDeleting),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",t.isPaymentSaving)}}function me(a,o){1&a&&(e.\u0275\u0275elementStart(0,"div",7),e.\u0275\u0275elementStart(1,"div",8),e.\u0275\u0275elementStart(2,"button",14),e.\u0275\u0275elementStart(3,"div",15),e.\u0275\u0275elementStart(4,"span",16),e.\u0275\u0275text(5,"Loading..."),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd())}const se=[{path:"",component:i,children:[{path:"",component:x},{path:"dashboard",component:x},{path:"all-payments",component:X},{path:"new-payment",component:ae},{path:"view-payment",component:(()=>{class a{constructor(t,n,r){this.router=t,this.paymentsApi=n,this.paymentsPrint=r,this.navHeading=[{text:"View Payment",url:"/home/payments/view-payment"}],this.isPaymentLoading=!1,this.isPaymentSaving=!1,this.isPaymentDeleting=!1}ngOnInit(){this.getPayment()}getPayment(){this.isPaymentLoading=!0,this.paymentsApi.getPayment().then(t=>{console.log(t.data()),this.paymentData=t,this.isPaymentLoading=!1,this.paymentForm.paymentForm.controls.paymentCode.setValue(t.data().payment_code),this.paymentForm.paymentForm.controls.paymentDate.setValue(t.data().payment_date),this.paymentForm.paymentForm.controls.amountPaid.setValue(t.data().amount_paid),this.paymentForm.paymentForm.controls.selectedCustomerId=t.data().order.data.customer.id,this.paymentForm.paymentForm.controls.orderCode.setValue(t.data().order.data.order_code),this.paymentForm.paymentForm.controls.customerName.setValue(t.data().order.data.customer.customer_name),this.paymentForm.paymentForm.controls.totalAmount.setValue(t.data().order.data.total_amount),this.paymentForm.selectedOrderId=t.data().order.id,this.paymentForm.selectedOrderData=t.data().order.data,this.paymentForm.setBalance()},t=>{console.log(t),this.isPaymentLoading=!1,this.connectionToast.openToast()})}updatePayment(){console.log("u are saving a new payment");var t={payment_code:this.paymentForm.paymentForm.controls.paymentCode.value,payment_date:this.paymentForm.paymentForm.controls.paymentDate.value,amount_paid:this.paymentForm.paymentForm.controls.amountPaid.value,order:{id:this.paymentForm.selectedOrderId,data:this.paymentForm.selectedOrderData}};console.log(t),this.isPaymentSaving=!0,this.paymentsApi.updatePayment(t).then(n=>{console.log(n),this.isPaymentSaving=!1},n=>{console.log(n),this.isPaymentSaving=!1,this.connectionToast.openToast()})}confirmDelete(){this.deleteModal.openModal()}deletePayment(){this.isPaymentDeleting=!0,this.paymentsApi.deletePayment().then(t=>{console.log(t),this.router.navigateByUrl("/home/payments/all-payments")},t=>{console.log(t),this.connectionToast.openToast()})}onPrint(){console.log("lets start printing..."),this.paymentsPrint.printViewPayment()}onPrintRoll(){console.log("lets start printing roll..."),this.paymentsPrint.printPaymentRoll()}}return a.\u0275fac=function(t){return new(t||a)(e.\u0275\u0275directiveInject(d.F0),e.\u0275\u0275directiveInject(v.Y),e.\u0275\u0275directiveInject(A))},a.\u0275cmp=e.\u0275\u0275defineComponent({type:a,selectors:[["app-view-payment"]],viewQuery:function(t,n){if(1&t&&(e.\u0275\u0275viewQuery(re,5,S),e.\u0275\u0275viewQuery(oe,5,y.Y),e.\u0275\u0275viewQuery(ie,5,I.z)),2&t){let r;e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(n.paymentForm=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(n.connectionToast=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(n.deleteModal=r.first)}},decls:10,vars:4,consts:[[3,"headings","showPrint","print"],[1,"container"],["paymentFormComponentReference",""],["class","row page-form",4,"ngIf"],["connectionToastComponentReference",""],[3,"confirmEvent"],["deleteModalComponentReference",""],[1,"row","page-form"],[1,"col-md-6"],["type","button",1,"btn","btn-secondary","btn-sm","page-form-btn",3,"click"],[1,"bi","bi-receipt","me-2"],["type","button","routerLink","/home/payments/all-payments",1,"btn","btn-secondary","btn-sm","float-end","ms-1","page-form-btn"],["type","button",1,"btn","btn-secondary","btn-sm","float-end","ms-1","page-form-btn",3,"disabled","click"],[1,"btn","btn-secondary","btn-sm","float-end","ms-1","page-form-btn",3,"disabled","click"],["type","button",1,"btn","btn-sm","float-end","ms-1","btn-light","page-form-btn"],["role","status",1,"spinner-grow","spinner-grow-sm"],[1,"visually-hidden"]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"app-module-topnav",0),e.\u0275\u0275listener("print",function(){return n.onPrint()}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(1,"div",1),e.\u0275\u0275element(2,"app-payment-form",null,2),e.\u0275\u0275template(4,le,11,2,"div",3),e.\u0275\u0275template(5,me,6,0,"div",3),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(6,"app-connection-toast",null,4),e.\u0275\u0275elementStart(8,"app-delete-modal",5,6),e.\u0275\u0275listener("confirmEvent",function(){return n.deletePayment()}),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275property("headings",n.navHeading)("showPrint",!0),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",!n.isPaymentLoading),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.isPaymentLoading))},directives:[P.H,S,c.O5,y.Y,I.z,d.rH],styles:[""]}),a})(),canActivate:[(()=>{class a{constructor(t){this.router=t}canActivate(t){return!!sessionStorage.getItem("restaurant_payment_id")||(this.router.navigateByUrl("/home/payments"),!1)}}return a.\u0275fac=function(t){return new(t||a)(e.\u0275\u0275inject(d.F0))},a.\u0275prov=e.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"}),a})()]}]}];let de=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=e.\u0275\u0275defineInjector({imports:[[d.Bz.forChild(se)],d.Bz]}),a})();var ce=l(7264),F=l(5018),pe=l(4277);let ue=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=e.\u0275\u0275defineInjector({imports:[[c.ez,d.Bz,s.u5,s.UX,E.m9,F.p,pe.V]]}),a})(),ye=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=e.\u0275\u0275defineInjector({imports:[[c.ez,de,ce.M,F.p,ue]]}),a})()},1766:(w,h,l)=>{l.d(h,{O:()=>e});var c=l(2741),d=l(9805);let e=(()=>{class u{constructor(i){this.afs=i,this.orderRef=this.afs.collection("restaurant/module_orders/restaurant_order"),this.orderItemRef=this.afs.collection("restaurant/module_orders/restaurant_order_item")}createOrder(i){return this.orderRef.add(i)}getOrder(){return this.orderRef.doc(String(sessionStorage.getItem("restaurant_order_id"))).ref.get()}updateOrder(i){return this.orderRef.doc(String(sessionStorage.getItem("restaurant_order_id"))).update(i)}deleteOrder(){return this.orderRef.doc(String(sessionStorage.getItem("restaurant_order_id"))).delete()}getAccountOrder(i,p){return this.orderRef.ref.where("account","==",localStorage.getItem("restaurant_id")).orderBy(null==i?void 0:i.field,null==i?void 0:i.direction).limit(p).get()}getAccountOrderNext(i,p,_){return this.orderRef.ref.where("account","==",localStorage.getItem("restaurant_id")).orderBy(null==i?void 0:i.field,null==i?void 0:i.direction).startAfter(_).limit(p).get()}getAccountOrderPrev(i,p,_){return this.orderRef.ref.where("account","==",localStorage.getItem("restaurant_id")).orderBy(null==i?void 0:i.field,null==i?void 0:i.direction).startAt(_).limit(p).get()}getAllAccountOrder(){return this.orderRef.ref.where("account","==",localStorage.getItem("restaurant_id")).orderBy("created_at","desc").get()}createOrderItem(i){return this.orderItemRef.add(i)}getOrderItem(i){return this.orderItemRef.doc(i).ref.get()}updateOrderItem(i,p){return this.orderItemRef.doc(i).update(p)}deleteOrderItem(i){return this.orderItemRef.doc(i).delete()}getOrderOrderItem(){return this.orderItemRef.ref.where("order","==",sessionStorage.getItem("restaurant_order_id")).orderBy("created_at","asc").get()}getWeekOrder(i,p){return this.orderRef.ref.where("account","==",localStorage.getItem("restaurant_id")).where("created_at","<=",i).where("created_at",">=",p).get()}}return u.\u0275fac=function(i){return new(i||u)(c.\u0275\u0275inject(d.ST))},u.\u0275prov=c.\u0275\u0275defineInjectable({token:u,factory:u.\u0275fac,providedIn:"root"}),u})()}}]);