"use strict";(self.webpackChunkang_fire=self.webpackChunkang_fire||[]).push([[457],{756:(S,v,l)=>{l.d(v,{Bt:()=>r.Bt});var r=l(9665)},8622:(S,v,l)=>{l.d(v,{z:()=>e});var r=l(2741);const d=["buttonElementReference"];let e=(()=>{class _{constructor(){this.confirmEvent=new r.EventEmitter}ngOnInit(){}openModal(){this.buttonElement.nativeElement.click()}onConfirm(){console.log("Yep... lets go ahead and delete this useless piece of ****"),this.confirmEvent.emit("OK")}}return _.\u0275fac=function(u){return new(u||_)},_.\u0275cmp=r.\u0275\u0275defineComponent({type:_,selectors:[["app-delete-modal"]],viewQuery:function(u,m){if(1&u&&r.\u0275\u0275viewQuery(d,5,r.ElementRef),2&u){let p;r.\u0275\u0275queryRefresh(p=r.\u0275\u0275loadQuery())&&(m.buttonElement=p.first)}},outputs:{confirmEvent:"confirmEvent"},decls:14,vars:1,consts:[["data-bs-toggle","modal","data-bs-target","#deleteConfirmationModal",3,"hidden"],["buttonElementReference",""],["id","deleteConfirmationModal","tabindex","-1","aria-labelledby","deleteConfirmationModalLabel","aria-hidden","true",1,"modal","fade","form-modal"],[1,"modal-dialog"],[1,"modal-content","text-center"],[1,"modal-body"],[1,"pt-4"],[1,"modal-footer"],["data-bs-dismiss","modal",1,"btn","btn-sm","btn-secondary","modal-form-btn",3,"click"],["data-bs-dismiss","modal",1,"btn","btn-sm","btn-secondary","modal-form-btn"]],template:function(u,m){1&u&&(r.\u0275\u0275elementStart(0,"button",0,1),r.\u0275\u0275text(2," Launch demo modal\n"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(3,"div",2),r.\u0275\u0275elementStart(4,"div",3),r.\u0275\u0275elementStart(5,"div",4),r.\u0275\u0275elementStart(6,"div",5),r.\u0275\u0275elementStart(7,"p",6),r.\u0275\u0275text(8,"Are you sure you want to delete this item?"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(9,"div",7),r.\u0275\u0275elementStart(10,"button",8),r.\u0275\u0275listener("click",function(){return m.onConfirm()}),r.\u0275\u0275text(11,"Yes"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(12,"button",9),r.\u0275\u0275text(13,"No"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd()),2&u&&r.\u0275\u0275property("hidden",!0)},styles:[".modal-footer[_ngcontent-%COMP%]{align-items:center;justify-content:center}"]}),_})()},6457:(S,v,l)=>{l.r(v),l.d(v,{AdminPageModule:()=>Qe});var r=l(6274),d=l(8718),e=l(2741),_=l(8088),g=l(7632);let u=(()=>{class a{constructor(){this.navLinks=[{text:"All Users",url:"/home/admin/all-users",icon:"bi bi-people"},{text:"Invitations",url:"/home/admin/invitations",icon:"bi bi-envelope"},{text:"New Invitation",url:"/home/admin/search",icon:"bi bi-plus-square"}]}ngOnInit(){}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.\u0275\u0275defineComponent({type:a,selectors:[["app-admin-page"]],decls:6,vars:4,consts:[[3,"navBrand","source"],["id","wrapper"],[3,"navLinks","heading"],["id","content-wrapper",1,"d-flex","flex-column"],["id","content"]],template:function(t,n){1&t&&(e.\u0275\u0275element(0,"app-main-navbar",0),e.\u0275\u0275elementStart(1,"div",1),e.\u0275\u0275element(2,"app-module-sidenav",2),e.\u0275\u0275elementStart(3,"div",3),e.\u0275\u0275elementStart(4,"div",4),e.\u0275\u0275element(5,"router-outlet"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275property("navBrand","nR Restaurant")("source","Restaurant"),e.\u0275\u0275advance(2),e.\u0275\u0275property("navLinks",n.navLinks)("heading","Admin"))},directives:[_.D,g.m,d.lC],styles:[""]}),a})();var m=l(1580),p=l(1934),f=l(8972);const T=["connectionToastComponentReference"];let E=(()=>{class a{constructor(t){this.adminApi=t,this.navHeading=[{text:"Dashboard",url:"/home/portal/dashboard"}],this.allUsersCount=0,this.sortParams={field:"access_level",direction:"asc"}}ngOnInit(){this.getAccountAccountUser()}getAccountAccountUser(){this.adminApi.getAccountAccountUser(this.sortParams).then(t=>{console.log(t),this.allUsersCount=t.docs.length},t=>{console.log(t),this.connectionToast.openToast()})}}return a.\u0275fac=function(t){return new(t||a)(e.\u0275\u0275directiveInject(p.o))},a.\u0275cmp=e.\u0275\u0275defineComponent({type:a,selectors:[["app-dashboard"]],viewQuery:function(t,n){if(1&t&&e.\u0275\u0275viewQuery(T,5,m.Y),2&t){let s;e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(n.connectionToast=s.first)}},decls:14,vars:2,consts:[[3,"headings"],[1,"container"],[1,"row"],[1,"col-md-3","mb-4"],[1,"card","border-left-secondary","shadow","h-100","py-2"],[1,"card-body"],[1,"row","no-gutters","align-items-center"],[1,"col","mr-2"],[1,"text-xs","font-weight-bold","text-uppercase","mb-1"],[1,"h5","mb-0","font-weight-bold","text-gray-800"],["connectionToastComponentReference",""]],template:function(t,n){1&t&&(e.\u0275\u0275element(0,"app-module-topnav",0),e.\u0275\u0275elementStart(1,"div",1),e.\u0275\u0275elementStart(2,"div",2),e.\u0275\u0275elementStart(3,"div",3),e.\u0275\u0275elementStart(4,"div",4),e.\u0275\u0275elementStart(5,"div",5),e.\u0275\u0275elementStart(6,"div",6),e.\u0275\u0275elementStart(7,"div",7),e.\u0275\u0275elementStart(8,"div",8),e.\u0275\u0275text(9,"All Users"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"div",9),e.\u0275\u0275text(11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(12,"app-connection-toast",null,10)),2&t&&(e.\u0275\u0275property("headings",n.navHeading),e.\u0275\u0275advance(11),e.\u0275\u0275textInterpolate(n.allUsersCount))},directives:[f.H,m.Y],styles:[""]}),a})(),D=(()=>{class a{constructor(){this.navHeading=[{text:"Settings",url:"/home/admin/settings"}]}ngOnInit(){}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.\u0275\u0275defineComponent({type:a,selectors:[["app-settings"]],decls:1,vars:1,consts:[[3,"headings"]],template:function(t,n){1&t&&e.\u0275\u0275element(0,"app-module-topnav",0),2&t&&e.\u0275\u0275property("headings",n.navHeading)},directives:[f.H],styles:[""]}),a})();const U=["connectionToastComponentReference"];function R(a,i){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",18),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("personal_name","desc")}),e.\u0275\u0275elementEnd()}}function k(a,i){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",19),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("personal_name","asc")}),e.\u0275\u0275elementEnd()}}function M(a,i){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",20),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("personal_name","desc")}),e.\u0275\u0275elementEnd()}}function P(a,i){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",18),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("access_level","desc")}),e.\u0275\u0275elementEnd()}}function V(a,i){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",19),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("access_level","asc")}),e.\u0275\u0275elementEnd()}}function Q(a,i){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",20),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("access_level","desc")}),e.\u0275\u0275elementEnd()}}function L(a,i){1&a&&(e.\u0275\u0275elementStart(0,"tr",21),e.\u0275\u0275elementStart(1,"td",22),e.\u0275\u0275elementStart(2,"div",23),e.\u0275\u0275elementStart(3,"span",24),e.\u0275\u0275text(4,"Loading..."),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd())}function O(a,i){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"tr",25),e.\u0275\u0275listener("dblclick",function(){const o=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275nextContext().viewUser(o.id)}),e.\u0275\u0275elementStart(1,"td"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"td"),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()}if(2&a){const t=i.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate2("",null==t?null:t.data().user.data.first_name," ",null==t?null:t.data().user.data.last_name,""),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null==t?null:t.data().access_level)}}let N=(()=>{class a{constructor(t,n){this.router=t,this.adminApi=n,this.navHeading=[{text:"All Users",url:"/home/admin/all-users"}],this.usersGridData=[],this.isFetchingGridData=!1,this.sortParams={field:"access_level",direction:"asc"}}ngOnInit(){this.getAccountAccountUser()}getAccountAccountUser(){this.isFetchingGridData=!0,this.adminApi.getAccountAccountUser(this.sortParams).then(t=>{console.log(t),this.usersGridData=t.docs,this.isFetchingGridData=!1},t=>{console.log(t),this.isFetchingGridData=!1,this.connectionToast.openToast()})}sortTable(t,n){this.sortParams.field=t,this.sortParams.direction=n,this.getAccountAccountUser()}viewUser(t){console.log(t),sessionStorage.setItem("restaurant_account_user_id",t),this.router.navigateByUrl("/home/admin/view-user")}}return a.\u0275fac=function(t){return new(t||a)(e.\u0275\u0275directiveInject(d.F0),e.\u0275\u0275directiveInject(p.o))},a.\u0275cmp=e.\u0275\u0275defineComponent({type:a,selectors:[["app-all-users"]],viewQuery:function(t,n){if(1&t&&e.\u0275\u0275viewQuery(U,5,m.Y),2&t){let s;e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(n.connectionToast=s.first)}},decls:27,vars:9,consts:[[3,"headings"],[1,"container"],[1,"row","mb-3"],[1,"col"],["routerLink","/home/admin/search",1,"btn","btn-secondary","page-add-btn"],[1,"row"],[1,"col-md-7"],[1,"overflow-auto"],[1,"table","table-bordered","table-sm","w-100","page-table"],[1,"bg-light"],["width","65%",1,"min-width-4"],["class","bi bi-filter float-end list-pointer",3,"click",4,"ngIf"],["class","bi bi-sort-down float-end list-pointer",3,"click",4,"ngIf"],["class","bi bi-sort-up float-end list-pointer",3,"click",4,"ngIf"],["width","35%",1,"min-width-2"],["class","text-center",4,"ngIf"],["class","table-pointer",3,"dblclick",4,"ngFor","ngForOf"],["connectionToastComponentReference",""],[1,"bi","bi-filter","float-end","list-pointer",3,"click"],[1,"bi","bi-sort-down","float-end","list-pointer",3,"click"],[1,"bi","bi-sort-up","float-end","list-pointer",3,"click"],[1,"text-center"],["colspan","4"],["role","status",1,"spinner-grow","m-4"],[1,"visually-hidden"],[1,"table-pointer",3,"dblclick"]],template:function(t,n){1&t&&(e.\u0275\u0275element(0,"app-module-topnav",0),e.\u0275\u0275elementStart(1,"div",1),e.\u0275\u0275elementStart(2,"div",2),e.\u0275\u0275elementStart(3,"div",3),e.\u0275\u0275elementStart(4,"button",4),e.\u0275\u0275text(5,"Invite User"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"div",5),e.\u0275\u0275elementStart(7,"div",6),e.\u0275\u0275elementStart(8,"div",7),e.\u0275\u0275elementStart(9,"table",8),e.\u0275\u0275elementStart(10,"thead"),e.\u0275\u0275elementStart(11,"tr",9),e.\u0275\u0275elementStart(12,"th",10),e.\u0275\u0275text(13," User's Name "),e.\u0275\u0275template(14,R,1,0,"i",11),e.\u0275\u0275template(15,k,1,0,"i",12),e.\u0275\u0275template(16,M,1,0,"i",13),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"th",14),e.\u0275\u0275text(18," User Level "),e.\u0275\u0275template(19,P,1,0,"i",11),e.\u0275\u0275template(20,V,1,0,"i",12),e.\u0275\u0275template(21,Q,1,0,"i",13),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(22,L,5,0,"tr",15),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(23,"tbody"),e.\u0275\u0275template(24,O,5,3,"tr",16),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(25,"app-connection-toast",null,17)),2&t&&(e.\u0275\u0275property("headings",n.navHeading),e.\u0275\u0275advance(14),e.\u0275\u0275property("ngIf","personal_name"!=n.sortParams.field),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","personal_name"==n.sortParams.field&&"desc"==n.sortParams.direction),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","personal_name"==n.sortParams.field&&"asc"==n.sortParams.direction),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf","access_level"!=n.sortParams.field),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","access_level"==n.sortParams.field&&"desc"==n.sortParams.direction),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","access_level"==n.sortParams.field&&"asc"==n.sortParams.direction),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.isFetchingGridData),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",n.usersGridData))},directives:[f.H,d.rH,r.O5,r.sg,m.Y],styles:[""]}),a})();var c=l(3324),b=l(8622);const j=["connectionToastComponentReference"];let C=(()=>{class a{constructor(t){this.adminApi=t,this.accessForm={admin_access:!1,customers_access:!1,deliveries_access:!1,kitchen_stock_access:!1,menu_access:!1,orders_access:!1,payments_access:!1,portal_access:!1,roster_access:!1,settings_access:!1,staff_access:!1,reservations_access:!1,tables_access:!1}}ngOnInit(){this.getUserAccess()}getUserAccess(){this.adminApi.getUserAccess().then(t=>{console.log(t),this.accessForm.admin_access=t.data().admin_access,this.accessForm.customers_access=t.data().customers_access,this.accessForm.deliveries_access=t.data().deliveries_access,this.accessForm.kitchen_stock_access=t.data().kitchen_stock_access,this.accessForm.menu_access=t.data().menu_access,this.accessForm.orders_access=t.data().orders_access,this.accessForm.payments_access=t.data().payments_access,this.accessForm.portal_access=t.data().portal_access,this.accessForm.roster_access=t.data().roster_access,this.accessForm.reservations_access=t.data().reservations_access,this.accessForm.settings_access=t.data().settings_access,this.accessForm.staff_access=t.data().staff_access,this.accessForm.tables_access=t.data().tables_access},t=>{console.log(t),this.connectionToast.openToast()})}updateUserAccess(){this.adminApi.updateUserAccess({admin_access:this.accessForm.admin_access,customers_access:this.accessForm.customers_access,deliveries_access:this.accessForm.deliveries_access,kitchen_stock_access:this.accessForm.kitchen_stock_access,menu_access:this.accessForm.menu_access,orders_access:this.accessForm.orders_access,payments_access:this.accessForm.payments_access,portal_access:this.accessForm.portal_access,roster_access:this.accessForm.roster_access,settings_access:this.accessForm.settings_access,staff_access:this.accessForm.staff_access,reservations_access:this.accessForm.reservations_access,tables_access:this.accessForm.tables_access}).then(n=>{console.log(n)},n=>{console.log(n),this.connectionToast.openToast()})}setLevelAccess(t){console.log("u are changing user level to "+t),"Admin"==t?(this.accessForm.admin_access=!0,this.accessForm.customers_access=!0,this.accessForm.deliveries_access=!0,this.accessForm.kitchen_stock_access=!0,this.accessForm.menu_access=!0,this.accessForm.orders_access=!0,this.accessForm.payments_access=!0,this.accessForm.portal_access=!0,this.accessForm.reservations_access=!0,this.accessForm.roster_access=!0,this.accessForm.settings_access=!0,this.accessForm.staff_access=!0,this.accessForm.tables_access=!0):"Manager"==t?(this.accessForm.admin_access=!1,this.accessForm.customers_access=!0,this.accessForm.deliveries_access=!0,this.accessForm.kitchen_stock_access=!0,this.accessForm.menu_access=!0,this.accessForm.orders_access=!0,this.accessForm.payments_access=!0,this.accessForm.portal_access=!1,this.accessForm.reservations_access=!0,this.accessForm.roster_access=!0,this.accessForm.settings_access=!1,this.accessForm.staff_access=!0,this.accessForm.tables_access=!0):"Staff"==t&&(this.accessForm.admin_access=!1,this.accessForm.customers_access=!1,this.accessForm.deliveries_access=!1,this.accessForm.kitchen_stock_access=!1,this.accessForm.menu_access=!1,this.accessForm.orders_access=!1,this.accessForm.payments_access=!1,this.accessForm.portal_access=!1,this.accessForm.reservations_access=!1,this.accessForm.roster_access=!1,this.accessForm.settings_access=!1,this.accessForm.staff_access=!1,this.accessForm.tables_access=!1)}}return a.\u0275fac=function(t){return new(t||a)(e.\u0275\u0275directiveInject(p.o))},a.\u0275cmp=e.\u0275\u0275defineComponent({type:a,selectors:[["app-access-form"]],viewQuery:function(t,n){if(1&t&&e.\u0275\u0275viewQuery(j,5,m.Y),2&t){let s;e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(n.connectionToast=s.first)}},decls:81,vars:13,consts:[[1,"row","mb-3"],[1,"col-md-12"],[1,"row"],[1,"table","table-sm","page-table"],["width","70%"],["width","30%"],["type","checkbox","id","adminCheckbox",1,"form-check-input",3,"ngModel","ngModelChange"],["connectionToastComponentReference",""]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275elementStart(1,"div",1),e.\u0275\u0275elementStart(2,"h5"),e.\u0275\u0275text(3,"User Modules' Access"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",2),e.\u0275\u0275elementStart(5,"div",1),e.\u0275\u0275elementStart(6,"table",3),e.\u0275\u0275elementStart(7,"thead"),e.\u0275\u0275elementStart(8,"tr"),e.\u0275\u0275elementStart(9,"th",4),e.\u0275\u0275text(10,"Module"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"th",5),e.\u0275\u0275text(12,"Access"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"tbody"),e.\u0275\u0275elementStart(14,"tr"),e.\u0275\u0275elementStart(15,"td"),e.\u0275\u0275text(16,"Admin"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"td"),e.\u0275\u0275elementStart(18,"input",6),e.\u0275\u0275listener("ngModelChange",function(o){return n.accessForm.admin_access=o}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"tr"),e.\u0275\u0275elementStart(20,"td"),e.\u0275\u0275text(21,"Customers"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(22,"td"),e.\u0275\u0275elementStart(23,"input",6),e.\u0275\u0275listener("ngModelChange",function(o){return n.accessForm.customers_access=o}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(24,"tr"),e.\u0275\u0275elementStart(25,"td"),e.\u0275\u0275text(26,"Deliveries"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(27,"td"),e.\u0275\u0275elementStart(28,"input",6),e.\u0275\u0275listener("ngModelChange",function(o){return n.accessForm.deliveries_access=o}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(29,"tr"),e.\u0275\u0275elementStart(30,"td"),e.\u0275\u0275text(31,"Kitchen Stock"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(32,"td"),e.\u0275\u0275elementStart(33,"input",6),e.\u0275\u0275listener("ngModelChange",function(o){return n.accessForm.kitchen_stock_access=o}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(34,"tr"),e.\u0275\u0275elementStart(35,"td"),e.\u0275\u0275text(36,"Menu"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(37,"td"),e.\u0275\u0275elementStart(38,"input",6),e.\u0275\u0275listener("ngModelChange",function(o){return n.accessForm.menu_access=o}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(39,"tr"),e.\u0275\u0275elementStart(40,"td"),e.\u0275\u0275text(41,"Orders"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(42,"td"),e.\u0275\u0275elementStart(43,"input",6),e.\u0275\u0275listener("ngModelChange",function(o){return n.accessForm.orders_access=o}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(44,"tr"),e.\u0275\u0275elementStart(45,"td"),e.\u0275\u0275text(46,"Payments"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(47,"td"),e.\u0275\u0275elementStart(48,"input",6),e.\u0275\u0275listener("ngModelChange",function(o){return n.accessForm.payments_access=o}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(49,"tr"),e.\u0275\u0275elementStart(50,"td"),e.\u0275\u0275text(51,"Portal"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(52,"td"),e.\u0275\u0275elementStart(53,"input",6),e.\u0275\u0275listener("ngModelChange",function(o){return n.accessForm.portal_access=o}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(54,"tr"),e.\u0275\u0275elementStart(55,"td"),e.\u0275\u0275text(56,"Reservations"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(57,"td"),e.\u0275\u0275elementStart(58,"input",6),e.\u0275\u0275listener("ngModelChange",function(o){return n.accessForm.reservations_access=o}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(59,"tr"),e.\u0275\u0275elementStart(60,"td"),e.\u0275\u0275text(61,"Roster"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(62,"td"),e.\u0275\u0275elementStart(63,"input",6),e.\u0275\u0275listener("ngModelChange",function(o){return n.accessForm.roster_access=o}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(64,"tr"),e.\u0275\u0275elementStart(65,"td"),e.\u0275\u0275text(66,"Settings"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(67,"td"),e.\u0275\u0275elementStart(68,"input",6),e.\u0275\u0275listener("ngModelChange",function(o){return n.accessForm.settings_access=o}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(69,"tr"),e.\u0275\u0275elementStart(70,"td"),e.\u0275\u0275text(71,"Staff"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(72,"td"),e.\u0275\u0275elementStart(73,"input",6),e.\u0275\u0275listener("ngModelChange",function(o){return n.accessForm.staff_access=o}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(74,"tr"),e.\u0275\u0275elementStart(75,"td"),e.\u0275\u0275text(76,"Tables"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(77,"td"),e.\u0275\u0275elementStart(78,"input",6),e.\u0275\u0275listener("ngModelChange",function(o){return n.accessForm.tables_access=o}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(79,"app-connection-toast",null,7)),2&t&&(e.\u0275\u0275advance(18),e.\u0275\u0275property("ngModel",n.accessForm.admin_access),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngModel",n.accessForm.customers_access),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngModel",n.accessForm.deliveries_access),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngModel",n.accessForm.kitchen_stock_access),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngModel",n.accessForm.menu_access),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngModel",n.accessForm.orders_access),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngModel",n.accessForm.payments_access),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngModel",n.accessForm.portal_access),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngModel",n.accessForm.reservations_access),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngModel",n.accessForm.roster_access),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngModel",n.accessForm.settings_access),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngModel",n.accessForm.staff_access),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngModel",n.accessForm.tables_access))},directives:[c.Wl,c.JJ,c.On,m.Y],styles:[""]}),a})();var y=l(8140);const G=["buttonElementReference"],B=["accessFormComponentReference"],H=["connectionToastComponentReference"],Y=["deleteModalComponentReference"];function z(a,i){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",2),e.\u0275\u0275elementStart(1,"div",3),e.\u0275\u0275elementStart(2,"button",30),e.\u0275\u0275text(3,"Cancel"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"button",31),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().confirmDelete()}),e.\u0275\u0275text(5,"Delete"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"button",31),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().updateAdminUser()}),e.\u0275\u0275text(7,"Save"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()}if(2&a){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(4),e.\u0275\u0275property("disabled",t.isUserDeleting),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",t.isUserSaving)}}function J(a,i){1&a&&(e.\u0275\u0275elementStart(0,"div",2),e.\u0275\u0275elementStart(1,"div",3),e.\u0275\u0275elementStart(2,"button",32),e.\u0275\u0275elementStart(3,"div",33),e.\u0275\u0275elementStart(4,"span",34),e.\u0275\u0275text(5,"Loading..."),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd())}let $=(()=>{class a{constructor(t,n,s){this.router=t,this.accountApi=n,this.adminApi=s,this.navHeading=[{text:"All Users",url:"/home/admin/all-users"},{text:"View User",url:"/home/admin/view-user"}],this.userForm=new c.cw({}),this.isUserLoading=!1,this.isUserSaving=!1,this.isUserDeleting=!1}ngOnInit(){this.initUserForm(),this.getAccountUser()}ngAfterViewInit(){this.accessFormComponent.getUserAccess()}initUserForm(){this.userForm=new c.cw({personalName:new c.NI(""),accessLevel:new c.NI("")})}getAccount(){this.accountApi.getAccount().then(t=>{console.log(t),this.accountData=t},t=>{console.log(t),this.connectionToast.openToast()})}getAccountUser(){this.isUserLoading=!0,this.adminApi.getAccountUser().then(t=>{console.log(t),this.userFormData=t,this.AccountUserPersonalId=t.data().user.id,this.userForm.controls.personalName.setValue(t.data().user.data.first_name+" "+t.data().user.data.last_name),this.userForm.controls.accessLevel.setValue(t.data().access_level),this.isUserLoading=!1},t=>{console.log(t),this.isUserLoading=!1,this.connectionToast.openToast()})}updateAdminUser(){this.isUserSaving=!0;let t={access_level:this.userForm.controls.accessLevel.value};this.accountData.data().created_by!=this.AccountUserPersonalId?this.adminApi.updateAccountUser(t).then(n=>{console.log(n),this.isUserSaving=!1},n=>{console.log(n),this.isUserSaving=!1,this.connectionToast.openToast()}):this.buttonElement.nativeElement.click(),this.accessFormComponent.updateUserAccess()}changeLevel(t){console.log(t.target.value),this.accessFormComponent.setLevelAccess(t.target.value)}confirmDelete(){this.deleteModal.openModal()}deleteAdminUser(){this.isUserDeleting=!0,this.accountData.data().created_by!=this.AccountUserPersonalId?this.adminApi.deleteAccountUser().then(t=>{console.log(t),this.isUserDeleting=!1,this.router.navigateByUrl("/home/admin/all-users")},t=>{console.log(t),this.isUserDeleting=!1,this.connectionToast.openToast()}):this.buttonElement.nativeElement.click()}}return a.\u0275fac=function(t){return new(t||a)(e.\u0275\u0275directiveInject(d.F0),e.\u0275\u0275directiveInject(y.X),e.\u0275\u0275directiveInject(p.o))},a.\u0275cmp=e.\u0275\u0275defineComponent({type:a,selectors:[["app-view-user"]],viewQuery:function(t,n){if(1&t&&(e.\u0275\u0275viewQuery(G,5,e.ElementRef),e.\u0275\u0275viewQuery(B,5,C),e.\u0275\u0275viewQuery(H,5,m.Y),e.\u0275\u0275viewQuery(Y,5,b.z)),2&t){let s;e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(n.buttonElement=s.first),e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(n.accessFormComponent=s.first),e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(n.connectionToast=s.first),e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(n.deleteModal=s.first)}},decls:63,vars:5,consts:[[3,"headings"],[1,"container"],[1,"row","page-form"],[1,"col-md-6"],[1,"page-form",3,"formGroup"],[1,"row","mb-2"],[1,"col-md-4"],[1,"float-md-end","float-sm-start","mt-1"],[1,"col-md-8"],["formControlName","personalName",1,"form-control","form-control-sm","w-100"],["formControlName","accessLevel",1,"form-control","form-control-sm","w-100",3,"change"],[1,"small"],[1,"top-divider"],[1,"bottom-divider"],[1,"row"],["accessFormComponentReference",""],["class","row page-form",4,"ngIf"],["data-bs-toggle","modal","data-bs-target","#creatorDeleteErrorModal",3,"hidden"],["buttonElementReference",""],["id","creatorDeleteErrorModal","tabindex","-1","aria-labelledby","creatorDeleteErrorModalLabel","aria-hidden","true",1,"modal","fade","form-modal"],[1,"modal-dialog"],[1,"modal-content","text-center"],[1,"modal-header","bg-light"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],["dismissButtonElementReference",""],[1,"modal-body"],[1,"my-4"],["connectionToastComponentReference",""],[3,"confirmEvent"],["deleteModalComponentReference",""],["routerLink","/home/admin/all-users",1,"btn","btn-secondary","btn-sm","float-end","ms-1","page-form-btn"],[1,"btn","btn-secondary","btn-sm","float-end","ms-1","page-form-btn",3,"disabled","click"],["type","button",1,"btn","btn-sm","float-end","ms-1","btn-light","page-form-btn"],["role","status",1,"spinner-grow","spinner-grow-sm"],[1,"visually-hidden"]],template:function(t,n){1&t&&(e.\u0275\u0275element(0,"app-module-topnav",0),e.\u0275\u0275elementStart(1,"div",1),e.\u0275\u0275elementStart(2,"div",2),e.\u0275\u0275elementStart(3,"div",3),e.\u0275\u0275elementStart(4,"form",4),e.\u0275\u0275elementStart(5,"div",5),e.\u0275\u0275elementStart(6,"div",6),e.\u0275\u0275elementStart(7,"label",7),e.\u0275\u0275text(8,"User Name :"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"div",8),e.\u0275\u0275element(10,"input",9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"div",5),e.\u0275\u0275elementStart(12,"div",6),e.\u0275\u0275elementStart(13,"label",7),e.\u0275\u0275text(14,"Access Level :"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"div",8),e.\u0275\u0275elementStart(16,"select",10),e.\u0275\u0275listener("change",function(o){return n.changeLevel(o)}),e.\u0275\u0275elementStart(17,"option"),e.\u0275\u0275text(18,"Admin"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"option"),e.\u0275\u0275text(20,"Manager"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(21,"option"),e.\u0275\u0275text(22,"Staff"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(23,"div",3),e.\u0275\u0275elementStart(24,"span",11),e.\u0275\u0275elementStart(25,"strong"),e.\u0275\u0275text(26,"Admin"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(27," - has access to all modules by default"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(28,"br"),e.\u0275\u0275elementStart(29,"span",11),e.\u0275\u0275elementStart(30,"strong"),e.\u0275\u0275text(31,"Manager"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(32," - has access to all but except Admin and Settings modules by default"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(33,"br"),e.\u0275\u0275elementStart(34,"span",11),e.\u0275\u0275elementStart(35,"strong"),e.\u0275\u0275text(36,"Staff"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(37," - has no access to all modules by default"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(38,"br"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(39,"hr",12),e.\u0275\u0275element(40,"hr",13),e.\u0275\u0275elementStart(41,"div",14),e.\u0275\u0275elementStart(42,"div",3),e.\u0275\u0275element(43,"app-access-form",null,15),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(45,z,8,2,"div",16),e.\u0275\u0275template(46,J,6,0,"div",16),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(47,"button",17,18),e.\u0275\u0275text(49," Launch demo modal\n"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(50,"div",19),e.\u0275\u0275elementStart(51,"div",20),e.\u0275\u0275elementStart(52,"div",21),e.\u0275\u0275elementStart(53,"div",22),e.\u0275\u0275element(54,"button",23,24),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(56,"div",25),e.\u0275\u0275elementStart(57,"p",26),e.\u0275\u0275text(58,"You cannot delete or change the access level of the creator of the account"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(59,"app-connection-toast",null,27),e.\u0275\u0275elementStart(61,"app-delete-modal",28,29),e.\u0275\u0275listener("confirmEvent",function(){return n.deleteAdminUser()}),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275property("headings",n.navHeading),e.\u0275\u0275advance(4),e.\u0275\u0275property("formGroup",n.userForm),e.\u0275\u0275advance(41),e.\u0275\u0275property("ngIf",!n.isUserLoading),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.isUserLoading),e.\u0275\u0275advance(1),e.\u0275\u0275property("hidden",!0))},directives:[f.H,c._Y,c.JL,c.sg,c.Fj,c.JJ,c.u,c.EJ,c.YN,c.Kr,C,r.O5,m.Y,b.z,d.rH],styles:[""]}),a})();const K=["editButtonElementReference"],W=["dismissButtonElementReference"],X=["connectionToastComponentReference"];function Z(a,i){if(1&a&&e.\u0275\u0275element(0,"img",17),2&a){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("src",null==t.invitationData?null:t.invitationData.data().user.data.photo,e.\u0275\u0275sanitizeUrl)}}function q(a,i){1&a&&e.\u0275\u0275element(0,"img",18)}let I=(()=>{class a{constructor(t){this.adminApi=t}ngOnInit(){}openModal(t){console.log(t),this.invitationData=t,this.editButton.nativeElement.click()}}return a.\u0275fac=function(t){return new(t||a)(e.\u0275\u0275directiveInject(p.o))},a.\u0275cmp=e.\u0275\u0275defineComponent({type:a,selectors:[["app-view-invitation"]],viewQuery:function(t,n){if(1&t&&(e.\u0275\u0275viewQuery(K,5,e.ElementRef),e.\u0275\u0275viewQuery(W,5,e.ElementRef),e.\u0275\u0275viewQuery(X,5,m.Y)),2&t){let s;e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(n.editButton=s.first),e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(n.dismissButton=s.first),e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(n.connectionToast=s.first)}},decls:38,vars:11,consts:[["data-bs-toggle","modal","data-bs-target","#editItemModal",3,"hidden"],["editButtonElementReference",""],["id","editItemModal","tabindex","-1","aria-labelledby","editItemModalLabel","aria-hidden","true",1,"modal","fade","form-modal"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header","bg-light"],["id","editItemModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],["dismissButtonElementReference",""],[1,"modal-body","text-center"],[1,"row","mb-4"],[1,"col","text-muted"],[1,"row","mb-2"],[1,"col"],["alt","","width","90","height","90","class","rounded-circle",3,"src",4,"ngIf"],["src","../../../../../assets/images/utilities/photo-avatar.jpg","alt","","width","90","height","90","class","rounded-circle",4,"ngIf"],["connectionToastComponentReference",""],["alt","","width","90","height","90",1,"rounded-circle",3,"src"],["src","../../../../../assets/images/utilities/photo-avatar.jpg","alt","","width","90","height","90",1,"rounded-circle"]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"button",0,1),e.\u0275\u0275text(2," Launch demo modal\n"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",2),e.\u0275\u0275elementStart(4,"div",3),e.\u0275\u0275elementStart(5,"div",4),e.\u0275\u0275elementStart(6,"div",5),e.\u0275\u0275elementStart(7,"span",6),e.\u0275\u0275text(8,"View Invitation"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(9,"button",7,8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"div",9),e.\u0275\u0275elementStart(12,"div",10),e.\u0275\u0275elementStart(13,"div",11),e.\u0275\u0275elementStart(14,"label"),e.\u0275\u0275elementStart(15,"em"),e.\u0275\u0275text(16,"Invitation Date :"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(17),e.\u0275\u0275pipe(18,"date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"div",12),e.\u0275\u0275elementStart(20,"div",13),e.\u0275\u0275template(21,Z,1,1,"img",14),e.\u0275\u0275template(22,q,1,0,"img",15),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(23,"div",12),e.\u0275\u0275elementStart(24,"div",13),e.\u0275\u0275elementStart(25,"strong"),e.\u0275\u0275text(26),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(27,"div",10),e.\u0275\u0275elementStart(28,"div",11),e.\u0275\u0275text(29),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(30,"div",10),e.\u0275\u0275elementStart(31,"div",13),e.\u0275\u0275elementStart(32,"label"),e.\u0275\u0275elementStart(33,"em"),e.\u0275\u0275text(34,"Invitation Status :"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(35),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(36,"app-connection-toast",null,16)),2&t&&(e.\u0275\u0275property("hidden",!0),e.\u0275\u0275advance(17),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind2(18,8,null==n.invitationData?null:n.invitationData.data().created_at.toDate(),"MMMM d, y, hh:mm:ss a")," "),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",""!=(null==n.invitationData?null:n.invitationData.data().user.data.photo)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",""==(null==n.invitationData?null:n.invitationData.data().user.data.photo)),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate2("",null==n.invitationData?null:n.invitationData.data().user.data.first_name," ",null==n.invitationData?null:n.invitationData.data().user.data.last_name,""),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",null==n.invitationData?null:n.invitationData.data().user.data.location," "),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate1(" ",null==n.invitationData?null:n.invitationData.data().invitation_status," "))},directives:[r.O5,m.Y],pipes:[r.uU],styles:[""]}),a})();const ee=["connectionToastComponentReference"],te=["viewInvitationComponentReference"];function ne(a,i){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",32),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("created_at","desc")}),e.\u0275\u0275elementEnd()}}function ae(a,i){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",33),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("created_at","asc")}),e.\u0275\u0275elementEnd()}}function se(a,i){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",34),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("created_at","desc")}),e.\u0275\u0275elementEnd()}}function ie(a,i){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",32),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("invitee_name","desc")}),e.\u0275\u0275elementEnd()}}function re(a,i){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",33),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("invitee_name","asc")}),e.\u0275\u0275elementEnd()}}function oe(a,i){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",34),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("invitee_name","desc")}),e.\u0275\u0275elementEnd()}}function le(a,i){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",32),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("invitation_status","desc")}),e.\u0275\u0275elementEnd()}}function ce(a,i){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",33),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("invitation_status","asc")}),e.\u0275\u0275elementEnd()}}function me(a,i){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",34),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("invitation_status","desc")}),e.\u0275\u0275elementEnd()}}function de(a,i){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"tr",35),e.\u0275\u0275listener("dblclick",function(){const o=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275nextContext().openInvitation(o)}),e.\u0275\u0275elementStart(1,"td"),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"td"),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"td"),e.\u0275\u0275text(7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()}if(2&a){const t=i.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,4,null==t?null:t.data().created_at.toDate())),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate2("",null==t?null:t.data().user.data.first_name," ",null==t?null:t.data().user.data.last_name,""),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null==t?null:t.data().invitation_status)}}function pe(a,i){1&a&&(e.\u0275\u0275elementStart(0,"tr",36),e.\u0275\u0275elementStart(1,"td",20),e.\u0275\u0275elementStart(2,"div",37),e.\u0275\u0275elementStart(3,"span",38),e.\u0275\u0275text(4,"Loading..."),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd())}function ue(a,i){1&a&&(e.\u0275\u0275elementStart(0,"tr",36),e.\u0275\u0275elementStart(1,"td",20),e.\u0275\u0275elementStart(2,"p",39),e.\u0275\u0275text(3,"No data available"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd())}let he=(()=>{class a{constructor(t,n){this.router=t,this.adminApi=n,this.navHeading=[{text:"Invitations",url:"/home/admin/invitations"}],this.invitationsGridData=[],this.isFetchingGridData=!1,this.isDataAvailable=!0,this.firstInResponse=[],this.lastInResponse=[],this.nextStartAfter=[],this.prevStartAt=[],this.pageNumber=0,this.disableNext=!0,this.disablePrev=!0,this.sortParams={field:"created_at",direction:"desc"}}ngOnInit(){this.getAccountInvitation()}getAccountInvitation(){this.isFetchingGridData=!0,this.adminApi.getAccountInvitation(this.sortParams,20).then(t=>{console.log(t),this.invitationsGridData=t.docs,this.isFetchingGridData=!1,this.prevStartAt=this.firstInResponse,this.nextStartAfter=t.docs[t.docs.length-1],this.firstInResponse=t.docs[0],this.pageNumber=1,this.isDataAvailable=!!t.docs.length,!t.docs.length||t.docs.length<20?(this.disableNext=!0,this.disablePrev=!0):(this.disableNext=!1,this.disablePrev=!0)},t=>{console.log(t),this.isFetchingGridData=!1,this.connectionToast.openToast()})}nextPage(t){t.preventDefault(),this.isFetchingGridData=!0,this.adminApi.getAccountInvitationNext(this.sortParams,20,this.nextStartAfter).then(n=>{console.log(n),this.invitationsGridData=n.docs,this.isFetchingGridData=!1,this.prevStartAt=this.firstInResponse,this.nextStartAfter=n.docs[n.docs.length-1],this.firstInResponse=n.docs[0],this.pageNumber++,n.docs.length<20&&(this.disableNext=!0,this.disablePrev=!1)},n=>{console.log(n),this.isFetchingGridData=!1,this.connectionToast.openToast()})}previousPage(t){t.preventDefault(),this.isFetchingGridData=!0,this.adminApi.getAccountInvitationPrev(this.sortParams,20,this.prevStartAt).then(n=>{console.log(n),this.invitationsGridData=n.docs,this.isFetchingGridData=!1,n.docs.length||(this.isDataAvailable=!1),this.prevStartAt=this.firstInResponse,this.nextStartAfter=n.docs[n.docs.length-1],this.firstInResponse=n.docs[0],this.pageNumber--,1==this.pageNumber&&(this.disableNext=!1,this.disablePrev=!0)},n=>{console.log(n),this.isFetchingGridData=!1,this.connectionToast.openToast()})}openInvitation(t){this.viewInvitation.openModal(t)}sortTable(t,n){this.sortParams.field=t,this.sortParams.direction=n,this.getAccountInvitation()}}return a.\u0275fac=function(t){return new(t||a)(e.\u0275\u0275directiveInject(d.F0),e.\u0275\u0275directiveInject(p.o))},a.\u0275cmp=e.\u0275\u0275defineComponent({type:a,selectors:[["app-invitations"]],viewQuery:function(t,n){if(1&t&&(e.\u0275\u0275viewQuery(ee,5,m.Y),e.\u0275\u0275viewQuery(te,5,I)),2&t){let s;e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(n.connectionToast=s.first),e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(n.viewInvitation=s.first)}},decls:51,vars:17,consts:[[3,"headings"],[1,"container"],[1,"row"],[1,"col-md-8"],[1,"row","mb-3"],[1,"col"],["routerLink","/home/admin/search",1,"btn","btn-secondary","page-add-btn"],[1,"btn","btn-light","border","float-end","page-refresh-btn",3,"disabled","click"],[1,"bi","bi-arrow-clockwise"],[1,"overflow-auto"],[1,"table","table-bordered","table-sm","w-100","page-table"],[1,"bg-light"],["width","25%",1,"min-width-3"],["class","bi bi-filter float-end list-pointer",3,"click",4,"ngIf"],["class","bi bi-sort-down float-end list-pointer",3,"click",4,"ngIf"],["class","bi bi-sort-up float-end list-pointer",3,"click",4,"ngIf"],["width","50%",1,"min-width-4"],["width","25%",1,"min-width-2"],["class","table-pointer",3,"dblclick",4,"ngFor","ngForOf"],["class","text-center",4,"ngIf"],["colspan","3"],["aria-label","Page navigation",1,"nav-light","float-end"],[1,"pagination","pagination-sm","mb-0","justify-content-end"],[1,"page-item",3,"ngClass"],["href","#","aria-label","First",1,"page-link",3,"click"],[1,"bi","bi-caret-left-fill"],[1,"page-item"],["href","#","aria-label","Current",1,"page-link",3,"click"],["href","#","aria-label","Last",1,"page-link",3,"click"],[1,"bi","bi-caret-right-fill"],["connectionToastComponentReference",""],["viewInvitationComponentReference",""],[1,"bi","bi-filter","float-end","list-pointer",3,"click"],[1,"bi","bi-sort-down","float-end","list-pointer",3,"click"],[1,"bi","bi-sort-up","float-end","list-pointer",3,"click"],[1,"table-pointer",3,"dblclick"],[1,"text-center"],["role","status",1,"spinner-grow","m-4"],[1,"visually-hidden"],[1,"m-4"]],template:function(t,n){1&t&&(e.\u0275\u0275element(0,"app-module-topnav",0),e.\u0275\u0275elementStart(1,"div",1),e.\u0275\u0275elementStart(2,"div",2),e.\u0275\u0275elementStart(3,"div",3),e.\u0275\u0275elementStart(4,"div",4),e.\u0275\u0275elementStart(5,"div",5),e.\u0275\u0275elementStart(6,"button",6),e.\u0275\u0275text(7,"Invite User"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"button",7),e.\u0275\u0275listener("click",function(){return n.getAccountInvitation()}),e.\u0275\u0275element(9,"i",8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"div",9),e.\u0275\u0275elementStart(11,"table",10),e.\u0275\u0275elementStart(12,"thead"),e.\u0275\u0275elementStart(13,"tr",11),e.\u0275\u0275elementStart(14,"th",12),e.\u0275\u0275text(15," Invitation Date "),e.\u0275\u0275template(16,ne,1,0,"i",13),e.\u0275\u0275template(17,ae,1,0,"i",14),e.\u0275\u0275template(18,se,1,0,"i",15),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"th",16),e.\u0275\u0275text(20," User's Name "),e.\u0275\u0275template(21,ie,1,0,"i",13),e.\u0275\u0275template(22,re,1,0,"i",14),e.\u0275\u0275template(23,oe,1,0,"i",15),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(24,"th",17),e.\u0275\u0275text(25," Invitation Status "),e.\u0275\u0275template(26,le,1,0,"i",13),e.\u0275\u0275template(27,ce,1,0,"i",14),e.\u0275\u0275template(28,me,1,0,"i",15),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(29,"tbody"),e.\u0275\u0275template(30,de,8,6,"tr",18),e.\u0275\u0275template(31,pe,5,0,"tr",19),e.\u0275\u0275template(32,ue,4,0,"tr",19),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(33,"tfoot"),e.\u0275\u0275elementStart(34,"tr",11),e.\u0275\u0275elementStart(35,"td",20),e.\u0275\u0275elementStart(36,"nav",21),e.\u0275\u0275elementStart(37,"ul",22),e.\u0275\u0275elementStart(38,"li",23),e.\u0275\u0275elementStart(39,"a",24),e.\u0275\u0275listener("click",function(o){return n.previousPage(o)}),e.\u0275\u0275element(40,"i",25),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(41,"li",26),e.\u0275\u0275elementStart(42,"a",27),e.\u0275\u0275listener("click",function(o){return o.preventDefault()}),e.\u0275\u0275text(43),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(44,"li",23),e.\u0275\u0275elementStart(45,"a",28),e.\u0275\u0275listener("click",function(o){return n.nextPage(o)}),e.\u0275\u0275element(46,"i",29),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(47,"app-connection-toast",null,30),e.\u0275\u0275element(49,"app-view-invitation",null,31)),2&t&&(e.\u0275\u0275property("headings",n.navHeading),e.\u0275\u0275advance(8),e.\u0275\u0275property("disabled",n.isFetchingGridData),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf","created_at"!=n.sortParams.field),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","created_at"==n.sortParams.field&&"desc"==n.sortParams.direction),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","created_at"==n.sortParams.field&&"asc"==n.sortParams.direction),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf","invitee_name"!=n.sortParams.field),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","invitee_name"==n.sortParams.field&&"desc"==n.sortParams.direction),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","invitee_name"==n.sortParams.field&&"asc"==n.sortParams.direction),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf","invitation_status"!=n.sortParams.field),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","invitation_status"==n.sortParams.field&&"desc"==n.sortParams.direction),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","invitation_status"==n.sortParams.field&&"asc"==n.sortParams.direction),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",n.invitationsGridData),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.isFetchingGridData),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!n.isDataAvailable&&!n.isFetchingGridData),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngClass",n.disablePrev?"disabled":""),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate1(" ",n.pageNumber," "),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",n.disableNext?"disabled":""))},directives:[f.H,d.rH,r.O5,r.sg,r.mk,m.Y,I],pipes:[r.uU],styles:[""]}),a})();var _e=l(1921),w=l(756);function ve(a,i){if(1&a&&(e.\u0275\u0275elementStart(0,"div",6),e.\u0275\u0275elementStart(1,"small"),e.\u0275\u0275text(2,"showing results for "),e.\u0275\u0275elementStart(3,"b"),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1('"',t.searchQuery,'"')}}function fe(a,i){if(1&a&&(e.\u0275\u0275elementStart(0,"div",6),e.\u0275\u0275elementStart(1,"small"),e.\u0275\u0275text(2,"no results found for "),e.\u0275\u0275elementStart(3,"b"),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1('"',t.searchQuery,'"')}}function ge(a,i){if(1&a&&e.\u0275\u0275element(0,"img",14),2&a){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275property("src",null==t?null:t.data().photo,e.\u0275\u0275sanitizeUrl)}}function Se(a,i){1&a&&e.\u0275\u0275element(0,"img",15)}function Ee(a,i){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"tr",7),e.\u0275\u0275listener("click",function(){const o=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275nextContext().viewDetail(o.id)}),e.\u0275\u0275elementStart(1,"td",8),e.\u0275\u0275template(2,ge,1,1,"img",9),e.\u0275\u0275template(3,Se,1,0,"img",10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"td",11),e.\u0275\u0275elementStart(5,"p",12),e.\u0275\u0275elementStart(6,"strong"),e.\u0275\u0275text(7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"td",13),e.\u0275\u0275elementStart(9,"p",12),e.\u0275\u0275text(10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()}if(2&a){const t=i.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",""!=(null==t?null:t.data().photo)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",""==(null==t?null:t.data().photo)),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate2("",null==t?null:t.data().first_name," ",null==t?null:t.data().last_name,""),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(null==t?null:t.data().location)}}let x=(()=>{class a{constructor(){this.viewDetailEvent=new e.EventEmitter}ngOnInit(){}viewDetail(t){this.viewDetailEvent.emit(t)}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.\u0275\u0275defineComponent({type:a,selectors:[["app-search-results"]],inputs:{searchResults:"searchResults",searchQuery:"searchQuery"},outputs:{viewDetailEvent:"viewDetailEvent"},decls:8,vars:3,consts:[[1,"row","mb-3"],["class","col-md-12 text-center text-muted",4,"ngIf"],[1,"result-body"],[1,"table-responsive"],[1,"table","table-hover"],["class","list-pointer",3,"click",4,"ngFor","ngForOf"],[1,"col-md-12","text-center","text-muted"],[1,"list-pointer",3,"click"],["width","10%",1,"align-middle"],["alt","","width","40","height","40","class","rounded-circle",3,"src",4,"ngIf"],["src","../../../../../assets/images/utilities/photo-avatar.jpg","alt","Company","width","40","height","40","class","rounded-circle",4,"ngIf"],["width","50%",1,"align-middle"],[1,"m-0"],["width","40%",1,"align-middle"],["alt","","width","40","height","40",1,"rounded-circle",3,"src"],["src","../../../../../assets/images/utilities/photo-avatar.jpg","alt","Company","width","40","height","40",1,"rounded-circle"]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275template(1,ve,5,1,"div",1),e.\u0275\u0275template(2,fe,5,1,"div",1),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",2),e.\u0275\u0275elementStart(4,"div",3),e.\u0275\u0275elementStart(5,"table",4),e.\u0275\u0275elementStart(6,"tbody"),e.\u0275\u0275template(7,Ee,11,5,"tr",5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",0!=n.searchResults.length),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",0==n.searchResults.length),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngForOf",n.searchResults))},directives:[r.O5,r.sg],styles:[""]}),a})();const be=["buttonElementReference"];function Ce(a,i){if(1&a&&e.\u0275\u0275element(0,"img",22),2&a){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("src",null==t.searchDetail?null:t.searchDetail.data().photo,e.\u0275\u0275sanitizeUrl)}}function ye(a,i){1&a&&e.\u0275\u0275element(0,"img",23)}let F=(()=>{class a{constructor(){this.sendInvitationEvent=new e.EventEmitter,this.isSending=!1}ngOnInit(){}sendInvitation(){this.sendInvitationEvent.emit()}openModal(){this.buttonElement.nativeElement.click()}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.\u0275\u0275defineComponent({type:a,selectors:[["app-search-detail"]],viewQuery:function(t,n){if(1&t&&e.\u0275\u0275viewQuery(be,5,e.ElementRef),2&t){let s;e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(n.buttonElement=s.first)}},inputs:{searchDetail:"searchDetail"},outputs:{sendInvitationEvent:"sendInvitationEvent"},decls:46,vars:8,consts:[[1,"row","mt-3"],[1,"col-md-4","text-center","align-middle"],["alt","","width","120","height","120","class","rounded-circle",3,"src",4,"ngIf"],["src","../../../../../assets/images/utilities/photo-avatar.jpg","alt","Company","width","120","height","120","class","rounded-circle",4,"ngIf"],[1,"col-md-8"],[1,"row","mb-3"],[1,"col-md-2"],[1,"col-md-10"],[1,"row"],[1,"col-md-12","text-center"],[1,"btn","btn-secondary","page-add-btn",3,"disabled","click"],["data-bs-toggle","modal","data-bs-target","#subscriptionCheckModal",3,"hidden"],["buttonElementReference",""],["id","subscriptionCheckModal","tabindex","-1","aria-labelledby","subscriptionCheckModalLabel","aria-hidden","true",1,"modal","fade","form-modal"],[1,"modal-dialog"],[1,"modal-content","text-center"],[1,"modal-header","bg-light"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],["dismissButtonElementReference",""],[1,"modal-body"],[1,"my-4"],["routerLink","/home/settings/billing","data-bs-dismiss","modal",1,"btn","btn-sm","btn-secondary","mb-3"],["alt","","width","120","height","120",1,"rounded-circle",3,"src"],["src","../../../../../assets/images/utilities/photo-avatar.jpg","alt","Company","width","120","height","120",1,"rounded-circle"]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275elementStart(1,"div",1),e.\u0275\u0275template(2,Ce,1,1,"img",2),e.\u0275\u0275template(3,ye,1,0,"img",3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",4),e.\u0275\u0275elementStart(5,"div",5),e.\u0275\u0275elementStart(6,"div",6),e.\u0275\u0275elementStart(7,"em"),e.\u0275\u0275elementStart(8,"small"),e.\u0275\u0275text(9,"Name :"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"div",7),e.\u0275\u0275elementStart(11,"strong"),e.\u0275\u0275text(12),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"div",5),e.\u0275\u0275elementStart(14,"div",6),e.\u0275\u0275elementStart(15,"em"),e.\u0275\u0275elementStart(16,"small"),e.\u0275\u0275text(17,"Location :"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"div",7),e.\u0275\u0275text(19),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"div",5),e.\u0275\u0275elementStart(21,"div",6),e.\u0275\u0275elementStart(22,"em"),e.\u0275\u0275elementStart(23,"small"),e.\u0275\u0275text(24,"About :"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(25,"div",4),e.\u0275\u0275text(26),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(27,"hr"),e.\u0275\u0275elementStart(28,"div",8),e.\u0275\u0275elementStart(29,"div",9),e.\u0275\u0275elementStart(30,"button",10),e.\u0275\u0275listener("click",function(){return n.sendInvitation()}),e.\u0275\u0275text(31,"Send Invitation"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(32,"button",11,12),e.\u0275\u0275text(34," Launch demo modal\n"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(35,"div",13),e.\u0275\u0275elementStart(36,"div",14),e.\u0275\u0275elementStart(37,"div",15),e.\u0275\u0275elementStart(38,"div",16),e.\u0275\u0275element(39,"button",17,18),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(41,"div",19),e.\u0275\u0275elementStart(42,"p",20),e.\u0275\u0275text(43,"You have reached the maximum allowed users for your subscription plan."),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(44,"button",21),e.\u0275\u0275text(45,"Upgrade Plan"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",""!=(null==n.searchDetail?null:n.searchDetail.data().photo)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",""==(null==n.searchDetail?null:n.searchDetail.data().photo)),e.\u0275\u0275advance(9),e.\u0275\u0275textInterpolate2("",null==n.searchDetail?null:n.searchDetail.data().first_name," ",null==n.searchDetail?null:n.searchDetail.data().last_name,""),e.\u0275\u0275advance(7),e.\u0275\u0275textInterpolate(null==n.searchDetail?null:n.searchDetail.data().location),e.\u0275\u0275advance(7),e.\u0275\u0275textInterpolate(null==n.searchDetail?null:n.searchDetail.data().about),e.\u0275\u0275advance(4),e.\u0275\u0275property("disabled",n.isSending),e.\u0275\u0275advance(2),e.\u0275\u0275property("hidden",!0))},directives:[r.O5,d.rH],styles:[""]}),a})();var Ie=l(2606),we=l(867);const xe=["connectionToastComponentReference"],Fe=["searchResultsComponentReference"],Ae=["searchDetailComponentReference"];function Te(a,i){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275elementStart(1,"app-search-results",16,17),e.\u0275\u0275listener("viewDetailEvent",function(s){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().gotoSearchDetail(s)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()}if(2&a){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("searchQuery",t.searchQuery)("searchResults",t.searchResultsData)}}function De(a,i){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275elementStart(1,"app-search-detail",18,19),e.\u0275\u0275listener("sendInvitationEvent",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().checkSubscriptionStatus()}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()}if(2&a){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("searchDetail",t.searchDetailData)}}const Ue=function(){return{standalone:!0}},Re=[{path:"",component:u,children:[{path:"",component:E},{path:"dashboard",component:E},{path:"settings",component:D},{path:"all-users",component:N},{path:"view-user",component:$,canActivate:[(()=>{class a{constructor(t){this.router=t}canActivate(t){return!!sessionStorage.getItem("restaurant_account_user_id")||(this.router.navigateByUrl("/home/admin"),!1)}}return a.\u0275fac=function(t){return new(t||a)(e.\u0275\u0275inject(d.F0))},a.\u0275prov=e.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"}),a})()]},{path:"invitations",component:he},{path:"search",component:(()=>{class a{constructor(t,n,s,o,h){this.router=t,this.accountApi=n,this.adminApi=s,this.restaurantSettingsApi=o,this.personalSettingsApi=h,this.navHeading=[{text:"New Invitation",url:"/home/admin/search"}],this.searchInput="",this.isSearchResultsReady=!1,this.isSearchDetailReady=!1,this.sortParams={field:"access_level",direction:"asc"}}ngOnInit(){this.getAccount(),console.log(sessionStorage.getItem("restaurantAdminSearchInput")),sessionStorage.getItem("restaurantAdminSearchInput")&&(this.searchQuery=sessionStorage.getItem("restaurantAdminSearchInput"),this.doSearch())}doSearch(){""!=this.searchInput.trim()&&(this.router.navigate(["/home/admin/search/",{input:this.searchInput}]),sessionStorage.setItem("restaurantAdminSearchInput",this.searchInput),this.searchQuery=this.searchInput,this.getSearchResult())}getAccount(){this.accountApi.getAccount().then(t=>{console.log(t),this.accountData=t},t=>{console.log(t),this.connectionToast.openToast()})}getSearchResult(){this.adminApi.getSearchResult(this.searchInput).then(t=>{console.log(t),this.searchResultsData=t.docs,this.isSearchResultsReady=!0,this.isSearchDetailReady=!1},t=>{console.log(t),this.connectionToast.openToast()})}getSearchDetail(){this.adminApi.getSearchDetail(String(sessionStorage.getItem("restaurantAdminSearchUser"))).then(t=>{console.log(t),this.searchDetailData=t,this.isSearchResultsReady=!1,this.isSearchDetailReady=!0},t=>{console.log(t),this.connectionToast.openToast()})}checkSubscriptionStatus(){var t=this;return(0,_e.Z)(function*(){t.searchDetail.isSending=!0;const n=t.adminApi.getAccountAccountUser(t.sortParams),s=t.restaurantSettingsApi.getSubscription(),[o,h]=yield Promise.all([n,s]);o.docs.length>=(null==h?void 0:h.data()).number_users?(console.log("maximum users reached"),t.searchDetail.isSending=!1,t.searchDetail.openModal()):t.createAccountInvitation()})()}createAccountInvitation(){let t={created_at:(0,w.Bt)(),account:localStorage.getItem("restaurant_id"),invitation_status:"Awaiting",user:{id:this.searchDetailData.id,data:this.searchDetailData.data()}};console.log(t),this.searchDetail.isSending=!0,this.adminApi.createInvitation(t).then(n=>{console.log(n),sessionStorage.setItem("restaurant_invitation_id",n.id),this.createUserInvitation(),this.searchDetail.isSending=!1,this.router.navigateByUrl("/home/admin/invitations")},n=>{console.log(n),this.searchDetail.isSending=!1,this.connectionToast.openToast()})}createUserInvitation(){let t={created_at:(0,w.Bt)(),user:this.searchDetailData.id,invitation_status:"Awaiting",account_type:"Restaurant",account_invitaion:sessionStorage.getItem("restaurant_invitation_id"),account:{id:localStorage.getItem("restaurant_id"),data:this.accountData.data()}};console.log(t),this.personalSettingsApi.createInvitation(t).then(n=>{console.log(n)},n=>{console.log(n),this.connectionToast.openToast()})}gotoSearchDetail(t){sessionStorage.setItem("restaurantAdminSearchUser",t),this.getSearchDetail()}}return a.\u0275fac=function(t){return new(t||a)(e.\u0275\u0275directiveInject(d.F0),e.\u0275\u0275directiveInject(y.X),e.\u0275\u0275directiveInject(p.o),e.\u0275\u0275directiveInject(Ie.p),e.\u0275\u0275directiveInject(we.p))},a.\u0275cmp=e.\u0275\u0275defineComponent({type:a,selectors:[["app-user-search"]],viewQuery:function(t,n){if(1&t&&(e.\u0275\u0275viewQuery(xe,5,m.Y),e.\u0275\u0275viewQuery(Fe,5,x),e.\u0275\u0275viewQuery(Ae,5,F)),2&t){let s;e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(n.connectionToast=s.first),e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(n.searchResults=s.first),e.\u0275\u0275queryRefresh(s=e.\u0275\u0275loadQuery())&&(n.searchDetail=s.first)}},decls:22,vars:6,consts:[[3,"headings"],[1,"container"],[1,"row","mb-3"],[1,"col-md-8"],[1,"row"],[1,"col-md-8","mx-auto"],[3,"ngSubmit"],[1,"input-group","input-group-sm"],["type","text","placeholder","Search for users","aria-label","Search for users","aria-describedby","button-addon2",1,"form-control",3,"ngModel","ngModelOptions","ngModelChange"],[1,"input-group-append"],["type","submit","id","button-addon2",1,"btn","btn-sm","btn-secondary"],[1,"bi","bi-search","ms-1"],[1,"text-center"],[1,"text-info"],[4,"ngIf"],["connectionToastComponentReference",""],[3,"searchQuery","searchResults","viewDetailEvent"],["searchResultsComponentReference",""],[3,"searchDetail","sendInvitationEvent"],["searchDetailComponentReference",""]],template:function(t,n){1&t&&(e.\u0275\u0275element(0,"app-module-topnav",0),e.\u0275\u0275elementStart(1,"div",1),e.\u0275\u0275elementStart(2,"div",2),e.\u0275\u0275elementStart(3,"div",3),e.\u0275\u0275elementStart(4,"div",4),e.\u0275\u0275elementStart(5,"div",5),e.\u0275\u0275elementStart(6,"form",6),e.\u0275\u0275listener("ngSubmit",function(){return n.doSearch()}),e.\u0275\u0275elementStart(7,"div",7),e.\u0275\u0275elementStart(8,"input",8),e.\u0275\u0275listener("ngModelChange",function(o){return n.searchInput=o}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"div",9),e.\u0275\u0275elementStart(10,"button",10),e.\u0275\u0275text(11," Search "),e.\u0275\u0275element(12,"i",11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"div",12),e.\u0275\u0275elementStart(14,"small",13),e.\u0275\u0275text(15,"Search with user's last name"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"div",4),e.\u0275\u0275elementStart(17,"div",3),e.\u0275\u0275template(18,Te,3,2,"div",14),e.\u0275\u0275template(19,De,3,1,"div",14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(20,"app-connection-toast",null,15)),2&t&&(e.\u0275\u0275property("headings",n.navHeading),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngModel",n.searchInput)("ngModelOptions",e.\u0275\u0275pureFunction0(5,Ue)),e.\u0275\u0275advance(10),e.\u0275\u0275property("ngIf",n.isSearchResultsReady),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.isSearchDetailReady))},directives:[f.H,c._Y,c.JL,c.F,c.Fj,c.JJ,c.On,r.O5,m.Y,x,F],styles:[""]}),a})()}]}];let ke=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=e.\u0275\u0275defineInjector({imports:[[d.Bz.forChild(Re)],d.Bz]}),a})();var Me=l(7264),A=l(5018),Pe=l(6508);let Ve=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=e.\u0275\u0275defineInjector({imports:[[r.ez,c.u5,c.UX,d.Bz,Pe.m9,A.p]]}),a})(),Qe=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=e.\u0275\u0275defineInjector({imports:[[r.ez,ke,Me.M,A.p,Ve]]}),a})()}}]);