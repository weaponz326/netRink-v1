"use strict";(self.webpackChunkang_fire=self.webpackChunkang_fire||[]).push([[552],{7552:(Ie,S,l)=>{l.r(S),l.d(S,{ReservationsPageModule:()=>xe});var c=l(6274),v=l(8718),e=l(2741),P=l(8088),k=l(7632);let N=(()=>{class r{constructor(){this.navLinks=[{text:"All Reservations",url:"/home/reservations/all-reservations",icon:"bi bi-list-ul"}]}ngOnInit(){}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=e.\u0275\u0275defineComponent({type:r,selectors:[["app-reservations-page"]],decls:6,vars:4,consts:[[3,"navBrand","source"],["id","wrapper"],[3,"navLinks","heading"],["id","content-wrapper",1,"d-flex","flex-column"],["id","content"]],template:function(t,n){1&t&&(e.\u0275\u0275element(0,"app-main-navbar",0),e.\u0275\u0275elementStart(1,"div",1),e.\u0275\u0275element(2,"app-module-sidenav",2),e.\u0275\u0275elementStart(3,"div",3),e.\u0275\u0275elementStart(4,"div",4),e.\u0275\u0275element(5,"router-outlet"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275property("navBrand","nR Restaurant")("source","Restaurant"),e.\u0275\u0275advance(2),e.\u0275\u0275property("navLinks",n.navLinks)("heading","Reservations"))},directives:[P.D,k.m,v.lC],styles:[""]}),r})();var V=l(8361),b=l.n(V),m=l(1580),f=l(9504),g=l(8972),C=l(6508);const Q=["connectionToastComponentReference"];let w=(()=>{class r{constructor(t){this.reservationsApi=t,this.navHeading=[{text:"Dashboard",url:"/home/reservations/dashboard"}],this.weekReservationsCount=0,this.reservationsLineChartData=[{data:[0],label:"Menu Groups"}],this.reservationsLineChartLabels=[""],this.chartOptions={},this.today=b()()}ngOnInit(){this.initChart(),this.getWeekReservation()}initChart(){this.chartOptions={responsive:!0,scales:{yAxes:[{min:0,ticks:{stepSize:1,beginAtZero:!0}}]}}}getWeekReservation(){this.reservationsApi.getWeekReservation(b()(this.today).add(-1,"months").toDate(),this.today.toDate()).then(t=>{console.log(t),this.weekReservationsData=t.docs,this.weekReservationsCount=t.docs.length,this.setReservationChartData()},t=>{console.log(t),this.connectionToast.openToast()})}setReservationChartData(){this.reservationsLineChartLabels=[];for(let o=7;o>0;o--){var t=b()(this.today).add(-o,"days");this.reservationsLineChartLabels.push(t.toDate().toISOString().slice(0,10))}console.log(this.reservationsLineChartLabels);let n=[];for(let o=7;o>0;o--)n.push(0);console.log(n),this.weekReservationsData.forEach(o=>{var s=o.data().created_at.toDate().toISOString().slice(0,10);for(let d=7;d>0;d--)this.reservationsLineChartLabels[d]==s&&n[d]++}),console.log(n),this.reservationsLineChartData=[{data:n,label:"Reservations"}]}}return r.\u0275fac=function(t){return new(t||r)(e.\u0275\u0275directiveInject(f.Q))},r.\u0275cmp=e.\u0275\u0275defineComponent({type:r,selectors:[["app-dashboard"]],viewQuery:function(t,n){if(1&t&&e.\u0275\u0275viewQuery(Q,5,m.Y),2&t){let o;e.\u0275\u0275queryRefresh(o=e.\u0275\u0275loadQuery())&&(n.connectionToast=o.first)}},decls:23,vars:7,consts:[[3,"headings"],[1,"container"],[1,"row"],[1,"col-md-3","mb-4"],[1,"card","order-left-secondary","shadow","h-100","py-2"],[1,"card-body"],[1,"row","no-gutters","align-items-center"],[1,"col","mr-2"],[1,"text-xs","font-weight-bold","text-uppercase","mb-1"],[1,"h5","mb-0","font-weight-bold","text-gray-800"],[1,"col-md-8"],[1,"card","shadow","mb-4"],[1,"card-header","py-3","d-flex","flex-row","align-items-center","justify-content-between"],[1,"m-0","font-weight-bold"],[1,"chart-area"],["baseChart","",3,"datasets","labels","options","legend","chartType"],["connectionToastComponentReference",""]],template:function(t,n){1&t&&(e.\u0275\u0275element(0,"app-module-topnav",0),e.\u0275\u0275elementStart(1,"div",1),e.\u0275\u0275elementStart(2,"div",2),e.\u0275\u0275elementStart(3,"div",3),e.\u0275\u0275elementStart(4,"div",4),e.\u0275\u0275elementStart(5,"div",5),e.\u0275\u0275elementStart(6,"div",6),e.\u0275\u0275elementStart(7,"div",7),e.\u0275\u0275elementStart(8,"div",8),e.\u0275\u0275text(9,"Reservations this Week"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"div",9),e.\u0275\u0275text(11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"div",2),e.\u0275\u0275elementStart(13,"div",10),e.\u0275\u0275elementStart(14,"div",11),e.\u0275\u0275elementStart(15,"div",12),e.\u0275\u0275elementStart(16,"h6",13),e.\u0275\u0275text(17,"Total Reservations by Day"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"div",5),e.\u0275\u0275elementStart(19,"div",14),e.\u0275\u0275element(20,"canvas",15),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(21,"app-connection-toast",null,16)),2&t&&(e.\u0275\u0275property("headings",n.navHeading),e.\u0275\u0275advance(11),e.\u0275\u0275textInterpolate(n.weekReservationsCount),e.\u0275\u0275advance(9),e.\u0275\u0275property("datasets",n.reservationsLineChartData)("labels",n.reservationsLineChartLabels)("options",n.chartOptions)("legend",!0)("chartType","line"))},directives:[g.H,C.jh,m.Y],styles:[""]}),r})();var i=l(3324),E=l(756),h=l(2521);const G=["addButtonElementReference"],L=["dismissButtonElementReference"],M=["connectionToastComponentReference"],j=["selectCustomerComponentReference"];let y=(()=>{class r{constructor(t,n){this.router=t,this.reservationsApi=n,this.reservationForm=new i.cw({}),this.selectedCustomerId="",this.isReservationSaving=!1}ngOnInit(){this.initItemForm()}initItemForm(){this.reservationForm=new i.cw({reservationCode:new i.NI(""),reservationDate:new i.NI(""),customerName:new i.NI(""),arrivalDate:new i.NI(""),status:new i.NI("")})}openModal(){this.addButton.nativeElement.click(),this.reservationForm.controls.reservationDate.setValue((new Date).toISOString().slice(0,16))}createReservation(){let t={created_at:(0,E.Bt)(),account:localStorage.getItem("restaurant_id"),reservation_code:this.reservationForm.controls.reservationCode.value,reservation_date:this.reservationForm.controls.reservationDate.value,number_guests:null,number_tables:null,arrival_date:this.reservationForm.controls.arrivalDate.value,status:this.reservationForm.controls.status.value,customer:{id:this.selectedCustomerId,customer_name:this.reservationForm.controls.customerName.value}};this.isReservationSaving=!0,this.reservationsApi.createReservation(t).then(n=>{console.log(n),sessionStorage.setItem("restaurant_reservation_id",n.id),this.router.navigateByUrl("/home/reservations/view-reservation"),this.dismissButton.nativeElement.click(),this.isReservationSaving=!0},n=>{console.log(n),this.isReservationSaving=!0,this.connectionToast.openToast()})}openCustomerWindow(){console.log("You are opening select customer window"),this.selectCustomer.openModal()}onCustomerSelected(t){console.log(t),this.reservationForm.controls.customerName.setValue(t.data().customer_name),this.selectedCustomerId=t.id}}return r.\u0275fac=function(t){return new(t||r)(e.\u0275\u0275directiveInject(v.F0),e.\u0275\u0275directiveInject(f.Q))},r.\u0275cmp=e.\u0275\u0275defineComponent({type:r,selectors:[["app-new-reservation"]],viewQuery:function(t,n){if(1&t&&(e.\u0275\u0275viewQuery(G,5,e.ElementRef),e.\u0275\u0275viewQuery(L,5,e.ElementRef),e.\u0275\u0275viewQuery(M,5,m.Y),e.\u0275\u0275viewQuery(j,5,h.a)),2&t){let o;e.\u0275\u0275queryRefresh(o=e.\u0275\u0275loadQuery())&&(n.addButton=o.first),e.\u0275\u0275queryRefresh(o=e.\u0275\u0275loadQuery())&&(n.dismissButton=o.first),e.\u0275\u0275queryRefresh(o=e.\u0275\u0275loadQuery())&&(n.connectionToast=o.first),e.\u0275\u0275queryRefresh(o=e.\u0275\u0275loadQuery())&&(n.selectCustomer=o.first)}},decls:55,vars:3,consts:[["data-bs-toggle","modal","data-bs-target","#newReservationModal",3,"hidden"],["addButtonElementReference",""],["id","newReservationModal","tabindex","-1","aria-labelledby","newReservationModalLabel","aria-hidden","true",1,"modal","fade","form-modal"],[1,"modal-dialog"],[1,"modal-content"],[1,"page-form",3,"formGroup","ngSubmit"],[1,"modal-header","bg-light"],["id","newReservationModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],["dismissButtonElementReference",""],[1,"modal-body"],[1,"row","mb-1"],[1,"col-md-4"],[1,"float-md-end","float-sm-start","mt-1"],[1,"col-md-8"],["formControlName","reservationCode",1,"form-control","form-control-sm","w-100"],["type","datetime-local","formControlName","reservationDate",1,"form-control","form-control-sm","w-100"],[1,"input-group","input-group-sm","w-100"],["formControlName","customerName",1,"form-control"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"bi","bi-three-dots"],["type","datetime-local","formControlName","arrivalDate",1,"form-control","form-control-sm","w-100"],["formControlName","status",1,"form-control","form-control-sm","w-100"],[1,"modal-footer"],["type","submit",1,"btn","btn-sm","btn-secondary","modal-form-btn",3,"disabled"],["type","button","data-bs-dismiss","modal",1,"btn","btn-sm","btn-secondary","modal-form-btn"],[3,"rowSelected"],["selectCustomerComponentReference",""],["connectionToastComponentReference",""]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"button",0,1),e.\u0275\u0275text(2," Launch demo modal\n"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",2),e.\u0275\u0275elementStart(4,"div",3),e.\u0275\u0275elementStart(5,"div",4),e.\u0275\u0275elementStart(6,"form",5),e.\u0275\u0275listener("ngSubmit",function(){return n.createReservation()}),e.\u0275\u0275elementStart(7,"div",6),e.\u0275\u0275elementStart(8,"span",7),e.\u0275\u0275text(9,"Add New Reservation"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(10,"button",8,9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"div",10),e.\u0275\u0275elementStart(13,"div",11),e.\u0275\u0275elementStart(14,"div",12),e.\u0275\u0275elementStart(15,"label",13),e.\u0275\u0275text(16,"Reservation ID :"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"div",14),e.\u0275\u0275element(18,"input",15),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"div",11),e.\u0275\u0275elementStart(20,"div",12),e.\u0275\u0275elementStart(21,"label",13),e.\u0275\u0275text(22,"Reservation Date :"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(23,"div",14),e.\u0275\u0275element(24,"input",16),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(25,"div",11),e.\u0275\u0275elementStart(26,"div",12),e.\u0275\u0275elementStart(27,"label",13),e.\u0275\u0275text(28,"Customer Name :"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(29,"div",14),e.\u0275\u0275elementStart(30,"div",17),e.\u0275\u0275element(31,"input",18),e.\u0275\u0275elementStart(32,"button",19),e.\u0275\u0275listener("click",function(){return n.openCustomerWindow()}),e.\u0275\u0275element(33,"i",20),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(34,"div",11),e.\u0275\u0275elementStart(35,"div",12),e.\u0275\u0275elementStart(36,"label",13),e.\u0275\u0275text(37,"Arrival Date :"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(38,"div",14),e.\u0275\u0275element(39,"input",21),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(40,"div",11),e.\u0275\u0275elementStart(41,"div",12),e.\u0275\u0275elementStart(42,"label",13),e.\u0275\u0275text(43,"Status :"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(44,"div",14),e.\u0275\u0275element(45,"input",22),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(46,"div",23),e.\u0275\u0275elementStart(47,"button",24),e.\u0275\u0275text(48,"Save"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(49,"button",25),e.\u0275\u0275text(50,"Cancel"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(51,"app-select-customer",26,27),e.\u0275\u0275listener("rowSelected",function(s){return n.onCustomerSelected(s)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(53,"app-connection-toast",null,28)),2&t&&(e.\u0275\u0275property("hidden",!0),e.\u0275\u0275advance(6),e.\u0275\u0275property("formGroup",n.reservationForm),e.\u0275\u0275advance(41),e.\u0275\u0275property("disabled",n.isReservationSaving))},directives:[i._Y,i.JL,i.sg,i.Fj,i.JJ,i.u,h.a,m.Y],styles:[""]}),r})();var _=l(8622),T=l(1921),B=l(6424);let x=(()=>{class r{constructor(t,n){this.pdfPrint=t,this.reservationsApi=n}printAllReservations(){var t=this;return(0,T.Z)(function*(){const n=yield t.reservationsApi.getAllAccountReservation();var o=[["Reservation ID","Reservation Date","Customer Name","Arrival Date","Status"]];for(let p of n.docs){var s=[];let u=p.data();s.push(u.reservation_code),s.push(u.reservation_date),s.push(u.customer.customer_name),s.push(u.arrival_date),s.push(u.status),o.push(s)}t.pdfPrint.openPdf([{layout:"lightHorizontalLines",table:{headerRows:1,widths:["15%","20%","30%","20%","15%"],body:o}}])})()}printViewReservation(){var t=this;return(0,T.Z)(function*(){const n=t.reservationsApi.getReservation(),o=t.reservationsApi.getReservationReservationTable(),[s,d]=yield Promise.all([n,o]);let p=s.data();var u=[["Table No.","Capacity"]];for(let Ae of d.docs){var R=[];let F=Ae.data();R.push(F.table.table_number),R.push(F.table.capacity),u.push(R)}t.pdfPrint.openPdf([{columns:[[{text:"Reservation ID: "+p.reservation_code},{text:"Reservation Date: "+p.reservation_date},{text:"Customer Name: "+p.customer.customer_name},{text:"Arrival Date: "+p.customer.arrival_date}],[{text:"No. of Guests: "+p.numberGuests},{text:"No. of Tables: "+p.numberTables},{text:"Reservation Status: "+p.reservation_tatus}]]},{text:"Reserved Tables",bold:!0,margin:[0,20,0,10]},{layout:"lightHorizontalLines",table:{headerRows:1,widths:["30%","30%"],body:u}}])})()}}return r.\u0275fac=function(t){return new(t||r)(e.\u0275\u0275inject(B.n),e.\u0275\u0275inject(f.Q))},r.\u0275prov=e.\u0275\u0275defineInjectable({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const O=["newReservationComponentReference"],Y=["connectionToastComponentReference"],z=["deleteModalComponentReference"];function H(r,a){if(1&r){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",31),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("reservation_code","desc")}),e.\u0275\u0275elementEnd()}}function W(r,a){if(1&r){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",32),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("reservation_code","asc")}),e.\u0275\u0275elementEnd()}}function J(r,a){if(1&r){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",33),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("reservation_code","desc")}),e.\u0275\u0275elementEnd()}}function U(r,a){if(1&r){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",31),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("reservation_date","desc")}),e.\u0275\u0275elementEnd()}}function Z(r,a){if(1&r){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",32),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("reservation_date","asc")}),e.\u0275\u0275elementEnd()}}function $(r,a){if(1&r){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",33),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("reservation_date","desc")}),e.\u0275\u0275elementEnd()}}function X(r,a){if(1&r){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",31),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("customer_name","desc")}),e.\u0275\u0275elementEnd()}}function K(r,a){if(1&r){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",32),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("customer_name","asc")}),e.\u0275\u0275elementEnd()}}function q(r,a){if(1&r){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",33),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("customer_name","desc")}),e.\u0275\u0275elementEnd()}}function ee(r,a){if(1&r){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",31),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("arrival_date","desc")}),e.\u0275\u0275elementEnd()}}function te(r,a){if(1&r){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",32),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("arrival_date","asc")}),e.\u0275\u0275elementEnd()}}function ne(r,a){if(1&r){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",33),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("arrival_date","desc")}),e.\u0275\u0275elementEnd()}}function re(r,a){if(1&r){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",31),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("status","desc")}),e.\u0275\u0275elementEnd()}}function oe(r,a){if(1&r){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",32),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("status","asc")}),e.\u0275\u0275elementEnd()}}function ae(r,a){if(1&r){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",33),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("status","desc")}),e.\u0275\u0275elementEnd()}}function ie(r,a){if(1&r){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"tr",34),e.\u0275\u0275listener("dblclick",function(){const s=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275nextContext().viewReservation(s.id)}),e.\u0275\u0275elementStart(1,"td"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"td"),e.\u0275\u0275text(4),e.\u0275\u0275pipe(5,"date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"td"),e.\u0275\u0275text(7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"td"),e.\u0275\u0275text(9),e.\u0275\u0275pipe(10,"date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"td"),e.\u0275\u0275text(12),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()}if(2&r){const t=a.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null==t?null:t.data().reservation_code),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(5,5,null==t?null:t.data().reservation_date)),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(null==t?null:t.data().customer.customer_name),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(10,7,null==t?null:t.data().arrival_date)),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(null==t?null:t.data().status)}}function se(r,a){1&r&&(e.\u0275\u0275elementStart(0,"tr",35),e.\u0275\u0275elementStart(1,"td",19),e.\u0275\u0275elementStart(2,"div",36),e.\u0275\u0275elementStart(3,"span",37),e.\u0275\u0275text(4,"Loading..."),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd())}function le(r,a){1&r&&(e.\u0275\u0275elementStart(0,"tr",35),e.\u0275\u0275elementStart(1,"td",19),e.\u0275\u0275elementStart(2,"p",38),e.\u0275\u0275text(3,"No data available"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd())}let me=(()=>{class r{constructor(t,n,o){this.router=t,this.reservationsApi=n,this.reservationsPrint=o,this.navHeading=[{text:"All Reservations",url:"/home/reservations/all-reservations"}],this.reservationsGridData=[],this.isFetchingGridData=!1,this.isDataAvailable=!0,this.firstInResponse=[],this.lastInResponse=[],this.nextStartAfter=[],this.prevStartAt=[],this.pageNumber=0,this.disableNext=!0,this.disablePrev=!0,this.sortParams={field:"created_at",direction:"desc"}}ngOnInit(){this.getAccountReservation()}getAccountReservation(){this.isFetchingGridData=!0,this.reservationsApi.getAccountReservation(this.sortParams,20).then(t=>{console.log(t),this.reservationsGridData=t.docs,this.isFetchingGridData=!1,this.prevStartAt=this.firstInResponse,this.nextStartAfter=t.docs[t.docs.length-1],this.firstInResponse=t.docs[0],this.pageNumber=1,this.isDataAvailable=!!t.docs.length,!t.docs.length||t.docs.length<20?(this.disableNext=!0,this.disablePrev=!0):(this.disableNext=!1,this.disablePrev=!0)},t=>{console.log(t),this.isFetchingGridData=!1,this.connectionToast.openToast()})}nextPage(t){t.preventDefault(),this.isFetchingGridData=!0,this.reservationsApi.getAccountReservationNext(this.sortParams,20,this.nextStartAfter).then(n=>{console.log(n),this.reservationsGridData=n.docs,this.isFetchingGridData=!1,this.prevStartAt=this.firstInResponse,this.nextStartAfter=n.docs[n.docs.length-1],this.firstInResponse=n.docs[0],this.pageNumber++,n.docs.length<20&&(this.disableNext=!0,this.disablePrev=!1)},n=>{console.log(n),this.isFetchingGridData=!1,this.connectionToast.openToast()})}previousPage(t){t.preventDefault(),this.isFetchingGridData=!0,this.reservationsApi.getAccountReservationPrev(this.sortParams,20,this.prevStartAt).then(n=>{console.log(n),this.reservationsGridData=n.docs,this.isFetchingGridData=!1,n.docs.length||(this.isDataAvailable=!1),this.prevStartAt=this.firstInResponse,this.nextStartAfter=n.docs[n.docs.length-1],this.firstInResponse=n.docs[0],this.pageNumber--,1==this.pageNumber&&(this.disableNext=!1,this.disablePrev=!0)},n=>{console.log(n),this.isFetchingGridData=!1,this.connectionToast.openToast()})}sortTable(t,n){this.sortParams.field=t,this.sortParams.direction=n,this.getAccountReservation()}viewReservation(t){console.log(t),sessionStorage.setItem("restaurant_reservation_id",t),this.router.navigateByUrl("/home/reservations/view-reservation")}onPrint(){console.log("lets start printing..."),this.reservationsPrint.printAllReservations()}}return r.\u0275fac=function(t){return new(t||r)(e.\u0275\u0275directiveInject(v.F0),e.\u0275\u0275directiveInject(f.Q),e.\u0275\u0275directiveInject(x))},r.\u0275cmp=e.\u0275\u0275defineComponent({type:r,selectors:[["app-all-reservations"]],viewQuery:function(t,n){if(1&t&&(e.\u0275\u0275viewQuery(O,5,y),e.\u0275\u0275viewQuery(Y,5,m.Y),e.\u0275\u0275viewQuery(z,5,_.z)),2&t){let o;e.\u0275\u0275queryRefresh(o=e.\u0275\u0275loadQuery())&&(n.newReservation=o.first),e.\u0275\u0275queryRefresh(o=e.\u0275\u0275loadQuery())&&(n.connectionToast=o.first),e.\u0275\u0275queryRefresh(o=e.\u0275\u0275loadQuery())&&(n.deleteModal=o.first)}},decls:61,vars:24,consts:[[3,"headings","showPrint","print"],[1,"container"],[1,"row"],[1,"col-md-12"],[1,"row","mb-3"],[1,"btn","btn-secondary","page-add-btn",3,"click"],[1,"btn","btn-light","border","float-end","page-refresh-btn",3,"disabled","click"],[1,"bi","bi-arrow-clockwise"],[1,"overflow-auto"],[1,"table","table-bordered","table-sm","w-100","page-table"],[1,"bg-light"],["width","15%",1,"min-width-2"],["class","bi bi-filter float-end list-pointer",3,"click",4,"ngIf"],["class","bi bi-sort-down float-end list-pointer",3,"click",4,"ngIf"],["class","bi bi-sort-up float-end list-pointer",3,"click",4,"ngIf"],["width","20%",1,"min-width-3"],["width","30%",1,"min-width-3"],["class","table-pointer",3,"dblclick",4,"ngFor","ngForOf"],["class","text-center",4,"ngIf"],["colspan","5"],["aria-label","Page navigation",1,"nav-light","float-end"],[1,"pagination","pagination-sm","mb-0","justify-content-end"],[1,"page-item",3,"ngClass"],["href","#","aria-label","First",1,"page-link",3,"click"],[1,"bi","bi-caret-left-fill"],[1,"page-item"],["href","#","aria-label","Current",1,"page-link",3,"click"],["href","#","aria-label","Last",1,"page-link",3,"click"],[1,"bi","bi-caret-right-fill"],["newReservationComponentReference",""],["connectionToastComponentReference",""],[1,"bi","bi-filter","float-end","list-pointer",3,"click"],[1,"bi","bi-sort-down","float-end","list-pointer",3,"click"],[1,"bi","bi-sort-up","float-end","list-pointer",3,"click"],[1,"table-pointer",3,"dblclick"],[1,"text-center"],["role","status",1,"spinner-grow","m-4"],[1,"visually-hidden"],[1,"m-4"]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"app-module-topnav",0),e.\u0275\u0275listener("print",function(){return n.onPrint()}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(1,"div",1),e.\u0275\u0275elementStart(2,"div",2),e.\u0275\u0275elementStart(3,"div",3),e.\u0275\u0275elementStart(4,"div",4),e.\u0275\u0275elementStart(5,"div",3),e.\u0275\u0275elementStart(6,"button",5),e.\u0275\u0275listener("click",function(){return n.newReservation.openModal()}),e.\u0275\u0275text(7,"New Reservation"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"button",6),e.\u0275\u0275listener("click",function(){return n.getAccountReservation()}),e.\u0275\u0275element(9,"i",7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"div",8),e.\u0275\u0275elementStart(11,"table",9),e.\u0275\u0275elementStart(12,"thead"),e.\u0275\u0275elementStart(13,"tr",10),e.\u0275\u0275elementStart(14,"th",11),e.\u0275\u0275text(15," Reservation ID "),e.\u0275\u0275template(16,H,1,0,"i",12),e.\u0275\u0275template(17,W,1,0,"i",13),e.\u0275\u0275template(18,J,1,0,"i",14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"th",15),e.\u0275\u0275text(20," Reservation Date "),e.\u0275\u0275template(21,U,1,0,"i",12),e.\u0275\u0275template(22,Z,1,0,"i",13),e.\u0275\u0275template(23,$,1,0,"i",14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(24,"th",16),e.\u0275\u0275text(25," Customer Name "),e.\u0275\u0275template(26,X,1,0,"i",12),e.\u0275\u0275template(27,K,1,0,"i",13),e.\u0275\u0275template(28,q,1,0,"i",14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(29,"th",15),e.\u0275\u0275text(30," Arrival Date "),e.\u0275\u0275template(31,ee,1,0,"i",12),e.\u0275\u0275template(32,te,1,0,"i",13),e.\u0275\u0275template(33,ne,1,0,"i",14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(34,"th",11),e.\u0275\u0275text(35," Status "),e.\u0275\u0275template(36,re,1,0,"i",12),e.\u0275\u0275template(37,oe,1,0,"i",13),e.\u0275\u0275template(38,ae,1,0,"i",14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(39,"tbody"),e.\u0275\u0275template(40,ie,13,9,"tr",17),e.\u0275\u0275template(41,se,5,0,"tr",18),e.\u0275\u0275template(42,le,4,0,"tr",18),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(43,"tfoot"),e.\u0275\u0275elementStart(44,"tr",10),e.\u0275\u0275elementStart(45,"td",19),e.\u0275\u0275elementStart(46,"nav",20),e.\u0275\u0275elementStart(47,"ul",21),e.\u0275\u0275elementStart(48,"li",22),e.\u0275\u0275elementStart(49,"a",23),e.\u0275\u0275listener("click",function(s){return n.previousPage(s)}),e.\u0275\u0275element(50,"i",24),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(51,"li",25),e.\u0275\u0275elementStart(52,"a",26),e.\u0275\u0275listener("click",function(s){return s.preventDefault()}),e.\u0275\u0275text(53),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(54,"li",22),e.\u0275\u0275elementStart(55,"a",27),e.\u0275\u0275listener("click",function(s){return n.nextPage(s)}),e.\u0275\u0275element(56,"i",28),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(57,"app-new-reservation",null,29),e.\u0275\u0275element(59,"app-connection-toast",null,30)),2&t&&(e.\u0275\u0275property("headings",n.navHeading)("showPrint",!0),e.\u0275\u0275advance(8),e.\u0275\u0275property("disabled",n.isFetchingGridData),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf","reservation_code"!=n.sortParams.field),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","reservation_code"==n.sortParams.field&&"desc"==n.sortParams.direction),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","reservation_code"==n.sortParams.field&&"asc"==n.sortParams.direction),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf","reservation_date"!=n.sortParams.field),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","reservation_date"==n.sortParams.field&&"desc"==n.sortParams.direction),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","reservation_date"==n.sortParams.field&&"asc"==n.sortParams.direction),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf","customer_name"!=n.sortParams.field),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","customer_name"==n.sortParams.field&&"desc"==n.sortParams.direction),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","customer_name"==n.sortParams.field&&"asc"==n.sortParams.direction),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf","arrival_date"!=n.sortParams.field),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","arrival_date"==n.sortParams.field&&"desc"==n.sortParams.direction),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","arrival_date"==n.sortParams.field&&"asc"==n.sortParams.direction),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf","status"!=n.sortParams.field),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","status"==n.sortParams.field&&"desc"==n.sortParams.direction),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","status"==n.sortParams.field&&"asc"==n.sortParams.direction),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",n.reservationsGridData),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.isFetchingGridData),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!n.isDataAvailable&&!n.isFetchingGridData),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngClass",n.disablePrev?"disabled":""),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate1(" ",n.pageNumber," "),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",n.disableNext?"disabled":""))},directives:[g.H,c.O5,c.sg,c.mk,y,m.Y],pipes:[c.uU],styles:[""]}),r})();var D=l(5725);const de=["connectionToastComponentReference"],ce=["deleteModalTwoComponentReference"],ve=["selectTableComponentReference"];function pe(r,a){if(1&r){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"tr"),e.\u0275\u0275elementStart(1,"td"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"td"),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"td",15),e.\u0275\u0275elementStart(6,"button",16),e.\u0275\u0275listener("click",function(){const s=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275nextContext().deleteReservationTable(s.id)}),e.\u0275\u0275element(7,"i",17),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()}if(2&r){const t=a.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null==t?null:t.data().table.table_number),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null==t?null:t.data().table.capacity)}}function ue(r,a){1&r&&(e.\u0275\u0275elementStart(0,"tr",18),e.\u0275\u0275elementStart(1,"td",19),e.\u0275\u0275elementStart(2,"div",20),e.\u0275\u0275elementStart(3,"span",21),e.\u0275\u0275text(4,"Loading..."),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd())}let A=(()=>{class r{constructor(t){this.reservationsApi=t,this.reservationTablesGridData=[],this.deleteId="",this.isFetchingGridData=!1,this.isTableDeleting=!1}ngOnInit(){this.getReservationReservationTable()}getReservationReservationTable(){this.isFetchingGridData=!0,this.reservationsApi.getReservationReservationTable().then(t=>{console.log(t),this.isFetchingGridData=!1,this.reservationTablesGridData=t.docs},t=>{console.log(t),this.isFetchingGridData=!1,this.connectionToast.openToast()})}createReservationTable(t){let n={created_at:(0,E.Bt)(),reservation:sessionStorage.getItem("restaurant_reservation_id"),table:{id:t.id,table_number:t.data().table_number,capacity:t.data().capacity}};this.reservationsApi.createReservationTable(n).then(o=>{console.log(o),o.id&&this.getReservationReservationTable()},o=>{console.log(o),this.connectionToast.openToast()})}deleteReservationTable(t){this.isTableDeleting=!0,this.reservationsApi.deleteReservationTable(t).then(n=>{console.log(n),this.isTableDeleting=!1,this.getReservationReservationTable()},n=>{console.log(n),this.isTableDeleting=!1,this.connectionToast.openToast()})}confirmDelete(t){this.deleteId=t,this.deleteModal.openModal()}}return r.\u0275fac=function(t){return new(t||r)(e.\u0275\u0275directiveInject(f.Q))},r.\u0275cmp=e.\u0275\u0275defineComponent({type:r,selectors:[["app-reservation-tables"]],viewQuery:function(t,n){if(1&t&&(e.\u0275\u0275viewQuery(de,5,m.Y),e.\u0275\u0275viewQuery(ce,5,_.z),e.\u0275\u0275viewQuery(ve,5,D.d)),2&t){let o;e.\u0275\u0275queryRefresh(o=e.\u0275\u0275loadQuery())&&(n.connectionToast=o.first),e.\u0275\u0275queryRefresh(o=e.\u0275\u0275loadQuery())&&(n.deleteModal=o.first),e.\u0275\u0275queryRefresh(o=e.\u0275\u0275loadQuery())&&(n.selectTable=o.first)}},decls:22,vars:2,consts:[[1,"row"],[1,"col-md-6"],[1,"overflow-auto"],[1,"table","table-bordered","table-sm","w-100","page-table"],[1,"bg-light"],["width","55%",1,"min-width-2"],["width","35%",1,"min-width-2"],["width","10%",1,"p-0","min-width-1"],[1,"btn","btn-secondary","btn-sm","w-100",3,"click"],[1,"bi","bi-plus"],[4,"ngFor","ngForOf"],["class","text-center",4,"ngIf"],["connectionToastComponentReference",""],[3,"rowSelected"],["selectTableComponentReference",""],[1,"p-0"],[1,"btn","btn-sm","border","w-100",3,"click"],[1,"bi","bi-trash"],[1,"text-center"],["colspan","3"],["role","status",1,"spinner-grow","m-2"],[1,"visually-hidden"]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275elementStart(1,"div",1),e.\u0275\u0275elementStart(2,"h4"),e.\u0275\u0275text(3,"Reserved Tables"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",2),e.\u0275\u0275elementStart(5,"table",3),e.\u0275\u0275elementStart(6,"thead"),e.\u0275\u0275elementStart(7,"tr",4),e.\u0275\u0275elementStart(8,"th",5),e.\u0275\u0275text(9,"Table No."),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"th",6),e.\u0275\u0275text(11,"Capacity"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"th",7),e.\u0275\u0275elementStart(13,"button",8),e.\u0275\u0275listener("click",function(){return n.selectTable.openModal()}),e.\u0275\u0275element(14,"i",9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"tbody"),e.\u0275\u0275template(16,pe,8,2,"tr",10),e.\u0275\u0275template(17,ue,5,0,"tr",11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(18,"app-connection-toast",null,12),e.\u0275\u0275elementStart(20,"app-select-table",13,14),e.\u0275\u0275listener("rowSelected",function(s){return n.createReservationTable(s)}),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275advance(16),e.\u0275\u0275property("ngForOf",n.reservationTablesGridData),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.isFetchingGridData))},directives:[c.sg,c.O5,m.Y,D.d],styles:[""]}),r})();const fe=["connectionToastComponentReference"],he=["deleteModalComponentReference"],_e=["reservationTablesComponentReference"],be=["selectCustomerComponentReference"];function ge(r,a){if(1&r){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",4),e.\u0275\u0275elementStart(1,"div",29),e.\u0275\u0275elementStart(2,"button",30),e.\u0275\u0275text(3,"Cancel"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"button",31),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().confirmDelete()}),e.\u0275\u0275text(5,"Delete"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"button",32),e.\u0275\u0275text(7,"Save"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()}if(2&r){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(4),e.\u0275\u0275property("disabled",t.isReservationDeleting),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",t.isReservationSaving)}}function Re(r,a){1&r&&(e.\u0275\u0275elementStart(0,"div",4),e.\u0275\u0275elementStart(1,"div",29),e.\u0275\u0275elementStart(2,"button",33),e.\u0275\u0275elementStart(3,"div",34),e.\u0275\u0275elementStart(4,"span",35),e.\u0275\u0275text(5,"Loading..."),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd())}const Se=[{path:"",component:N,children:[{path:"",component:w},{path:"dashboard",component:w},{path:"all-reservations",component:me},{path:"view-reservation",component:(()=>{class r{constructor(t,n,o){this.router=t,this.reservationsApi=n,this.reservationsPrint=o,this.navHeading=[{text:"All Reservations",url:"/home/reservations/all-reservations"},{text:"View Reservation",url:"/home/reservations/view-reservation"}],this.reservationForm=new i.cw({}),this.isReservationLoading=!1,this.isReservationSaving=!1,this.isReservationDeleting=!1}ngOnInit(){this.initReservationForm(),this.getReservation()}initReservationForm(){this.reservationForm=new i.cw({reservationCode:new i.NI(""),reservationDate:new i.NI(""),customerName:new i.NI(""),arrivalDate:new i.NI(""),numberGuests:new i.NI(""),numberTables:new i.NI(""),status:new i.NI("")})}getReservation(){this.isReservationLoading=!0,this.reservationsApi.getReservation().then(t=>{console.log(t),this.reservationFormData=t,this.isReservationLoading=!1,this.reservationForm.controls.reservationCode.setValue(this.reservationFormData.data().reservation_code),this.reservationForm.controls.reservationDate.setValue(this.reservationFormData.data().reservation_date),this.reservationForm.controls.arrivalDate.setValue(this.reservationFormData.data().arrival_date),this.reservationForm.controls.status.setValue(this.reservationFormData.data().status),this.reservationForm.controls.numberGuests.setValue(this.reservationFormData.data().number_guests),this.reservationForm.controls.numberTables.setValue(this.reservationFormData.data().number_tables),this.selectedCustomerId=this.reservationFormData.data().customer.id,this.reservationForm.controls.customerName.setValue(this.reservationFormData.data().customer.customer_name)},t=>{console.log(t),this.isReservationLoading=!1,this.connectionToast.openToast()})}updateReservation(){let t={reservation_code:this.reservationForm.controls.reservationCode.value,reservation_date:this.reservationForm.controls.reservationDate.value,number_guests:this.reservationForm.controls.numberGuests.value,number_tables:this.reservationForm.controls.numberTables.value,arrival_date:this.reservationForm.controls.arrivalDate.value,status:this.reservationForm.controls.status.value,customer:{id:this.selectedCustomerId,customer_name:this.reservationForm.controls.customerName.value}};console.log(t),this.isReservationSaving=!0,this.reservationsApi.updateReservation(t).then(n=>{console.log(n),this.isReservationSaving=!1},n=>{console.log(n),this.isReservationSaving=!1,this.connectionToast.openToast()})}confirmDelete(){this.deleteModal.openModal()}deleteReservation(){this.isReservationDeleting=!0,this.reservationsApi.deleteReservation().then(t=>{console.log(t),this.router.navigateByUrl("/home/reservations/all-reservations")},t=>{console.log(t),this.connectionToast.openToast()})}openCustomerWindow(){console.log("You are opening select customer window"),this.selectCustomer.openModal()}onCustomerSelected(t){console.log(t),this.reservationForm.controls.customerName.setValue(t.data().customer_name),this.selectedCustomerId=t.id}onPrint(){console.log("lets start printing..."),this.reservationsPrint.printViewReservation()}}return r.\u0275fac=function(t){return new(t||r)(e.\u0275\u0275directiveInject(v.F0),e.\u0275\u0275directiveInject(f.Q),e.\u0275\u0275directiveInject(x))},r.\u0275cmp=e.\u0275\u0275defineComponent({type:r,selectors:[["app-view-reservation"]],viewQuery:function(t,n){if(1&t&&(e.\u0275\u0275viewQuery(fe,5,m.Y),e.\u0275\u0275viewQuery(he,5,_.z),e.\u0275\u0275viewQuery(_e,5,A),e.\u0275\u0275viewQuery(be,5,h.a)),2&t){let o;e.\u0275\u0275queryRefresh(o=e.\u0275\u0275loadQuery())&&(n.connectionToast=o.first),e.\u0275\u0275queryRefresh(o=e.\u0275\u0275loadQuery())&&(n.deleteModal=o.first),e.\u0275\u0275queryRefresh(o=e.\u0275\u0275loadQuery())&&(n.reservationTables=o.first),e.\u0275\u0275queryRefresh(o=e.\u0275\u0275loadQuery())&&(n.selectCustomer=o.first)}},decls:66,vars:5,consts:[[3,"headings","showPrint","print"],[1,"container"],[1,"page-form",3,"formGroup","ngSubmit"],[1,"mb-3"],[1,"row"],[1,"col-md-6"],[1,"row","mb-1"],[1,"col-md-4"],[1,"float-md-end","float-sm-start","mt-1"],[1,"col-md-8"],["formControlName","reservationCode",1,"form-control","form-control-sm","w-100"],["type","datetime-local","formControlName","reservationDate",1,"form-control","form-control-sm","w-100"],[1,"input-group","input-group-sm","w-100"],["formControlName","customerName",1,"form-control"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"bi","bi-three-dots"],["type","datetime-local","formControlName","arrivalDate",1,"form-control","form-control-sm","w-100"],["type","number","min","0","formControlName","numberGuests",1,"form-control","form-control-sm","w-100"],["type","number","min","0","formControlName","numberTables",1,"form-control","form-control-sm","w-100"],["formControlName","status",1,"form-control","form-control-sm","w-100"],["class","row",4,"ngIf"],[1,"top-divider"],[1,"bottom-divider"],["reservationTablesComponentReference",""],["connectionToastComponentReference",""],[3,"confirmEvent"],["deleteModalComponentReference",""],[3,"rowSelected"],["selectCustomerComponentReference",""],[1,"col-md-12"],["type","button","routerLink","/home/reservations/all-reservations",1,"btn","btn-secondary","btn-sm","float-end","ms-1","page-form-btn"],["type","button",1,"btn","btn-secondary","btn-sm","float-end","ms-1","page-form-btn",3,"disabled","click"],["type","submit",1,"btn","btn-secondary","btn-sm","float-end","ms-1","page-form-btn",3,"disabled"],["type","button",1,"btn","btn-sm","float-end","ms-1","btn-light","page-form-btn"],["role","status",1,"spinner-grow","spinner-grow-sm"],[1,"visually-hidden"]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"app-module-topnav",0),e.\u0275\u0275listener("print",function(){return n.onPrint()}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(1,"div",1),e.\u0275\u0275elementStart(2,"form",2),e.\u0275\u0275listener("ngSubmit",function(){return n.updateReservation()}),e.\u0275\u0275elementStart(3,"h4",3),e.\u0275\u0275text(4,"Reservation Details"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"div",4),e.\u0275\u0275elementStart(6,"div",5),e.\u0275\u0275elementStart(7,"div",6),e.\u0275\u0275elementStart(8,"div",7),e.\u0275\u0275elementStart(9,"label",8),e.\u0275\u0275text(10,"Reservation ID :"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"div",9),e.\u0275\u0275element(12,"input",10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"div",6),e.\u0275\u0275elementStart(14,"div",7),e.\u0275\u0275elementStart(15,"label",8),e.\u0275\u0275text(16,"Reservation Date :"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"div",9),e.\u0275\u0275element(18,"input",11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"div",6),e.\u0275\u0275elementStart(20,"div",7),e.\u0275\u0275elementStart(21,"label",8),e.\u0275\u0275text(22,"Customer Name :"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(23,"div",9),e.\u0275\u0275elementStart(24,"div",12),e.\u0275\u0275element(25,"input",13),e.\u0275\u0275elementStart(26,"button",14),e.\u0275\u0275listener("click",function(){return n.openCustomerWindow()}),e.\u0275\u0275element(27,"i",15),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(28,"div",6),e.\u0275\u0275elementStart(29,"div",7),e.\u0275\u0275elementStart(30,"label",8),e.\u0275\u0275text(31,"Arrival Date :"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(32,"div",9),e.\u0275\u0275element(33,"input",16),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(34,"div",5),e.\u0275\u0275elementStart(35,"div",6),e.\u0275\u0275elementStart(36,"div",7),e.\u0275\u0275elementStart(37,"label",8),e.\u0275\u0275text(38,"No. of Guests :"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(39,"div",9),e.\u0275\u0275element(40,"input",17),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(41,"div",6),e.\u0275\u0275elementStart(42,"div",7),e.\u0275\u0275elementStart(43,"label",8),e.\u0275\u0275text(44,"No. of Tables :"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(45,"div",9),e.\u0275\u0275element(46,"input",18),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(47,"div",6),e.\u0275\u0275elementStart(48,"div",7),e.\u0275\u0275elementStart(49,"label",8),e.\u0275\u0275text(50,"Status :"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(51,"div",9),e.\u0275\u0275element(52,"input",19),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(53,"hr"),e.\u0275\u0275template(54,ge,8,2,"div",20),e.\u0275\u0275template(55,Re,6,0,"div",20),e.\u0275\u0275element(56,"hr",21),e.\u0275\u0275element(57,"hr",22),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(58,"app-reservation-tables",null,23),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(60,"app-connection-toast",null,24),e.\u0275\u0275elementStart(62,"app-delete-modal",25,26),e.\u0275\u0275listener("confirmEvent",function(){return n.deleteReservation()}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(64,"app-select-customer",27,28),e.\u0275\u0275listener("rowSelected",function(s){return n.onCustomerSelected(s)}),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275property("headings",n.navHeading)("showPrint",!0),e.\u0275\u0275advance(2),e.\u0275\u0275property("formGroup",n.reservationForm),e.\u0275\u0275advance(52),e.\u0275\u0275property("ngIf",!n.isReservationLoading),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.isReservationLoading))},directives:[g.H,i._Y,i.JL,i.sg,i.Fj,i.JJ,i.u,i.qQ,i.wV,c.O5,A,m.Y,_.z,h.a,v.rH],styles:[""]}),r})(),canActivate:[(()=>{class r{constructor(t){this.router=t}canActivate(t){return!!sessionStorage.getItem("restaurant_reservation_id")||(this.router.navigateByUrl("/home/reservations"),!1)}}return r.\u0275fac=function(t){return new(t||r)(e.\u0275\u0275inject(v.F0))},r.\u0275prov=e.\u0275\u0275defineInjectable({token:r,factory:r.\u0275fac,providedIn:"root"}),r})()]}]}];let Ce=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.\u0275\u0275defineNgModule({type:r}),r.\u0275inj=e.\u0275\u0275defineInjector({imports:[[v.Bz.forChild(Se)],v.Bz]}),r})();var we=l(7264),I=l(5018),Ee=l(7667),ye=l(8731);let Te=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.\u0275\u0275defineNgModule({type:r}),r.\u0275inj=e.\u0275\u0275defineInjector({imports:[[c.ez,v.Bz,i.u5,i.UX,C.m9,I.p,Ee.Q,ye.Z]]}),r})(),xe=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.\u0275\u0275defineNgModule({type:r}),r.\u0275inj=e.\u0275\u0275defineInjector({imports:[[c.ez,Ce,we.M,I.p,Te]]}),r})()}}]);