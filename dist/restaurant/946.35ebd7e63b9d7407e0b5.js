"use strict";(self.webpackChunkang_fire=self.webpackChunkang_fire||[]).push([[946],{756:(C,h,f)=>{f.d(h,{Bt:()=>m.Bt});var m=f(9665)},7946:(C,h,f)=>{f.r(h),f.d(h,{StaffPageModule:()=>gt});var m=f(6274),d=f(8718),t=f(2741),y=f(8088),p=f(7632);let E=(()=>{class a{constructor(){this.navLinks=[{text:"All Staff",url:"/home/staff/all-staff",icon:"bi bi-list-ul"},{text:"New Staff",url:"/home/staff/new-staff",icon:"bi bi-plus-square"}]}ngOnInit(){}}return a.\u0275fac=function(e){return new(e||a)},a.\u0275cmp=t.\u0275\u0275defineComponent({type:a,selectors:[["app-staff-page"]],decls:6,vars:4,consts:[[3,"navBrand","source"],["id","wrapper"],[3,"navLinks","heading"],["id","content-wrapper",1,"d-flex","flex-column"],["id","content"]],template:function(e,n){1&e&&(t.\u0275\u0275element(0,"app-main-navbar",0),t.\u0275\u0275elementStart(1,"div",1),t.\u0275\u0275element(2,"app-module-sidenav",2),t.\u0275\u0275elementStart(3,"div",3),t.\u0275\u0275elementStart(4,"div",4),t.\u0275\u0275element(5,"router-outlet"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()),2&e&&(t.\u0275\u0275property("navBrand","nR Restaurant")("source","Restaurant"),t.\u0275\u0275advance(2),t.\u0275\u0275property("navLinks",n.navLinks)("heading","Staff"))},directives:[y.D,p.m,d.lC],styles:[""]}),a})();var l=f(1580),c=f(687),u=f(1921),N=f(6424);let F=(()=>{class a{constructor(e,n){this.pdfPrint=e,this.staffApi=n}printAllStaff(){var e=this;return(0,u.Z)(function*(){const n=yield e.staffApi.getAllAccountStaff();var o=[["Staff ID","Staff Name","Department","Job"]];for(let v of n.docs){var s=[];let g=v.data();s.push(g.staff_code),s.push(g.first_name+" "+g.last_name),s.push(g.department),s.push(g.job),o.push(s)}e.pdfPrint.openPdf([{layout:"lightHorizontalLines",table:{headerRows:1,widths:["15%","35%","25%","25%"],body:o}}])})()}printViewStaff(){var e=this;return(0,u.Z)(function*(){let o=(yield e.staffApi.getStaff()).data();e.pdfPrint.openPdf([{text:"Personal Details",bold:!0,margin:[0,20,0,10]},{columns:[[{text:"First Name: "+o.first_name},{text:"Last Name: "+o.last_name},{text:"Sex: "+o.sex},{text:"Date of Birth: "+o.date_of_birth}],[{text:"Nationality: "+o.nationality},{text:"Religion: "+o.religion}]]},{text:"Contact Details",bold:!0,margin:[0,20,0,10]},{columns:[[{text:"Phone No.: "+o.phone},{text:"Email: "+o.email},{text:"Address: "+o.address}],[{text:"State/Region: "+o.state},{text:"city/Town: "+o.city},{text:"Post Code: "+o.post_code}]]},{text:"Staff Details",bold:!0,margin:[0,20,0,10]},{columns:[[{text:"Staff ID: "+o.staff_code}],[{text:"Department: "+o.department},{text:"Job: "+o.job}]]}])})()}}return a.\u0275fac=function(e){return new(e||a)(t.\u0275\u0275inject(N.n),t.\u0275\u0275inject(c.e))},a.\u0275prov=t.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var _=f(8972);const R=["connectionToastComponentReference"];function V(a,r){if(1&a){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"i",31),t.\u0275\u0275listener("click",function(){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext().sortTable("staff_code","desc")}),t.\u0275\u0275elementEnd()}}function k(a,r){if(1&a){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"i",32),t.\u0275\u0275listener("click",function(){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext().sortTable("staff_code","asc")}),t.\u0275\u0275elementEnd()}}function j(a,r){if(1&a){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"i",33),t.\u0275\u0275listener("click",function(){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext().sortTable("staff_code","desc")}),t.\u0275\u0275elementEnd()}}function M(a,r){if(1&a){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"i",31),t.\u0275\u0275listener("click",function(){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext().sortTable("staff_name","desc")}),t.\u0275\u0275elementEnd()}}function B(a,r){if(1&a){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"i",32),t.\u0275\u0275listener("click",function(){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext().sortTable("staff_name","asc")}),t.\u0275\u0275elementEnd()}}function Q(a,r){if(1&a){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"i",33),t.\u0275\u0275listener("click",function(){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext().sortTable("staff_name","desc")}),t.\u0275\u0275elementEnd()}}function G(a,r){if(1&a){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"i",31),t.\u0275\u0275listener("click",function(){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext().sortTable("department","desc")}),t.\u0275\u0275elementEnd()}}function L(a,r){if(1&a){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"i",32),t.\u0275\u0275listener("click",function(){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext().sortTable("department","asc")}),t.\u0275\u0275elementEnd()}}function O(a,r){if(1&a){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"i",33),t.\u0275\u0275listener("click",function(){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext().sortTable("department","desc")}),t.\u0275\u0275elementEnd()}}function H(a,r){if(1&a){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"i",31),t.\u0275\u0275listener("click",function(){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext().sortTable("job","desc")}),t.\u0275\u0275elementEnd()}}function Y(a,r){if(1&a){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"i",32),t.\u0275\u0275listener("click",function(){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext().sortTable("job","asc")}),t.\u0275\u0275elementEnd()}}function U(a,r){if(1&a){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"i",33),t.\u0275\u0275listener("click",function(){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext().sortTable("job","desc")}),t.\u0275\u0275elementEnd()}}function J(a,r){if(1&a){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"tr",34),t.\u0275\u0275listener("dblclick",function(){const s=t.\u0275\u0275restoreView(e).$implicit;return t.\u0275\u0275nextContext().viewStaff(s.id)}),t.\u0275\u0275elementStart(1,"td"),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"td"),t.\u0275\u0275text(4),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(5,"td"),t.\u0275\u0275text(6),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(7,"td"),t.\u0275\u0275text(8),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()}if(2&a){const e=r.$implicit;t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(null==e?null:e.data().staff_code),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate2("",null==e?null:e.data().first_name," ",null==e?null:e.data().last_name,""),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(null==e?null:e.data().department),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(null==e?null:e.data().job)}}function z(a,r){1&a&&(t.\u0275\u0275elementStart(0,"tr",35),t.\u0275\u0275elementStart(1,"td",20),t.\u0275\u0275elementStart(2,"div",36),t.\u0275\u0275elementStart(3,"span",37),t.\u0275\u0275text(4,"Loading..."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd())}function K(a,r){1&a&&(t.\u0275\u0275elementStart(0,"tr",35),t.\u0275\u0275elementStart(1,"td",20),t.\u0275\u0275elementStart(2,"p",38),t.\u0275\u0275text(3,"No data available"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd())}let $=(()=>{class a{constructor(e,n,o){this.router=e,this.staffApi=n,this.staffPrint=o,this.navHeading=[{text:"All Staff",url:"/home/staff/all-staff"}],this.staffGridData=[],this.isFetchingGridData=!1,this.isDataAvailable=!0,this.firstInResponse=[],this.lastInResponse=[],this.nextStartAfter=[],this.prevStartAt=[],this.pageNumber=0,this.disableNext=!0,this.disablePrev=!0,this.sortParams={field:"created_at",direction:"desc"}}ngOnInit(){this.getAccountStaff()}getAccountStaff(){this.isFetchingGridData=!0,this.staffApi.getAccountStaff(this.sortParams,20).then(e=>{console.log(e),this.staffGridData=e.docs,this.isFetchingGridData=!1,this.prevStartAt=this.firstInResponse,this.nextStartAfter=e.docs[e.docs.length-1],this.firstInResponse=e.docs[0],this.pageNumber=1,this.isDataAvailable=!!e.docs.length,!e.docs.length||e.docs.length<20?(this.disableNext=!0,this.disablePrev=!0):(this.disableNext=!1,this.disablePrev=!0)},e=>{console.log(e),this.isFetchingGridData=!1,this.connectionToast.openToast()})}nextPage(e){e.preventDefault(),this.isFetchingGridData=!0,this.staffApi.getAccountStaffNext(this.sortParams,20,this.nextStartAfter).then(n=>{console.log(n),this.staffGridData=n.docs,this.isFetchingGridData=!1,this.prevStartAt=this.firstInResponse,this.nextStartAfter=n.docs[n.docs.length-1],this.firstInResponse=n.docs[0],this.pageNumber++,n.docs.length<20&&(this.disableNext=!0,this.disablePrev=!1)},n=>{console.log(n),this.isFetchingGridData=!1,this.connectionToast.openToast()})}previousPage(e){e.preventDefault(),this.isFetchingGridData=!0,this.staffApi.getAccountStaffPrev(this.sortParams,20,this.prevStartAt).then(n=>{console.log(n),this.staffGridData=n.docs,this.isFetchingGridData=!1,n.docs.length||(this.isDataAvailable=!1),this.prevStartAt=this.firstInResponse,this.nextStartAfter=n.docs[n.docs.length-1],this.firstInResponse=n.docs[0],this.pageNumber--,1==this.pageNumber&&(this.disableNext=!1,this.disablePrev=!0)},n=>{console.log(n),this.isFetchingGridData=!1,this.connectionToast.openToast()})}sortTable(e,n){this.sortParams.field=e,this.sortParams.direction=n,this.getAccountStaff()}viewStaff(e){console.log(e),sessionStorage.setItem("restaurant_staff_id",e),this.router.navigateByUrl("/home/staff/view-staff")}onPrint(){console.log("lets start printing..."),this.staffPrint.printAllStaff()}}return a.\u0275fac=function(e){return new(e||a)(t.\u0275\u0275directiveInject(d.F0),t.\u0275\u0275directiveInject(c.e),t.\u0275\u0275directiveInject(F))},a.\u0275cmp=t.\u0275\u0275defineComponent({type:a,selectors:[["app-all-staff"]],viewQuery:function(e,n){if(1&e&&t.\u0275\u0275viewQuery(R,5,l.Y),2&e){let o;t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(n.connectionToast=o.first)}},decls:54,vars:21,consts:[[3,"headings","showPrint","print"],[1,"container"],[1,"row"],[1,"col-md-9"],[1,"row","mb-3"],[1,"col-md-12"],["routerLink","/home/staff/new-staff",1,"btn","btn-secondary","page-add-btn"],[1,"btn","btn-light","border","float-end","page-refresh-btn",3,"disabled","click"],[1,"bi","bi-arrow-clockwise"],[1,"overflow-auto"],[1,"table","table-bordered","table-sm","w-100","page-table"],[1,"bg-light"],["width","15%",1,"min-width-2"],["class","bi bi-filter float-end list-pointer",3,"click",4,"ngIf"],["class","bi bi-sort-down float-end list-pointer",3,"click",4,"ngIf"],["class","bi bi-sort-up float-end list-pointer",3,"click",4,"ngIf"],["width","35%",1,"min-width-4"],["width","25%",1,"min-width-3"],["class","table-pointer",3,"dblclick",4,"ngFor","ngForOf"],["class","text-center",4,"ngIf"],["colspan","4"],["aria-label","Page navigation",1,"nav-light","float-end"],[1,"pagination","pagination-sm","mb-0","justify-content-end"],[1,"page-item",3,"ngClass"],["href","#","aria-label","First",1,"page-link",3,"click"],[1,"bi","bi-caret-left-fill"],[1,"page-item"],["href","#","aria-label","Current",1,"page-link",3,"click"],["href","#","aria-label","Last",1,"page-link",3,"click"],[1,"bi","bi-caret-right-fill"],["connectionToastComponentReference",""],[1,"bi","bi-filter","float-end","list-pointer",3,"click"],[1,"bi","bi-sort-down","float-end","list-pointer",3,"click"],[1,"bi","bi-sort-up","float-end","list-pointer",3,"click"],[1,"table-pointer",3,"dblclick"],[1,"text-center"],["role","status",1,"spinner-grow","m-4"],[1,"visually-hidden"],[1,"m-4"]],template:function(e,n){1&e&&(t.\u0275\u0275elementStart(0,"app-module-topnav",0),t.\u0275\u0275listener("print",function(){return n.onPrint()}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(1,"div",1),t.\u0275\u0275elementStart(2,"div",2),t.\u0275\u0275elementStart(3,"div",3),t.\u0275\u0275elementStart(4,"div",4),t.\u0275\u0275elementStart(5,"div",5),t.\u0275\u0275elementStart(6,"button",6),t.\u0275\u0275text(7,"New Staff"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(8,"button",7),t.\u0275\u0275listener("click",function(){return n.getAccountStaff()}),t.\u0275\u0275element(9,"i",8),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(10,"div",9),t.\u0275\u0275elementStart(11,"table",10),t.\u0275\u0275elementStart(12,"thead"),t.\u0275\u0275elementStart(13,"tr",11),t.\u0275\u0275elementStart(14,"th",12),t.\u0275\u0275text(15," Staff ID "),t.\u0275\u0275template(16,V,1,0,"i",13),t.\u0275\u0275template(17,k,1,0,"i",14),t.\u0275\u0275template(18,j,1,0,"i",15),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(19,"th",16),t.\u0275\u0275text(20," Staff Name "),t.\u0275\u0275template(21,M,1,0,"i",13),t.\u0275\u0275template(22,B,1,0,"i",14),t.\u0275\u0275template(23,Q,1,0,"i",15),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(24,"th",17),t.\u0275\u0275text(25," Department "),t.\u0275\u0275template(26,G,1,0,"i",13),t.\u0275\u0275template(27,L,1,0,"i",14),t.\u0275\u0275template(28,O,1,0,"i",15),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(29,"th",17),t.\u0275\u0275text(30," Job "),t.\u0275\u0275template(31,H,1,0,"i",13),t.\u0275\u0275template(32,Y,1,0,"i",14),t.\u0275\u0275template(33,U,1,0,"i",15),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(34,"tbody"),t.\u0275\u0275template(35,J,9,5,"tr",18),t.\u0275\u0275template(36,z,5,0,"tr",19),t.\u0275\u0275template(37,K,4,0,"tr",19),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(38,"tfoot"),t.\u0275\u0275elementStart(39,"tr",11),t.\u0275\u0275elementStart(40,"td",20),t.\u0275\u0275elementStart(41,"nav",21),t.\u0275\u0275elementStart(42,"ul",22),t.\u0275\u0275elementStart(43,"li",23),t.\u0275\u0275elementStart(44,"a",24),t.\u0275\u0275listener("click",function(s){return n.previousPage(s)}),t.\u0275\u0275element(45,"i",25),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(46,"li",26),t.\u0275\u0275elementStart(47,"a",27),t.\u0275\u0275listener("click",function(s){return s.preventDefault()}),t.\u0275\u0275text(48),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(49,"li",23),t.\u0275\u0275elementStart(50,"a",28),t.\u0275\u0275listener("click",function(s){return n.nextPage(s)}),t.\u0275\u0275element(51,"i",29),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(52,"app-connection-toast",null,30)),2&e&&(t.\u0275\u0275property("headings",n.navHeading)("showPrint",!0),t.\u0275\u0275advance(8),t.\u0275\u0275property("disabled",n.isFetchingGridData),t.\u0275\u0275advance(8),t.\u0275\u0275property("ngIf","staff_code"!=n.sortParams.field),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","staff_code"==n.sortParams.field&&"desc"==n.sortParams.direction),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","staff_code"==n.sortParams.field&&"asc"==n.sortParams.direction),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf","staff_name"!=n.sortParams.field),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","staff_name"==n.sortParams.field&&"desc"==n.sortParams.direction),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","staff_name"==n.sortParams.field&&"asc"==n.sortParams.direction),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf","department"!=n.sortParams.field),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","department"==n.sortParams.field&&"desc"==n.sortParams.direction),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","department"==n.sortParams.field&&"asc"==n.sortParams.direction),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf","job"!=n.sortParams.field),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","job"==n.sortParams.field&&"desc"==n.sortParams.direction),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","job"==n.sortParams.field&&"asc"==n.sortParams.direction),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",n.staffGridData),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.isFetchingGridData),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!n.isDataAvailable&&!n.isFetchingGridData),t.\u0275\u0275advance(6),t.\u0275\u0275property("ngClass",n.disablePrev?"disabled":""),t.\u0275\u0275advance(5),t.\u0275\u0275textInterpolate1(" ",n.pageNumber," "),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngClass",n.disableNext?"disabled":""))},directives:[_.H,d.rH,m.O5,m.sg,m.mk,l.Y],styles:[""]}),a})();var w=f(7813),W=f(756),i=f(3324);function Z(a,r){if(1&a&&(t.\u0275\u0275elementStart(0,"option"),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&a){const e=r.$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(e)}}function X(a,r){if(1&a&&(t.\u0275\u0275elementStart(0,"option"),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&a){const e=r.$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(e)}}function q(a,r){if(1&a&&(t.\u0275\u0275elementStart(0,"option"),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&a){const e=r.$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(e)}}let x=(()=>{class a{constructor(){this.dayInput="",this.monthInput="",this.yearInput="",this.value=this.yearInput+"-"+this.monthInput+"-"+this.dayInput,this.dobDaySource=this.getDays(),this.dobMonthSource=this.getMonths(),this.dobYearSource=this.getYears()}ngOnInit(){}getValue(){return this.yearInput+"-"+this.monthInput+"-"+this.dayInput}setValue(e){var n=e.split("-");this.yearInput=n[0],this.monthInput=n[1],this.dayInput=n[2]}getDays(){var e,n=[];for(let o=1;o<=31;o++)e=o>=10?o.toString():"0"+o.toString(),n.push(e);return n}getMonths(){var e,n=[];for(let o=1;o<=12;o++)e=o>=10?o.toString():"0"+o.toString(),n.push(e);return n}getYears(){var e,n=[];for(e=2022;e>=1900;e--)n.push(e.toString());return n}}return a.\u0275fac=function(e){return new(e||a)},a.\u0275cmp=t.\u0275\u0275defineComponent({type:a,selectors:[["app-bday-input"]],decls:10,vars:6,consts:[[1,"row","w-100","m-0"],[1,"col","ps-0","pe-1"],[1,"form-control","form-control-sm","w-100",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],[1,"col","p-0"],[1,"col","ps-1","pe-0"]],template:function(e,n){1&e&&(t.\u0275\u0275elementStart(0,"div",0),t.\u0275\u0275elementStart(1,"div",1),t.\u0275\u0275elementStart(2,"select",2),t.\u0275\u0275listener("ngModelChange",function(s){return n.dayInput=s}),t.\u0275\u0275template(3,Z,2,1,"option",3),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"div",4),t.\u0275\u0275elementStart(5,"select",2),t.\u0275\u0275listener("ngModelChange",function(s){return n.monthInput=s}),t.\u0275\u0275template(6,X,2,1,"option",3),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(7,"div",5),t.\u0275\u0275elementStart(8,"select",2),t.\u0275\u0275listener("ngModelChange",function(s){return n.yearInput=s}),t.\u0275\u0275template(9,q,2,1,"option",3),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()),2&e&&(t.\u0275\u0275advance(2),t.\u0275\u0275property("ngModel",n.dayInput),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",n.dobDaySource),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngModel",n.monthInput),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",n.dobMonthSource),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngModel",n.yearInput),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",n.dobYearSource))},directives:[i.EJ,i.JJ,i.On,m.sg,i.YN,i.Kr],styles:[""]}),a})();var I=f(4154);const tt=["bdayInputComponentReference"],et=["imageInputComponentReference"];let b=(()=>{class a{constructor(){this.staffForm=new i.cw({})}ngOnInit(){this.initStaffForm()}initStaffForm(){this.staffForm=new i.cw({firstName:new i.NI(""),lastName:new i.NI(""),sex:new i.NI(""),nationality:new i.NI(""),religion:new i.NI(""),staffCode:new i.NI(""),department:new i.NI(""),job:new i.NI(""),phone:new i.NI(""),email:new i.NI(""),address:new i.NI(""),state:new i.NI(""),city:new i.NI(""),postCode:new i.NI("")})}}return a.\u0275fac=function(e){return new(e||a)},a.\u0275cmp=t.\u0275\u0275defineComponent({type:a,selectors:[["app-staff-form"]],viewQuery:function(e,n){if(1&e&&(t.\u0275\u0275viewQuery(tt,5,x),t.\u0275\u0275viewQuery(et,5,I.F)),2&e){let o;t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(n.bday=o.first),t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(n.photo=o.first)}},decls:127,vars:4,consts:[[1,"page-form",3,"formGroup"],[1,"row"],[1,"col-md-12"],[1,"col-md-6"],[1,"row","mb-1"],[1,"col-md-4"],[1,"float-md-end","float-sm-start","mt-1"],[1,"col-md-8"],["formControlName","firstName",1,"form-control","form-control-sm","w-100"],["formControlName","lastName",1,"form-control","form-control-sm","w-100"],["formControlName","sex",1,"form-control","form-control-sm","w-100"],["bdayInputComponentReference",""],["formControlName","nationality",1,"form-control","form-control-sm","w-100"],["formControlName","religion",1,"form-control","form-control-sm","w-100"],["formControlName","staffCode",1,"form-control","form-control-sm","w-100"],["formControlName","department",1,"form-control","form-control-sm","w-100"],["formControlName","job",1,"form-control","form-control-sm","w-100"],[1,"row","page-form-div"],[3,"width","height","imgType"],["imageInputComponentReference",""],["formControlName","phone",1,"form-control","form-control-sm","w-100"],["formControlName","email",1,"form-control","form-control-sm","w-100"],["formControlName","address","rows","3",1,"form-control","form-control-sm","w-100"],["formControlName","state",1,"form-control","form-control-sm","w-100"],["formControlName","city",1,"form-control","form-control-sm","w-100"],["formControlName","postCode",1,"form-control","form-control-sm","w-100"]],template:function(e,n){1&e&&(t.\u0275\u0275elementStart(0,"form",0),t.\u0275\u0275elementStart(1,"div",1),t.\u0275\u0275elementStart(2,"div",2),t.\u0275\u0275elementStart(3,"h4"),t.\u0275\u0275text(4,"Personal Details"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(5,"div",3),t.\u0275\u0275elementStart(6,"div",4),t.\u0275\u0275elementStart(7,"div",5),t.\u0275\u0275elementStart(8,"label",6),t.\u0275\u0275text(9,"First Name :"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(10,"div",7),t.\u0275\u0275element(11,"input",8),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(12,"div",4),t.\u0275\u0275elementStart(13,"div",5),t.\u0275\u0275elementStart(14,"label",6),t.\u0275\u0275text(15,"Last Name :"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(16,"div",7),t.\u0275\u0275element(17,"input",9),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(18,"div",4),t.\u0275\u0275elementStart(19,"div",5),t.\u0275\u0275elementStart(20,"label",6),t.\u0275\u0275text(21,"Sex :"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(22,"div",7),t.\u0275\u0275elementStart(23,"select",10),t.\u0275\u0275elementStart(24,"option"),t.\u0275\u0275text(25,"Male"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(26,"option"),t.\u0275\u0275text(27,"Female"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(28,"div",4),t.\u0275\u0275elementStart(29,"div",5),t.\u0275\u0275elementStart(30,"label",6),t.\u0275\u0275text(31,"Date of Birth :"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(32,"div",7),t.\u0275\u0275element(33,"app-bday-input",null,11),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(35,"div",3),t.\u0275\u0275elementStart(36,"div",4),t.\u0275\u0275elementStart(37,"div",5),t.\u0275\u0275elementStart(38,"label",6),t.\u0275\u0275text(39,"Nationality :"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(40,"div",7),t.\u0275\u0275element(41,"input",12),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(42,"div",4),t.\u0275\u0275elementStart(43,"div",5),t.\u0275\u0275elementStart(44,"label",6),t.\u0275\u0275text(45,"Religion :"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(46,"div",7),t.\u0275\u0275element(47,"input",13),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(48,"hr"),t.\u0275\u0275elementStart(49,"div",1),t.\u0275\u0275elementStart(50,"div",2),t.\u0275\u0275elementStart(51,"h4"),t.\u0275\u0275text(52,"Staff Details"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(53,"div",3),t.\u0275\u0275elementStart(54,"div",4),t.\u0275\u0275elementStart(55,"div",5),t.\u0275\u0275elementStart(56,"label",6),t.\u0275\u0275text(57,"Staff ID :"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(58,"div",7),t.\u0275\u0275element(59,"input",14),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(60,"div",3),t.\u0275\u0275elementStart(61,"div",4),t.\u0275\u0275elementStart(62,"div",5),t.\u0275\u0275elementStart(63,"label",6),t.\u0275\u0275text(64,"Department :"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(65,"div",7),t.\u0275\u0275element(66,"input",15),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(67,"div",4),t.\u0275\u0275elementStart(68,"div",5),t.\u0275\u0275elementStart(69,"label",6),t.\u0275\u0275text(70,"Job :"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(71,"div",7),t.\u0275\u0275element(72,"input",16),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(73,"hr"),t.\u0275\u0275elementStart(74,"div",17),t.\u0275\u0275elementStart(75,"div",3),t.\u0275\u0275elementStart(76,"div",4),t.\u0275\u0275elementStart(77,"div",5),t.\u0275\u0275elementStart(78,"label",6),t.\u0275\u0275text(79,"Photo :"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(80,"div",7),t.\u0275\u0275element(81,"app-image-input",18,19),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(83,"hr"),t.\u0275\u0275elementStart(84,"div",1),t.\u0275\u0275elementStart(85,"div",2),t.\u0275\u0275elementStart(86,"h4"),t.\u0275\u0275text(87,"Contact Details"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(88,"div",3),t.\u0275\u0275elementStart(89,"div",4),t.\u0275\u0275elementStart(90,"div",5),t.\u0275\u0275elementStart(91,"label",6),t.\u0275\u0275text(92,"Phone No. :"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(93,"div",7),t.\u0275\u0275element(94,"input",20),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(95,"div",4),t.\u0275\u0275elementStart(96,"div",5),t.\u0275\u0275elementStart(97,"label",6),t.\u0275\u0275text(98,"Email :"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(99,"div",7),t.\u0275\u0275element(100,"input",21),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(101,"div",4),t.\u0275\u0275elementStart(102,"div",5),t.\u0275\u0275elementStart(103,"label",6),t.\u0275\u0275text(104,"Address :"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(105,"div",7),t.\u0275\u0275element(106,"textarea",22),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(107,"div",3),t.\u0275\u0275elementStart(108,"div",4),t.\u0275\u0275elementStart(109,"div",5),t.\u0275\u0275elementStart(110,"label",6),t.\u0275\u0275text(111,"State/Region :"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(112,"div",7),t.\u0275\u0275element(113,"input",23),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(114,"div",4),t.\u0275\u0275elementStart(115,"div",5),t.\u0275\u0275elementStart(116,"label",6),t.\u0275\u0275text(117,"City/Town :"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(118,"div",7),t.\u0275\u0275element(119,"input",24),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(120,"div",4),t.\u0275\u0275elementStart(121,"div",5),t.\u0275\u0275elementStart(122,"label",6),t.\u0275\u0275text(123,"Post Code :"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(124,"div",7),t.\u0275\u0275element(125,"input",25),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(126,"hr"),t.\u0275\u0275elementEnd()),2&e&&(t.\u0275\u0275property("formGroup",n.staffForm),t.\u0275\u0275advance(81),t.\u0275\u0275property("width",140)("height",160)("imgType","photo"))},directives:[i._Y,i.JL,i.sg,i.Fj,i.JJ,i.u,i.EJ,i.YN,i.Kr,x,I.F],styles:[""]}),a})();var A=f(4477);const nt=["staffFormComponentReference"],at=["connectionToastComponentReference"];let ot=(()=>{class a{constructor(e,n,o){this.router=e,this.storage=n,this.staffApi=o,this.navHeading=[{text:"New Staff",url:"/home/staff/new-staff"}],this.storageBasePath="/restaurant/"+localStorage.getItem("restaurant_id")+"/module_staff/",this.isStaffSaving=!1}ngOnInit(){}createStaff(){var e=this;console.log("u are saving a new staff");var n={created_at:(0,W.Bt)(),account:localStorage.getItem("restaurant_id"),first_name:this.staffForm.staffForm.controls.firstName.value,last_name:this.staffForm.staffForm.controls.lastName.value,sex:this.staffForm.staffForm.controls.sex.value,date_of_birth:this.staffForm.bday.value,photo:"",nationality:this.staffForm.staffForm.controls.nationality.value,religion:this.staffForm.staffForm.controls.religion.value,phone:this.staffForm.staffForm.controls.phone.value,email:this.staffForm.staffForm.controls.email.value,address:this.staffForm.staffForm.controls.address.value,state:this.staffForm.staffForm.controls.state.value,city:this.staffForm.staffForm.controls.city.value,post_code:this.staffForm.staffForm.controls.postCode.value,staff_code:this.staffForm.staffForm.controls.staffCode.value,department:this.staffForm.staffForm.controls.department.value,job:this.staffForm.staffForm.controls.job.value};console.log(n),this.isStaffSaving=!0,this.staffApi.createStaff(n).then(function(){var o=(0,u.Z)(function*(s){if(console.log(s),sessionStorage.setItem("restaurant_staff_id",s.id),e.staffForm.photo.isImageSet){const S=e.storageBasePath+s.id,v=e.storage.ref(S);e.storage.upload(S,e.staffForm.photo.image).snapshotChanges().pipe((0,w.x)(()=>{v.getDownloadURL().subscribe(vt=>{e.updateImage({photo:vt})})})).subscribe()}else e.isStaffSaving=!1,e.router.navigateByUrl("/home/staff/view-staff")});return function(s){return o.apply(this,arguments)}}(),o=>{console.log(o),this.isStaffSaving=!1,this.connectionToast.openToast()})}updateImage(e){console.log("u are updating staff photo url"),console.log(e),this.staffApi.updateStaff(e).then(n=>{console.log(n),this.router.navigateByUrl("/home/staff/view-staff"),this.isStaffSaving=!1},n=>{console.log(n),this.isStaffSaving=!1,this.connectionToast.openToast()})}}return a.\u0275fac=function(e){return new(e||a)(t.\u0275\u0275directiveInject(d.F0),t.\u0275\u0275directiveInject(A.Q1),t.\u0275\u0275directiveInject(c.e))},a.\u0275cmp=t.\u0275\u0275defineComponent({type:a,selectors:[["app-new-staff"]],viewQuery:function(e,n){if(1&e&&(t.\u0275\u0275viewQuery(nt,5,b),t.\u0275\u0275viewQuery(at,5,l.Y)),2&e){let o;t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(n.staffForm=o.first),t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(n.connectionToast=o.first)}},decls:12,vars:2,consts:[[3,"headings"],[1,"container"],["staffFormComponentReference",""],[1,"row","page-form"],[1,"col-md-12"],["type","button","routerLink","/home/staff/all-staff",1,"btn","btn-secondary","btn-sm","float-end","ms-1","page-form-btn"],[1,"btn","btn-secondary","btn-sm","float-end","ms-1","page-form-btn",3,"disabled","click"],["connectionToastComponentReference",""]],template:function(e,n){1&e&&(t.\u0275\u0275element(0,"app-module-topnav",0),t.\u0275\u0275elementStart(1,"div",1),t.\u0275\u0275element(2,"app-staff-form",null,2),t.\u0275\u0275elementStart(4,"div",3),t.\u0275\u0275elementStart(5,"div",4),t.\u0275\u0275elementStart(6,"button",5),t.\u0275\u0275text(7,"Cancel"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(8,"button",6),t.\u0275\u0275listener("click",function(){return n.createStaff()}),t.\u0275\u0275text(9,"Save"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(10,"app-connection-toast",null,7)),2&e&&(t.\u0275\u0275property("headings",n.navHeading),t.\u0275\u0275advance(8),t.\u0275\u0275property("disabled",n.isStaffSaving))},directives:[_.H,b,d.rH,l.Y],styles:[""]}),a})();var T=f(8622);const rt=["staffFormComponentReference"],lt=["connectionToastComponentReference"],it=["deleteModalComponentReference"];function st(a,r){if(1&a){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",8),t.\u0275\u0275elementStart(1,"div",9),t.\u0275\u0275elementStart(2,"button",10),t.\u0275\u0275text(3,"Cancel"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"button",11),t.\u0275\u0275listener("click",function(){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext().confirmDelete()}),t.\u0275\u0275text(5,"Delete"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(6,"button",12),t.\u0275\u0275listener("click",function(){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext().updateStaff()}),t.\u0275\u0275text(7,"Save"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()}if(2&a){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(4),t.\u0275\u0275property("disabled",e.isStaffDeleting),t.\u0275\u0275advance(2),t.\u0275\u0275property("disabled",e.isStaffSaving)}}function ft(a,r){1&a&&(t.\u0275\u0275elementStart(0,"div",13),t.\u0275\u0275elementStart(1,"div",9),t.\u0275\u0275elementStart(2,"button",14),t.\u0275\u0275elementStart(3,"div",15),t.\u0275\u0275elementStart(4,"span",16),t.\u0275\u0275text(5,"Loading..."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd())}let mt=(()=>{class a{constructor(e,n,o,s){this.router=e,this.storage=n,this.staffApi=o,this.staffPrint=s,this.navHeading=[{text:"All Staff",url:"/home/staff/all-staff"},{text:"View Staff",url:"/home/staff/view-staff"}],this.storageBasePath="/restaurant/"+localStorage.getItem("restaurant_id")+"/module_staff/",this.isStaffLoading=!1,this.isStaffSaving=!1,this.isStaffDeleting=!1}ngOnInit(){this.getStaff()}getStaff(){this.isStaffLoading=!0,this.staffApi.getStaff().then(e=>{console.log(e.data()),this.staffFormData=e,this.isStaffLoading=!1,this.staffForm.staffForm.controls.firstName.setValue(this.staffFormData.data().first_name),this.staffForm.staffForm.controls.lastName.setValue(this.staffFormData.data().last_name),this.staffForm.staffForm.controls.sex.setValue(this.staffFormData.data().sex),this.staffForm.bday.setValue(this.staffFormData.data().date_of_birth),this.staffForm.staffForm.controls.nationality.setValue(this.staffFormData.data().nationality),this.staffForm.staffForm.controls.religion.setValue(this.staffFormData.data().religion),this.staffForm.staffForm.controls.phone.setValue(this.staffFormData.data().phone),this.staffForm.staffForm.controls.email.setValue(this.staffFormData.data().email),this.staffForm.staffForm.controls.address.setValue(this.staffFormData.data().address),this.staffForm.staffForm.controls.state.setValue(this.staffFormData.data().state),this.staffForm.staffForm.controls.city.setValue(this.staffFormData.data().city),this.staffForm.staffForm.controls.postCode.setValue(this.staffFormData.data().post_code),this.staffForm.staffForm.controls.staffCode.setValue(this.staffFormData.data().staff_code),this.staffForm.staffForm.controls.department.setValue(this.staffFormData.data().department),this.staffForm.staffForm.controls.job.setValue(this.staffFormData.data().job),""!=this.staffFormData.data().photo&&(this.staffForm.photo.imgSrc=this.staffFormData.data().photo,this.staffForm.photo.isImageSet=!0)},e=>{console.log(e),this.isStaffLoading=!1,this.connectionToast.openToast()})}updateStaff(){console.log("u are saving a new staff");var e={first_name:this.staffForm.staffForm.controls.firstName.value,last_name:this.staffForm.staffForm.controls.lastName.value,sex:this.staffForm.staffForm.controls.sex.value,date_of_birth:this.staffForm.bday.value,nationality:this.staffForm.staffForm.controls.nationality.value,religion:this.staffForm.staffForm.controls.religion.value,phone:this.staffForm.staffForm.controls.phone.value,email:this.staffForm.staffForm.controls.email.value,address:this.staffForm.staffForm.controls.address.value,state:this.staffForm.staffForm.controls.state.value,city:this.staffForm.staffForm.controls.city.value,post_code:this.staffForm.staffForm.controls.postCode.value,staff_code:this.staffForm.staffForm.controls.staffCode.value,department:this.staffForm.staffForm.controls.department.value,job:this.staffForm.staffForm.controls.job.value};console.log(e),this.isStaffSaving=!0,this.staffApi.updateStaff(e).then(n=>{if(console.log(n),this.staffForm.photo.isImageSet&&!this.staffForm.photo.isImageChanged)this.isStaffSaving=!1;else{const o=this.storageBasePath+n.id,s=this.storage.ref(o);this.storage.upload(o,this.staffForm.photo.image).snapshotChanges().pipe((0,w.x)(()=>{s.getDownloadURL().subscribe(v=>{this.updateImage({photo:v})})})).subscribe()}},n=>{console.log(n),this.isStaffSaving=!1,this.connectionToast.openToast()})}confirmDelete(){this.deleteModal.openModal()}deleteStaff(){this.isStaffDeleting=!0,this.staffApi.deleteStaff().then(e=>{console.log(e),this.isStaffDeleting=!1,this.router.navigateByUrl("/home/staff/all-staff")},e=>{console.log(e),this.connectionToast.openToast(),this.isStaffDeleting=!1})}updateImage(e){console.log("u are updating staff photo url"),console.log(e),this.staffApi.updateStaff(e).then(n=>{console.log(n),this.isStaffSaving=!1},n=>{console.log(n),this.isStaffSaving=!1,this.connectionToast.openToast()})}onPrint(){console.log("lets start printing..."),this.staffPrint.printViewStaff()}}return a.\u0275fac=function(e){return new(e||a)(t.\u0275\u0275directiveInject(d.F0),t.\u0275\u0275directiveInject(A.Q1),t.\u0275\u0275directiveInject(c.e),t.\u0275\u0275directiveInject(F))},a.\u0275cmp=t.\u0275\u0275defineComponent({type:a,selectors:[["app-view-staff"]],viewQuery:function(e,n){if(1&e&&(t.\u0275\u0275viewQuery(rt,5,b),t.\u0275\u0275viewQuery(lt,5,l.Y),t.\u0275\u0275viewQuery(it,5,T.z)),2&e){let o;t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(n.staffForm=o.first),t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(n.connectionToast=o.first),t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(n.deleteModal=o.first)}},decls:10,vars:3,consts:[[3,"headings"],[1,"container"],["staffFormComponentReference",""],["class","row page-form",4,"ngIf"],["class","row",4,"ngIf"],["connectionToastComponentReference",""],[3,"confirmEvent"],["deleteModalComponentReference",""],[1,"row","page-form"],[1,"col-md-12"],["type","button","routerLink","/home/staff/all-staff",1,"btn","btn-secondary","btn-sm","float-end","ms-1","page-form-btn"],["type","button",1,"btn","btn-secondary","btn-sm","float-end","ms-1","page-form-btn",3,"disabled","click"],[1,"btn","btn-secondary","btn-sm","float-end","ms-1","page-form-btn",3,"disabled","click"],[1,"row"],["type","button",1,"btn","btn-sm","float-end","ms-1","btn-light","page-form-btn"],["role","status",1,"spinner-grow","spinner-grow-sm"],[1,"visually-hidden"]],template:function(e,n){1&e&&(t.\u0275\u0275element(0,"app-module-topnav",0),t.\u0275\u0275elementStart(1,"div",1),t.\u0275\u0275element(2,"app-staff-form",null,2),t.\u0275\u0275template(4,st,8,2,"div",3),t.\u0275\u0275template(5,ft,6,0,"div",4),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(6,"app-connection-toast",null,5),t.\u0275\u0275elementStart(8,"app-delete-modal",6,7),t.\u0275\u0275listener("confirmEvent",function(){return n.deleteStaff()}),t.\u0275\u0275elementEnd()),2&e&&(t.\u0275\u0275property("headings",n.navHeading),t.\u0275\u0275advance(4),t.\u0275\u0275property("ngIf",!n.isStaffLoading),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.isStaffLoading))},directives:[_.H,b,m.O5,l.Y,T.z,d.rH],styles:[""]}),a})();const dt=["connectionToastComponentReference"];let D=(()=>{class a{constructor(e){this.staffApi=e,this.navHeading=[{text:"Dashboard",url:"/home/staff/dashboard"}],this.allStaffCount=0}ngOnInit(){}ngAfterViewInit(){this.getAllAccountStaff()}getAllAccountStaff(){this.staffApi.getAllAccountStaff().then(e=>{console.log(e),this.allStaffCount=e.docs.length},e=>{console.log(e),this.connectionToast.openToast()})}}return a.\u0275fac=function(e){return new(e||a)(t.\u0275\u0275directiveInject(c.e))},a.\u0275cmp=t.\u0275\u0275defineComponent({type:a,selectors:[["app-dashboard"]],viewQuery:function(e,n){if(1&e&&t.\u0275\u0275viewQuery(dt,5,l.Y),2&e){let o;t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(n.connectionToast=o.first)}},decls:14,vars:2,consts:[[3,"headings"],[1,"container"],[1,"row"],[1,"col-md-3","mb-4"],[1,"card","border-left-secondary","shadow","h-100","py-2"],[1,"card-body"],[1,"row","no-gutters","align-items-center"],[1,"col","mr-2"],[1,"text-xs","font-weight-bold","text-uppercase","mb-1"],[1,"h5","mb-0","font-weight-bold","text-gray-800"],["connectionToastComponentReference",""]],template:function(e,n){1&e&&(t.\u0275\u0275element(0,"app-module-topnav",0),t.\u0275\u0275elementStart(1,"div",1),t.\u0275\u0275elementStart(2,"div",2),t.\u0275\u0275elementStart(3,"div",3),t.\u0275\u0275elementStart(4,"div",4),t.\u0275\u0275elementStart(5,"div",5),t.\u0275\u0275elementStart(6,"div",6),t.\u0275\u0275elementStart(7,"div",7),t.\u0275\u0275elementStart(8,"div",8),t.\u0275\u0275text(9,"All Staff"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(10,"div",9),t.\u0275\u0275text(11),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(12,"app-connection-toast",null,10)),2&e&&(t.\u0275\u0275property("headings",n.navHeading),t.\u0275\u0275advance(11),t.\u0275\u0275textInterpolate(n.allStaffCount))},directives:[_.H,l.Y],styles:[""]}),a})();const ct=[{path:"",component:E,children:[{path:"",component:D},{path:"dashboard",component:D},{path:"all-staff",component:$},{path:"new-staff",component:ot},{path:"view-staff",component:mt,canActivate:[(()=>{class a{constructor(e){this.router=e}canActivate(e){return!!sessionStorage.getItem("restaurant_staff_id")||(this.router.navigateByUrl("/home/staff"),!1)}}return a.\u0275fac=function(e){return new(e||a)(t.\u0275\u0275inject(d.F0))},a.\u0275prov=t.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"}),a})()]}]}];let pt=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=t.\u0275\u0275defineInjector({imports:[[d.Bz.forChild(ct)],d.Bz]}),a})();var ut=f(7264),P=f(5018),ht=f(6508);let St=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=t.\u0275\u0275defineInjector({imports:[[m.ez,d.Bz,i.u5,i.UX,ht.m9,P.p]]}),a})(),gt=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=t.\u0275\u0275defineInjector({imports:[[m.ez,pt,ut.M,P.p,St]]}),a})()},687:(C,h,f)=>{f.d(h,{e:()=>y});var m=f(2741),d=f(9805),t=f(4477);let y=(()=>{class p{constructor(l,c){this.afs=l,this.storage=c,this.staffRef=this.afs.collection("restaurant/module_staff/restaurant_staff"),this.storagePath="/restaurant/"+localStorage.getItem("restaurant_id"),this.storageRef=this.storage.ref(this.storagePath)}createStaff(l){return this.staffRef.add(l)}getStaff(){return this.staffRef.doc(String(sessionStorage.getItem("restaurant_staff_id"))).ref.get()}updateStaff(l){return this.staffRef.doc(String(sessionStorage.getItem("restaurant_staff_id"))).update(l)}deleteStaff(){return this.staffRef.doc(String(sessionStorage.getItem("restaurant_staff_id"))).delete()}getAccountStaff(l,c){return this.staffRef.ref.where("account","==",localStorage.getItem("restaurant_id")).orderBy(null==l?void 0:l.field,null==l?void 0:l.direction).limit(c).get()}getAccountStaffNext(l,c,u){return this.staffRef.ref.where("account","==",localStorage.getItem("restaurant_id")).orderBy(null==l?void 0:l.field,null==l?void 0:l.direction).startAfter(u).limit(c).get()}getAccountStaffPrev(l,c,u){return this.staffRef.ref.where("account","==",localStorage.getItem("restaurant_id")).orderBy(null==l?void 0:l.field,null==l?void 0:l.direction).startAt(u).limit(c).get()}getAllAccountStaff(){return this.staffRef.ref.where("account","==",localStorage.getItem("restaurant_id")).orderBy("created_at","desc").get()}}return p.\u0275fac=function(l){return new(l||p)(m.\u0275\u0275inject(d.ST),m.\u0275\u0275inject(t.Q1))},p.\u0275prov=m.\u0275\u0275defineInjectable({token:p,factory:p.\u0275fac,providedIn:"root"}),p})()}}]);