"use strict";(self.webpackChunkang_fire=self.webpackChunkang_fire||[]).push([[937],{4937:(O,u,r)=>{r.r(u),r.d(u,{RegisterPageModule:()=>B});var c=r(6274),i=r(8718),e=r(2741),S=r(8088);let x=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["app-register-page"]],decls:2,vars:2,consts:[[3,"navBrand","isForms"]],template:function(t,o){1&t&&(e.\u0275\u0275element(0,"app-main-navbar",0),e.\u0275\u0275element(1,"router-outlet")),2&t&&e.\u0275\u0275property("navBrand","nR Restaurant")("isForms",!0)},directives:[S.D,i.lC],styles:[""]}),n})();var a=r(3324),g=r(756),C=r(9475),E=r(8140),R=r(1934),F=r(2606),d=r(9009),y=r(6229),I=r(7124),l=r(823),p=r(7749),f=r(9320),h=r(7617);function b(n,s){1&n&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1,"Restaurant Name is required"),e.\u0275\u0275elementEnd())}function A(n,s){1&n&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1,"Location is required"),e.\u0275\u0275elementEnd())}function P(n,s){1&n&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1,"About is required"),e.\u0275\u0275elementEnd())}function M(n,s){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"form",8),e.\u0275\u0275listener("ngSubmit",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().onSubmit()}),e.\u0275\u0275elementStart(1,"div",9),e.\u0275\u0275elementStart(2,"div",10),e.\u0275\u0275elementStart(3,"mat-form-field",11),e.\u0275\u0275elementStart(4,"mat-label"),e.\u0275\u0275text(5,"Restaurant Name"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(6,"input",12),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(7,b,2,0,"mat-error",13),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"div",9),e.\u0275\u0275elementStart(9,"div",10),e.\u0275\u0275elementStart(10,"mat-form-field",11),e.\u0275\u0275elementStart(11,"mat-label"),e.\u0275\u0275text(12,"Location"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"input",14,15),e.\u0275\u0275listener("onAddressChange",function(m){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().onAddressChange(m)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(15,A,2,0,"mat-error",13),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"div",9),e.\u0275\u0275elementStart(17,"div",10),e.\u0275\u0275elementStart(18,"mat-form-field",11),e.\u0275\u0275elementStart(19,"mat-label"),e.\u0275\u0275text(20,"About"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(21,"textarea",16),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(22,"mat-hint"),e.\u0275\u0275text(23,"Not more than 250 characters"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(24,P,2,0,"mat-error",13),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(25,"div",9),e.\u0275\u0275elementStart(26,"div",10),e.\u0275\u0275elementStart(27,"button",17),e.\u0275\u0275text(28,"Submit"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("formGroup",t.accountForm),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngIf",t.saved&&t.accountForm.controls.name.errors),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",t.saved&&t.accountForm.controls.location.errors),e.\u0275\u0275advance(9),e.\u0275\u0275property("ngIf",t.saved&&t.accountForm.controls.about.errors),e.\u0275\u0275advance(3),e.\u0275\u0275property("disabled",t.isSending)}}function N(n,s){1&n&&(e.\u0275\u0275elementStart(0,"div",18),e.\u0275\u0275elementStart(1,"div",10),e.\u0275\u0275element(2,"img",19),e.\u0275\u0275elementStart(3,"p",20),e.\u0275\u0275text(4,"Successfully completed Restaurant registration"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"a",21),e.\u0275\u0275elementStart(6,"button",22),e.\u0275\u0275text(7,"Continue"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"p"),e.\u0275\u0275text(9,"continue to Restaurant"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd())}const j=[{path:"",component:x,children:[{path:"",component:(()=>{class n{constructor(t,o,m,v,D){this.router=t,this.userApi=o,this.accountApi=m,this.adminApi=v,this.settingsApi=D,this.accountForm=new a.cw({name:new a.NI("",a.kI.required),location:new a.NI("",a.kI.required),about:new a.NI("",a.kI.required)}),this.saved=!1,this.isSending=!1,this.showPrompt=!1}ngOnInit(){this.getUser()}getUser(){this.userApi.getUser().then(t=>{console.log(t),this.thisUser=t.data()},t=>{console.log(t)})}onSubmit(){let t={created_at:(0,g.Bt)(),name:this.accountForm.controls.name.value,location:this.accountForm.controls.location.value,about:this.accountForm.controls.about.value,created_by:localStorage.getItem("personal_id"),logo:""};this.saved=!0,this.accountForm.valid?(this.isSending=!0,this.accountApi.createAccount(t).then(o=>{console.log(o),localStorage.setItem("restaurant_id",o.id),this.showPrompt=!0,this.isSending=!1,this.createAccountUser(t),this.createExtendedProfile(),this.createSubscription()},o=>{console.log(o),this.isSending=!1})):console.log("form is invalid"),console.log(this.accountForm.value)}createAccountUser(t){let o={created_at:(0,g.Bt)(),user:{id:localStorage.getItem("personal_id"),data:this.thisUser},access_level:"Admin",account:{id:localStorage.getItem("restaurant_id"),data:t}};console.log(o),this.adminApi.createAccountUser(o).then(m=>{console.log(m),sessionStorage.setItem("restaurant_account_user_id",m.id),this.createUserAccess(m.id)},m=>{console.log(m)})}createUserAccess(t){this.adminApi.createUserAccess(t,{admin_access:!0,customers_access:!0,deliveries_access:!0,kitchen_stock_access:!0,menu_access:!0,orders_access:!0,payments_access:!0,portal_access:!0,roster_access:!0,settings_access:!0,staff_access:!0,reservations_access:!0,tables_access:!0}).then(m=>console.log(m),m=>console.log(m))}createExtendedProfile(){this.settingsApi.createExtendedProfile({email:"",phone:"",address:"",country:"",state:"",city:""}).then(o=>console.log(o),o=>console.log(o))}createSubscription(){this.settingsApi.createSubscription({subscription_type:"Individual",billing_frequency:"",number_users:1,email:"",status:"Active"}).then(o=>console.log(o),o=>console.log(o))}onAddressChange(t){this.accountForm.controls.location.setValue(t.formatted_address),console.log(t)}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275directiveInject(i.F0),e.\u0275\u0275directiveInject(C.Q),e.\u0275\u0275directiveInject(E.X),e.\u0275\u0275directiveInject(R.o),e.\u0275\u0275directiveInject(F.p))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["app-register-form"]],decls:10,vars:3,consts:[[1,"bg-light"],[1,"container","pt-5"],[1,"row"],[1,"col-md-5","mx-auto","vh-100"],[1,"my-auto"],[3,"formHeading"],[3,"formGroup","ngSubmit",4,"ngIf"],["class","row p5 text-center",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"row","mb-3"],[1,"col"],["appearance","outline",1,"w-100"],["matInput","","type","text","formControlName","name","required",""],[4,"ngIf"],["matInput","","type","text","formControlName","location","required","","ngx-google-places-autocomplete","",3,"onAddressChange"],["placesRef","ngx-places"],["matInput","","rows","3","formControlName","about","required","","maxlength","250"],["mat-raised-button","","color","primary",1,"float-end","form-button",3,"disabled"],[1,"row","p5","text-center"],["src","../../../../assets/images/forms/success.png",1,"mb-4","prompt-image","mx-auto"],[1,"lead"],["href","/home"],["mat-raised-button","","color","primary",1,"mt-3","mb-1","form-button"]],template:function(t,o){1&t&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275elementStart(1,"div",1),e.\u0275\u0275elementStart(2,"div",2),e.\u0275\u0275elementStart(3,"div",3),e.\u0275\u0275elementStart(4,"mat-card",4),e.\u0275\u0275elementStart(5,"mat-card-content"),e.\u0275\u0275element(6,"app-form-header",5),e.\u0275\u0275template(7,M,29,5,"form",6),e.\u0275\u0275template(8,N,10,0,"div",7),e.\u0275\u0275element(9,"app-form-footer"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275advance(6),e.\u0275\u0275property("formHeading","Restaurant register"),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!o.showPrompt),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",o.showPrompt))},directives:[d.a8,d.dn,y.h,c.O5,I.W,a._Y,a.JL,a.sg,l.KE,l.hX,p.Nt,a.Fj,a.JJ,a.u,a.Q7,f.GooglePlaceDirective,a.nD,l.bx,h.lW,l.TO],styles:[".form-button[_ngcontent-%COMP%]{width:100px;height:47px}.prompt-image[_ngcontent-%COMP%]{width:80px;height:80px}  .mat-form-field-wrapper{padding-bottom:0!important}"]}),n})()}]}];let U=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=e.\u0275\u0275defineInjector({imports:[[i.Bz.forChild(j)],i.Bz]}),n})();var T=r(7264),_=r(489);let w=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=e.\u0275\u0275defineInjector({imports:[[c.ez,i.Bz,a.UX,f.GooglePlaceModule,d.QW,p.c,l.lN,h.ot,_.p]]}),n})(),B=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=e.\u0275\u0275defineInjector({imports:[[c.ez,U,T.M,w]]}),n})()}}]);