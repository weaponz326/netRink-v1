"use strict";(self.webpackChunkang_fire=self.webpackChunkang_fire||[]).push([[359],{756:(C,b,m)=>{m.d(b,{Bt:()=>s.Bt});var s=m(9665)},8622:(C,b,m)=>{m.d(b,{z:()=>e});var s=m(2741);const c=["buttonElementReference"];let e=(()=>{class u{constructor(){this.confirmEvent=new s.EventEmitter}ngOnInit(){}openModal(){this.buttonElement.nativeElement.click()}onConfirm(){console.log("Yep... lets go ahead and delete this useless piece of ****"),this.confirmEvent.emit("OK")}}return u.\u0275fac=function(h){return new(h||u)},u.\u0275cmp=s.\u0275\u0275defineComponent({type:u,selectors:[["app-delete-modal"]],viewQuery:function(h,d){if(1&h&&s.\u0275\u0275viewQuery(c,5,s.ElementRef),2&h){let p;s.\u0275\u0275queryRefresh(p=s.\u0275\u0275loadQuery())&&(d.buttonElement=p.first)}},outputs:{confirmEvent:"confirmEvent"},decls:14,vars:1,consts:[["data-bs-toggle","modal","data-bs-target","#deleteConfirmationModal",3,"hidden"],["buttonElementReference",""],["id","deleteConfirmationModal","tabindex","-1","aria-labelledby","deleteConfirmationModalLabel","aria-hidden","true",1,"modal","fade","form-modal"],[1,"modal-dialog"],[1,"modal-content","text-center"],[1,"modal-body"],[1,"pt-4"],[1,"modal-footer"],["data-bs-dismiss","modal",1,"btn","btn-sm","btn-secondary","modal-form-btn",3,"click"],["data-bs-dismiss","modal",1,"btn","btn-sm","btn-secondary","modal-form-btn"]],template:function(h,d){1&h&&(s.\u0275\u0275elementStart(0,"button",0,1),s.\u0275\u0275text(2," Launch demo modal\n"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(3,"div",2),s.\u0275\u0275elementStart(4,"div",3),s.\u0275\u0275elementStart(5,"div",4),s.\u0275\u0275elementStart(6,"div",5),s.\u0275\u0275elementStart(7,"p",6),s.\u0275\u0275text(8,"Are you sure you want to delete this item?"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(9,"div",7),s.\u0275\u0275elementStart(10,"button",8),s.\u0275\u0275listener("click",function(){return d.onConfirm()}),s.\u0275\u0275text(11,"Yes"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(12,"button",9),s.\u0275\u0275text(13,"No"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd()),2&h&&s.\u0275\u0275property("hidden",!0)},styles:[".modal-footer[_ngcontent-%COMP%]{align-items:center;justify-content:center}"]}),u})()},6359:(C,b,m)=>{m.r(b),m.d(b,{RosterPageModule:()=>Ke});var s=m(6274),c=m(8718),e=m(2741),u=m(8088),_=m(7632);let h=(()=>{class o{constructor(){this.navLinks=[{text:"All Roster",url:"/home/roster/all-roster",icon:"bi bi-list-ul"}]}ngOnInit(){}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["app-roster-page"]],decls:6,vars:4,consts:[[3,"navBrand","source"],["id","wrapper"],[3,"navLinks","heading"],["id","content-wrapper",1,"d-flex","flex-column"],["id","content"]],template:function(t,n){1&t&&(e.\u0275\u0275element(0,"app-main-navbar",0),e.\u0275\u0275elementStart(1,"div",1),e.\u0275\u0275element(2,"app-module-sidenav",2),e.\u0275\u0275elementStart(3,"div",3),e.\u0275\u0275elementStart(4,"div",4),e.\u0275\u0275element(5,"router-outlet"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275property("navBrand","nR Restaurant")("source","Restaurant"),e.\u0275\u0275advance(2),e.\u0275\u0275property("navLinks",n.navLinks)("heading","Roster"))},directives:[u.D,_.m,c.lC],styles:[""]}),o})();var d=m(1580),p=m(970),S=m(8972);const k=["connectionToastComponentReference"];let w=(()=>{class o{constructor(t){this.rosterApi=t,this.navHeading=[{text:"Dashboard",url:"/home/roster/dashboard"}],this.allRosterCount=0}ngOnInit(){}ngAfterViewInit(){this.getRosterCount()}getRosterCount(){}}return o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275directiveInject(p.P))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["app-dashboard"]],viewQuery:function(t,n){if(1&t&&e.\u0275\u0275viewQuery(k,5,d.Y),2&t){let r;e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(n.connectionToast=r.first)}},decls:14,vars:2,consts:[[3,"headings"],[1,"container"],[1,"row"],[1,"col-md-3","mb-4"],[1,"card","border-left-secondary","shadow","h-100","py-2"],[1,"card-body"],[1,"row","no-gutters","align-items-center"],[1,"col","mr-2"],[1,"text-xs","font-weight-bold","text-uppercase","mb-1"],[1,"h5","mb-0","font-weight-bold","text-gray-800"],["connectionToastComponentReference",""]],template:function(t,n){1&t&&(e.\u0275\u0275element(0,"app-module-topnav",0),e.\u0275\u0275elementStart(1,"div",1),e.\u0275\u0275elementStart(2,"div",2),e.\u0275\u0275elementStart(3,"div",3),e.\u0275\u0275elementStart(4,"div",4),e.\u0275\u0275elementStart(5,"div",5),e.\u0275\u0275elementStart(6,"div",6),e.\u0275\u0275elementStart(7,"div",7),e.\u0275\u0275elementStart(8,"div",8),e.\u0275\u0275text(9,"All Roster"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"div",9),e.\u0275\u0275text(11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(12,"app-connection-toast",null,10)),2&t&&(e.\u0275\u0275property("headings",n.navHeading),e.\u0275\u0275advance(11),e.\u0275\u0275textInterpolate(n.allRosterCount))},directives:[S.H,d.Y],styles:[""]}),o})();var a=m(3324),y=m(756),V=m(8361),g=m.n(V);const G=["newButtonElementReference"],L=["dismissButtonElementReference"],O=["connectionToastComponentReference"];let R=(()=>{class o{constructor(t,n){this.router=t,this.rosterApi=n,this.rosterForm=new a.cw({}),this.isRosterSaving=!1}ngOnInit(){this.initRosterForm()}openModal(){this.newButton.nativeElement.click()}initRosterForm(){this.rosterForm=new a.cw({rosterCode:new a.NI(""),rosterName:new a.NI(""),fromDate:new a.NI(""),toDate:new a.NI("")})}createRoster(){let t={created_at:(0,y.Bt)(),account:localStorage.getItem("restaurant_id"),roster_code:this.rosterForm.controls.rosterCode.value,roster_name:this.rosterForm.controls.rosterName.value,from_date:this.rosterForm.controls.fromDate.value,to_date:this.rosterForm.controls.toDate.value};this.isRosterSaving=!0,this.rosterApi.createRoster(t).then(n=>{console.log(n),n.id&&(sessionStorage.setItem("restaurant_roster_id",n.id),this.dismissButton.nativeElement.click(),this.router.navigateByUrl("/home/roster/view-roster"),this.isRosterSaving=!1,this.createSheet())},n=>{console.log(n),this.isRosterSaving=!1,this.connectionToast.openToast()}),console.log(t)}createSheet(){let n={shifts:[],days:this.enumerateDaysBetweenDates(this.rosterForm.controls.fromDate.value,this.rosterForm.controls.toDate.value),sheet:[]};this.rosterApi.createSheet(sessionStorage.getItem("restaurant_roster_id"),n).then(r=>console.log(r),r=>console.log(r)),console.log(n)}enumerateDaysBetweenDates(t,n){for(var r=[],i=g()(t).startOf("day"),f=g()(n).startOf("day");i.add(1,"days").diff(f)<=0;)console.log(i.toDate()),r.push(i.clone().toDate());return r}}return o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275directiveInject(c.F0),e.\u0275\u0275directiveInject(p.P))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["app-new-roster"]],viewQuery:function(t,n){if(1&t&&(e.\u0275\u0275viewQuery(G,5,e.ElementRef),e.\u0275\u0275viewQuery(L,5,e.ElementRef),e.\u0275\u0275viewQuery(O,5,d.Y)),2&t){let r;e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(n.newButton=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(n.dismissButton=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(n.connectionToast=r.first)}},decls:44,vars:3,consts:[["data-bs-toggle","modal","data-bs-target","#newRosterModal",3,"hidden"],["newButtonElementReference",""],["id","newRosterModal","tabindex","-1","aria-labelledby","newRosterModalLabel","aria-hidden","true",1,"modal","fade","form-modal"],[1,"modal-dialog"],[1,"modal-content"],[1,"page-form",3,"formGroup","ngSubmit"],[1,"modal-header","bg-light"],["id","newRosterModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],["dismissButtonElementReference",""],[1,"modal-body"],[1,"row","mb-1"],[1,"col-md-4"],[1,"float-md-end","float-sm-start","mt-1"],[1,"col-md-8"],["formControlName","rosterCode",1,"form-control","form-control-sm","w-100"],["formControlName","rosterName",1,"form-control","form-control-sm","w-100"],["type","date","formControlName","fromDate",1,"form-control","form-control-sm","w-100"],["type","date","formControlName","toDate",1,"form-control","form-control-sm","w-100"],[1,"modal-footer"],["type","submit",1,"btn","btn-sm","btn-secondary","modal-form-btn",3,"disabled"],["type","button","data-bs-dismiss","modal",1,"btn","btn-sm","btn-secondary","modal-form-btn"],["connectionToastComponentReference",""]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"button",0,1),e.\u0275\u0275text(2," Launch demo modal\n"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",2),e.\u0275\u0275elementStart(4,"div",3),e.\u0275\u0275elementStart(5,"div",4),e.\u0275\u0275elementStart(6,"form",5),e.\u0275\u0275listener("ngSubmit",function(){return n.createRoster()}),e.\u0275\u0275elementStart(7,"div",6),e.\u0275\u0275elementStart(8,"span",7),e.\u0275\u0275text(9,"New Roster"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(10,"button",8,9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"div",10),e.\u0275\u0275elementStart(13,"div",11),e.\u0275\u0275elementStart(14,"div",12),e.\u0275\u0275elementStart(15,"label",13),e.\u0275\u0275text(16,"Roster ID :"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"div",14),e.\u0275\u0275element(18,"input",15),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"div",11),e.\u0275\u0275elementStart(20,"div",12),e.\u0275\u0275elementStart(21,"label",13),e.\u0275\u0275text(22,"Roster Name :"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(23,"div",14),e.\u0275\u0275element(24,"input",16),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(25,"div",11),e.\u0275\u0275elementStart(26,"div",12),e.\u0275\u0275elementStart(27,"label",13),e.\u0275\u0275text(28,"Date From :"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(29,"div",14),e.\u0275\u0275element(30,"input",17),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(31,"div",11),e.\u0275\u0275elementStart(32,"div",12),e.\u0275\u0275elementStart(33,"label",13),e.\u0275\u0275text(34,"Date To :"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(35,"div",14),e.\u0275\u0275element(36,"input",18),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(37,"div",19),e.\u0275\u0275elementStart(38,"button",20),e.\u0275\u0275text(39,"Save"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(40,"button",21),e.\u0275\u0275text(41,"Cancel"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(42,"app-connection-toast",null,22)),2&t&&(e.\u0275\u0275property("hidden",!0),e.\u0275\u0275advance(6),e.\u0275\u0275property("formGroup",n.rosterForm),e.\u0275\u0275advance(32),e.\u0275\u0275property("disabled",n.isRosterSaving))},directives:[a._Y,a.JL,a.sg,a.Fj,a.JJ,a.u,d.Y],styles:[""]}),o})();const j=["newRosterComponentReference"],Y=["connectionToastComponentReference"];function J(o,l){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",31),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("roster_code","desc")}),e.\u0275\u0275elementEnd()}}function q(o,l){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",32),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("roster_code","asc")}),e.\u0275\u0275elementEnd()}}function H(o,l){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",33),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("roster_code","desc")}),e.\u0275\u0275elementEnd()}}function z(o,l){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",31),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("roster_name","desc")}),e.\u0275\u0275elementEnd()}}function $(o,l){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",32),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("roster_name","asc")}),e.\u0275\u0275elementEnd()}}function U(o,l){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",33),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("roster_name","desc")}),e.\u0275\u0275elementEnd()}}function W(o,l){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"tr",34),e.\u0275\u0275listener("dblclick",function(){const i=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275nextContext().viewRoster(i.id)}),e.\u0275\u0275elementStart(1,"td"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"td"),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()}if(2&o){const t=l.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null==t?null:t.data().roster_code),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null==t?null:t.data().roster_name)}}function K(o,l){1&o&&(e.\u0275\u0275elementStart(0,"tr",35),e.\u0275\u0275elementStart(1,"td",19),e.\u0275\u0275elementStart(2,"div",36),e.\u0275\u0275elementStart(3,"span",37),e.\u0275\u0275text(4,"Loading..."),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd())}function X(o,l){1&o&&(e.\u0275\u0275elementStart(0,"tr",35),e.\u0275\u0275elementStart(1,"td",19),e.\u0275\u0275elementStart(2,"p",38),e.\u0275\u0275text(3,"No data available"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd())}let Z=(()=>{class o{constructor(t,n){this.router=t,this.rosterApi=n,this.navHeading=[{text:"All Roster",url:"/home/roster/all-roster"}],this.rosterGridData=[],this.isFetchingGridData=!1,this.isDataAvailable=!0,this.firstInResponse=[],this.lastInResponse=[],this.nextStartAfter=[],this.prevStartAt=[],this.pageNumber=0,this.disableNext=!0,this.disablePrev=!0,this.sortParams={field:"created_at",direction:"desc"}}ngOnInit(){this.getAccountRoster()}getAccountRoster(){this.isFetchingGridData=!0,this.rosterApi.getAccountRoster(this.sortParams,20).then(t=>{console.log(t),this.rosterGridData=t.docs,this.isFetchingGridData=!1,this.prevStartAt=this.firstInResponse,this.nextStartAfter=t.docs[t.docs.length-1],this.firstInResponse=t.docs[0],this.pageNumber=1,this.isDataAvailable=!!t.docs.length,!t.docs.length||t.docs.length<20?(this.disableNext=!0,this.disablePrev=!0):(this.disableNext=!1,this.disablePrev=!0)},t=>{console.log(t),this.isFetchingGridData=!1,this.connectionToast.openToast()})}nextPage(t){t.preventDefault(),this.isFetchingGridData=!0,this.rosterApi.getAccountRosterNext(this.sortParams,20,this.nextStartAfter).then(n=>{console.log(n),this.rosterGridData=n.docs,this.isFetchingGridData=!1,this.prevStartAt=this.firstInResponse,this.nextStartAfter=n.docs[n.docs.length-1],this.firstInResponse=n.docs[0],this.pageNumber++,n.docs.length<20&&(this.disableNext=!0,this.disablePrev=!1)},n=>{console.log(n),this.isFetchingGridData=!1,this.connectionToast.openToast()})}previousPage(t){t.preventDefault(),this.isFetchingGridData=!0,this.rosterApi.getAccountRosterPrev(this.sortParams,20,this.prevStartAt).then(n=>{console.log(n),this.rosterGridData=n.docs,this.isFetchingGridData=!1,n.docs.length||(this.isDataAvailable=!1),this.prevStartAt=this.firstInResponse,this.nextStartAfter=n.docs[n.docs.length-1],this.firstInResponse=n.docs[0],this.pageNumber--,1==this.pageNumber&&(this.disableNext=!1,this.disablePrev=!0)},n=>{console.log(n),this.isFetchingGridData=!1,this.connectionToast.openToast()})}sortTable(t,n){this.sortParams.field=t,this.sortParams.direction=n,this.getAccountRoster()}viewRoster(t){console.log(t),sessionStorage.setItem("restaurant_roster_id",t),this.router.navigateByUrl("/home/roster/view-roster")}onPrint(){console.log("lets start printing...")}}return o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275directiveInject(c.F0),e.\u0275\u0275directiveInject(p.P))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["app-all-roster"]],viewQuery:function(t,n){if(1&t&&(e.\u0275\u0275viewQuery(j,5,R),e.\u0275\u0275viewQuery(Y,5,d.Y)),2&t){let r;e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(n.newRoster=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(n.connectionToast=r.first)}},decls:46,vars:15,consts:[[3,"headings","showPrint","print"],[1,"container"],[1,"row"],[1,"col-md-7"],[1,"row","mb-3"],[1,"col-md-12"],[1,"btn","btn-secondary","page-add-btn",3,"click"],[1,"btn","btn-light","border","float-end","page-refresh-btn",3,"disabled","click"],[1,"bi","bi-arrow-clockwise"],[1,"overflow-auto"],[1,"table","table-bordered","table-sm","w-100","page-table"],[1,"bg-light"],["width","30%",1,"min-width-2"],["class","bi bi-filter float-end list-pointer",3,"click",4,"ngIf"],["class","bi bi-sort-down float-end list-pointer",3,"click",4,"ngIf"],["class","bi bi-sort-up float-end list-pointer",3,"click",4,"ngIf"],["width","70%",1,"min-width-4"],["class","table-pointer",3,"dblclick",4,"ngFor","ngForOf"],["class","text-center",4,"ngIf"],["colspan","2"],["aria-label","Page navigation",1,"nav-light","float-end"],[1,"pagination","pagination-sm","mb-0","justify-content-end"],[1,"page-item",3,"ngClass"],["href","#","aria-label","First",1,"page-link",3,"click"],[1,"bi","bi-caret-left-fill"],[1,"page-item"],["href","#","aria-label","Current",1,"page-link",3,"click"],["href","#","aria-label","Last",1,"page-link",3,"click"],[1,"bi","bi-caret-right-fill"],["connectionToastComponentReference",""],["newRosterComponentReference",""],[1,"bi","bi-filter","float-end","list-pointer",3,"click"],[1,"bi","bi-sort-down","float-end","list-pointer",3,"click"],[1,"bi","bi-sort-up","float-end","list-pointer",3,"click"],[1,"table-pointer",3,"dblclick"],[1,"text-center"],["role","status",1,"spinner-grow","m-4"],[1,"visually-hidden"],[1,"m-4"]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"app-module-topnav",0),e.\u0275\u0275listener("print",function(){return n.onPrint()}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(1,"div",1),e.\u0275\u0275elementStart(2,"div",2),e.\u0275\u0275elementStart(3,"div",3),e.\u0275\u0275elementStart(4,"div",4),e.\u0275\u0275elementStart(5,"div",5),e.\u0275\u0275elementStart(6,"button",6),e.\u0275\u0275listener("click",function(){return n.newRoster.openModal()}),e.\u0275\u0275text(7,"New Roster"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"button",7),e.\u0275\u0275listener("click",function(){return n.getAccountRoster()}),e.\u0275\u0275element(9,"i",8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"div",9),e.\u0275\u0275elementStart(11,"table",10),e.\u0275\u0275elementStart(12,"thead"),e.\u0275\u0275elementStart(13,"tr",11),e.\u0275\u0275elementStart(14,"th",12),e.\u0275\u0275text(15," Roster ID "),e.\u0275\u0275template(16,J,1,0,"i",13),e.\u0275\u0275template(17,q,1,0,"i",14),e.\u0275\u0275template(18,H,1,0,"i",15),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"th",16),e.\u0275\u0275text(20," Roster Name "),e.\u0275\u0275template(21,z,1,0,"i",13),e.\u0275\u0275template(22,$,1,0,"i",14),e.\u0275\u0275template(23,U,1,0,"i",15),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(24,"tbody"),e.\u0275\u0275template(25,W,5,2,"tr",17),e.\u0275\u0275template(26,K,5,0,"tr",18),e.\u0275\u0275template(27,X,4,0,"tr",18),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(28,"tfoot"),e.\u0275\u0275elementStart(29,"tr",11),e.\u0275\u0275elementStart(30,"td",19),e.\u0275\u0275elementStart(31,"nav",20),e.\u0275\u0275elementStart(32,"ul",21),e.\u0275\u0275elementStart(33,"li",22),e.\u0275\u0275elementStart(34,"a",23),e.\u0275\u0275listener("click",function(i){return n.previousPage(i)}),e.\u0275\u0275element(35,"i",24),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(36,"li",25),e.\u0275\u0275elementStart(37,"a",26),e.\u0275\u0275listener("click",function(i){return i.preventDefault()}),e.\u0275\u0275text(38),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(39,"li",22),e.\u0275\u0275elementStart(40,"a",27),e.\u0275\u0275listener("click",function(i){return n.nextPage(i)}),e.\u0275\u0275element(41,"i",28),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(42,"app-connection-toast",null,29),e.\u0275\u0275element(44,"app-new-roster",null,30)),2&t&&(e.\u0275\u0275property("headings",n.navHeading)("showPrint",!0),e.\u0275\u0275advance(8),e.\u0275\u0275property("disabled",n.isFetchingGridData),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf","roster_code"!=n.sortParams.field),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","roster_code"==n.sortParams.field&&"desc"==n.sortParams.direction),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","roster_code"==n.sortParams.field&&"asc"==n.sortParams.direction),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf","roster_name"!=n.sortParams.field),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","roster_name"==n.sortParams.field&&"desc"==n.sortParams.direction),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","roster_name"==n.sortParams.field&&"asc"==n.sortParams.direction),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",n.rosterGridData),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.isFetchingGridData),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!n.isDataAvailable&&!n.isFetchingGridData),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngClass",n.disablePrev?"disabled":""),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate1(" ",n.pageNumber," "),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",n.disableNext?"disabled":""))},directives:[S.H,s.O5,s.sg,s.mk,d.Y,R],styles:[""]}),o})();const ee=["addButtonElementReference"],te=["dismissButtonElementReference"];let F=(()=>{class o{constructor(){this.saveShiftEvent=new e.EventEmitter,this.shiftForm=new a.cw({}),this.isSaving=!1}ngOnInit(){this.initShiftForm()}initShiftForm(){this.shiftForm=new a.cw({shiftName:new a.NI(""),startTime:new a.NI(""),endTime:new a.NI("")})}openModal(){this.addButton.nativeElement.click()}saveShift(){let t={created_at:(0,y.Bt)(),roster:sessionStorage.getItem("restaurant_roster_id"),shift_name:this.shiftForm.controls.shiftName.value,start_time:this.shiftForm.controls.startTime.value,end_time:this.shiftForm.controls.endTime.value};this.saveShiftEvent.emit(t)}resetForm(){this.shiftForm.controls.shiftName.setValue(""),this.shiftForm.controls.startTime.setValue(""),this.shiftForm.controls.endTime.setValue("")}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["app-add-shift"]],viewQuery:function(t,n){if(1&t&&(e.\u0275\u0275viewQuery(ee,5,e.ElementRef),e.\u0275\u0275viewQuery(te,5,e.ElementRef)),2&t){let r;e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(n.addButton=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(n.dismissButton=r.first)}},outputs:{saveShiftEvent:"saveShiftEvent"},decls:36,vars:3,consts:[["data-bs-toggle","modal","data-bs-target","#addShiftModal",3,"hidden"],["addButtonElementReference",""],["id","addShiftModal","tabindex","-1","aria-labelledby","addShiftModalLabel","aria-hidden","true",1,"modal","fade","form-modal"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header","bg-light"],["id","addShiftModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],["dismissButtonElementReference",""],[1,"page-form",3,"formGroup","ngSubmit"],[1,"modal-body"],[1,"row","mb-1"],[1,"col-md-4"],[1,"float-md-end","float-sm-start","mt-1"],[1,"col-md-8"],["formControlName","shiftName",1,"form-control","form-control-sm","w-100"],["type","time","formControlName","startTime",1,"form-control","form-control-sm","w-100"],["type","time","formControlName","endTime",1,"form-control","form-control-sm","w-100"],[1,"modal-footer"],["type","submit",1,"btn","btn-sm","btn-secondary","modal-form-btn",3,"disabled"],["type","button","data-bs-dismiss","modal",1,"btn","btn-sm","btn-secondary","modal-form-btn"]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"button",0,1),e.\u0275\u0275text(2," Launch demo modal\n"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",2),e.\u0275\u0275elementStart(4,"div",3),e.\u0275\u0275elementStart(5,"div",4),e.\u0275\u0275elementStart(6,"div",5),e.\u0275\u0275elementStart(7,"span",6),e.\u0275\u0275text(8,"Add Shift"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(9,"button",7,8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"form",9),e.\u0275\u0275listener("ngSubmit",function(){return n.saveShift()}),e.\u0275\u0275elementStart(12,"div",10),e.\u0275\u0275elementStart(13,"div",11),e.\u0275\u0275elementStart(14,"div",12),e.\u0275\u0275elementStart(15,"label",13),e.\u0275\u0275text(16,"Shift Name :"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"div",14),e.\u0275\u0275element(18,"input",15),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"div",11),e.\u0275\u0275elementStart(20,"div",12),e.\u0275\u0275elementStart(21,"label",13),e.\u0275\u0275text(22,"Start Time :"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(23,"div",14),e.\u0275\u0275element(24,"input",16),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(25,"div",11),e.\u0275\u0275elementStart(26,"div",12),e.\u0275\u0275elementStart(27,"label",13),e.\u0275\u0275text(28,"End Time :"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(29,"div",14),e.\u0275\u0275element(30,"input",17),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(31,"div",18),e.\u0275\u0275elementStart(32,"button",19),e.\u0275\u0275text(33,"Save"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(34,"button",20),e.\u0275\u0275text(35,"Cancel"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275property("hidden",!0),e.\u0275\u0275advance(11),e.\u0275\u0275property("formGroup",n.shiftForm),e.\u0275\u0275advance(21),e.\u0275\u0275property("disabled",n.isSaving))},directives:[a._Y,a.JL,a.sg,a.Fj,a.JJ,a.u],styles:[""]}),o})();const ne=["editButtonElementReference"],oe=["dismissButtonElementReference"];let B=(()=>{class o{constructor(){this.saveShiftEvent=new e.EventEmitter,this.shiftForm=new a.cw({}),this.isSaving=!1}ngOnInit(){this.initShiftForm()}initShiftForm(){this.shiftForm=new a.cw({shiftName:new a.NI(""),startTime:new a.NI(""),endTime:new a.NI("")})}openModal(t){this.shiftData=t,this.shiftForm.controls.shiftName.setValue(t.data().shift_name),this.shiftForm.controls.startTime.setValue(t.data().start_time),this.shiftForm.controls.endTime.setValue(t.data().end_time),this.editButton.nativeElement.click()}saveShift(){this.saveShiftEvent.emit({id:this.shiftData.id,data:{shift_name:this.shiftForm.controls.shiftName.value,start_time:this.shiftForm.controls.startTime.value,end_time:this.shiftForm.controls.endTime.value}})}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["app-edit-shift"]],viewQuery:function(t,n){if(1&t&&(e.\u0275\u0275viewQuery(ne,5,e.ElementRef),e.\u0275\u0275viewQuery(oe,5,e.ElementRef)),2&t){let r;e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(n.editButton=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(n.dismissButton=r.first)}},outputs:{saveShiftEvent:"saveShiftEvent"},decls:36,vars:3,consts:[["data-bs-toggle","modal","data-bs-target","#editShiftModal",3,"hidden"],["editButtonElementReference",""],["id","editShiftModal","tabindex","-1","aria-labelledby","editShiftModalLabel","aria-hidden","true",1,"modal","fade","form-modal"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header","bg-light"],["id","editShiftModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],["dismissButtonElementReference",""],[1,"page-form",3,"formGroup","ngSubmit"],[1,"modal-body"],[1,"row","mb-1"],[1,"col-md-4"],[1,"float-md-end","float-sm-start","mt-1"],[1,"col-md-8"],["formControlName","shiftName",1,"form-control","form-control-sm","w-100"],["type","time","formControlName","startTime",1,"form-control","form-control-sm","w-100"],["type","time","formControlName","endTime",1,"form-control","form-control-sm","w-100"],[1,"modal-footer"],["type","submit",1,"btn","btn-sm","btn-secondary","modal-form-btn",3,"disabled"],["type","button","data-bs-dismiss","modal",1,"btn","btn-sm","btn-secondary","modal-form-btn"]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"button",0,1),e.\u0275\u0275text(2," Launch demo modal\n"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",2),e.\u0275\u0275elementStart(4,"div",3),e.\u0275\u0275elementStart(5,"div",4),e.\u0275\u0275elementStart(6,"div",5),e.\u0275\u0275elementStart(7,"span",6),e.\u0275\u0275text(8,"Edit Shift"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(9,"button",7,8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"form",9),e.\u0275\u0275listener("ngSubmit",function(){return n.saveShift()}),e.\u0275\u0275elementStart(12,"div",10),e.\u0275\u0275elementStart(13,"div",11),e.\u0275\u0275elementStart(14,"div",12),e.\u0275\u0275elementStart(15,"label",13),e.\u0275\u0275text(16,"Shift Name :"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"div",14),e.\u0275\u0275element(18,"input",15),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"div",11),e.\u0275\u0275elementStart(20,"div",12),e.\u0275\u0275elementStart(21,"label",13),e.\u0275\u0275text(22,"Start Time :"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(23,"div",14),e.\u0275\u0275element(24,"input",16),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(25,"div",11),e.\u0275\u0275elementStart(26,"div",12),e.\u0275\u0275elementStart(27,"label",13),e.\u0275\u0275text(28,"End Time :"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(29,"div",14),e.\u0275\u0275element(30,"input",17),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(31,"div",18),e.\u0275\u0275elementStart(32,"button",19),e.\u0275\u0275text(33,"Save"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(34,"button",20),e.\u0275\u0275text(35,"Cancel"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275property("hidden",!0),e.\u0275\u0275advance(11),e.\u0275\u0275property("formGroup",n.shiftForm),e.\u0275\u0275advance(21),e.\u0275\u0275property("disabled",n.isSaving))},directives:[a._Y,a.JL,a.sg,a.Fj,a.JJ,a.u],styles:[""]}),o})();var v=m(8622);const re=["addShiftComponentReference"],le=["editShiftComponentReference"],ae=["connectionToastComponentReference"],se=["deleteModalComponentReference"];function ie(o,l){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"tr"),e.\u0275\u0275elementStart(1,"td"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"td"),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"td"),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"td",18),e.\u0275\u0275elementStart(8,"button",19),e.\u0275\u0275listener("click",function(){const i=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275nextContext().openEditShift(i)}),e.\u0275\u0275element(9,"i",20),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"button",19),e.\u0275\u0275listener("click",function(){const i=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275nextContext().confirmDelete(i.id)}),e.\u0275\u0275element(11,"i",21),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()}if(2&o){const t=l.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null==t?null:t.data().shift_name),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null==t?null:t.data().start_time),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null==t?null:t.data().end_time)}}function me(o,l){1&o&&(e.\u0275\u0275elementStart(0,"tr",22),e.\u0275\u0275elementStart(1,"td",23),e.\u0275\u0275elementStart(2,"div",24),e.\u0275\u0275elementStart(3,"span",25),e.\u0275\u0275text(4,"Loading..."),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd())}let T=(()=>{class o{constructor(t){this.rosterApi=t,this.shiftsGridData=[],this.isFetchingGridData=!1}ngOnInit(){this.getRosterShift()}getRosterShift(){this.isFetchingGridData=!0,this.rosterApi.getRosterShift().then(t=>{console.log(t),this.shiftsGridData=t.docs,this.isFetchingGridData=!1},t=>{console.log(t),this.isFetchingGridData=!1,this.connectionToast.openToast()})}createShift(t){console.log(t),this.addShift.isSaving=!0,this.rosterApi.createShift(t).then(n=>{console.log(n),n.id&&(this.getRosterShift(),this.addShift.isSaving=!1,this.addShift.dismissButton.nativeElement.click(),this.addShift.resetForm())},n=>{console.log(n),this.addShift.isSaving=!1,this.connectionToast.openToast()})}updateShift(t){console.log(t),this.editShift.isSaving=!0,this.rosterApi.updateShift(t.id,t.shift).then(n=>{console.log(n),this.getRosterShift(),this.editShift.isSaving=!1,this.editShift.dismissButton.nativeElement.click()},n=>{console.log(n),this.editShift.isSaving=!1,this.connectionToast.openToast()})}deleteShift(){console.log(this.deleteId),this.rosterApi.deleteShift(this.deleteId).then(t=>{console.log(t),this.getRosterShift()},t=>{console.log(t),this.connectionToast.openToast()})}openEditShift(t){console.log(t),this.editShift.openModal(t)}confirmDelete(t){this.deleteId=t,this.deleteModal.openModal()}}return o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275directiveInject(p.P))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["app-shifts"]],viewQuery:function(t,n){if(1&t&&(e.\u0275\u0275viewQuery(re,5,F),e.\u0275\u0275viewQuery(le,5,B),e.\u0275\u0275viewQuery(ae,5,d.Y),e.\u0275\u0275viewQuery(se,5,v.z)),2&t){let r;e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(n.addShift=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(n.editShift=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(n.connectionToast=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(n.deleteModal=r.first)}},decls:26,vars:2,consts:[[1,"row"],[1,"col-md-12"],[1,"overflow-auto"],[1,"table","table-bordered","table-sm","w-100","page-table"],[1,"bg-light"],["width","45%",1,"min-width-3"],["width","20%",1,"min-width-2"],["width","15%",1,"p-0","min-width-2"],[1,"btn","btn-secondary","btn-sm","w-100",3,"click"],[1,"bi","bi-plus"],[4,"ngFor","ngForOf"],["class","text-center",4,"ngIf"],[3,"saveShiftEvent"],["addShiftComponentReference",""],["editShiftComponentReference",""],["connectionToastComponentReference",""],[3,"confirmEvent"],["deleteModalComponentReference",""],[1,"p-0"],[1,"btn","btn-sm","border","w-50",3,"click"],[1,"bi","bi-pen"],[1,"bi","bi-trash"],[1,"text-center"],["colspan","4"],["role","status",1,"spinner-grow","spinner-grow-sm","m-2"],[1,"visually-hidden"]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275elementStart(1,"div",1),e.\u0275\u0275elementStart(2,"div",2),e.\u0275\u0275elementStart(3,"table",3),e.\u0275\u0275elementStart(4,"thead"),e.\u0275\u0275elementStart(5,"tr",4),e.\u0275\u0275elementStart(6,"th",5),e.\u0275\u0275text(7,"Shift Name"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"th",6),e.\u0275\u0275text(9,"Start Time"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"th",6),e.\u0275\u0275text(11,"End Time"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"th",7),e.\u0275\u0275elementStart(13,"button",8),e.\u0275\u0275listener("click",function(){return n.addShift.openModal()}),e.\u0275\u0275element(14,"i",9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"tbody"),e.\u0275\u0275template(16,ie,12,3,"tr",10),e.\u0275\u0275template(17,me,5,0,"tr",11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"app-add-shift",12,13),e.\u0275\u0275listener("saveShiftEvent",function(i){return n.createShift(i)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"app-edit-shift",12,14),e.\u0275\u0275listener("saveShiftEvent",function(i){return n.updateShift(i)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(22,"app-connection-toast",null,15),e.\u0275\u0275elementStart(24,"app-delete-modal",16,17),e.\u0275\u0275listener("confirmEvent",function(){return n.deleteShift()}),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275advance(16),e.\u0275\u0275property("ngForOf",n.shiftsGridData),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.isFetchingGridData))},directives:[s.sg,s.O5,F,B,d.Y,v.z],styles:[""]}),o})();const de=["connectionToastComponentReference"];function ce(o,l){if(1&o&&(e.\u0275\u0275elementStart(0,"th",13),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const t=l.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.toDate().toISOString().slice(0,10)," ")}}let P=(()=>{class o{constructor(t,n){this.router=t,this.rosterApi=n,this.dataSource=[],this.sheetColumns=[],this.sheetDataFields=[],this.sheetEditDropDownSource=[],this.isFetchingSheetData=!1,this.isSheetSaving=!1,this.sheetDays=[],this.sheetShifts=[]}ngOnInit(){this.getSheet(),this.getRosterShift(),this.getRosterBatch()}getSheet(){this.rosterApi.getSheet().then(t=>{console.log(t),this.sheetDays=t.data().days},t=>{console.log(t),this.connectionToast.openToast()})}getRosterShift(){this.rosterApi.getRosterShift().then(t=>{console.log(t),this.rosterShiftsData=t},t=>{console.log(t),this.connectionToast.openToast()})}getRosterBatch(){this.rosterApi.getRosterBatch().then(t=>{console.log(t),this.rosterBatchesData=t.docs},t=>{console.log(t),this.connectionToast.openToast()})}enumerateDaysBetweenDates(t,n){for(var r=g()(t).startOf("day"),i=g()(n).startOf("day");r.add(1,"days").diff(i)<0;)console.log(r.toDate()),this.sheetDays.push(r.clone().toDate())}setRosterColumns(t){this.sheetDataFields=[],this.sheetDataFields.push("id: string"),this.sheetDataFields.push("shift_id: string"),this.sheetDataFields.push("shift_name: string"),this.sheetColumns=[],this.sheetColumns.push({label:"Shift Name",dataField:"shift_name",width:"18%"}),t.forEach(n=>{this.sheetDataFields.push({name:n.id,type:"string"}),this.sheetColumns.push({label:n.day,dataField:n.id,editable:"true",width:100})})}populateSheetShifts(t){t.forEach(n=>{this.dataSource.push({id:n.id,shift_id:n.id,shift_name:n.shift_name})}),console.log(this.dataSource)}}return o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275directiveInject(c.F0),e.\u0275\u0275directiveInject(p.P))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["app-roster-sheet"]],viewQuery:function(t,n){if(1&t&&e.\u0275\u0275viewQuery(de,5,d.Y),2&t){let r;e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(n.connectionToast=r.first)}},decls:20,vars:2,consts:[[1,"row","mb-2"],[1,"col-md-12"],["routerLink","/home/roster/manage-batches",1,"btn","btn-secondary","float-end","nr-standard-font"],[1,"bi","bi-arrow-left-right","me-2"],[1,"row"],[1,"row","mb-3"],[1,"btn","btn-light","border","float-end","page-refresh-btn",3,"disabled"],[1,"bi","bi-arrow-clockwise"],[1,"overflow-auto"],[1,"table","table-bordered","table-sm","w-100","page-table"],["width","70",1,"min-width-3"],["width","50","class","min-width-2",4,"ngFor","ngForOf"],["connectionToastComponentReference",""],["width","50",1,"min-width-2"]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275elementStart(1,"div",1),e.\u0275\u0275elementStart(2,"button",2),e.\u0275\u0275element(3,"i",3),e.\u0275\u0275text(4," Manage Batches "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"div",4),e.\u0275\u0275elementStart(6,"div",1),e.\u0275\u0275elementStart(7,"div",5),e.\u0275\u0275elementStart(8,"div",1),e.\u0275\u0275elementStart(9,"button",6),e.\u0275\u0275element(10,"i",7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"div",8),e.\u0275\u0275elementStart(12,"table",9),e.\u0275\u0275elementStart(13,"thead"),e.\u0275\u0275elementStart(14,"th",10),e.\u0275\u0275text(15," Shifts "),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(16,ce,2,1,"th",11),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(17,"tbody"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(18,"app-connection-toast",null,12)),2&t&&(e.\u0275\u0275advance(9),e.\u0275\u0275property("disabled",n.isFetchingSheetData),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngForOf",n.sheetDays))},directives:[c.rH,s.sg,d.Y],styles:[""]}),o})();const pe=["connectionToastComponentReference"],he=["deleteModalComponentReference"],fe=["rosterSheetComponentReference"],ue=["shiftsComponentReference"];function ve(o,l){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",20),e.\u0275\u0275elementStart(1,"div",4),e.\u0275\u0275elementStart(2,"button",21),e.\u0275\u0275text(3,"Cancel"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"button",22),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().confirmDelete()}),e.\u0275\u0275text(5,"Delete"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"button",23),e.\u0275\u0275text(7,"Save"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()}if(2&o){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(4),e.\u0275\u0275property("disabled",t.isRosterDeleting),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",t.isRosterSaving)}}function be(o,l){1&o&&(e.\u0275\u0275elementStart(0,"div",20),e.\u0275\u0275elementStart(1,"div",4),e.\u0275\u0275elementStart(2,"button",24),e.\u0275\u0275elementStart(3,"div",25),e.\u0275\u0275elementStart(4,"span",26),e.\u0275\u0275text(5,"Loading..."),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd())}let _e=(()=>{class o{constructor(t,n){this.router=t,this.rosterApi=n,this.navHeading=[{text:"All Roster",url:"/home/roster/all-roster"},{text:"View Roster",url:"/home/roster/view-roster"}],this.rosterForm=new a.cw({}),this.isRosterLoading=!1,this.isRosterSaving=!1,this.isRosterDeleting=!1}ngOnInit(){this.initRosterForm(),this.getRoster()}initRosterForm(){this.rosterForm=new a.cw({rosterCode:new a.NI(""),rosterName:new a.NI(""),fromDate:new a.NI(""),toDate:new a.NI("")})}getRoster(){this.isRosterLoading=!0,this.rosterApi.getRoster().then(t=>{console.log(t),this.rosterFormData=t,this.rosterForm.controls.rosterCode.setValue(this.rosterFormData.data().roster_code),this.rosterForm.controls.rosterName.setValue(this.rosterFormData.data().roster_name),this.rosterForm.controls.fromDate.setValue(this.rosterFormData.data().from_date),this.rosterForm.controls.toDate.setValue(this.rosterFormData.data().to_date),this.isRosterLoading=!1},t=>{console.log(t),this.isRosterLoading=!1,this.connectionToast.openToast()})}updateRoster(){let t={roster_name:this.rosterForm.controls.rosterName.value,roster_code:this.rosterForm.controls.rosterCode.value,from_date:this.rosterForm.controls.fromDate.value,to_date:this.rosterForm.controls.toDate.value};this.isRosterSaving=!0,this.rosterApi.updateRoster(t).then(n=>{console.log(n),this.isRosterSaving=!1},n=>{console.log(n),this.isRosterSaving=!1,this.connectionToast.openToast()}),console.log(t)}confirmDelete(){this.deleteModal.openModal()}deleteOrder(){this.isRosterDeleting=!0,this.rosterApi.deleteRoster().then(t=>{console.log(t),this.isRosterDeleting=!1,this.router.navigateByUrl("/home/roster/all-roster")},t=>{console.log(t),this.isRosterDeleting=!1,this.connectionToast.openToast()})}onPrint(){console.log("lets start printing...")}}return o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275directiveInject(c.F0),e.\u0275\u0275directiveInject(p.P))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["app-view-roster"]],viewQuery:function(t,n){if(1&t&&(e.\u0275\u0275viewQuery(pe,5,d.Y),e.\u0275\u0275viewQuery(he,5,v.z),e.\u0275\u0275viewQuery(fe,5,P),e.\u0275\u0275viewQuery(ue,5,T)),2&t){let r;e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(n.connectionToast=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(n.deleteModal=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(n.rosterSheet=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(n.shifts=r.first)}},decls:43,vars:4,consts:[[3,"headings"],[1,"container"],[1,"page-form",3,"formGroup","ngSubmit"],[1,"row","page-form"],[1,"col-md-12"],[1,"col-md-6"],[1,"row","mb-1"],[1,"col-md-4"],[1,"float-md-end","float-sm-start","mt-1"],[1,"col-md-8"],["formControlName","rosterCode",1,"form-control","form-control-sm","w-100"],["formControlName","rosterName",1,"form-control","form-control-sm","w-100"],["type","date","formControlName","fromDate",1,"form-control","form-control-sm","w-100"],["type","date","formControlName","toDate",1,"form-control","form-control-sm","w-100"],["class","row mt-3 page-form",4,"ngIf"],["shiftsComponentReference",""],[1,"top-divider"],[1,"bottom-divider"],["rosterSheetComponentReference",""],["connectionToastComponentReference",""],[1,"row","mt-3","page-form"],["type","button","routerLink","/home/roster/all-roster",1,"btn","btn-secondary","btn-sm","float-end","ms-1","page-form-btn"],["type","button",1,"btn","btn-secondary","btn-sm","float-end","ms-1","page-form-btn",3,"disabled","click"],["type","submit",1,"btn","btn-secondary","btn-sm","float-end","ms-1","page-form-btn",3,"disabled"],["type","button",1,"btn","btn-sm","float-end","ms-1","btn-light","page-form-btn"],["role","status",1,"spinner-grow","spinner-grow-sm"],[1,"visually-hidden"]],template:function(t,n){1&t&&(e.\u0275\u0275element(0,"app-module-topnav",0),e.\u0275\u0275elementStart(1,"div",1),e.\u0275\u0275elementStart(2,"form",2),e.\u0275\u0275listener("ngSubmit",function(){return n.updateRoster()}),e.\u0275\u0275elementStart(3,"div",3),e.\u0275\u0275elementStart(4,"div",4),e.\u0275\u0275elementStart(5,"h4"),e.\u0275\u0275text(6,"Roster Details"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"div",5),e.\u0275\u0275elementStart(8,"div",6),e.\u0275\u0275elementStart(9,"div",7),e.\u0275\u0275elementStart(10,"label",8),e.\u0275\u0275text(11,"Roster ID :"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"div",9),e.\u0275\u0275element(13,"input",10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"div",6),e.\u0275\u0275elementStart(15,"div",7),e.\u0275\u0275elementStart(16,"label",8),e.\u0275\u0275text(17,"Roster Name :"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"div",9),e.\u0275\u0275element(19,"input",11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"div",6),e.\u0275\u0275elementStart(21,"div",7),e.\u0275\u0275elementStart(22,"label",8),e.\u0275\u0275text(23,"Date From :"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(24,"div",9),e.\u0275\u0275element(25,"input",12),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(26,"div",6),e.\u0275\u0275elementStart(27,"div",7),e.\u0275\u0275elementStart(28,"label",8),e.\u0275\u0275text(29,"Date To :"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(30,"div",9),e.\u0275\u0275element(31,"input",13),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(32,ve,8,2,"div",14),e.\u0275\u0275template(33,be,6,0,"div",14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(34,"div",5),e.\u0275\u0275element(35,"app-shifts",null,15),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(37,"hr",16),e.\u0275\u0275element(38,"hr",17),e.\u0275\u0275element(39,"app-roster-sheet",null,18),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(41,"app-connection-toast",null,19)),2&t&&(e.\u0275\u0275property("headings",n.navHeading),e.\u0275\u0275advance(2),e.\u0275\u0275property("formGroup",n.rosterForm),e.\u0275\u0275advance(30),e.\u0275\u0275property("ngIf",!n.isRosterLoading),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.isRosterLoading))},directives:[S.H,a._Y,a.JL,a.sg,a.Fj,a.JJ,a.u,s.O5,T,P,d.Y,c.rH],styles:[""]}),o})();var x=m(1592);const Se=["connectionToastComponentReference"],ge=["selectStaffComponentReference"];function Ee(o,l){if(1&o&&(e.\u0275\u0275elementStart(0,"option"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const t=l.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.data().batch_symbol)}}let E=(()=>{class o{constructor(t){this.rosterApi=t,this.personnelForm=new a.cw({}),this.batchSource=[]}ngOnInit(){this.initPersonnelForm()}initPersonnelForm(){this.personnelForm=new a.cw({personnelCode:new a.NI({value:"",disabled:!0}),personnelName:new a.NI({value:"",disabled:!0}),batchSymbol:new a.NI("")})}getBatches(t){this.rosterApi.getRosterBatch().then(n=>{console.log(n),this.batchSource=n.docs,this.personnelForm.controls.batchSymbol.setValue(t)},n=>{console.log(n),this.connectionToast.openToast()})}onStaffSelected(t){console.log(t),this.selectedStaffId=t.id,this.personnelForm.controls.personnelCode.setValue(t.data().staff_code),this.personnelForm.controls.personnelName.setValue(t.data().first_name+" "+t.data().first_name),this.personnelForm.controls.batchSymbol.setValue(t.data().batch_symbol)}openStaffWindow(){console.log("You are opening select staff window"),this.selectStaff.openModal()}}return o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275directiveInject(p.P))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["app-personnel-form"]],viewQuery:function(t,n){if(1&t&&(e.\u0275\u0275viewQuery(Se,5,d.Y),e.\u0275\u0275viewQuery(ge,5,x.c)),2&t){let r;e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(n.connectionToast=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(n.selectStaff=r.first)}},decls:28,vars:2,consts:[[1,"page-form",3,"formGroup"],[1,"row","mb-1"],[1,"col-md-4"],[1,"float-md-end","float-sm-start","mt-1"],[1,"col-md-8"],[1,"input-group","input-group-sm","w-100"],["formControlName","personnelCode",1,"form-control"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"bi","bi-three-dots"],["formControlName","personnelName",1,"form-control"],["formControlName","batchSymbol",1,"form-control","form-control-sm","w-100"],[4,"ngFor","ngForOf"],[3,"rowSelected"],["selectStaffComponentReference",""]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"form",0),e.\u0275\u0275elementStart(1,"div",1),e.\u0275\u0275elementStart(2,"div",2),e.\u0275\u0275elementStart(3,"label",3),e.\u0275\u0275text(4,"Personnel Code :"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"div",4),e.\u0275\u0275elementStart(6,"div",5),e.\u0275\u0275element(7,"input",6),e.\u0275\u0275elementStart(8,"button",7),e.\u0275\u0275listener("click",function(){return n.openStaffWindow()}),e.\u0275\u0275element(9,"i",8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"div",1),e.\u0275\u0275elementStart(11,"div",2),e.\u0275\u0275elementStart(12,"label",3),e.\u0275\u0275text(13,"Personnel Name :"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"div",4),e.\u0275\u0275elementStart(15,"div",5),e.\u0275\u0275element(16,"input",9),e.\u0275\u0275elementStart(17,"button",7),e.\u0275\u0275listener("click",function(){return n.openStaffWindow()}),e.\u0275\u0275element(18,"i",8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"div",1),e.\u0275\u0275elementStart(20,"div",2),e.\u0275\u0275elementStart(21,"label",3),e.\u0275\u0275text(22,"Batch :"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(23,"div",4),e.\u0275\u0275elementStart(24,"select",10),e.\u0275\u0275template(25,Ee,2,1,"option",11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(26,"app-select-staff",12,13),e.\u0275\u0275listener("rowSelected",function(i){return n.onStaffSelected(i)}),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275property("formGroup",n.personnelForm),e.\u0275\u0275advance(25),e.\u0275\u0275property("ngForOf",n.batchSource))},directives:[a._Y,a.JL,a.sg,a.Fj,a.JJ,a.u,a.EJ,s.sg,x.c,a.YN,a.Kr],styles:[""]}),o})();const ye=["addButtonElementReference"],Ce=["dismssButtonElementReference"],we=["personnelFormComponentReference"];let D=(()=>{class o{constructor(){this.savePersonnelEvent=new e.EventEmitter,this.isSaving=!1}ngOnInit(){}openModal(){this.addButton.nativeElement.click(),this.personnelForm.getBatches("")}savePersonnel(){let t={roster:sessionStorage.getItem("restaurant_roster_id"),batch_symbol:this.personnelForm.personnelForm.controls.symbol.value,staff:{id:this.personnelForm.selectedStaffId,staff_code:this.personnelForm.personnelForm.controls.personnelCode.value,staff_name:this.personnelForm.personnelForm.controls.personnelName.value}};this.savePersonnelEvent.emit(t)}resetForm(){this.personnelForm.personnelForm.controls.personnelCode.setValue(""),this.personnelForm.personnelForm.controls.personnelName.setValue(""),this.personnelForm.personnelForm.controls.batch.setValue("")}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["app-add-personnel"]],viewQuery:function(t,n){if(1&t&&(e.\u0275\u0275viewQuery(ye,5,e.ElementRef),e.\u0275\u0275viewQuery(Ce,5,e.ElementRef),e.\u0275\u0275viewQuery(we,5,E)),2&t){let r;e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(n.addButton=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(n.dismissButton=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(n.personnelForm=r.first)}},outputs:{savePersonnelEvent:"savePersonnelEvent"},decls:19,vars:2,consts:[["data-bs-toggle","modal","data-bs-target","#addPersonnelModal",3,"hidden"],["addButtonElementReference",""],["id","addPersonnelModal","tabindex","-1","aria-labelledby","addPersonnelModalLabel","aria-hidden","true",1,"modal","fade","form-modal"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header","bg-light"],["id","addPersonnelModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],["dismissButtonElementReference",""],[1,"modal-body"],["personnelFormComponentReference",""],[1,"modal-footer"],["type","submit",1,"btn","btn-sm","btn-secondary","modal-form-btn",3,"disabled","click"],["type","button","data-bs-dismiss","modal",1,"btn","btn-sm","btn-secondary","modal-form-btn"]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"button",0,1),e.\u0275\u0275text(2," Launch demo modal\n"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",2),e.\u0275\u0275elementStart(4,"div",3),e.\u0275\u0275elementStart(5,"div",4),e.\u0275\u0275elementStart(6,"div",5),e.\u0275\u0275elementStart(7,"span",6),e.\u0275\u0275text(8,"Add Personnel"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(9,"button",7,8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"div",9),e.\u0275\u0275element(12,"app-personnel-form",null,10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"div",11),e.\u0275\u0275elementStart(15,"button",12),e.\u0275\u0275listener("click",function(){return n.savePersonnel()}),e.\u0275\u0275text(16,"Save"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"button",13),e.\u0275\u0275text(18,"Cancel"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275property("hidden",!0),e.\u0275\u0275advance(15),e.\u0275\u0275property("disabled",n.isSaving))},directives:[E],styles:[""]}),o})();const Re=["editButtonElementReference"],Fe=["dismssButtonElementReference"],Be=["personnelFormComponentReference"];let I=(()=>{class o{constructor(){this.savePersonnelEvent=new e.EventEmitter,this.deletePersonnelEvent=new e.EventEmitter,this.isSaving=!1}ngOnInit(){}openModal(t){this.personnelData=t,this.personnelForm.personnelForm.controls.personnelCode.setValue(t.data().personnel_code),this.personnelForm.personnelForm.controls.personnelName.setValue(t.data().personnel_name),this.personnelForm.getBatches(t.data().batch_symbol),this.editButton.nativeElement.click()}savePersonnel(){this.savePersonnelEvent.emit({id:this.personnelData.id,data:{batch_symbol:this.personnelForm.personnelForm.controls.symbol.value,staff:{id:this.personnelForm.selectedStaffId,staff_code:this.personnelForm.personnelForm.controls.personnelCode.value,staff_name:this.personnelForm.personnelForm.controls.personnelName.value}}})}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["app-edit-personnel"]],viewQuery:function(t,n){if(1&t&&(e.\u0275\u0275viewQuery(Re,5,e.ElementRef),e.\u0275\u0275viewQuery(Fe,5,e.ElementRef),e.\u0275\u0275viewQuery(Be,5,E)),2&t){let r;e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(n.editButton=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(n.dismissButton=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(n.personnelForm=r.first)}},outputs:{savePersonnelEvent:"savePersonnelEvent",deletePersonnelEvent:"deletePersonnelEvent"},decls:18,vars:2,consts:[["data-bs-toggle","modal","data-bs-target","#addPersonnelModal",3,"hidden"],["buttonElementReference",""],["id","addPersonnelModal","tabindex","-1","aria-labelledby","addPersonnelModalLabel","aria-hidden","true",1,"modal","fade","form-modal"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header","bg-light"],["id","addPersonnelModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],["personnelFormComponentReference",""],[1,"modal-footer"],["type","submit",1,"btn","btn-sm","btn-secondary","modal-form-btn",3,"disabled","click"],["type","button","data-bs-dismiss","modal",1,"btn","btn-sm","btn-secondary","modal-form-btn"]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"button",0,1),e.\u0275\u0275text(2," Launch demo modal\n"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",2),e.\u0275\u0275elementStart(4,"div",3),e.\u0275\u0275elementStart(5,"div",4),e.\u0275\u0275elementStart(6,"div",5),e.\u0275\u0275elementStart(7,"span",6),e.\u0275\u0275text(8,"Edit Personnel"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(9,"button",7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"div",8),e.\u0275\u0275element(11,"app-personnel-form",null,9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"div",10),e.\u0275\u0275elementStart(14,"button",11),e.\u0275\u0275listener("click",function(){return n.savePersonnel()}),e.\u0275\u0275text(15,"Save"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"button",12),e.\u0275\u0275text(17,"Cancel"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275property("hidden",!0),e.\u0275\u0275advance(14),e.\u0275\u0275property("disabled",n.isSaving))},directives:[E],styles:[""]}),o})();const Te=["addPersonnelComponentReference"],Pe=["editPersonnelComponentReference"],xe=["connectionToastComponentReference"],De=["deleteModalComponentReference"];function Ie(o,l){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"tr"),e.\u0275\u0275elementStart(1,"td"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"td"),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"td"),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"td",19),e.\u0275\u0275elementStart(8,"button",20),e.\u0275\u0275listener("click",function(){const i=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275nextContext().openEditPersonnel(i)}),e.\u0275\u0275element(9,"i",21),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"button",20),e.\u0275\u0275listener("click",function(){const i=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275nextContext().confirmDelete(i.id)}),e.\u0275\u0275element(11,"i",22),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()}if(2&o){const t=l.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null==t?null:t.personnel_code),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null==t?null:t.personnel_name),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null==t?null:t.batch_sybol)}}function Me(o,l){1&o&&(e.\u0275\u0275elementStart(0,"tr",23),e.\u0275\u0275elementStart(1,"td",24),e.\u0275\u0275elementStart(2,"div",25),e.\u0275\u0275elementStart(3,"span",26),e.\u0275\u0275text(4,"Loading..."),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd())}let M=(()=>{class o{constructor(t,n){this.router=t,this.rosterApi=n,this.personnelGridData=[],this.isFetchingGridData=!1,this.deleteId=""}ngOnInit(){this.getRosterPersonnel()}getRosterPersonnel(){this.isFetchingGridData=!0,this.rosterApi.getRosterPersonnel().then(t=>{console.log(t),this.personnelGridData=t.docs,this.isFetchingGridData=!1},t=>{console.log(t),this.isFetchingGridData=!1,this.connectionToast.openToast()})}createPersonnel(t){console.log(t),this.addPersonnel.isSaving=!0,this.rosterApi.createPersonnel(t).then(n=>{console.log(n),n.id&&(this.getRosterPersonnel(),this.addPersonnel.isSaving=!1,this.addPersonnel.dismissButton.nativeElement.ckick(),this.addPersonnel.resetForm())},n=>{console.log(n),this.addPersonnel.isSaving=!1,this.connectionToast.openToast()})}updatePersonnel(t){console.log(t),this.editPersonnel.isSaving=!0,this.rosterApi.updatePersonnel(t.id,t.personnel).then(n=>{console.log(n),this.getRosterPersonnel(),this.editPersonnel.isSaving=!1,this.editPersonnel.dismissButton.nativeElement.ckick()},n=>{console.log(n),this.editPersonnel.isSaving=!1,this.connectionToast.openToast()})}deletePersonnel(){this.rosterApi.deletePersonnel(this.deleteId).then(t=>{console.log(t),this.getRosterPersonnel()},t=>{console.log(t),this.connectionToast.openToast()})}openEditPersonnel(t){console.log(t),this.editPersonnel.openModal(t)}confirmDelete(t){this.deleteId=t,this.deleteModal.openModal()}}return o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275directiveInject(c.F0),e.\u0275\u0275directiveInject(p.P))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["app-manage-personnel"]],viewQuery:function(t,n){if(1&t&&(e.\u0275\u0275viewQuery(Te,5,D),e.\u0275\u0275viewQuery(Pe,5,I),e.\u0275\u0275viewQuery(xe,5,d.Y),e.\u0275\u0275viewQuery(De,5,v.z)),2&t){let r;e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(n.addPersonnel=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(n.editPersonnel=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(n.connectionToast=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(n.deleteModal=r.first)}},decls:28,vars:2,consts:[[1,"row"],[1,"col-md-12"],[1,"overflow-auto"],[1,"table","table-bordered","table-sm","w-100","page-table"],[1,"bg-light"],["width","20%",1,"min-width-2"],["width","45%",1,"min-width-3"],["width","15%",1,"p-0","min-width-2"],[1,"btn","btn-secondary","btn-sm","w-100",3,"click"],[1,"bi","bi-plus"],[4,"ngFor","ngForOf"],["class","text-center",4,"ngIf"],[3,"savePersonnelEvent"],["editPersonnelComponentReference",""],[3,"savePersonnelEvent","deletePersonnelEvent"],["addPersonnelComponentReference",""],["connectionToastComponentReference",""],[3,"confirmEvent"],["deleteModalComponentReference",""],[1,"p-0"],[1,"btn","btn-sm","border","w-50",3,"click"],[1,"bi","bi-pen"],[1,"bi","bi-trash"],[1,"text-center"],["colspan","4"],["role","status",1,"spinner-grow","spinner-grow-sm","m-2"],[1,"visually-hidden"]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"h4"),e.\u0275\u0275text(1,"Roster Personnel"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(2,"div",0),e.\u0275\u0275elementStart(3,"div",1),e.\u0275\u0275elementStart(4,"div",2),e.\u0275\u0275elementStart(5,"table",3),e.\u0275\u0275elementStart(6,"thead"),e.\u0275\u0275elementStart(7,"tr",4),e.\u0275\u0275elementStart(8,"th",5),e.\u0275\u0275text(9,"Personnel ID"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"th",6),e.\u0275\u0275text(11,"Personnel Name"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"th",5),e.\u0275\u0275text(13,"Batch"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"th",7),e.\u0275\u0275elementStart(15,"button",8),e.\u0275\u0275listener("click",function(){return n.addPersonnel.openModal()}),e.\u0275\u0275element(16,"i",9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"tbody"),e.\u0275\u0275template(18,Ie,12,3,"tr",10),e.\u0275\u0275template(19,Me,5,0,"tr",11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"app-edit-personnel",12,13),e.\u0275\u0275listener("savePersonnelEvent",function(i){return n.createPersonnel(i)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(22,"app-add-personnel",14,15),e.\u0275\u0275listener("savePersonnelEvent",function(i){return n.updatePersonnel(i)})("deletePersonnelEvent",function(i){return n.confirmDelete(i)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(24,"app-connection-toast",null,16),e.\u0275\u0275elementStart(26,"app-delete-modal",17,18),e.\u0275\u0275listener("confirmEvent",function(){return n.deletePersonnel()}),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275advance(18),e.\u0275\u0275property("ngForOf",n.personnelGridData),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.isFetchingGridData))},directives:[s.sg,s.O5,I,D,d.Y,v.z],styles:[""]}),o})();const Ne=["addButtonElementReference"],Qe=["dismissButtonElementReference"];let N=(()=>{class o{constructor(){this.saveBatchEvent=new e.EventEmitter,this.batchForm=new a.cw({}),this.isSaving=!1}ngOnInit(){this.initBatchForm()}initBatchForm(){this.batchForm=new a.cw({batchName:new a.NI(""),batchSymbol:new a.NI("")})}openModal(){this.addButton.nativeElement.click()}saveBatch(){let t={created_at:(0,y.Bt)(),roster:sessionStorage.getItem("restaurant_roster_id"),batch_name:this.batchForm.controls.batchName.value,batch_symbol:this.batchForm.controls.batchSymbol.value};this.saveBatchEvent.emit(t)}resetForm(){this.batchForm.controls.batchName.setValue(""),this.batchForm.controls.batchSymbol.setValue("")}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["app-add-batch"]],viewQuery:function(t,n){if(1&t&&(e.\u0275\u0275viewQuery(Ne,5,e.ElementRef),e.\u0275\u0275viewQuery(Qe,5,e.ElementRef)),2&t){let r;e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(n.addButton=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(n.dismissButton=r.first)}},outputs:{saveBatchEvent:"saveBatchEvent"},decls:30,vars:3,consts:[["data-bs-toggle","modal","data-bs-target","#addBatchModal",3,"hidden"],["addButtonElementReference",""],["id","addBatchModal","tabindex","-1","aria-labelledby","addBatchModalLabel","aria-hidden","true",1,"modal","fade","form-modal"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header","bg-light"],["id","addBatchModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],["dismissButtonElementReference",""],[1,"page-form",3,"formGroup","ngSubmit"],[1,"modal-body"],[1,"row","mb-1"],[1,"col-md-4"],[1,"float-md-end","float-sm-start","mt-1"],[1,"col-md-8"],["formControlName","batchName",1,"form-control","form-control-sm","w-100"],["formControlName","batchSymbol",1,"form-control","form-control-sm","w-100"],[1,"modal-footer"],["type","submit",1,"btn","btn-sm","btn-secondary","modal-form-btn",3,"disabled"],["type","button","data-bs-dismiss","modal",1,"btn","btn-sm","btn-secondary","modal-form-btn"]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"button",0,1),e.\u0275\u0275text(2," Launch demo modal\n"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",2),e.\u0275\u0275elementStart(4,"div",3),e.\u0275\u0275elementStart(5,"div",4),e.\u0275\u0275elementStart(6,"div",5),e.\u0275\u0275elementStart(7,"span",6),e.\u0275\u0275text(8,"Add Batch"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(9,"button",7,8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"form",9),e.\u0275\u0275listener("ngSubmit",function(){return n.saveBatch()}),e.\u0275\u0275elementStart(12,"div",10),e.\u0275\u0275elementStart(13,"div",11),e.\u0275\u0275elementStart(14,"div",12),e.\u0275\u0275elementStart(15,"label",13),e.\u0275\u0275text(16,"Batch Name :"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"div",14),e.\u0275\u0275element(18,"input",15),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"div",11),e.\u0275\u0275elementStart(20,"div",12),e.\u0275\u0275elementStart(21,"label",13),e.\u0275\u0275text(22,"Batch Symbol :"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(23,"div",14),e.\u0275\u0275element(24,"input",16),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(25,"div",17),e.\u0275\u0275elementStart(26,"button",18),e.\u0275\u0275text(27,"Save"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(28,"button",19),e.\u0275\u0275text(29,"Cancel"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275property("hidden",!0),e.\u0275\u0275advance(11),e.\u0275\u0275property("formGroup",n.batchForm),e.\u0275\u0275advance(15),e.\u0275\u0275property("disabled",n.isSaving))},directives:[a._Y,a.JL,a.sg,a.Fj,a.JJ,a.u],styles:[""]}),o})();const Ae=["editButtonElementReference"],ke=["dismissButtonElementReference"];let Q=(()=>{class o{constructor(){this.saveBatchEvent=new e.EventEmitter,this.deleteBatchEvent=new e.EventEmitter,this.batchForm=new a.cw({}),this.isSaving=!1}ngOnInit(){this.initBatchForm()}initBatchForm(){this.batchForm=new a.cw({batchName:new a.NI(""),batchSymbol:new a.NI("")})}openModal(t){console.log(t),this.batchData=t,this.batchForm.controls.batchName.setValue(t.data().batch_name),this.batchForm.controls.batchSymbol.setValue(t.data().batch_symbol),this.editButton.nativeElement.click()}saveBatch(){this.saveBatchEvent.emit({id:this.batchData.id,data:{batch_name:this.batchForm.controls.batchName.value,batch_symbol:this.batchForm.controls.batchSymbol.value}})}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["app-edit-batch"]],viewQuery:function(t,n){if(1&t&&(e.\u0275\u0275viewQuery(Ae,5,e.ElementRef),e.\u0275\u0275viewQuery(ke,5,e.ElementRef)),2&t){let r;e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(n.editButton=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(n.dismissButton=r.first)}},outputs:{saveBatchEvent:"saveBatchEvent",deleteBatchEvent:"deleteBatchEvent"},decls:30,vars:3,consts:[["data-bs-toggle","modal","data-bs-target","#editBatchModal",3,"hidden"],["editButtonElementReference",""],["id","editBatchModal","tabindex","-1","aria-labelledby","editBatchModalLabel","aria-hidden","true",1,"modal","fade","form-modal"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header","bg-light"],["id","editBatchModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],["dismissButtonElementReference",""],[1,"page-form",3,"formGroup","ngSubmit"],[1,"modal-body"],[1,"row","mb-1"],[1,"col-md-4"],[1,"float-md-end","float-sm-start","mt-1"],[1,"col-md-8"],["formControlName","batchName",1,"form-control","form-control-sm","w-100"],["formControlName","batchSymbol",1,"form-control","form-control-sm","w-100"],[1,"modal-footer"],["type","submit",1,"btn","btn-sm","btn-secondary","modal-form-btn",3,"disabled"],["type","button","data-bs-dismiss","modal",1,"btn","btn-sm","btn-secondary","modal-form-btn"]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"button",0,1),e.\u0275\u0275text(2," Launch demo modal\n"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",2),e.\u0275\u0275elementStart(4,"div",3),e.\u0275\u0275elementStart(5,"div",4),e.\u0275\u0275elementStart(6,"div",5),e.\u0275\u0275elementStart(7,"span",6),e.\u0275\u0275text(8,"Edit Batch"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(9,"button",7,8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"form",9),e.\u0275\u0275listener("ngSubmit",function(){return n.saveBatch()}),e.\u0275\u0275elementStart(12,"div",10),e.\u0275\u0275elementStart(13,"div",11),e.\u0275\u0275elementStart(14,"div",12),e.\u0275\u0275elementStart(15,"label",13),e.\u0275\u0275text(16,"Batch Name :"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"div",14),e.\u0275\u0275element(18,"input",15),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"div",11),e.\u0275\u0275elementStart(20,"div",12),e.\u0275\u0275elementStart(21,"label",13),e.\u0275\u0275text(22,"Batch Symbol :"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(23,"div",14),e.\u0275\u0275element(24,"input",16),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(25,"div",17),e.\u0275\u0275elementStart(26,"button",18),e.\u0275\u0275text(27,"Save"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(28,"button",19),e.\u0275\u0275text(29,"Cancel"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275property("hidden",!0),e.\u0275\u0275advance(11),e.\u0275\u0275property("formGroup",n.batchForm),e.\u0275\u0275advance(15),e.\u0275\u0275property("disabled",n.isSaving))},directives:[a._Y,a.JL,a.sg,a.Fj,a.JJ,a.u],styles:[""]}),o})();const Ve=["managePersonnelComponentReference"],Ge=["addBatchComponentReference"],Le=["editBatchComponentReference"],Oe=["connectionToastComponentReference"],je=["deleteModalComponentReference"];function Ye(o,l){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"tr"),e.\u0275\u0275elementStart(1,"td"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"td"),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"td",36),e.\u0275\u0275elementStart(6,"button",37),e.\u0275\u0275listener("click",function(){const i=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275nextContext().openEditBatch(i)}),e.\u0275\u0275element(7,"i",38),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"button",37),e.\u0275\u0275listener("click",function(){const i=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275nextContext().confirmDelete(i.id)}),e.\u0275\u0275element(9,"i",39),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()}if(2&o){const t=l.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null==t?null:t.data().batch_name),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null==t?null:t.data().batch_symbol)}}function Je(o,l){1&o&&(e.\u0275\u0275elementStart(0,"tr",40),e.\u0275\u0275elementStart(1,"td",41),e.\u0275\u0275elementStart(2,"div",42),e.\u0275\u0275elementStart(3,"span",43),e.\u0275\u0275text(4,"Loading..."),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd())}const qe=[{path:"",component:h,children:[{path:"",component:w},{path:"dashboard",component:w},{path:"all-roster",component:Z},{path:"view-roster",component:_e},{path:"manage-batches",component:(()=>{class o{constructor(t,n){this.router=t,this.rosterApi=n,this.navHeading=[{text:"All Roster",url:"/home/roster/all-roster"},{text:"View Roster",url:"/home/roster/view-roster"},{text:"Manage Batches",url:"/home/roster/manage-batches"}],this.rosterForm=new a.cw({}),this.batchesGridData=[],this.isFetchingGridData=!1}ngOnInit(){this.initRosterForm(),this.getRoster(),this.getRosterBatch()}initRosterForm(){this.rosterForm=new a.cw({rosterCode:new a.NI({value:"",disabled:!0}),rosterName:new a.NI({value:"",disabled:!0})})}getRoster(){this.rosterApi.getRoster().then(t=>{console.log(t),this.rosterForm.controls.rosterCode.setValue(t.data().roster_code),this.rosterForm.controls.rosterName.setValue(t.data().roster_name)},t=>{console.log(t),this.connectionToast.openToast()})}getRosterBatch(){this.isFetchingGridData=!0,this.rosterApi.getRosterBatch().then(t=>{console.log(t),this.batchesGridData=t.docs,this.isFetchingGridData=!1},t=>{console.log(t),this.isFetchingGridData=!1,this.connectionToast.openToast()})}createBatch(t){console.log(t),this.addBatch.isSaving=!0,this.rosterApi.createBatch(t).then(n=>{console.log(n),n.id&&(this.getRosterBatch(),this.addBatch.isSaving=!1,this.addBatch.dismissButton.nativeElement.click(),this.addBatch.resetForm())},n=>{console.log(n),this.addBatch.isSaving=!1,this.connectionToast.openToast()})}updateBatch(t){console.log(t),this.editBatch.isSaving=!0,this.rosterApi.updateBatch(t.id,t.batch).then(n=>{console.log(n),this.getRosterBatch(),this.editBatch.isSaving=!1,this.editBatch.dismissButton.nativeElement.click()},n=>{console.log(n),this.editBatch.isSaving=!1,this.connectionToast.openToast()})}deleteBatch(){this.rosterApi.deleteBatch(this.deleteId).then(t=>{console.log(t),this.getRosterBatch()},t=>{console.log(t),this.connectionToast.openToast()})}openEditBatch(t){console.log(t),this.editBatch.openModal(t)}confirmDelete(t){this.deleteId=t,this.deleteModal.openModal()}onPrint(){console.log("lets start printing...")}}return o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275directiveInject(c.F0),e.\u0275\u0275directiveInject(p.P))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["app-manage-batches"]],viewQuery:function(t,n){if(1&t&&(e.\u0275\u0275viewQuery(Ve,5,M),e.\u0275\u0275viewQuery(Ge,5,N),e.\u0275\u0275viewQuery(Le,5,Q),e.\u0275\u0275viewQuery(Oe,5,d.Y),e.\u0275\u0275viewQuery(je,5,v.z)),2&t){let r;e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(n.managePersonnel=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(n.addBatch=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(n.editBatch=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(n.connectionToast=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(n.deleteModal=r.first)}},decls:58,vars:4,consts:[[3,"headings"],[1,"container"],[1,"page-form",3,"formGroup"],[1,"row","page-form"],[1,"col-md-12"],[1,"col-md-6"],[1,"row","mb-1"],[1,"col-md-4"],[1,"float-md-end","float-sm-start","mt-1"],[1,"col-md-8"],["formControlName","rosterCode",1,"form-control","form-control-sm","w-100"],["formControlName","rosterName",1,"form-control","form-control-sm","w-100"],[1,"top-divider"],[1,"bottom-divider"],[1,"row","mb-2"],["routerLink","/home/roster/view-roster",1,"btn","btn-secondary","float-end","nr-standard-font"],[1,"bi","bi-arrow-left-right","me-2"],[1,"row"],[1,"overflow-auto"],[1,"table","table-bordered","table-sm","w-100","page-table"],[1,"bg-light"],["width","55%",1,"min-width-3"],["width","30%",1,"min-width-2"],["width","15%",1,"p-0","min-width-2"],[1,"btn","btn-secondary","btn-sm","w-100",3,"click"],[1,"bi","bi-plus"],[4,"ngFor","ngForOf"],["class","text-center",4,"ngIf"],["managePersonnelComponentReference",""],[3,"saveBatchEvent"],["addBatchComponentReference",""],[3,"saveBatchEvent","deleteBatch"],["editBatchComponentReference",""],["connectionToastComponentReference",""],[3,"confirmEvent"],["deleteModalComponentReference",""],[1,"p-0"],[1,"btn","btn-sm","border","w-50",3,"click"],[1,"bi","bi-pen"],[1,"bi","bi-trash"],[1,"text-center"],["colspan","3"],["role","status",1,"spinner-grow","spinner-grow-sm","m-2"],[1,"visually-hidden"]],template:function(t,n){1&t&&(e.\u0275\u0275element(0,"app-module-topnav",0),e.\u0275\u0275elementStart(1,"div",1),e.\u0275\u0275elementStart(2,"form",2),e.\u0275\u0275elementStart(3,"div",3),e.\u0275\u0275elementStart(4,"div",4),e.\u0275\u0275elementStart(5,"h4"),e.\u0275\u0275text(6,"Roster Details"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"div",5),e.\u0275\u0275elementStart(8,"div",6),e.\u0275\u0275elementStart(9,"div",7),e.\u0275\u0275elementStart(10,"label",8),e.\u0275\u0275text(11,"Roster ID :"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"div",9),e.\u0275\u0275element(13,"input",10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"div",6),e.\u0275\u0275elementStart(15,"div",7),e.\u0275\u0275elementStart(16,"label",8),e.\u0275\u0275text(17,"Roster Name :"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"div",9),e.\u0275\u0275element(19,"input",11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(20,"hr",12),e.\u0275\u0275element(21,"hr",13),e.\u0275\u0275elementStart(22,"div",14),e.\u0275\u0275elementStart(23,"div",4),e.\u0275\u0275elementStart(24,"button",15),e.\u0275\u0275element(25,"i",16),e.\u0275\u0275text(26," Roster Sheet "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(27,"div",17),e.\u0275\u0275elementStart(28,"div",5),e.\u0275\u0275elementStart(29,"h4"),e.\u0275\u0275text(30,"Roster Batches"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(31,"div",17),e.\u0275\u0275elementStart(32,"div",4),e.\u0275\u0275elementStart(33,"div",18),e.\u0275\u0275elementStart(34,"table",19),e.\u0275\u0275elementStart(35,"thead"),e.\u0275\u0275elementStart(36,"tr",20),e.\u0275\u0275elementStart(37,"th",21),e.\u0275\u0275text(38,"Batch Name"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(39,"th",22),e.\u0275\u0275text(40,"Batch Symbol"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(41,"th",23),e.\u0275\u0275elementStart(42,"button",24),e.\u0275\u0275listener("click",function(){return n.addBatch.openModal()}),e.\u0275\u0275element(43,"i",25),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(44,"tbody"),e.\u0275\u0275template(45,Ye,10,2,"tr",26),e.\u0275\u0275template(46,Je,5,0,"tr",27),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(47,"div",5),e.\u0275\u0275element(48,"app-manage-personnel",null,28),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(50,"app-add-batch",29,30),e.\u0275\u0275listener("saveBatchEvent",function(i){return n.createBatch(i)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(52,"app-edit-batch",31,32),e.\u0275\u0275listener("saveBatchEvent",function(i){return n.updateBatch(i)})("deleteBatch",function(i){return n.confirmDelete(i)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(54,"app-connection-toast",null,33),e.\u0275\u0275elementStart(56,"app-delete-modal",34,35),e.\u0275\u0275listener("confirmEvent",function(){return n.deleteBatch()}),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275property("headings",n.navHeading),e.\u0275\u0275advance(2),e.\u0275\u0275property("formGroup",n.rosterForm),e.\u0275\u0275advance(43),e.\u0275\u0275property("ngForOf",n.batchesGridData),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.isFetchingGridData))},directives:[S.H,a._Y,a.JL,a.sg,a.Fj,a.JJ,a.u,c.rH,s.sg,s.O5,M,N,Q,d.Y,v.z],styles:[""]}),o})()}]}];let He=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.\u0275\u0275defineNgModule({type:o}),o.\u0275inj=e.\u0275\u0275defineInjector({imports:[[c.Bz.forChild(qe)],c.Bz]}),o})();var ze=m(7264),A=m(5018),$e=m(6508),Ue=m(2452);let We=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.\u0275\u0275defineNgModule({type:o}),o.\u0275inj=e.\u0275\u0275defineInjector({imports:[[s.ez,c.Bz,a.u5,a.UX,$e.m9,A.p,Ue.d]]}),o})(),Ke=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.\u0275\u0275defineNgModule({type:o}),o.\u0275inj=e.\u0275\u0275defineInjector({imports:[[s.ez,He,ze.M,A.p,We]]}),o})()}}]);