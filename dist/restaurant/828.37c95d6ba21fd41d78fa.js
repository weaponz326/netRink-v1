"use strict";(self.webpackChunkang_fire=self.webpackChunkang_fire||[]).push([[828],{756:(E,v,m)=>{m.d(v,{Bt:()=>u.Bt});var u=m(9665)},4828:(E,v,m)=>{m.r(v),m.d(v,{CustomersPageModule:()=>se});var u=m(6274),c=m(8718),e=m(2741),p=m(8088),b=m(7632);let a=(()=>{class o{constructor(){this.navLinks=[{text:"All Customers",url:"/home/customers/all-customers",icon:"bi bi-list-ul"},{text:"New Customer",url:"/home/customers/new-customer",icon:"bi bi-plus-square"}]}ngOnInit(){}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["app-customers-page"]],decls:6,vars:4,consts:[[3,"navBrand","source"],["id","wrapper"],[3,"navLinks","heading"],["id","content-wrapper",1,"d-flex","flex-column"],["id","content"]],template:function(t,n){1&t&&(e.\u0275\u0275element(0,"app-main-navbar",0),e.\u0275\u0275elementStart(1,"div",1),e.\u0275\u0275element(2,"app-module-sidenav",2),e.\u0275\u0275elementStart(3,"div",3),e.\u0275\u0275elementStart(4,"div",4),e.\u0275\u0275element(5,"router-outlet"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275property("navBrand","nR Restaurant")("source","Restaurant"),e.\u0275\u0275advance(2),e.\u0275\u0275property("navLinks",n.navLinks)("heading","Customers"))},directives:[p.D,b.m,c.lC],styles:[""]}),o})();var d=m(8361),f=m.n(d),h=m(1580),g=m(365),_=m(8972),w=m(6508);const D=["connectionToastComponentReference"];let x=(()=>{class o{constructor(t){this.customersApi=t,this.navHeading=[{text:"Dashboard",url:"/home/customers/dashboard"}],this.weekCustomersCount=0,this.customersLineChartData=[{data:[0],label:"Menu Groups"}],this.customersLineChartLabels=[""],this.chartOptions={},this.today=f()()}ngOnInit(){this.initChart(),this.getWeekCustomer()}initChart(){this.chartOptions={responsive:!0,scales:{yAxes:[{min:0,ticks:{stepSize:1,beginAtZero:!0}}]}}}getWeekCustomer(){this.customersApi.getWeekCustomer(f()(this.today).add(-1,"months").toDate(),this.today.toDate()).then(t=>{console.log(t),this.weekCustomersData=t.docs,this.weekCustomersCount=t.docs.length,this.setCustomerChartData()},t=>{console.log(t),this.connectionToast.openToast()})}setCustomerChartData(){this.customersLineChartLabels=[];for(let r=7;r>0;r--){var t=f()(this.today).add(-r,"days");this.customersLineChartLabels.push(t.toDate().toISOString().slice(0,10))}console.log(this.customersLineChartLabels);let n=[];for(let r=7;r>0;r--)n.push(0);console.log(n),this.weekCustomersData.forEach(r=>{var i=r.data().created_at.toDate().toISOString().slice(0,10);for(let C=7;C>0;C--)this.customersLineChartLabels[C]==i&&n[C]++}),console.log(n),this.customersLineChartData=[{data:n,label:"Customers"}]}}return o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275directiveInject(g.M))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["app-dashboard"]],viewQuery:function(t,n){if(1&t&&e.\u0275\u0275viewQuery(D,5,h.Y),2&t){let r;e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(n.connectionToast=r.first)}},decls:23,vars:7,consts:[[3,"headings"],[1,"container"],[1,"row"],[1,"col-md-3","mb-4"],[1,"card","border-left-secondary","shadow","h-100","py-2"],[1,"card-body"],[1,"row","no-gutters","align-items-center"],[1,"col","mr-2"],[1,"text-xs","font-weight-bold","text-uppercase","mb-1"],[1,"h5","mb-0","font-weight-bold","text-gray-800"],[1,"col-md-8"],[1,"card","shadow","mb-4"],[1,"card-header","py-3","d-flex","flex-row","align-items-center","justify-content-between"],[1,"m-0","font-weight-bold"],[1,"chart-area"],["baseChart","",3,"datasets","labels","options","legend","chartType"],["connectionToastComponentReference",""]],template:function(t,n){1&t&&(e.\u0275\u0275element(0,"app-module-topnav",0),e.\u0275\u0275elementStart(1,"div",1),e.\u0275\u0275elementStart(2,"div",2),e.\u0275\u0275elementStart(3,"div",3),e.\u0275\u0275elementStart(4,"div",4),e.\u0275\u0275elementStart(5,"div",5),e.\u0275\u0275elementStart(6,"div",6),e.\u0275\u0275elementStart(7,"div",7),e.\u0275\u0275elementStart(8,"div",8),e.\u0275\u0275text(9,"New Customers this Week"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"div",9),e.\u0275\u0275text(11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"div",2),e.\u0275\u0275elementStart(13,"div",10),e.\u0275\u0275elementStart(14,"div",11),e.\u0275\u0275elementStart(15,"div",12),e.\u0275\u0275elementStart(16,"h6",13),e.\u0275\u0275text(17,"New Customers by Day"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"div",5),e.\u0275\u0275elementStart(19,"div",14),e.\u0275\u0275element(20,"canvas",15),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(21,"app-connection-toast",null,16)),2&t&&(e.\u0275\u0275property("headings",n.navHeading),e.\u0275\u0275advance(11),e.\u0275\u0275textInterpolate(n.weekCustomersCount),e.\u0275\u0275advance(9),e.\u0275\u0275property("datasets",n.customersLineChartData)("labels",n.customersLineChartLabels)("options",n.chartOptions)("legend",!0)("chartType","line"))},directives:[_.H,w.jh,h.Y],styles:[""]}),o})();var F=m(1921),P=m(6424);let A=(()=>{class o{constructor(t,n){this.pdfPrint=t,this.customersApi=n}printAllCustomers(){var t=this;return(0,F.Z)(function*(){const n=yield t.customersApi.getAllAccountCustomer();var r=[["Customer ID","Customer Name","Phone No."]];for(let ae of n.docs){var i=[];let y=ae.data();i.push(y.customer_code),i.push(y.customer_name),i.push(y.phone),r.push(i)}t.pdfPrint.openPdf([{layout:"lightHorizontalLines",table:{headerRows:1,widths:["25%","50%","25%"],body:r}}])})()}printViewCustomer(){var t=this;return(0,F.Z)(function*(){let r=(yield t.customersApi.getCustomer()).data();t.pdfPrint.openPdf([{columns:[[{text:"Customer Code: "+r.customer_code},{text:"Customer Name: "+r.customer_name},{text:"Customer Type: "+r.customer_type},{text:"Allergies: "+r.allergies},{text:"Preferences: "+r.preferences},{text:"Phone No.: "+r.phone},{text:"Email: "+r.email},{text:"Address: "+r.address},{text:"state: "+r.state},{text:"city: "+r.city}]]}])})()}}return o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275inject(P.n),e.\u0275\u0275inject(g.M))},o.\u0275prov=e.\u0275\u0275defineInjectable({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const N=["connectionToastComponentReference"];function k(o,s){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",30),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("customer_code","desc")}),e.\u0275\u0275elementEnd()}}function V(o,s){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",31),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("customer_code","asc")}),e.\u0275\u0275elementEnd()}}function R(o,s){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",32),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("customer_code","desc")}),e.\u0275\u0275elementEnd()}}function L(o,s){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",30),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("customer_name","desc")}),e.\u0275\u0275elementEnd()}}function M(o,s){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",31),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("customer_name","asc")}),e.\u0275\u0275elementEnd()}}function G(o,s){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",32),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("customer_name","desc")}),e.\u0275\u0275elementEnd()}}function j(o,s){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",30),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("phone","desc")}),e.\u0275\u0275elementEnd()}}function O(o,s){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",31),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("phone","asc")}),e.\u0275\u0275elementEnd()}}function Q(o,s){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",32),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().sortTable("phone","desc")}),e.\u0275\u0275elementEnd()}}function B(o,s){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"tr",33),e.\u0275\u0275listener("dblclick",function(){const i=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275nextContext().viewCustomer(i.id)}),e.\u0275\u0275elementStart(1,"td"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"td"),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"td"),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()}if(2&o){const t=s.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null==t?null:t.data().customer_code),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null==t?null:t.data().customer_name),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null==t?null:t.data().phone)}}function H(o,s){1&o&&(e.\u0275\u0275elementStart(0,"tr",34),e.\u0275\u0275elementStart(1,"td",35),e.\u0275\u0275elementStart(2,"div",36),e.\u0275\u0275elementStart(3,"span",37),e.\u0275\u0275text(4,"Loading..."),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd())}function z(o,s){1&o&&(e.\u0275\u0275elementStart(0,"tr",34),e.\u0275\u0275elementStart(1,"td",35),e.\u0275\u0275elementStart(2,"p",38),e.\u0275\u0275text(3,"No data available"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd())}let Y=(()=>{class o{constructor(t,n,r){this.router=t,this.customersApi=n,this.customersPrint=r,this.navHeading=[{text:"All Customers",url:"/home/customers/all-customers"}],this.customersGridData=[],this.isFetchingGridData=!1,this.isDataAvailable=!0,this.firstInResponse=[],this.lastInResponse=[],this.nextStartAfter=[],this.prevStartAt=[],this.pageNumber=0,this.disableNext=!0,this.disablePrev=!0,this.sortParams={field:"created_at",direction:"desc"}}ngOnInit(){this.getAccountCustomer()}getAccountCustomer(){this.isFetchingGridData=!0,this.customersApi.getAccountCustomer(this.sortParams,20).then(t=>{console.log(t),this.customersGridData=t.docs,this.isFetchingGridData=!1,this.prevStartAt=this.firstInResponse,this.nextStartAfter=t.docs[t.docs.length-1],this.firstInResponse=t.docs[0],this.pageNumber=1,this.isDataAvailable=!!t.docs.length,!t.docs.length||t.docs.length<20?(this.disableNext=!0,this.disablePrev=!0):(this.disableNext=!1,this.disablePrev=!0)},t=>{console.log(t),this.isFetchingGridData=!1,this.connectionToast.openToast()})}nextPage(t){t.preventDefault(),this.isFetchingGridData=!0,this.customersApi.getAccountCustomerNext(this.sortParams,20,this.nextStartAfter).then(n=>{console.log(n),this.customersGridData=n.docs,this.isFetchingGridData=!1,this.prevStartAt=this.firstInResponse,this.nextStartAfter=n.docs[n.docs.length-1],this.firstInResponse=n.docs[0],this.pageNumber++,n.docs.length<20&&(this.disableNext=!0,this.disablePrev=!1)},n=>{console.log(n),this.isFetchingGridData=!1,this.connectionToast.openToast()})}previousPage(t){t.preventDefault(),this.isFetchingGridData=!0,this.customersApi.getAccountCustomerPrev(this.sortParams,20,this.prevStartAt).then(n=>{console.log(n),this.customersGridData=n.docs,this.isFetchingGridData=!1,n.docs.length||(this.isDataAvailable=!1),this.prevStartAt=this.firstInResponse,this.nextStartAfter=n.docs[n.docs.length-1],this.firstInResponse=n.docs[0],this.pageNumber--,1==this.pageNumber&&(this.disableNext=!1,this.disablePrev=!0)},n=>{console.log(n),this.isFetchingGridData=!1,this.connectionToast.openToast()})}sortTable(t,n){this.sortParams.field=t,this.sortParams.direction=n,this.getAccountCustomer()}viewCustomer(t){console.log(t),sessionStorage.setItem("restaurant_customer_id",t),this.router.navigateByUrl("/home/customers/view-customer")}onPrint(){console.log("lets start printing..."),this.customersPrint.printAllCustomers()}}return o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275directiveInject(c.F0),e.\u0275\u0275directiveInject(g.M),e.\u0275\u0275directiveInject(A))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["app-all-customers"]],viewQuery:function(t,n){if(1&t&&e.\u0275\u0275viewQuery(N,5,h.Y),2&t){let r;e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(n.connectionToast=r.first)}},decls:49,vars:18,consts:[[3,"headings","showPrint","print"],[1,"container"],[1,"row"],[1,"col-md-8"],[1,"row","mb-3"],[1,"col-md-12"],["routerLink","/home/customers/new-customer",1,"btn","btn-secondary","page-add-btn"],[1,"btn","btn-light","border","float-end","page-refresh-btn",3,"disabled","click"],[1,"bi","bi-arrow-clockwise"],[1,"overflow-auto"],[1,"table","table-bordered","table-sm","w-100","page-table"],[1,"bg-light"],["width","25%",1,"min-width-2"],["class","bi bi-filter float-end list-pointer",3,"click",4,"ngIf"],["class","bi bi-sort-down float-end list-pointer",3,"click",4,"ngIf"],["class","bi bi-sort-up float-end list-pointer",3,"click",4,"ngIf"],["width","50%",1,"min-width-4"],["class","table-pointer",3,"dblclick",4,"ngFor","ngForOf"],["class","text-center",4,"ngIf"],["colspan","3"],["aria-label","Page navigation",1,"nav-light","float-end"],[1,"pagination","pagination-sm","mb-0","justify-content-end"],[1,"page-item",3,"ngClass"],["href","#","aria-label","First",1,"page-link",3,"click"],[1,"bi","bi-caret-left-fill"],[1,"page-item"],["href","#","aria-label","Current",1,"page-link",3,"click"],["href","#","aria-label","Last",1,"page-link",3,"click"],[1,"bi","bi-caret-right-fill"],["connectionToastComponentReference",""],[1,"bi","bi-filter","float-end","list-pointer",3,"click"],[1,"bi","bi-sort-down","float-end","list-pointer",3,"click"],[1,"bi","bi-sort-up","float-end","list-pointer",3,"click"],[1,"table-pointer",3,"dblclick"],[1,"text-center"],["colspan","4"],["role","status",1,"spinner-grow","m-4"],[1,"visually-hidden"],[1,"m-4"]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"app-module-topnav",0),e.\u0275\u0275listener("print",function(){return n.onPrint()}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(1,"div",1),e.\u0275\u0275elementStart(2,"div",2),e.\u0275\u0275elementStart(3,"div",3),e.\u0275\u0275elementStart(4,"div",4),e.\u0275\u0275elementStart(5,"div",5),e.\u0275\u0275elementStart(6,"button",6),e.\u0275\u0275text(7,"New Customer"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"button",7),e.\u0275\u0275listener("click",function(){return n.getAccountCustomer()}),e.\u0275\u0275element(9,"i",8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"div",9),e.\u0275\u0275elementStart(11,"table",10),e.\u0275\u0275elementStart(12,"thead"),e.\u0275\u0275elementStart(13,"tr",11),e.\u0275\u0275elementStart(14,"th",12),e.\u0275\u0275text(15," Customer ID "),e.\u0275\u0275template(16,k,1,0,"i",13),e.\u0275\u0275template(17,V,1,0,"i",14),e.\u0275\u0275template(18,R,1,0,"i",15),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"th",16),e.\u0275\u0275text(20," Customer Name "),e.\u0275\u0275template(21,L,1,0,"i",13),e.\u0275\u0275template(22,M,1,0,"i",14),e.\u0275\u0275template(23,G,1,0,"i",15),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(24,"th",12),e.\u0275\u0275text(25," Phone No. "),e.\u0275\u0275template(26,j,1,0,"i",13),e.\u0275\u0275template(27,O,1,0,"i",14),e.\u0275\u0275template(28,Q,1,0,"i",15),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(29,"tbody"),e.\u0275\u0275template(30,B,7,3,"tr",17),e.\u0275\u0275template(31,H,5,0,"tr",18),e.\u0275\u0275template(32,z,4,0,"tr",18),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(33,"tfoot"),e.\u0275\u0275elementStart(34,"tr",11),e.\u0275\u0275elementStart(35,"td",19),e.\u0275\u0275elementStart(36,"nav",20),e.\u0275\u0275elementStart(37,"ul",21),e.\u0275\u0275elementStart(38,"li",22),e.\u0275\u0275elementStart(39,"a",23),e.\u0275\u0275listener("click",function(i){return n.previousPage(i)}),e.\u0275\u0275element(40,"i",24),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(41,"li",25),e.\u0275\u0275elementStart(42,"a",26),e.\u0275\u0275listener("click",function(i){return i.preventDefault()}),e.\u0275\u0275text(43),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(44,"li",22),e.\u0275\u0275elementStart(45,"a",27),e.\u0275\u0275listener("click",function(i){return n.nextPage(i)}),e.\u0275\u0275element(46,"i",28),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(47,"app-connection-toast",null,29)),2&t&&(e.\u0275\u0275property("headings",n.navHeading)("showPrint",!0),e.\u0275\u0275advance(8),e.\u0275\u0275property("disabled",n.isFetchingGridData),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf","customer_code"!=n.sortParams.field),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","customer_code"==n.sortParams.field&&"desc"==n.sortParams.direction),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","customer_code"==n.sortParams.field&&"asc"==n.sortParams.direction),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf","customer_name"!=n.sortParams.field),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","customer_name"==n.sortParams.field&&"desc"==n.sortParams.direction),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","customer_name"==n.sortParams.field&&"asc"==n.sortParams.direction),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf","phone"!=n.sortParams.field),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","phone"==n.sortParams.field&&"desc"==n.sortParams.direction),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","phone"==n.sortParams.field&&"asc"==n.sortParams.direction),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",n.customersGridData),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.isFetchingGridData),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!n.isDataAvailable&&!n.isFetchingGridData),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngClass",n.disablePrev?"disabled":""),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate1(" ",n.pageNumber," "),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",n.disableNext?"disabled":""))},directives:[_.H,c.rH,u.O5,u.sg,u.mk,h.Y],styles:[""]}),o})();var U=m(756),l=m(3324);let S=(()=>{class o{constructor(){this.customerForm=new l.cw({})}ngOnInit(){this.initCustomerForm()}initCustomerForm(){this.customerForm=new l.cw({customerCode:new l.NI(""),customerName:new l.NI(""),customerType:new l.NI(""),phone:new l.NI(""),email:new l.NI(""),address:new l.NI(""),state:new l.NI(""),city:new l.NI(""),allergies:new l.NI(""),preferences:new l.NI("")})}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["app-customer-form"]],decls:76,vars:1,consts:[[1,"page-form",3,"formGroup"],[1,"row","page-form"],[1,"col-md-12"],[1,"col-md-6"],[1,"row","mb-1"],[1,"col-md-4"],[1,"float-md-end","float-sm-start","mt-1"],[1,"col-md-8"],["formControlName","customerCode",1,"form-control","form-control-sm","w-100"],["formControlName","customerName",1,"form-control","form-control-sm","w-100"],["formControlName","customerType",1,"form-control","form-control-sm","w-100"],["formControlName","allergies","rows","3",1,"form-control","form-control-sm","w-100"],["formControlName","preferences","rows","3",1,"form-control","form-control-sm","w-100"],["formControlName","phone",1,"form-control","form-control-sm","w-100"],["formControlName","email",1,"form-control","form-control-sm","w-100"],["formControlName","address","rows","3",1,"form-control","form-control-sm","w-100"],["formControlName","state",1,"form-control","form-control-sm","w-100"],["formControlName","city",1,"form-control","form-control-sm","w-100"]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"form",0),e.\u0275\u0275elementStart(1,"div",1),e.\u0275\u0275elementStart(2,"div",2),e.\u0275\u0275elementStart(3,"h4"),e.\u0275\u0275text(4,"Customer Details"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"div",3),e.\u0275\u0275elementStart(6,"div",4),e.\u0275\u0275elementStart(7,"div",5),e.\u0275\u0275elementStart(8,"label",6),e.\u0275\u0275text(9,"Customer ID :"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"div",7),e.\u0275\u0275element(11,"input",8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"div",4),e.\u0275\u0275elementStart(13,"div",5),e.\u0275\u0275elementStart(14,"label",6),e.\u0275\u0275text(15,"Customer Name :"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"div",7),e.\u0275\u0275element(17,"input",9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"div",4),e.\u0275\u0275elementStart(19,"div",5),e.\u0275\u0275elementStart(20,"label",6),e.\u0275\u0275text(21,"Customer Type :"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(22,"div",7),e.\u0275\u0275elementStart(23,"select",10),e.\u0275\u0275elementStart(24,"option"),e.\u0275\u0275text(25,"Individual"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(26,"option"),e.\u0275\u0275text(27,"Organization"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(28,"option"),e.\u0275\u0275text(29,"Group"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(30,"option"),e.\u0275\u0275text(31,"Couple"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(32,"div",4),e.\u0275\u0275elementStart(33,"div",5),e.\u0275\u0275elementStart(34,"label",6),e.\u0275\u0275text(35,"Allergies :"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(36,"div",7),e.\u0275\u0275element(37,"textarea",11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(38,"div",4),e.\u0275\u0275elementStart(39,"div",5),e.\u0275\u0275elementStart(40,"label",6),e.\u0275\u0275text(41,"Preferences :"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(42,"div",7),e.\u0275\u0275element(43,"textarea",12),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(44,"div",3),e.\u0275\u0275elementStart(45,"div",4),e.\u0275\u0275elementStart(46,"div",5),e.\u0275\u0275elementStart(47,"label",6),e.\u0275\u0275text(48,"Phone No. :"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(49,"div",7),e.\u0275\u0275element(50,"input",13),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(51,"div",4),e.\u0275\u0275elementStart(52,"div",5),e.\u0275\u0275elementStart(53,"label",6),e.\u0275\u0275text(54,"Email :"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(55,"div",7),e.\u0275\u0275element(56,"input",14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(57,"div",4),e.\u0275\u0275elementStart(58,"div",5),e.\u0275\u0275elementStart(59,"label",6),e.\u0275\u0275text(60,"Address :"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(61,"div",7),e.\u0275\u0275element(62,"textarea",15),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(63,"div",4),e.\u0275\u0275elementStart(64,"div",5),e.\u0275\u0275elementStart(65,"label",6),e.\u0275\u0275text(66,"State/Region :"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(67,"div",7),e.\u0275\u0275element(68,"input",16),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(69,"div",4),e.\u0275\u0275elementStart(70,"div",5),e.\u0275\u0275elementStart(71,"label",6),e.\u0275\u0275text(72,"City/Town :"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(73,"div",7),e.\u0275\u0275element(74,"input",17),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(75,"hr"),e.\u0275\u0275elementEnd()),2&t&&e.\u0275\u0275property("formGroup",n.customerForm)},directives:[l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,l.EJ,l.YN,l.Kr],styles:[""]}),o})();const W=["customerFormComponentReference"],J=["connectionToastComponentReference"];let K=(()=>{class o{constructor(t,n){this.router=t,this.customersApi=n,this.navHeading=[{text:"New Customer",url:"/home/customers/new-customer"}],this.isCustomerSaving=!1}ngOnInit(){}createCustomer(){console.log("u are saving a new customer");var t={created_at:(0,U.Bt)(),account:localStorage.getItem("restaurant_id"),customer_code:this.customerForm.customerForm.controls.customerCode.value,customer_name:this.customerForm.customerForm.controls.customerName.value,customer_type:this.customerForm.customerForm.controls.customerType.value,phone:this.customerForm.customerForm.controls.phone.value,email:this.customerForm.customerForm.controls.email.value,address:this.customerForm.customerForm.controls.address.value,state:this.customerForm.customerForm.controls.state.value,city:this.customerForm.customerForm.controls.city.value,allergies:this.customerForm.customerForm.controls.allergies.value,preferences:this.customerForm.customerForm.controls.preferences.value};console.log(t),this.isCustomerSaving=!0,this.customersApi.createCustomer(t).then(n=>{console.log(n),this.isCustomerSaving=!1,sessionStorage.setItem("restaurant_customer_id",n.id),this.router.navigateByUrl("/home/customers/view-customer")},n=>{console.log(n),this.isCustomerSaving=!1,this.connectionToast.openToast()})}}return o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275directiveInject(c.F0),e.\u0275\u0275directiveInject(g.M))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["app-new-customer"]],viewQuery:function(t,n){if(1&t&&(e.\u0275\u0275viewQuery(W,5,S),e.\u0275\u0275viewQuery(J,5,h.Y)),2&t){let r;e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(n.customerForm=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(n.connectionToast=r.first)}},decls:12,vars:2,consts:[[3,"headings"],[1,"container"],["customerFormComponentReference",""],[1,"row","page-form"],[1,"col-md-12"],["type","button","routerLink","/home/customers/all-customers",1,"btn","btn-secondary","btn-sm","float-end","ms-1","page-form-btn"],[1,"btn","btn-secondary","btn-sm","float-end","ms-1","page-form-btn",3,"disabled","click"],["connectionToastComponentReference",""]],template:function(t,n){1&t&&(e.\u0275\u0275element(0,"app-module-topnav",0),e.\u0275\u0275elementStart(1,"div",1),e.\u0275\u0275element(2,"app-customer-form",null,2),e.\u0275\u0275elementStart(4,"div",3),e.\u0275\u0275elementStart(5,"div",4),e.\u0275\u0275elementStart(6,"button",5),e.\u0275\u0275text(7,"Cancel"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"button",6),e.\u0275\u0275listener("click",function(){return n.createCustomer()}),e.\u0275\u0275text(9,"Save"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(10,"app-connection-toast",null,7)),2&t&&(e.\u0275\u0275property("headings",n.navHeading),e.\u0275\u0275advance(8),e.\u0275\u0275property("disabled",n.isCustomerSaving))},directives:[_.H,S,c.rH,h.Y],styles:[""]}),o})();var T=m(8622);const Z=["customerFormComponentReference"],$=["connectionToastComponentReference"],X=["deleteModalComponentReference"];function q(o,s){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",7),e.\u0275\u0275elementStart(1,"div",8),e.\u0275\u0275elementStart(2,"button",9),e.\u0275\u0275text(3,"Cancel"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"button",10),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().confirmDelete()}),e.\u0275\u0275text(5,"Delete"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"button",11),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().updateCustomer()}),e.\u0275\u0275text(7,"Save"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()}if(2&o){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(4),e.\u0275\u0275property("disabled",t.isCustomerDeleting),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",t.isCustomerSaving)}}function ee(o,s){1&o&&(e.\u0275\u0275elementStart(0,"div",7),e.\u0275\u0275elementStart(1,"div",8),e.\u0275\u0275elementStart(2,"button",12),e.\u0275\u0275elementStart(3,"div",13),e.\u0275\u0275elementStart(4,"span",14),e.\u0275\u0275text(5,"Loading..."),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd())}const te=[{path:"",component:a,children:[{path:"",component:x},{path:"dashboard",component:x},{path:"all-customers",component:Y},{path:"new-customer",component:K},{path:"view-customer",component:(()=>{class o{constructor(t,n,r){this.router=t,this.customersApi=n,this.customersPrint=r,this.navHeading=[{text:"All Customers",url:"/home/customers/all-customers"},{text:"View Customer",url:"/home/customers/view-customer"}],this.isCustomerLoading=!1,this.isCustomerSaving=!1,this.isCustomerDeleting=!1}ngOnInit(){this.getCustomer()}getCustomer(){this.isCustomerLoading=!0,this.customersApi.getCustomer().then(t=>{console.log(t),this.customerData=t,this.isCustomerLoading=!1,this.customerForm.customerForm.controls.customerCode.setValue(this.customerData.data().customer_code),this.customerForm.customerForm.controls.customerName.setValue(this.customerData.data().customer_name),this.customerForm.customerForm.controls.customerType.setValue(this.customerData.data().customer_type),this.customerForm.customerForm.controls.phone.setValue(this.customerData.data().phone),this.customerForm.customerForm.controls.email.setValue(this.customerData.data().email),this.customerForm.customerForm.controls.address.setValue(this.customerData.data().address),this.customerForm.customerForm.controls.state.setValue(this.customerData.data().state),this.customerForm.customerForm.controls.city.setValue(this.customerData.data().city),this.customerForm.customerForm.controls.allergies.setValue(this.customerData.data().allergies),this.customerForm.customerForm.controls.preferences.setValue(this.customerData.data().preferences)},t=>{console.log(t),this.isCustomerLoading=!1,this.connectionToast.openToast()})}updateCustomer(){console.log("u are saving a new customer");var t={customer_code:this.customerForm.customerForm.controls.customerCode.value,customer_name:this.customerForm.customerForm.controls.customerName.value,customer_type:this.customerForm.customerForm.controls.customerType.value,phone:this.customerForm.customerForm.controls.phone.value,email:this.customerForm.customerForm.controls.email.value,address:this.customerForm.customerForm.controls.address.value,state:this.customerForm.customerForm.controls.state.value,city:this.customerForm.customerForm.controls.city.value,allergies:this.customerForm.customerForm.controls.allergies.value,preferences:this.customerForm.customerForm.controls.preferences.value};console.log(t),this.isCustomerSaving=!0,this.customersApi.updateCustomer(t).then(n=>{console.log(n),this.isCustomerSaving=!1},n=>{console.log(n),this.isCustomerSaving=!1,this.connectionToast.openToast()})}confirmDelete(){this.deleteModal.openModal()}deleteCustomer(){this.isCustomerDeleting=!0,this.customersApi.deleteCustomer().then(t=>{console.log(t),this.router.navigateByUrl("/home/customers/all-customers")},t=>{console.log(t),this.connectionToast.openToast()})}onPrint(){console.log("lets start printing..."),this.customersPrint.printViewCustomer()}}return o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275directiveInject(c.F0),e.\u0275\u0275directiveInject(g.M),e.\u0275\u0275directiveInject(A))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["app-view-customer"]],viewQuery:function(t,n){if(1&t&&(e.\u0275\u0275viewQuery(Z,5,S),e.\u0275\u0275viewQuery($,5,h.Y),e.\u0275\u0275viewQuery(X,5,T.z)),2&t){let r;e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(n.customerForm=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(n.connectionToast=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(n.deleteModal=r.first)}},decls:10,vars:3,consts:[[3,"headings"],[1,"container"],["customerFormComponentReference",""],["class","row page-form",4,"ngIf"],["connectionToastComponentReference",""],[3,"confirmEvent"],["deleteModalComponentReference",""],[1,"row","page-form"],[1,"col-md-12"],["type","button","routerLink","/home/customers/all-customers",1,"btn","btn-secondary","btn-sm","float-end","ms-1","page-form-btn"],["type","button",1,"btn","btn-secondary","btn-sm","float-end","ms-1","page-form-btn",3,"disabled","click"],[1,"btn","btn-secondary","btn-sm","float-end","ms-1","page-form-btn",3,"disabled","click"],["type","button",1,"btn","btn-sm","float-end","ms-1","btn-light","page-form-btn"],["role","status",1,"spinner-grow","spinner-grow-sm"],[1,"visually-hidden"]],template:function(t,n){1&t&&(e.\u0275\u0275element(0,"app-module-topnav",0),e.\u0275\u0275elementStart(1,"div",1),e.\u0275\u0275element(2,"app-customer-form",null,2),e.\u0275\u0275template(4,q,8,2,"div",3),e.\u0275\u0275template(5,ee,6,0,"div",3),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(6,"app-connection-toast",null,4),e.\u0275\u0275elementStart(8,"app-delete-modal",5,6),e.\u0275\u0275listener("confirmEvent",function(){return n.deleteCustomer()}),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275property("headings",n.navHeading),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",!n.isCustomerLoading),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.isCustomerLoading))},directives:[_.H,S,u.O5,h.Y,T.z,c.rH],styles:[""]}),o})(),canActivate:[(()=>{class o{constructor(t){this.router=t}canActivate(t){return!!sessionStorage.getItem("restaurant_customer_id")||(this.router.navigateByUrl("/home/customers"),!1)}}return o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275inject(c.F0))},o.\u0275prov=e.\u0275\u0275defineInjectable({token:o,factory:o.\u0275fac,providedIn:"root"}),o})()]}]}];let ne=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.\u0275\u0275defineNgModule({type:o}),o.\u0275inj=e.\u0275\u0275defineInjector({imports:[[c.Bz.forChild(te)],c.Bz]}),o})();var oe=m(7264),I=m(5018);let re=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.\u0275\u0275defineNgModule({type:o}),o.\u0275inj=e.\u0275\u0275defineInjector({imports:[[u.ez,c.Bz,l.u5,l.UX,w.m9,I.p]]}),o})(),se=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.\u0275\u0275defineNgModule({type:o}),o.\u0275inj=e.\u0275\u0275defineInjector({imports:[[u.ez,ne,oe.M,I.p,re]]}),o})()},365:(E,v,m)=>{m.d(v,{M:()=>e});var u=m(2741),c=m(9805);let e=(()=>{class p{constructor(a){this.afs=a,this.customerRef=this.afs.collection("restaurant/module_customers/restaurant_customer")}createCustomer(a){return this.customerRef.add(a)}getCustomer(){return this.customerRef.doc(String(sessionStorage.getItem("restaurant_customer_id"))).ref.get()}updateCustomer(a){return this.customerRef.doc(String(sessionStorage.getItem("restaurant_customer_id"))).update(a)}deleteCustomer(){return this.customerRef.doc(String(sessionStorage.getItem("restaurant_customer_id"))).delete()}getAccountCustomer(a,d){return this.customerRef.ref.where("account","==",localStorage.getItem("restaurant_id")).orderBy(null==a?void 0:a.field,null==a?void 0:a.direction).limit(d).get()}getAccountCustomerNext(a,d,f){return this.customerRef.ref.where("account","==",localStorage.getItem("restaurant_id")).orderBy(null==a?void 0:a.field,null==a?void 0:a.direction).startAfter(f).limit(d).get()}getAccountCustomerPrev(a,d,f){return this.customerRef.ref.where("account","==",localStorage.getItem("restaurant_id")).orderBy(null==a?void 0:a.field,null==a?void 0:a.direction).startAt(f).limit(d).get()}getAllAccountCustomer(){return this.customerRef.ref.where("account","==",localStorage.getItem("restaurant_id")).orderBy("created_by","desc").get()}getWeekCustomer(a,d){return this.customerRef.ref.where("account","==",localStorage.getItem("restaurant_id")).where("created_at","<",a).where("created_at",">",d).get()}}return p.\u0275fac=function(a){return new(a||p)(u.\u0275\u0275inject(c.ST))},p.\u0275prov=u.\u0275\u0275defineInjectable({token:p,factory:p.\u0275fac,providedIn:"root"}),p})()}}]);