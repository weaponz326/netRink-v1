"use strict";(self.webpackChunkang_fire=self.webpackChunkang_fire||[]).push([[853],{4277:(g,u,o)=>{o.d(u,{V:()=>a});var e=o(6274),_=o(4114),f=o(5136),c=o(5018),p=o(2741);let a=(()=>{class s{}return s.\u0275fac=function(h){return new(h||s)},s.\u0275mod=p.\u0275\u0275defineNgModule({type:s}),s.\u0275inj=p.\u0275\u0275defineInjector({imports:[[e.ez,_.zE,f.y$,c.p]]}),s})()},7276:(g,u,o)=>{o.d(u,{$:()=>k});var e=o(2741),_=o(1580),f=o(1766),c=o(6274);const p=["openButtonElementReference"],a=["closeButtonElementReference"],s=["connectionToastComponentReference"];function d(r,l){if(1&r){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",31),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(n),e.\u0275\u0275nextContext().sortTable("order_code","desc")}),e.\u0275\u0275elementEnd()}}function h(r,l){if(1&r){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",32),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(n),e.\u0275\u0275nextContext().sortTable("order_code","asc")}),e.\u0275\u0275elementEnd()}}function S(r,l){if(1&r){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",33),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(n),e.\u0275\u0275nextContext().sortTable("order_code","desc")}),e.\u0275\u0275elementEnd()}}function v(r,l){if(1&r){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",31),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(n),e.\u0275\u0275nextContext().sortTable("order_date","desc")}),e.\u0275\u0275elementEnd()}}function E(r,l){if(1&r){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",32),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(n),e.\u0275\u0275nextContext().sortTable("order_date","asc")}),e.\u0275\u0275elementEnd()}}function b(r,l){if(1&r){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",33),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(n),e.\u0275\u0275nextContext().sortTable("order_date","desc")}),e.\u0275\u0275elementEnd()}}function C(r,l){if(1&r){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",31),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(n),e.\u0275\u0275nextContext().sortTable("customer_name","desc")}),e.\u0275\u0275elementEnd()}}function O(r,l){if(1&r){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",32),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(n),e.\u0275\u0275nextContext().sortTable("customer_name","asc")}),e.\u0275\u0275elementEnd()}}function x(r,l){if(1&r){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",33),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(n),e.\u0275\u0275nextContext().sortTable("customer_name","desc")}),e.\u0275\u0275elementEnd()}}function y(r,l){if(1&r){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",31),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(n),e.\u0275\u0275nextContext().sortTable("order_date","desc")}),e.\u0275\u0275elementEnd()}}function P(r,l){if(1&r){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",32),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(n),e.\u0275\u0275nextContext().sortTable("order_date","asc")}),e.\u0275\u0275elementEnd()}}function T(r,l){if(1&r){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",33),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(n),e.\u0275\u0275nextContext().sortTable("order_date","desc")}),e.\u0275\u0275elementEnd()}}function w(r,l){if(1&r){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"tr",34),e.\u0275\u0275listener("dblclick",function(){const m=e.\u0275\u0275restoreView(n).$implicit;return e.\u0275\u0275nextContext().selectRow(m)}),e.\u0275\u0275elementStart(1,"td"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"td"),e.\u0275\u0275text(4),e.\u0275\u0275pipe(5,"date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"td"),e.\u0275\u0275text(7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"td"),e.\u0275\u0275text(9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()}if(2&r){const n=l.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null==n?null:n.data().order_code),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(5,4,null==n?null:n.data().order_date)),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(null==n?null:n.data().customer.customer_name),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null==n?null:n.data().total_amount)}}function I(r,l){1&r&&(e.\u0275\u0275elementStart(0,"tr",35),e.\u0275\u0275elementStart(1,"td",19),e.\u0275\u0275elementStart(2,"div",36),e.\u0275\u0275elementStart(3,"span",37),e.\u0275\u0275text(4,"Loading..."),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd())}function D(r,l){1&r&&(e.\u0275\u0275elementStart(0,"tr",35),e.\u0275\u0275elementStart(1,"td",19),e.\u0275\u0275elementStart(2,"p",38),e.\u0275\u0275text(3,"No data available"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd())}let k=(()=>{class r{constructor(n){this.ordersApi=n,this.rowSelected=new e.EventEmitter,this.ordersGridData=[],this.isFetchingGridData=!1,this.isDataAvailable=!0,this.firstInResponse=[],this.lastInResponse=[],this.nextStartAfter=[],this.prevStartAt=[],this.pageNumber=0,this.disableNext=!0,this.disablePrev=!0,this.sortParams={field:"created_at",direction:"desc"}}ngOnInit(){}openModal(){this.ordersGridData=[],this.getAccountOrder(),this.openButton.nativeElement.click()}getAccountOrder(){this.isFetchingGridData=!0,this.ordersApi.getAccountOrder(this.sortParams,15).then(n=>{console.log(n),this.ordersGridData=n.docs,this.isFetchingGridData=!1,this.prevStartAt=this.firstInResponse,this.nextStartAfter=n.docs[n.docs.length-1],this.firstInResponse=n.docs[0],this.pageNumber=1,n.docs.length||(this.isDataAvailable=!1),!n.docs.length||n.docs.length<15?(this.disableNext=!0,this.disablePrev=!0):(this.disableNext=!1,this.disablePrev=!0)},n=>{console.log(n),this.isFetchingGridData=!1,this.connectionToast.openToast()})}nextPage(n){n.preventDefault(),this.isFetchingGridData=!0,this.ordersApi.getAccountOrderNext(this.sortParams,15,this.nextStartAfter).then(t=>{console.log(t),this.ordersGridData=t.docs,this.isFetchingGridData=!1,this.prevStartAt=this.firstInResponse,this.nextStartAfter=t.docs[t.docs.length-1],this.firstInResponse=t.docs[0],this.pageNumber++,t.docs.length<15&&(this.disableNext=!0,this.disablePrev=!1)},t=>{console.log(t),this.isFetchingGridData=!1,this.connectionToast.openToast()})}previousPage(n){n.preventDefault(),this.isFetchingGridData=!0,this.ordersApi.getAccountOrderPrev(this.sortParams,15,this.prevStartAt).then(t=>{console.log(t),this.ordersGridData=t.docs,this.isFetchingGridData=!1,t.docs.length||(this.isDataAvailable=!1),this.prevStartAt=this.firstInResponse,this.nextStartAfter=t.docs[t.docs.length-1],this.firstInResponse=t.docs[0],this.pageNumber--,1==this.pageNumber&&(this.disableNext=!1,this.disablePrev=!0)},t=>{console.log(t),this.isFetchingGridData=!1,this.connectionToast.openToast()})}sortTable(n,t){this.sortParams.field=n,this.sortParams.direction=t,this.getAccountOrder()}selectRow(n){this.rowSelected.emit(n),this.closeButton.nativeElement.click(),console.log(n)}}return r.\u0275fac=function(n){return new(n||r)(e.\u0275\u0275directiveInject(f.O))},r.\u0275cmp=e.\u0275\u0275defineComponent({type:r,selectors:[["app-select-order"]],viewQuery:function(n,t){if(1&n&&(e.\u0275\u0275viewQuery(p,5,e.ElementRef),e.\u0275\u0275viewQuery(a,5,e.ElementRef),e.\u0275\u0275viewQuery(s,5,_.Y)),2&n){let i;e.\u0275\u0275queryRefresh(i=e.\u0275\u0275loadQuery())&&(t.openButton=i.first),e.\u0275\u0275queryRefresh(i=e.\u0275\u0275loadQuery())&&(t.closeButton=i.first),e.\u0275\u0275queryRefresh(i=e.\u0275\u0275loadQuery())&&(t.connectionToast=i.first)}},outputs:{rowSelected:"rowSelected"},decls:57,vars:20,consts:[["data-bs-toggle","modal","data-bs-target","#selectOrderModal",3,"hidden"],["openButtonElementReference",""],["id","selectOrderModal","tabindex","-1","aria-labelledby","selectOrderModalLabel","aria-hidden","true",1,"modal","fade","select-table-modal"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header","bg-light"],["id","selectOrderModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body","overflow-auto"],[1,"table","table-bordered","table-sm","w-100","page-table"],[1,"bg-light"],["width","20%",1,"min-width-2"],["class","bi bi-filter float-end list-pointer",3,"click",4,"ngIf"],["class","bi bi-sort-down float-end list-pointer",3,"click",4,"ngIf"],["class","bi bi-sort-up float-end list-pointer",3,"click",4,"ngIf"],["width","25%",1,"min-width-3"],["width","35%",1,"min-width-3"],["class","table-pointer",3,"dblclick",4,"ngFor","ngForOf"],["class","text-center",4,"ngIf"],["colspan","4"],["aria-label","Page navigation",1,"nav-light","float-end"],[1,"pagination","pagination-sm","mb-0","justify-content-end"],[1,"page-item",3,"ngClass"],["href","#","aria-label","First",1,"page-link",3,"click"],[1,"bi","bi-caret-left-fill"],[1,"page-item"],["href","#","aria-label","Current",1,"page-link",3,"click"],["href","#","aria-label","Last",1,"page-link",3,"click"],[1,"bi","bi-caret-right-fill"],["closeButtonElementReference",""],["connectionToastComponentReference",""],[1,"bi","bi-filter","float-end","list-pointer",3,"click"],[1,"bi","bi-sort-down","float-end","list-pointer",3,"click"],[1,"bi","bi-sort-up","float-end","list-pointer",3,"click"],[1,"table-pointer",3,"dblclick"],[1,"text-center"],["role","status",1,"spinner-grow","m-4"],[1,"visually-hidden"],[1,"m-4"]],template:function(n,t){1&n&&(e.\u0275\u0275elementStart(0,"button",0,1),e.\u0275\u0275text(2," Launch demo modal\n"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",2),e.\u0275\u0275elementStart(4,"div",3),e.\u0275\u0275elementStart(5,"div",4),e.\u0275\u0275elementStart(6,"div",5),e.\u0275\u0275elementStart(7,"span",6),e.\u0275\u0275text(8,"Select Restaurant Order"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(9,"button",7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"div",8),e.\u0275\u0275elementStart(11,"table",9),e.\u0275\u0275elementStart(12,"thead"),e.\u0275\u0275elementStart(13,"tr",10),e.\u0275\u0275elementStart(14,"th",11),e.\u0275\u0275text(15," Order ID "),e.\u0275\u0275template(16,d,1,0,"i",12),e.\u0275\u0275template(17,h,1,0,"i",13),e.\u0275\u0275template(18,S,1,0,"i",14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"th",15),e.\u0275\u0275text(20," Order Date "),e.\u0275\u0275template(21,v,1,0,"i",12),e.\u0275\u0275template(22,E,1,0,"i",13),e.\u0275\u0275template(23,b,1,0,"i",14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(24,"th",16),e.\u0275\u0275text(25," Customer Name "),e.\u0275\u0275template(26,C,1,0,"i",12),e.\u0275\u0275template(27,O,1,0,"i",13),e.\u0275\u0275template(28,x,1,0,"i",14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(29,"th",11),e.\u0275\u0275text(30," Total Amount "),e.\u0275\u0275template(31,y,1,0,"i",12),e.\u0275\u0275template(32,P,1,0,"i",13),e.\u0275\u0275template(33,T,1,0,"i",14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(34,"tbody"),e.\u0275\u0275template(35,w,10,6,"tr",17),e.\u0275\u0275template(36,I,5,0,"tr",18),e.\u0275\u0275template(37,D,4,0,"tr",18),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(38,"tfoot"),e.\u0275\u0275elementStart(39,"tr",10),e.\u0275\u0275elementStart(40,"td",19),e.\u0275\u0275elementStart(41,"nav",20),e.\u0275\u0275elementStart(42,"ul",21),e.\u0275\u0275elementStart(43,"li",22),e.\u0275\u0275elementStart(44,"a",23),e.\u0275\u0275listener("click",function(m){return t.previousPage(m)}),e.\u0275\u0275element(45,"i",24),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(46,"li",25),e.\u0275\u0275elementStart(47,"a",26),e.\u0275\u0275listener("click",function(m){return m.preventDefault()}),e.\u0275\u0275text(48),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(49,"li",22),e.\u0275\u0275elementStart(50,"a",27),e.\u0275\u0275listener("click",function(m){return t.nextPage(m)}),e.\u0275\u0275element(51,"i",28),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(52,"button",0,29),e.\u0275\u0275text(54," Launch demo modal "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(55,"app-connection-toast",null,30)),2&n&&(e.\u0275\u0275property("hidden",!0),e.\u0275\u0275advance(16),e.\u0275\u0275property("ngIf","order_code"!=t.sortParams.field),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","order_code"==t.sortParams.field&&"desc"==t.sortParams.direction),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","order_code"==t.sortParams.field&&"asc"==t.sortParams.direction),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf","order_date"!=t.sortParams.field),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","order_date"==t.sortParams.field&&"desc"==t.sortParams.direction),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","order_date"==t.sortParams.field&&"asc"==t.sortParams.direction),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf","customer_name"!=t.sortParams.field),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","customer_name"==t.sortParams.field&&"desc"==t.sortParams.direction),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","customer_name"==t.sortParams.field&&"asc"==t.sortParams.direction),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf","order_date"!=t.sortParams.field),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","order_date"==t.sortParams.field&&"desc"==t.sortParams.direction),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","order_date"==t.sortParams.field&&"asc"==t.sortParams.direction),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",t.ordersGridData),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.isFetchingGridData),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!t.isDataAvailable&&!t.isFetchingGridData),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngClass",t.disablePrev?"disabled":""),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate1(" ",t.pageNumber," "),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",t.disableNext?"disabled":""),e.\u0275\u0275advance(3),e.\u0275\u0275property("hidden",!0))},directives:[c.O5,c.sg,c.mk,_.Y],pipes:[c.uU],styles:[""]}),r})()},6827:(g,u,o)=>{o.d(u,{Y:()=>f});var e=o(2741),_=o(9805);let f=(()=>{class c{constructor(a){this.afs=a,this.paymentRef=this.afs.collection("restaurant/module_payments/restaurant_payment")}createPayment(a){return this.paymentRef.add(a)}getPayment(){return this.paymentRef.doc(String(sessionStorage.getItem("restaurant_payment_id"))).ref.get()}updatePayment(a){return this.paymentRef.doc(String(sessionStorage.getItem("restaurant_payment_id"))).update(a)}deletePayment(){return this.paymentRef.doc(String(sessionStorage.getItem("restaurant_payment_id"))).delete()}getAccountPayment(a,s){return this.paymentRef.ref.where("account","==",localStorage.getItem("restaurant_id")).orderBy(null==a?void 0:a.field,null==a?void 0:a.direction).limit(s).get()}getAccountPaymentNext(a,s,d){return this.paymentRef.ref.where("account","==",localStorage.getItem("restaurant_id")).orderBy(null==a?void 0:a.field,null==a?void 0:a.direction).startAfter(d).limit(s).get()}getAccountPaymentPrev(a,s,d){return this.paymentRef.ref.where("account","==",localStorage.getItem("restaurant_id")).orderBy(null==a?void 0:a.field,null==a?void 0:a.direction).startAt(d).limit(s).get()}getAllAccountPayment(){return this.paymentRef.ref.where("account","==",localStorage.getItem("restaurant_id")).orderBy("created_at","desc").get()}getWeekPayment(a,s){return this.paymentRef.ref.where("account","==",localStorage.getItem("restaurant_id")).where("created_at","<",a).where("created_at",">",s).get()}}return c.\u0275fac=function(a){return new(a||c)(e.\u0275\u0275inject(_.ST))},c.\u0275prov=e.\u0275\u0275defineInjectable({token:c,factory:c.\u0275fac,providedIn:"root"}),c})()}}]);