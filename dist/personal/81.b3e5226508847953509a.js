"use strict";(self.webpackChunkang_fire=self.webpackChunkang_fire||[]).push([[81],{7081:(qt,w,s)=>{s.r(w),s.d(w,{AccountsPageModule:()=>Zt});var d=s(6274),p=s(9202),t=s(2741),R=s(8088),G=s(7632);let Q=(()=>{class a{constructor(){this.navLinks=[{text:"All Accounts",url:"/home/accounts/all-accounts",icon:"bi bi-list-ul"},{text:"All Transactions",url:"/home/accounts/all-transactions",icon:"bi bi-list-ul"}]}ngOnInit(){}}return a.\u0275fac=function(e){return new(e||a)},a.\u0275cmp=t.\u0275\u0275defineComponent({type:a,selectors:[["app-accounts-page"]],decls:6,vars:4,consts:[[3,"navBrand","source"],["id","wrapper"],[3,"navLinks","heading"],["id","content-wrapper",1,"d-flex","flex-column"],["id","content"]],template:function(e,n){1&e&&(t.\u0275\u0275element(0,"app-main-navbar",0),t.\u0275\u0275elementStart(1,"div",1),t.\u0275\u0275element(2,"app-module-sidenav",2),t.\u0275\u0275elementStart(3,"div",3),t.\u0275\u0275elementStart(4,"div",4),t.\u0275\u0275element(5,"router-outlet"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()),2&e&&(t.\u0275\u0275property("navBrand","nR Personal")("source","Personal"),t.\u0275\u0275advance(2),t.\u0275\u0275property("navLinks",n.navLinks)("heading","Accounts"))},directives:[R.D,G.m,p.lC],styles:[""]}),a})();var r=s(3324),x=s(756),u=s(1580),h=s(9839);const B=["newButtonElementReference"],L=["dismissButtonElementReference"],M=["connectionToastComponentReference"];let k=(()=>{class a{constructor(e,n){this.router=e,this.accountsApi=n,this.accountForm=new r.cw({}),this.isSavingAccount=!1}ngOnInit(){this.initAccountForm()}openModal(){this.accountForm.controls.accountType.setValue("Savings"),this.newButton.nativeElement.click()}initAccountForm(){this.accountForm=new r.cw({accountName:new r.NI(""),accountNumber:new r.NI(""),bankName:new r.NI(""),accountType:new r.NI("")})}createAccount(){this.isSavingAccount=!0;let e={created_at:(0,x.Bt)(),user:localStorage.getItem("personal_id"),account_name:this.accountForm.controls.accountName.value,account_number:this.accountForm.controls.accountNumber.value,bank_name:this.accountForm.controls.bankName.value,account_type:this.accountForm.controls.accountType.value};console.log(e),this.accountsApi.createAccount(e).then(n=>{console.log(n),n.id&&(sessionStorage.setItem("personal_account_id",n.id),this.router.navigateByUrl("/home/accounts/view-account"),this.dismissButton.nativeElement.click()),this.isSavingAccount=!1},n=>{console.log(n),this.isSavingAccount=!1,this.connectionToast.openToast()})}}return a.\u0275fac=function(e){return new(e||a)(t.\u0275\u0275directiveInject(p.F0),t.\u0275\u0275directiveInject(h.H))},a.\u0275cmp=t.\u0275\u0275defineComponent({type:a,selectors:[["app-add-account"]],viewQuery:function(e,n){if(1&e&&(t.\u0275\u0275viewQuery(B,5,t.ElementRef),t.\u0275\u0275viewQuery(L,5,t.ElementRef),t.\u0275\u0275viewQuery(M,5,u.Y)),2&e){let o;t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(n.newButton=o.first),t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(n.dismissButton=o.first),t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(n.connectionToast=o.first)}},decls:48,vars:3,consts:[["data-bs-toggle","modal","data-bs-target","#newAccountModal",3,"hidden"],["newButtonElementReference",""],["id","newAccountModal","tabindex","-1","aria-labelledby","newAccountModalLabel","aria-hidden","true",1,"modal","fade","form-modal"],[1,"modal-dialog"],[1,"modal-content"],[1,"page-form",3,"formGroup","ngSubmit"],[1,"modal-header","bg-light"],["id","newAccountModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],["dismissButtonElementReference",""],[1,"modal-body"],[1,"row","mb-1"],[1,"col-md-4"],[1,"float-md-end","float-sm-start","mt-1"],[1,"col-md-8"],["formControlName","accountName",1,"form-control","form-control-sm","w-100"],["formControlName","accountNumber",1,"form-control","form-control-sm","w-100"],["formControlName","bankName",1,"form-control","form-control-sm","w-100"],["formControlName","accountType",1,"form-control","form-control-sm","w-100"],[1,"modal-footer"],["type","submit",1,"btn","btn-sm","btn-secondary","modal-form-btn",3,"disabled"],["type","button","data-bs-dismiss","modal",1,"btn","btn-sm","btn-secondary","modal-form-btn"],["connectionToastComponentReference",""]],template:function(e,n){1&e&&(t.\u0275\u0275elementStart(0,"button",0,1),t.\u0275\u0275text(2," Launch demo modal\n"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"div",2),t.\u0275\u0275elementStart(4,"div",3),t.\u0275\u0275elementStart(5,"div",4),t.\u0275\u0275elementStart(6,"form",5),t.\u0275\u0275listener("ngSubmit",function(){return n.createAccount()}),t.\u0275\u0275elementStart(7,"div",6),t.\u0275\u0275elementStart(8,"span",7),t.\u0275\u0275text(9,"Add New Account"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(10,"button",8,9),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(12,"div",10),t.\u0275\u0275elementStart(13,"div",11),t.\u0275\u0275elementStart(14,"div",12),t.\u0275\u0275elementStart(15,"label",13),t.\u0275\u0275text(16,"Account Name :"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(17,"div",14),t.\u0275\u0275element(18,"input",15),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(19,"div",11),t.\u0275\u0275elementStart(20,"div",12),t.\u0275\u0275elementStart(21,"label",13),t.\u0275\u0275text(22,"Account Number :"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(23,"div",14),t.\u0275\u0275element(24,"input",16),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(25,"div",11),t.\u0275\u0275elementStart(26,"div",12),t.\u0275\u0275elementStart(27,"label",13),t.\u0275\u0275text(28,"Bank Name :"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(29,"div",14),t.\u0275\u0275element(30,"input",17),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(31,"div",11),t.\u0275\u0275elementStart(32,"div",12),t.\u0275\u0275elementStart(33,"label",13),t.\u0275\u0275text(34,"Account Type :"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(35,"div",14),t.\u0275\u0275elementStart(36,"select",18),t.\u0275\u0275elementStart(37,"option"),t.\u0275\u0275text(38,"Current"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(39,"option"),t.\u0275\u0275text(40,"Savings"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(41,"div",19),t.\u0275\u0275elementStart(42,"button",20),t.\u0275\u0275text(43,"Save"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(44,"button",21),t.\u0275\u0275text(45,"Cancel"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(46,"app-connection-toast",null,22)),2&e&&(t.\u0275\u0275property("hidden",!0),t.\u0275\u0275advance(6),t.\u0275\u0275property("formGroup",n.accountForm),t.\u0275\u0275advance(36),t.\u0275\u0275property("disabled",n.isSavingAccount))},directives:[r._Y,r.JL,r.sg,r.Fj,r.JJ,r.u,r.EJ,r.YN,r.Kr,u.Y],styles:[""]}),a})();var S=s(1921),j=s(6424);let E=(()=>{class a{constructor(e,n){this.pdfPrint=e,this.accountsApi=n}printAllAccounts(){var e=this;return(0,S.Z)(function*(){const n=yield e.accountsApi.getAllUserAccount();var o=[["Account Name","Account Number","Bank Name"]];for(let _ of n.docs){var c=[];let m=_.data();c.push(m.account_name),c.push(m.account_number),c.push(m.bank_name),o.push(c)}e.pdfPrint.openPdf([{layout:"lightHorizontalLines",table:{headerRows:1,widths:["45%","25%","30%"],body:o}}])})()}printViewAccount(){var e=this;return(0,S.Z)(function*(){const n=e.accountsApi.getAccount(),o=e.accountsApi.getAccountTransaction(),[c,l]=yield Promise.all([n,o]);let _=c.data();var m=[["Transaction Date","Description","Transaction Type","Amount"]];for(let y of l.docs){var v=[];let f=y.data();v.push(f.transaction_date),v.push(f.description),v.push(f.transaction_type),v.push(f.amount),m.push(v)}let A=0;for(let y of l.docs){let f=y.data();"Credit"==f.transaction_type?A+=f.amount:A-=f.amount}m.push(["","","",A.toString()]),e.pdfPrint.openPdf([{columns:[[{text:"Account Name: "+_.account_name},{text:"Account No: "+_.account_number},{text:"Bank Name: "+_.bank_name},{text:"Account Type: "+_.account_type}],[{text:"Account Balance",bold:!0,alignment:"center"},{text:"$"+A,bold:!0,alignment:"center"}]]},{text:"Transactions",bold:!0,margin:[0,20,0,10]},{layout:"lightHorizontalLines",table:{headerRows:1,widths:["25%","35%","20%","20%"],body:m}}])})()}printAllTransactions(){var e=this;return(0,S.Z)(function*(){const n=yield e.accountsApi.getAllUserTransaction();var o=[["Transaction Date","Account Name","Bank Name","Description","Transaction Type","Amount"]];for(let _ of n.docs){var c=[];let m=_.data();c.push(m.transaction_date),c.push(m.account.data.account_name),c.push(m.account.data.bank_name),c.push(m.description),c.push(m.transaction_type),c.push(m.amount),o.push(c)}e.pdfPrint.openPdf([{layout:"lightHorizontalLines",table:{headerRows:1,widths:["15%","20%","18%","23%","12%","12%"],body:o}}])})()}}return a.\u0275fac=function(e){return new(e||a)(t.\u0275\u0275inject(j.n),t.\u0275\u0275inject(h.H))},a.\u0275prov=t.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var g=s(8972);const O=["connectionToastComponentReference"],U=["addAccountComponentReference"];function H(a,i){if(1&a){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"i",32),t.\u0275\u0275listener("click",function(){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext().sortTable("account_name","desc")}),t.\u0275\u0275elementEnd()}}function Y(a,i){if(1&a){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"i",33),t.\u0275\u0275listener("click",function(){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext().sortTable("account_name","asc")}),t.\u0275\u0275elementEnd()}}function z(a,i){if(1&a){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"i",34),t.\u0275\u0275listener("click",function(){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext().sortTable("account_name","desc")}),t.\u0275\u0275elementEnd()}}function J(a,i){if(1&a){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"i",32),t.\u0275\u0275listener("click",function(){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext().sortTable("account_number","desc")}),t.\u0275\u0275elementEnd()}}function $(a,i){if(1&a){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"i",33),t.\u0275\u0275listener("click",function(){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext().sortTable("account_number","asc")}),t.\u0275\u0275elementEnd()}}function W(a,i){if(1&a){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"i",34),t.\u0275\u0275listener("click",function(){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext().sortTable("account_number","desc")}),t.\u0275\u0275elementEnd()}}function Z(a,i){if(1&a){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"i",32),t.\u0275\u0275listener("click",function(){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext().sortTable("bank_name","desc")}),t.\u0275\u0275elementEnd()}}function K(a,i){if(1&a){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"i",33),t.\u0275\u0275listener("click",function(){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext().sortTable("bank_name","asc")}),t.\u0275\u0275elementEnd()}}function q(a,i){if(1&a){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"i",34),t.\u0275\u0275listener("click",function(){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext().sortTable("bank_name","desc")}),t.\u0275\u0275elementEnd()}}function X(a,i){if(1&a){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"tr",35),t.\u0275\u0275listener("dblclick",function(){const c=t.\u0275\u0275restoreView(e).$implicit;return t.\u0275\u0275nextContext().viewAccount(c.id)}),t.\u0275\u0275elementStart(1,"td"),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"td"),t.\u0275\u0275text(4),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(5,"td"),t.\u0275\u0275text(6),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()}if(2&a){const e=i.$implicit;t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(null==e?null:e.data().account_name),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(null==e?null:e.data().account_number),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(null==e?null:e.data().bank_name)}}function tt(a,i){1&a&&(t.\u0275\u0275elementStart(0,"tr",36),t.\u0275\u0275elementStart(1,"td",20),t.\u0275\u0275elementStart(2,"div",37),t.\u0275\u0275elementStart(3,"span",38),t.\u0275\u0275text(4,"Loading..."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd())}function et(a,i){1&a&&(t.\u0275\u0275elementStart(0,"tr",36),t.\u0275\u0275elementStart(1,"td",20),t.\u0275\u0275elementStart(2,"p",39),t.\u0275\u0275text(3,"No data available"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd())}let nt=(()=>{class a{constructor(e,n,o){this.router=e,this.accountsApi=n,this.accountsPrint=o,this.navHeading=[{text:"All Accounts",url:"/home/accounts/all-accounts"}],this.accountsGridData=[],this.isFetchingGridData=!1,this.isDataAvailable=!0,this.firstInResponse=[],this.lastInResponse=[],this.prevStartAt=[],this.nextStartAfter=[],this.pageNumber=0,this.disableNext=!0,this.disablePrev=!0,this.sortParams={field:"created_at",direction:"desc"}}ngOnInit(){this.getUserAccount()}getUserAccount(){this.isFetchingGridData=!0,this.accountsApi.getUserAccount(this.sortParams,20).then(e=>{console.log(e),this.accountsGridData=e.docs,this.isFetchingGridData=!1,this.prevStartAt=this.firstInResponse,this.nextStartAfter=e.docs[e.docs.length-1],this.firstInResponse=e.docs[0],this.pageNumber=1,this.isDataAvailable=!!e.docs.length,!e.docs.length||e.docs.length<20?(this.disableNext=!0,this.disablePrev=!0):(this.disableNext=!1,this.disablePrev=!0)},e=>{console.log(e),this.isFetchingGridData=!1,this.connectionToast.openToast()})}nextPage(e){e.preventDefault(),this.isFetchingGridData=!0,this.accountsApi.getUserAccountNext(this.sortParams,20,this.nextStartAfter).then(n=>{console.log(n),this.accountsGridData=n.docs,this.isFetchingGridData=!1,this.prevStartAt=this.firstInResponse,this.nextStartAfter=n.docs[n.docs.length-1],this.firstInResponse=n.docs[0],this.pageNumber++,n.docs.length<20&&(this.disableNext=!0,this.disablePrev=!1)},n=>{console.log(n),this.isFetchingGridData=!1,this.connectionToast.openToast()})}previousPage(e){e.preventDefault(),this.isFetchingGridData=!0,this.accountsApi.getUserAccountPrev(this.sortParams,20,this.prevStartAt).then(n=>{console.log(n),this.accountsGridData=n.docs,this.isFetchingGridData=!1,this.prevStartAt=this.firstInResponse,this.nextStartAfter=n.docs[n.docs.length-1],this.firstInResponse=n.docs[0],this.pageNumber--,1==this.pageNumber&&(this.disableNext=!1,this.disablePrev=!0)},n=>{console.log(n),this.isFetchingGridData=!1,this.connectionToast.openToast()})}sortTable(e,n){this.sortParams.field=e,this.sortParams.direction=n,this.getUserAccount()}viewAccount(e){console.log(e),sessionStorage.setItem("personal_account_id",e),this.router.navigateByUrl("/home/accounts/view-account")}onPrint(){console.log("lets start printing..."),this.accountsPrint.printAllAccounts()}}return a.\u0275fac=function(e){return new(e||a)(t.\u0275\u0275directiveInject(p.F0),t.\u0275\u0275directiveInject(h.H),t.\u0275\u0275directiveInject(E))},a.\u0275cmp=t.\u0275\u0275defineComponent({type:a,selectors:[["app-all-accounts"]],viewQuery:function(e,n){if(1&e&&(t.\u0275\u0275viewQuery(O,5,u.Y),t.\u0275\u0275viewQuery(U,5,k)),2&e){let o;t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(n.connectionToast=o.first),t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(n.addAccount=o.first)}},decls:51,vars:18,consts:[[3,"headings","showPrint","print"],[1,"container"],[1,"row"],[1,"col-md-9"],[1,"row","mb-3"],[1,"col-md-12"],[1,"btn","btn-secondary","page-add-btn",3,"click"],[1,"btn","btn-light","border","float-end","page-refresh-btn",3,"disabled","click"],[1,"bi","bi-arrow-clockwise"],[1,"overflow-auto"],[1,"table","table-bordered","table-sm","w-100","page-table"],[1,"bg-light"],["width","45%",1,"min-width-4"],["class","bi bi-filter float-end list-pointer",3,"click",4,"ngIf"],["class","bi bi-sort-down float-end list-pointer",3,"click",4,"ngIf"],["class","bi bi-sort-up float-end list-pointer",3,"click",4,"ngIf"],["width","25%",1,"min-width-2"],["width","30%",1,"min-width-3"],["class","table-pointer",3,"dblclick",4,"ngFor","ngForOf"],["class","text-center",4,"ngIf"],["colspan","3"],["aria-label","Page navigation",1,"nav-light","float-end"],[1,"pagination","pagination-sm","mb-0","justify-content-end"],[1,"page-item",3,"ngClass"],["href","#","aria-label","First",1,"page-link",3,"click"],[1,"bi","bi-caret-left-fill"],[1,"page-item"],["href","#","aria-label","Current",1,"page-link",3,"click"],["href","#","aria-label","Last",1,"page-link",3,"click"],[1,"bi","bi-caret-right-fill"],["addAccountComponentReference",""],["connectionToastComponentReference",""],[1,"bi","bi-filter","float-end","list-pointer",3,"click"],[1,"bi","bi-sort-down","float-end","list-pointer",3,"click"],[1,"bi","bi-sort-up","float-end","list-pointer",3,"click"],[1,"table-pointer",3,"dblclick"],[1,"text-center"],["role","status",1,"spinner-grow","m-4"],[1,"visually-hidden"],[1,"m-4"]],template:function(e,n){1&e&&(t.\u0275\u0275elementStart(0,"app-module-topnav",0),t.\u0275\u0275listener("print",function(){return n.onPrint()}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(1,"div",1),t.\u0275\u0275elementStart(2,"div",2),t.\u0275\u0275elementStart(3,"div",3),t.\u0275\u0275elementStart(4,"div",4),t.\u0275\u0275elementStart(5,"div",5),t.\u0275\u0275elementStart(6,"button",6),t.\u0275\u0275listener("click",function(){return n.addAccount.openModal()}),t.\u0275\u0275text(7,"New Account"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(8,"button",7),t.\u0275\u0275listener("click",function(){return n.getUserAccount()}),t.\u0275\u0275element(9,"i",8),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(10,"div",9),t.\u0275\u0275elementStart(11,"table",10),t.\u0275\u0275elementStart(12,"thead"),t.\u0275\u0275elementStart(13,"tr",11),t.\u0275\u0275elementStart(14,"th",12),t.\u0275\u0275text(15," Account Name "),t.\u0275\u0275template(16,H,1,0,"i",13),t.\u0275\u0275template(17,Y,1,0,"i",14),t.\u0275\u0275template(18,z,1,0,"i",15),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(19,"th",16),t.\u0275\u0275text(20," Account No. "),t.\u0275\u0275template(21,J,1,0,"i",13),t.\u0275\u0275template(22,$,1,0,"i",14),t.\u0275\u0275template(23,W,1,0,"i",15),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(24,"th",17),t.\u0275\u0275text(25," Bank Name "),t.\u0275\u0275template(26,Z,1,0,"i",13),t.\u0275\u0275template(27,K,1,0,"i",14),t.\u0275\u0275template(28,q,1,0,"i",15),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(29,"tbody"),t.\u0275\u0275template(30,X,7,3,"tr",18),t.\u0275\u0275template(31,tt,5,0,"tr",19),t.\u0275\u0275template(32,et,4,0,"tr",19),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(33,"tfoot"),t.\u0275\u0275elementStart(34,"tr",11),t.\u0275\u0275elementStart(35,"td",20),t.\u0275\u0275elementStart(36,"nav",21),t.\u0275\u0275elementStart(37,"ul",22),t.\u0275\u0275elementStart(38,"li",23),t.\u0275\u0275elementStart(39,"a",24),t.\u0275\u0275listener("click",function(c){return n.previousPage(c)}),t.\u0275\u0275element(40,"i",25),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(41,"li",26),t.\u0275\u0275elementStart(42,"a",27),t.\u0275\u0275listener("click",function(c){return c.preventDefault()}),t.\u0275\u0275text(43),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(44,"li",23),t.\u0275\u0275elementStart(45,"a",28),t.\u0275\u0275listener("click",function(c){return n.nextPage(c)}),t.\u0275\u0275element(46,"i",29),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(47,"app-add-account",null,30),t.\u0275\u0275element(49,"app-connection-toast",null,31)),2&e&&(t.\u0275\u0275property("headings",n.navHeading)("showPrint",!0),t.\u0275\u0275advance(8),t.\u0275\u0275property("disabled",n.isFetchingGridData),t.\u0275\u0275advance(8),t.\u0275\u0275property("ngIf","account_name"!=n.sortParams.field),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","account_name"==n.sortParams.field&&"desc"==n.sortParams.direction),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","account_name"==n.sortParams.field&&"asc"==n.sortParams.direction),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf","account_number"!=n.sortParams.field),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","account_number"==n.sortParams.field&&"desc"==n.sortParams.direction),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","account_number"==n.sortParams.field&&"asc"==n.sortParams.direction),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf","bank_name"!=n.sortParams.field),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","bank_name"==n.sortParams.field&&"desc"==n.sortParams.direction),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","bank_name"==n.sortParams.field&&"asc"==n.sortParams.direction),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",n.accountsGridData),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.isFetchingGridData),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!n.isDataAvailable&&!n.isFetchingGridData),t.\u0275\u0275advance(6),t.\u0275\u0275property("ngClass",n.disablePrev?"disabled":""),t.\u0275\u0275advance(5),t.\u0275\u0275textInterpolate1(" ",n.pageNumber," "),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngClass",n.disableNext?"disabled":""))},directives:[g.H,d.O5,d.sg,d.mk,k,u.Y],styles:[""]}),a})(),b=(()=>{class a{constructor(){this.transactionForm=new r.cw({})}ngOnInit(){this.initTransactionForm()}initTransactionForm(){this.transactionForm=new r.cw({transactionDate:new r.NI(""),description:new r.NI(""),transactionType:new r.NI(""),amount:new r.NI("")})}}return a.\u0275fac=function(e){return new(e||a)},a.\u0275cmp=t.\u0275\u0275defineComponent({type:a,selectors:[["app-transaction-form"]],decls:29,vars:1,consts:[[1,"page-form",3,"formGroup"],[1,"row","mb-1"],[1,"col-md-4"],[1,"float-md-end","float-sm-start","mt-1"],[1,"col-md-8"],["type","datetime-local","formControlName","transactionDate",1,"form-control","form-control-sm","w-100"],["formControlName","description",1,"form-control","form-control-sm","w-100"],["formControlName","transactionType",1,"form-control","form-control-sm","w-100"],["type","number","min","0","step",".01","formControlName","amount",1,"form-control","form-control-sm","w-100"]],template:function(e,n){1&e&&(t.\u0275\u0275elementStart(0,"form",0),t.\u0275\u0275elementStart(1,"div",1),t.\u0275\u0275elementStart(2,"div",2),t.\u0275\u0275elementStart(3,"label",3),t.\u0275\u0275text(4,"Transaction Date :"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(5,"div",4),t.\u0275\u0275element(6,"input",5),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(7,"div",1),t.\u0275\u0275elementStart(8,"div",2),t.\u0275\u0275elementStart(9,"label",3),t.\u0275\u0275text(10,"Description :"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(11,"div",4),t.\u0275\u0275element(12,"input",6),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(13,"div",1),t.\u0275\u0275elementStart(14,"div",2),t.\u0275\u0275elementStart(15,"label",3),t.\u0275\u0275text(16,"Transaction Type :"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(17,"div",4),t.\u0275\u0275elementStart(18,"select",7),t.\u0275\u0275elementStart(19,"option"),t.\u0275\u0275text(20,"Credit"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(21,"option"),t.\u0275\u0275text(22,"Debit"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(23,"div",1),t.\u0275\u0275elementStart(24,"div",2),t.\u0275\u0275elementStart(25,"label",3),t.\u0275\u0275text(26,"Amount :"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(27,"div",4),t.\u0275\u0275element(28,"input",8),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()),2&e&&t.\u0275\u0275property("formGroup",n.transactionForm)},directives:[r._Y,r.JL,r.sg,r.Fj,r.JJ,r.u,r.EJ,r.YN,r.Kr,r.qQ,r.wV],styles:[""]}),a})();const at=["addButtonElementReference"],ot=["dismissButtonElementReference"],it=["transactionFormComponentReference"];let F=(()=>{class a{constructor(){this.saveTransactionEvent=new t.EventEmitter,this.isSaving=!1}ngOnInit(){}openModal(){this.transactionForm.transactionForm.controls.transactionDate.setValue((new Date).toISOString().slice(0,16)),this.transactionForm.transactionForm.controls.transactionType.setValue("Credit"),this.transactionForm.transactionForm.controls.amount.setValue(0),this.addButton.nativeElement.click()}saveTransaction(){let e={created_at:(0,x.Bt)(),transaction_date:this.transactionForm.transactionForm.controls.transactionDate.value,description:this.transactionForm.transactionForm.controls.description.value,transaction_type:this.transactionForm.transactionForm.controls.transactionType.value,amount:this.transactionForm.transactionForm.controls.amount.value,account:{id:sessionStorage.getItem("personal_account_id"),data:this.transactionAccount}};this.saveTransactionEvent.emit(e)}resetForm(){this.transactionForm.transactionForm.controls.transactionDate.setValue(""),this.transactionForm.transactionForm.controls.description.setValue(""),this.transactionForm.transactionForm.controls.transactionType.setValue(""),this.transactionForm.transactionForm.controls.amount.setValue(0)}}return a.\u0275fac=function(e){return new(e||a)},a.\u0275cmp=t.\u0275\u0275defineComponent({type:a,selectors:[["app-add-transaction"]],viewQuery:function(e,n){if(1&e&&(t.\u0275\u0275viewQuery(at,5,t.ElementRef),t.\u0275\u0275viewQuery(ot,5,t.ElementRef),t.\u0275\u0275viewQuery(it,5,b)),2&e){let o;t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(n.addButton=o.first),t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(n.dismissButton=o.first),t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(n.transactionForm=o.first)}},outputs:{saveTransactionEvent:"saveTransactionEvent"},decls:19,vars:2,consts:[["data-bs-toggle","modal","data-bs-target","#addTransactionModal",3,"hidden"],["addButtonElementReference",""],["id","addTransactionModal","tabindex","-1","aria-labelledby","addTransactionModalLabel","aria-hidden","true",1,"modal","fade","form-modal"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header","bg-light"],["id","addTransactionModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],["dismissButtonElementReference",""],[1,"modal-body"],["transactionFormComponentReference",""],[1,"modal-footer"],[1,"btn","btn-sm","btn-secondary","modal-form-btn",3,"disabled","click"],["data-bs-dismiss","modal",1,"btn","btn-sm","btn-secondary","modal-form-btn"]],template:function(e,n){1&e&&(t.\u0275\u0275elementStart(0,"button",0,1),t.\u0275\u0275text(2," Launch demo modal\n"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"div",2),t.\u0275\u0275elementStart(4,"div",3),t.\u0275\u0275elementStart(5,"div",4),t.\u0275\u0275elementStart(6,"div",5),t.\u0275\u0275elementStart(7,"span",6),t.\u0275\u0275text(8,"Add Transaction"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(9,"button",7,8),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(11,"div",9),t.\u0275\u0275element(12,"app-transaction-form",null,10),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(14,"div",11),t.\u0275\u0275elementStart(15,"button",12),t.\u0275\u0275listener("click",function(){return n.saveTransaction()}),t.\u0275\u0275text(16,"Save"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(17,"button",13),t.\u0275\u0275text(18,"Cancel"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()),2&e&&(t.\u0275\u0275property("hidden",!0),t.\u0275\u0275advance(15),t.\u0275\u0275property("disabled",n.isSaving))},directives:[b],styles:[""]}),a})();const rt=["editButtonElementReference"],ct=["dismissButtonElementReference"],st=["transactionFormComponentReference"];let D=(()=>{class a{constructor(){this.saveTransactionEvent=new t.EventEmitter,this.isSaving=!1}ngOnInit(){}openModal(e){this.transactionFormData=e,this.transactionForm.transactionForm.controls.transactionDate.setValue(new Date(this.transactionFormData.data().transaction_date).toISOString().slice(0,16)),this.transactionForm.transactionForm.controls.description.setValue(this.transactionFormData.data().description),this.transactionForm.transactionForm.controls.transactionType.setValue(this.transactionFormData.data().transaction_type),this.transactionForm.transactionForm.controls.amount.setValue(this.transactionFormData.data().amount),this.editButton.nativeElement.click()}saveTransaction(){let e={transaction_date:this.transactionForm.transactionForm.controls.transactionDate.value,description:this.transactionForm.transactionForm.controls.description.value,transaction_type:this.transactionForm.transactionForm.controls.transactionType.value,amount:this.transactionForm.transactionForm.controls.amount.value,account:{id:sessionStorage.getItem("personal_account_id"),data:this.transactionAccount}};this.saveTransactionEvent.emit({id:this.transactionFormData.id,data:e})}}return a.\u0275fac=function(e){return new(e||a)},a.\u0275cmp=t.\u0275\u0275defineComponent({type:a,selectors:[["app-edit-transaction"]],viewQuery:function(e,n){if(1&e&&(t.\u0275\u0275viewQuery(rt,5,t.ElementRef),t.\u0275\u0275viewQuery(ct,5,t.ElementRef),t.\u0275\u0275viewQuery(st,5,b)),2&e){let o;t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(n.editButton=o.first),t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(n.dismissButton=o.first),t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(n.transactionForm=o.first)}},outputs:{saveTransactionEvent:"saveTransactionEvent"},decls:19,vars:2,consts:[["data-bs-toggle","modal","data-bs-target","#editTransactionModal",3,"hidden"],["editButtonElementReference",""],["id","editTransactionModal","tabindex","-1","aria-labelledby","editTransactionModalLabel","aria-hidden","true",1,"modal","fade","form-modal"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header","bg-light"],["id","editTransactionModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],["dismissButtonElementReference",""],[1,"modal-body"],["transactionFormComponentReference",""],[1,"modal-footer"],["data-bs-dismiss","modal",1,"btn","btn-sm","btn-secondary","modal-form-btn",3,"disabled","click"],["data-bs-dismiss","modal",1,"btn","btn-sm","btn-secondary","modal-form-btn"]],template:function(e,n){1&e&&(t.\u0275\u0275elementStart(0,"button",0,1),t.\u0275\u0275text(2," Launch demo modal\n"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"div",2),t.\u0275\u0275elementStart(4,"div",3),t.\u0275\u0275elementStart(5,"div",4),t.\u0275\u0275elementStart(6,"div",5),t.\u0275\u0275elementStart(7,"span",6),t.\u0275\u0275text(8,"Add Transaction"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(9,"button",7,8),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(11,"div",9),t.\u0275\u0275element(12,"app-transaction-form",null,10),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(14,"div",11),t.\u0275\u0275elementStart(15,"button",12),t.\u0275\u0275listener("click",function(){return n.saveTransaction()}),t.\u0275\u0275text(16,"Save"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(17,"button",13),t.\u0275\u0275text(18,"Cancel"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()),2&e&&(t.\u0275\u0275property("hidden",!0),t.\u0275\u0275advance(15),t.\u0275\u0275property("disabled",n.isSaving))},directives:[b],styles:[""]}),a})();var T=s(8622);const lt=["addTransactionComponentReference"],mt=["editTransactionComponentReference"],dt=["connectionToastComponentReference"],ut=["deleteModalComponentReference"];function pt(a,i){if(1&a){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"tr"),t.\u0275\u0275elementStart(1,"td"),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"date"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"td"),t.\u0275\u0275text(5),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(6,"td"),t.\u0275\u0275text(7),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(8,"td"),t.\u0275\u0275text(9),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(10,"td",23),t.\u0275\u0275elementStart(11,"button",24),t.\u0275\u0275listener("click",function(){const c=t.\u0275\u0275restoreView(e).$implicit;return t.\u0275\u0275nextContext().openEditTransaction(c)}),t.\u0275\u0275element(12,"i",25),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(13,"button",24),t.\u0275\u0275listener("click",function(){const c=t.\u0275\u0275restoreView(e).$implicit;return t.\u0275\u0275nextContext().confirmDelete(c.id)}),t.\u0275\u0275element(14,"i",26),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()}if(2&a){const e=i.$implicit;t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(3,4,null==e?null:e.data().transaction_date)),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(null==e?null:e.data().description),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(null==e?null:e.data().transaction_type),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(null==e?null:e.data().amount)}}function _t(a,i){1&a&&(t.\u0275\u0275elementStart(0,"tr",27),t.\u0275\u0275elementStart(1,"td",28),t.\u0275\u0275elementStart(2,"div",29),t.\u0275\u0275elementStart(3,"span",30),t.\u0275\u0275text(4,"Loading..."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd())}let I=(()=>{class a{constructor(e){this.accountsApi=e,this.balanceEvent=new t.EventEmitter,this.transactionsGridData=[],this.deleteId="",this.balance=0,this.isFetchingGridData=!1,this.isTransactionDeleting=!1}ngOnInit(){this.getAccountTransaction()}calculateBalance(){this.balance=0;for(let e of this.transactionsGridData)"Credit"==e.data().transaction_type?this.balance+=e.data().amount:this.balance-=e.data().amount;this.balanceEvent.emit(this.balance),console.log(this.balance)}getAccountTransaction(){this.isFetchingGridData=!0,this.accountsApi.getAccountTransaction().then(e=>{console.log(e),this.transactionsGridData=e.docs,this.isFetchingGridData=!1,this.calculateBalance()},e=>{console.log(e),this.isFetchingGridData=!1,this.connectionToast.openToast()})}createTransaction(e){console.log(e),this.addTransaction.isSaving=!0,this.accountsApi.createTransaction(e).then(n=>{console.log(n),this.addTransaction.isSaving=!1,this.addTransaction.dismissButton.nativeElement.click(),this.getAccountTransaction(),this.addTransaction.resetForm()},n=>{console.log(n),this.addTransaction.isSaving=!1,this.connectionToast.openToast()})}updateTransaction(e){console.log(e),this.editTransaction.isSaving=!0,this.accountsApi.updateTransaction(e.id,e.data).then(n=>{console.log(n),this.editTransaction.dismissButton.nativeElement.click(),this.editTransaction.isSaving=!1,this.getAccountTransaction()},n=>{console.log(n),this.editTransaction.isSaving=!1,this.connectionToast.openToast()})}deleteTransaction(){console.log(this.deleteId),this.isTransactionDeleting=!0,this.accountsApi.deleteTransaction(this.deleteId).then(e=>{console.log(e),this.isTransactionDeleting=!1,this.getAccountTransaction()},e=>{console.log(e),this.isTransactionDeleting=!1,this.connectionToast.openToast()})}openEditTransaction(e){console.log(e),this.editTransaction.openModal(e)}confirmDelete(e){this.deleteId=e,this.deleteModal.openModal()}}return a.\u0275fac=function(e){return new(e||a)(t.\u0275\u0275directiveInject(h.H))},a.\u0275cmp=t.\u0275\u0275defineComponent({type:a,selectors:[["app-account-transactions"]],viewQuery:function(e,n){if(1&e&&(t.\u0275\u0275viewQuery(lt,5,F),t.\u0275\u0275viewQuery(mt,5,D),t.\u0275\u0275viewQuery(dt,5,u.Y),t.\u0275\u0275viewQuery(ut,5,T.z)),2&e){let o;t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(n.addTransaction=o.first),t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(n.editTransaction=o.first),t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(n.connectionToast=o.first),t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(n.deleteModal=o.first)}},outputs:{balanceEvent:"balanceEvent"},decls:32,vars:2,consts:[[1,"row"],[1,"col-md-9"],[1,"top-divider"],[1,"bottom-divider"],[1,"mb-3"],[1,"overflow-auto"],[1,"table","table-bordered","table-sm","w-100","page-table"],[1,"bg-light"],["width","20%",1,"min-width-3"],["width","37%",1,"min-width-4"],["width","18%",1,"min-width-2"],["width","15%",1,"min-width-2"],["width","10%",1,"p-0","min-width-2"],[1,"btn","btn-secondary","btn-sm","w-100",3,"click"],[1,"bi","bi-plus"],[4,"ngFor","ngForOf"],["class","text-center",4,"ngIf"],[3,"saveTransactionEvent"],["addTransactionComponentReference",""],["editTransactionComponentReference",""],["connectionToastComponentReference",""],[3,"confirmEvent"],["deleteModalComponentReference",""],[1,"p-0"],[1,"btn","btn-sm","border","w-50",3,"click"],[1,"bi","bi-pen"],[1,"bi","bi-trash"],[1,"text-center"],["colspan","5"],["role","status",1,"spinner-grow","spinner-grow-sm","m-2"],[1,"visually-hidden"]],template:function(e,n){1&e&&(t.\u0275\u0275elementStart(0,"div",0),t.\u0275\u0275elementStart(1,"div",1),t.\u0275\u0275element(2,"hr",2),t.\u0275\u0275element(3,"hr",3),t.\u0275\u0275elementStart(4,"h4",4),t.\u0275\u0275text(5,"Transactions"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(6,"div",5),t.\u0275\u0275elementStart(7,"table",6),t.\u0275\u0275elementStart(8,"thead"),t.\u0275\u0275elementStart(9,"tr",7),t.\u0275\u0275elementStart(10,"th",8),t.\u0275\u0275text(11,"Transaction Date"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(12,"th",9),t.\u0275\u0275text(13,"Description"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(14,"th",10),t.\u0275\u0275text(15,"Transaction Type"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(16,"th",11),t.\u0275\u0275text(17,"Amount"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(18,"th",12),t.\u0275\u0275elementStart(19,"button",13),t.\u0275\u0275listener("click",function(){return n.addTransaction.openModal()}),t.\u0275\u0275element(20,"i",14),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(21,"tbody"),t.\u0275\u0275template(22,pt,15,6,"tr",15),t.\u0275\u0275template(23,_t,5,0,"tr",16),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(24,"app-add-transaction",17,18),t.\u0275\u0275listener("saveTransactionEvent",function(c){return n.createTransaction(c)}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(26,"app-edit-transaction",17,19),t.\u0275\u0275listener("saveTransactionEvent",function(c){return n.updateTransaction(c)}),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(28,"app-connection-toast",null,20),t.\u0275\u0275elementStart(30,"app-delete-modal",21,22),t.\u0275\u0275listener("confirmEvent",function(){return n.deleteTransaction()}),t.\u0275\u0275elementEnd()),2&e&&(t.\u0275\u0275advance(22),t.\u0275\u0275property("ngForOf",n.transactionsGridData),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.isFetchingGridData))},directives:[d.sg,d.O5,F,D,u.Y,T.z],pipes:[d.uU],styles:[""]}),a})();const ft=["accountTransactionsComponentReference"],ht=["connectionToastComponentReference"],vt=["deleteModalComponentReference"];function gt(a,i){if(1&a){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",23),t.\u0275\u0275elementStart(1,"div",24),t.\u0275\u0275elementStart(2,"button",25),t.\u0275\u0275text(3,"Cancel"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"button",26),t.\u0275\u0275listener("click",function(){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext().confirmDelete()}),t.\u0275\u0275text(5,"Delete"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(6,"button",27),t.\u0275\u0275text(7,"Save"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()}if(2&a){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(4),t.\u0275\u0275property("disabled",e.isAccountDeleting),t.\u0275\u0275advance(2),t.\u0275\u0275property("disabled",e.isAccountSaving)}}function bt(a,i){1&a&&(t.\u0275\u0275elementStart(0,"div",23),t.\u0275\u0275elementStart(1,"div",24),t.\u0275\u0275elementStart(2,"button",28),t.\u0275\u0275elementStart(3,"div",29),t.\u0275\u0275elementStart(4,"span",30),t.\u0275\u0275text(5,"Loading..."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd())}let Tt=(()=>{class a{constructor(e,n,o){this.router=e,this.accountsApi=n,this.accountsPrint=o,this.navHeading=[{text:"All Accounts",url:"/home/accounts/all-accounts"},{text:"View Account",url:"/home/accounts/view-account"}],this.accountForm=new r.cw({}),this.balance=0,this.isAccountLoading=!1,this.isAccountSaving=!1,this.isAccountDeleting=!1}ngOnInit(){this.initAccountForm(),this.getAccount()}initAccountForm(){this.accountForm=new r.cw({accountName:new r.NI(""),accountNumber:new r.NI(""),bankName:new r.NI(""),accountType:new r.NI("")})}getAccount(){this.isAccountLoading=!0,this.accountsApi.getAccount().then(e=>{console.log(e),this.accountFormData=e,this.accountForm.controls.accountName.setValue(this.accountFormData.data().account_name),this.accountForm.controls.accountNumber.setValue(this.accountFormData.data().account_number),this.accountForm.controls.bankName.setValue(this.accountFormData.data().bank_name),this.accountForm.controls.accountType.setValue(this.accountFormData.data().account_type),this.accountTransactions.addTransaction.transactionAccount=this.accountFormData.data(),this.accountTransactions.editTransaction.transactionAccount=this.accountFormData.data(),this.isAccountLoading=!1},e=>{console.log(e),this.isAccountLoading=!1,this.connectionToast.openToast()})}updateAccount(){let e={account_name:this.accountForm.controls.accountName.value,account_number:this.accountForm.controls.accountNumber.value,bank_name:this.accountForm.controls.bankName.value,account_type:this.accountForm.controls.accountType.value};console.log(e),this.isAccountSaving=!0,this.accountsApi.updateAccount(e).then(n=>{console.log(n),this.isAccountSaving=!1},n=>{console.log(n),this.connectionToast.openToast(),this.isAccountSaving=!1})}deleteAccount(){this.isAccountDeleting=!0,this.accountsApi.deleteAccount().then(e=>{console.log(e),this.router.navigateByUrl("/home/accounts/all-accounts"),this.isAccountDeleting=!1},e=>{console.log(e),this.isAccountDeleting=!1,this.connectionToast.openToast()})}confirmDelete(){this.deleteModal.openModal()}onPrint(){console.log("lets start printing..."),this.accountsPrint.printViewAccount()}}return a.\u0275fac=function(e){return new(e||a)(t.\u0275\u0275directiveInject(p.F0),t.\u0275\u0275directiveInject(h.H),t.\u0275\u0275directiveInject(E))},a.\u0275cmp=t.\u0275\u0275defineComponent({type:a,selectors:[["app-view-account"]],viewQuery:function(e,n){if(1&e&&(t.\u0275\u0275viewQuery(ft,5,I),t.\u0275\u0275viewQuery(ht,5,u.Y),t.\u0275\u0275viewQuery(vt,5,T.z)),2&e){let o;t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(n.accountTransactions=o.first),t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(n.connectionToast=o.first),t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(n.deleteModal=o.first)}},decls:49,vars:6,consts:[[3,"headings","showPrint","print"],[1,"container"],[1,"row","page-form"],[1,"col-md-6"],[1,"page-form",3,"formGroup","ngSubmit"],[1,"mb-3"],[1,"row","mb-1"],[1,"col-md-4"],[1,"float-md-end","float-sm-start","mt-1"],[1,"col-md-8"],["formControlName","accountName",1,"form-control","form-control-sm","w-100"],["formControlName","accountNumber",1,"form-control","form-control-sm","w-100"],["formControlName","bankName",1,"form-control","form-control-sm","w-100"],[1,"float-end"],["formControlName","accountType",1,"form-control","form-control-sm","w-100"],["class","row",4,"ngIf"],[1,"col-md-6","text-center"],[1,"h1"],[3,"balanceEvent"],["accountTransactionsComponentReference",""],["connectionToastComponentReference",""],[3,"confirmEvent"],["deleteModalComponentReference",""],[1,"row"],[1,"col-md-12"],["type","button","routerLink","/home/accounts/all-accounts",1,"btn","btn-secondary","btn-sm","float-end","ms-1","page-form-btn"],["type","button",1,"btn","btn-secondary","btn-sm","float-end","ms-1","page-form-btn",3,"disabled","click"],["type","submit",1,"btn","btn-secondary","btn-sm","float-end","ms-1","page-form-btn",3,"disabled"],["type","button",1,"btn","btn-sm","float-end","ms-1","btn-light","page-form-btn"],["role","status",1,"spinner-grow","spinner-grow-sm"],[1,"visually-hidden"]],template:function(e,n){1&e&&(t.\u0275\u0275elementStart(0,"app-module-topnav",0),t.\u0275\u0275listener("print",function(){return n.onPrint()}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(1,"div",1),t.\u0275\u0275elementStart(2,"div",2),t.\u0275\u0275elementStart(3,"div",3),t.\u0275\u0275elementStart(4,"form",4),t.\u0275\u0275listener("ngSubmit",function(){return n.updateAccount()}),t.\u0275\u0275elementStart(5,"h4",5),t.\u0275\u0275text(6,"Account Details"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(7,"div",6),t.\u0275\u0275elementStart(8,"div",7),t.\u0275\u0275elementStart(9,"label",8),t.\u0275\u0275text(10,"Account Name :"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(11,"div",9),t.\u0275\u0275element(12,"input",10),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(13,"div",6),t.\u0275\u0275elementStart(14,"div",7),t.\u0275\u0275elementStart(15,"label",8),t.\u0275\u0275text(16,"Account Number :"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(17,"div",9),t.\u0275\u0275element(18,"input",11),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(19,"div",6),t.\u0275\u0275elementStart(20,"div",7),t.\u0275\u0275elementStart(21,"label",8),t.\u0275\u0275text(22,"Bank Name :"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(23,"div",9),t.\u0275\u0275element(24,"input",12),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(25,"div",6),t.\u0275\u0275elementStart(26,"div",7),t.\u0275\u0275elementStart(27,"label",13),t.\u0275\u0275text(28,"Account Type :"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(29,"div",9),t.\u0275\u0275elementStart(30,"select",14),t.\u0275\u0275elementStart(31,"option"),t.\u0275\u0275text(32,"Current"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(33,"option"),t.\u0275\u0275text(34,"Savings"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(35,"hr"),t.\u0275\u0275template(36,gt,8,2,"div",15),t.\u0275\u0275template(37,bt,6,0,"div",15),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(38,"div",16),t.\u0275\u0275elementStart(39,"h4"),t.\u0275\u0275text(40,"Account Balance:"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(41,"p",17),t.\u0275\u0275text(42),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(43,"app-account-transactions",18,19),t.\u0275\u0275listener("balanceEvent",function(c){return n.balance=c}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(45,"app-connection-toast",null,20),t.\u0275\u0275elementStart(47,"app-delete-modal",21,22),t.\u0275\u0275listener("confirmEvent",function(){return n.deleteAccount()}),t.\u0275\u0275elementEnd()),2&e&&(t.\u0275\u0275property("headings",n.navHeading)("showPrint",!0),t.\u0275\u0275advance(4),t.\u0275\u0275property("formGroup",n.accountForm),t.\u0275\u0275advance(32),t.\u0275\u0275property("ngIf",!n.isAccountLoading),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.isAccountLoading),t.\u0275\u0275advance(5),t.\u0275\u0275textInterpolate1("$ ",n.balance,""))},directives:[g.H,r._Y,r.JL,r.sg,r.Fj,r.JJ,r.u,r.EJ,r.YN,r.Kr,d.O5,I,u.Y,T.z,p.rH],styles:[""]}),a})();const At=["connectionToastComponentReference"];function St(a,i){if(1&a){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"i",32),t.\u0275\u0275listener("click",function(){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext().sortTable("transasction_date","desc")}),t.\u0275\u0275elementEnd()}}function Et(a,i){if(1&a){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"i",33),t.\u0275\u0275listener("click",function(){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext().sortTable("transasction_date","asc")}),t.\u0275\u0275elementEnd()}}function Ct(a,i){if(1&a){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"i",34),t.\u0275\u0275listener("click",function(){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext().sortTable("transasction_date","desc")}),t.\u0275\u0275elementEnd()}}function yt(a,i){if(1&a){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"i",32),t.\u0275\u0275listener("click",function(){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext().sortTable("description","desc")}),t.\u0275\u0275elementEnd()}}function wt(a,i){if(1&a){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"i",33),t.\u0275\u0275listener("click",function(){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext().sortTable("description","asc")}),t.\u0275\u0275elementEnd()}}function xt(a,i){if(1&a){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"i",34),t.\u0275\u0275listener("click",function(){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext().sortTable("description","desc")}),t.\u0275\u0275elementEnd()}}function kt(a,i){if(1&a){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"i",32),t.\u0275\u0275listener("click",function(){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext().sortTable("transaction_type","desc")}),t.\u0275\u0275elementEnd()}}function Ft(a,i){if(1&a){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"i",33),t.\u0275\u0275listener("click",function(){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext().sortTable("transaction_type","asc")}),t.\u0275\u0275elementEnd()}}function Dt(a,i){if(1&a){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"i",34),t.\u0275\u0275listener("click",function(){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext().sortTable("transaction_type","desc")}),t.\u0275\u0275elementEnd()}}function It(a,i){if(1&a){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"i",32),t.\u0275\u0275listener("click",function(){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext().sortTable("amount","desc")}),t.\u0275\u0275elementEnd()}}function Pt(a,i){if(1&a){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"i",33),t.\u0275\u0275listener("click",function(){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext().sortTable("amount","asc")}),t.\u0275\u0275elementEnd()}}function Nt(a,i){if(1&a){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"i",34),t.\u0275\u0275listener("click",function(){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext().sortTable("amount","desc")}),t.\u0275\u0275elementEnd()}}function Vt(a,i){if(1&a){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"i",32),t.\u0275\u0275listener("click",function(){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext().sortTable("account_name","desc")}),t.\u0275\u0275elementEnd()}}function Rt(a,i){if(1&a){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"i",33),t.\u0275\u0275listener("click",function(){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext().sortTable("account_name","asc")}),t.\u0275\u0275elementEnd()}}function Gt(a,i){if(1&a){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"i",34),t.\u0275\u0275listener("click",function(){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext().sortTable("account_name","desc")}),t.\u0275\u0275elementEnd()}}function Qt(a,i){if(1&a){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"i",32),t.\u0275\u0275listener("click",function(){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext().sortTable("bank_name","desc")}),t.\u0275\u0275elementEnd()}}function Bt(a,i){if(1&a){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"i",33),t.\u0275\u0275listener("click",function(){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext().sortTable("bank_name","asc")}),t.\u0275\u0275elementEnd()}}function Lt(a,i){if(1&a){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"i",34),t.\u0275\u0275listener("click",function(){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext().sortTable("bank_name","desc")}),t.\u0275\u0275elementEnd()}}function Mt(a,i){if(1&a&&(t.\u0275\u0275elementStart(0,"tr"),t.\u0275\u0275elementStart(1,"td"),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"date"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"td"),t.\u0275\u0275text(5),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(6,"td"),t.\u0275\u0275text(7),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(8,"td"),t.\u0275\u0275text(9),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(10,"td"),t.\u0275\u0275text(11),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(12,"td"),t.\u0275\u0275text(13),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()),2&a){const e=i.$implicit;t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(3,6,null==e?null:e.data().transaction_date)),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(null==e?null:e.data().description),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(null==e?null:e.data().transaction_type),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(null==e?null:e.data().amount),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(null==e||null==e.data().account?null:e.data().account.data.account_name),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(null==e||null==e.data().account?null:e.data().account.data.bank_name)}}function jt(a,i){1&a&&(t.\u0275\u0275elementStart(0,"tr",35),t.\u0275\u0275elementStart(1,"td",21),t.\u0275\u0275elementStart(2,"div",36),t.\u0275\u0275elementStart(3,"span",37),t.\u0275\u0275text(4,"Loading..."),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd())}function Ot(a,i){1&a&&(t.\u0275\u0275elementStart(0,"tr",35),t.\u0275\u0275elementStart(1,"td",21),t.\u0275\u0275elementStart(2,"p",38),t.\u0275\u0275text(3,"No data available"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd())}let Ut=(()=>{class a{constructor(e,n){this.accountsApi=e,this.accountsPrint=n,this.navHeading=[{text:"All Transactions",url:"/home/accounts/all-transactions"}],this.transactionsGridData=[],this.isFetchingGridData=!1,this.isDataAvailable=!0,this.firstInResponse=[],this.lastInResponse=[],this.prevStartAt=[],this.nextStartAfter=[],this.pageNumber=0,this.disableNext=!0,this.disablePrev=!0,this.sortParams={field:"created_at",direction:"desc"}}ngOnInit(){this.getUserTransaction()}getUserTransaction(){this.isFetchingGridData=!0,this.accountsApi.getUserTransaction(this.sortParams,20).then(e=>{console.log(e),this.transactionsGridData=e.docs,this.isFetchingGridData=!1,this.prevStartAt=this.firstInResponse,this.nextStartAfter=e.docs[e.docs.length-1],this.firstInResponse=e.docs[0],this.pageNumber=1,this.isDataAvailable=!!e.docs.length,!e.docs.length||e.docs.length<20?(this.disableNext=!0,this.disablePrev=!0):(this.disableNext=!1,this.disablePrev=!0)},e=>{console.log(e),this.isFetchingGridData=!1,this.connectionToast.openToast()})}nextPage(e){e.preventDefault(),this.isFetchingGridData=!0,this.accountsApi.getUserTransactionNext(this.sortParams,20,this.nextStartAfter).then(n=>{console.log(n),this.transactionsGridData=n.docs,this.isFetchingGridData=!1,this.prevStartAt=this.firstInResponse,this.nextStartAfter=n.docs[n.docs.length-1],this.firstInResponse=n.docs[0],this.pageNumber++,n.docs.length<20&&(this.disableNext=!0,this.disablePrev=!1)},n=>{console.log(n),this.isFetchingGridData=!1,this.connectionToast.openToast()})}previousPage(e){e.preventDefault(),this.isFetchingGridData=!0,this.accountsApi.getUserTransactionPrev(this.sortParams,20,this.prevStartAt).then(n=>{console.log(n),this.transactionsGridData=n.docs,this.isFetchingGridData=!1,this.prevStartAt=this.firstInResponse,this.nextStartAfter=n.docs[n.docs.length-1],this.firstInResponse=n.docs[0],this.pageNumber--,1==this.pageNumber&&(this.disableNext=!1,this.disablePrev=!0)},n=>{console.log(n),this.isFetchingGridData=!1,this.connectionToast.openToast()})}sortTable(e,n){this.sortParams.field=e,this.sortParams.direction=n,this.getUserTransaction()}onPrint(){console.log("lets start printing..."),this.accountsPrint.printAllTransactions()}}return a.\u0275fac=function(e){return new(e||a)(t.\u0275\u0275directiveInject(h.H),t.\u0275\u0275directiveInject(E))},a.\u0275cmp=t.\u0275\u0275defineComponent({type:a,selectors:[["app-all-transactions"]],viewQuery:function(e,n){if(1&e&&t.\u0275\u0275viewQuery(At,5,u.Y),2&e){let o;t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(n.connectionToast=o.first)}},decls:62,vars:27,consts:[[3,"headings","showPrint","print"],[1,"container"],[1,"row"],[1,"col-md-12"],[1,"row","mb-3"],[1,"btn","btn-light","border","float-end","page-refresh-btn",3,"disabled","click"],[1,"bi","bi-arrow-clockwise"],[1,"overflow-auto"],[1,"table","table-bordered","table-sm","w-100","page-table"],[1,"bg-light"],["width","15%",1,"min-width-3"],["class","bi bi-filter float-end list-pointer",3,"click",4,"ngIf"],["class","bi bi-sort-down float-end list-pointer",3,"click",4,"ngIf"],["class","bi bi-sort-up float-end list-pointer",3,"click",4,"ngIf"],["width","20%",1,"min-width-4"],["width","15%",1,"min-width-2"],["width","12%",1,"min-width-2"],["width","20%",1,"min-width-3"],["width","18%",1,"min-width-3"],[4,"ngFor","ngForOf"],["class","text-center",4,"ngIf"],["colspan","6"],["aria-label","Page navigation",1,"nav-light","float-end"],[1,"pagination","pagination-sm","mb-0","justify-content-end"],[1,"page-item",3,"ngClass"],["href","#","aria-label","First",1,"page-link",3,"click"],[1,"bi","bi-caret-left-fill"],[1,"page-item"],["href","#","aria-label","Current",1,"page-link",3,"click"],["href","#","aria-label","Last",1,"page-link",3,"click"],[1,"bi","bi-caret-right-fill"],["connectionToastComponentReference",""],[1,"bi","bi-filter","float-end","list-pointer",3,"click"],[1,"bi","bi-sort-down","float-end","list-pointer",3,"click"],[1,"bi","bi-sort-up","float-end","list-pointer",3,"click"],[1,"text-center"],["role","status",1,"spinner-grow","m-4"],[1,"visually-hidden"],[1,"m-4"]],template:function(e,n){1&e&&(t.\u0275\u0275elementStart(0,"app-module-topnav",0),t.\u0275\u0275listener("print",function(){return n.onPrint()}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(1,"div",1),t.\u0275\u0275elementStart(2,"div",2),t.\u0275\u0275elementStart(3,"div",3),t.\u0275\u0275elementStart(4,"div",4),t.\u0275\u0275elementStart(5,"div",3),t.\u0275\u0275elementStart(6,"button",5),t.\u0275\u0275listener("click",function(){return n.getUserTransaction()}),t.\u0275\u0275element(7,"i",6),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(8,"div",7),t.\u0275\u0275elementStart(9,"table",8),t.\u0275\u0275elementStart(10,"thead"),t.\u0275\u0275elementStart(11,"tr",9),t.\u0275\u0275elementStart(12,"th",10),t.\u0275\u0275text(13," Transaction Date "),t.\u0275\u0275template(14,St,1,0,"i",11),t.\u0275\u0275template(15,Et,1,0,"i",12),t.\u0275\u0275template(16,Ct,1,0,"i",13),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(17,"th",14),t.\u0275\u0275text(18," Description "),t.\u0275\u0275template(19,yt,1,0,"i",11),t.\u0275\u0275template(20,wt,1,0,"i",12),t.\u0275\u0275template(21,xt,1,0,"i",13),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(22,"th",15),t.\u0275\u0275text(23," Transaction Type "),t.\u0275\u0275template(24,kt,1,0,"i",11),t.\u0275\u0275template(25,Ft,1,0,"i",12),t.\u0275\u0275template(26,Dt,1,0,"i",13),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(27,"th",16),t.\u0275\u0275text(28," Amount "),t.\u0275\u0275template(29,It,1,0,"i",11),t.\u0275\u0275template(30,Pt,1,0,"i",12),t.\u0275\u0275template(31,Nt,1,0,"i",13),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(32,"th",17),t.\u0275\u0275text(33," Account Name "),t.\u0275\u0275template(34,Vt,1,0,"i",11),t.\u0275\u0275template(35,Rt,1,0,"i",12),t.\u0275\u0275template(36,Gt,1,0,"i",13),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(37,"th",18),t.\u0275\u0275text(38," Bank "),t.\u0275\u0275template(39,Qt,1,0,"i",11),t.\u0275\u0275template(40,Bt,1,0,"i",12),t.\u0275\u0275template(41,Lt,1,0,"i",13),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(42,"tbody"),t.\u0275\u0275template(43,Mt,14,8,"tr",19),t.\u0275\u0275template(44,jt,5,0,"tr",20),t.\u0275\u0275template(45,Ot,4,0,"tr",20),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(46,"tfoot"),t.\u0275\u0275elementStart(47,"tr",9),t.\u0275\u0275elementStart(48,"td",21),t.\u0275\u0275elementStart(49,"nav",22),t.\u0275\u0275elementStart(50,"ul",23),t.\u0275\u0275elementStart(51,"li",24),t.\u0275\u0275elementStart(52,"a",25),t.\u0275\u0275listener("click",function(c){return n.previousPage(c)}),t.\u0275\u0275element(53,"i",26),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(54,"li",27),t.\u0275\u0275elementStart(55,"a",28),t.\u0275\u0275listener("click",function(c){return c.preventDefault()}),t.\u0275\u0275text(56),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(57,"li",24),t.\u0275\u0275elementStart(58,"a",29),t.\u0275\u0275listener("click",function(c){return n.nextPage(c)}),t.\u0275\u0275element(59,"i",30),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(60,"app-connection-toast",null,31)),2&e&&(t.\u0275\u0275property("headings",n.navHeading)("showPrint",!0),t.\u0275\u0275advance(6),t.\u0275\u0275property("disabled",n.isFetchingGridData),t.\u0275\u0275advance(8),t.\u0275\u0275property("ngIf","transasction_date"!=n.sortParams.field),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","transasction_date"==n.sortParams.field&&"desc"==n.sortParams.direction),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","transasction_date"==n.sortParams.field&&"asc"==n.sortParams.direction),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf","description"!=n.sortParams.field),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","description"==n.sortParams.field&&"desc"==n.sortParams.direction),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","description"==n.sortParams.field&&"asc"==n.sortParams.direction),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf","transaction_type"!=n.sortParams.field),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","transaction_type"==n.sortParams.field&&"desc"==n.sortParams.direction),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","transaction_type"==n.sortParams.field&&"asc"==n.sortParams.direction),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf","amount"!=n.sortParams.field),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","amount"==n.sortParams.field&&"desc"==n.sortParams.direction),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","amount"==n.sortParams.field&&"asc"==n.sortParams.direction),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf","account_name"!=n.sortParams.field),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","account_name"==n.sortParams.field&&"desc"==n.sortParams.direction),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","account_name"==n.sortParams.field&&"asc"==n.sortParams.direction),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf","bank_name"!=n.sortParams.field),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","bank_name"==n.sortParams.field&&"desc"==n.sortParams.direction),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","bank_name"==n.sortParams.field&&"asc"==n.sortParams.direction),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",n.transactionsGridData),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.isFetchingGridData),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!n.isDataAvailable&&!n.isFetchingGridData),t.\u0275\u0275advance(6),t.\u0275\u0275property("ngClass",n.disablePrev?"disabled":""),t.\u0275\u0275advance(5),t.\u0275\u0275textInterpolate1(" ",n.pageNumber," "),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngClass",n.disableNext?"disabled":""))},directives:[g.H,d.O5,d.sg,d.mk,u.Y],pipes:[d.uU],styles:[""]}),a})();var Ht=s(8361),C=s.n(Ht),P=s(6508);const Yt=["connectionToastComponentReference"];let N=(()=>{class a{constructor(e){this.accountsApi=e,this.navHeading=[{text:"Dashboard",url:"/home/accounts/dashboard"}],this.allAccountsCount=0,this.weekTransactionsCount=0,this.transactionsLineChartData=[{data:[0],label:"Transactions"}],this.transactionsLineChartLabels=[""],this.chartOptions={},this.today=C()()}ngOnInit(){this.initChart(),this.getAllUserAccount(),this.getWeekTransaction()}initChart(){this.chartOptions={responsive:!0,scales:{yAxes:[{min:0,ticks:{stepSize:1,beginAtZero:!0}}]}}}getAllUserAccount(){this.accountsApi.getAllUserAccount().then(e=>{console.log(e),this.allAccountsData=e.docs,this.allAccountsCount=e.docs.length},e=>{console.log(e),this.connectionToast.openToast()})}getWeekTransaction(){this.accountsApi.getWeekTransaction(C()(this.today).add(-6,"days").toDate(),this.today.toDate()).then(e=>{console.log(e),this.weekTransactionsData=e.docs,this.weekTransactionsCount=e.docs.length,this.setTransactionChartData()},e=>{console.log(e),this.connectionToast.openToast()})}setTransactionChartData(){this.transactionsLineChartLabels=[];for(let o=7;o>0;o--){var e=C()(this.today).add(-o,"days");this.transactionsLineChartLabels.push(e.toDate().toISOString().slice(0,10))}console.log(this.transactionsLineChartLabels);let n=[];for(let o=7;o>0;o--)n.push(0);console.log(n),this.weekTransactionsData.forEach(o=>{var c=o.data().created_at.toDate().toISOString().slice(0,10);for(let l=7;l>0;l--)this.transactionsLineChartLabels[l]==c&&n[l]++}),console.log(n),this.transactionsLineChartData=[{data:n,label:"Transactions"}]}}return a.\u0275fac=function(e){return new(e||a)(t.\u0275\u0275directiveInject(h.H))},a.\u0275cmp=t.\u0275\u0275defineComponent({type:a,selectors:[["app-dashboard"]],viewQuery:function(e,n){if(1&e&&t.\u0275\u0275viewQuery(Yt,5,u.Y),2&e){let o;t.\u0275\u0275queryRefresh(o=t.\u0275\u0275loadQuery())&&(n.connectionToast=o.first)}},decls:32,vars:8,consts:[[3,"headings"],[1,"container"],[1,"row"],[1,"col-md-3","mb-4"],[1,"card","border-left-secondary","shadow","h-100","py-2"],[1,"card-body"],[1,"row","no-gutters","align-items-center"],[1,"col","mr-2"],[1,"text-xs","font-weight-bold","text-uppercase","mb-1"],[1,"h5","mb-0","font-weight-bold","text-gray-800"],[1,"col-md-8"],[1,"card","shadow","mb-4"],[1,"card-header","py-3","d-flex","flex-row","align-items-center","justify-content-between"],[1,"m-0","font-weight-bold"],[1,"chart-area"],["baseChart","",3,"datasets","labels","options","legend","chartType"],["connectionToastComponentReference",""]],template:function(e,n){1&e&&(t.\u0275\u0275element(0,"app-module-topnav",0),t.\u0275\u0275elementStart(1,"div",1),t.\u0275\u0275elementStart(2,"div",2),t.\u0275\u0275elementStart(3,"div",3),t.\u0275\u0275elementStart(4,"div",4),t.\u0275\u0275elementStart(5,"div",5),t.\u0275\u0275elementStart(6,"div",6),t.\u0275\u0275elementStart(7,"div",7),t.\u0275\u0275elementStart(8,"div",8),t.\u0275\u0275text(9,"All Accounts"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(10,"div",9),t.\u0275\u0275text(11),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(12,"div",3),t.\u0275\u0275elementStart(13,"div",4),t.\u0275\u0275elementStart(14,"div",5),t.\u0275\u0275elementStart(15,"div",6),t.\u0275\u0275elementStart(16,"div",7),t.\u0275\u0275elementStart(17,"div",8),t.\u0275\u0275text(18,"Transactions this Week"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(19,"div",9),t.\u0275\u0275text(20),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(21,"div",2),t.\u0275\u0275elementStart(22,"div",10),t.\u0275\u0275elementStart(23,"div",11),t.\u0275\u0275elementStart(24,"div",12),t.\u0275\u0275elementStart(25,"h6",13),t.\u0275\u0275text(26,"Total Transactions by Day"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(27,"div",5),t.\u0275\u0275elementStart(28,"div",14),t.\u0275\u0275element(29,"canvas",15),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(30,"app-connection-toast",null,16)),2&e&&(t.\u0275\u0275property("headings",n.navHeading),t.\u0275\u0275advance(11),t.\u0275\u0275textInterpolate(n.allAccountsCount),t.\u0275\u0275advance(9),t.\u0275\u0275textInterpolate(n.weekTransactionsCount),t.\u0275\u0275advance(9),t.\u0275\u0275property("datasets",n.transactionsLineChartData)("labels",n.transactionsLineChartLabels)("options",n.chartOptions)("legend",!0)("chartType","line"))},directives:[g.H,P.jh,u.Y],styles:[""]}),a})();const zt=[{path:"",component:Q,children:[{path:"",component:N},{path:"dashboard",component:N},{path:"all-accounts",component:nt},{path:"view-account",component:Tt,canActivate:[(()=>{class a{constructor(e){this.router=e}canActivate(e){return!!sessionStorage.getItem("personal_account_id")||(this.router.navigateByUrl("/home/accounts"),!1)}}return a.\u0275fac=function(e){return new(e||a)(t.\u0275\u0275inject(p.F0))},a.\u0275prov=t.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"}),a})()]},{path:"all-transactions",component:Ut}]}];let Jt=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=t.\u0275\u0275defineInjector({imports:[[p.Bz.forChild(zt)],p.Bz]}),a})();var $t=s(7264),V=s(5018);let Wt=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=t.\u0275\u0275defineInjector({imports:[[d.ez,p.Bz,r.u5,r.UX,P.m9,V.p]]}),a})(),Zt=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=t.\u0275\u0275defineInjector({imports:[[d.ez,Jt,$t.M,V.p,Wt]]}),a})()}}]);